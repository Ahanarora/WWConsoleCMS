function p_(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jd={exports:{}},dl={},Xd={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function wT(){if(ry)return Ze;ry=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,U={};function H(j,X,me){this.props=j,this.context=X,this.refs=U,this.updater=me||R}H.prototype.isReactComponent={},H.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},H.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function fe(){}fe.prototype=H.prototype;function Z(j,X,me){this.props=j,this.context=X,this.refs=U,this.updater=me||R}var ce=Z.prototype=new fe;ce.constructor=Z,L(ce,H.prototype),ce.isPureReactComponent=!0;var pe=Array.isArray,Ue=Object.prototype.hasOwnProperty,Fe={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(j,X,me){var $e,Oe={},z=null,Q=null;if(X!=null)for($e in X.ref!==void 0&&(Q=X.ref),X.key!==void 0&&(z=""+X.key),X)Ue.call(X,$e)&&!S.hasOwnProperty($e)&&(Oe[$e]=X[$e]);var q=arguments.length-2;if(q===1)Oe.children=me;else if(1<q){for(var re=Array(q),ue=0;ue<q;ue++)re[ue]=arguments[ue+2];Oe.children=re}if(j&&j.defaultProps)for($e in q=j.defaultProps,q)Oe[$e]===void 0&&(Oe[$e]=q[$e]);return{$$typeof:n,type:j,key:z,ref:Q,props:Oe,_owner:Fe.current}}function P(j,X){return{$$typeof:n,type:j.type,key:X,ref:j.ref,props:j.props,_owner:j._owner}}function N(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function O(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(me){return X[me]})}var M=/\/+/g;function k(j,X){return typeof j=="object"&&j!==null&&j.key!=null?O(""+j.key):X.toString(36)}function Ke(j,X,me,$e,Oe){var z=typeof j;(z==="undefined"||z==="boolean")&&(j=null);var Q=!1;if(j===null)Q=!0;else switch(z){case"string":case"number":Q=!0;break;case"object":switch(j.$$typeof){case n:case e:Q=!0}}if(Q)return Q=j,Oe=Oe(Q),j=$e===""?"."+k(Q,0):$e,pe(Oe)?(me="",j!=null&&(me=j.replace(M,"$&/")+"/"),Ke(Oe,X,me,"",function(ue){return ue})):Oe!=null&&(N(Oe)&&(Oe=P(Oe,me+(!Oe.key||Q&&Q.key===Oe.key?"":(""+Oe.key).replace(M,"$&/")+"/")+j)),X.push(Oe)),1;if(Q=0,$e=$e===""?".":$e+":",pe(j))for(var q=0;q<j.length;q++){z=j[q];var re=$e+k(z,q);Q+=Ke(z,X,me,re,Oe)}else if(re=T(j),typeof re=="function")for(j=re.call(j),q=0;!(z=j.next()).done;)z=z.value,re=$e+k(z,q++),Q+=Ke(z,X,me,re,Oe);else if(z==="object")throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Q}function lt(j,X,me){if(j==null)return j;var $e=[],Oe=0;return Ke(j,$e,"","",function(z){return X.call(me,z,Oe++)}),$e}function vt(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(me){(j._status===0||j._status===-1)&&(j._status=1,j._result=me)},function(me){(j._status===0||j._status===-1)&&(j._status=2,j._result=me)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var Qe={current:null},oe={transition:null},ke={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:oe,ReactCurrentOwner:Fe};function ge(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:lt,forEach:function(j,X,me){lt(j,function(){X.apply(this,arguments)},me)},count:function(j){var X=0;return lt(j,function(){X++}),X},toArray:function(j){return lt(j,function(X){return X})||[]},only:function(j){if(!N(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ze.Component=H,Ze.Fragment=t,Ze.Profiler=o,Ze.PureComponent=Z,Ze.StrictMode=i,Ze.Suspense=p,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,Ze.act=ge,Ze.cloneElement=function(j,X,me){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var $e=L({},j.props),Oe=j.key,z=j.ref,Q=j._owner;if(X!=null){if(X.ref!==void 0&&(z=X.ref,Q=Fe.current),X.key!==void 0&&(Oe=""+X.key),j.type&&j.type.defaultProps)var q=j.type.defaultProps;for(re in X)Ue.call(X,re)&&!S.hasOwnProperty(re)&&($e[re]=X[re]===void 0&&q!==void 0?q[re]:X[re])}var re=arguments.length-2;if(re===1)$e.children=me;else if(1<re){q=Array(re);for(var ue=0;ue<re;ue++)q[ue]=arguments[ue+2];$e.children=q}return{$$typeof:n,type:j.type,key:Oe,ref:z,props:$e,_owner:Q}},Ze.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Ze.createElement=C,Ze.createFactory=function(j){var X=C.bind(null,j);return X.type=j,X},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(j){return{$$typeof:d,render:j}},Ze.isValidElement=N,Ze.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:vt}},Ze.memo=function(j,X){return{$$typeof:y,type:j,compare:X===void 0?null:X}},Ze.startTransition=function(j){var X=oe.transition;oe.transition={};try{j()}finally{oe.transition=X}},Ze.unstable_act=ge,Ze.useCallback=function(j,X){return Qe.current.useCallback(j,X)},Ze.useContext=function(j){return Qe.current.useContext(j)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(j){return Qe.current.useDeferredValue(j)},Ze.useEffect=function(j,X){return Qe.current.useEffect(j,X)},Ze.useId=function(){return Qe.current.useId()},Ze.useImperativeHandle=function(j,X,me){return Qe.current.useImperativeHandle(j,X,me)},Ze.useInsertionEffect=function(j,X){return Qe.current.useInsertionEffect(j,X)},Ze.useLayoutEffect=function(j,X){return Qe.current.useLayoutEffect(j,X)},Ze.useMemo=function(j,X){return Qe.current.useMemo(j,X)},Ze.useReducer=function(j,X,me){return Qe.current.useReducer(j,X,me)},Ze.useRef=function(j){return Qe.current.useRef(j)},Ze.useState=function(j){return Qe.current.useState(j)},Ze.useSyncExternalStore=function(j,X,me){return Qe.current.useSyncExternalStore(j,X,me)},Ze.useTransition=function(){return Qe.current.useTransition()},Ze.version="18.3.1",Ze}var iy;function Kf(){return iy||(iy=1,Xd.exports=wT()),Xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function ET(){if(sy)return dl;sy=1;var n=Kf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var _,E={},T=null,R=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(R=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:T,ref:R,props:E,_owner:o.current}}return dl.Fragment=t,dl.jsx=c,dl.jsxs=c,dl}var oy;function TT(){return oy||(oy=1,Jd.exports=ET()),Jd.exports}var A=TT(),J=Kf();const m_=Gf(J),IT=p_({__proto__:null,default:m_},[J]);var sc={},Zd={exports:{}},Un={},ef={exports:{}},tf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function ST(){return ay||(ay=1,(function(n){function e(oe,ke){var ge=oe.length;oe.push(ke);e:for(;0<ge;){var j=ge-1>>>1,X=oe[j];if(0<o(X,ke))oe[j]=ke,oe[ge]=X,ge=j;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ke=oe[0],ge=oe.pop();if(ge!==ke){oe[0]=ge;e:for(var j=0,X=oe.length,me=X>>>1;j<me;){var $e=2*(j+1)-1,Oe=oe[$e],z=$e+1,Q=oe[z];if(0>o(Oe,ge))z<X&&0>o(Q,Oe)?(oe[j]=Q,oe[z]=ge,j=z):(oe[j]=Oe,oe[$e]=ge,j=$e);else if(z<X&&0>o(Q,ge))oe[j]=Q,oe[z]=ge,j=z;else break e}}return ke}function o(oe,ke){var ge=oe.sortIndex-ke.sortIndex;return ge!==0?ge:oe.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],y=[],_=1,E=null,T=3,R=!1,L=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(oe){for(var ke=t(y);ke!==null;){if(ke.callback===null)i(y);else if(ke.startTime<=oe)i(y),ke.sortIndex=ke.expirationTime,e(p,ke);else break;ke=t(y)}}function pe(oe){if(U=!1,ce(oe),!L)if(t(p)!==null)L=!0,vt(Ue);else{var ke=t(y);ke!==null&&Qe(pe,ke.startTime-oe)}}function Ue(oe,ke){L=!1,U&&(U=!1,fe(C),C=-1),R=!0;var ge=T;try{for(ce(ke),E=t(p);E!==null&&(!(E.expirationTime>ke)||oe&&!O());){var j=E.callback;if(typeof j=="function"){E.callback=null,T=E.priorityLevel;var X=j(E.expirationTime<=ke);ke=n.unstable_now(),typeof X=="function"?E.callback=X:E===t(p)&&i(p),ce(ke)}else i(p);E=t(p)}if(E!==null)var me=!0;else{var $e=t(y);$e!==null&&Qe(pe,$e.startTime-ke),me=!1}return me}finally{E=null,T=ge,R=!1}}var Fe=!1,S=null,C=-1,P=5,N=-1;function O(){return!(n.unstable_now()-N<P)}function M(){if(S!==null){var oe=n.unstable_now();N=oe;var ke=!0;try{ke=S(!0,oe)}finally{ke?k():(Fe=!1,S=null)}}else Fe=!1}var k;if(typeof Z=="function")k=function(){Z(M)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,lt=Ke.port2;Ke.port1.onmessage=M,k=function(){lt.postMessage(null)}}else k=function(){H(M,0)};function vt(oe){S=oe,Fe||(Fe=!0,k())}function Qe(oe,ke){C=H(function(){oe(n.unstable_now())},ke)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){L||R||(L=!0,vt(Ue))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var ke=3;break;default:ke=T}var ge=T;T=ke;try{return oe()}finally{T=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ke){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ge=T;T=oe;try{return ke()}finally{T=ge}},n.unstable_scheduleCallback=function(oe,ke,ge){var j=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?j+ge:j):ge=j,oe){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ge+X,oe={id:_++,callback:ke,priorityLevel:oe,startTime:ge,expirationTime:X,sortIndex:-1},ge>j?(oe.sortIndex=ge,e(y,oe),t(p)===null&&oe===t(y)&&(U?(fe(C),C=-1):U=!0,Qe(pe,ge-j))):(oe.sortIndex=X,e(p,oe),L||R||(L=!0,vt(Ue))),oe},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(oe){var ke=T;return function(){var ge=T;T=ke;try{return oe.apply(this,arguments)}finally{T=ge}}}})(tf)),tf}var ly;function CT(){return ly||(ly=1,ef.exports=ST()),ef.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function RT(){if(uy)return Un;uy=1;var n=Kf(),e=CT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function T(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function R(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function L(r,s,a,h){if(s===null||typeof s>"u"||R(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){H[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];H[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){H[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){H[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){H[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){H[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){H[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){H[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){H[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var fe=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(fe,Z);H[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(fe,Z);H[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(fe,Z);H[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){H[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),H.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){H[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function ce(r,s,a,h){var f=H.hasOwnProperty(s)?H[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,f,h)&&(a=null),h||f===null?T(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var pe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ue=Symbol.for("react.element"),Fe=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),vt=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ke(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var ge=Object.assign,j;function X(r){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var me=!1;function $e(r,s){if(!r||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var h=K}Reflect.construct(r,[],s)}else{try{s.call()}catch(K){h=K}r.call(s.prototype)}else{try{throw Error()}catch(K){h=K}r()}}catch(K){if(K&&h&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,x=g.length-1;1<=w&&0<=x&&f[w]!==g[x];)x--;for(;1<=w&&0<=x;w--,x--)if(f[w]!==g[x]){if(w!==1||x!==1)do if(w--,x--,0>x||f[w]!==g[x]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=x);break}}}finally{me=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?X(r):""}function Oe(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=$e(r.type,!1),r;case 11:return r=$e(r.type.render,!1),r;case 1:return r=$e(r.type,!0),r;default:return""}}function z(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case Fe:return"Portal";case P:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case Ke:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case lt:return s=r.displayName||null,s!==null?s:z(r.type)||"Memo";case vt:s=r._payload,r=r._init;try{return z(r(s))}catch{}}return null}function Q(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function q(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function re(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ue(r){var s=re(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function _e(r){r._valueTracker||(r._valueTracker=ue(r))}function ye(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=re(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function be(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function dt(r,s){var a=s.checked;return ge({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Et(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=q(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Mt(r,s){s=s.checked,s!=null&&ce(r,"checked",s,!1)}function Vr(r,s){Mt(r,s);var a=q(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?hi(r,s.type,a):s.hasOwnProperty("defaultValue")&&hi(r,s.type,q(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function So(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function hi(r,s,a){(s!=="number"||be(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var gr=Array.isArray;function yr(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+q(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Ms(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ge({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Fi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:q(a)}}function Pn(r,s){var a=q(s.value),h=q(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function vr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Ot(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Ot(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Xt,Sn=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Xt=Xt||document.createElement("div"),Xt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Xt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function _r(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},di=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(r){di.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),nr[s]=nr[r]})});function xn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||nr.hasOwnProperty(r)&&nr[r]?(""+s).trim():s+"px"}function Ui(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=xn(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var ji=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zi(r,s){if(s){if(ji[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Fs(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mr=null;function wr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var fi=null,pn=null,kn=null;function Bi(r){if(r=Ja(r)){if(typeof fi!="function")throw Error(t(280));var s=r.stateNode;s&&(s=wu(s),fi(r.stateNode,r.type,s))}}function Hn(r){pn?kn?kn.push(r):kn=[r]:pn=r}function Us(){if(pn){var r=pn,s=kn;if(kn=pn=null,Bi(r),s)for(r=0;r<s.length;r++)Bi(s[r])}}function Fr(r,s){return r(s)}function Ur(){}var Nn=!1;function js(r,s,a){if(Nn)return r(s,a);Nn=!0;try{return Fr(r,s,a)}finally{Nn=!1,(pn!==null||kn!==null)&&(Ur(),Us())}}function kt(r,s){var a=r.stateNode;if(a===null)return null;var h=wu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var b=!1;if(d)try{var F={};Object.defineProperty(F,"passive",{get:function(){b=!0}}),window.addEventListener("test",F,F),window.removeEventListener("test",F,F)}catch{b=!1}function G(r,s,a,h,f,g,w,x,D){var K=Array.prototype.slice.call(arguments,3);try{s.apply(a,K)}catch(se){this.onError(se)}}var te=!1,de=null,Se=!1,Le=null,Ce={onError:function(r){te=!0,de=r}};function Ie(r,s,a,h,f,g,w,x,D){te=!1,de=null,G.apply(Ce,arguments)}function we(r,s,a,h,f,g,w,x,D){if(Ie.apply(this,arguments),te){if(te){var K=de;te=!1,de=null}else throw Error(t(198));Se||(Se=!0,Le=K)}}function Ee(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function je(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function We(r){if(Ee(r)!==r)throw Error(t(188))}function Lt(r){var s=r.alternate;if(!s){if(s=Ee(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return We(f),r;if(g===h)return We(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,x=f.child;x;){if(x===a){w=!0,a=f,h=g;break}if(x===h){w=!0,h=f,a=g;break}x=x.sibling}if(!w){for(x=g.child;x;){if(x===a){w=!0,a=g,h=f;break}if(x===h){w=!0,h=g,a=f;break}x=x.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ct(r){return r=Lt(r),r!==null?Xe(r):null}function Xe(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Xe(r);if(s!==null)return s;r=r.sibling}return null}var mt=e.unstable_scheduleCallback,rr=e.unstable_cancelCallback,jr=e.unstable_shouldYield,Wn=e.unstable_requestPaint,et=e.unstable_now,$i=e.unstable_getCurrentPriorityLevel,qn=e.unstable_ImmediatePriority,mn=e.unstable_UserBlockingPriority,on=e.unstable_NormalPriority,zr=e.unstable_LowPriority,tt=e.unstable_IdlePriority,ft=null,jt=null;function Br(r){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:Co,ir=Math.log,zs=Math.LN2;function Co(r){return r>>>=0,r===0?32:31-(ir(r)/zs|0)|0}var Ro=64,Ao=4194304;function Hi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Bs(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var x=w&~f;x!==0?h=Hi(x):(g&=w,g!==0&&(h=Hi(g)))}else w=a&~f,w!==0?h=Hi(w):g!==0&&(h=Hi(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-nt(s),f=1<<a,h|=r[a],s&=~f;return h}function Ah(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-nt(g),x=1<<w,D=f[w];D===-1?((x&a)===0||(x&h)!==0)&&(f[w]=Ah(x,s)):D<=s&&(r.expiredLanes|=x),g&=~x}}function Gn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $s(){var r=Ro;return Ro<<=1,(Ro&4194240)===0&&(Ro=64),r}function Wi(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function qi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-nt(s),r[s]=a}function _t(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-nt(a),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~g}}function Gi(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-nt(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var st=0;function Ki(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Zl,Po,eu,tu,nu,Va=!1,$r=[],an=null,Er=null,Tr=null,Qi=new Map,sr=new Map,Hr=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(r,s){switch(r){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Qi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(s.pointerId)}}function bn(r,s,a,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ja(s),s!==null&&Po(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function xh(r,s,a,h,f){switch(s){case"focusin":return an=bn(an,r,s,a,h,f),!0;case"dragenter":return Er=bn(Er,r,s,a,h,f),!0;case"mouseover":return Tr=bn(Tr,r,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Qi.set(g,bn(Qi.get(g)||null,r,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,sr.set(g,bn(sr.get(g)||null,r,s,a,h,f)),!0}return!1}function iu(r){var s=Ks(r.target);if(s!==null){var a=Ee(s);if(a!==null){if(s=a.tag,s===13){if(s=je(a),s!==null){r.blockedOn=s,nu(r.priority,function(){eu(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function mi(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=xo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Mr=h,a.target.dispatchEvent(h),Mr=null}else return s=Ja(a),s!==null&&Po(s),r.blockedOn=a,!1;s.shift()}return!0}function Hs(r,s,a){mi(r)&&a.delete(s)}function su(){Va=!1,an!==null&&mi(an)&&(an=null),Er!==null&&mi(Er)&&(Er=null),Tr!==null&&mi(Tr)&&(Tr=null),Qi.forEach(Hs),sr.forEach(Hs)}function Ir(r,s){r.blockedOn===s&&(r.blockedOn=null,Va||(Va=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,su)))}function Sr(r){function s(f){return Ir(f,r)}if(0<$r.length){Ir($r[0],r);for(var a=1;a<$r.length;a++){var h=$r[a];h.blockedOn===r&&(h.blockedOn=null)}}for(an!==null&&Ir(an,r),Er!==null&&Ir(Er,r),Tr!==null&&Ir(Tr,r),Qi.forEach(s),sr.forEach(s),a=0;a<Hr.length;a++)h=Hr[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Hr.length&&(a=Hr[0],a.blockedOn===null);)iu(a),a.blockedOn===null&&Hr.shift()}var gi=pe.ReactCurrentBatchConfig,Yi=!0;function Rt(r,s,a,h){var f=st,g=gi.transition;gi.transition=null;try{st=1,Ma(r,s,a,h)}finally{st=f,gi.transition=g}}function kh(r,s,a,h){var f=st,g=gi.transition;gi.transition=null;try{st=4,Ma(r,s,a,h)}finally{st=f,gi.transition=g}}function Ma(r,s,a,h){if(Yi){var f=xo(r,s,a,h);if(f===null)zh(r,s,h,Ws,a),ru(r,h);else if(xh(f,r,s,a,h))h.stopPropagation();else if(ru(r,h),s&4&&-1<Ph.indexOf(r)){for(;f!==null;){var g=Ja(f);if(g!==null&&Zl(g),g=xo(r,s,a,h),g===null&&zh(r,s,h,Ws,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else zh(r,s,h,null,a)}}var Ws=null;function xo(r,s,a,h){if(Ws=null,r=wr(h),r=Ks(r),r!==null)if(s=Ee(r),s===null)r=null;else if(a=s.tag,a===13){if(r=je(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ws=r,null}function Fa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($i()){case qn:return 1;case mn:return 4;case on:case zr:return 16;case tt:return 536870912;default:return 16}default:return 16}}var Kn=null,ko=null,Dn=null;function Ua(){if(Dn)return Dn;var r,s=ko,a=s.length,h,f="value"in Kn?Kn.value:Kn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return Dn=f.slice(r,1<h?1-h:void 0)}function No(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Wr(){return!0}function ja(){return!1}function ln(r){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(a=r[x],this[x]=a?a(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wr:ja,this.isPropagationStopped=ja,this}return ge(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),s}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=ln(Cr),qr=ge({},Cr,{view:0,detail:0}),Nh=ln(qr),Do,yi,Ji,qs=ge({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ji&&(Ji&&r.type==="mousemove"?(Do=r.screenX-Ji.screenX,yi=r.screenY-Ji.screenY):yi=Do=0,Ji=r),Do)},movementY:function(r){return"movementY"in r?r.movementY:yi}}),Oo=ln(qs),za=ge({},qs,{dataTransfer:0}),ou=ln(za),Lo=ge({},qr,{relatedTarget:0}),Vo=ln(Lo),au=ge({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),vi=ln(au),lu=ge({},Cr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),uu=ln(lu),cu=ge({},Cr,{data:0}),Ba=ln(cu),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=hu[r])?!!s[r]:!1}function Gr(){return du}var u=ge({},qr,{key:function(r){if(r.key){var s=Mo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=No(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(r){return r.type==="keypress"?No(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?No(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=ln(u),v=ge({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=ln(v),B=ge({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),Y=ln(B),he=ge({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gt=ln(he),Gt=ge({},qs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=ln(Gt),Zt=[9,13,27,32],zt=d&&"CompositionEvent"in window,or=null;d&&"documentMode"in document&&(or=document.documentMode);var Qn=d&&"TextEvent"in window&&!or,Gs=d&&(!zt||or&&8<or&&11>=or),Fo=" ",Jp=!1;function Xp(r,s){switch(r){case"keyup":return Zt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Uo=!1;function y0(r,s){switch(r){case"compositionend":return Zp(s);case"keypress":return s.which!==32?null:(Jp=!0,Fo);case"textInput":return r=s.data,r===Fo&&Jp?null:r;default:return null}}function v0(r,s){if(Uo)return r==="compositionend"||!zt&&Xp(r,s)?(r=Ua(),Dn=ko=Kn=null,Uo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gs&&s.locale!=="ko"?null:s.data;default:return null}}var _0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!_0[r.type]:s==="textarea"}function tm(r,s,a,h){Hn(h),s=yu(s,"onChange"),0<s.length&&(a=new bo("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var $a=null,Ha=null;function w0(r){_m(r,0)}function fu(r){var s=Ho(r);if(ye(s))return r}function E0(r,s){if(r==="change")return s}var nm=!1;if(d){var bh;if(d){var Dh="oninput"in document;if(!Dh){var rm=document.createElement("div");rm.setAttribute("oninput","return;"),Dh=typeof rm.oninput=="function"}bh=Dh}else bh=!1;nm=bh&&(!document.documentMode||9<document.documentMode)}function im(){$a&&($a.detachEvent("onpropertychange",sm),Ha=$a=null)}function sm(r){if(r.propertyName==="value"&&fu(Ha)){var s=[];tm(s,Ha,r,wr(r)),js(w0,s)}}function T0(r,s,a){r==="focusin"?(im(),$a=s,Ha=a,$a.attachEvent("onpropertychange",sm)):r==="focusout"&&im()}function I0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fu(Ha)}function S0(r,s){if(r==="click")return fu(s)}function C0(r,s){if(r==="input"||r==="change")return fu(s)}function R0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rr=typeof Object.is=="function"?Object.is:R0;function Wa(r,s){if(Rr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Rr(r[f],s[f]))return!1}return!0}function om(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function am(r,s){var a=om(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=om(a)}}function lm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?lm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function um(){for(var r=window,s=be();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=be(r.document)}return s}function Oh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function A0(r){var s=um(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&lm(a.ownerDocument.documentElement,a)){if(h!==null&&Oh(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=am(a,g);var w=am(a,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var P0=d&&"documentMode"in document&&11>=document.documentMode,jo=null,Lh=null,qa=null,Vh=!1;function cm(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vh||jo==null||jo!==be(h)||(h=jo,"selectionStart"in h&&Oh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),qa&&Wa(qa,h)||(qa=h,h=yu(Lh,"onSelect"),0<h.length&&(s=new bo("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=jo)))}function pu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var zo={animationend:pu("Animation","AnimationEnd"),animationiteration:pu("Animation","AnimationIteration"),animationstart:pu("Animation","AnimationStart"),transitionend:pu("Transition","TransitionEnd")},Mh={},hm={};d&&(hm=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function mu(r){if(Mh[r])return Mh[r];if(!zo[r])return r;var s=zo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in hm)return Mh[r]=s[a];return r}var dm=mu("animationend"),fm=mu("animationiteration"),pm=mu("animationstart"),mm=mu("transitionend"),gm=new Map,ym="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(r,s){gm.set(r,s),l(s,[r])}for(var Fh=0;Fh<ym.length;Fh++){var Uh=ym[Fh],x0=Uh.toLowerCase(),k0=Uh[0].toUpperCase()+Uh.slice(1);Xi(x0,"on"+k0)}Xi(dm,"onAnimationEnd"),Xi(fm,"onAnimationIteration"),Xi(pm,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(mm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function vm(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,we(h,s,void 0,r),r.currentTarget=null}function _m(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var x=h[w],D=x.instance,K=x.currentTarget;if(x=x.listener,D!==g&&f.isPropagationStopped())break e;vm(f,x,K),g=D}else for(w=0;w<h.length;w++){if(x=h[w],D=x.instance,K=x.currentTarget,x=x.listener,D!==g&&f.isPropagationStopped())break e;vm(f,x,K),g=D}}}if(Se)throw r=Le,Se=!1,Le=null,r}function Tt(r,s){var a=s[Gh];a===void 0&&(a=s[Gh]=new Set);var h=r+"__bubble";a.has(h)||(wm(s,r,2,!1),a.add(h))}function jh(r,s,a){var h=0;s&&(h|=4),wm(a,r,h,s)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Ka(r){if(!r[gu]){r[gu]=!0,i.forEach(function(a){a!=="selectionchange"&&(N0.has(a)||jh(a,!1,r),jh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[gu]||(s[gu]=!0,jh("selectionchange",!1,s))}}function wm(r,s,a,h){switch(Fa(s)){case 1:var f=Rt;break;case 4:f=kh;break;default:f=Ma}a=f.bind(null,s,a,r),f=void 0,!b||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function zh(r,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var x=h.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;x!==null;){if(w=Ks(x),w===null)return;if(D=w.tag,D===5||D===6){h=g=w;continue e}x=x.parentNode}}h=h.return}js(function(){var K=g,se=wr(a),ae=[];e:{var ie=gm.get(r);if(ie!==void 0){var ve=bo,Ae=r;switch(r){case"keypress":if(No(a)===0)break e;case"keydown":case"keyup":ve=m;break;case"focusin":Ae="focus",ve=Vo;break;case"focusout":Ae="blur",ve=Vo;break;case"beforeblur":case"afterblur":ve=Vo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Y;break;case dm:case fm:case pm:ve=vi;break;case mm:ve=gt;break;case"scroll":ve=Nh;break;case"wheel":ve=ot;break;case"copy":case"cut":case"paste":ve=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=I}var Pe=(s&4)!==0,Ft=!Pe&&r==="scroll",$=Pe?ie!==null?ie+"Capture":null:ie;Pe=[];for(var V=K,W;V!==null;){W=V;var le=W.stateNode;if(W.tag===5&&le!==null&&(W=le,$!==null&&(le=kt(V,$),le!=null&&Pe.push(Qa(V,le,W)))),Ft)break;V=V.return}0<Pe.length&&(ie=new ve(ie,Ae,null,a,se),ae.push({event:ie,listeners:Pe}))}}if((s&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",ve=r==="mouseout"||r==="pointerout",ie&&a!==Mr&&(Ae=a.relatedTarget||a.fromElement)&&(Ks(Ae)||Ae[_i]))break e;if((ve||ie)&&(ie=se.window===se?se:(ie=se.ownerDocument)?ie.defaultView||ie.parentWindow:window,ve?(Ae=a.relatedTarget||a.toElement,ve=K,Ae=Ae?Ks(Ae):null,Ae!==null&&(Ft=Ee(Ae),Ae!==Ft||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(ve=null,Ae=K),ve!==Ae)){if(Pe=Oo,le="onMouseLeave",$="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=I,le="onPointerLeave",$="onPointerEnter",V="pointer"),Ft=ve==null?ie:Ho(ve),W=Ae==null?ie:Ho(Ae),ie=new Pe(le,V+"leave",ve,a,se),ie.target=Ft,ie.relatedTarget=W,le=null,Ks(se)===K&&(Pe=new Pe($,V+"enter",Ae,a,se),Pe.target=W,Pe.relatedTarget=Ft,le=Pe),Ft=le,ve&&Ae)t:{for(Pe=ve,$=Ae,V=0,W=Pe;W;W=Bo(W))V++;for(W=0,le=$;le;le=Bo(le))W++;for(;0<V-W;)Pe=Bo(Pe),V--;for(;0<W-V;)$=Bo($),W--;for(;V--;){if(Pe===$||$!==null&&Pe===$.alternate)break t;Pe=Bo(Pe),$=Bo($)}Pe=null}else Pe=null;ve!==null&&Em(ae,ie,ve,Pe,!1),Ae!==null&&Ft!==null&&Em(ae,Ft,Ae,Pe,!0)}}e:{if(ie=K?Ho(K):window,ve=ie.nodeName&&ie.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ie.type==="file")var Ne=E0;else if(em(ie))if(nm)Ne=C0;else{Ne=I0;var Ve=T0}else(ve=ie.nodeName)&&ve.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ne=S0);if(Ne&&(Ne=Ne(r,K))){tm(ae,Ne,a,se);break e}Ve&&Ve(r,ie,K),r==="focusout"&&(Ve=ie._wrapperState)&&Ve.controlled&&ie.type==="number"&&hi(ie,"number",ie.value)}switch(Ve=K?Ho(K):window,r){case"focusin":(em(Ve)||Ve.contentEditable==="true")&&(jo=Ve,Lh=K,qa=null);break;case"focusout":qa=Lh=jo=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,cm(ae,a,se);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":cm(ae,a,se)}var Me;if(zt)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Uo?Xp(r,a)&&(He="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Gs&&a.locale!=="ko"&&(Uo||He!=="onCompositionStart"?He==="onCompositionEnd"&&Uo&&(Me=Ua()):(Kn=se,ko="value"in Kn?Kn.value:Kn.textContent,Uo=!0)),Ve=yu(K,He),0<Ve.length&&(He=new Ba(He,r,null,a,se),ae.push({event:He,listeners:Ve}),Me?He.data=Me:(Me=Zp(a),Me!==null&&(He.data=Me)))),(Me=Qn?y0(r,a):v0(r,a))&&(K=yu(K,"onBeforeInput"),0<K.length&&(se=new Ba("onBeforeInput","beforeinput",null,a,se),ae.push({event:se,listeners:K}),se.data=Me))}_m(ae,s)})}function Qa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function yu(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=kt(r,a),g!=null&&h.unshift(Qa(r,g,f)),g=kt(r,s),g!=null&&h.push(Qa(r,g,f))),r=r.return}return h}function Bo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Em(r,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var x=a,D=x.alternate,K=x.stateNode;if(D!==null&&D===h)break;x.tag===5&&K!==null&&(x=K,f?(D=kt(a,g),D!=null&&w.unshift(Qa(a,D,x))):f||(D=kt(a,g),D!=null&&w.push(Qa(a,D,x)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var b0=/\r\n?/g,D0=/\u0000|\uFFFD/g;function Tm(r){return(typeof r=="string"?r:""+r).replace(b0,`
`).replace(D0,"")}function vu(r,s,a){if(s=Tm(s),Tm(r)!==s&&a)throw Error(t(425))}function _u(){}var Bh=null,$h=null;function Hh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,O0=typeof clearTimeout=="function"?clearTimeout:void 0,Im=typeof Promise=="function"?Promise:void 0,L0=typeof queueMicrotask=="function"?queueMicrotask:typeof Im<"u"?function(r){return Im.resolve(null).then(r).catch(V0)}:Wh;function V0(r){setTimeout(function(){throw r})}function qh(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),Sr(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Sr(s)}function Zi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Sm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var $o=Math.random().toString(36).slice(2),Kr="__reactFiber$"+$o,Ya="__reactProps$"+$o,_i="__reactContainer$"+$o,Gh="__reactEvents$"+$o,M0="__reactListeners$"+$o,F0="__reactHandles$"+$o;function Ks(r){var s=r[Kr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[_i]||a[Kr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Sm(r);r!==null;){if(a=r[Kr])return a;r=Sm(r)}return s}r=a,a=r.parentNode}return null}function Ja(r){return r=r[Kr]||r[_i],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ho(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function wu(r){return r[Ya]||null}var Kh=[],Wo=-1;function es(r){return{current:r}}function It(r){0>Wo||(r.current=Kh[Wo],Kh[Wo]=null,Wo--)}function wt(r,s){Wo++,Kh[Wo]=r.current,r.current=s}var ts={},gn=es(ts),On=es(!1),Qs=ts;function qo(r,s){var a=r.type.contextTypes;if(!a)return ts;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Ln(r){return r=r.childContextTypes,r!=null}function Eu(){It(On),It(gn)}function Cm(r,s,a){if(gn.current!==ts)throw Error(t(168));wt(gn,s),wt(On,a)}function Rm(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Q(r)||"Unknown",f));return ge({},a,h)}function Tu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ts,Qs=gn.current,wt(gn,r),wt(On,On.current),!0}function Am(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Rm(r,s,Qs),h.__reactInternalMemoizedMergedChildContext=r,It(On),It(gn),wt(gn,r)):It(On),wt(On,a)}var wi=null,Iu=!1,Qh=!1;function Pm(r){wi===null?wi=[r]:wi.push(r)}function U0(r){Iu=!0,Pm(r)}function ns(){if(!Qh&&wi!==null){Qh=!0;var r=0,s=st;try{var a=wi;for(st=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}wi=null,Iu=!1}catch(f){throw wi!==null&&(wi=wi.slice(r+1)),mt(qn,ns),f}finally{st=s,Qh=!1}}return null}var Go=[],Ko=0,Su=null,Cu=0,ar=[],lr=0,Ys=null,Ei=1,Ti="";function Js(r,s){Go[Ko++]=Cu,Go[Ko++]=Su,Su=r,Cu=s}function xm(r,s,a){ar[lr++]=Ei,ar[lr++]=Ti,ar[lr++]=Ys,Ys=r;var h=Ei;r=Ti;var f=32-nt(h)-1;h&=~(1<<f),a+=1;var g=32-nt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Ei=1<<32-nt(s)+f|a<<f|h,Ti=g+r}else Ei=1<<g|a<<f|h,Ti=r}function Yh(r){r.return!==null&&(Js(r,1),xm(r,1,0))}function Jh(r){for(;r===Su;)Su=Go[--Ko],Go[Ko]=null,Cu=Go[--Ko],Go[Ko]=null;for(;r===Ys;)Ys=ar[--lr],ar[lr]=null,Ti=ar[--lr],ar[lr]=null,Ei=ar[--lr],ar[lr]=null}var Yn=null,Jn=null,At=!1,Ar=null;function km(r,s){var a=dr(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Nm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Yn=r,Jn=Zi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Yn=r,Jn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ys!==null?{id:Ei,overflow:Ti}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=dr(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Yn=r,Jn=null,!0):!1;default:return!1}}function Xh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Zh(r){if(At){var s=Jn;if(s){var a=s;if(!Nm(r,s)){if(Xh(r))throw Error(t(418));s=Zi(a.nextSibling);var h=Yn;s&&Nm(r,s)?km(h,a):(r.flags=r.flags&-4097|2,At=!1,Yn=r)}}else{if(Xh(r))throw Error(t(418));r.flags=r.flags&-4097|2,At=!1,Yn=r}}}function bm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Yn=r}function Ru(r){if(r!==Yn)return!1;if(!At)return bm(r),At=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Hh(r.type,r.memoizedProps)),s&&(s=Jn)){if(Xh(r))throw Dm(),Error(t(418));for(;s;)km(r,s),s=Zi(s.nextSibling)}if(bm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Jn=Zi(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Jn=null}}else Jn=Yn?Zi(r.stateNode.nextSibling):null;return!0}function Dm(){for(var r=Jn;r;)r=Zi(r.nextSibling)}function Qo(){Jn=Yn=null,At=!1}function ed(r){Ar===null?Ar=[r]:Ar.push(r)}var j0=pe.ReactCurrentBatchConfig;function Xa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var x=f.refs;w===null?delete x[g]:x[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Au(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Om(r){var s=r._init;return s(r._payload)}function Lm(r){function s($,V){if(r){var W=$.deletions;W===null?($.deletions=[V],$.flags|=16):W.push(V)}}function a($,V){if(!r)return null;for(;V!==null;)s($,V),V=V.sibling;return null}function h($,V){for($=new Map;V!==null;)V.key!==null?$.set(V.key,V):$.set(V.index,V),V=V.sibling;return $}function f($,V){return $=cs($,V),$.index=0,$.sibling=null,$}function g($,V,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<V?($.flags|=2,V):W):($.flags|=2,V)):($.flags|=1048576,V)}function w($){return r&&$.alternate===null&&($.flags|=2),$}function x($,V,W,le){return V===null||V.tag!==6?(V=Wd(W,$.mode,le),V.return=$,V):(V=f(V,W),V.return=$,V)}function D($,V,W,le){var Ne=W.type;return Ne===S?se($,V,W.props.children,le,W.key):V!==null&&(V.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===vt&&Om(Ne)===V.type)?(le=f(V,W.props),le.ref=Xa($,V,W),le.return=$,le):(le=Ju(W.type,W.key,W.props,null,$.mode,le),le.ref=Xa($,V,W),le.return=$,le)}function K($,V,W,le){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=qd(W,$.mode,le),V.return=$,V):(V=f(V,W.children||[]),V.return=$,V)}function se($,V,W,le,Ne){return V===null||V.tag!==7?(V=so(W,$.mode,le,Ne),V.return=$,V):(V=f(V,W),V.return=$,V)}function ae($,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Wd(""+V,$.mode,W),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ue:return W=Ju(V.type,V.key,V.props,null,$.mode,W),W.ref=Xa($,null,V),W.return=$,W;case Fe:return V=qd(V,$.mode,W),V.return=$,V;case vt:var le=V._init;return ae($,le(V._payload),W)}if(gr(V)||ke(V))return V=so(V,$.mode,W,null),V.return=$,V;Au($,V)}return null}function ie($,V,W,le){var Ne=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ne!==null?null:x($,V,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Ue:return W.key===Ne?D($,V,W,le):null;case Fe:return W.key===Ne?K($,V,W,le):null;case vt:return Ne=W._init,ie($,V,Ne(W._payload),le)}if(gr(W)||ke(W))return Ne!==null?null:se($,V,W,le,null);Au($,W)}return null}function ve($,V,W,le,Ne){if(typeof le=="string"&&le!==""||typeof le=="number")return $=$.get(W)||null,x(V,$,""+le,Ne);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Ue:return $=$.get(le.key===null?W:le.key)||null,D(V,$,le,Ne);case Fe:return $=$.get(le.key===null?W:le.key)||null,K(V,$,le,Ne);case vt:var Ve=le._init;return ve($,V,W,Ve(le._payload),Ne)}if(gr(le)||ke(le))return $=$.get(W)||null,se(V,$,le,Ne,null);Au(V,le)}return null}function Ae($,V,W,le){for(var Ne=null,Ve=null,Me=V,He=V=0,nn=null;Me!==null&&He<W.length;He++){Me.index>He?(nn=Me,Me=null):nn=Me.sibling;var ht=ie($,Me,W[He],le);if(ht===null){Me===null&&(Me=nn);break}r&&Me&&ht.alternate===null&&s($,Me),V=g(ht,V,He),Ve===null?Ne=ht:Ve.sibling=ht,Ve=ht,Me=nn}if(He===W.length)return a($,Me),At&&Js($,He),Ne;if(Me===null){for(;He<W.length;He++)Me=ae($,W[He],le),Me!==null&&(V=g(Me,V,He),Ve===null?Ne=Me:Ve.sibling=Me,Ve=Me);return At&&Js($,He),Ne}for(Me=h($,Me);He<W.length;He++)nn=ve(Me,$,He,W[He],le),nn!==null&&(r&&nn.alternate!==null&&Me.delete(nn.key===null?He:nn.key),V=g(nn,V,He),Ve===null?Ne=nn:Ve.sibling=nn,Ve=nn);return r&&Me.forEach(function(hs){return s($,hs)}),At&&Js($,He),Ne}function Pe($,V,W,le){var Ne=ke(W);if(typeof Ne!="function")throw Error(t(150));if(W=Ne.call(W),W==null)throw Error(t(151));for(var Ve=Ne=null,Me=V,He=V=0,nn=null,ht=W.next();Me!==null&&!ht.done;He++,ht=W.next()){Me.index>He?(nn=Me,Me=null):nn=Me.sibling;var hs=ie($,Me,ht.value,le);if(hs===null){Me===null&&(Me=nn);break}r&&Me&&hs.alternate===null&&s($,Me),V=g(hs,V,He),Ve===null?Ne=hs:Ve.sibling=hs,Ve=hs,Me=nn}if(ht.done)return a($,Me),At&&Js($,He),Ne;if(Me===null){for(;!ht.done;He++,ht=W.next())ht=ae($,ht.value,le),ht!==null&&(V=g(ht,V,He),Ve===null?Ne=ht:Ve.sibling=ht,Ve=ht);return At&&Js($,He),Ne}for(Me=h($,Me);!ht.done;He++,ht=W.next())ht=ve(Me,$,He,ht.value,le),ht!==null&&(r&&ht.alternate!==null&&Me.delete(ht.key===null?He:ht.key),V=g(ht,V,He),Ve===null?Ne=ht:Ve.sibling=ht,Ve=ht);return r&&Me.forEach(function(_T){return s($,_T)}),At&&Js($,He),Ne}function Ft($,V,W,le){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Ue:e:{for(var Ne=W.key,Ve=V;Ve!==null;){if(Ve.key===Ne){if(Ne=W.type,Ne===S){if(Ve.tag===7){a($,Ve.sibling),V=f(Ve,W.props.children),V.return=$,$=V;break e}}else if(Ve.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===vt&&Om(Ne)===Ve.type){a($,Ve.sibling),V=f(Ve,W.props),V.ref=Xa($,Ve,W),V.return=$,$=V;break e}a($,Ve);break}else s($,Ve);Ve=Ve.sibling}W.type===S?(V=so(W.props.children,$.mode,le,W.key),V.return=$,$=V):(le=Ju(W.type,W.key,W.props,null,$.mode,le),le.ref=Xa($,V,W),le.return=$,$=le)}return w($);case Fe:e:{for(Ve=W.key;V!==null;){if(V.key===Ve)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){a($,V.sibling),V=f(V,W.children||[]),V.return=$,$=V;break e}else{a($,V);break}else s($,V);V=V.sibling}V=qd(W,$.mode,le),V.return=$,$=V}return w($);case vt:return Ve=W._init,Ft($,V,Ve(W._payload),le)}if(gr(W))return Ae($,V,W,le);if(ke(W))return Pe($,V,W,le);Au($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,V!==null&&V.tag===6?(a($,V.sibling),V=f(V,W),V.return=$,$=V):(a($,V),V=Wd(W,$.mode,le),V.return=$,$=V),w($)):a($,V)}return Ft}var Yo=Lm(!0),Vm=Lm(!1),Pu=es(null),xu=null,Jo=null,td=null;function nd(){td=Jo=xu=null}function rd(r){var s=Pu.current;It(Pu),r._currentValue=s}function id(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function Xo(r,s){xu=r,td=Jo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Vn=!0),r.firstContext=null)}function ur(r){var s=r._currentValue;if(td!==r)if(r={context:r,memoizedValue:s,next:null},Jo===null){if(xu===null)throw Error(t(308));Jo=r,xu.dependencies={lanes:0,firstContext:r}}else Jo=Jo.next=r;return s}var Xs=null;function sd(r){Xs===null?Xs=[r]:Xs.push(r)}function Mm(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,sd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ii(r,h)}function Ii(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var rs=!1;function od(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Si(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function is(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ut&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Ii(r,a)}return f=h.interleaved,f===null?(s.next=s,sd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Ii(r,a)}function ku(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Gi(r,a)}}function Um(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Nu(r,s,a,h){var f=r.updateQueue;rs=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var D=x,K=D.next;D.next=null,w===null?g=K:w.next=K,w=D;var se=r.alternate;se!==null&&(se=se.updateQueue,x=se.lastBaseUpdate,x!==w&&(x===null?se.firstBaseUpdate=K:x.next=K,se.lastBaseUpdate=D))}if(g!==null){var ae=f.baseState;w=0,se=K=D=null,x=g;do{var ie=x.lane,ve=x.eventTime;if((h&ie)===ie){se!==null&&(se=se.next={eventTime:ve,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Ae=r,Pe=x;switch(ie=s,ve=a,Pe.tag){case 1:if(Ae=Pe.payload,typeof Ae=="function"){ae=Ae.call(ve,ae,ie);break e}ae=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Pe.payload,ie=typeof Ae=="function"?Ae.call(ve,ae,ie):Ae,ie==null)break e;ae=ge({},ae,ie);break e;case 2:rs=!0}}x.callback!==null&&x.lane!==0&&(r.flags|=64,ie=f.effects,ie===null?f.effects=[x]:ie.push(x))}else ve={eventTime:ve,lane:ie,tag:x.tag,payload:x.payload,callback:x.callback,next:null},se===null?(K=se=ve,D=ae):se=se.next=ve,w|=ie;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;ie=x,x=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);if(se===null&&(D=ae),f.baseState=D,f.firstBaseUpdate=K,f.lastBaseUpdate=se,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);to|=w,r.lanes=w,r.memoizedState=ae}}function jm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Za={},Qr=es(Za),el=es(Za),tl=es(Za);function Zs(r){if(r===Za)throw Error(t(174));return r}function ad(r,s){switch(wt(tl,s),wt(el,r),wt(Qr,Za),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:xt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=xt(s,r)}It(Qr),wt(Qr,s)}function Zo(){It(Qr),It(el),It(tl)}function zm(r){Zs(tl.current);var s=Zs(Qr.current),a=xt(s,r.type);s!==a&&(wt(el,r),wt(Qr,a))}function ld(r){el.current===r&&(It(Qr),It(el))}var Nt=es(0);function bu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ud=[];function cd(){for(var r=0;r<ud.length;r++)ud[r]._workInProgressVersionPrimary=null;ud.length=0}var Du=pe.ReactCurrentDispatcher,hd=pe.ReactCurrentBatchConfig,eo=0,bt=null,Kt=null,en=null,Ou=!1,nl=!1,rl=0,z0=0;function yn(){throw Error(t(321))}function dd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Rr(r[a],s[a]))return!1;return!0}function fd(r,s,a,h,f,g){if(eo=g,bt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Du.current=r===null||r.memoizedState===null?W0:q0,r=a(h,f),nl){g=0;do{if(nl=!1,rl=0,25<=g)throw Error(t(301));g+=1,en=Kt=null,s.updateQueue=null,Du.current=G0,r=a(h,f)}while(nl)}if(Du.current=Mu,s=Kt!==null&&Kt.next!==null,eo=0,en=Kt=bt=null,Ou=!1,s)throw Error(t(300));return r}function pd(){var r=rl!==0;return rl=0,r}function Yr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?bt.memoizedState=en=r:en=en.next=r,en}function cr(){if(Kt===null){var r=bt.alternate;r=r!==null?r.memoizedState:null}else r=Kt.next;var s=en===null?bt.memoizedState:en.next;if(s!==null)en=s,Kt=r;else{if(r===null)throw Error(t(310));Kt=r,r={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},en===null?bt.memoizedState=en=r:en=en.next=r}return en}function il(r,s){return typeof s=="function"?s(r):s}function md(r){var s=cr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=Kt,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var x=w=null,D=null,K=g;do{var se=K.lane;if((eo&se)===se)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),h=K.hasEagerState?K.eagerState:r(h,K.action);else{var ae={lane:se,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(x=D=ae,w=h):D=D.next=ae,bt.lanes|=se,to|=se}K=K.next}while(K!==null&&K!==g);D===null?w=h:D.next=x,Rr(h,s.memoizedState)||(Vn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=D,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do g=f.lane,bt.lanes|=g,to|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function gd(r){var s=cr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Rr(g,s.memoizedState)||(Vn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function Bm(){}function $m(r,s){var a=bt,h=cr(),f=s(),g=!Rr(h.memoizedState,f);if(g&&(h.memoizedState=f,Vn=!0),h=h.queue,yd(qm.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||en!==null&&en.memoizedState.tag&1){if(a.flags|=2048,sl(9,Wm.bind(null,a,h,f,s),void 0,null),tn===null)throw Error(t(349));(eo&30)!==0||Hm(a,s,f)}return f}function Hm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=bt.updateQueue,s===null?(s={lastEffect:null,stores:null},bt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Wm(r,s,a,h){s.value=a,s.getSnapshot=h,Gm(s)&&Km(r)}function qm(r,s,a){return a(function(){Gm(s)&&Km(r)})}function Gm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Rr(r,a)}catch{return!0}}function Km(r){var s=Ii(r,1);s!==null&&Nr(s,r,1,-1)}function Qm(r){var s=Yr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:r},s.queue=r,r=r.dispatch=H0.bind(null,bt,r),[s.memoizedState,r]}function sl(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=bt.updateQueue,s===null?(s={lastEffect:null,stores:null},bt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function Ym(){return cr().memoizedState}function Lu(r,s,a,h){var f=Yr();bt.flags|=r,f.memoizedState=sl(1|s,a,void 0,h===void 0?null:h)}function Vu(r,s,a,h){var f=cr();h=h===void 0?null:h;var g=void 0;if(Kt!==null){var w=Kt.memoizedState;if(g=w.destroy,h!==null&&dd(h,w.deps)){f.memoizedState=sl(s,a,g,h);return}}bt.flags|=r,f.memoizedState=sl(1|s,a,g,h)}function Jm(r,s){return Lu(8390656,8,r,s)}function yd(r,s){return Vu(2048,8,r,s)}function Xm(r,s){return Vu(4,2,r,s)}function Zm(r,s){return Vu(4,4,r,s)}function eg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function tg(r,s,a){return a=a!=null?a.concat([r]):null,Vu(4,4,eg.bind(null,s,r),a)}function vd(){}function ng(r,s){var a=cr();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&dd(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function rg(r,s){var a=cr();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&dd(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function ig(r,s,a){return(eo&21)===0?(r.baseState&&(r.baseState=!1,Vn=!0),r.memoizedState=a):(Rr(a,s)||(a=$s(),bt.lanes|=a,to|=a,r.baseState=!0),s)}function B0(r,s){var a=st;st=a!==0&&4>a?a:4,r(!0);var h=hd.transition;hd.transition={};try{r(!1),s()}finally{st=a,hd.transition=h}}function sg(){return cr().memoizedState}function $0(r,s,a){var h=ls(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},og(r))ag(s,a);else if(a=Mm(r,s,a,h),a!==null){var f=An();Nr(a,r,h,f),lg(a,s,h)}}function H0(r,s,a){var h=ls(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(og(r))ag(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,x=g(w,a);if(f.hasEagerState=!0,f.eagerState=x,Rr(x,w)){var D=s.interleaved;D===null?(f.next=f,sd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}a=Mm(r,s,f,h),a!==null&&(f=An(),Nr(a,r,h,f),lg(a,s,h))}}function og(r){var s=r.alternate;return r===bt||s!==null&&s===bt}function ag(r,s){nl=Ou=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function lg(r,s,a){if((a&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Gi(r,a)}}var Mu={readContext:ur,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},W0={readContext:ur,useCallback:function(r,s){return Yr().memoizedState=[r,s===void 0?null:s],r},useContext:ur,useEffect:Jm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Lu(4194308,4,eg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Lu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Lu(4,2,r,s)},useMemo:function(r,s){var a=Yr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=Yr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=$0.bind(null,bt,r),[h.memoizedState,r]},useRef:function(r){var s=Yr();return r={current:r},s.memoizedState=r},useState:Qm,useDebugValue:vd,useDeferredValue:function(r){return Yr().memoizedState=r},useTransition:function(){var r=Qm(!1),s=r[0];return r=B0.bind(null,r[1]),Yr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=bt,f=Yr();if(At){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),tn===null)throw Error(t(349));(eo&30)!==0||Hm(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Jm(qm.bind(null,h,g,r),[r]),h.flags|=2048,sl(9,Wm.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=Yr(),s=tn.identifierPrefix;if(At){var a=Ti,h=Ei;a=(h&~(1<<32-nt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=rl++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=z0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},q0={readContext:ur,useCallback:ng,useContext:ur,useEffect:yd,useImperativeHandle:tg,useInsertionEffect:Xm,useLayoutEffect:Zm,useMemo:rg,useReducer:md,useRef:Ym,useState:function(){return md(il)},useDebugValue:vd,useDeferredValue:function(r){var s=cr();return ig(s,Kt.memoizedState,r)},useTransition:function(){var r=md(il)[0],s=cr().memoizedState;return[r,s]},useMutableSource:Bm,useSyncExternalStore:$m,useId:sg,unstable_isNewReconciler:!1},G0={readContext:ur,useCallback:ng,useContext:ur,useEffect:yd,useImperativeHandle:tg,useInsertionEffect:Xm,useLayoutEffect:Zm,useMemo:rg,useReducer:gd,useRef:Ym,useState:function(){return gd(il)},useDebugValue:vd,useDeferredValue:function(r){var s=cr();return Kt===null?s.memoizedState=r:ig(s,Kt.memoizedState,r)},useTransition:function(){var r=gd(il)[0],s=cr().memoizedState;return[r,s]},useMutableSource:Bm,useSyncExternalStore:$m,useId:sg,unstable_isNewReconciler:!1};function Pr(r,s){if(r&&r.defaultProps){s=ge({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function _d(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:ge({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Fu={isMounted:function(r){return(r=r._reactInternals)?Ee(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=An(),f=ls(r),g=Si(h,f);g.payload=s,a!=null&&(g.callback=a),s=is(r,g,f),s!==null&&(Nr(s,r,f,h),ku(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=An(),f=ls(r),g=Si(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=is(r,g,f),s!==null&&(Nr(s,r,f,h),ku(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=An(),h=ls(r),f=Si(a,h);f.tag=2,s!=null&&(f.callback=s),s=is(r,f,h),s!==null&&(Nr(s,r,h,a),ku(s,r,h))}};function ug(r,s,a,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Wa(a,h)||!Wa(f,g):!0}function cg(r,s,a){var h=!1,f=ts,g=s.contextType;return typeof g=="object"&&g!==null?g=ur(g):(f=Ln(s)?Qs:gn.current,h=s.contextTypes,g=(h=h!=null)?qo(r,f):ts),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Fu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function hg(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Fu.enqueueReplaceState(s,s.state,null)}function wd(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},od(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=ur(g):(g=Ln(s)?Qs:gn.current,f.context=qo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(_d(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Fu.enqueueReplaceState(f,f.state,null),Nu(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ea(r,s){try{var a="",h=s;do a+=Oe(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Ed(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Td(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function dg(r,s,a){a=Si(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Wu||(Wu=!0,Md=h),Td(r,s)},a}function fg(r,s,a){a=Si(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){Td(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Td(r,s),typeof h!="function"&&(os===null?os=new Set([this]):os.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function pg(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new K0;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=lT.bind(null,r,s,a),s.then(r,r))}function mg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function gg(r,s,a,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Si(-1,1),s.tag=2,is(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var Q0=pe.ReactCurrentOwner,Vn=!1;function Rn(r,s,a,h){s.child=r===null?Vm(s,null,a,h):Yo(s,r.child,a,h)}function yg(r,s,a,h,f){a=a.render;var g=s.ref;return Xo(s,f),h=fd(r,s,a,h,g,f),a=pd(),r!==null&&!Vn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ci(r,s,f)):(At&&a&&Yh(s),s.flags|=1,Rn(r,s,h,f),s.child)}function vg(r,s,a,h,f){if(r===null){var g=a.type;return typeof g=="function"&&!Hd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,_g(r,s,g,h,f)):(r=Ju(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Wa,a(w,h)&&r.ref===s.ref)return Ci(r,s,f)}return s.flags|=1,r=cs(g,h),r.ref=s.ref,r.return=s,s.child=r}function _g(r,s,a,h,f){if(r!==null){var g=r.memoizedProps;if(Wa(g,h)&&r.ref===s.ref)if(Vn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Vn=!0);else return s.lanes=r.lanes,Ci(r,s,f)}return Id(r,s,a,h,f)}function wg(r,s,a){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(na,Xn),Xn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,wt(na,Xn),Xn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,wt(na,Xn),Xn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,wt(na,Xn),Xn|=h;return Rn(r,s,f,a),s.child}function Eg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Id(r,s,a,h,f){var g=Ln(a)?Qs:gn.current;return g=qo(s,g),Xo(s,f),a=fd(r,s,a,h,g,f),h=pd(),r!==null&&!Vn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ci(r,s,f)):(At&&h&&Yh(s),s.flags|=1,Rn(r,s,a,f),s.child)}function Tg(r,s,a,h,f){if(Ln(a)){var g=!0;Tu(s)}else g=!1;if(Xo(s,f),s.stateNode===null)ju(r,s),cg(s,a,h),wd(s,a,h,f),h=!0;else if(r===null){var w=s.stateNode,x=s.memoizedProps;w.props=x;var D=w.context,K=a.contextType;typeof K=="object"&&K!==null?K=ur(K):(K=Ln(a)?Qs:gn.current,K=qo(s,K));var se=a.getDerivedStateFromProps,ae=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function";ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==h||D!==K)&&hg(s,w,h,K),rs=!1;var ie=s.memoizedState;w.state=ie,Nu(s,h,w,f),D=s.memoizedState,x!==h||ie!==D||On.current||rs?(typeof se=="function"&&(_d(s,a,se,h),D=s.memoizedState),(x=rs||ug(s,a,x,h,ie,D,K))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),w.props=h,w.state=D,w.context=K,h=x):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Fm(r,s),x=s.memoizedProps,K=s.type===s.elementType?x:Pr(s.type,x),w.props=K,ae=s.pendingProps,ie=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=ur(D):(D=Ln(a)?Qs:gn.current,D=qo(s,D));var ve=a.getDerivedStateFromProps;(se=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==ae||ie!==D)&&hg(s,w,h,D),rs=!1,ie=s.memoizedState,w.state=ie,Nu(s,h,w,f);var Ae=s.memoizedState;x!==ae||ie!==Ae||On.current||rs?(typeof ve=="function"&&(_d(s,a,ve,h),Ae=s.memoizedState),(K=rs||ug(s,a,K,h,ie,Ae,D)||!1)?(se||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ae,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ae,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Ae),w.props=h,w.state=Ae,w.context=D,h=K):(typeof w.componentDidUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),h=!1)}return Sd(r,s,a,h,g,f)}function Sd(r,s,a,h,f,g){Eg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Am(s,a,!1),Ci(r,s,g);h=s.stateNode,Q0.current=s;var x=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=Yo(s,r.child,null,g),s.child=Yo(s,null,x,g)):Rn(r,s,x,g),s.memoizedState=h.state,f&&Am(s,a,!0),s.child}function Ig(r){var s=r.stateNode;s.pendingContext?Cm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Cm(r,s.context,!1),ad(r,s.containerInfo)}function Sg(r,s,a,h,f){return Qo(),ed(f),s.flags|=256,Rn(r,s,a,h),s.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Rd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Cg(r,s,a){var h=s.pendingProps,f=Nt.current,g=!1,w=(s.flags&128)!==0,x;if((x=w)||(x=r!==null&&r.memoizedState===null?!1:(f&2)!==0),x?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),wt(Nt,f&1),r===null)return Zh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Xu(w,h,0,null),r=so(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Rd(a),s.memoizedState=Cd,r):Ad(s,w));if(f=r.memoizedState,f!==null&&(x=f.dehydrated,x!==null))return Y0(r,s,w,h,x,f,a);if(g){g=h.fallback,w=s.mode,f=r.child,x=f.sibling;var D={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=cs(f,D),h.subtreeFlags=f.subtreeFlags&14680064),x!==null?g=cs(x,g):(g=so(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Rd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=Cd,h}return g=r.child,r=g.sibling,h=cs(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function Ad(r,s){return s=Xu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Uu(r,s,a,h){return h!==null&&ed(h),Yo(s,r.child,null,a),r=Ad(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Y0(r,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=Ed(Error(t(422))),Uu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Xu({mode:"visible",children:h.children},f,0,null),g=so(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&Yo(s,r.child,null,w),s.child.memoizedState=Rd(w),s.memoizedState=Cd,g);if((s.mode&1)===0)return Uu(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var x=h.dgst;return h=x,g=Error(t(419)),h=Ed(g,h,void 0),Uu(r,s,w,h)}if(x=(w&r.childLanes)!==0,Vn||x){if(h=tn,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ii(r,f),Nr(h,r,f,-1))}return $d(),h=Ed(Error(t(421))),Uu(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=uT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,Jn=Zi(f.nextSibling),Yn=s,At=!0,Ar=null,r!==null&&(ar[lr++]=Ei,ar[lr++]=Ti,ar[lr++]=Ys,Ei=r.id,Ti=r.overflow,Ys=s),s=Ad(s,h.children),s.flags|=4096,s)}function Rg(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),id(r.return,s,a)}function Pd(r,s,a,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function Ag(r,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Rn(r,s,h.children,a),h=Nt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Rg(r,a,s);else if(r.tag===19)Rg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(wt(Nt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&bu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Pd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&bu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Pd(s,!0,a,null,g);break;case"together":Pd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ju(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Ci(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),to|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=cs(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=cs(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function J0(r,s,a){switch(s.tag){case 3:Ig(s),Qo();break;case 5:zm(s);break;case 1:Ln(s.type)&&Tu(s);break;case 4:ad(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;wt(Pu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(wt(Nt,Nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Cg(r,s,a):(wt(Nt,Nt.current&1),r=Ci(r,s,a),r!==null?r.sibling:null);wt(Nt,Nt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(r.flags&128)!==0){if(h)return Ag(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),wt(Nt,Nt.current),h)break;return null;case 22:case 23:return s.lanes=0,wg(r,s,a)}return Ci(r,s,a)}var Pg,xd,xg,kg;Pg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},xd=function(){},xg=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,Zs(Qr.current);var g=null;switch(a){case"input":f=dt(r,f),h=dt(r,h),g=[];break;case"select":f=ge({},f,{value:void 0}),h=ge({},h,{value:void 0}),g=[];break;case"textarea":f=Ms(r,f),h=Ms(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=_u)}zi(a,h);var w;a=null;for(K in f)if(!h.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var x=f[K];for(w in x)x.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in h){var D=h[K];if(x=f?.[K],h.hasOwnProperty(K)&&D!==x&&(D!=null||x!=null))if(K==="style")if(x){for(w in x)!x.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&x[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(g||(g=[]),g.push(K,a)),a=D;else K==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,x=x?x.__html:void 0,D!=null&&x!==D&&(g=g||[]).push(K,D)):K==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(K,""+D):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(D!=null&&K==="onScroll"&&Tt("scroll",r),g||x===D||(g=[])):(g=g||[]).push(K,D))}a&&(g=g||[]).push("style",a);var K=g;(s.updateQueue=K)&&(s.flags|=4)}},kg=function(r,s,a,h){a!==h&&(s.flags|=4)};function ol(r,s){if(!At)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function vn(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function X0(r,s,a){var h=s.pendingProps;switch(Jh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(s),null;case 1:return Ln(s.type)&&Eu(),vn(s),null;case 3:return h=s.stateNode,Zo(),It(On),It(gn),cd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Ru(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ar!==null&&(jd(Ar),Ar=null))),xd(r,s),vn(s),null;case 5:ld(s);var f=Zs(tl.current);if(a=s.type,r!==null&&s.stateNode!=null)xg(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return vn(s),null}if(r=Zs(Qr.current),Ru(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[Kr]=s,h[Ya]=g,r=(s.mode&1)!==0,a){case"dialog":Tt("cancel",h),Tt("close",h);break;case"iframe":case"object":case"embed":Tt("load",h);break;case"video":case"audio":for(f=0;f<Ga.length;f++)Tt(Ga[f],h);break;case"source":Tt("error",h);break;case"img":case"image":case"link":Tt("error",h),Tt("load",h);break;case"details":Tt("toggle",h);break;case"input":Et(h,g),Tt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Tt("invalid",h);break;case"textarea":Fi(h,g),Tt("invalid",h)}zi(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var x=g[w];w==="children"?typeof x=="string"?h.textContent!==x&&(g.suppressHydrationWarning!==!0&&vu(h.textContent,x,r),f=["children",x]):typeof x=="number"&&h.textContent!==""+x&&(g.suppressHydrationWarning!==!0&&vu(h.textContent,x,r),f=["children",""+x]):o.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&Tt("scroll",h)}switch(a){case"input":_e(h),So(h,g,!0);break;case"textarea":_e(h),vr(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=_u)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ot(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[Kr]=s,r[Ya]=h,Pg(r,s,!1,!1),s.stateNode=r;e:{switch(w=Fs(a,h),a){case"dialog":Tt("cancel",r),Tt("close",r),f=h;break;case"iframe":case"object":case"embed":Tt("load",r),f=h;break;case"video":case"audio":for(f=0;f<Ga.length;f++)Tt(Ga[f],r);f=h;break;case"source":Tt("error",r),f=h;break;case"img":case"image":case"link":Tt("error",r),Tt("load",r),f=h;break;case"details":Tt("toggle",r),f=h;break;case"input":Et(r,h),f=dt(r,h),Tt("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=ge({},h,{value:void 0}),Tt("invalid",r);break;case"textarea":Fi(r,h),f=Ms(r,h),Tt("invalid",r);break;default:f=h}zi(a,f),x=f;for(g in x)if(x.hasOwnProperty(g)){var D=x[g];g==="style"?Ui(r,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Sn(r,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&_r(r,D):typeof D=="number"&&_r(r,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&Tt("scroll",r):D!=null&&ce(r,g,D,w))}switch(a){case"input":_e(r),So(r,h,!1);break;case"textarea":_e(r),vr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+q(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?yr(r,!!h.multiple,g,!1):h.defaultValue!=null&&yr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=_u)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return vn(s),null;case 6:if(r&&s.stateNode!=null)kg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Zs(tl.current),Zs(Qr.current),Ru(s)){if(h=s.stateNode,a=s.memoizedProps,h[Kr]=s,(g=h.nodeValue!==a)&&(r=Yn,r!==null))switch(r.tag){case 3:vu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&vu(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Kr]=s,s.stateNode=h}return vn(s),null;case 13:if(It(Nt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(At&&Jn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Dm(),Qo(),s.flags|=98560,g=!1;else if(g=Ru(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Kr]=s}else Qo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;vn(s),g=!1}else Ar!==null&&(jd(Ar),Ar=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Nt.current&1)!==0?Qt===0&&(Qt=3):$d())),s.updateQueue!==null&&(s.flags|=4),vn(s),null);case 4:return Zo(),xd(r,s),r===null&&Ka(s.stateNode.containerInfo),vn(s),null;case 10:return rd(s.type._context),vn(s),null;case 17:return Ln(s.type)&&Eu(),vn(s),null;case 19:if(It(Nt),g=s.memoizedState,g===null)return vn(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)ol(g,!1);else{if(Qt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=bu(r),w!==null){for(s.flags|=128,ol(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return wt(Nt,Nt.current&1|2),s.child}r=r.sibling}g.tail!==null&&et()>ra&&(s.flags|=128,h=!0,ol(g,!1),s.lanes=4194304)}else{if(!h)if(r=bu(w),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!At)return vn(s),null}else 2*et()-g.renderingStartTime>ra&&a!==1073741824&&(s.flags|=128,h=!0,ol(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=et(),s.sibling=null,a=Nt.current,wt(Nt,h?a&1|2:a&1),s):(vn(s),null);case 22:case 23:return Bd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Xn&1073741824)!==0&&(vn(s),s.subtreeFlags&6&&(s.flags|=8192)):vn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Z0(r,s){switch(Jh(s),s.tag){case 1:return Ln(s.type)&&Eu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Zo(),It(On),It(gn),cd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return ld(s),null;case 13:if(It(Nt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Qo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return It(Nt),null;case 4:return Zo(),null;case 10:return rd(s.type._context),null;case 22:case 23:return Bd(),null;case 24:return null;default:return null}}var zu=!1,_n=!1,eT=typeof WeakSet=="function"?WeakSet:Set,Re=null;function ta(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Vt(r,s,h)}else a.current=null}function kd(r,s,a){try{a()}catch(h){Vt(r,s,h)}}var Ng=!1;function tT(r,s){if(Bh=Yi,r=um(),Oh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,x=-1,D=-1,K=0,se=0,ae=r,ie=null;t:for(;;){for(var ve;ae!==a||f!==0&&ae.nodeType!==3||(x=w+f),ae!==g||h!==0&&ae.nodeType!==3||(D=w+h),ae.nodeType===3&&(w+=ae.nodeValue.length),(ve=ae.firstChild)!==null;)ie=ae,ae=ve;for(;;){if(ae===r)break t;if(ie===a&&++K===f&&(x=w),ie===g&&++se===h&&(D=w),(ve=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=ve}a=x===-1||D===-1?null:{start:x,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for($h={focusedElem:r,selectionRange:a},Yi=!1,Re=s;Re!==null;)if(s=Re,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Re=r;else for(;Re!==null;){s=Re;try{var Ae=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Pe=Ae.memoizedProps,Ft=Ae.memoizedState,$=s.stateNode,V=$.getSnapshotBeforeUpdate(s.elementType===s.type?Pe:Pr(s.type,Pe),Ft);$.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Vt(s,s.return,le)}if(r=s.sibling,r!==null){r.return=s.return,Re=r;break}Re=s.return}return Ae=Ng,Ng=!1,Ae}function al(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&kd(s,a,g)}f=f.next}while(f!==h)}}function Bu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Nd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function bg(r){var s=r.alternate;s!==null&&(r.alternate=null,bg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Kr],delete s[Ya],delete s[Gh],delete s[M0],delete s[F0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Dg(r){return r.tag===5||r.tag===3||r.tag===4}function Og(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Dg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=_u));else if(h!==4&&(r=r.child,r!==null))for(bd(r,s,a),r=r.sibling;r!==null;)bd(r,s,a),r=r.sibling}function Dd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Dd(r,s,a),r=r.sibling;r!==null;)Dd(r,s,a),r=r.sibling}var un=null,xr=!1;function ss(r,s,a){for(a=a.child;a!==null;)Lg(r,s,a),a=a.sibling}function Lg(r,s,a){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 5:_n||ta(a,s);case 6:var h=un,f=xr;un=null,ss(r,s,a),un=h,xr=f,un!==null&&(xr?(r=un,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):un.removeChild(a.stateNode));break;case 18:un!==null&&(xr?(r=un,a=a.stateNode,r.nodeType===8?qh(r.parentNode,a):r.nodeType===1&&qh(r,a),Sr(r)):qh(un,a.stateNode));break;case 4:h=un,f=xr,un=a.stateNode.containerInfo,xr=!0,ss(r,s,a),un=h,xr=f;break;case 0:case 11:case 14:case 15:if(!_n&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&kd(a,s,w),f=f.next}while(f!==h)}ss(r,s,a);break;case 1:if(!_n&&(ta(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(x){Vt(a,s,x)}ss(r,s,a);break;case 21:ss(r,s,a);break;case 22:a.mode&1?(_n=(h=_n)||a.memoizedState!==null,ss(r,s,a),_n=h):ss(r,s,a);break;default:ss(r,s,a)}}function Vg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new eT),s.forEach(function(h){var f=cT.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function kr(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=r,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 5:un=x.stateNode,xr=!1;break e;case 3:un=x.stateNode.containerInfo,xr=!0;break e;case 4:un=x.stateNode.containerInfo,xr=!0;break e}x=x.return}if(un===null)throw Error(t(160));Lg(g,w,f),un=null,xr=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(K){Vt(f,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Mg(s,r),s=s.sibling}function Mg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(kr(s,r),Jr(r),h&4){try{al(3,r,r.return),Bu(3,r)}catch(Pe){Vt(r,r.return,Pe)}try{al(5,r,r.return)}catch(Pe){Vt(r,r.return,Pe)}}break;case 1:kr(s,r),Jr(r),h&512&&a!==null&&ta(a,a.return);break;case 5:if(kr(s,r),Jr(r),h&512&&a!==null&&ta(a,a.return),r.flags&32){var f=r.stateNode;try{_r(f,"")}catch(Pe){Vt(r,r.return,Pe)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,x=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{x==="input"&&g.type==="radio"&&g.name!=null&&Mt(f,g),Fs(x,w);var K=Fs(x,g);for(w=0;w<D.length;w+=2){var se=D[w],ae=D[w+1];se==="style"?Ui(f,ae):se==="dangerouslySetInnerHTML"?Sn(f,ae):se==="children"?_r(f,ae):ce(f,se,ae,K)}switch(x){case"input":Vr(f,g);break;case"textarea":Pn(f,g);break;case"select":var ie=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ve=g.value;ve!=null?yr(f,!!g.multiple,ve,!1):ie!==!!g.multiple&&(g.defaultValue!=null?yr(f,!!g.multiple,g.defaultValue,!0):yr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ya]=g}catch(Pe){Vt(r,r.return,Pe)}}break;case 6:if(kr(s,r),Jr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(Pe){Vt(r,r.return,Pe)}}break;case 3:if(kr(s,r),Jr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Sr(s.containerInfo)}catch(Pe){Vt(r,r.return,Pe)}break;case 4:kr(s,r),Jr(r);break;case 13:kr(s,r),Jr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Vd=et())),h&4&&Vg(r);break;case 22:if(se=a!==null&&a.memoizedState!==null,r.mode&1?(_n=(K=_n)||se,kr(s,r),_n=K):kr(s,r),Jr(r),h&8192){if(K=r.memoizedState!==null,(r.stateNode.isHidden=K)&&!se&&(r.mode&1)!==0)for(Re=r,se=r.child;se!==null;){for(ae=Re=se;Re!==null;){switch(ie=Re,ve=ie.child,ie.tag){case 0:case 11:case 14:case 15:al(4,ie,ie.return);break;case 1:ta(ie,ie.return);var Ae=ie.stateNode;if(typeof Ae.componentWillUnmount=="function"){h=ie,a=ie.return;try{s=h,Ae.props=s.memoizedProps,Ae.state=s.memoizedState,Ae.componentWillUnmount()}catch(Pe){Vt(h,a,Pe)}}break;case 5:ta(ie,ie.return);break;case 22:if(ie.memoizedState!==null){jg(ae);continue}}ve!==null?(ve.return=ie,Re=ve):jg(ae)}se=se.sibling}e:for(se=null,ae=r;;){if(ae.tag===5){if(se===null){se=ae;try{f=ae.stateNode,K?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(x=ae.stateNode,D=ae.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,x.style.display=xn("display",w))}catch(Pe){Vt(r,r.return,Pe)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=K?"":ae.memoizedProps}catch(Pe){Vt(r,r.return,Pe)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===r)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===r)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===r)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:kr(s,r),Jr(r),h&4&&Vg(r);break;case 21:break;default:kr(s,r),Jr(r)}}function Jr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Dg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(_r(f,""),h.flags&=-33);var g=Og(r);Dd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,x=Og(r);bd(r,x,w);break;default:throw Error(t(161))}}catch(D){Vt(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function nT(r,s,a){Re=r,Fg(r)}function Fg(r,s,a){for(var h=(r.mode&1)!==0;Re!==null;){var f=Re,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||zu;if(!w){var x=f.alternate,D=x!==null&&x.memoizedState!==null||_n;x=zu;var K=_n;if(zu=w,(_n=D)&&!K)for(Re=f;Re!==null;)w=Re,D=w.child,w.tag===22&&w.memoizedState!==null?zg(f):D!==null?(D.return=w,Re=D):zg(f);for(;g!==null;)Re=g,Fg(g),g=g.sibling;Re=f,zu=x,_n=K}Ug(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,Re=g):Ug(r)}}function Ug(r){for(;Re!==null;){var s=Re;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:_n||Bu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!_n)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Pr(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&jm(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}jm(s,w,a)}break;case 5:var x=s.stateNode;if(a===null&&s.flags&4){a=x;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var se=K.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&Sr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}_n||s.flags&512&&Nd(s)}catch(ie){Vt(s,s.return,ie)}}if(s===r){Re=null;break}if(a=s.sibling,a!==null){a.return=s.return,Re=a;break}Re=s.return}}function jg(r){for(;Re!==null;){var s=Re;if(s===r){Re=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Re=a;break}Re=s.return}}function zg(r){for(;Re!==null;){var s=Re;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Bu(4,s)}catch(D){Vt(s,a,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(D){Vt(s,f,D)}}var g=s.return;try{Nd(s)}catch(D){Vt(s,g,D)}break;case 5:var w=s.return;try{Nd(s)}catch(D){Vt(s,w,D)}}}catch(D){Vt(s,s.return,D)}if(s===r){Re=null;break}var x=s.sibling;if(x!==null){x.return=s.return,Re=x;break}Re=s.return}}var rT=Math.ceil,$u=pe.ReactCurrentDispatcher,Od=pe.ReactCurrentOwner,hr=pe.ReactCurrentBatchConfig,ut=0,tn=null,Bt=null,cn=0,Xn=0,na=es(0),Qt=0,ll=null,to=0,Hu=0,Ld=0,ul=null,Mn=null,Vd=0,ra=1/0,Ri=null,Wu=!1,Md=null,os=null,qu=!1,as=null,Gu=0,cl=0,Fd=null,Ku=-1,Qu=0;function An(){return(ut&6)!==0?et():Ku!==-1?Ku:Ku=et()}function ls(r){return(r.mode&1)===0?1:(ut&2)!==0&&cn!==0?cn&-cn:j0.transition!==null?(Qu===0&&(Qu=$s()),Qu):(r=st,r!==0||(r=window.event,r=r===void 0?16:Fa(r.type)),r)}function Nr(r,s,a,h){if(50<cl)throw cl=0,Fd=null,Error(t(185));qi(r,a,h),((ut&2)===0||r!==tn)&&(r===tn&&((ut&2)===0&&(Hu|=a),Qt===4&&us(r,cn)),Fn(r,h),a===1&&ut===0&&(s.mode&1)===0&&(ra=et()+500,Iu&&ns()))}function Fn(r,s){var a=r.callbackNode;pi(r,s);var h=Bs(r,r===tn?cn:0);if(h===0)a!==null&&rr(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&rr(a),s===1)r.tag===0?U0($g.bind(null,r)):Pm($g.bind(null,r)),L0(function(){(ut&6)===0&&ns()}),a=null;else{switch(Ki(h)){case 1:a=qn;break;case 4:a=mn;break;case 16:a=on;break;case 536870912:a=tt;break;default:a=on}a=Jg(a,Bg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Bg(r,s){if(Ku=-1,Qu=0,(ut&6)!==0)throw Error(t(327));var a=r.callbackNode;if(ia()&&r.callbackNode!==a)return null;var h=Bs(r,r===tn?cn:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=Yu(r,h);else{s=h;var f=ut;ut|=2;var g=Wg();(tn!==r||cn!==s)&&(Ri=null,ra=et()+500,ro(r,s));do try{oT();break}catch(x){Hg(r,x)}while(!0);nd(),$u.current=g,ut=f,Bt!==null?s=0:(tn=null,cn=0,s=Qt)}if(s!==0){if(s===2&&(f=Gn(r),f!==0&&(h=f,s=Ud(r,f))),s===1)throw a=ll,ro(r,0),us(r,h),Fn(r,et()),a;if(s===6)us(r,h);else{if(f=r.current.alternate,(h&30)===0&&!iT(f)&&(s=Yu(r,h),s===2&&(g=Gn(r),g!==0&&(h=g,s=Ud(r,g))),s===1))throw a=ll,ro(r,0),us(r,h),Fn(r,et()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:io(r,Mn,Ri);break;case 3:if(us(r,h),(h&130023424)===h&&(s=Vd+500-et(),10<s)){if(Bs(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){An(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Wh(io.bind(null,r,Mn,Ri),s);break}io(r,Mn,Ri);break;case 4:if(us(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-nt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*rT(h/1960))-h,10<h){r.timeoutHandle=Wh(io.bind(null,r,Mn,Ri),h);break}io(r,Mn,Ri);break;case 5:io(r,Mn,Ri);break;default:throw Error(t(329))}}}return Fn(r,et()),r.callbackNode===a?Bg.bind(null,r):null}function Ud(r,s){var a=ul;return r.current.memoizedState.isDehydrated&&(ro(r,s).flags|=256),r=Yu(r,s),r!==2&&(s=Mn,Mn=a,s!==null&&jd(s)),r}function jd(r){Mn===null?Mn=r:Mn.push.apply(Mn,r)}function iT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Rr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(r,s){for(s&=~Ld,s&=~Hu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-nt(s),h=1<<a;r[a]=-1,s&=~h}}function $g(r){if((ut&6)!==0)throw Error(t(327));ia();var s=Bs(r,0);if((s&1)===0)return Fn(r,et()),null;var a=Yu(r,s);if(r.tag!==0&&a===2){var h=Gn(r);h!==0&&(s=h,a=Ud(r,h))}if(a===1)throw a=ll,ro(r,0),us(r,s),Fn(r,et()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,io(r,Mn,Ri),Fn(r,et()),null}function zd(r,s){var a=ut;ut|=1;try{return r(s)}finally{ut=a,ut===0&&(ra=et()+500,Iu&&ns())}}function no(r){as!==null&&as.tag===0&&(ut&6)===0&&ia();var s=ut;ut|=1;var a=hr.transition,h=st;try{if(hr.transition=null,st=1,r)return r()}finally{st=h,hr.transition=a,ut=s,(ut&6)===0&&ns()}}function Bd(){Xn=na.current,It(na)}function ro(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,O0(a)),Bt!==null)for(a=Bt.return;a!==null;){var h=a;switch(Jh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Eu();break;case 3:Zo(),It(On),It(gn),cd();break;case 5:ld(h);break;case 4:Zo();break;case 13:It(Nt);break;case 19:It(Nt);break;case 10:rd(h.type._context);break;case 22:case 23:Bd()}a=a.return}if(tn=r,Bt=r=cs(r.current,null),cn=Xn=s,Qt=0,ll=null,Ld=Hu=to=0,Mn=ul=null,Xs!==null){for(s=0;s<Xs.length;s++)if(a=Xs[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}Xs=null}return r}function Hg(r,s){do{var a=Bt;try{if(nd(),Du.current=Mu,Ou){for(var h=bt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Ou=!1}if(eo=0,en=Kt=bt=null,nl=!1,rl=0,Od.current=null,a===null||a.return===null){Qt=1,ll=s,Bt=null;break}e:{var g=r,w=a.return,x=a,D=s;if(s=cn,x.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,se=x,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=se.alternate;ie?(se.updateQueue=ie.updateQueue,se.memoizedState=ie.memoizedState,se.lanes=ie.lanes):(se.updateQueue=null,se.memoizedState=null)}var ve=mg(w);if(ve!==null){ve.flags&=-257,gg(ve,w,x,g,s),ve.mode&1&&pg(g,K,s),s=ve,D=K;var Ae=s.updateQueue;if(Ae===null){var Pe=new Set;Pe.add(D),s.updateQueue=Pe}else Ae.add(D);break e}else{if((s&1)===0){pg(g,K,s),$d();break e}D=Error(t(426))}}else if(At&&x.mode&1){var Ft=mg(w);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),gg(Ft,w,x,g,s),ed(ea(D,x));break e}}g=D=ea(D,x),Qt!==4&&(Qt=2),ul===null?ul=[g]:ul.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var $=dg(g,D,s);Um(g,$);break e;case 1:x=D;var V=g.type,W=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(os===null||!os.has(W)))){g.flags|=65536,s&=-s,g.lanes|=s;var le=fg(g,x,s);Um(g,le);break e}}g=g.return}while(g!==null)}Gg(a)}catch(Ne){s=Ne,Bt===a&&a!==null&&(Bt=a=a.return);continue}break}while(!0)}function Wg(){var r=$u.current;return $u.current=Mu,r===null?Mu:r}function $d(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),tn===null||(to&268435455)===0&&(Hu&268435455)===0||us(tn,cn)}function Yu(r,s){var a=ut;ut|=2;var h=Wg();(tn!==r||cn!==s)&&(Ri=null,ro(r,s));do try{sT();break}catch(f){Hg(r,f)}while(!0);if(nd(),ut=a,$u.current=h,Bt!==null)throw Error(t(261));return tn=null,cn=0,Qt}function sT(){for(;Bt!==null;)qg(Bt)}function oT(){for(;Bt!==null&&!jr();)qg(Bt)}function qg(r){var s=Yg(r.alternate,r,Xn);r.memoizedProps=r.pendingProps,s===null?Gg(r):Bt=s,Od.current=null}function Gg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=X0(a,s,Xn),a!==null){Bt=a;return}}else{if(a=Z0(a,s),a!==null){a.flags&=32767,Bt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Qt=6,Bt=null;return}}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=r}while(s!==null);Qt===0&&(Qt=5)}function io(r,s,a){var h=st,f=hr.transition;try{hr.transition=null,st=1,aT(r,s,a,h)}finally{hr.transition=f,st=h}return null}function aT(r,s,a,h){do ia();while(as!==null);if((ut&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(_t(r,g),r===tn&&(Bt=tn=null,cn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||qu||(qu=!0,Jg(on,function(){return ia(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=hr.transition,hr.transition=null;var w=st;st=1;var x=ut;ut|=4,Od.current=null,tT(r,a),Mg(a,r),A0($h),Yi=!!Bh,$h=Bh=null,r.current=a,nT(a),Wn(),ut=x,st=w,hr.transition=g}else r.current=a;if(qu&&(qu=!1,as=r,Gu=f),g=r.pendingLanes,g===0&&(os=null),Br(a.stateNode),Fn(r,et()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Wu)throw Wu=!1,r=Md,Md=null,r;return(Gu&1)!==0&&r.tag!==0&&ia(),g=r.pendingLanes,(g&1)!==0?r===Fd?cl++:(cl=0,Fd=r):cl=0,ns(),null}function ia(){if(as!==null){var r=Ki(Gu),s=hr.transition,a=st;try{if(hr.transition=null,st=16>r?16:r,as===null)var h=!1;else{if(r=as,as=null,Gu=0,(ut&6)!==0)throw Error(t(331));var f=ut;for(ut|=4,Re=r.current;Re!==null;){var g=Re,w=g.child;if((Re.flags&16)!==0){var x=g.deletions;if(x!==null){for(var D=0;D<x.length;D++){var K=x[D];for(Re=K;Re!==null;){var se=Re;switch(se.tag){case 0:case 11:case 15:al(8,se,g)}var ae=se.child;if(ae!==null)ae.return=se,Re=ae;else for(;Re!==null;){se=Re;var ie=se.sibling,ve=se.return;if(bg(se),se===K){Re=null;break}if(ie!==null){ie.return=ve,Re=ie;break}Re=ve}}}var Ae=g.alternate;if(Ae!==null){var Pe=Ae.child;if(Pe!==null){Ae.child=null;do{var Ft=Pe.sibling;Pe.sibling=null,Pe=Ft}while(Pe!==null)}}Re=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Re=w;else e:for(;Re!==null;){if(g=Re,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:al(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,Re=$;break e}Re=g.return}}var V=r.current;for(Re=V;Re!==null;){w=Re;var W=w.child;if((w.subtreeFlags&2064)!==0&&W!==null)W.return=w,Re=W;else e:for(w=V;Re!==null;){if(x=Re,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Bu(9,x)}}catch(Ne){Vt(x,x.return,Ne)}if(x===w){Re=null;break e}var le=x.sibling;if(le!==null){le.return=x.return,Re=le;break e}Re=x.return}}if(ut=f,ns(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ft,r)}catch{}h=!0}return h}finally{st=a,hr.transition=s}}return!1}function Kg(r,s,a){s=ea(a,s),s=dg(r,s,1),r=is(r,s,1),s=An(),r!==null&&(qi(r,1,s),Fn(r,s))}function Vt(r,s,a){if(r.tag===3)Kg(r,r,a);else for(;s!==null;){if(s.tag===3){Kg(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(os===null||!os.has(h))){r=ea(a,r),r=fg(s,r,1),s=is(s,r,1),r=An(),s!==null&&(qi(s,1,r),Fn(s,r));break}}s=s.return}}function lT(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=An(),r.pingedLanes|=r.suspendedLanes&a,tn===r&&(cn&a)===a&&(Qt===4||Qt===3&&(cn&130023424)===cn&&500>et()-Vd?ro(r,0):Ld|=a),Fn(r,s)}function Qg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Ao,Ao<<=1,(Ao&130023424)===0&&(Ao=4194304)));var a=An();r=Ii(r,s),r!==null&&(qi(r,s,a),Fn(r,a))}function uT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Qg(r,a)}function cT(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Qg(r,a)}var Yg;Yg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||On.current)Vn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Vn=!1,J0(r,s,a);Vn=(r.flags&131072)!==0}else Vn=!1,At&&(s.flags&1048576)!==0&&xm(s,Cu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ju(r,s),r=s.pendingProps;var f=qo(s,gn.current);Xo(s,a),f=fd(null,s,h,r,f,a);var g=pd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ln(h)?(g=!0,Tu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,od(s),f.updater=Fu,s.stateNode=f,f._reactInternals=s,wd(s,h,r,a),s=Sd(null,s,h,!0,g,a)):(s.tag=0,At&&g&&Yh(s),Rn(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(ju(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=dT(h),r=Pr(h,r),f){case 0:s=Id(null,s,h,r,a);break e;case 1:s=Tg(null,s,h,r,a);break e;case 11:s=yg(null,s,h,r,a);break e;case 14:s=vg(null,s,h,Pr(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Pr(h,f),Id(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Pr(h,f),Tg(r,s,h,f,a);case 3:e:{if(Ig(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Fm(r,s),Nu(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ea(Error(t(423)),s),s=Sg(r,s,h,a,f);break e}else if(h!==f){f=ea(Error(t(424)),s),s=Sg(r,s,h,a,f);break e}else for(Jn=Zi(s.stateNode.containerInfo.firstChild),Yn=s,At=!0,Ar=null,a=Vm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qo(),h===f){s=Ci(r,s,a);break e}Rn(r,s,h,a)}s=s.child}return s;case 5:return zm(s),r===null&&Zh(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Hh(h,f)?w=null:g!==null&&Hh(h,g)&&(s.flags|=32),Eg(r,s),Rn(r,s,w,a),s.child;case 6:return r===null&&Zh(s),null;case 13:return Cg(r,s,a);case 4:return ad(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Yo(s,null,h,a):Rn(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Pr(h,f),yg(r,s,h,f,a);case 7:return Rn(r,s,s.pendingProps,a),s.child;case 8:return Rn(r,s,s.pendingProps.children,a),s.child;case 12:return Rn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,wt(Pu,h._currentValue),h._currentValue=w,g!==null)if(Rr(g.value,w)){if(g.children===f.children&&!On.current){s=Ci(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var x=g.dependencies;if(x!==null){w=g.child;for(var D=x.firstContext;D!==null;){if(D.context===h){if(g.tag===1){D=Si(-1,a&-a),D.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var se=K.pending;se===null?D.next=D:(D.next=se.next,se.next=D),K.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),id(g.return,a,s),x.lanes|=a;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,x=w.alternate,x!==null&&(x.lanes|=a),id(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Rn(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Xo(s,a),f=ur(f),h=h(f),s.flags|=1,Rn(r,s,h,a),s.child;case 14:return h=s.type,f=Pr(h,s.pendingProps),f=Pr(h.type,f),vg(r,s,h,f,a);case 15:return _g(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Pr(h,f),ju(r,s),s.tag=1,Ln(h)?(r=!0,Tu(s)):r=!1,Xo(s,a),cg(s,h,f),wd(s,h,f,a),Sd(null,s,h,!0,r,a);case 19:return Ag(r,s,a);case 22:return wg(r,s,a)}throw Error(t(156,s.tag))};function Jg(r,s){return mt(r,s)}function hT(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(r,s,a,h){return new hT(r,s,a,h)}function Hd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function dT(r){if(typeof r=="function")return Hd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===lt)return 14}return 2}function cs(r,s){var a=r.alternate;return a===null?(a=dr(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ju(r,s,a,h,f,g){var w=2;if(h=r,typeof r=="function")Hd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case S:return so(a.children,f,g,s);case C:w=8,f|=8;break;case P:return r=dr(12,a,s,f|2),r.elementType=P,r.lanes=g,r;case k:return r=dr(13,a,s,f),r.elementType=k,r.lanes=g,r;case Ke:return r=dr(19,a,s,f),r.elementType=Ke,r.lanes=g,r;case Qe:return Xu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:w=10;break e;case O:w=9;break e;case M:w=11;break e;case lt:w=14;break e;case vt:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=dr(w,a,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function so(r,s,a,h){return r=dr(7,r,h,s),r.lanes=a,r}function Xu(r,s,a,h){return r=dr(22,r,h,s),r.elementType=Qe,r.lanes=a,r.stateNode={isHidden:!1},r}function Wd(r,s,a){return r=dr(6,r,null,s),r.lanes=a,r}function qd(r,s,a){return s=dr(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function fT(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wi(0),this.expirationTimes=Wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Gd(r,s,a,h,f,g,w,x,D){return r=new fT(r,s,a,x,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=dr(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},od(g),r}function pT(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fe,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function Xg(r){if(!r)return ts;r=r._reactInternals;e:{if(Ee(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ln(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Ln(a))return Rm(r,a,s)}return s}function Zg(r,s,a,h,f,g,w,x,D){return r=Gd(a,h,!0,r,f,g,w,x,D),r.context=Xg(null),a=r.current,h=An(),f=ls(a),g=Si(h,f),g.callback=s??null,is(a,g,f),r.current.lanes=f,qi(r,f,h),Fn(r,h),r}function Zu(r,s,a,h){var f=s.current,g=An(),w=ls(f);return a=Xg(a),s.context===null?s.context=a:s.pendingContext=a,s=Si(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=is(f,s,w),r!==null&&(Nr(r,f,w,g),ku(r,f,w)),w}function ec(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ey(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Kd(r,s){ey(r,s),(r=r.alternate)&&ey(r,s)}function mT(){return null}var ty=typeof reportError=="function"?reportError:function(r){console.error(r)};function Qd(r){this._internalRoot=r}tc.prototype.render=Qd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Zu(r,s,null,null)},tc.prototype.unmount=Qd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;no(function(){Zu(null,r,null,null)}),s[_i]=null}};function tc(r){this._internalRoot=r}tc.prototype.unstable_scheduleHydration=function(r){if(r){var s=tu();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Hr.length&&s!==0&&s<Hr[a].priority;a++);Hr.splice(a,0,r),a===0&&iu(r)}};function Yd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function nc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function ny(){}function gT(r,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var K=ec(w);g.call(K)}}var w=Zg(s,h,r,0,null,!1,!1,"",ny);return r._reactRootContainer=w,r[_i]=w.current,Ka(r.nodeType===8?r.parentNode:r),no(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var x=h;h=function(){var K=ec(D);x.call(K)}}var D=Gd(r,0,!1,null,null,!1,!1,"",ny);return r._reactRootContainer=D,r[_i]=D.current,Ka(r.nodeType===8?r.parentNode:r),no(function(){Zu(s,D,a,h)}),D}function rc(r,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var x=f;f=function(){var D=ec(w);x.call(D)}}Zu(s,w,r,f)}else w=gT(a,s,r,f,h);return ec(w)}Zl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Hi(s.pendingLanes);a!==0&&(Gi(s,a|1),Fn(s,et()),(ut&6)===0&&(ra=et()+500,ns()))}break;case 13:no(function(){var h=Ii(r,1);if(h!==null){var f=An();Nr(h,r,1,f)}}),Kd(r,1)}},Po=function(r){if(r.tag===13){var s=Ii(r,134217728);if(s!==null){var a=An();Nr(s,r,134217728,a)}Kd(r,134217728)}},eu=function(r){if(r.tag===13){var s=ls(r),a=Ii(r,s);if(a!==null){var h=An();Nr(a,r,s,h)}Kd(r,s)}},tu=function(){return st},nu=function(r,s){var a=st;try{return st=r,s()}finally{st=a}},fi=function(r,s,a){switch(s){case"input":if(Vr(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=wu(h);if(!f)throw Error(t(90));ye(h),Vr(h,f)}}}break;case"textarea":Pn(r,a);break;case"select":s=a.value,s!=null&&yr(r,!!a.multiple,s,!1)}},Fr=zd,Ur=no;var yT={usingClientEntryPoint:!1,Events:[Ja,Ho,wu,Hn,Us,zd]},hl={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vT={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ct(r),r===null?null:r.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||mT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ft=ic.inject(vT),jt=ic}catch{}}return Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yT,Un.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yd(s))throw Error(t(200));return pT(r,s,null,a)},Un.createRoot=function(r,s){if(!Yd(r))throw Error(t(299));var a=!1,h="",f=ty;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Gd(r,1,!1,null,null,a,!1,h,f),r[_i]=s.current,Ka(r.nodeType===8?r.parentNode:r),new Qd(s)},Un.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ct(s),r=r===null?null:r.stateNode,r},Un.flushSync=function(r){return no(r)},Un.hydrate=function(r,s,a){if(!nc(s))throw Error(t(200));return rc(null,r,s,!0,a)},Un.hydrateRoot=function(r,s,a){if(!Yd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=ty;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Zg(s,null,r,1,a??null,f,!1,g,w),r[_i]=s.current,Ka(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new tc(s)},Un.render=function(r,s,a){if(!nc(s))throw Error(t(200));return rc(null,r,s,!1,a)},Un.unmountComponentAtNode=function(r){if(!nc(r))throw Error(t(40));return r._reactRootContainer?(no(function(){rc(null,null,r,!1,function(){r._reactRootContainer=null,r[_i]=null})}),!0):!1},Un.unstable_batchedUpdates=zd,Un.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!nc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return rc(r,s,a,!1,h)},Un.version="18.3.1-next-f1338f8080-20240426",Un}var cy;function g_(){if(cy)return Zd.exports;cy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zd.exports=RT(),Zd.exports}var hy;function AT(){if(hy)return sc;hy=1;var n=g_();return sc.createRoot=n.createRoot,sc.hydrateRoot=n.hydrateRoot,sc}var PT=AT();const xT=Gf(PT);var y_=g_();const kT=Gf(y_),NT=p_({__proto__:null,default:kT},[y_]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pt(){return Pt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pt.apply(this,arguments)}var Ht;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ht||(Ht={}));const dy="popstate";function bT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:d}=i.location;return xl("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:fo(o)}return OT(e,t,null,n)}function Ye(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function va(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DT(){return Math.random().toString(36).substr(2,8)}function fy(n,e){return{usr:n.state,key:n.key,idx:e}}function xl(n,e,t,i){return t===void 0&&(t=null),Pt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ds(e):e,{state:t,key:e&&e.key||i||DT()})}function fo(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ds(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function OT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,d=Ht.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(Pt({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function E(){d=Ht.Pop;let H=_(),fe=H==null?null:H-y;y=H,p&&p({action:d,location:U.location,delta:fe})}function T(H,fe){d=Ht.Push;let Z=xl(U.location,H,fe);y=_()+1;let ce=fy(Z,y),pe=U.createHref(Z);try{c.pushState(ce,"",pe)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;o.location.assign(pe)}l&&p&&p({action:d,location:U.location,delta:1})}function R(H,fe){d=Ht.Replace;let Z=xl(U.location,H,fe);y=_();let ce=fy(Z,y),pe=U.createHref(Z);c.replaceState(ce,"",pe),l&&p&&p({action:d,location:U.location,delta:0})}function L(H){let fe=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof H=="string"?H:fo(H);return Z=Z.replace(/ $/,"%20"),Ye(fe,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,fe)}let U={get action(){return d},get location(){return n(o,c)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(dy,E),p=H,()=>{o.removeEventListener(dy,E),p=null}},createHref(H){return e(o,H)},createURL:L,encodeLocation(H){let fe=L(H);return{pathname:fe.pathname,search:fe.search,hash:fe.hash}},push:T,replace:R,go(H){return c.go(H)}};return U}var yt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(yt||(yt={}));const LT=new Set(["lazy","caseSensitive","path","id","index","children"]);function VT(n){return n.index===!0}function Sc(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((o,l)=>{let c=[...t,String(l)],d=typeof o.id=="string"?o.id:c.join("-");if(Ye(o.index!==!0||!o.children,"Cannot specify children on an index route"),Ye(!i[d],'Found a route id collision on id "'+d+`".  Route id's must be globally unique within Data Router usages`),VT(o)){let p=Pt({},o,e(o),{id:d});return i[d]=p,p}else{let p=Pt({},o,e(o),{id:d,children:void 0});return i[d]=p,o.children&&(p.children=Sc(o.children,e,c,i)),p}})}function ao(n,e,t){return t===void 0&&(t="/"),fc(n,e,t,!1)}function fc(n,e,t,i){let o=typeof e=="string"?Ds(e):e,l=Ni(o.pathname||"/",t);if(l==null)return null;let c=v_(n);FT(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let y=QT(l);d=GT(c[p],y,i)}return d}function MT(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function v_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Ye(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=xi([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Ye(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),v_(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:WT(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let p of __(l.path))o(l,c,p)}),e}function __(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=__(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function FT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const UT=/^:[\w-]+$/,jT=3,zT=2,BT=1,$T=10,HT=-2,py=n=>n==="*";function WT(n,e){let t=n.split("/"),i=t.length;return t.some(py)&&(i+=HT),e&&(i+=zT),t.filter(o=>!py(o)).reduce((o,l)=>o+(UT.test(l)?jT:l===""?BT:$T),i)}function qT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function GT(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,o={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=Cc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),T=p.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=Cc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:xi([l,E.pathname]),pathnameBase:XT(xi([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=xi([l,E.pathnameBase]))}return c}function Cc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=KT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:T,isOptional:R}=_;if(T==="*"){let U=d[E]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const L=d[E];return R&&!L?y[T]=void 0:y[T]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function KT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),va(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function QT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return va(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ni(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function YT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ds(n):n;return{pathname:t?t.startsWith("/")?t:JT(t,e):e,search:ZT(i),hash:eI(o)}}function JT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function nf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yc(n,e){let t=w_(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Jc(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ds(n):(o=Pt({},n),Ye(!o.pathname||!o.pathname.includes("?"),nf("?","pathname","search",o)),Ye(!o.pathname||!o.pathname.includes("#"),nf("#","pathname","hash",o)),Ye(!o.search||!o.search.includes("#"),nf("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}d=E>=0?e[E]:"/"}let p=YT(o,d),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const xi=n=>n.join("/").replace(/\/\/+/g,"/"),XT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Rc{constructor(e,t,i,o){o===void 0&&(o=!1),this.status=e,this.statusText=t||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function kl(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const E_=["post","put","patch","delete"],tI=new Set(E_),nI=["get",...E_],rI=new Set(nI),iI=new Set([301,302,303,307,308]),sI=new Set([307,308]),rf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Qf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),T_="remix-router-transitions";function lI(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Ye(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(n.mapRouteProperties)o=n.mapRouteProperties;else if(n.detectErrorBoundary){let b=n.detectErrorBoundary;o=F=>({hasErrorBoundary:b(F)})}else o=aI;let l={},c=Sc(n.routes,o,void 0,l),d,p=n.basename||"/",y=n.dataStrategy||dI,_=n.patchRoutesOnNavigation,E=Pt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),T=null,R=new Set,L=null,U=null,H=null,fe=n.hydrationData!=null,Z=ao(c,n.history.location,p),ce=!1,pe=null;if(Z==null&&!_){let b=jn(404,{pathname:n.history.location.pathname}),{matches:F,route:G}=Cy(c);Z=F,pe={[G.id]:b}}Z&&!n.hydrationData&&Ur(Z,c,n.history.location.pathname).active&&(Z=null);let Ue;if(Z)if(Z.some(b=>b.route.lazy))Ue=!1;else if(!Z.some(b=>b.route.loader))Ue=!0;else if(E.v7_partialHydration){let b=n.hydrationData?n.hydrationData.loaderData:null,F=n.hydrationData?n.hydrationData.errors:null;if(F){let G=Z.findIndex(te=>F[te.route.id]!==void 0);Ue=Z.slice(0,G+1).every(te=>!vf(te.route,b,F))}else Ue=Z.every(G=>!vf(G.route,b,F))}else Ue=n.hydrationData!=null;else if(Ue=!1,Z=[],E.v7_partialHydration){let b=Ur(null,c,n.history.location.pathname);b.active&&b.matches&&(ce=!0,Z=b.matches)}let Fe,S={historyAction:n.history.action,location:n.history.location,matches:Z,initialized:Ue,navigation:rf,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||pe,fetchers:new Map,blockers:new Map},C=Ht.Pop,P=!1,N,O=!1,M=new Map,k=null,Ke=!1,lt=!1,vt=[],Qe=new Set,oe=new Map,ke=0,ge=-1,j=new Map,X=new Set,me=new Map,$e=new Map,Oe=new Set,z=new Map,Q=new Map,q;function re(){if(T=n.history.listen(b=>{let{action:F,location:G,delta:te}=b;if(q){q(),q=void 0;return}va(Q.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=fi({currentLocation:S.location,nextLocation:G,historyAction:F});if(de&&te!=null){let Se=new Promise(Le=>{q=Le});n.history.go(te*-1),wr(de,{state:"blocked",location:G,proceed(){wr(de,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),Se.then(()=>n.history.go(te))},reset(){let Le=new Map(S.blockers);Le.set(de,fl),ye({blockers:Le})}});return}return Mt(F,G)}),t){RI(e,M);let b=()=>AI(e,M);e.addEventListener("pagehide",b),k=()=>e.removeEventListener("pagehide",b)}return S.initialized||Mt(Ht.Pop,S.location,{initialHydration:!0}),Fe}function ue(){T&&T(),k&&k(),R.clear(),N&&N.abort(),S.fetchers.forEach((b,F)=>nr(F)),S.blockers.forEach((b,F)=>Mr(F))}function _e(b){return R.add(b),()=>R.delete(b)}function ye(b,F){F===void 0&&(F={}),S=Pt({},S,b);let G=[],te=[];E.v7_fetcherPersist&&S.fetchers.forEach((de,Se)=>{de.state==="idle"&&(Oe.has(Se)?te.push(Se):G.push(Se))}),Oe.forEach(de=>{!S.fetchers.has(de)&&!oe.has(de)&&te.push(de)}),[...R].forEach(de=>de(S,{deletedFetchers:te,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),E.v7_fetcherPersist?(G.forEach(de=>S.fetchers.delete(de)),te.forEach(de=>nr(de))):te.forEach(de=>Oe.delete(de))}function be(b,F,G){var te,de;let{flushSync:Se}=G===void 0?{}:G,Le=S.actionData!=null&&S.navigation.formMethod!=null&&br(S.navigation.formMethod)&&S.navigation.state==="loading"&&((te=b.state)==null?void 0:te._isRedirect)!==!0,Ce;F.actionData?Object.keys(F.actionData).length>0?Ce=F.actionData:Ce=null:Le?Ce=S.actionData:Ce=null;let Ie=F.loaderData?Iy(S.loaderData,F.loaderData,F.matches||[],F.errors):S.loaderData,we=S.blockers;we.size>0&&(we=new Map(we),we.forEach((We,Lt)=>we.set(Lt,fl)));let Ee=P===!0||S.navigation.formMethod!=null&&br(S.navigation.formMethod)&&((de=b.state)==null?void 0:de._isRedirect)!==!0;d&&(c=d,d=void 0),Ke||C===Ht.Pop||(C===Ht.Push?n.history.push(b,b.state):C===Ht.Replace&&n.history.replace(b,b.state));let je;if(C===Ht.Pop){let We=M.get(S.location.pathname);We&&We.has(b.pathname)?je={currentLocation:S.location,nextLocation:b}:M.has(b.pathname)&&(je={currentLocation:b,nextLocation:S.location})}else if(O){let We=M.get(S.location.pathname);We?We.add(b.pathname):(We=new Set([b.pathname]),M.set(S.location.pathname,We)),je={currentLocation:S.location,nextLocation:b}}ye(Pt({},F,{actionData:Ce,loaderData:Ie,historyAction:C,location:b,initialized:!0,navigation:rf,revalidation:"idle",restoreScrollPosition:Fr(b,F.matches||S.matches),preventScrollReset:Ee,blockers:we}),{viewTransitionOpts:je,flushSync:Se===!0}),C=Ht.Pop,P=!1,O=!1,Ke=!1,lt=!1,vt=[]}async function dt(b,F){if(typeof b=="number"){n.history.go(b);return}let G=yf(S.location,S.matches,p,E.v7_prependBasename,b,E.v7_relativeSplatPath,F?.fromRouteId,F?.relative),{path:te,submission:de,error:Se}=my(E.v7_normalizeFormMethod,!1,G,F),Le=S.location,Ce=xl(S.location,te,F&&F.state);Ce=Pt({},Ce,n.history.encodeLocation(Ce));let Ie=F&&F.replace!=null?F.replace:void 0,we=Ht.Push;Ie===!0?we=Ht.Replace:Ie===!1||de!=null&&br(de.formMethod)&&de.formAction===S.location.pathname+S.location.search&&(we=Ht.Replace);let Ee=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,je=(F&&F.flushSync)===!0,We=fi({currentLocation:Le,nextLocation:Ce,historyAction:we});if(We){wr(We,{state:"blocked",location:Ce,proceed(){wr(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),dt(b,F)},reset(){let Lt=new Map(S.blockers);Lt.set(We,fl),ye({blockers:Lt})}});return}return await Mt(we,Ce,{submission:de,pendingError:Se,preventScrollReset:Ee,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:je})}function Et(){if(xt(),ye({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){Mt(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}Mt(C||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:O===!0})}}async function Mt(b,F,G){N&&N.abort(),N=null,C=b,Ke=(G&&G.startUninterruptedRevalidation)===!0,Us(S.location,S.matches),P=(G&&G.preventScrollReset)===!0,O=(G&&G.enableViewTransition)===!0;let te=d||c,de=G&&G.overrideNavigation,Se=G!=null&&G.initialHydration&&S.matches&&S.matches.length>0&&!ce?S.matches:ao(te,F,p),Le=(G&&G.flushSync)===!0;if(Se&&S.initialized&&!lt&&vI(S.location,F)&&!(G&&G.submission&&br(G.submission.formMethod))){be(F,{matches:Se},{flushSync:Le});return}let Ce=Ur(Se,te,F.pathname);if(Ce.active&&Ce.matches&&(Se=Ce.matches),!Se){let{error:ct,notFoundMatches:Xe,route:mt}=pn(F.pathname);be(F,{matches:Xe,loaderData:{},errors:{[mt.id]:ct}},{flushSync:Le});return}N=new AbortController;let Ie=sa(n.history,F,N.signal,G&&G.submission),we;if(G&&G.pendingError)we=[lo(Se).route.id,{type:yt.error,error:G.pendingError}];else if(G&&G.submission&&br(G.submission.formMethod)){let ct=await Vr(Ie,F,G.submission,Se,Ce.active,{replace:G.replace,flushSync:Le});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[Xe,mt]=ct.pendingActionResult;if(er(mt)&&kl(mt.error)&&mt.error.status===404){N=null,be(F,{matches:ct.matches,loaderData:{},errors:{[Xe]:mt.error}});return}}Se=ct.matches||Se,we=ct.pendingActionResult,de=sf(F,G.submission),Le=!1,Ce.active=!1,Ie=sa(n.history,Ie.url,Ie.signal)}let{shortCircuited:Ee,matches:je,loaderData:We,errors:Lt}=await So(Ie,F,Se,Ce.active,de,G&&G.submission,G&&G.fetcherSubmission,G&&G.replace,G&&G.initialHydration===!0,Le,we);Ee||(N=null,be(F,Pt({matches:je||Se},Sy(we),{loaderData:We,errors:Lt})))}async function Vr(b,F,G,te,de,Se){Se===void 0&&(Se={}),xt();let Le=SI(F,G);if(ye({navigation:Le},{flushSync:Se.flushSync===!0}),de){let we=await Nn(te,F.pathname,b.signal);if(we.type==="aborted")return{shortCircuited:!0};if(we.type==="error"){let Ee=lo(we.partialMatches).route.id;return{matches:we.partialMatches,pendingActionResult:[Ee,{type:yt.error,error:we.error}]}}else if(we.matches)te=we.matches;else{let{notFoundMatches:Ee,error:je,route:We}=pn(F.pathname);return{matches:Ee,pendingActionResult:[We.id,{type:yt.error,error:je}]}}}let Ce,Ie=gl(te,F);if(!Ie.route.action&&!Ie.route.lazy)Ce={type:yt.error,error:jn(405,{method:b.method,pathname:F.pathname,routeId:Ie.route.id})};else if(Ce=(await vr("action",S,b,[Ie],te,null))[Ie.route.id],b.signal.aborted)return{shortCircuited:!0};if(uo(Ce)){let we;return Se&&Se.replace!=null?we=Se.replace:we=wy(Ce.response.headers.get("Location"),new URL(b.url),p)===S.location.pathname+S.location.search,await Pn(b,Ce,!0,{submission:G,replace:we}),{shortCircuited:!0}}if(vs(Ce))throw jn(400,{type:"defer-action"});if(er(Ce)){let we=lo(te,Ie.route.id);return(Se&&Se.replace)!==!0&&(C=Ht.Push),{matches:te,pendingActionResult:[we.route.id,Ce]}}return{matches:te,pendingActionResult:[Ie.route.id,Ce]}}async function So(b,F,G,te,de,Se,Le,Ce,Ie,we,Ee){let je=de||sf(F,Se),We=Se||Le||Ay(je),Lt=!Ke&&(!E.v7_partialHydration||!Ie);if(te){if(Lt){let ft=hi(Ee);ye(Pt({navigation:je},ft!==void 0?{actionData:ft}:{}),{flushSync:we})}let tt=await Nn(G,F.pathname,b.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){let ft=lo(tt.partialMatches).route.id;return{matches:tt.partialMatches,loaderData:{},errors:{[ft]:tt.error}}}else if(tt.matches)G=tt.matches;else{let{error:ft,notFoundMatches:jt,route:Br}=pn(F.pathname);return{matches:jt,loaderData:{},errors:{[Br.id]:ft}}}}let ct=d||c,[Xe,mt]=yy(n.history,S,G,We,F,E.v7_partialHydration&&Ie===!0,E.v7_skipActionErrorRevalidation,lt,vt,Qe,Oe,me,X,ct,p,Ee);if(kn(tt=>!(G&&G.some(ft=>ft.route.id===tt))||Xe&&Xe.some(ft=>ft.route.id===tt)),ge=++ke,Xe.length===0&&mt.length===0){let tt=ji();return be(F,Pt({matches:G,loaderData:{},errors:Ee&&er(Ee[1])?{[Ee[0]]:Ee[1].error}:null},Sy(Ee),tt?{fetchers:new Map(S.fetchers)}:{}),{flushSync:we}),{shortCircuited:!0}}if(Lt){let tt={};if(!te){tt.navigation=je;let ft=hi(Ee);ft!==void 0&&(tt.actionData=ft)}mt.length>0&&(tt.fetchers=gr(mt)),ye(tt,{flushSync:we})}mt.forEach(tt=>{xn(tt.key),tt.controller&&oe.set(tt.key,tt.controller)});let rr=()=>mt.forEach(tt=>xn(tt.key));N&&N.signal.addEventListener("abort",rr);let{loaderResults:jr,fetcherResults:Wn}=await Ot(S,G,Xe,mt,b);if(b.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",rr),mt.forEach(tt=>oe.delete(tt.key));let et=oc(jr);if(et)return await Pn(b,et.result,!0,{replace:Ce}),{shortCircuited:!0};if(et=oc(Wn),et)return X.add(et.key),await Pn(b,et.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:$i,errors:qn}=Ty(S,G,jr,Ee,mt,Wn,z);z.forEach((tt,ft)=>{tt.subscribe(jt=>{(jt||tt.done)&&z.delete(ft)})}),E.v7_partialHydration&&Ie&&S.errors&&(qn=Pt({},S.errors,qn));let mn=ji(),on=zi(ge),zr=mn||on||mt.length>0;return Pt({matches:G,loaderData:$i,errors:qn},zr?{fetchers:new Map(S.fetchers)}:{})}function hi(b){if(b&&!er(b[1]))return{[b[0]]:b[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function gr(b){return b.forEach(F=>{let G=S.fetchers.get(F.key),te=pl(void 0,G?G.data:void 0);S.fetchers.set(F.key,te)}),new Map(S.fetchers)}function yr(b,F,G,te){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xn(b);let de=(te&&te.flushSync)===!0,Se=d||c,Le=yf(S.location,S.matches,p,E.v7_prependBasename,G,E.v7_relativeSplatPath,F,te?.relative),Ce=ao(Se,Le,p),Ie=Ur(Ce,Se,Le);if(Ie.active&&Ie.matches&&(Ce=Ie.matches),!Ce){Sn(b,F,jn(404,{pathname:Le}),{flushSync:de});return}let{path:we,submission:Ee,error:je}=my(E.v7_normalizeFormMethod,!0,Le,te);if(je){Sn(b,F,je,{flushSync:de});return}let We=gl(Ce,we),Lt=(te&&te.preventScrollReset)===!0;if(Ee&&br(Ee.formMethod)){Ms(b,F,we,We,Ce,Ie.active,de,Lt,Ee);return}me.set(b,{routeId:F,path:we}),Fi(b,F,we,We,Ce,Ie.active,de,Lt,Ee)}async function Ms(b,F,G,te,de,Se,Le,Ce,Ie){xt(),me.delete(b);function we(nt){if(!nt.route.action&&!nt.route.lazy){let ir=jn(405,{method:Ie.formMethod,pathname:G,routeId:F});return Sn(b,F,ir,{flushSync:Le}),!0}return!1}if(!Se&&we(te))return;let Ee=S.fetchers.get(b);Xt(b,CI(Ie,Ee),{flushSync:Le});let je=new AbortController,We=sa(n.history,G,je.signal,Ie);if(Se){let nt=await Nn(de,new URL(We.url).pathname,We.signal,b);if(nt.type==="aborted")return;if(nt.type==="error"){Sn(b,F,nt.error,{flushSync:Le});return}else if(nt.matches){if(de=nt.matches,te=gl(de,G),we(te))return}else{Sn(b,F,jn(404,{pathname:G}),{flushSync:Le});return}}oe.set(b,je);let Lt=ke,Xe=(await vr("action",S,We,[te],de,b))[te.route.id];if(We.signal.aborted){oe.get(b)===je&&oe.delete(b);return}if(E.v7_fetcherPersist&&Oe.has(b)){if(uo(Xe)||er(Xe)){Xt(b,fs(void 0));return}}else{if(uo(Xe))if(oe.delete(b),ge>Lt){Xt(b,fs(void 0));return}else return X.add(b),Xt(b,pl(Ie)),Pn(We,Xe,!1,{fetcherSubmission:Ie,preventScrollReset:Ce});if(er(Xe)){Sn(b,F,Xe.error);return}}if(vs(Xe))throw jn(400,{type:"defer-action"});let mt=S.navigation.location||S.location,rr=sa(n.history,mt,je.signal),jr=d||c,Wn=S.navigation.state!=="idle"?ao(jr,S.navigation.location,p):S.matches;Ye(Wn,"Didn't find any matches after fetcher action");let et=++ke;j.set(b,et);let $i=pl(Ie,Xe.data);S.fetchers.set(b,$i);let[qn,mn]=yy(n.history,S,Wn,Ie,mt,!1,E.v7_skipActionErrorRevalidation,lt,vt,Qe,Oe,me,X,jr,p,[te.route.id,Xe]);mn.filter(nt=>nt.key!==b).forEach(nt=>{let ir=nt.key,zs=S.fetchers.get(ir),Co=pl(void 0,zs?zs.data:void 0);S.fetchers.set(ir,Co),xn(ir),nt.controller&&oe.set(ir,nt.controller)}),ye({fetchers:new Map(S.fetchers)});let on=()=>mn.forEach(nt=>xn(nt.key));je.signal.addEventListener("abort",on);let{loaderResults:zr,fetcherResults:tt}=await Ot(S,Wn,qn,mn,rr);if(je.signal.aborted)return;je.signal.removeEventListener("abort",on),j.delete(b),oe.delete(b),mn.forEach(nt=>oe.delete(nt.key));let ft=oc(zr);if(ft)return Pn(rr,ft.result,!1,{preventScrollReset:Ce});if(ft=oc(tt),ft)return X.add(ft.key),Pn(rr,ft.result,!1,{preventScrollReset:Ce});let{loaderData:jt,errors:Br}=Ty(S,Wn,zr,void 0,mn,tt,z);if(S.fetchers.has(b)){let nt=fs(Xe.data);S.fetchers.set(b,nt)}zi(et),S.navigation.state==="loading"&&et>ge?(Ye(C,"Expected pending action"),N&&N.abort(),be(S.navigation.location,{matches:Wn,loaderData:jt,errors:Br,fetchers:new Map(S.fetchers)})):(ye({errors:Br,loaderData:Iy(S.loaderData,jt,Wn,Br),fetchers:new Map(S.fetchers)}),lt=!1)}async function Fi(b,F,G,te,de,Se,Le,Ce,Ie){let we=S.fetchers.get(b);Xt(b,pl(Ie,we?we.data:void 0),{flushSync:Le});let Ee=new AbortController,je=sa(n.history,G,Ee.signal);if(Se){let Xe=await Nn(de,new URL(je.url).pathname,je.signal,b);if(Xe.type==="aborted")return;if(Xe.type==="error"){Sn(b,F,Xe.error,{flushSync:Le});return}else if(Xe.matches)de=Xe.matches,te=gl(de,G);else{Sn(b,F,jn(404,{pathname:G}),{flushSync:Le});return}}oe.set(b,Ee);let We=ke,ct=(await vr("loader",S,je,[te],de,b))[te.route.id];if(vs(ct)&&(ct=await Yf(ct,je.signal,!0)||ct),oe.get(b)===Ee&&oe.delete(b),!je.signal.aborted){if(Oe.has(b)){Xt(b,fs(void 0));return}if(uo(ct))if(ge>We){Xt(b,fs(void 0));return}else{X.add(b),await Pn(je,ct,!1,{preventScrollReset:Ce});return}if(er(ct)){Sn(b,F,ct.error);return}Ye(!vs(ct),"Unhandled fetcher deferred data"),Xt(b,fs(ct.data))}}async function Pn(b,F,G,te){let{submission:de,fetcherSubmission:Se,preventScrollReset:Le,replace:Ce}=te===void 0?{}:te;F.response.headers.has("X-Remix-Revalidate")&&(lt=!0);let Ie=F.response.headers.get("Location");Ye(Ie,"Expected a Location header on the redirect Response"),Ie=wy(Ie,new URL(b.url),p);let we=xl(S.location,Ie,{_isRedirect:!0});if(t){let Xe=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Xe=!0;else if(Qf.test(Ie)){const mt=n.history.createURL(Ie);Xe=mt.origin!==e.location.origin||Ni(mt.pathname,p)==null}if(Xe){Ce?e.location.replace(Ie):e.location.assign(Ie);return}}N=null;let Ee=Ce===!0||F.response.headers.has("X-Remix-Replace")?Ht.Replace:Ht.Push,{formMethod:je,formAction:We,formEncType:Lt}=S.navigation;!de&&!Se&&je&&We&&Lt&&(de=Ay(S.navigation));let ct=de||Se;if(sI.has(F.response.status)&&ct&&br(ct.formMethod))await Mt(Ee,we,{submission:Pt({},ct,{formAction:Ie}),preventScrollReset:Le||P,enableViewTransition:G?O:void 0});else{let Xe=sf(we,de);await Mt(Ee,we,{overrideNavigation:Xe,fetcherSubmission:Se,preventScrollReset:Le||P,enableViewTransition:G?O:void 0})}}async function vr(b,F,G,te,de,Se){let Le,Ce={};try{Le=await fI(y,b,F,G,te,de,Se,l,o)}catch(Ie){return te.forEach(we=>{Ce[we.route.id]={type:yt.error,error:Ie}}),Ce}for(let[Ie,we]of Object.entries(Le))if(_I(we)){let Ee=we.result;Ce[Ie]={type:yt.redirect,response:gI(Ee,G,Ie,de,p,E.v7_relativeSplatPath)}}else Ce[Ie]=await mI(we);return Ce}async function Ot(b,F,G,te,de){let Se=b.matches,Le=vr("loader",b,de,G,F,null),Ce=Promise.all(te.map(async Ee=>{if(Ee.matches&&Ee.match&&Ee.controller){let We=(await vr("loader",b,sa(n.history,Ee.path,Ee.controller.signal),[Ee.match],Ee.matches,Ee.key))[Ee.match.route.id];return{[Ee.key]:We}}else return Promise.resolve({[Ee.key]:{type:yt.error,error:jn(404,{pathname:Ee.path})}})})),Ie=await Le,we=(await Ce).reduce((Ee,je)=>Object.assign(Ee,je),{});return await Promise.all([TI(F,Ie,de.signal,Se,b.loaderData),II(F,we,te)]),{loaderResults:Ie,fetcherResults:we}}function xt(){lt=!0,vt.push(...kn()),me.forEach((b,F)=>{oe.has(F)&&Qe.add(F),xn(F)})}function Xt(b,F,G){G===void 0&&(G={}),S.fetchers.set(b,F),ye({fetchers:new Map(S.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function Sn(b,F,G,te){te===void 0&&(te={});let de=lo(S.matches,F);nr(b),ye({errors:{[de.route.id]:G},fetchers:new Map(S.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function _r(b){return $e.set(b,($e.get(b)||0)+1),Oe.has(b)&&Oe.delete(b),S.fetchers.get(b)||oI}function nr(b){let F=S.fetchers.get(b);oe.has(b)&&!(F&&F.state==="loading"&&j.has(b))&&xn(b),me.delete(b),j.delete(b),X.delete(b),E.v7_fetcherPersist&&Oe.delete(b),Qe.delete(b),S.fetchers.delete(b)}function di(b){let F=($e.get(b)||0)-1;F<=0?($e.delete(b),Oe.add(b),E.v7_fetcherPersist||nr(b)):$e.set(b,F),ye({fetchers:new Map(S.fetchers)})}function xn(b){let F=oe.get(b);F&&(F.abort(),oe.delete(b))}function Ui(b){for(let F of b){let G=_r(F),te=fs(G.data);S.fetchers.set(F,te)}}function ji(){let b=[],F=!1;for(let G of X){let te=S.fetchers.get(G);Ye(te,"Expected fetcher: "+G),te.state==="loading"&&(X.delete(G),b.push(G),F=!0)}return Ui(b),F}function zi(b){let F=[];for(let[G,te]of j)if(te<b){let de=S.fetchers.get(G);Ye(de,"Expected fetcher: "+G),de.state==="loading"&&(xn(G),j.delete(G),F.push(G))}return Ui(F),F.length>0}function Fs(b,F){let G=S.blockers.get(b)||fl;return Q.get(b)!==F&&Q.set(b,F),G}function Mr(b){S.blockers.delete(b),Q.delete(b)}function wr(b,F){let G=S.blockers.get(b)||fl;Ye(G.state==="unblocked"&&F.state==="blocked"||G.state==="blocked"&&F.state==="blocked"||G.state==="blocked"&&F.state==="proceeding"||G.state==="blocked"&&F.state==="unblocked"||G.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+G.state+" -> "+F.state);let te=new Map(S.blockers);te.set(b,F),ye({blockers:te})}function fi(b){let{currentLocation:F,nextLocation:G,historyAction:te}=b;if(Q.size===0)return;Q.size>1&&va(!1,"A router only supports one blocker at a time");let de=Array.from(Q.entries()),[Se,Le]=de[de.length-1],Ce=S.blockers.get(Se);if(!(Ce&&Ce.state==="proceeding")&&Le({currentLocation:F,nextLocation:G,historyAction:te}))return Se}function pn(b){let F=jn(404,{pathname:b}),G=d||c,{matches:te,route:de}=Cy(G);return kn(),{notFoundMatches:te,route:de,error:F}}function kn(b){let F=[];return z.forEach((G,te)=>{(!b||b(te))&&(G.cancel(),F.push(te),z.delete(te))}),F}function Bi(b,F,G){if(L=b,H=F,U=G||null,!fe&&S.navigation===rf){fe=!0;let te=Fr(S.location,S.matches);te!=null&&ye({restoreScrollPosition:te})}return()=>{L=null,H=null,U=null}}function Hn(b,F){return U&&U(b,F.map(te=>MT(te,S.loaderData)))||b.key}function Us(b,F){if(L&&H){let G=Hn(b,F);L[G]=H()}}function Fr(b,F){if(L){let G=Hn(b,F),te=L[G];if(typeof te=="number")return te}return null}function Ur(b,F,G){if(_)if(b){if(Object.keys(b[0].params).length>0)return{active:!0,matches:fc(F,G,p,!0)}}else return{active:!0,matches:fc(F,G,p,!0)||[]};return{active:!1,matches:null}}async function Nn(b,F,G,te){if(!_)return{type:"success",matches:b};let de=b;for(;;){let Se=d==null,Le=d||c,Ce=l;try{await _({signal:G,path:F,matches:de,fetcherKey:te,patch:(Ee,je)=>{G.aborted||_y(Ee,je,Le,Ce,o)}})}catch(Ee){return{type:"error",error:Ee,partialMatches:de}}finally{Se&&!G.aborted&&(c=[...c])}if(G.aborted)return{type:"aborted"};let Ie=ao(Le,F,p);if(Ie)return{type:"success",matches:Ie};let we=fc(Le,F,p,!0);if(!we||de.length===we.length&&de.every((Ee,je)=>Ee.route.id===we[je].route.id))return{type:"success",matches:null};de=we}}function js(b){l={},d=Sc(b,o,void 0,l)}function kt(b,F){let G=d==null;_y(b,F,d||c,l,o),G&&(c=[...c],ye({}))}return Fe={get basename(){return p},get future(){return E},get state(){return S},get routes(){return c},get window(){return e},initialize:re,subscribe:_e,enableScrollRestoration:Bi,navigate:dt,fetch:yr,revalidate:Et,createHref:b=>n.history.createHref(b),encodeLocation:b=>n.history.encodeLocation(b),getFetcher:_r,deleteFetcher:di,dispose:ue,getBlocker:Fs,deleteBlocker:Mr,patchRoutes:kt,_internalFetchControllers:oe,_internalActiveDeferreds:z,_internalSetRoutes:js},Fe}function uI(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function yf(n,e,t,i,o,l,c,d){let p,y;if(c){p=[];for(let E of e)if(p.push(E),E.route.id===c){y=E;break}}else p=e,y=e[e.length-1];let _=Jc(o||".",Yc(p,l),Ni(n.pathname,t)||n.pathname,d==="path");if(o==null&&(_.search=n.search,_.hash=n.hash),(o==null||o===""||o===".")&&y){let E=Jf(_.search);if(y.route.index&&!E)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!y.route.index&&E){let T=new URLSearchParams(_.search),R=T.getAll("index");T.delete("index"),R.filter(U=>U).forEach(U=>T.append("index",U));let L=T.toString();_.search=L?"?"+L:""}}return i&&t!=="/"&&(_.pathname=_.pathname==="/"?t:xi([t,_.pathname])),fo(_)}function my(n,e,t,i){if(!i||!uI(i))return{path:t};if(i.formMethod&&!EI(i.formMethod))return{path:t,error:jn(405,{method:i.formMethod})};let o=()=>({path:t,error:jn(400,{type:"invalid-body"})}),l=i.formMethod||"get",c=n?l.toUpperCase():l.toLowerCase(),d=C_(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!br(c))return o();let T=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((R,L)=>{let[U,H]=L;return""+R+U+"="+H+`
`},""):String(i.body);return{path:t,submission:{formMethod:c,formAction:d,formEncType:i.formEncType,formData:void 0,json:void 0,text:T}}}else if(i.formEncType==="application/json"){if(!br(c))return o();try{let T=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:c,formAction:d,formEncType:i.formEncType,formData:void 0,json:T,text:void 0}}}catch{return o()}}}Ye(typeof FormData=="function","FormData is not available in this environment");let p,y;if(i.formData)p=_f(i.formData),y=i.formData;else if(i.body instanceof FormData)p=_f(i.body),y=i.body;else if(i.body instanceof URLSearchParams)p=i.body,y=Ey(p);else if(i.body==null)p=new URLSearchParams,y=new FormData;else try{p=new URLSearchParams(i.body),y=Ey(p)}catch{return o()}let _={formMethod:c,formAction:d,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(br(_.formMethod))return{path:t,submission:_};let E=Ds(t);return e&&E.search&&Jf(E.search)&&p.append("index",""),E.search="?"+p,{path:fo(E),submission:_}}function gy(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function yy(n,e,t,i,o,l,c,d,p,y,_,E,T,R,L,U){let H=U?er(U[1])?U[1].error:U[1].data:void 0,fe=n.createURL(e.location),Z=n.createURL(o),ce=t;l&&e.errors?ce=gy(t,Object.keys(e.errors)[0],!0):U&&er(U[1])&&(ce=gy(t,U[0]));let pe=U?U[1].statusCode:void 0,Ue=c&&pe&&pe>=400,Fe=ce.filter((C,P)=>{let{route:N}=C;if(N.lazy)return!0;if(N.loader==null)return!1;if(l)return vf(N,e.loaderData,e.errors);if(cI(e.loaderData,e.matches[P],C)||p.some(k=>k===C.route.id))return!0;let O=e.matches[P],M=C;return vy(C,Pt({currentUrl:fe,currentParams:O.params,nextUrl:Z,nextParams:M.params},i,{actionResult:H,actionStatus:pe,defaultShouldRevalidate:Ue?!1:d||fe.pathname+fe.search===Z.pathname+Z.search||fe.search!==Z.search||I_(O,M)}))}),S=[];return E.forEach((C,P)=>{if(l||!t.some(Ke=>Ke.route.id===C.routeId)||_.has(P))return;let N=ao(R,C.path,L);if(!N){S.push({key:P,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let O=e.fetchers.get(P),M=gl(N,C.path),k=!1;T.has(P)?k=!1:y.has(P)?(y.delete(P),k=!0):O&&O.state!=="idle"&&O.data===void 0?k=d:k=vy(M,Pt({currentUrl:fe,currentParams:e.matches[e.matches.length-1].params,nextUrl:Z,nextParams:t[t.length-1].params},i,{actionResult:H,actionStatus:pe,defaultShouldRevalidate:Ue?!1:d})),k&&S.push({key:P,routeId:C.routeId,path:C.path,matches:N,match:M,controller:new AbortController})}),[Fe,S]}function vf(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function cI(n,e,t){let i=!e||t.route.id!==e.route.id,o=n[t.route.id]===void 0;return i||o}function I_(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function vy(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function _y(n,e,t,i,o){var l;let c;if(n){let y=i[n];Ye(y,"No route found to patch children into: routeId = "+n),y.children||(y.children=[]),c=y.children}else c=t;let d=e.filter(y=>!c.some(_=>S_(y,_))),p=Sc(d,o,[n||"_","patch",String(((l=c)==null?void 0:l.length)||"0")],i);c.push(...p)}function S_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(l=>S_(t,l))}):!1}async function hI(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Ye(o,"No route found in manifest");let l={};for(let c in i){let p=o[c]!==void 0&&c!=="hasErrorBoundary";va(!p,'Route "'+o.id+'" has a static property "'+c+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+c+'" will be ignored.')),!p&&!LT.has(c)&&(l[c]=i[c])}Object.assign(o,l),Object.assign(o,Pt({},e(o),{lazy:void 0}))}async function dI(n){let{matches:e}=n,t=e.filter(o=>o.shouldLoad);return(await Promise.all(t.map(o=>o.resolve()))).reduce((o,l,c)=>Object.assign(o,{[t[c].route.id]:l}),{})}async function fI(n,e,t,i,o,l,c,d,p,y){let _=l.map(R=>R.route.lazy?hI(R.route,p,d):void 0),E=l.map((R,L)=>{let U=_[L],H=o.some(Z=>Z.route.id===R.route.id);return Pt({},R,{shouldLoad:H,resolve:async Z=>(Z&&i.method==="GET"&&(R.route.lazy||R.route.loader)&&(H=!0),H?pI(e,i,R,U,Z,y):Promise.resolve({type:yt.data,result:void 0}))})}),T=await n({matches:E,request:i,params:l[0].params,fetcherKey:c,context:y});try{await Promise.all(_)}catch{}return T}async function pI(n,e,t,i,o,l){let c,d,p=y=>{let _,E=new Promise((L,U)=>_=U);d=()=>_(),e.signal.addEventListener("abort",d);let T=L=>typeof y!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):y({request:e,params:t.params,context:l},...L!==void 0?[L]:[]),R=(async()=>{try{return{type:"data",result:await(o?o(U=>T(U)):T())}}catch(L){return{type:"error",result:L}}})();return Promise.race([R,E])};try{let y=t.route[n];if(i)if(y){let _,[E]=await Promise.all([p(y).catch(T=>{_=T}),i]);if(_!==void 0)throw _;c=E}else if(await i,y=t.route[n],y)c=await p(y);else if(n==="action"){let _=new URL(e.url),E=_.pathname+_.search;throw jn(405,{method:e.method,pathname:E,routeId:t.route.id})}else return{type:yt.data,result:void 0};else if(y)c=await p(y);else{let _=new URL(e.url),E=_.pathname+_.search;throw jn(404,{pathname:E})}Ye(c.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(y){return{type:yt.error,result:y}}finally{d&&e.signal.removeEventListener("abort",d)}return c}async function mI(n){let{result:e,type:t}=n;if(R_(e)){let E;try{let T=e.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?e.body==null?E=null:E=await e.json():E=await e.text()}catch(T){return{type:yt.error,error:T}}return t===yt.error?{type:yt.error,error:new Rc(e.status,e.statusText,E),statusCode:e.status,headers:e.headers}:{type:yt.data,data:E,statusCode:e.status,headers:e.headers}}if(t===yt.error){if(Ry(e)){var i,o;if(e.data instanceof Error){var l,c;return{type:yt.error,error:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:yt.error,error:new Rc(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:kl(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:yt.error,error:e,statusCode:kl(e)?e.status:void 0}}if(wI(e)){var d,p;return{type:yt.deferred,deferredData:e,statusCode:(d=e.init)==null?void 0:d.status,headers:((p=e.init)==null?void 0:p.headers)&&new Headers(e.init.headers)}}if(Ry(e)){var y,_;return{type:yt.data,data:e.data,statusCode:(y=e.init)==null?void 0:y.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:yt.data,data:e}}function gI(n,e,t,i,o,l){let c=n.headers.get("Location");if(Ye(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!Qf.test(c)){let d=i.slice(0,i.findIndex(p=>p.route.id===t)+1);c=yf(new URL(e.url),d,o,!0,c,l),n.headers.set("Location",c)}return n}function wy(n,e,t){if(Qf.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=Ni(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return n}function sa(n,e,t,i){let o=n.createURL(C_(e)).toString(),l={signal:t};if(i&&br(i.formMethod)){let{formMethod:c,formEncType:d}=i;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(i.json)):d==="text/plain"?l.body=i.text:d==="application/x-www-form-urlencoded"&&i.formData?l.body=_f(i.formData):l.body=i.formData}return new Request(o,l)}function _f(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Ey(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function yI(n,e,t,i,o){let l={},c=null,d,p=!1,y={},_=t&&er(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let T=E.route.id,R=e[T];if(Ye(!uo(R),"Cannot handle redirect results in processLoaderData"),er(R)){let L=R.error;_!==void 0&&(L=_,_=void 0),c=c||{};{let U=lo(n,T);c[U.route.id]==null&&(c[U.route.id]=L)}l[T]=void 0,p||(p=!0,d=kl(R.error)?R.error.status:500),R.headers&&(y[T]=R.headers)}else vs(R)?(i.set(T,R.deferredData),l[T]=R.deferredData.data,R.statusCode!=null&&R.statusCode!==200&&!p&&(d=R.statusCode),R.headers&&(y[T]=R.headers)):(l[T]=R.data,R.statusCode&&R.statusCode!==200&&!p&&(d=R.statusCode),R.headers&&(y[T]=R.headers))}),_!==void 0&&t&&(c={[t[0]]:_},l[t[0]]=void 0),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:y}}function Ty(n,e,t,i,o,l,c){let{loaderData:d,errors:p}=yI(e,t,i,c);return o.forEach(y=>{let{key:_,match:E,controller:T}=y,R=l[_];if(Ye(R,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(er(R)){let L=lo(n.matches,E?.route.id);p&&p[L.route.id]||(p=Pt({},p,{[L.route.id]:R.error})),n.fetchers.delete(_)}else if(uo(R))Ye(!1,"Unhandled fetcher revalidation redirect");else if(vs(R))Ye(!1,"Unhandled fetcher deferred data");else{let L=fs(R.data);n.fetchers.set(_,L)}}),{loaderData:d,errors:p}}function Iy(n,e,t,i){let o=Pt({},e);for(let l of t){let c=l.route.id;if(e.hasOwnProperty(c)?e[c]!==void 0&&(o[c]=e[c]):n[c]!==void 0&&l.route.loader&&(o[c]=n[c]),i&&i.hasOwnProperty(c))break}return o}function Sy(n){return n?er(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function lo(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Cy(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function jn(n,e){let{pathname:t,routeId:i,method:o,type:l,message:c}=e===void 0?{}:e,d="Unknown Server Error",p="Unknown @remix-run/router error";return n===400?(d="Bad Request",o&&t&&i?p="You made a "+o+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":l==="defer-action"?p="defer() is not supported in actions":l==="invalid-body"&&(p="Unable to encode submission body")):n===403?(d="Forbidden",p='Route "'+i+'" does not match URL "'+t+'"'):n===404?(d="Not Found",p='No route matches URL "'+t+'"'):n===405&&(d="Method Not Allowed",o&&t&&i?p="You made a "+o.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":o&&(p='Invalid request method "'+o.toUpperCase()+'"')),new Rc(n||500,d,new Error(p),!0)}function oc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(uo(o))return{key:i,result:o}}}function C_(n){let e=typeof n=="string"?Ds(n):n;return fo(Pt({},e,{hash:""}))}function vI(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function _I(n){return R_(n.result)&&iI.has(n.result.status)}function vs(n){return n.type===yt.deferred}function er(n){return n.type===yt.error}function uo(n){return(n&&n.type)===yt.redirect}function Ry(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function wI(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function R_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function EI(n){return rI.has(n.toLowerCase())}function br(n){return tI.has(n.toLowerCase())}async function TI(n,e,t,i,o){let l=Object.entries(e);for(let c=0;c<l.length;c++){let[d,p]=l[c],y=n.find(T=>T?.route.id===d);if(!y)continue;let _=i.find(T=>T.route.id===y.route.id),E=_!=null&&!I_(_,y)&&(o&&o[y.route.id])!==void 0;vs(p)&&E&&await Yf(p,t,!1).then(T=>{T&&(e[d]=T)})}}async function II(n,e,t){for(let i=0;i<t.length;i++){let{key:o,routeId:l,controller:c}=t[i],d=e[o];n.find(y=>y?.route.id===l)&&vs(d)&&(Ye(c,"Expected an AbortController for revalidating fetcher deferred result"),await Yf(d,c.signal,!0).then(y=>{y&&(e[o]=y)}))}}async function Yf(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:yt.data,data:n.deferredData.unwrappedData}}catch(o){return{type:yt.error,error:o}}return{type:yt.data,data:n.deferredData.data}}}function Jf(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function gl(n,e){let t=typeof e=="string"?Ds(e).search:e.search;if(n[n.length-1].route.index&&Jf(t||""))return n[n.length-1];let i=w_(n);return i[i.length-1]}function Ay(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:l,json:c}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function sf(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SI(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function pl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function CI(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function fs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function RI(n,e){try{let t=n.sessionStorage.getItem(T_);if(t){let i=JSON.parse(t);for(let[o,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function AI(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(T_,JSON.stringify(t))}catch(i){va(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ac.apply(this,arguments)}const zl=J.createContext(null),Xf=J.createContext(null),Mi=J.createContext(null),Zf=J.createContext(null),ui=J.createContext({outlet:null,matches:[],isDataRoute:!1}),A_=J.createContext(null);function PI(n,e){let{relative:t}=e===void 0?{}:e;Aa()||Ye(!1);let{basename:i,navigator:o}=J.useContext(Mi),{hash:l,pathname:c,search:d}=Xc(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:xi([i,c])),o.createHref({pathname:p,search:d,hash:l})}function Aa(){return J.useContext(Zf)!=null}function Pa(){return Aa()||Ye(!1),J.useContext(Zf).location}function P_(n){J.useContext(Mi).static||J.useLayoutEffect(n)}function Bl(){let{isDataRoute:n}=J.useContext(ui);return n?$I():xI()}function xI(){Aa()||Ye(!1);let n=J.useContext(zl),{basename:e,future:t,navigator:i}=J.useContext(Mi),{matches:o}=J.useContext(ui),{pathname:l}=Pa(),c=JSON.stringify(Yc(o,t.v7_relativeSplatPath)),d=J.useRef(!1);return P_(()=>{d.current=!0}),J.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=Jc(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:xi([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,c,l,n])}const kI=J.createContext(null);function NI(n){let e=J.useContext(ui).outlet;return e&&J.createElement(kI.Provider,{value:n},e)}function bI(){let{matches:n}=J.useContext(ui),e=n[n.length-1];return e?e.params:{}}function Xc(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=J.useContext(Mi),{matches:o}=J.useContext(ui),{pathname:l}=Pa(),c=JSON.stringify(Yc(o,i.v7_relativeSplatPath));return J.useMemo(()=>Jc(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function DI(n,e,t,i){Aa()||Ye(!1);let{navigator:o}=J.useContext(Mi),{matches:l}=J.useContext(ui),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=Pa(),_;_=y;let E=_.pathname||"/",T=E;if(p!=="/"){let U=p.replace(/^\//,"").split("/");T="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let R=ao(n,{pathname:T});return FI(R&&R.map(U=>Object.assign({},U,{params:Object.assign({},d,U.params),pathname:xi([p,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:xi([p,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,i)}function OI(){let n=BI(),e=kl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:o},t):null,null)}const LI=J.createElement(OI,null);class VI extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(ui.Provider,{value:this.props.routeContext},J.createElement(A_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MI(n){let{routeContext:e,match:t,children:i}=n,o=J.useContext(zl);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(ui.Provider,{value:e},i)}function FI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=c.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||Ye(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:T,errors:R}=t,L=E.route.loader&&T[E.route.id]===void 0&&(!R||R[E.route.id]===void 0);if(E.route.lazy||L){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,E,T)=>{let R,L=!1,U=null,H=null;t&&(R=d&&E.route.id?d[E.route.id]:void 0,U=E.route.errorElement||LI,p&&(y<0&&T===0?(HI("route-fallback"),L=!0,H=null):y===T&&(L=!0,H=E.route.hydrateFallbackElement||null)));let fe=e.concat(c.slice(0,T+1)),Z=()=>{let ce;return R?ce=U:L?ce=H:E.route.Component?ce=J.createElement(E.route.Component,null):E.route.element?ce=E.route.element:ce=_,J.createElement(MI,{match:E,routeContext:{outlet:_,matches:fe,isDataRoute:t!=null},children:ce})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?J.createElement(VI,{location:t.location,revalidation:t.revalidation,component:U,error:R,children:Z(),routeContext:{outlet:null,matches:fe,isDataRoute:!0}}):Z()},null)}var x_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(x_||{}),k_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(k_||{});function UI(n){let e=J.useContext(zl);return e||Ye(!1),e}function jI(n){let e=J.useContext(Xf);return e||Ye(!1),e}function zI(n){let e=J.useContext(ui);return e||Ye(!1),e}function N_(n){let e=zI(),t=e.matches[e.matches.length-1];return t.route.id||Ye(!1),t.route.id}function BI(){var n;let e=J.useContext(A_),t=jI(k_.UseRouteError),i=N_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function $I(){let{router:n}=UI(x_.UseNavigateStable),e=N_(),t=J.useRef(!1);return P_(()=>{t.current=!0}),J.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Ac({fromRouteId:e},l)))},[n,e])}const Py={};function HI(n,e,t){Py[n]||(Py[n]=!0)}function WI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function qI(n){let{to:e,replace:t,state:i,relative:o}=n;Aa()||Ye(!1);let{future:l,static:c}=J.useContext(Mi),{matches:d}=J.useContext(ui),{pathname:p}=Pa(),y=Bl(),_=Jc(e,Yc(d,l.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return J.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function GI(n){return NI(n.context)}function KI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ht.Pop,navigator:l,static:c=!1,future:d}=n;Aa()&&Ye(!1);let p=e.replace(/^\/*/,"/"),y=J.useMemo(()=>({basename:p,navigator:l,static:c,future:Ac({v7_relativeSplatPath:!1},d)}),[p,d,l,c]);typeof i=="string"&&(i=Ds(i));let{pathname:_="/",search:E="",hash:T="",state:R=null,key:L="default"}=i,U=J.useMemo(()=>{let H=Ni(_,p);return H==null?null:{location:{pathname:H,search:E,hash:T,state:R,key:L},navigationType:o}},[p,_,E,T,R,L,o]);return U==null?null:J.createElement(Mi.Provider,{value:y},J.createElement(Zf.Provider,{children:t,value:U}))}new Promise(()=>{});function QI(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:J.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:J.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:J.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_a.apply(this,arguments)}function b_(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function YI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function JI(n,e){return n.button===0&&(!e||e==="_self")&&!YI(n)}const XI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ZI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],eS="6";try{window.__reactRouterVersion=eS}catch{}function tS(n,e){return lI({basename:void 0,future:_a({},void 0,{v7_prependBasename:!0}),history:bT({window:void 0}),hydrationData:nS(),routes:n,mapRouteProperties:QI,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function nS(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=_a({},e,{errors:rS(e.errors)})),e}function rS(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new Rc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let c=new l(o.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(o.message);l.stack="",t[i]=l}}else t[i]=o;return t}const D_=J.createContext({isTransitioning:!1}),iS=J.createContext(new Map),sS="startTransition",xy=IT[sS],oS="flushSync",ky=NT[oS];function aS(n){xy?xy(n):n()}function ml(n){ky?ky(n):n()}let lS=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function uS(n){let{fallbackElement:e,router:t,future:i}=n,[o,l]=J.useState(t.state),[c,d]=J.useState(),[p,y]=J.useState({isTransitioning:!1}),[_,E]=J.useState(),[T,R]=J.useState(),[L,U]=J.useState(),H=J.useRef(new Map),{v7_startTransition:fe}=i||{},Z=J.useCallback(C=>{fe?aS(C):C()},[fe]),ce=J.useCallback((C,P)=>{let{deletedFetchers:N,flushSync:O,viewTransitionOpts:M}=P;C.fetchers.forEach((Ke,lt)=>{Ke.data!==void 0&&H.current.set(lt,Ke.data)}),N.forEach(Ke=>H.current.delete(Ke));let k=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!M||k){O?ml(()=>l(C)):Z(()=>l(C));return}if(O){ml(()=>{T&&(_&&_.resolve(),T.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let Ke=t.window.document.startViewTransition(()=>{ml(()=>l(C))});Ke.finished.finally(()=>{ml(()=>{E(void 0),R(void 0),d(void 0),y({isTransitioning:!1})})}),ml(()=>R(Ke));return}T?(_&&_.resolve(),T.skipTransition(),U({state:C,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(d(C),y({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[t.window,T,_,H,Z]);J.useLayoutEffect(()=>t.subscribe(ce),[t,ce]),J.useEffect(()=>{p.isTransitioning&&!p.flushSync&&E(new lS)},[p]),J.useEffect(()=>{if(_&&c&&t.window){let C=c,P=_.promise,N=t.window.document.startViewTransition(async()=>{Z(()=>l(C)),await P});N.finished.finally(()=>{E(void 0),R(void 0),d(void 0),y({isTransitioning:!1})}),R(N)}},[Z,c,_,t.window]),J.useEffect(()=>{_&&c&&o.location.key===c.location.key&&_.resolve()},[_,T,o.location,c]),J.useEffect(()=>{!p.isTransitioning&&L&&(d(L.state),y({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),U(void 0))},[p.isTransitioning,L]),J.useEffect(()=>{},[]);let pe=J.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:C=>t.navigate(C),push:(C,P,N)=>t.navigate(C,{state:P,preventScrollReset:N?.preventScrollReset}),replace:(C,P,N)=>t.navigate(C,{replace:!0,state:P,preventScrollReset:N?.preventScrollReset})}),[t]),Ue=t.basename||"/",Fe=J.useMemo(()=>({router:t,navigator:pe,static:!1,basename:Ue}),[t,pe,Ue]),S=J.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return J.useEffect(()=>WI(i,t.future),[i,t.future]),J.createElement(J.Fragment,null,J.createElement(zl.Provider,{value:Fe},J.createElement(Xf.Provider,{value:o},J.createElement(iS.Provider,{value:H.current},J.createElement(D_.Provider,{value:p},J.createElement(KI,{basename:Ue,location:o.location,navigationType:o.historyAction,navigator:pe,future:S},o.initialized||t.future.v7_partialHydration?J.createElement(cS,{routes:t.routes,future:t.future,state:o}):e))))),null)}const cS=J.memo(hS);function hS(n){let{routes:e,future:t,state:i}=n;return DI(e,void 0,i,t)}const dS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O_=J.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:d,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,T=b_(e,XI),{basename:R}=J.useContext(Mi),L,U=!1;if(typeof y=="string"&&fS.test(y)&&(L=y,dS))try{let ce=new URL(window.location.href),pe=y.startsWith("//")?new URL(ce.protocol+y):new URL(y),Ue=Ni(pe.pathname,R);pe.origin===ce.origin&&Ue!=null?y=Ue+pe.search+pe.hash:U=!0}catch{}let H=PI(y,{relative:o}),fe=gS(y,{replace:c,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function Z(ce){i&&i(ce),ce.defaultPrevented||fe(ce)}return J.createElement("a",_a({},T,{href:L||H,onClick:U||l?i:Z,ref:t,target:p}))}),pS=J.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:c=!1,style:d,to:p,viewTransition:y,children:_}=e,E=b_(e,ZI),T=Xc(p,{relative:E.relative}),R=Pa(),L=J.useContext(Xf),{navigator:U,basename:H}=J.useContext(Mi),fe=L!=null&&yS(T)&&y===!0,Z=U.encodeLocation?U.encodeLocation(T).pathname:T.pathname,ce=R.pathname,pe=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;o||(ce=ce.toLowerCase(),pe=pe?pe.toLowerCase():null,Z=Z.toLowerCase()),pe&&H&&(pe=Ni(pe,H)||pe);const Ue=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let Fe=ce===Z||!c&&ce.startsWith(Z)&&ce.charAt(Ue)==="/",S=pe!=null&&(pe===Z||!c&&pe.startsWith(Z)&&pe.charAt(Z.length)==="/"),C={isActive:Fe,isPending:S,isTransitioning:fe},P=Fe?i:void 0,N;typeof l=="function"?N=l(C):N=[l,Fe?"active":null,S?"pending":null,fe?"transitioning":null].filter(Boolean).join(" ");let O=typeof d=="function"?d(C):d;return J.createElement(O_,_a({},E,{"aria-current":P,className:N,ref:t,style:O,to:p,viewTransition:y}),typeof _=="function"?_(C):_)});var wf;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(wf||(wf={}));var Ny;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ny||(Ny={}));function mS(n){let e=J.useContext(zl);return e||Ye(!1),e}function gS(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,p=Bl(),y=Pa(),_=Xc(n,{relative:c});return J.useCallback(E=>{if(JI(E,t)){E.preventDefault();let T=i!==void 0?i:fo(y)===fo(_);p(n,{replace:T,state:o,preventScrollReset:l,relative:c,viewTransition:d})}},[y,p,_,i,o,t,n,l,c,d])}function yS(n,e){e===void 0&&(e={});let t=J.useContext(D_);t==null&&Ye(!1);let{basename:i}=mS(wf.useViewTransitionState),o=Xc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ni(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ni(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Cc(o.pathname,c)!=null||Cc(o.pathname,l)!=null}function vS(){const n=[{label:" Dashboard",path:"/app"},{label:" Theme Drafts",path:"/app/drafts/themes"},{label:" Story Drafts",path:"/app/drafts/stories"},{label:" Prompt Lab",path:"/app/promptlab"}];return A.jsxs("div",{className:"min-h-screen flex bg-gray-100 text-gray-800",children:[A.jsxs("aside",{className:"w-64 bg-white shadow-md flex flex-col",children:[A.jsxs("div",{className:"p-5 border-b",children:[A.jsx("h1",{className:"text-2xl font-bold text-blue-700",children:"WaitWhat? CMS"}),A.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editorial Console"})]}),A.jsx("nav",{className:"flex-1 p-4 space-y-1",children:n.map(e=>A.jsx(pS,{to:e.path,className:({isActive:t})=>`block px-4 py-2 rounded-md transition ${t?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:e.label},e.path))}),A.jsx("div",{className:"p-4 border-t text-center text-xs text-gray-500",children:A.jsxs("p",{children:[" ",new Date().getFullYear()," WaitWhat?"]})})]}),A.jsxs("main",{className:"flex-1 overflow-y-auto",children:[A.jsxs("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[A.jsx("h2",{className:"text-lg font-semibold",children:"Content Manager"}),A.jsx("a",{href:"https://waitwhat.news",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View Live Site "})]}),A.jsx("div",{className:"p-6",children:A.jsx(GI,{})})]})]})}const _S=()=>{};var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},wS=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},V_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let T=(d&15)<<2|y>>6,R=y&63;p||(R=64,c||(T=64)),i.push(t[_],t[E],t[T],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(L_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||y==null||E==null)throw new ES;const T=l<<2|d>>4;if(i.push(T),y!==64){const R=d<<4&240|y>>2;if(i.push(R),E!==64){const L=y<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ES extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TS=function(n){const e=L_(n);return V_.encodeByteArray(e,!0)},Pc=function(n){return TS(n).replace(/\./g,"")},M_=function(n){try{return V_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=()=>IS().__FIREBASE_DEFAULTS__,CS=()=>{if(typeof process>"u"||typeof by>"u")return;const n=by.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&M_(n[1]);return e&&JSON.parse(e)},Zc=()=>{try{return _S()||SS()||CS()||RS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},F_=n=>{var e,t;return(t=(e=Zc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},U_=n=>{const e=F_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},j_=()=>{var n;return(n=Zc())===null||n===void 0?void 0:n.config},z_=n=>{var e;return(e=Zc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ep(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Pc(JSON.stringify(t)),Pc(JSON.stringify(c)),""].join(".")}const Il={};function xS(){const n={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?n.emulator.push(e):n.prod.push(e);return n}function kS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Dy=!1;function tp(n,e){if(typeof window>"u"||typeof document>"u"||!_o(window.location.host)||Il[n]===e||Il[n]||Dy)return;Il[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=xS().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Dy=!0,c()},T}function _(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=kS(i),R=t("text"),L=document.getElementById(R)||document.createElement("span"),U=t("learnmore"),H=document.getElementById(U)||document.createElement("a"),fe=t("preprendIcon"),Z=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ce=T.element;d(ce),_(H,U);const pe=y();p(Z,fe),ce.append(Z,L,H,pe),document.body.appendChild(ce)}l?(L.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function bS(){var n;const e=(n=Zc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VS(){const n=In();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FS(){try{return typeof indexedDB=="object"}catch{return!1}}function US(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="FirebaseError";class ci extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=jS,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?zS(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ci(o,d,i)}}function zS(n,e){return n.replace(BS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const BS=/\{\$([^}]+)}/g;function $S(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function po(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(Oy(l)&&Oy(c)){if(!po(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Oy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function vl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HS(n,e){const t=new WS(n,e);return t.subscribe.bind(t)}class WS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");qS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=of),o.error===void 0&&(o.error=of),o.complete===void 0&&(o.complete=of);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n){return n&&n._delegate?n._delegate:n}class Cs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new AS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QS(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KS(n){return n===oo?void 0:n}function QS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const JS={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},XS=rt.INFO,ZS={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},eC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=ZS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class np{constructor(e){this.name=e,this._logLevel=XS,this._logHandler=eC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const tC=(n,e)=>e.some(t=>n instanceof t);let Ly,Vy;function nC(){return Ly||(Ly=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rC(){return Vy||(Vy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,Ef=new WeakMap,$_=new WeakMap,af=new WeakMap,rp=new WeakMap;function iC(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ws(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&B_.set(t,n)}).catch(()=>{}),rp.set(e,n),e}function sC(n){if(Ef.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ef.set(n,e)}let Tf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ef.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function oC(n){Tf=n(Tf)}function aC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(lf(this),e,...t);return $_.set(i,e.sort?e.sort():[e]),ws(i)}:rC().includes(n)?function(...e){return n.apply(lf(this),e),ws(B_.get(this))}:function(...e){return ws(n.apply(lf(this),e))}}function lC(n){return typeof n=="function"?aC(n):(n instanceof IDBTransaction&&sC(n),tC(n,nC())?new Proxy(n,Tf):n)}function ws(n){if(n instanceof IDBRequest)return iC(n);if(af.has(n))return af.get(n);const e=lC(n);return e!==n&&(af.set(n,e),rp.set(e,n)),e}const lf=n=>rp.get(n);function uC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=ws(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ws(c.result),p.oldVersion,p.newVersion,ws(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const cC=["get","getKey","getAll","getAllKeys","count"],hC=["put","add","delete","clear"],uf=new Map;function My(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=hC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||cC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return uf.set(e,l),l}oC(n=>({...n,get:(e,t,i)=>My(e,t)||n.get(e,t,i),has:(e,t)=>!!My(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function fC(n){const e=n.getComponent();return e?.type==="VERSION"}const If="@firebase/app",Fy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new np("@firebase/app"),pC="@firebase/app-compat",mC="@firebase/analytics-compat",gC="@firebase/analytics",yC="@firebase/app-check-compat",vC="@firebase/app-check",_C="@firebase/auth",wC="@firebase/auth-compat",EC="@firebase/database",TC="@firebase/data-connect",IC="@firebase/database-compat",SC="@firebase/functions",CC="@firebase/functions-compat",RC="@firebase/installations",AC="@firebase/installations-compat",PC="@firebase/messaging",xC="@firebase/messaging-compat",kC="@firebase/performance",NC="@firebase/performance-compat",bC="@firebase/remote-config",DC="@firebase/remote-config-compat",OC="@firebase/storage",LC="@firebase/storage-compat",VC="@firebase/firestore",MC="@firebase/ai",FC="@firebase/firestore-compat",UC="firebase",jC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]",zC={[If]:"fire-core",[pC]:"fire-core-compat",[gC]:"fire-analytics",[mC]:"fire-analytics-compat",[vC]:"fire-app-check",[yC]:"fire-app-check-compat",[_C]:"fire-auth",[wC]:"fire-auth-compat",[EC]:"fire-rtdb",[TC]:"fire-data-connect",[IC]:"fire-rtdb-compat",[SC]:"fire-fn",[CC]:"fire-fn-compat",[RC]:"fire-iid",[AC]:"fire-iid-compat",[PC]:"fire-fcm",[xC]:"fire-fcm-compat",[kC]:"fire-perf",[NC]:"fire-perf-compat",[bC]:"fire-rc",[DC]:"fire-rc-compat",[OC]:"fire-gcs",[LC]:"fire-gcs-compat",[VC]:"fire-fst",[FC]:"fire-fst-compat",[MC]:"fire-vertex","fire-js":"fire-js",[UC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,BC=new Map,Cf=new Map;function Uy(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mo(n){const e=n.name;if(Cf.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,n);for(const t of xc.values())Uy(t,n);for(const t of BC.values())Uy(t,n);return!0}function eh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new $l("app","Firebase",$C);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=jC;function H_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Sf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(t||(t=j_()),!t)throw Es.create("no-options");const l=xc.get(o);if(l){if(po(t,l.options)&&po(i,l.config))return l;throw Es.create("duplicate-app",{appName:o})}const c=new YS(o);for(const p of Cf.values())c.addComponent(p);const d=new HC(t,i,c);return xc.set(o,d),d}function ip(n=Sf){const e=xc.get(n);if(!e&&n===Sf&&j_())return H_();if(!e)throw Es.create("no-app",{appName:n});return e}function Zr(n,e,t){var i;let o=(i=zC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(d.join(" "));return}mo(new Cs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="firebase-heartbeat-database",qC=1,Nl="firebase-heartbeat-store";let cf=null;function W_(){return cf||(cf=uC(WC,qC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Es.create("idb-open",{originalErrorMessage:n.message})})),cf}async function GC(n){try{const t=(await W_()).transaction(Nl),i=await t.objectStore(Nl).get(q_(n));return await t.done,i}catch(e){if(e instanceof ci)bi.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e?.message});bi.warn(t.message)}}}async function jy(n,e){try{const i=(await W_()).transaction(Nl,"readwrite");await i.objectStore(Nl).put(e,q_(n)),await i.done}catch(t){if(t instanceof ci)bi.warn(t.message);else{const i=Es.create("idb-set",{originalErrorMessage:t?.message});bi.warn(i.message)}}}function q_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=1024,QC=30;class YC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=zy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>QC){const c=ZC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zy(),{heartbeatsToSend:i,unsentEntries:o}=JC(this._heartbeatsCache.heartbeats),l=Pc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bi.warn(t),""}}}function zy(){return new Date().toISOString().substring(0,10)}function JC(n,e=KC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),By(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),By(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class XC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FS()?US().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return jy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return jy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function By(n){return Pc(JSON.stringify({version:2,heartbeats:n})).length}function ZC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n){mo(new Cs("platform-logger",e=>new dC(e),"PRIVATE")),mo(new Cs("heartbeat",e=>new YC(e),"PRIVATE")),Zr(If,Fy,n),Zr(If,Fy,"esm2017"),Zr("fire-js","")}e1("");var t1="firebase",n1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr(t1,n1,"app");var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,G_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function P(){}P.prototype=C.prototype,S.D=C.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(N,O,M){for(var k=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)k[Ke-2]=arguments[Ke];return C.prototype[O].apply(N,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,C,P){P||(P=0);var N=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)N[O]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(O=0;16>O;++O)N[O]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=S.g[0],P=S.g[1],O=S.g[2];var M=S.g[3],k=C+(M^P&(O^M))+N[0]+3614090360&4294967295;C=P+(k<<7&4294967295|k>>>25),k=M+(O^C&(P^O))+N[1]+3905402710&4294967295,M=C+(k<<12&4294967295|k>>>20),k=O+(P^M&(C^P))+N[2]+606105819&4294967295,O=M+(k<<17&4294967295|k>>>15),k=P+(C^O&(M^C))+N[3]+3250441966&4294967295,P=O+(k<<22&4294967295|k>>>10),k=C+(M^P&(O^M))+N[4]+4118548399&4294967295,C=P+(k<<7&4294967295|k>>>25),k=M+(O^C&(P^O))+N[5]+1200080426&4294967295,M=C+(k<<12&4294967295|k>>>20),k=O+(P^M&(C^P))+N[6]+2821735955&4294967295,O=M+(k<<17&4294967295|k>>>15),k=P+(C^O&(M^C))+N[7]+4249261313&4294967295,P=O+(k<<22&4294967295|k>>>10),k=C+(M^P&(O^M))+N[8]+1770035416&4294967295,C=P+(k<<7&4294967295|k>>>25),k=M+(O^C&(P^O))+N[9]+2336552879&4294967295,M=C+(k<<12&4294967295|k>>>20),k=O+(P^M&(C^P))+N[10]+4294925233&4294967295,O=M+(k<<17&4294967295|k>>>15),k=P+(C^O&(M^C))+N[11]+2304563134&4294967295,P=O+(k<<22&4294967295|k>>>10),k=C+(M^P&(O^M))+N[12]+1804603682&4294967295,C=P+(k<<7&4294967295|k>>>25),k=M+(O^C&(P^O))+N[13]+4254626195&4294967295,M=C+(k<<12&4294967295|k>>>20),k=O+(P^M&(C^P))+N[14]+2792965006&4294967295,O=M+(k<<17&4294967295|k>>>15),k=P+(C^O&(M^C))+N[15]+1236535329&4294967295,P=O+(k<<22&4294967295|k>>>10),k=C+(O^M&(P^O))+N[1]+4129170786&4294967295,C=P+(k<<5&4294967295|k>>>27),k=M+(P^O&(C^P))+N[6]+3225465664&4294967295,M=C+(k<<9&4294967295|k>>>23),k=O+(C^P&(M^C))+N[11]+643717713&4294967295,O=M+(k<<14&4294967295|k>>>18),k=P+(M^C&(O^M))+N[0]+3921069994&4294967295,P=O+(k<<20&4294967295|k>>>12),k=C+(O^M&(P^O))+N[5]+3593408605&4294967295,C=P+(k<<5&4294967295|k>>>27),k=M+(P^O&(C^P))+N[10]+38016083&4294967295,M=C+(k<<9&4294967295|k>>>23),k=O+(C^P&(M^C))+N[15]+3634488961&4294967295,O=M+(k<<14&4294967295|k>>>18),k=P+(M^C&(O^M))+N[4]+3889429448&4294967295,P=O+(k<<20&4294967295|k>>>12),k=C+(O^M&(P^O))+N[9]+568446438&4294967295,C=P+(k<<5&4294967295|k>>>27),k=M+(P^O&(C^P))+N[14]+3275163606&4294967295,M=C+(k<<9&4294967295|k>>>23),k=O+(C^P&(M^C))+N[3]+4107603335&4294967295,O=M+(k<<14&4294967295|k>>>18),k=P+(M^C&(O^M))+N[8]+1163531501&4294967295,P=O+(k<<20&4294967295|k>>>12),k=C+(O^M&(P^O))+N[13]+2850285829&4294967295,C=P+(k<<5&4294967295|k>>>27),k=M+(P^O&(C^P))+N[2]+4243563512&4294967295,M=C+(k<<9&4294967295|k>>>23),k=O+(C^P&(M^C))+N[7]+1735328473&4294967295,O=M+(k<<14&4294967295|k>>>18),k=P+(M^C&(O^M))+N[12]+2368359562&4294967295,P=O+(k<<20&4294967295|k>>>12),k=C+(P^O^M)+N[5]+4294588738&4294967295,C=P+(k<<4&4294967295|k>>>28),k=M+(C^P^O)+N[8]+2272392833&4294967295,M=C+(k<<11&4294967295|k>>>21),k=O+(M^C^P)+N[11]+1839030562&4294967295,O=M+(k<<16&4294967295|k>>>16),k=P+(O^M^C)+N[14]+4259657740&4294967295,P=O+(k<<23&4294967295|k>>>9),k=C+(P^O^M)+N[1]+2763975236&4294967295,C=P+(k<<4&4294967295|k>>>28),k=M+(C^P^O)+N[4]+1272893353&4294967295,M=C+(k<<11&4294967295|k>>>21),k=O+(M^C^P)+N[7]+4139469664&4294967295,O=M+(k<<16&4294967295|k>>>16),k=P+(O^M^C)+N[10]+3200236656&4294967295,P=O+(k<<23&4294967295|k>>>9),k=C+(P^O^M)+N[13]+681279174&4294967295,C=P+(k<<4&4294967295|k>>>28),k=M+(C^P^O)+N[0]+3936430074&4294967295,M=C+(k<<11&4294967295|k>>>21),k=O+(M^C^P)+N[3]+3572445317&4294967295,O=M+(k<<16&4294967295|k>>>16),k=P+(O^M^C)+N[6]+76029189&4294967295,P=O+(k<<23&4294967295|k>>>9),k=C+(P^O^M)+N[9]+3654602809&4294967295,C=P+(k<<4&4294967295|k>>>28),k=M+(C^P^O)+N[12]+3873151461&4294967295,M=C+(k<<11&4294967295|k>>>21),k=O+(M^C^P)+N[15]+530742520&4294967295,O=M+(k<<16&4294967295|k>>>16),k=P+(O^M^C)+N[2]+3299628645&4294967295,P=O+(k<<23&4294967295|k>>>9),k=C+(O^(P|~M))+N[0]+4096336452&4294967295,C=P+(k<<6&4294967295|k>>>26),k=M+(P^(C|~O))+N[7]+1126891415&4294967295,M=C+(k<<10&4294967295|k>>>22),k=O+(C^(M|~P))+N[14]+2878612391&4294967295,O=M+(k<<15&4294967295|k>>>17),k=P+(M^(O|~C))+N[5]+4237533241&4294967295,P=O+(k<<21&4294967295|k>>>11),k=C+(O^(P|~M))+N[12]+1700485571&4294967295,C=P+(k<<6&4294967295|k>>>26),k=M+(P^(C|~O))+N[3]+2399980690&4294967295,M=C+(k<<10&4294967295|k>>>22),k=O+(C^(M|~P))+N[10]+4293915773&4294967295,O=M+(k<<15&4294967295|k>>>17),k=P+(M^(O|~C))+N[1]+2240044497&4294967295,P=O+(k<<21&4294967295|k>>>11),k=C+(O^(P|~M))+N[8]+1873313359&4294967295,C=P+(k<<6&4294967295|k>>>26),k=M+(P^(C|~O))+N[15]+4264355552&4294967295,M=C+(k<<10&4294967295|k>>>22),k=O+(C^(M|~P))+N[6]+2734768916&4294967295,O=M+(k<<15&4294967295|k>>>17),k=P+(M^(O|~C))+N[13]+1309151649&4294967295,P=O+(k<<21&4294967295|k>>>11),k=C+(O^(P|~M))+N[4]+4149444226&4294967295,C=P+(k<<6&4294967295|k>>>26),k=M+(P^(C|~O))+N[11]+3174756917&4294967295,M=C+(k<<10&4294967295|k>>>22),k=O+(C^(M|~P))+N[2]+718787259&4294967295,O=M+(k<<15&4294967295|k>>>17),k=P+(M^(O|~C))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+M&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var P=C-this.blockSize,N=this.B,O=this.h,M=0;M<C;){if(O==0)for(;M<=P;)o(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<C;)if(N[O++]=S.charCodeAt(M++),O==this.blockSize){o(this,N),O=0;break}}else for(;M<C;)if(N[O++]=S[M++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var P=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=P&255,P/=256;for(this.u(S),S=Array(16),C=P=0;4>C;++C)for(var N=0;32>N;N+=8)S[P++]=this.g[C]>>>N&255;return S};function l(S,C){var P=d;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=C(S)}function c(S,C){this.h=C;for(var P=[],N=!0,O=S.length-1;0<=O;O--){var M=S[O]|0;N&&M==C||(P[O]=M,N=!1)}this.g=P}var d={};function p(S){return-128<=S&&128>S?l(S,function(C){return new c([C|0],0>C?-1:0)}):new c([S|0],0>S?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return E;if(0>S)return H(y(-S));for(var C=[],P=1,N=0;S>=P;N++)C[N]=S/P|0,P*=4294967296;return new c(C,0)}function _(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return H(_(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(C,8)),N=E,O=0;O<S.length;O+=8){var M=Math.min(8,S.length-O),k=parseInt(S.substring(O,O+M),C);8>M?(M=y(Math.pow(C,M)),N=N.j(M).add(y(k))):(N=N.j(P),N=N.add(y(k)))}return N}var E=p(0),T=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(U(this))return-H(this).m();for(var S=0,C=1,P=0;P<this.g.length;P++){var N=this.i(P);S+=(0<=N?N:4294967296+N)*C,C*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(U(this))return"-"+H(this).toString(S);for(var C=y(Math.pow(S,6)),P=this,N="";;){var O=pe(P,C).g;P=fe(P,O.j(C));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=O,L(P))return M+N;for(;6>M.length;)M="0"+M;N=M+N}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function U(S){return S.h==-1}n.l=function(S){return S=fe(this,S),U(S)?-1:L(S)?0:1};function H(S){for(var C=S.g.length,P=[],N=0;N<C;N++)P[N]=~S.g[N];return new c(P,~S.h).add(T)}n.abs=function(){return U(this)?H(this):this},n.add=function(S){for(var C=Math.max(this.g.length,S.g.length),P=[],N=0,O=0;O<=C;O++){var M=N+(this.i(O)&65535)+(S.i(O)&65535),k=(M>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);N=k>>>16,M&=65535,k&=65535,P[O]=k<<16|M}return new c(P,P[P.length-1]&-2147483648?-1:0)};function fe(S,C){return S.add(H(C))}n.j=function(S){if(L(this)||L(S))return E;if(U(this))return U(S)?H(this).j(H(S)):H(H(this).j(S));if(U(S))return H(this.j(H(S)));if(0>this.l(R)&&0>S.l(R))return y(this.m()*S.m());for(var C=this.g.length+S.g.length,P=[],N=0;N<2*C;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<S.g.length;O++){var M=this.i(N)>>>16,k=this.i(N)&65535,Ke=S.i(O)>>>16,lt=S.i(O)&65535;P[2*N+2*O]+=k*lt,Z(P,2*N+2*O),P[2*N+2*O+1]+=M*lt,Z(P,2*N+2*O+1),P[2*N+2*O+1]+=k*Ke,Z(P,2*N+2*O+1),P[2*N+2*O+2]+=M*Ke,Z(P,2*N+2*O+2)}for(N=0;N<C;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=C;N<2*C;N++)P[N]=0;return new c(P,0)};function Z(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function ce(S,C){this.g=S,this.h=C}function pe(S,C){if(L(C))throw Error("division by zero");if(L(S))return new ce(E,E);if(U(S))return C=pe(H(S),C),new ce(H(C.g),H(C.h));if(U(C))return C=pe(S,H(C)),new ce(H(C.g),C.h);if(30<S.g.length){if(U(S)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var P=T,N=C;0>=N.l(S);)P=Ue(P),N=Ue(N);var O=Fe(P,1),M=Fe(N,1);for(N=Fe(N,2),P=Fe(P,2);!L(N);){var k=M.add(N);0>=k.l(S)&&(O=O.add(P),M=k),N=Fe(N,1),P=Fe(P,1)}return C=fe(S,O.j(C)),new ce(O,C)}for(O=E;0<=S.l(C);){for(P=Math.max(1,Math.floor(S.m()/C.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),M=y(P),k=M.j(C);U(k)||0<k.l(S);)P-=N,M=y(P),k=M.j(C);L(M)&&(M=T),O=O.add(M),S=fe(S,k)}return new ce(O,S)}n.A=function(S){return pe(this,S).h},n.and=function(S){for(var C=Math.max(this.g.length,S.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)&S.i(N);return new c(P,this.h&S.h)},n.or=function(S){for(var C=Math.max(this.g.length,S.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)|S.i(N);return new c(P,this.h|S.h)},n.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)^S.i(N);return new c(P,this.h^S.h)};function Ue(S){for(var C=S.g.length+1,P=[],N=0;N<C;N++)P[N]=S.i(N)<<1|S.i(N-1)>>>31;return new c(P,S.h)}function Fe(S,C){var P=C>>5;C%=32;for(var N=S.g.length-P,O=[],M=0;M<N;M++)O[M]=0<C?S.i(M+P)>>>C|S.i(M+P+1)<<32-C:S.i(M+P);return new c(O,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,G_=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Ts=c}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var K_,_l,Q_,pc,Rf,Y_,J_,X_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in v))break e;v=v[B]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,B={next:function(){if(!I&&v<u.length){var Y=v++;return{value:m(Y,u[Y]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function E(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,T.apply(null,arguments)}function R(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function L(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,B,Y){for(var he=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)he[gt-2]=arguments[gt];return m.prototype[B].apply(I,he)}}function U(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function H(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const B=u.length||0,Y=I.length||0;u.length=B+Y;for(let he=0;he<Y;he++)u[B+he]=I[he]}else u.push(I)}}class fe{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(u){return/^[\s\xa0]*$/.test(u)}function ce(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function pe(u){return pe[" "](u),u}pe[" "]=function(){};var Ue=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Fe(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function S(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function C(u){const m={};for(const v in u)m[v]=u[v];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(v in I)u[v]=I[v];for(let Y=0;Y<P.length;Y++)v=P[Y],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function O(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function M(u){d.setTimeout(()=>{throw u},0)}function k(){var u=ke;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ke{constructor(){this.h=this.g=null}add(m,v){const I=lt.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var lt=new fe(()=>new vt,u=>u.reset());class vt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,oe=!1,ke=new Ke,ge=()=>{const u=d.Promise.resolve(void 0);Qe=()=>{u.then(j)}};var j=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){M(v)}var m=lt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}oe=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var $e=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function Oe(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ue){e:{try{pe(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:z[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}L(Oe,me);var z={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),q=0;function re(u,m,v,I,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=B,this.key=++q,this.da=this.fa=!1}function ue(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _e(u){this.src=u,this.g={},this.h=0}_e.prototype.add=function(u,m,v,I,B){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var he=be(u,m,I,B);return-1<he?(m=u[he],v||(m.fa=!1)):(m=new re(m,this.src,Y,!!I,B),m.fa=v,u.push(m)),m};function ye(u,m){var v=m.type;if(v in u.g){var I=u.g[v],B=Array.prototype.indexOf.call(I,m,void 0),Y;(Y=0<=B)&&Array.prototype.splice.call(I,B,1),Y&&(ue(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function be(u,m,v,I){for(var B=0;B<u.length;++B){var Y=u[B];if(!Y.da&&Y.listener==m&&Y.capture==!!v&&Y.ha==I)return B}return-1}var dt="closure_lm_"+(1e6*Math.random()|0),Et={};function Mt(u,m,v,I,B){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)Mt(u,m[Y],v,I,B);return null}return v=vr(v),u&&u[Q]?u.K(m,v,y(I)?!!I.capture:!1,B):Vr(u,m,v,!1,I,B)}function Vr(u,m,v,I,B,Y){if(!m)throw Error("Invalid event type");var he=y(B)?!!B.capture:!!B,gt=Fi(u);if(gt||(u[dt]=gt=new _e(u)),v=gt.add(m,v,I,he,Y),v.proxy)return v;if(I=So(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)$e||(B=he),B===void 0&&(B=!1),u.addEventListener(m.toString(),I,B);else if(u.attachEvent)u.attachEvent(yr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function So(){function u(v){return m.call(u.src,u.listener,v)}const m=Ms;return u}function hi(u,m,v,I,B){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)hi(u,m[Y],v,I,B);else I=y(I)?!!I.capture:!!I,v=vr(v),u&&u[Q]?(u=u.i,m=String(m).toString(),m in u.g&&(Y=u.g[m],v=be(Y,v,I,B),-1<v&&(ue(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete u.g[m],u.h--)))):u&&(u=Fi(u))&&(m=u.g[m.toString()],u=-1,m&&(u=be(m,v,I,B)),(v=-1<u?m[u]:null)&&gr(v))}function gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Q])ye(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(yr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Fi(m))?(ye(v,u),v.h==0&&(v.src=null,m[dt]=null)):ue(u)}}}function yr(u){return u in Et?Et[u]:Et[u]="on"+u}function Ms(u,m){if(u.da)u=!0;else{m=new Oe(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&gr(u),u=v.call(I,m)}return u}function Fi(u){return u=u[dt],u instanceof _e?u:null}var Pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function vr(u){return typeof u=="function"?u:(u[Pn]||(u[Pn]=function(m){return u.handleEvent(m)}),u[Pn])}function Ot(){X.call(this),this.i=new _e(this),this.M=this,this.F=null}L(Ot,X),Ot.prototype[Q]=!0,Ot.prototype.removeEventListener=function(u,m,v,I){hi(this,u,m,v,I)};function xt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var B=m;m=new me(I,u),N(m,B)}if(B=!0,v)for(var Y=v.length-1;0<=Y;Y--){var he=m.g=v[Y];B=Xt(he,I,!0,m)&&B}if(he=m.g=u,B=Xt(he,I,!0,m)&&B,B=Xt(he,I,!1,m)&&B,v)for(Y=0;Y<v.length;Y++)he=m.g=v[Y],B=Xt(he,I,!1,m)&&B}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)ue(v[I]);delete u.g[m],u.h--}}this.F=null},Ot.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},Ot.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function Xt(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,Y=0;Y<m.length;++Y){var he=m[Y];if(he&&!he.da&&he.capture==v){var gt=he.listener,Gt=he.ha||he.src;he.fa&&ye(u.i,he),B=gt.call(Gt,I)!==!1&&B}}return B&&!I.defaultPrevented}function Sn(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function _r(u){u.g=Sn(()=>{u.g=null,u.i&&(u.i=!1,_r(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class nr extends X{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(u){X.call(this),this.h=u,this.g={}}L(di,X);var xn=[];function Ui(u){Fe(u.g,function(m,v){this.g.hasOwnProperty(v)&&gr(m)},u),u.g={}}di.prototype.N=function(){di.aa.N.call(this),Ui(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=d.JSON.stringify,zi=d.JSON.parse,Fs=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Mr(){}Mr.prototype.h=null;function wr(u){return u.h||(u.h=u.i())}function fi(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){me.call(this,"d")}L(kn,me);function Bi(){me.call(this,"c")}L(Bi,me);var Hn={},Us=null;function Fr(){return Us=Us||new Ot}Hn.La="serverreachability";function Ur(u){me.call(this,Hn.La,u)}L(Ur,me);function Nn(u){const m=Fr();xt(m,new Ur(m))}Hn.STAT_EVENT="statevent";function js(u,m){me.call(this,Hn.STAT_EVENT,u),this.stat=m}L(js,me);function kt(u){const m=Fr();xt(m,new js(m,u))}Hn.Ma="timingevent";function b(u,m){me.call(this,Hn.Ma,u),this.size=m}L(b,me);function F(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function G(){this.g=!0}G.prototype.xa=function(){this.g=!1};function te(u,m,v,I,B,Y){u.info(function(){if(u.g)if(Y)for(var he="",gt=Y.split("&"),Gt=0;Gt<gt.length;Gt++){var ot=gt[Gt].split("=");if(1<ot.length){var Zt=ot[0];ot=ot[1];var zt=Zt.split("_");he=2<=zt.length&&zt[1]=="type"?he+(Zt+"="+ot+"&"):he+(Zt+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+v+`
`+he})}function de(u,m,v,I,B,Y,he){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+v+`
`+Y+" "+he})}function Se(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ce(u,v)+(I?" "+I:"")})}function Le(u,m){u.info(function(){return"TIMEOUT: "+m})}G.prototype.info=function(){};function Ce(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var Y=B[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<B.length;he++)B[he]=""}}}}return ji(v)}catch{return m}}var Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},we={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ee;function je(){}L(je,Mr),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},Ee=new je;function We(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lt}function Lt(){this.i=null,this.g="",this.h=!1}var ct={},Xe={};function mt(u,m,v){u.L=1,u.v=Gi(Gn(m)),u.m=v,u.P=!0,rr(u,null)}function rr(u,m){u.F=Date.now(),et(u),u.A=Gn(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Qi(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Lt,u.g=cu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new nr(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(xn[0]=B.toString()),B=xn);for(var Y=0;Y<B.length;Y++){var he=Mt(v,B[Y],I||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Nn(),te(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Dn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)e:{const zt=Dn(this.g);var m=this.g.Ba();const or=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Ua(this.g)))){this.J||zt!=4||m==7||(m==8||0>=or?Nn(3):Nn(2)),qn(this);var v=this.g.Z();this.X=v;t:if(jr(this)){var I=Ua(this.g);u="";var B=I.length,Y=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),mn(this);var he="";break t}this.h.i=new d.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(Y&&m==B-1)});I.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,de(this.i,this.u,this.A,this.l,this.R,zt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Gt=this.g;if((gt=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(gt)){var ot=gt;break t}}ot=null}if(v=ot)Se(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zr(this,v);else{this.o=!1,this.s=3,kt(12),on(this),mn(this);break e}}if(this.P){v=!0;let Qn;for(;!this.J&&this.C<he.length;)if(Qn=Wn(this,he),Qn==Xe){zt==4&&(this.s=4,kt(14),v=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==ct){this.s=4,kt(15),Se(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else Se(this.i,this.l,Qn,null),zr(this,Qn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||he.length!=0||this.h.h||(this.s=1,kt(16),v=!1),this.o=this.o&&v,!v)Se(this.i,this.l,he,"[Invalid Chunked Response]"),on(this),mn(this);else if(0<he.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),za(Zt),Zt.M=!0,kt(11))}}else Se(this.i,this.l,he,null),zr(this,he);zt==4&&on(this),this.o&&!this.J&&(zt==4?Vo(this.j,this):(this.o=!1,et(this)))}else No(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),on(this),mn(this)}}}catch{}finally{}};function jr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Wn(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Xe:(v=Number(m.substring(v,I)),isNaN(v)?ct:(I+=1,I+v>m.length?Xe:(m=m.slice(I,I+v),u.C=I+v,m)))}We.prototype.cancel=function(){this.J=!0,on(this)};function et(u){u.S=Date.now()+u.I,$i(u,u.I)}function $i(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=F(T(u.ba,u),m)}function qn(u){u.B&&(d.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Le(this.i,this.A),this.L!=2&&(Nn(),kt(17)),on(this),this.s=2,mn(this)):$i(this,this.S-u)};function mn(u){u.j.G==0||u.J||Vo(u.j,u)}function on(u){qn(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ui(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function zr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||nt(v.h,u))){if(!u.K&&nt(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Lo(v),Cr(v);else break e;Oo(v),kt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=F(T(v.Za,v),6e3));if(1>=Br(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else vi(v,11)}else if((u.K||v.g==u)&&Lo(v),!Z(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let ot=B[m];if(v.T=ot[0],ot=ot[1],v.G==2)if(ot[0]=="c"){v.K=ot[1],v.ia=ot[2];const Zt=ot[3];Zt!=null&&(v.la=Zt,v.j.info("VER="+v.la));const zt=ot[4];zt!=null&&(v.Aa=zt,v.j.info("SVER="+v.Aa));const or=ot[5];or!=null&&typeof or=="number"&&0<or&&(I=1.5*or,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Qn=u.g;if(Qn){const Gs=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var Y=I.h;Y.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ir(Y,Y.h),Y.h=null))}if(I.D){const Fo=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(I.ya=Fo,_t(I.I,I.D,Fo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var he=u;if(I.qa=uu(I,I.J?I.ia:null,I.W),he.K){zs(I.h,he);var gt=he,Gt=I.L;Gt&&(gt.I=Gt),gt.B&&(qn(gt),et(gt)),I.g=he}else qs(I);0<v.i.length&&qr(v)}else ot[0]!="stop"&&ot[0]!="close"||vi(v,7);else v.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?vi(v,7):ln(v):ot[0]!="noop"&&v.l&&v.l.ta(ot),v.v=0)}}Nn(4)}catch{}}var tt=class{constructor(u,m){this.g=u,this.map=m}};function ft(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Br(u){return u.h?1:u.g?u.g.size:0}function nt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ir(u,m){u.g?u.g.add(m):u.h=m}function zs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ft.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Co(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return U(u.i)}function Ro(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Ao(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Hi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Ao(u),I=Ro(u),B=I.length,Y=0;Y<B;Y++)m.call(void 0,I[Y],v&&v[Y],u)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ah(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),B=null;if(0<=I){var Y=u[v].substring(0,I);B=u[v].substring(I+1)}else Y=u[v];m(Y,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pi){this.h=u.h,$s(this,u.j),this.o=u.o,this.g=u.g,Wi(this,u.s),this.l=u.l;var m=u.i,v=new $r;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),qi(this,v),this.m=u.m}else u&&(m=String(u).match(Bs))?(this.h=!1,$s(this,m[1]||"",!0),this.o=st(m[2]||""),this.g=st(m[3]||"",!0),Wi(this,m[4]),this.l=st(m[5]||"",!0),qi(this,m[6]||"",!0),this.m=st(m[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}pi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ki(m,Po,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ki(m,Po,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ki(v,v.charAt(0)=="/"?tu:eu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ki(v,Va)),u.join("")};function Gn(u){return new pi(u)}function $s(u,m,v){u.j=v?st(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function qi(u,m,v){m instanceof $r?(u.i=m,Hr(u.i,u.h)):(v||(m=Ki(m,nu)),u.i=new $r(m,u.h))}function _t(u,m,v){u.i.set(m,v)}function Gi(u){return _t(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function st(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ki(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Zl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Po=/[#\/\?@]/g,eu=/[#\?:]/g,tu=/[#\?]/g,nu=/[#\?@]/g,Va=/#/g;function $r(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&Ah(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=$r.prototype,n.add=function(u,m){an(this),this.i=null,u=sr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Er(u,m){an(u),m=sr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Tr(u,m){return an(u),m=sr(u,m),u.g.has(m)}n.forEach=function(u,m){an(this),this.g.forEach(function(v,I){v.forEach(function(B){u.call(m,B,I,this)},this)},this)},n.na=function(){an(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const B=u[I];for(let Y=0;Y<B.length;Y++)v.push(m[I])}return v},n.V=function(u){an(this);let m=[];if(typeof u=="string")Tr(this,u)&&(m=m.concat(this.g.get(sr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return an(this),this.i=null,u=sr(this,u),Tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Qi(u,m,v){Er(u,m),0<v.length&&(u.i=null,u.g.set(sr(u,m),U(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const Y=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var B=Y;he[I]!==""&&(B+="="+encodeURIComponent(String(he[I]))),u.push(B)}}return this.i=u.join("&")};function sr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Hr(u,m){m&&!u.j&&(an(u),u.i=null,u.g.forEach(function(v,I){var B=I.toLowerCase();I!=B&&(Er(this,I),Qi(this,B,v))},u)),u.j=m}function Ph(u,m){const v=new G;if(d.Image){const I=new Image;I.onload=R(bn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=R(bn,v,"TestLoadImage: error",!1,m,I),I.onabort=R(bn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=R(bn,v,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function ru(u,m){const v=new G,I=new AbortController,B=setTimeout(()=>{I.abort(),bn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(Y=>{clearTimeout(B),Y.ok?bn(v,"TestPingServer: ok",!0,m):bn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),bn(v,"TestPingServer: error",!1,m)})}function bn(u,m,v,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(v)}catch{}}function xh(){this.g=new Fs}function iu(u,m,v){const I=v||"";try{Hi(u,function(B,Y){let he=B;y(B)&&(he=ji(B)),m.push(I+Y+"="+encodeURIComponent(he))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function mi(u){this.l=u.Ub||null,this.j=u.eb||!1}L(mi,Mr),mi.prototype.g=function(){return new Hs(this.l,this.j)},mi.prototype.i=(function(u){return function(){return u}})({});function Hs(u,m){Ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Hs,Ot),n=Hs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Sr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;su(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function su(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ir(this):Sr(this),this.readyState==3&&su(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ir(this))},n.Qa=function(u){this.g&&(this.response=u,Ir(this))},n.ga=function(){this.g&&Ir(this)};function Ir(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Sr(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gi(u){let m="";return Fe(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Yi(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=gi(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):_t(u,m,v))}function Rt(u){Ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Rt,Ot);var kh=/^https?$/i,Ma=["POST","PUT"];n=Rt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ee.g(),this.v=this.o?wr(this.o):wr(Ee),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Y){Ws(this,Y);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)v.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())v.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ma,m,void 0))||I||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of v)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ko(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){Ws(this,Y)}};function Ws(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,xo(u),Kn(u)}function xo(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),Kn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},n.bb=function(){Fa(this)};function Fa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Dn(u)!=4||u.Z()!=2)){if(u.u&&Dn(u)==4)Sn(u.Ea,0,u);else if(xt(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=he===0){var B=String(u.D).match(Bs)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),I=!kh.test(B?B.toLowerCase():"")}v=I}if(v)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var Y=2<Dn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",xo(u)}}finally{Kn(u)}}}}function Kn(u,m){if(u.g){ko(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||xt(u,"ready");try{v.onreadystatechange=I}catch{}}}function ko(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),zi(m)}};function Ua(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function No(u){const m={};u=(u.g&&2<=Dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(Z(u[I]))continue;var v=O(u[I]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=m[B]||[];m[B]=Y,Y.push(v)}S(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ja(u){this.Aa=0,this.i=[],this.j=new G,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,u),this.cb=Wr("retryDelaySeedMs",1e4,u),this.Wa=Wr("forwardChannelMaxRetries",2,u),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ft(u&&u.concurrentRequestLimit),this.Da=new xh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ja.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){kt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=uu(this,null,this.W),qr(this)};function ln(u){if(bo(u),u.G==3){var m=u.U++,v=Gn(u.I);if(_t(v,"SID",u.K),_t(v,"RID",m),_t(v,"TYPE","terminate"),yi(u,v),m=new We(u,u.j,m),m.L=2,m.v=Gi(Gn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=cu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),et(m)}lu(u)}function Cr(u){u.g&&(za(u),u.g.cancel(),u.g=null)}function bo(u){Cr(u),u.u&&(d.clearTimeout(u.u),u.u=null),Lo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function qr(u){if(!jt(u.h)&&!u.s){u.s=!0;var m=u.Ga;Qe||ge(),oe||(Qe(),oe=!0),ke.add(m,u),u.B=0}}function Nh(u,m){return Br(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=F(T(u.Ga,u,m),au(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new We(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=C(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(B.H=Y,Y=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ji(this,B,m),v=Gn(this.I),_t(v,"RID",u),_t(v,"CVER",22),this.D&&_t(v,"X-HTTP-Session-Id",this.D),yi(this,v),Y&&(this.O?m="headers="+encodeURIComponent(String(gi(Y)))+"&"+m:this.m&&Yi(v,this.m,Y)),ir(this.h,B),this.Ua&&_t(v,"TYPE","init"),this.P?(_t(v,"$req",m),_t(v,"SID","null"),B.T=!0,mt(B,v,null)):mt(B,v,m),this.G=2}}else this.G==3&&(u?Do(this,u):this.i.length==0||jt(this.h)||Do(this))};function Do(u,m){var v;m?v=m.l:v=u.U++;const I=Gn(u.I);_t(I,"SID",u.K),_t(I,"RID",v),_t(I,"AID",u.T),yi(u,I),u.m&&u.o&&Yi(I,u.m,u.o),v=new We(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ji(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ir(u.h,v),mt(v,I,m)}function yi(u,m){u.H&&Fe(u.H,function(v,I){_t(m,I,v)}),u.l&&Hi({},function(v,I){_t(m,I,v)})}function Ji(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var B=u.i;let Y=-1;for(;;){const he=["count="+v];Y==-1?0<v?(Y=B[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let gt=!0;for(let Gt=0;Gt<v;Gt++){let ot=B[Gt].g;const Zt=B[Gt].map;if(ot-=Y,0>ot)Y=Math.max(0,B[Gt].g-100),gt=!1;else try{iu(Zt,he,"req"+ot+"_")}catch{I&&I(Zt)}}if(gt){I=he.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function qs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Qe||ge(),oe||(Qe(),oe=!0),ke.add(m,u),u.v=0}}function Oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=F(T(u.Fa,u),au(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=F(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Cr(this),ou(this))};function za(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function ou(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Gn(u.qa);_t(m,"RID","rpc"),_t(m,"SID",u.K),_t(m,"AID",u.T),_t(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&_t(m,"TO",u.ja),_t(m,"TYPE","xmlhttp"),yi(u,m),u.m&&u.o&&Yi(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Gi(Gn(m)),v.m=null,v.P=!0,rr(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Cr(this),Oo(this),kt(19))};function Lo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Vo(u,m){var v=null;if(u.g==m){Lo(u),za(u),u.g=null;var I=2}else if(nt(u.h,m))v=m.D,zs(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;I=Fr(),xt(I,new b(I,v)),qr(u)}else qs(u);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&Nh(u,m)||I==2&&Oo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:vi(u,5);break;case 4:vi(u,10);break;case 3:vi(u,6);break;default:vi(u,2)}}}function au(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function vi(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const B=!I;I=new pi(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$s(I,"https"),Gi(I),B?Ph(I.toString(),v):ru(I.toString(),v)}else kt(2);u.G=0,u.l&&u.l.sa(m),lu(u),bo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function lu(u){if(u.G=0,u.ka=[],u.l){const m=Co(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ka,m),H(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function uu(u,m,v){var I=v instanceof pi?Gn(v):new pi(v);if(I.g!="")m&&(I.g=m+"."+I.g),Wi(I,I.s);else{var B=d.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var Y=new pi(null);I&&$s(Y,I),m&&(Y.g=m),B&&Wi(Y,B),v&&(Y.l=v),I=Y}return v=u.D,m=u.ya,v&&m&&_t(I,v,m),_t(I,"VER",u.la),yi(u,I),I}function cu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Rt(new mi({eb:v})):new Rt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ba(){}n=Ba.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Mo(){}Mo.prototype.g=function(u,m){return new Cn(u,m)};function Cn(u,m){Ot.call(this),this.g=new ja(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Z(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Z(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Gr(this)}L(Cn,Ot),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){ln(this.g)},Cn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ji(u),u=v);m.i.push(new tt(m.Ya++,u)),m.G==3&&qr(m)},Cn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Cn.aa.N.call(this)};function hu(u){kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}L(hu,kn);function du(){Bi.call(this),this.status=1}L(du,Bi);function Gr(u){this.g=u}L(Gr,Ba),Gr.prototype.ua=function(){xt(this.g,"a")},Gr.prototype.ta=function(u){xt(this.g,new hu(u))},Gr.prototype.sa=function(u){xt(this.g,new du)},Gr.prototype.ra=function(){xt(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,X_=function(){return new Mo},J_=function(){return Fr()},Y_=Hn,Rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,pc=Ie,we.COMPLETE="complete",Q_=we,fi.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,_l=fi,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,K_=Rt}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const Hy="@firebase/firestore",Wy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new np("@firebase/firestore");function oa(){return go.logLevel}function Te(n,...e){if(go.logLevel<=rt.DEBUG){const t=e.map(sp);go.debug(`Firestore (${ka}): ${n}`,...t)}}function Di(n,...e){if(go.logLevel<=rt.ERROR){const t=e.map(sp);go.error(`Firestore (${ka}): ${n}`,...t)}}function Rs(n,...e){if(go.logLevel<=rt.WARN){const t=e.map(sp);go.warn(`Firestore (${ka}): ${n}`,...t)}}function sp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Z_(n,i,t)}function Z_(n,e,t){let i=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Di(i),new Error(i)}function pt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||Z_(e,o,i)}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(En.UNAUTHENTICATED)))}shutdown(){}}class i1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class s1{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ki,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ki)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string",31837,{l:i}),new ew(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class o1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new o1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const i=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=u1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Je(n,e){return n<e?-1:n>e?1:0}function Af(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Je(i,o);{const l=tw(),c=c1(l.encode(Gy(n,t)),l.encode(Gy(e,t)));return c!==0?c:Je(i,o)}}t+=i>65535?2:1}return Je(n.length,e.length)}function Gy(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function c1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Je(n[t],e[t]);return Je(n.length,e.length)}function wa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="__name__";class Xr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Xr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Je(e.length,t.length)}static compareSegments(e,t){const i=Xr.isNumericId(e),o=Xr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Xr.extractNumericId(e).compare(Xr.extractNumericId(t)):Af(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class St extends Xr{construct(e,t,i){return new St(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const h1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Xr{construct(e,t,i){return new dn(e,t,i)}static isValidIdentifier(e){return h1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ky}static keyField(){return new dn([Ky])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new xe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new xe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new xe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new xe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(St.fromString(e))}static fromName(e){return new De(St.fromString(e).popFirst(5))}static empty(){return new De(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(n,e,t){if(!t)throw new xe(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function d1(n,e,t,i){if(e===!0&&i===!0)throw new xe(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qy(n){if(!De.isDocumentKey(n))throw new xe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yy(n){if(De.isDocumentKey(n))throw new xe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ap(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function Or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ap(n);throw new xe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wl(n,e){if(!rw(n))throw new xe(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new xe(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=-62135596800,Xy=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Xy);return new Ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Jy)throw new xe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xy}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Wt("string",Ct._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Ct(0,0))}static max(){return new qe(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function f1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(i===1e9?new Ct(t+1,0):new Ct(t,i));return new As(o,De.empty(),e)}function p1(n){return new As(n.readTime,n.key,bl)}class As{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new As(qe.min(),De.empty(),bl)}static max(){return new As(qe.max(),De.empty(),bl)}}function m1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==g1)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++d,d===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function v1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ba(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}th.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=-1;function nh(n){return n==null}function kc(n){return n===0&&1/n==-1/0}function _1(n){return typeof n=="number"&&Number.isInteger(n)&&!kc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="";function w1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zy(e)),e=E1(n.get(t),e);return Zy(e)}function E1(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case iw:t+="";break;default:t+=l}}return t}function Zy(n){return n+iw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Os(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??hn.RED,this.left=o??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new hn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tv(this.data.getIterator())}getIteratorFrom(e){return new tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new tr([])}unionWith(e){let t=new Jt(dn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ow("Invalid base64 string: "+l):l}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const T1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if(pt(!!n,39018),typeof n=="string"){let e=0;const t=T1.exec(n);if(pt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="server_timestamp",lw="__type__",uw="__previous_value__",cw="__local_write_time__";function up(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lw])===null||t===void 0?void 0:t.stringValue)===aw}function rh(n){const e=n.mapValue.fields[uw];return up(e)?rh(e):e}function Dl(n){const e=Ps(n.mapValue.fields[cw].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t,i,o,l,c,d,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Nc="(default)";class Ol{constructor(e,t){this.projectId=e,this.database=t||Nc}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===Nc}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="__type__",S1="__max__",uc={mapValue:{}},dw="__vector__",bc="value";function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?up(n)?4:R1(n)?9007199254740991:C1(n)?10:11:Be(28295,{value:n})}function oi(n,e){if(n===e)return!0;const t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dl(n).isEqual(Dl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ps(o.timestampValue),d=Ps(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return xs(o.bytesValue).isEqual(xs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ut(o.geoPointValue.latitude)===Ut(l.geoPointValue.latitude)&&Ut(o.geoPointValue.longitude)===Ut(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ut(o.integerValue)===Ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Ut(o.doubleValue),d=Ut(l.doubleValue);return c===d?kc(c)===kc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return wa(n.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(ev(c)!==ev(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!oi(c[p],d[p])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function Ll(n,e){return(n.values||[]).find((t=>oi(t,e)))!==void 0}function Ea(n,e){if(n===e)return 0;const t=ks(n),i=ks(e);if(t!==i)return Je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Ut(l.integerValue||l.doubleValue),p=Ut(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return nv(n.timestampValue,e.timestampValue);case 4:return nv(Dl(n),Dl(e));case 5:return Af(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=xs(l),p=xs(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Je(d[y],p[y]);if(_!==0)return _}return Je(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Je(Ut(l.latitude),Ut(c.latitude));return d!==0?d:Je(Ut(l.longitude),Ut(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,y,_;const E=l.fields||{},T=c.fields||{},R=(d=E[bc])===null||d===void 0?void 0:d.arrayValue,L=(p=T[bc])===null||p===void 0?void 0:p.arrayValue,U=Je(((y=R?.values)===null||y===void 0?void 0:y.length)||0,((_=L?.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:rv(R,L)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===uc.mapValue&&c===uc.mapValue)return 0;if(l===uc.mapValue)return 1;if(c===uc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=Af(p[E],_[E]);if(T!==0)return T;const R=Ea(d[p[E]],y[_[E]]);if(R!==0)return R}return Je(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{le:t})}}function nv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Ps(n),i=Ps(e),o=Je(t.seconds,i.seconds);return o!==0?o:Je(t.nanos,i.nanos)}function rv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ea(t[o],i[o]);if(l)return l}return Je(t.length,i.length)}function Ta(n){return Pf(n)}function Pf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ps(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Pf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Pf(t.fields[c])}`;return o+"}"})(n.mapValue):Be(61005,{value:n})}function mc(n){switch(ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(n);return e?16+mc(e):16;case 5:return 2*n.stringValue.length;case 6:return xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+mc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Os(i.fields,((l,c)=>{o+=l.length+mc(c)})),o})(n.mapValue);default:throw Be(13486,{value:n})}}function xf(n){return!!n&&"integerValue"in n}function cp(n){return!!n&&"arrayValue"in n}function iv(n){return!!n&&"nullValue"in n}function sv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gc(n){return!!n&&"mapValue"in n}function C1(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hw])===null||t===void 0?void 0:t.stringValue)===dw}function Sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Os(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Sl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function R1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===S1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=dn.emptyPath(),i={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Sl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];gc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Os(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Bn(Sl(this.value))}}function fw(n){const e=[];return Os(n.fields,((t,i)=>{const o=new dn([t]);if(gc(i)){const l=fw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,qe.min(),qe.min(),qe.min(),Bn.empty(),0)}static newFoundDocument(e,t,i,o){return new Tn(e,1,t,qe.min(),i,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,qe.min(),qe.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,qe.min(),qe.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.position=e,this.inclusive=t}}function ov(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=De.comparator(De.fromName(c.referenceValue),t.key):i=Ea(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function av(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function A1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{}class Yt extends pw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new x1(e,t,i):t==="array-contains"?new b1(e,i):t==="in"?new D1(e,i):t==="not-in"?new O1(e,i):t==="array-contains-any"?new L1(e,i):new Yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new k1(e,i):new N1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends pw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ai(e,t)}matches(e){return mw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function mw(n){return n.op==="and"}function gw(n){return P1(n)&&mw(n)}function P1(n){for(const e of n.filters)if(e instanceof ai)return!1;return!0}function kf(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Ta(n.value);if(gw(n))return n.filters.map((e=>kf(e))).join(",");{const e=n.filters.map((t=>kf(t))).join(",");return`${n.op}(${e})`}}function yw(n,e){return n instanceof Yt?(function(i,o){return o instanceof Yt&&i.op===o.op&&i.field.isEqual(o.field)&&oi(i.value,o.value)})(n,e):n instanceof ai?(function(i,o){return o instanceof ai&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,d)=>l&&yw(c,o.filters[d])),!0):!1})(n,e):void Be(19439)}function vw(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ta(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(vw).join(" ,")+"}"})(n):"Filter"}class x1 extends Yt{constructor(e,t,i){super(e,t,i),this.key=De.fromName(i.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class k1 extends Yt{constructor(e,t){super(e,"in",t),this.keys=_w("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class N1 extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=_w("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _w(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>De.fromName(i.referenceValue)))}class b1 extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cp(t)&&Ll(t.arrayValue,this.value)}}class D1 extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ll(this.value.arrayValue,t)}}class O1 extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ll(this.value.arrayValue,t)}}class L1 extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ll(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function lv(n,e=null,t=[],i=[],o=null,l=null,c=null){return new V1(n,e,t,i,o,l,c)}function hp(n){const e=Ge(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>kf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ta(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ta(i))).join(",")),e.Pe=t}return e.Pe}function dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!av(n.startAt,e.startAt)&&av(n.endAt,e.endAt)}function Nf(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function M1(n,e,t,i,o,l,c,d){return new ih(n,e,t,i,o,l,c,d)}function fp(n){return new ih(n)}function uv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function F1(n){return n.collectionGroup!==null}function Cl(n){const e=Ge(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Jt(dn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Oc(l,i))})),t.has(dn.keyField().canonicalString())||e.Te.push(new Oc(dn.keyField(),i))}return e.Te}function ei(n){const e=Ge(n);return e.Ie||(e.Ie=U1(e,Cl(n))),e.Ie}function U1(n,e){if(n.limitType==="F")return lv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Oc(o.field,l)}));const t=n.endAt?new Dc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Dc(n.startAt.position,n.startAt.inclusive):null;return lv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function bf(n,e,t){return new ih(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sh(n,e){return dp(ei(n),ei(e))&&n.limitType===e.limitType}function ww(n){return`${hp(ei(n))}|lt:${n.limitType}`}function aa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>vw(o))).join(", ")}]`),nh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ta(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ta(o))).join(",")),`Target(${i})`})(ei(n))}; limitType=${n.limitType})`}function oh(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):De.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of Cl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,d,p){const y=ov(c,d,p);return c.inclusive?y<=0:y<0})(i.startAt,Cl(i),o)||i.endAt&&!(function(c,d,p){const y=ov(c,d,p);return c.inclusive?y>=0:y>0})(i.endAt,Cl(i),o))})(n,e)}function j1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ew(n){return(e,t)=>{let i=!1;for(const o of Cl(n)){const l=z1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function z1(n,e,t){const i=n.field.isKeyField()?De.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Ea(p,y):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return sw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Dt(De.comparator);function Oi(){return B1}const Tw=new Dt(De.comparator);function wl(...n){let e=Tw;for(const t of n)e=e.insert(t.key,t);return e}function Iw(n){let e=Tw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function co(){return Rl()}function Sw(){return Rl()}function Rl(){return new wo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $1=new Dt(De.comparator),H1=new Jt(De.comparator);function it(...n){let e=H1;for(const t of n)e=e.add(t);return e}const W1=new Jt(Je);function q1(){return W1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function Cw(n){return{integerValue:""+n}}function G1(n,e){return _1(e)?Cw(e):pp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function K1(n,e,t){return n instanceof Vl?(function(o,l){const c={fields:{[lw]:{stringValue:aw},[cw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&up(l)&&(l=rh(l)),l&&(c.fields[uw]=l),{mapValue:c}})(t,e):n instanceof Ml?Aw(n,e):n instanceof Fl?Pw(n,e):(function(o,l){const c=Rw(o,l),d=cv(c)+cv(o.Ee);return xf(c)&&xf(o.Ee)?Cw(d):pp(o.serializer,d)})(n,e)}function Q1(n,e,t){return n instanceof Ml?Aw(n,e):n instanceof Fl?Pw(n,e):t}function Rw(n,e){return n instanceof Lc?(function(i){return xf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Vl extends ah{}class Ml extends ah{constructor(e){super(),this.elements=e}}function Aw(n,e){const t=xw(e);for(const i of n.elements)t.some((o=>oi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Fl extends ah{constructor(e){super(),this.elements=e}}function Pw(n,e){let t=xw(e);for(const i of n.elements)t=t.filter((o=>!oi(o,i)));return{arrayValue:{values:t}}}class Lc extends ah{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function cv(n){return Ut(n.integerValue||n.doubleValue)}function xw(n){return cp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t){this.field=e,this.transform=t}}function J1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Ml&&o instanceof Ml||i instanceof Fl&&o instanceof Fl?wa(i.elements,o.elements,oi):i instanceof Lc&&o instanceof Lc?oi(i.Ee,o.Ee):i instanceof Vl&&o instanceof Vl})(n.transform,e.transform)}class X1{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lh{}function kw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mp(n.key,mr.none()):new ql(n.key,n.data,mr.none());{const t=n.data,i=Bn.empty();let o=new Jt(dn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Ls(n.key,i,new tr(o.toArray()),mr.none())}}function Z1(n,e,t){n instanceof ql?(function(o,l,c){const d=o.value.clone(),p=dv(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ls?(function(o,l,c){if(!yc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=dv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Nw(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Al(n,e,t,i){return n instanceof ql?(function(l,c,d,p){if(!yc(l.precondition,c))return d;const y=l.value.clone(),_=fv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ls?(function(l,c,d,p){if(!yc(l.precondition,c))return d;const y=fv(l.fieldTransforms,p,c),_=c.data;return _.setAll(Nw(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,c,d){return yc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function eR(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=Rw(i.transform,o||null);l!=null&&(t===null&&(t=Bn.empty()),t.set(i.field,l))}return t||null}function hv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&wa(i,o,((l,c)=>J1(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ql extends lh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ls extends lh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Nw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function dv(n,e,t){const i=new Map;pt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,Q1(c,d,t[o]))}return i}function fv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,K1(l,c,e))}return i}class mp extends lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Z1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Al(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Al(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Sw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=kw(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(qe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),it())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,((t,i)=>hv(t,i)))&&wa(this.baseMutations,e.baseMutations,((t,i)=>hv(t,i)))}}class gp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){pt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return $1})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new gp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,at;function sR(n){switch(n){case ne.OK:return Be(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function bw(n){if(n===void 0)return Di("GRPC error has no .code"),ne.UNKNOWN;switch(n){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return Be(39323,{code:n})}}(at=$t||($t={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Ts([4294967295,4294967295],0);function pv(n){const e=tw().encode(n),t=new G_;return t.update(e),new Uint8Array(t.digest())}function mv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ts([t,i],0),new Ts([o,l],0)]}class yp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new El(`Invalid padding: ${t}`);if(i<0)throw new El(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new El(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ts.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ts.fromNumber(i)));return o.compare(oR)===1&&(o=new Ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=pv(e),[i,o]=mv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new yp(l,o,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=pv(e),[i,o]=mv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new uh(qe.min(),o,new Dt(Je),Oi(),it())}}class Gl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Gl(i,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class Dw{constructor(e,t){this.targetId=e,this.De=t}}class Ow{constructor(e,t,i=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class gv{constructor(){this.ve=0,this.Ce=yv(),this.Fe=fn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=it(),t=it(),i=it();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Be(38017,{changeType:l})}})),new Gl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=yv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class aR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Oi(),this.je=cc(),this.Je=cc(),this.He=new Dt(Je)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Nf(l))if(i===0){const c=new De(l.path);this.Xe(t,c,Tn.newNoDocument(c,qe.min()))}else pt(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=xs(i).toUint8Array()}catch(p){if(p instanceof ow)return Rs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new yp(c,o,l)}catch(p){return Rs(p instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&Nf(d.target)){const p=new De(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,Tn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let i=it();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new uh(e,t,this.He,this.ze,i);return this.ze=Oi(),this.je=cc(),this.Je=cc(),this.He=new Dt(Je),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new gv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Jt(Je),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Jt(Je),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new gv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function cc(){return new Dt(De.comparator)}function yv(){return new Dt(De.comparator)}const lR={asc:"ASCENDING",desc:"DESCENDING"},uR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cR={and:"AND",or:"OR"};class hR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Df(n,e){return n.useProto3Json||nh(e)?e:{value:e}}function Vc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dR(n,e){return Vc(n,e.toTimestamp())}function ti(n){return pt(!!n,49232),qe.fromTimestamp((function(t){const i=Ps(t);return new Ct(i.seconds,i.nanos)})(n))}function vp(n,e){return Of(n,e).canonicalString()}function Of(n,e){const t=(function(o){return new St(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Vw(n){const e=St.fromString(n);return pt(zw(e),10190,{key:e.toString()}),e}function Lf(n,e){return vp(n.databaseId,e.path)}function hf(n,e){const t=Vw(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(Fw(t))}function Mw(n,e){return vp(n.databaseId,e)}function fR(n){const e=Vw(n);return e.length===4?St.emptyPath():Fw(e)}function Vf(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Fw(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function vv(n,e,t){return{name:Lf(n,e),fields:t.value.mapValue.fields}}function pR(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(pt(_===void 0||typeof _=="string",58123),fn.fromBase64String(_||"")):(pt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),fn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(y){const _=y.code===void 0?ne.UNKNOWN:bw(y.code);return new xe(_,y.message||"")})(c);t=new Ow(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=hf(n,i.document.name),l=ti(i.document.updateTime),c=i.document.createTime?ti(i.document.createTime):qe.min(),d=new Bn({mapValue:{fields:i.document.fields}}),p=Tn.newFoundDocument(o,l,c,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new vc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=hf(n,i.document),l=i.readTime?ti(i.readTime):qe.min(),c=Tn.newNoDocument(o,l),d=i.removedTargetIds||[];t=new vc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=hf(n,i.document),l=i.removedTargetIds||[];t=new vc([],l,o,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new iR(o,l),d=i.targetId;t=new Dw(d,c)}}return t}function mR(n,e){let t;if(e instanceof ql)t={update:vv(n,e.key,e.value)};else if(e instanceof mp)t={delete:Lf(n,e.key)};else if(e instanceof Ls)t={update:vv(n,e.key,e.data),updateMask:SR(e.fieldMask)};else{if(!(e instanceof tR))return Be(16599,{Rt:e.type});t={verify:Lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Vl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ml)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Fl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Lc)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw Be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:dR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function gR(n,e){return n&&n.length>0?(pt(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ti(o.updateTime):ti(l);return c.isEqual(qe.min())&&(c=ti(l)),new X1(c,o.transformResults||[])})(t,e)))):[]}function yR(n,e){return{documents:[Mw(n,e.path)]}}function vR(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Mw(n,o);const l=(function(y){if(y.length!==0)return jw(ai.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(T){return{field:la(T.field),direction:ER(T.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Df(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function _R(n){let e=fR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){pt(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const T=Uw(E);return T instanceof ai&&gw(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(L){return new Oc(ua(L.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,nh(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,R=E.values||[];return new Dc(R,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,R=E.values||[];return new Dc(R,T)})(t.endAt)),M1(e,o,c,l,d,"F",p,y)}function wR(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Uw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ua(t.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ua(t.unaryFilter.field);return Yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ua(t.unaryFilter.field);return Yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ua(t.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(ua(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((i=>Uw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function ER(n){return lR[n]}function TR(n){return uR[n]}function IR(n){return cR[n]}function la(n){return{fieldPath:n.canonicalString()}}function ua(n){return dn.fromServerFormat(n.fieldPath)}function jw(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(sv(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NAN"}};if(iv(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sv(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NOT_NAN"}};if(iv(t.value))return{unaryFilter:{field:la(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:la(t.field),op:TR(t.op),value:t.value}}})(n):n instanceof ai?(function(t){const i=t.getFilters().map((o=>jw(o)));return i.length===1?i[0]:{compositeFilter:{op:IR(t.op),filters:i}}})(n):Be(54877,{filter:n})}function SR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i,o,l=qe.min(),c=qe.min(),d=fn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.gt=e}}function RR(n){const e=_R({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.Dn=new PR}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(As.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class PR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Jt(St.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Jt(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(Bw,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ia(0)}static ur(){return new Ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="LruGarbageCollector",xR=1048576;function Ev([n,e],[t,i]){const o=Je(n,t);return o===0?Je(e,i):o}class kR{constructor(e){this.Tr=e,this.buffer=new Jt(Ev),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ev(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Te(wv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ba(t)?Te(wv,"Ignoring IndexedDB error during garbage collection: ",t):await Na(t)}await this.Rr(3e5)}))}}class bR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(th.ue);const i=new kR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(_v)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,c,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),oa()<=rt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function DR(n,e){return new bR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.changes=new wo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Al(i.mutation,o,tr.empty(),Ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,it()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=it()){const o=co();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=wl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=co();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,it())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,o){let l=Oi();const c=Rl(),d=(function(){return Rl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ls)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),Al(_.mutation,y,_.mutation.getFieldMask(),Ct.now())):c.set(y.key,tr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>{var E;return d.set(y,new LR(_,(E=c.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=Rl();let o=new Dt(((c,d)=>c-d)),l=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||tr.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||it()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=Sw();_.forEach((T=>{if(!l.has(T)){const R=kw(t.get(T),i.get(T));R!==null&&E.set(T,R),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ee.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return De.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):F1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ee.resolve(co());let d=bl,p=l;return c.next((y=>ee.forEach(y,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,it()))).next((_=>({batchId:d,changes:Iw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((i=>{let o=wl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=wl();return this.indexManager.getCollectionParents(e,l).next((d=>ee.forEach(d,(p=>{const y=(function(E,T){return new ih(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Tn.newInvalidDocument(_)))}));let d=wl();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&Al(_.mutation,y,tr.empty(),Ct.now()),oh(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ti(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:RR(o.bundledQuery),readTime:ti(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.overlays=new Dt(De.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=co();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=co(),l=t.length+1,c=new De(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Dt(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=co(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=co(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>d.set(y,_))),!(d.size()>=o)););return ee.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new rR(t,i));let l=this.kr.get(t);l===void 0&&(l=it(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.qr=new Jt(rn.Qr),this.$r=new Jt(rn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new rn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new rn(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new De(new St([])),i=new rn(t,e),o=new rn(t,e+1),l=[];return this.$r.forEachInRange([i,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new De(new St([])),i=new rn(t,e),o=new rn(t,e+1);let l=it();return this.$r.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new rn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return De.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||De.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Jt(rn.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new nR(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.Yr=this.Yr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?lp:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new rn(t,0),o=new rn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jt(Je);return t.forEach((o=>{const l=new rn(o,0),c=new rn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;De.isDocumentKey(l)||(l=l.child(""));const c=new rn(new De(l),0);let d=new Jt(Je);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Hr)),!0)}),c),ee.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){pt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ee.forEach(t.mutations,(o=>{const l=new rn(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new rn(t,0),o=this.Yr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.ni=e,this.docs=(function(){return new Dt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let i=Oi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Oi();const c=t.path,d=new De(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||m1(p1(_),i)<=0||(o.has(_.key)||oh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Be(9500)}ri(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new BR(this)}getSize(e){return ee.resolve(this.size)}}class BR extends OR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.persistence=e,this.ii=new wo((t=>hp(t)),dp),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new _p,this.targetCount=0,this._i=Ia.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ia(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t){this.ai={},this.overlays={},this.ui=new th(0),this.ci=!1,this.ci=!0,this.li=new UR,this.referenceDelegate=e(this),this.hi=new $R(this),this.indexManager=new AR,this.remoteDocumentCache=(function(o){return new zR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new CR(t),this.Ti=new MR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new jR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Te("MemoryPersistence","Starting transaction:",e);const o=new HR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class HR extends y1{constructor(e){super(),this.currentSequenceNumber=e}}class wp{constructor(e){this.persistence=e,this.Ai=new _p,this.Ri=null}static Vi(e){return new wp(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,(i=>{const o=De.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,qe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mc{constructor(e,t){this.persistence=e,this.gi=new wo((i=>w1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=DR(this,t)}static Vi(e,t){return new Mc(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return ee.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,qe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mc(e.data.value)),t}Sr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=it(),o=it();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Ep(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return MS()?8:v1(In())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new WR;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(oa()<=rt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",aa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(oa()<=rt.DEBUG&&Te("QueryEngine","Query:",aa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(oa()<=rt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",aa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(t))):ee.resolve())}ps(e,t){if(uv(t))return ee.resolve(null);let i=ei(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=bf(t,null,"F"),i=ei(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=it(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,d);return this.Ds(t,y,c,p.readTime)?this.ps(e,bf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return uv(t)||o.isEqual(qe.min())?ee.resolve(null):this.gs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,i,o)?ee.resolve(null):(oa()<=rt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),aa(t)),this.vs(e,c,t,f1(o,bl)).next((d=>d)))}))}bs(e,t){let i=new Jt(Ew(e));return t.forEach(((o,l)=>{oh(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return oa()<=rt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",aa(t)),this.gs.getDocumentsMatchingQuery(e,t,As.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LocalStore",GR=3e8;class KR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Dt(Je),this.Ms=new wo((l=>hp(l)),dp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function QR(n,e,t,i){return new KR(n,e,t,i)}async function Hw(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=it();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:c,addedBatchIds:d})))}))}))}function YR(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,_){const E=y.batch,T=E.keys();let R=ee.resolve();return T.forEach((L=>{R=R.next((()=>_.getEntry(p,L))).next((U=>{const H=y.docVersions.get(L);pt(H!==null,48541),U.version.compareTo(H)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),_.addEntry(U)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=it();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Ww(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function JR(n,e){const t=Ge(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,E))));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(fn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),o=o.insert(E,R),(function(U,H,fe){return U.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=GR?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(T,R,_)&&d.push(t.hi.updateTargetData(l,R))}));let p=Oi(),y=it();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(XR(l,c,e.documentUpdates).next((_=>{p=_.Ls,y=_.ks}))),!i.isEqual(qe.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return ee.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function XR(n,e,t){let i=it(),o=it();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Oi();return t.forEach(((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(qe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Te(Tp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function ZR(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=lp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function eA(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,ee.resolve(o)):t.hi.allocateTargetId(i).next((c=>(o=new _s(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Mf(n,e,t){const i=Ge(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ba(c))throw c;Te(Tp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Tv(n,e,t){const i=Ge(n);let o=qe.min(),l=it();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const E=Ge(p),T=E.Ms.get(_);return T!==void 0?ee.resolve(E.Fs.get(T)):E.hi.getTargetData(y,_)})(i,c,ei(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?o:qe.min(),t?l:it()))).next((d=>(tA(i,j1(e),d),{documents:d,qs:l})))))}function tA(n,e,t){let i=n.xs.get(e)||qe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class Iv{constructor(){this.activeTargetIds=q1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nA{constructor(){this.Fo=new Iv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Iv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="ConnectivityMonitor";class Cv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Te(Sv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Te(Sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function Ff(){return hc===null?hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="RestConnection",iA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sA{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Nc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const c=Ff(),d=this.Go(e,t.toUriEncodedString());Te(df,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(d),_=_o(y);return this.jo(e,d,p,i,_).then((E=>(Te(df,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Rs(df,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",i),E}))}Jo(e,t,i,o,l,c){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=iA[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class aA extends sA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const c=Ff();return new Promise(((d,p)=>{const y=new K_;y.setWithCredentials(!0),y.listenOnce(Q_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case pc.NO_ERROR:const E=y.getResponseJson();Te(wn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case pc.TIMEOUT:Te(wn,`RPC '${e}' ${c} timed out`),p(new xe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const T=y.getStatus();if(Te(wn,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R?.error;if(L&&L.status&&L.message){const U=(function(fe){const Z=fe.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Z)>=0?Z:ne.UNKNOWN})(L.status);p(new xe(U,L.message))}else p(new xe(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new xe(ne.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:c,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{Te(wn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);Te(wn,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=Ff(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=X_(),d=J_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");Te(wn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=c.createWebChannel(_,p);this.T_(E);let T=!1,R=!1;const L=new oA({Ho:H=>{R?Te(wn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(T||(Te(wn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),Te(wn,`RPC '${e}' stream ${o} sending:`,H),E.send(H))},Yo:()=>E.close()}),U=(H,fe,Z)=>{H.listen(fe,(ce=>{try{Z(ce)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return U(E,_l.EventType.OPEN,(()=>{R||(Te(wn,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),U(E,_l.EventType.CLOSE,(()=>{R||(R=!0,Te(wn,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(E))})),U(E,_l.EventType.ERROR,(H=>{R||(R=!0,Rs(wn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),L.__(new xe(ne.UNAVAILABLE,"The operation could not be completed")))})),U(E,_l.EventType.MESSAGE,(H=>{var fe;if(!R){const Z=H.data[0];pt(!!Z,16349);const ce=Z,pe=ce?.error||((fe=ce[0])===null||fe===void 0?void 0:fe.error);if(pe){Te(wn,`RPC '${e}' stream ${o} received error:`,pe);const Ue=pe.status;let Fe=(function(P){const N=$t[P];if(N!==void 0)return bw(N)})(Ue),S=pe.message;Fe===void 0&&(Fe=ne.INTERNAL,S="Unknown error status: "+Ue+" with message "+pe.message),R=!0,L.__(new xe(Fe,S)),E.close()}else Te(wn,`RPC '${e}' stream ${o} received:`,Z),L.a_(Z)}})),U(d,Y_.STAT_EVENT,(H=>{H.stat===Rf.PROXY?Te(wn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Rf.NOPROXY&&Te(wn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){return new hR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class Gw{constructor(e,t,i,o,l,c,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new qw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new xe(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Te(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Te(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lA extends Gw{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=pR(this.serializer,e),i=(function(l){if(!("targetChange"in l))return qe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?qe.min():c.readTime?ti(c.readTime):qe.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Vf(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Nf(p)?{documents:yR(l,p)}:{query:vR(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Lw(l,c.resumeToken);const y=Df(l,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(qe.min())>0){d.readTime=Vc(l,c.snapshotVersion.toTimestamp());const y=Df(l,c.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=wR(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Vf(this.serializer),t.removeTarget=e,this.k_(t)}}class uA extends Gw{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=gR(e.writeResults,e.commitTime),i=ti(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Vf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>mR(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class hA extends cA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new xe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Of(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(ne.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,Of(t,i),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ne.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class dA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Di(t),this._a=!1):Te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class fA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{Eo(this)&&(Te(yo,"Restarting streams for network reachability change."),await(async function(p){const y=Ge(p);y.Ia.add(4),await Kl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await hh(y)})(this))}))})),this.Aa=new dA(i,o)}}async function hh(n){if(Eo(n))for(const e of n.da)await e(!0)}async function Kl(n){for(const e of n.da)await e(!1)}function Kw(n,e){const t=Ge(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Rp(t)?Cp(t):Da(t).x_()&&Sp(t,e))}function Ip(n,e){const t=Ge(n),i=Da(t);t.Ta.delete(e),i.x_()&&Qw(t,e),t.Ta.size===0&&(i.x_()?i.B_():Eo(t)&&t.Aa.set("Unknown"))}function Sp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Da(n).H_(e)}function Qw(n,e){n.Ra.$e(e),Da(n).Y_(e)}function Cp(n){n.Ra=new aR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Da(n).start(),n.Aa.aa()}function Rp(n){return Eo(n)&&!Da(n).M_()&&n.Ta.size>0}function Eo(n){return Ge(n).Ia.size===0}function Yw(n){n.Ra=void 0}async function pA(n){n.Aa.set("Online")}async function mA(n){n.Ta.forEach(((e,t)=>{Sp(n,e)}))}async function gA(n,e){Yw(n),Rp(n)?(n.Aa.la(e),Cp(n)):n.Aa.set("Unknown")}async function yA(n,e,t){if(n.Aa.set("Online"),e instanceof Ow&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){Te(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fc(n,i)}else if(e instanceof vc?n.Ra.Ye(e):e instanceof Dw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(qe.min()))try{const i=await Ww(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(y);_&&l.Ta.set(y,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,y)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),Qw(l,p);const E=new _s(_.target,p,y,_.sequenceNumber);Sp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){Te(yo,"Failed to raise snapshot:",i),await Fc(n,i)}}async function Fc(n,e,t){if(!ba(e))throw e;n.Ia.add(1),await Kl(n),n.Aa.set("Offline"),t||(t=()=>Ww(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(yo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await hh(n)}))}function Jw(n,e){return e().catch((t=>Fc(n,t,e)))}async function dh(n){const e=Ge(n),t=Ns(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lp;for(;vA(e);)try{const o=await ZR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,_A(e,o)}catch(o){await Fc(e,o)}Xw(e)&&Zw(e)}function vA(n){return Eo(n)&&n.Pa.length<10}function _A(n,e){n.Pa.push(e);const t=Ns(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Xw(n){return Eo(n)&&!Ns(n).M_()&&n.Pa.length>0}function Zw(n){Ns(n).start()}async function wA(n){Ns(n).na()}async function EA(n){const e=Ns(n);for(const t of n.Pa)e.X_(t.mutations)}async function TA(n,e,t){const i=n.Pa.shift(),o=gp.from(i,e,t);await Jw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await dh(n)}async function IA(n,e){e&&Ns(n).Z_&&await(async function(i,o){if((function(c){return sR(c)&&c!==ne.ABORTED})(o.code)){const l=i.Pa.shift();Ns(i).N_(),await Jw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await dh(i)}})(n,e),Xw(n)&&Zw(n)}async function Av(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Te(yo,"RemoteStore received new credentials");const i=Eo(t);t.Ia.add(3),await Kl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await hh(t)}async function SA(n,e){const t=Ge(n);e?(t.Ia.delete(2),await hh(t)):e||(t.Ia.add(2),await Kl(t),t.Aa.set("Unknown"))}function Da(n){return n.Va||(n.Va=(function(t,i,o){const l=Ge(t);return l.ia(),new lA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:pA.bind(null,n),e_:mA.bind(null,n),n_:gA.bind(null,n),J_:yA.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Rp(n)?Cp(n):n.Aa.set("Unknown")):(await n.Va.stop(),Yw(n))}))),n.Va}function Ns(n){return n.ma||(n.ma=(function(t,i,o){const l=Ge(t);return l.ia(),new uA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wA.bind(null,n),n_:IA.bind(null,n),ea:EA.bind(null,n),ta:TA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await dh(n)):(await n.ma.stop(),n.Pa.length>0&&(Te(yo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new Ap(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(n,e){if(Di("AsyncQueue",`${e}: ${n}`),ba(n))return new xe(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{static emptySet(e){return new da(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||De.comparator(t.key,i.key):(t,i)=>De.comparator(t.key,i.key),this.keyedMap=wl(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.fa=new Dt(De.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Sa{constructor(e,t,i,o,l,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Sa(e,t,da.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class RA{constructor(){this.queries=xv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ge(t),l=o.queries;o.queries=xv(),l.forEach(((c,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new xe(ne.ABORTED,"Firestore shutting down"))}}function xv(){return new wo((n=>ww(n)),sh)}async function eE(n,e){const t=Ge(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new CA,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Pp(c,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&xp(t)}async function tE(n,e){const t=Ge(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function AA(n,e){const t=Ge(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(o)&&(i=!0);c.ya=o}}i&&xp(t)}function PA(n,e,t){const i=Ge(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function xp(n){n.Da.forEach((e=>{e.next()}))}var Uf,kv;(kv=Uf||(Uf={})).Fa="default",kv.Cache="cache";class nE{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Sa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class xA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=it(),this.mutatedKeys=it(),this.Xa=Ew(e),this.eu=new da(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new Pv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),R=oh(this.query,E)?E:null,L=!!T&&this.mutatedKeys.has(T.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let H=!1;T&&R?T.data.isEqual(R.data)?L!==U&&(i.track({type:3,doc:R}),H=!0):this.iu(T,R)||(i.track({type:2,doc:R}),H=!0,(p&&this.Xa(R,p)>0||y&&this.Xa(R,y)<0)&&(d=!0)):!T&&R?(i.track({type:0,doc:R}),H=!0):T&&!R&&(i.track({type:1,doc:T}),H=!0,(p||y)&&(d=!0)),H&&(R?(c=c.add(R),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((_,E)=>(function(R,L){const U=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:H})}};return U(R)-U(L)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,c.length!==0||y?{snapshot:new Sa(this.query,e.eu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Pv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=it(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new iE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new rE(i))})),t}uu(e){this.Ha=e.qs,this.Za=it();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Sa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const kp="SyncEngine";class kA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class NA{constructor(e){this.key=e,this.lu=!1}}class bA{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new wo((d=>ww(d)),sh),this.Tu=new Map,this.Iu=new Set,this.du=new Dt(De.comparator),this.Eu=new Map,this.Au=new _p,this.Ru={},this.Vu=new Map,this.mu=Ia.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function DA(n,e,t=!0){const i=cE(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await sE(i,e,t,!0),o}async function OA(n,e){const t=cE(n);await sE(t,e,!0,!1)}async function sE(n,e,t,i){const o=await eA(n.localStore,ei(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await LA(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Kw(n.remoteStore,o),d}async function LA(n,e,t,i,o){n.gu=(E,T,R)=>(async function(U,H,fe,Z){let ce=H.view.nu(fe);ce.Ds&&(ce=await Tv(U.localStore,H.query,!1).then((({documents:S})=>H.view.nu(S,ce))));const pe=Z&&Z.targetChanges.get(H.targetId),Ue=Z&&Z.targetMismatches.get(H.targetId)!=null,Fe=H.view.applyChanges(ce,U.isPrimaryClient,pe,Ue);return bv(U,H.targetId,Fe._u),Fe.snapshot})(n,E,T,R);const l=await Tv(n.localStore,e,!0),c=new xA(e,l.qs),d=c.nu(l.documents),p=Gl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,p);bv(n,t,y._u);const _=new kA(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function VA(n,e,t){const i=Ge(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((c=>!sh(c,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Mf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ip(i.remoteStore,o.targetId),jf(i,o.targetId)})).catch(Na)):(jf(i,o.targetId),await Mf(i.localStore,o.targetId,!0))}async function MA(n,e){const t=Ge(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(t.remoteStore,i.targetId))}async function FA(n,e,t){const i=WA(n);try{const o=await(function(c,d){const p=Ge(c),y=Ct.now(),_=d.reduce(((R,L)=>R.add(L.key)),it());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=Oi(),U=it();return p.Os.getEntries(R,_).next((H=>{L=H,L.forEach(((fe,Z)=>{Z.isValidDocument()||(U=U.add(fe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,L))).next((H=>{E=H;const fe=[];for(const Z of d){const ce=eR(Z,E.get(Z.key).overlayedDocument);ce!=null&&fe.push(new Ls(Z.key,ce,fw(ce.value.mapValue),mr.exists(!0)))}return p.mutationQueue.addMutationBatch(R,y,fe,d)})).next((H=>{T=H;const fe=H.applyToLocalDocumentSet(E,U);return p.documentOverlayCache.saveOverlays(R,H.batchId,fe)}))})).then((()=>({batchId:T.batchId,changes:Iw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let y=c.Ru[c.currentUser.toKey()];y||(y=new Dt(Je)),y=y.insert(d,p),c.Ru[c.currentUser.toKey()]=y})(i,o.batchId,t),await Ql(i,o.changes),await dh(i.remoteStore)}catch(o){const l=Pp(o,"Failed to persist write");t.reject(l)}}async function oE(n,e){const t=Ge(n);try{const i=await JR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?pt(c.lu,14607):o.removedDocuments.size>0&&(pt(c.lu,42227),c.lu=!1))})),await Ql(t,i,e)}catch(i){await Na(i)}}function Nv(n,e,t){const i=Ge(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Ge(c);p.onlineState=d;let y=!1;p.queries.forEach(((_,E)=>{for(const T of E.wa)T.va(d)&&(y=!0)})),y&&xp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function UA(n,e,t){const i=Ge(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let c=new Dt(De.comparator);c=c.insert(l,Tn.newNoDocument(l,qe.min()));const d=it().add(l),p=new uh(qe.min(),new Map,new Dt(Je),c,d);await oE(i,p),i.du=i.du.remove(l),i.Eu.delete(e),Np(i)}else await Mf(i.localStore,e,!1).then((()=>jf(i,e,t))).catch(Na)}async function jA(n,e){const t=Ge(n),i=e.batch.batchId;try{const o=await YR(t.localStore,e);lE(t,i,null),aE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(t,o)}catch(o){await Na(o)}}async function zA(n,e,t){const i=Ge(n);try{const o=await(function(c,d){const p=Ge(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(pt(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);lE(i,e,t),aE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ql(i,o)}catch(o){await Na(o)}}function aE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function lE(n,e,t){const i=Ge(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||uE(n,i)}))}function uE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ip(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Np(n))}function bv(n,e,t){for(const i of t)i instanceof rE?(n.Au.addReference(i.key,e),BA(n,i)):i instanceof iE?(Te(kp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||uE(n,i.key)):Be(19791,{yu:i})}function BA(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(Te(kp,"New document in limbo: "+t),n.Iu.add(i),Np(n))}function Np(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new De(St.fromString(e)),i=n.mu.next();n.Eu.set(i,new NA(t)),n.du=n.du.insert(t,i),Kw(n.remoteStore,new _s(ei(fp(t.path)),i,"TargetPurposeLimboResolution",th.ue))}}async function Ql(n,e,t){const i=Ge(n),o=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{c.push(i.gu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Ep.Es(p.targetId,y);l.push(E)}})))})),await Promise.all(c),i.hu.J_(o),await(async function(p,y){const _=Ge(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ee.forEach(y,(T=>ee.forEach(T.Is,(R=>_.persistence.referenceDelegate.addReference(E,T.targetId,R))).next((()=>ee.forEach(T.ds,(R=>_.persistence.referenceDelegate.removeReference(E,T.targetId,R)))))))))}catch(E){if(!ba(E))throw E;Te(Tp,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const R=_.Fs.get(T),L=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(L);_.Fs=_.Fs.insert(T,U)}}})(i.localStore,l))}async function $A(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Te(kp,"User change. New user:",e.toKey());const i=await Hw(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new xe(ne.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ql(t,i.Bs)}}function HA(n,e){const t=Ge(n),i=t.Eu.get(e);if(i&&i.lu)return it().add(i.key);{let o=it();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const d=t.Pu.get(c);o=o.unionWith(d.view.tu)}return o}}function cE(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UA.bind(null,e),e.hu.J_=AA.bind(null,e.eventManager),e.hu.pu=PA.bind(null,e.eventManager),e}function WA(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zA.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return QR(this.persistence,new qR,e.initialUser,this.serializer)}Du(e){return new $w(wp.Vi,this.serializer)}bu(e){return new nA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class qA extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){pt(this.persistence.referenceDelegate instanceof Mc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new NR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new $w((i=>Mc.Vi(i,t)),this.serializer)}}class zf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Nv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$A.bind(null,this.syncEngine),await SA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RA})()}createDatastore(e){const t=ch(e.databaseInfo.databaseId),i=(function(l){return new aA(l)})(e.databaseInfo);return(function(l,c,d,p){return new hA(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,d){return new fA(i,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nv(this.syncEngine,t,0)),(function(){return Cv.C()?new Cv:new rA})())}createSyncEngine(e,t){return(function(o,l,c,d,p,y,_){const E=new bA(o,l,c,d,p,y);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ge(o);Te(yo,"RemoteStore shutting down."),l.Ia.add(5),await Kl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zf.provider={build:()=>new zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class GA{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Te(bs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Te(bs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function pf(n,e){n.asyncQueue.verifyOperationInProgress(),Te(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Hw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Rs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Te("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Rs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Dv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KA(n);Te(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Av(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Av(e.remoteStore,o))),n._onlineComponents=e}async function KA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(bs,"Using user provided OfflineComponentProvider");try{await pf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Rs("Error using user provided cache. Falling back to memory cache: "+t),await pf(n,new Uc)}}else Te(bs,"Using default OfflineComponentProvider"),await pf(n,new qA(void 0));return n._offlineComponents}async function dE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(bs,"Using user provided OnlineComponentProvider"),await Dv(n,n._uninitializedComponentsProvider._online)):(Te(bs,"Using default OnlineComponentProvider"),await Dv(n,new zf))),n._onlineComponents}function QA(n){return dE(n).then((e=>e.syncEngine))}async function fE(n){const e=await dE(n),t=e.eventManager;return t.onListen=DA.bind(null,e.syncEngine),t.onUnlisten=VA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MA.bind(null,e.syncEngine),t}function YA(n,e,t={}){const i=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,y){const _=new hE({next:T=>{_.Ou(),c.enqueueAndForget((()=>tE(l,E)));const R=T.docs.has(d);!R&&T.fromCache?y.reject(new xe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&p&&p.source==="server"?y.reject(new xe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new nE(fp(d.path),_,{includeMetadataChanges:!0,ka:!0});return eE(l,E)})(await fE(n),n.asyncQueue,e,t,i))),i.promise}function JA(n,e,t={}){const i=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,y){const _=new hE({next:T=>{_.Ou(),c.enqueueAndForget((()=>tE(l,E))),T.fromCache&&p.source==="server"?y.reject(new xe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new nE(d,_,{includeMetadataChanges:!0,ka:!0});return eE(l,E)})(await fE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firestore.googleapis.com",Lv=!0;class Vv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mE,this.ssl=Lv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xR)throw new xe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new r1;switch(i.type){case"firstParty":return new a1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Ov.get(t);i&&(Te("ComponentProvider","Removing Datastore"),Ov.delete(t),i.terminate())})(this),Promise.resolve()}}function XA(n,e,t,i={}){var o;n=Or(n,fh);const l=_o(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(ep(`https://${p}`),tp("Firestore",!0)),c.host!==mE&&c.host!==p&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!po(y,d)&&(n._setSettings(y),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=En.MOCK_USER;else{_=PS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new xe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new En(T)}n._authCredentials=new i1(new ew(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ph(this.firestore,e,this._query)}}class qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Wl(t,qt._jsonSchema))return new qt(e,i||null,new De(St.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Wt("string",qt._jsonSchemaVersion),referencePath:Wt("string")};class Is extends ph{constructor(e,t,i){super(e,t,fp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new De(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function gE(n,e,...t){if(n=sn(n),nw("collection","path",e),n instanceof fh){const i=St.fromString(e,...t);return Yy(i),new Is(n,null,i)}{if(!(n instanceof qt||n instanceof Is))throw new xe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return Yy(i),new Is(n.firestore,null,i)}}function Li(n,e,...t){if(n=sn(n),arguments.length===1&&(e=op.newId()),nw("doc","path",e),n instanceof fh){const i=St.fromString(e,...t);return Qy(i),new qt(n,null,new De(i))}{if(!(n instanceof qt||n instanceof Is))throw new xe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return Qy(i),new qt(n.firestore,n instanceof Is?n.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="AsyncQueue";class Fv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new qw(this,"async_queue_retry"),this.oc=()=>{const i=ff();i&&Te(Mv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ki;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ba(e))throw e;Te(Mv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Di("INTERNAL UNHANDLED ERROR: ",Uv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Ap.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Be(47125,{hc:Uv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Uv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class To extends fh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Fv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fv(e),this._firestoreClient=void 0,await e}}}function ZA(n,e){const t=typeof n=="object"?n:ip(),i=typeof n=="string"?n:Nc,o=eh(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=U_("firestore");l&&XA(o,...l)}return o}function bp(n){if(n._terminated)throw new xe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eP(n),n._firestoreClient}function eP(n){var e,t,i;const o=n._freezeSettings(),l=(function(d,p,y,_){return new I1(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,pE(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new GA(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(fn.fromBase64String(e))}catch(t){throw new xe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pr(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:Wt("string",pr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ni._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,ni._jsonSchema))return new ni(e.latitude,e.longitude)}}ni._jsonSchemaVersion="firestore/geoPoint/1.0",ni._jsonSchema={type:Wt("string",ni._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ri(e.vectorValues);throw new xe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:Wt("string",ri._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=/^__.*__$/;class nP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new ql(e,this.data,t,this.fieldTransforms)}}class yE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:n})}}class Dp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vE(this.Ec)&&tP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class rP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ch(e)}Dc(e,t,i,o=!1){return new Dp({Ec:e,methodName:t,bc:i,path:dn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Op(n){const e=n._freezeSettings(),t=ch(n._databaseId);return new rP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _E(n,e,t,i,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Vp("Data must be an object, but it was:",c,i);const d=wE(i,c);let p,y;if(l.merge)p=new tr(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=Bf(e,E,t);if(!c.contains(T))throw new xe(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);TE(_,T)||_.push(T)}p=new tr(_),y=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=c.fieldTransforms;return new nP(new Bn(d),p,y)}class yh extends gh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}class Lp extends gh{_toFieldTransform(e){return new Y1(e.path,new Vl)}isEqual(e){return e instanceof Lp}}function iP(n,e,t,i){const o=n.Dc(1,e,t);Vp("Data must be an object, but it was:",o,i);const l=[],c=Bn.empty();Os(i,((p,y)=>{const _=Mp(e,p,t);y=sn(y);const E=o.gc(_);if(y instanceof yh)l.push(_);else{const T=vh(y,E);T!=null&&(l.push(_),c.set(_,T))}}));const d=new tr(l);return new yE(c,d,o.fieldTransforms)}function sP(n,e,t,i,o,l){const c=n.Dc(1,e,t),d=[Bf(e,i,t)],p=[o];if(l.length%2!=0)throw new xe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Bf(e,l[T])),p.push(l[T+1]);const y=[],_=Bn.empty();for(let T=d.length-1;T>=0;--T)if(!TE(y,d[T])){const R=d[T];let L=p[T];L=sn(L);const U=c.gc(R);if(L instanceof yh)y.push(R);else{const H=vh(L,U);H!=null&&(y.push(R),_.set(R,H))}}const E=new tr(y);return new yE(_,E,c.fieldTransforms)}function vh(n,e){if(EE(n=sn(n)))return Vp("Unsupported field value:",e,n),wE(n,e);if(n instanceof gh)return(function(i,o){if(!vE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const d of i){let p=vh(d,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=sn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return G1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ct.fromDate(i);return{timestampValue:Vc(o.serializer,l)}}if(i instanceof Ct){const l=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vc(o.serializer,l)}}if(i instanceof ni)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pr)return{bytesValue:Lw(o.serializer,i._byteString)};if(i instanceof qt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:vp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ri)return(function(c,d){return{mapValue:{fields:{[hw]:{stringValue:dw},[bc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw d.wc("VectorValues must only contain numeric values.");return pp(d.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${ap(i)}`)})(n,e)}function wE(n,e){const t={};return sw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(n,((i,o)=>{const l=vh(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function EE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof ni||n instanceof pr||n instanceof qt||n instanceof gh||n instanceof ri)}function Vp(n,e,t){if(!EE(t)||!rw(t)){const i=ap(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Bf(n,e,t){if((e=sn(e))instanceof mh)return e._internalPath;if(typeof e=="string")return Mp(n,e);throw jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const oP=new RegExp("[~\\*/\\[\\]]");function Mp(n,e,t){if(e.search(oP)>=0)throw jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mh(...e.split("."))._internalPath}catch{throw jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new xe(ne.INVALID_ARGUMENT,d+n+p)}function TE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(SE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aP extends IE{data(){return super.data()}}function SE(n,e){return typeof e=="string"?Mp(n,e):e instanceof mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uP{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Os(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[bc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((c=>Ut(c.doubleValue)));return new ri(l)}convertGeoPoint(e){return new ni(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=rh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=St.fromString(e);pt(zw(i),9688,{name:e});const o=new Ol(i.get(1),i.get(3)),l=new De(i.popFirst(5));return o.isEqual(t)||Di(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ho extends IE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(SE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:Wt("string",ho._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class _c extends ho{data(e={}){return super.data(e)}}class fa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Tl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new _c(this._firestore,this._userDataWriter,i.key,i,new Tl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new _c(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Tl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new _c(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Tl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:cP(d.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(n){n=Or(n,qt);const e=Or(n.firestore,To);return YA(bp(e),n._key).then((t=>mP(e,n,t)))}fa._jsonSchemaVersion="firestore/querySnapshot/1.0",fa._jsonSchema={type:Wt("string",fa._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class RE extends uP{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function hP(n){n=Or(n,ph);const e=Or(n.firestore,To),t=bp(e),i=new RE(e);return lP(n._query),JA(t,n._query).then((o=>new fa(e,i,n,o)))}function Fp(n,e,t){n=Or(n,qt);const i=Or(n.firestore,To),o=CE(n.converter,e,t);return wh(i,[_E(Op(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,mr.none())])}function dP(n,e,t,...i){n=Or(n,qt);const o=Or(n.firestore,To),l=Op(o);let c;return c=typeof(e=sn(e))=="string"||e instanceof mh?sP(l,"updateDoc",n._key,e,t,i):iP(l,"updateDoc",n._key,e),wh(o,[c.toMutation(n._key,mr.exists(!0))])}function fP(n){return wh(Or(n.firestore,To),[new mp(n._key,mr.none())])}function pP(n,e){const t=Or(n.firestore,To),i=Li(n),o=CE(n.converter,e);return wh(t,[_E(Op(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,mr.exists(!1))]).then((()=>i))}function wh(n,e){return(function(i,o){const l=new ki;return i.asyncQueue.enqueueAndForget((async()=>FA(await QA(i),o,l))),l.promise})(bp(n),e)}function mP(n,e,t){const i=t.docs.get(e._key),o=new RE(n);return new ho(n,o,e._key,i,new Tl(t.hasPendingWrites,t.fromCache),e.converter)}function pa(){return new Lp("serverTimestamp")}(function(e,t=!0){(function(o){ka=o})(xa),mo(new Cs("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new To(new s1(i.getProvider("auth-internal")),new l1(c,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new xe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(y.options.projectId,_)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Zr(Hy,Wy,e),Zr(Hy,Wy,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="type.googleapis.com/google.protobuf.Int64Value",yP="type.googleapis.com/google.protobuf.UInt64Value";function AE(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function zc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>zc(e));if(typeof n=="function"||typeof n=="object")return AE(n,e=>zc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Ca(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case gP:case yP:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Ca(e)):typeof n=="function"||typeof n=="object"?AE(n,e=>Ca(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends ci{constructor(e,t,i){super(`${Up}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function vP(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Bc(n,e){let t=vP(n),i=t,o;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!jv[c])return new $n("internal","internal");t=jv[c],i=c}const d=l.message;typeof d=="string"&&(i=d),o=l.details,o!==void 0&&(o=Ca(o))}}catch{}return t==="ok"?null:new $n(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,fr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="us-central1",wP=/^data: (.*?)(?:\n|$)/;function EP(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class TP{constructor(e,t,i,o,l=$f,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new _P(e,t,i,o),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=$f}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function IP(n,e,t){const i=_o(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(ep(n.emulatorOrigin),tp("Functions",!0))}function SP(n,e,t){const i=o=>RP(n,e,o,{});return i.stream=(o,l)=>PP(n,e,o,l),i}async function CP(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function PE(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function RP(n,e,t,i){const o=n._url(e);return AP(n,o,t,i)}async function AP(n,e,t,i){t=zc(t);const o={data:t},l=await PE(n,i),c=i.timeout||7e4,d=EP(c),p=await Promise.race([CP(e,o,l,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!p)throw new $n("cancelled","Firebase Functions instance was deleted.");const y=Bc(p.status,p.json);if(y)throw y;if(!p.json)throw new $n("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new $n("internal","Response is missing data field.");return{data:Ca(_)}}function PP(n,e,t,i){const o=n._url(e);return xP(n,o,t,i||{})}async function xP(n,e,t,i){var o;t=zc(t);const l={data:t},c=await PE(n,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const U=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(U),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(U)}}}}}}const L=Bc(0,null);return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}let p,y;const _=new Promise((R,L)=>{p=R,y=L});(o=i?.signal)===null||o===void 0||o.addEventListener("abort",()=>{const R=new $n("cancelled","Request was cancelled.");y(R)});const E=d.body.getReader(),T=kP(E,p,y,i?.signal);return{stream:{[Symbol.asyncIterator](){const R=T.getReader();return{async next(){const{value:L,done:U}=await R.read();return{value:L,done:U}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:_}}function kP(n,e,t,i){const o=(c,d)=>{const p=c.match(wP);if(!p)return;const y=p[1];try{const _=JSON.parse(y);if("result"in _){e(Ca(_.result));return}if("message"in _){d.enqueue(Ca(_.message));return}if("error"in _){const E=Bc(0,_);d.error(E),t(E);return}}catch(_){if(_ instanceof $n){d.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return p();async function p(){if(i?.aborted){const y=new $n("cancelled","Request was cancelled");return c.error(y),t(y),Promise.resolve()}try{const{value:y,done:_}=await n.read();if(_){d.trim()&&o(d.trim(),c),c.close();return}if(i?.aborted){const T=new $n("cancelled","Request was cancelled");c.error(T),t(T),await n.cancel();return}d+=l.decode(y,{stream:!0});const E=d.split(`
`);d=E.pop()||"";for(const T of E)T.trim()&&o(T.trim(),c);return p()}catch(y){const _=y instanceof $n?y:Bc(0,null);c.error(_),t(_)}}},cancel(){return n.cancel()}})}const zv="@firebase/functions",Bv="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="auth-internal",bP="app-check-internal",DP="messaging-internal";function OP(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(NP),c=t.getProvider(DP),d=t.getProvider(bP);return new TP(o,l,c,d,i)};mo(new Cs(Up,e,"PUBLIC").setMultipleInstances(!0)),Zr(zv,Bv,n),Zr(zv,Bv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n=ip(),e=$f){const i=eh(sn(n),Up).getImmediate({identifier:e}),o=U_("functions");return o&&LP(i,...o),i}function LP(n,e,t){IP(sn(n),e,t)}function VP(n,e,t){return SP(sn(n),e)}OP();function jp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function kE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MP=kE,NE=new $l("auth","Firebase",kE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new np("@firebase/auth");function FP(n,...e){$c.logLevel<=rt.WARN&&$c.warn(`Auth (${xa}): ${n}`,...e)}function wc(n,...e){$c.logLevel<=rt.ERROR&&$c.error(`Auth (${xa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n,...e){throw zp(n,...e)}function ii(n,...e){return zp(n,...e)}function bE(n,e,t){const i=Object.assign(Object.assign({},MP()),{[e]:t});return new $l("auth","Firebase",i).create(e,{appName:n.name})}function Ss(n){return bE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return NE.create(n,...e)}function ze(n,e,...t){if(!n)throw zp(e,...t)}function Ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wc(e),new Error(e)}function Vi(n,e){n||Ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UP(){return $v()==="http:"||$v()==="https:"}function $v(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UP()||OS()||"connection"in navigator)?navigator.onLine:!0}function zP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=NS()||LS()}get(){return jP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(n,e){Vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HP=new Yl(3e4,6e4);function Io(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Vs(n,e,t,i,o={}){return OE(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Hl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return DS()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&_o(n.emulatorConfig.host)&&(y.credentials="include"),DE.fetch()(await LE(n,n.config.apiHost,t,d),y)})}async function OE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},BP),e);try{const o=new qP(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw dc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw dc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw dc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw bE(n,_,y);Lr(n,_)}}catch(o){if(o instanceof ci)throw o;Lr(n,"network-request-failed",{message:String(o)})}}async function Eh(n,e,t,i,o={}){const l=await Vs(n,e,t,i,o);return"mfaPendingCredential"in l&&Lr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function LE(n,e,t,i){const o=`${e}${t}?${i}`,l=n,c=l.config.emulator?Bp(n.config,o):`${n.config.apiScheme}://${o}`;return $P.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function WP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ii(this.auth,"network-request-failed")),HP.get())})}}function dc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ii(n,e,i);return o.customData._tokenResponse=t,o}function Hv(n){return n!==void 0&&n.enterprise!==void 0}class GP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KP(n,e){return Vs(n,"GET","/v2/recaptchaConfig",Io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(n,e){return Vs(n,"POST","/v1/accounts:delete",e)}async function Hc(n,e){return Vs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YP(n,e=!1){const t=sn(n),i=await t.getIdToken(e),o=$p(i);ze(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Pl(mf(o.auth_time)),issuedAtTime:Pl(mf(o.iat)),expirationTime:Pl(mf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function mf(n){return Number(n)*1e3}function $p(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return wc("JWT malformed, contained fewer than 3 sections"),null;try{const o=M_(t);return o?JSON.parse(o):(wc("Failed to decode base64 JWT payload"),null)}catch(o){return wc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Wv(n){const e=$p(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ci&&JP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function JP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ul(n,Hc(t,{idToken:i}));ze(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?VE(l.providerUserInfo):[],d=ex(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!d?.length,_=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Wf(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function ZP(n){const e=sn(n);await Wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ex(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function VE(n){return n.map(e=>{var{providerId:t}=e,i=jp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(n,e){const t=await OE(n,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await LE(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&_o(n.emulatorConfig.host)&&(p.credentials="include"),DE.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nx(n,e){return Vs(n,"POST","/v2/accounts:revokeToken",Io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=Wv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await tx(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ma;return i&&(ze(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(ze(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(ze(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ma,this.toJSON())}_performRefresh(){return Ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YP(this,e)}reload(){return ZP(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await Ul(this,QP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(d=t.tenantId)!==null&&d!==void 0?d:void 0,H=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,fe=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Z=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ce,emailVerified:pe,isAnonymous:Ue,providerData:Fe,stsTokenManager:S}=t;ze(ce&&S,e,"internal-error");const C=ma.fromJSON(this.name,S);ze(typeof ce=="string",e,"internal-error"),ds(E,e.name),ds(T,e.name),ze(typeof pe=="boolean",e,"internal-error"),ze(typeof Ue=="boolean",e,"internal-error"),ds(R,e.name),ds(L,e.name),ds(U,e.name),ds(H,e.name),ds(fe,e.name),ds(Z,e.name);const P=new Dr({uid:ce,auth:e,email:T,emailVerified:pe,displayName:E,isAnonymous:Ue,photoURL:L,phoneNumber:R,tenantId:U,stsTokenManager:C,createdAt:fe,lastLoginAt:Z});return Fe&&Array.isArray(Fe)&&(P.providerData=Fe.map(N=>Object.assign({},N))),H&&(P._redirectEventId=H),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new ma;o.updateFromServerResponse(t);const l=new Dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Wc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ze(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?VE(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,d=new ma;d.updateFromIdToken(i);const p=new Dr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function Pi(n){Vi(n instanceof Function,"Expected a class definition");let e=qv.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ME.type="NONE";const Gv=ME;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n,e,t){return`firebase:${n}:${e}:${t}`}class ga{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Ec(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ec("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Hc(this.auth,{idToken:e}).catch(()=>{});return t?Dr._fromGetAccountInfoResponse(this.auth,t,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ga(Pi(Gv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Pi(Gv);const c=Ec(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(c);if(_){let E;if(typeof _=="string"){const T=await Hc(e,{idToken:_}).catch(()=>{});if(!T)break;E=await Dr._fromGetAccountInfoResponse(e,T,_)}else E=Dr._fromJSON(e,_);y!==l&&(d=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ga(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ga(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(HE(e))return"Webos";if(UE(e))return"Safari";if((e.includes("chrome/")||jE(e))&&!e.includes("edge/"))return"Chrome";if(BE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function FE(n=In()){return/firefox\//i.test(n)}function UE(n=In()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jE(n=In()){return/crios\//i.test(n)}function zE(n=In()){return/iemobile/i.test(n)}function BE(n=In()){return/android/i.test(n)}function $E(n=In()){return/blackberry/i.test(n)}function HE(n=In()){return/webos/i.test(n)}function Hp(n=In()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rx(n=In()){var e;return Hp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ix(){return VS()&&document.documentMode===10}function WE(n=In()){return Hp(n)||BE(n)||HE(n)||$E(n)||/windows phone/i.test(n)||zE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n,e=[]){let t;switch(n){case"Browser":t=Kv(In());break;case"Worker":t=`${Kv(In())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(n,e={}){return Vs(n,"GET","/v2/passwordPolicy",Io(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=6;class lx{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:ax,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qv(this),this.idTokenSubscription=new Qv(this),this.beforeStateQueue=new sx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pi(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Hc(this,{idToken:e}),i=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(Ss(this));const t=e?sn(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ox(this),t=new lx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await nx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pi(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[Pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&FP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Oa(n){return sn(n)}class Qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=HS(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cx(n){Th=n}function GE(n){return Th.loadJS(n)}function hx(){return Th.recaptchaEnterpriseScript}function dx(){return Th.gapiScript}function fx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class px{constructor(){this.enterprise=new mx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gx="recaptcha-enterprise",KE="NO_RECAPTCHA";class yx{constructor(e){this.type=gx,this.auth=Oa(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{KP(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new GP(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;Hv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(KE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new px().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&Hv(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=hx();p.length!==0&&(p+=d),GE(p).then(()=>{o(d,l,c)}).catch(y=>{c(y)})}}).catch(d=>{c(d)})})}}async function Yv(n,e,t,i=!1,o=!1){const l=new yx(n);let c;if(o)c=KE;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Jv(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Yv(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Yv(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(n,e){const t=eh(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(po(l,e??{}))return o;Lr(o,"already-initialized")}return t.initialize({options:e})}function _x(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Pi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function wx(n,e,t){const i=Oa(n);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=QE(e),{host:c,port:d}=Ex(e),p=d===null?"":`:${d}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(po(y,i.config.emulator)&&po(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,_o(c)?(ep(`${l}//${c}${p}`),tp("Auth",!0)):Tx()}function QE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ex(n){const e=QE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Xv(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Xv(c)}}}function Xv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Tx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ai("not implemented")}_getIdTokenResponse(e){return Ai("not implemented")}_linkToIdToken(e,t){return Ai("not implemented")}_getReauthenticationResolver(e){return Ai("not implemented")}}async function Ix(n,e){return Vs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(n,e){return Eh(n,"POST","/v1/accounts:signInWithPassword",Io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",Io(n,e))}async function Rx(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",Io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends Wp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new jl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new jl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jv(e,t,"signInWithPassword",Sx);case"emailLink":return Cx(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jv(e,i,"signUpPassword",Ix);case"emailLink":return Rx(e,{idToken:t,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n,e){return Eh(n,"POST","/v1/accounts:signInWithIdp",Io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="http://localhost";class vo extends Wp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=jp(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new vo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ya(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ya(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ya(e,t)}buildRequest(){const e={requestUri:Ax,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xx(n){const e=yl(vl(n)).link,t=e?yl(vl(e)).deep_link_id:null,i=yl(vl(n)).deep_link_id;return(i?yl(vl(i)).link:null)||i||t||e||n}class qp{constructor(e){var t,i,o,l,c,d;const p=yl(vl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=Px((o=p.mode)!==null&&o!==void 0?o:null);ze(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=xx(e);try{return new qp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(e,t){return jl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=qp.parseLink(t);return ze(i,"argument-error"),jl._fromEmailAndCode(e,i.code,i.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends YE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Jl{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ms.credential(t,i)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Jl{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Jl{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Dr._fromIdTokenResponse(e,i,o),c=Zv(i);return new Ra({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Zv(i);return new Ra({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Zv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends ci{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new qc(e,t,i,o)}}function JE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(n,l,e,i):l})}async function kx(n,e,t=!1){const i=await Ul(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ra._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(n,e,t=!1){const{auth:i}=n;if(fr(i.app))return Promise.reject(Ss(i));const o="reauthenticate";try{const l=await Ul(n,JE(i,o,e,n),t);ze(l.idToken,i,"internal-error");const c=$p(l.idToken);ze(c,i,"internal-error");const{sub:d}=c;return ze(n.uid===d,i,"user-mismatch"),Ra._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Lr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(n,e,t=!1){if(fr(n.app))return Promise.reject(Ss(n));const i="signIn",o=await JE(n,i,e),l=await Ra._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function bx(n,e){return XE(Oa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(n){const e=Oa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Ox(n,e,t){return fr(n.app)?Promise.reject(Ss(n)):bx(sn(n),La.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Dx(n),i})}function Lx(n,e,t,i){return sn(n).onIdTokenChanged(e,t,i)}function Vx(n,e,t){return sn(n).beforeAuthStateChanged(e,t)}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=1e3,Fx=10;class e0 extends ZE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);ix()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Fx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e0.type="LOCAL";const Ux=e0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends ZE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}t0.type="SESSION";const n0=t0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ih(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,l)),p=await jx(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const y=Gp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function Bx(n){si().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function $x(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hx(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Wx(){return r0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firebaseLocalStorageDb",qx=1,Kc="firebaseLocalStorage",s0="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sh(n,e){return n.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function Gx(){const n=indexedDB.deleteDatabase(i0);return new Xl(n).toPromise()}function qf(){const n=indexedDB.open(i0,qx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Kc,{keyPath:s0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Kc)?e(i):(i.close(),await Gx(),e(await qf()))})})}async function e_(n,e,t){const i=Sh(n,!0).put({[s0]:e,value:t});return new Xl(i).toPromise()}async function Kx(n,e){const t=Sh(n,!1).get(e),i=await new Xl(t).toPromise();return i===void 0?null:i.value}function t_(n,e){const t=Sh(n,!0).delete(e);return new Xl(t).toPromise()}const Qx=800,Yx=3;class o0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Yx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(Wx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $x(),!this.activeServiceWorker)return;this.sender=new zx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qf();return await e_(e,Gc,"1"),await t_(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>e_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Kx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>t_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sh(o,!1).getAll();return new Xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o0.type="LOCAL";const Jx=o0;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n,e){return e?Pi(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends Wp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zx(n){return XE(n.auth,new Kp(n),n.bypassAuthState)}function ek(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),Nx(t,new Kp(n),n.bypassAuthState)}async function tk(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),kx(t,new Kp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zx;case"linkViaPopup":case"linkViaRedirect":return tk;case"reauthViaPopup":case"reauthViaRedirect":return ek;default:Lr(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Yl(2e3,1e4);class ca extends a0{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=Gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nk.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="pendingRedirect",Tc=new Map;class ik extends a0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Tc.get(this.auth._key());if(!e){try{const i=await sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Tc.set(this.auth._key(),e)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sk(n,e){const t=lk(e),i=ak(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function ok(n,e){Tc.set(n._key(),e)}function ak(n){return Pi(n._redirectPersistence)}function lk(n){return Ec(rk,n.config.apiKey,n.name)}async function uk(n,e,t=!1){if(fr(n.app))return Promise.reject(Ss(n));const i=Oa(n),o=Xx(i,e),c=await new ik(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=600*1e3;class hk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!l0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ck&&this.cachedEventUids.clear(),this.cachedEventUids.has(n_(e))}saveEventToCache(e){this.cachedEventUids.add(n_(e)),this.lastProcessedEventTime=Date.now()}}function n_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function l0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function dk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(n,e={}){return Vs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mk=/^https?/;async function gk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fk(n);for(const t of e)try{if(yk(t))return}catch{}Lr(n,"unauthorized-domain")}function yk(n){const e=Hf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!mk.test(t))return!1;if(pk.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Yl(3e4,6e4);function r_(){const n=si().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _k(n){return new Promise((e,t)=>{var i,o,l;function c(){r_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r_(),t(ii(n,"network-request-failed"))},timeout:vk.get()})}if(!((o=(i=si().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=si().gapi)===null||l===void 0)&&l.load)c();else{const d=fx("iframefcb");return si()[d]=()=>{gapi.load?c():t(ii(n,"network-request-failed"))},GE(`${dx()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ic=null,e})}let Ic=null;function wk(n){return Ic=Ic||_k(n),Ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Yl(5e3,15e3),Tk="__/auth/iframe",Ik="emulator/auth/iframe",Sk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ck=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rk(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bp(e,Ik):`https://${n.config.authDomain}/${Tk}`,i={apiKey:e.apiKey,appName:n.name,v:xa},o=Ck.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Hl(i).slice(1)}`}async function Ak(n){const e=await wk(n),t=si().gapi;return ze(t,n,"internal-error"),e.open({where:document.body,url:Rk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sk,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=ii(n,"network-request-failed"),d=si().setTimeout(()=>{l(c)},Ek.get());function p(){si().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xk=500,kk=600,Nk="_blank",bk="http://localhost";class i_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dk(n,e,t,i=xk,o=kk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Pk),{width:i.toString(),height:o.toString(),top:l,left:c}),y=In().toLowerCase();t&&(d=jE(y)?Nk:t),FE(y)&&(e=e||bk,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[R,L])=>`${T}${R}=${L},`,"");if(rx(y)&&d!=="_self")return Ok(e||"",d),new i_(null);const E=window.open(e||"",d,_);ze(E,n,"popup-blocked");try{E.focus()}catch{}return new i_(E)}function Ok(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="__/auth/handler",Vk="emulator/auth/handler",Mk=encodeURIComponent("fac");async function s_(n,e,t,i,o,l){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:xa,eventId:o};if(e instanceof YE){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",$S(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Jl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${Mk}=${encodeURIComponent(p)}`:"";return`${Fk(n)}?${Hl(d).slice(1)}${y}`}function Fk({config:n}){return n.emulator?Bp(n,Vk):`https://${n.authDomain}/${Lk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class Uk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n0,this._completeRedirectFn=uk,this._overrideRedirectResult=ok}async _openPopup(e,t,i,o){var l;Vi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await s_(e,t,i,Hf(),o);return Dk(e,c,Gp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await s_(e,t,i,Hf(),o);return Bx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Vi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Ak(e),i=new hk(e);return t.register("authEvent",o=>(ze(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gf,{type:gf},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[gf];c!==void 0&&t(!!c),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WE()||UE()||Hp()}}const jk=Uk;var o_="@firebase/auth",a_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $k(n){mo(new Cs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;ze(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qE(n)},y=new ux(i,o,l,p);return _x(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),mo(new Cs("auth-internal",e=>{const t=Oa(e.getProvider("auth").getImmediate());return(i=>new zk(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(o_,a_,Bk(n)),Zr(o_,a_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=300,Wk=z_("authIdTokenMaxAge")||Hk;let l_=null;const qk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Wk)return;const o=t?.token;l_!==o&&(l_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Gk(n=ip()){const e=eh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vx(n,{popupRedirectResolver:jk,persistence:[Jx,Ux,n0]}),i=z_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=qk(l.toString());Vx(t,c,()=>c(t.currentUser)),Lx(t,d=>c(d))}}const o=F_("auth");return o&&wx(t,`http://${o}`),t}function Kk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cx({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ii("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Kk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$k("Browser");const Qk={apiKey:"AIzaSyBjOeHP4Pst7BYyRF2c85KKMe6lifXOU1M",authDomain:"wwconsole-93f76.firebaseapp.com",projectId:"wwconsole-93f76",storageBucket:"wwconsole-93f76.appspot.com",messagingSenderId:"936183161335",appId:"1:936183161335:web:0762f9ac5837ada128cef2",measurementId:"G-H6R483JTGT"},Ch=H_(Qk),li=ZA(Ch);xE(Ch,"asia-south1");const Yk=Gk(Ch),u0=n=>({...n,isPinned:n.isPinned??n.isPinnedFeatured??!1}),c0=async n=>{const e={title:n.title||"",type:n.type||"Theme",overview:n.overview||"",category:n.category||"",subcategory:n.subcategory||"",tags:n.tags||[],imageUrl:n.imageUrl||"",sources:n.sources||[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},disableDepthToggle:n.disableDepthToggle||!1,isPinned:n.isPinned??n.isPinnedFeatured??!1,isPinnedFeatured:n.isPinnedFeatured??n.isPinned??!1,isCompactCard:n.isCompactCard??!1,pinnedCategory:n.pinnedCategory??"All",keywords:n.keywords||[],status:n.status||"draft",slug:n.slug||(n.title?n.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):""),editorNotes:n.editorNotes||"",createdAt:pa(),updatedAt:pa()};return(await pP(gE(li,"drafts"),e)).id},Qc=async()=>(await hP(gE(li,"drafts"))).docs.map(e=>u0({id:e.id,...e.data()})),ha=async n=>{const e=Li(li,"drafts",n),t=await _h(e);return t.exists()?u0({id:t.id,...t.data()}):null},Zn=async(n,e)=>{const t=Li(li,"drafts",n);await Fp(t,{...e,updatedAt:pa()},{merge:!0})},h0=async n=>{await fP(Li(li,"drafts",n))},u_=async(n,e,t)=>{const i=await ha(n);if(!i)throw new Error("Draft not found");const o=[...i.timeline||[]];o[e]={...o[e],...t},await Zn(n,{timeline:o})},Jk=async(n,e)=>{const t=await ha(n);if(!t)throw new Error("Draft not found");const i=t.timeline.filter((o,l)=>l!==e);await Zn(n,{timeline:i})},d0=async n=>{const e=Li(li,"drafts",n),t=await _h(e);if(!t.exists())throw new Error("Draft not found");const i=t.data(),o=i.slug||i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),l=i.timeline?.flatMap(p=>p.sources||[]).filter(p=>p?.link&&p.link.startsWith("http"))||[],c=i.type==="Story"?"stories":"themes",d=Li(li,c,o);await Fp(d,{...i,sources:l,publishedAt:pa(),createdAt:i.createdAt||pa(),status:"published"}),await dP(e,{status:"published",updatedAt:pa()}),console.log(` Published ${i.type}  /${c}/${o} with ${l.length} sources`)},Xk=async n=>{await d0(n)};function Zk(){const n=Bl(),[e,t]=J.useState([]),[i,o]=J.useState(!0),[l,c]=J.useState(!1),[d,p]=J.useState({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];J.useEffect(()=>{(async()=>{try{const L=(await Qc()).filter(U=>U.type==="Theme");t(L)}catch(L){console.error("Error loading drafts:",L)}finally{o(!1)}})()},[]);const _=R=>{const{name:L,value:U}=R.target;p({...d,[L]:U})},E=async R=>{if(R.preventDefault(),!d.title.trim()||!d.category.trim()){alert("Title and Category are required");return}try{c(!0);const L=await c0({title:d.title,overview:d.overview,category:d.category,subcategory:d.subcategory,tags:[],imageUrl:d.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:d.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Theme"}),U=(await Qc()).filter(H=>H.type==="Theme");t(U),p({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${L}`)}catch(L){console.error("Error creating draft:",L),alert("Failed to create draft")}finally{c(!1)}},T=async R=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await h0(R),t(L=>L.filter(U=>U.id!==R))}catch(L){console.error(L),alert("Failed to delete draft")}};return i?A.jsx("div",{className:"p-6",children:"Loading drafts..."}):A.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[A.jsx("div",{className:"flex justify-between items-center",children:A.jsx("h1",{className:"text-3xl font-bold",children:"Theme Drafts"})}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Theme Draft"}),A.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx("input",{name:"title",placeholder:"Title",value:d.title,onChange:_,className:"border p-2 rounded"}),A.jsxs("select",{name:"category",value:d.category,onChange:_,className:"border p-2 rounded",children:[A.jsx("option",{value:"",children:"Select Category"}),y.map(R=>A.jsx("option",{value:R,children:R},R))]}),A.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Climate Policy, Geopolitical Conflict)",value:d.subcategory,onChange:_,className:"border p-2 rounded"}),A.jsx("input",{name:"date",placeholder:"Date (optional)",value:d.date,onChange:_,className:"border p-2 rounded"}),A.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:d.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),A.jsx("textarea",{name:"overview",placeholder:"Overview",value:d.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),A.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Theme Draft"})]})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Theme Drafts"}),e.length===0?A.jsx("p",{className:"text-gray-500",children:"No theme drafts yet."}):A.jsx("ul",{className:"divide-y",children:e.map(R=>A.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium",children:R.title||"Untitled"}),A.jsxs("p",{className:"text-sm text-gray-500",children:[R.category,"  ",R.subcategory||"","  ",R.status]}),A.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",R.id]})]}),A.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[A.jsx("button",{onClick:()=>n(`/app/drafts/${R.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),A.jsx("button",{onClick:()=>T(R.id),className:"text-red-600 hover:underline",children:"Delete"}),A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(R.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),R.slug&&A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(R.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),A.jsx("button",{onClick:()=>{const L=R.slug||R.id,U=`[${R.title}](@theme/${L})`;navigator.clipboard.writeText(U),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},R.id))})]})]})}function eN(){const n=Bl(),[e,t]=J.useState([]),[i,o]=J.useState(!0),[l,c]=J.useState(!1),[d,p]=J.useState({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];J.useEffect(()=>{(async()=>{try{const L=(await Qc()).filter(U=>U.type==="Story");t(L)}catch(L){console.error("Error loading drafts:",L)}finally{o(!1)}})()},[]);const _=R=>{const{name:L,value:U}=R.target;p({...d,[L]:U})},E=async R=>{if(R.preventDefault(),!d.title.trim()||!d.category.trim()){alert("Title and Category are required");return}try{c(!0);const L=await c0({title:d.title,overview:d.overview,category:d.category,subcategory:d.subcategory,tags:[],imageUrl:d.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:d.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Story"}),U=(await Qc()).filter(H=>H.type==="Story");t(U),p({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${L}`)}catch(L){console.error("Error creating draft:",L),alert("Failed to create draft")}finally{c(!1)}},T=async R=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await h0(R),t(L=>L.filter(U=>U.id!==R))}catch(L){console.error(L),alert("Failed to delete draft")}};return i?A.jsx("div",{className:"p-6",children:"Loading drafts..."}):A.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[A.jsx("div",{className:"flex justify-between items-center",children:A.jsx("h1",{className:"text-3xl font-bold",children:"Story Drafts"})}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Story Draft"}),A.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx("input",{name:"title",placeholder:"Title",value:d.title,onChange:_,className:"border p-2 rounded"}),A.jsxs("select",{name:"category",value:d.category,onChange:_,className:"border p-2 rounded",children:[A.jsx("option",{value:"",children:"Select Category"}),y.map(R=>A.jsx("option",{value:R,children:R},R))]}),A.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Geopolitical Conflict)",value:d.subcategory,onChange:_,className:"border p-2 rounded"}),A.jsx("input",{name:"date",placeholder:"Date (optional)",value:d.date,onChange:_,className:"border p-2 rounded"}),A.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:d.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),A.jsx("textarea",{name:"overview",placeholder:"Overview",value:d.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),A.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Story Draft"})]})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Story Drafts"}),e.length===0?A.jsx("p",{className:"text-gray-500",children:"No story drafts yet."}):A.jsx("ul",{className:"divide-y",children:e.map(R=>A.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium",children:R.title||"Untitled"}),A.jsxs("p",{className:"text-sm text-gray-500",children:[R.category,"  ",R.subcategory||"","  ",R.status]}),A.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",R.id]})]}),A.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[A.jsx("button",{onClick:()=>n(`/app/drafts/${R.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),A.jsx("button",{onClick:()=>T(R.id),className:"text-red-600 hover:underline",children:"Delete"}),A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(R.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),R.slug&&A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(R.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),A.jsx("button",{onClick:()=>{const L=R.slug||R.id,U=`[${R.title}](@story/${L})`;navigator.clipboard.writeText(U),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},R.id))})]})]})}const tN="modulepreload",nN=function(n){return"/"+n},c_={},h_=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let y=function(_){return Promise.all(_.map(E=>Promise.resolve(E).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var c=y;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=y(t.map(_=>{if(_=nN(_),_ in c_)return;c_[_]=!0;const E=_.endsWith(".css"),T=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${T}`))return;const R=document.createElement("link");if(R.rel=E?"stylesheet":tN,E||(R.as="script"),R.crossOrigin="",R.href=_,p&&R.setAttribute("nonce",p),document.head.appendChild(R),E)return new Promise((L,U)=>{R.addEventListener("load",L),R.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},Qp="https://api.openai.com/v1/chat/completions",Yp="gpt-4o-mini";async function Rh(n,e){const t="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",i={model:Yp,messages:[{role:"system",content:`You are a precise news editor.
Always respond ONLY with valid JSON matching this schema:
${e}
Do not include markdown, code fences, or commentary.`},{role:"user",content:n}]},o=await fetch(Qp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!o.ok){const d=await o.text();throw new Error(`API error: ${o.status} ${d}`)}const c=(await o.json()).choices?.[0]?.message?.content?.trim();if(!c)throw new Error("Empty response from model");try{return JSON.parse(c)}catch{throw console.error(" Raw model output:",c),new Error("Invalid JSON returned by model")}}async function f0(n){const e=`
{
  "timeline": [
    { "date": "YYYY-MM-DD", "event": "string", "description": "string",
      "significance": 1|2|3, "imageUrl": null, "sourceLink": null }
  ]
}`,t=`
You are a news editor.
Create a concise chronological timeline of key developments for the topic:
"${n.title}"
Make descriptions factual, data-rich, and written as short bullet summaries.

Context:
${n.overview}

Return 1015 events.
Each must have:
- date (ISO format)
- event
- short description
- significance (1=low,2=medium,3=high)

Return only valid JSON.
`;return(await Rh(t,e)).timeline}async function p0(n){const e=`
{
  "analysis": {
    "stakeholders": [{ "name": "string", "detail": "string" }],
    "faqs": [{ "question": "string", "answer": "string" }],
    "future": [{ "question": "string", "answer": "string" }]
  }
}`,t=`
You are a political analyst creating structured insights for the theme "${n.title}".

Context:
${n.overview}

Return three sections:
1. stakeholders  list of key people/institutions and their roles.
2. faqs  common reader questions with concise factual answers.
3. future  forward-looking questions with short, reasoned answers.

Keep all answers under 50 words.
Return only valid JSON.
`;return(await Rh(t,e)).analysis}async function rN(n){const e="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",t=`
You are a clear and factual news editor.
From the following overview, identify up to 8 important or complex terms that a reader might not immediately understand.

Return JSON only:
[
  { "term": "term or phrase", "explainer": "short, clear, factual, under 25 words" }
]

Overview:
${n}
`,l=(await(await fetch(Qp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:Yp,messages:[{role:"user",content:t}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT overview context output:",l);try{return JSON.parse(l)}catch{return console.warn(" GPT Context JSON parse error:",l),[]}}async function iN(n){const e="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",t=n.contexts?.map(d=>d.term).filter(Boolean);if(!t?.length)return[];const i=`
You are a concise factual explainer.
For the given event, write a short (under 25 words) neutral definition for each listed term.

Event title: ${n.event}
Event description: ${n.description}

Terms to explain:
${t.map(d=>`- ${d}`).join(`
`)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`,c=(await(await fetch(Qp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:Yp,messages:[{role:"user",content:i}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT event explainer output:",c);try{return JSON.parse(c).filter(p=>p.term&&p.explainer)}catch{return console.warn(" Invalid JSON for event explainer:",c),[]}}async function m0(n){const e=`
You are a concise factual news explainer.
Given the event below, identify key proper nouns, organizations, or technical terms a general reader may not know.
For each, write a short (under 20 words) neutral explanation.

Event Title: ${n.event}
Event Description: ${n.description}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await Rh(e,'[{"term": "string", "explainer": "string"}]')}async function g0(n,e){const t=`
You are a concise factual explainer for a news analysis section.
Section: ${n}

For each entry below, suggest short (under 20 words) neutral explainers for key names or entities readers may not know.

Entries:
${JSON.stringify(e,null,2)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await Rh(t,'[{"term": "string", "explainer": "string"}]')}const d_=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:p0,generateContexts:rN,generateContextsForAnalysis:g0,generateContextsForTimelineEvent:m0,generateExplainersForEvent:iN,generateTimeline:f0},Symbol.toStringTag,{value:"Module"}));async function sN({title:n,event:e,description:t}){try{const i=Li(li,"settings","global"),o=await _h(i),l=o.exists()&&o.data()?.serper?.prompt||"title";if(l.trim().toLowerCase()==="title")return n||e||t||"";let c=l;return c=c.replace(/{{\s*title\s*}}/gi,n||"").replace(/{{\s*event\s*}}/gi,e||"").replace(/{{\s*description\s*}}/gi,t||""),c.trim()||n||e||t||""}catch(i){return console.error(" Error building Serper query:",i),n||e||t||""}}async function oN(n,e,t){const i=xE(Ch,"asia-south1"),o=VP(i,"fetchEventCoverage");try{const l=await sN({title:n,event:n,description:e});return console.log(" Serper query:",l),(await o({title:l,description:e,date:t})).data}catch(l){throw console.error(" Error calling fetchEventCoverage:",l),new Error(l.message||"Failed to fetch event coverage")}}function f_(n){if(!n)return A.jsx("span",{children:n});const e=n.replace(/\]\(@\[([^\]]+)\]\(@(story|theme)\/([A-Za-z0-9_-]+)\)\)/g,"](@$2/$3)"),t=/\[([^\]]+)\]\((@(?:story|theme)\/[A-Za-z0-9_-]+|https?:\/\/[^\s)]+)\)/g,i=[];let o=0,l;for(;(l=t.exec(e))!==null;){const[c,d,p]=l,y=e.slice(o,l.index);y&&i.push({type:"text",value:y}),i.push({type:"link",label:d,target:p}),o=l.index+c.length}return o<e.length&&i.push({type:"text",value:e.slice(o)}),A.jsx("span",{style:{display:"inline",flexWrap:"wrap",lineHeight:"1.6"},children:i.map((c,d)=>{if(c.type==="text")return A.jsx("span",{children:c.value},d);const{label:p,target:y}=c,_=y.startsWith("@story/")||y.startsWith("@theme/"),E=y.startsWith("@theme/"),T=_?y.split("/")[1]:"";return _?A.jsx(O_,{to:`/${E?"themes":"stories"}/${T}`,style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},d):A.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},d)})})}async function aN(n){const e="dpjnkc0dq",t="waitwhat_unsigned",i=new FormData;return i.append("file",n),i.append("upload_preset",t),(await(await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i})).json()).secure_url}function lN(){const{id:n}=bI(),e=Bl(),[t,i]=J.useState(null),[o,l]=J.useState(!0),[c,d]=J.useState(!1),[p,y]=J.useState(!1),[_,E]=J.useState(!1),[T,R]=J.useState({}),[L,U]=J.useState([]),[H,fe]=J.useState(!1),[Z,ce]=J.useState(null),[pe,Ue]=J.useState(!0),[Fe,S]=J.useState(!0),[C,P]=J.useState(!1),[N,O]=J.useState(!1),[M,k]=J.useState({date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:""}),Ke=z=>({...z,timeline:z.timeline||[],phases:z.phases||[],isPinned:z.isPinned??z.isPinnedFeatured??!1}),lt=(z,Q)=>{if(!Q)return;const q=Q.selectionStart??0,re=Q.selectionEnd??0;R(ue=>({...ue,[z]:{start:q,end:re}}))},vt=(z,Q,q)=>{let re=prompt("Enter linked story/theme ID (e.g. story/abc123 or theme/xyz456):");if(!re||(re=re.replace(/^@+/,"").replace(/\[|\]|\(|\)/g,"").trim(),!re))return;const ue=T[z];if(!ue||ue.start===ue.end){alert("Select text in the field first, then click Link.");return}const _e=Q||"",{start:ye,end:be}=ue,dt=_e.substring(ye,be);if(!dt){alert("Selection is empty.");return}const Et=`[${dt}](@${re})`,Mt=_e.substring(0,ye)+Et+_e.substring(be);q(Mt),E(!0)};J.useEffect(()=>{(async()=>{try{if(!n)return;const Q=await ha(n);i(Q?Ke(Q):null)}catch(Q){console.error(Q),alert("Failed to load draft.")}finally{l(!1)}})()},[n]),J.useEffect(()=>{const z=Q=>{_&&(Q.preventDefault(),Q.returnValue="")};return window.addEventListener("beforeunload",z),()=>window.removeEventListener("beforeunload",z)},[_]);const Qe=z=>{if(!t)return;const{name:Q,value:q}=z.target;i({...t,[Q]:q})},oe=async()=>{const z=prompt("Paste Midjourney Image URL:");if(z)try{const Q=await aN(z);i(q=>q&&{...q,imageUrl:Q}),E(!0),alert(" Uploaded to Cloudinary!")}catch(Q){console.error(Q),alert(" Failed to upload image.")}},ke=async()=>{if(!(!t||!n))try{d(!0),await Zn(n,t),E(!1),alert(" Metadata saved")}catch(z){console.error(z),alert(" Failed to save metadata")}finally{d(!1)}},ge=async()=>{if(!(!n||!t)){y(!0);try{await Zn(n,{phases:t.phases||[]}),t.type==="Story"?(await Xk(n),alert(" Story published successfully!")):(await d0(n),alert(" Theme published successfully!"))}catch(z){console.error(z),alert(" Publish failed: "+z.message)}finally{y(!1)}}},j=async()=>{if(!(!t||!n)){P(!0);try{const z=await f0(t);await Zn(n,{timeline:z});const Q=await ha(n);i(Q?Ke(Q):null),alert(" Timeline generated successfully!")}catch(z){console.error(z),alert(" Failed to generate timeline: "+z.message)}finally{P(!1)}}},X=async()=>{if(!(!t||!n)){O(!0);try{const z=await p0(t);await Zn(n,{analysis:z});const Q=await ha(n);i(Q?Ke(Q):null),alert(" Analysis generated successfully!")}catch(z){console.error(z),alert(" Failed to generate analysis: "+z.message)}finally{O(!1)}}},me=async(z,Q,q)=>{if(!n||!t)return;const re=[...t.timeline];re[z]={...re[z],[Q]:q},i({...t,timeline:re}),E(!0)},$e=async z=>{if(!n||!window.confirm("Delete this event?"))return;await Jk(n,z);const Q=await ha(n);if(!Q)return;const q=(Q.phases||[]).filter(re=>re.startIndex!==z).map(re=>{const ue=re.startIndex>z?re.startIndex-1:re.startIndex;let _e=typeof re.endIndex=="number"?re.endIndex>z?re.endIndex-1:re.endIndex:void 0;return typeof _e=="number"&&_e<ue&&(_e=ue),{...re,startIndex:ue,endIndex:_e}});Q.phases=q,i(Ke(Q)),E(!0)},Oe=async(z,Q)=>{if(!n||!t)return;const q=Q.event?.trim();if(!q){alert("Please add an event title before fetching coverage.");return}const re=Q.description??"";try{console.log(" Fetching Serper coverage for:",q);const ue=await oN(q,re,Q.date||"");if(ue.sources?.length){const _e=ue.sources.map(dt=>({...dt,imageUrl:dt.imageUrl??null})),ye={...t.timeline[z],sources:_e,imageUrl:_e[0]?.imageUrl||t.timeline[z].imageUrl};await u_(n,z,ye);const be=[...t.timeline];i({...t,timeline:be}),alert(` Found ${ue.sources.length} sources for "${Q.event}"`)}else alert(" No relevant sources found for this event");console.log(" Sources:",ue.sources)}catch(ue){console.error(" Error fetching coverage:",ue),alert(" Failed to fetch coverage: "+ue.message)}};return o?A.jsx("div",{className:"p-6",children:"Loading..."}):t?A.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h1",{className:"text-3xl font-bold",children:"Edit Draft"}),_&&A.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" You have unsaved changes"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 hover:underline",children:" Back"}),A.jsx("button",{onClick:ge,disabled:p,className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 disabled:opacity-50",children:p?"Publishing":t?.type==="Story"?" Publish Story":" Publish Theme"})]})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metadata"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx("input",{name:"title",value:t.title,onChange:Qe,placeholder:"Title",className:"border p-2 rounded"}),A.jsx("input",{name:"category",value:t.category,onChange:Qe,placeholder:"Category (e.g. Politics, Economy)",className:"border p-2 rounded"}),A.jsx("input",{name:"subcategory",value:t.subcategory,onChange:Qe,placeholder:"Subcategory (e.g. Geopolitical Conflict)",className:"border p-2 rounded"}),A.jsx("input",{name:"imageUrl",value:t.imageUrl||"",onChange:Qe,placeholder:"Main Thumbnail / Cover Image URL",className:"border p-2 rounded md:col-span-2"}),A.jsx("button",{type:"button",onClick:oe,className:"px-3 py-2 bg-purple-600 text-white rounded md:col-span-2 hover:bg-purple-700",children:" Upload Image from Midjourney Link"}),"np",t.imageUrl&&A.jsxs("div",{className:"md:col-span-2 flex justify-start items-center gap-4",children:[A.jsx("img",{src:t.imageUrl,alt:"Cover",className:"w-48 h-32 object-cover rounded border",onError:z=>{const Q=t.imageUrl??"";try{if(Q.startsWith("http")){const q=new URL(Q).origin;z.currentTarget.src=`${q}/favicon.ico`}else z.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}catch{z.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}}}),A.jsx("p",{className:"text-gray-600 text-sm",children:"Preview of your main thumbnail"})]}),A.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 mt-2",children:[A.jsx("input",{type:"checkbox",id:"isPinned",checked:t.isPinned||!1,onChange:async z=>{const Q=z.target.checked;if(i({...t,isPinned:Q}),n)try{await Zn(n,{isPinned:Q,isPinnedFeatured:Q})}catch(q){console.error(" Failed to update isPinned:",q)}},className:"w-4 h-4"}),A.jsx("label",{htmlFor:"isPinned",className:"text-sm text-gray-800",children:"Pin as Featured"}),t.isPinned&&A.jsxs("select",{value:t.pinnedCategory||"All",onChange:async z=>{const Q=z.target.value;if(i({...t,pinnedCategory:Q}),n)try{await Zn(n,{pinnedCategory:Q})}catch(q){console.error(" Failed to update pinnedCategory:",q)}},className:"border p-1 rounded text-sm",children:[A.jsx("option",{value:"All",children:"All Categories"}),A.jsx("option",{value:t.category,children:t.category})]})]}),A.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[A.jsx("input",{type:"checkbox",id:"isCompactCard",checked:t.isCompactCard||!1,onChange:async z=>{const Q=z.target.checked;if(i({...t,isCompactCard:Q}),n)try{await Zn(n,{isCompactCard:Q})}catch(q){console.error(" Failed to update isCompactCard:",q)}},className:"w-4 h-4 mt-1"}),A.jsxs("label",{htmlFor:"isCompactCard",className:"text-sm text-gray-800",children:["Render as compact card",A.jsx("span",{className:"block text-gray-500 text-xs",children:"Home/Stories/Themes screens on WWFinal will show only the title and a small thumbnail when enabled."})]})]}),A.jsx("textarea",{name:"overview",value:t.overview||"",onChange:Qe,onSelect:z=>lt("overview",z.target),placeholder:"Overview",rows:3,className:"border p-2 rounded md:col-span-2"}),A.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 text-xs text-blue-600 mt-1",children:[A.jsx("button",{type:"button",onClick:()=>vt("overview",t.overview||"",z=>i({...t,overview:z})),className:"text-blue-600 hover:underline",children:" Link selected text"}),A.jsx("span",{className:"text-gray-500",children:"Select text in the overview box, then click to link another story/theme."})]}),A.jsx("div",{className:"md:col-span-2 text-sm text-gray-600",children:f_(t.overview||"")})]}),A.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[A.jsx("input",{type:"checkbox",id:"disableDepthToggle",checked:t.disableDepthToggle||!1,onChange:async z=>{const Q=z.target.checked;if(i({...t,disableDepthToggle:Q}),n)try{await Zn(n,{disableDepthToggle:Q}),console.log(" disableDepthToggle updated to:",Q)}catch(q){console.error(" Failed to update disableDepthToggle:",q),alert(" Failed to update disableDepthToggle.")}},className:"w-4 h-4"}),A.jsx("label",{htmlFor:"disableDepthToggle",className:"text-sm text-gray-700",children:"Disable Depth Toggle in App"})]}),A.jsxs("div",{className:"mt-6",children:[A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Context Explainers (Overview)"}),A.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add terms that will be highlighted in the overview for reader context."}),(t.contexts||[]).map((z,Q)=>A.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[A.jsx("input",{type:"text",value:z.term,onChange:q=>{const re=[...t.contexts||[]];re[Q].term=q.target.value,i({...t,contexts:re})},placeholder:"Term",className:"border p-2 rounded flex-1"}),A.jsx("input",{type:"text",value:z.explainer,onChange:q=>{const re=[...t.contexts||[]];re[Q].explainer=q.target.value,i({...t,contexts:re})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),A.jsx("button",{onClick:()=>{const q=(t.contexts||[]).filter((re,ue)=>ue!==Q);i({...t,contexts:q})},className:"text-red-500 text-sm hover:underline",children:""})]},Q)),A.jsx("button",{onClick:()=>i({...t,contexts:[...t.contexts||[],{term:"",explainer:""}]}),className:"text-blue-600 text-sm hover:underline",children:" Add new context term"})]}),A.jsx("button",{onClick:async()=>{if(!t.overview){alert("Please write an overview first!");return}try{if(!window.confirm("Use GPT to suggest contextual explainers?"))return;d(!0);const{generateContexts:Q}=await h_(async()=>{const{generateContexts:ue}=await Promise.resolve().then(()=>d_);return{generateContexts:ue}},void 0),q=await Q(t.overview);if(!q||q.length===0){alert("No terms found.");return}const re=[...t.contexts||[],...q];i({...t,contexts:re}),alert(` Added ${q.length} suggested context terms.`)}catch(z){console.error(" GPT error:",z),alert("Failed to fetch GPT suggestions. Check console.")}finally{d(!1)}},className:"text-purple-600 text-sm hover:underline mt-2",children:" Suggest Contexts with GPT"}),A.jsx("button",{onClick:ke,disabled:c,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:c?"Saving...":"Save Metadata"})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"Chronology of Events"}),A.jsxs("div",{className:"flex gap-3 items-center",children:[A.jsx("button",{onClick:j,disabled:C,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:C?"Generating":" Generate Timeline"}),A.jsx("button",{onClick:async()=>{const z={date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:"",sources:[]},Q=[...t.timeline||[],z];if(i({...t,timeline:Q}),n)try{await Zn(n,{timeline:Q}),console.log(" New event added and saved to Firestore.")}catch(q){console.error(" Failed to save new event:",q),alert(" Failed to save new event.")}},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:" Add Event"}),A.jsx("button",{onClick:async()=>{if(!(!n||!t))try{d(!0),await Zn(n,{timeline:t.timeline,phases:t.phases||[]}),E(!1),alert(" Timeline saved successfully!")}catch(z){console.error(" Timeline save failed:",z),alert(" Failed to save timeline.")}finally{d(!1)}},className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" Save Timeline"}),A.jsx("button",{onClick:()=>Ue(!pe),className:"text-sm text-blue-600 hover:underline",children:pe?"Hide":"Show"})]})]}),pe&&A.jsx(A.Fragment,{children:t.timeline.length===0?A.jsx("p",{className:"text-gray-500 mb-3",children:"No events yet."}):A.jsx("div",{className:"space-y-4 mb-4",children:t.timeline.map((z,Q)=>A.jsxs("div",{className:"mb-6",children:[A.jsx("button",{className:"text-purple-600 text-xs hover:underline mb-2",onClick:()=>{const q={title:"New Phase",startIndex:Q,endIndex:Q},re=[...t.phases||[],q];i({...t,phases:re}),E(!0)},children:" Insert Phase Here"}),(t.phases||[]).filter(q=>q.startIndex===Q).map(q=>{const re=(t.phases||[]).indexOf(q),ue=t.timeline.length,_e=Math.max(q.startIndex,ue>0?ue-1:q.startIndex),ye=Math.min(Math.max(q.startIndex,q.endIndex??q.startIndex),_e),be=t.timeline[q.startIndex]?.event||`Event ${q.startIndex+1}`;return A.jsxs("div",{className:"border border-purple-300 bg-purple-50 p-3 rounded mb-3",children:[A.jsx("input",{value:q.title||"",onChange:dt=>{const Et=[...t.phases||[]];Et[re]={...q,title:dt.target.value},i({...t,phases:Et}),E(!0)},className:"border p-2 rounded w-full",placeholder:"Phase title"}),A.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Starts at event #",q.startIndex+1,": ",be]}),A.jsxs("label",{className:"text-xs text-gray-600 mt-2 block",children:["End this phase after event",A.jsx("select",{className:"border p-2 rounded w-full mt-1 text-sm",value:ye,onChange:dt=>{const Et=Number(dt.target.value),Mt=Math.max(q.startIndex,Et),Vr=[...t.phases||[]];Vr[re]={...q,endIndex:Mt},i({...t,phases:Vr}),E(!0)},children:t.timeline.map((dt,Et)=>A.jsxs("option",{value:Et,disabled:Et<q.startIndex,children:["#",Et+1,"  ",dt.event||`Event ${Et+1}`]},`phase-${re}-end-${Et}`))})]}),A.jsx("button",{className:"text-red-600 text-xs mt-1 hover:underline",onClick:()=>{const dt=(t.phases||[]).filter((Et,Mt)=>Mt!==re);i({...t,phases:dt}),E(!0)},children:" Remove Phase"})]},`phase-${re}`)}),A.jsxs("div",{className:"border p-3 rounded",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[A.jsx("input",{value:z.date||"",onChange:q=>me(Q,"date",q.target.value),placeholder:"Date",className:"border p-2 rounded"}),A.jsx("input",{value:z.event,onChange:q=>me(Q,"event",q.target.value),placeholder:"Event",className:"border p-2 rounded"}),A.jsx("input",{value:z.imageUrl||"",onChange:q=>me(Q,"imageUrl",q.target.value),placeholder:"Image URL",className:"border p-2 rounded"}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sources"}),(z.sources||[]).map((q,re)=>A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("input",{value:q.link,onChange:ue=>{const _e=[...z.sources||[]];_e[re].link=ue.target.value,me(Q,"sources",_e)},placeholder:`Source link #${re+1}`,className:"border p-2 rounded w-full"}),A.jsx("button",{onClick:()=>{const ue=(z.sources||[]).filter((_e,ye)=>ye!==re);me(Q,"sources",ue)},className:"text-red-600 text-sm hover:underline",children:""})]},re)),A.jsx("button",{onClick:()=>{const q=[...z.sources||[],{title:"",link:"",sourceName:""}];me(Q,"sources",q)},className:"text-blue-600 text-sm hover:underline",children:" Add another link"})]})]}),A.jsx("textarea",{value:z.description||"",onChange:q=>{me(Q,"description",q.target.value)},onSelect:q=>lt(`timeline-${Q}`,q.target),placeholder:"Description",rows:2,className:"border p-2 rounded w-full mb-2"}),A.jsx("button",{onClick:()=>vt(`timeline-${Q}`,z.description||"",q=>{const re=[...t.timeline];re[Q]={...z,description:q},i({...t,timeline:re})}),className:"text-blue-600 text-xs hover:underline mb-2",children:" Link selected text"}),A.jsx("div",{className:"text-sm text-gray-700 mt-2",children:f_(z.description??"")}),A.jsxs("div",{className:"mt-2",children:[A.jsx("h4",{className:"text-sm font-medium mb-1",children:"Context Explainers"}),(z.contexts||[]).map((q,re)=>A.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[A.jsx("input",{type:"text",value:q.term,onChange:ue=>{const _e=[...z.contexts||[]];_e[re].term=ue.target.value,me(Q,"contexts",_e)},placeholder:"Term",className:"border p-1 rounded flex-1"}),A.jsx("input",{type:"text",value:q.explainer,onChange:ue=>{const _e=[...z.contexts||[]];_e[re].explainer=ue.target.value,me(Q,"contexts",_e)},placeholder:"Explainer",className:"border p-1 rounded flex-[2]"}),A.jsx("button",{onClick:()=>{const ue=(z.contexts||[]).filter((_e,ye)=>ye!==re);me(Q,"contexts",ue)},className:"text-red-600 text-xs hover:underline",children:""})]},re)),A.jsx("button",{onClick:()=>{const q=[...z.contexts||[],{term:"",explainer:""}];me(Q,"contexts",q)},className:"text-blue-600 text-xs hover:underline",children:" Add term"})]}),A.jsx("button",{onClick:async()=>{try{d(!0);const q=await m0(z);if(!q?.length){alert("No contextual terms found for this event.");return}const re=[...z.contexts||[],...q];me(Q,"contexts",re),alert(` Added ${q.length} contextual explainers for this event.`)}catch(q){console.error("GPT error (event contexts):",q),alert(" Failed to generate contexts for this event.")}finally{d(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),A.jsx("button",{onClick:async()=>{const q=z.event?.trim(),re=z.description?.trim();if(!q||!re){alert("Please add an event title and description first.");return}const ue={event:q,description:re,contexts:z.contexts||[]};if(!ue.contexts.length){alert("Please add at least one term first.");return}try{d(!0);const{generateExplainersForEvent:_e}=await h_(async()=>{const{generateExplainersForEvent:dt}=await Promise.resolve().then(()=>d_);return{generateExplainersForEvent:dt}},void 0),ye=await _e(ue);if(!ye.length){alert("No explainers returned.");return}const be=(ue.contexts||[]).map(dt=>{const Et=ye.find(Mt=>Mt.term.toLowerCase()===dt.term.toLowerCase());return Et?{...dt,explainer:Et.explainer}:dt});me(Q,"contexts",be),alert(` Added ${ye.length} explainers.`)}catch(_e){console.error("GPT error:",_e),alert("Failed to generate explainers for this event.")}finally{d(!1)}},className:"text-purple-600 text-xs hover:underline mt-2 block",children:" Generate Explainers for this Event"}),A.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Importance"}),A.jsxs("select",{value:z.significance,onChange:q=>me(Q,"significance",Number(q.target.value)),className:"border p-2 rounded mb-2",children:[A.jsx("option",{value:1,children:"Low"}),A.jsx("option",{value:2,children:"Medium"}),A.jsx("option",{value:3,children:"High"})]}),A.jsxs("div",{className:"flex gap-4 items-center mt-2",children:[A.jsx("button",{onClick:()=>$e(Q),className:"text-red-600 text-sm hover:underline",children:"Delete"}),A.jsx("button",{onClick:()=>Oe(Q,z),className:"text-blue-600 text-sm hover:underline",children:" Fetch Top Sources"}),A.jsx("button",{onClick:async()=>{if(n)try{d(!0),await u_(n,Q,t.timeline[Q]),E(!1),alert(" Event saved!")}catch(q){console.error(q),alert(" Failed to save event.")}finally{d(!1)}},className:"text-green-600 text-sm hover:underline",children:" Save Event"})]}),z.sources&&z.sources.length>0&&A.jsxs("div",{className:"mt-3 border-t pt-2",children:[A.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Top Sources:"}),A.jsx("div",{className:"space-y-2",children:z.sources.map((q,re)=>A.jsxs("div",{className:"flex items-center space-x-3 border p-2 rounded-md hover:bg-gray-50",children:[q.imageUrl&&A.jsx("img",{src:q.imageUrl,alt:q.title,className:"w-10 h-10 object-cover rounded",onError:ue=>{ue.currentTarget.src=`${new URL(q.link).origin}/favicon.ico`}}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("a",{href:q.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium hover:underline",children:q.title}),A.jsx("span",{className:"text-gray-500 text-xs",children:q.sourceName})]})]},re))})]})]})]},Q))})})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"Analysis"}),A.jsx("button",{onClick:X,disabled:N,className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:N?"Generating":" Generate Analysis"})]}),Fe&&A.jsx("div",{className:"space-y-4",children:["stakeholders","faqs","future"].map(z=>{const Q=t.analysis,q=Q?.[z]||[],re={stakeholders:"Stakeholders",faqs:"FAQs",future:"Future Questions"};return A.jsxs("details",{className:"border rounded-lg p-3 group",children:[A.jsxs("summary",{className:"cursor-pointer font-semibold text-blue-700 select-none flex justify-between items-center",children:[re[z],A.jsx("span",{className:"text-gray-500 group-open:rotate-90 transition-transform",children:""})]}),A.jsxs("div",{className:"mt-2 space-y-3",children:[A.jsxs("button",{onClick:()=>{const ue={...t},_e=Q?.[z]||[],ye=z==="stakeholders"?{name:"",detail:""}:{question:"",answer:""};ue.analysis={...Q,[z]:[..._e,ye]},i(ue)},className:"text-sm text-green-700 hover:underline",children:[" Add ",re[z].slice(0,-1)]}),A.jsx("button",{onClick:async()=>{const ue=t.analysis?.[z]||[];if(!ue.length){alert("No items to analyze yet.");return}try{d(!0);const _e=await g0(z,ue);if(!_e?.length){alert("No contextual terms found.");return}const ye={...t.analysis||{}},be=[...ye.contexts||[],..._e];ye.contexts=be,i({...t,analysis:ye}),alert(` Added ${_e.length} contextual explainers from ${z}.`)}catch(_e){console.error("GPT error (analysis contexts):",_e),alert(" Failed to generate analysis contexts.")}finally{d(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),q.length===0?A.jsxs("p",{className:"text-sm text-gray-500",children:["No ",re[z]," yet."]}):A.jsx("ul",{className:"space-y-2",children:q.map((ue,_e)=>A.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border text-sm space-y-2",children:[z==="stakeholders"?A.jsxs(A.Fragment,{children:[A.jsx("input",{type:"text",value:ue.name,onChange:ye=>{const be={...t};be.analysis[z][_e].name=ye.target.value,i(be)},onSelect:ye=>lt(`stakeholder-name-${_e}`,ye.target),placeholder:"Name",className:"w-full border p-1 rounded"}),A.jsx("button",{type:"button",onClick:()=>vt(`stakeholder-name-${_e}`,ue.name||"",ye=>{const be={...t};be.analysis[z][_e].name=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),A.jsx("textarea",{value:ue.detail,onChange:ye=>{const be={...t};be.analysis[z][_e].detail=ye.target.value,i(be)},onSelect:ye=>lt(`stakeholder-detail-${_e}`,ye.target),placeholder:"Detail",className:"w-full border p-1 rounded"}),A.jsx("button",{type:"button",onClick:()=>vt(`stakeholder-detail-${_e}`,ue.detail||"",ye=>{const be={...t};be.analysis[z][_e].detail=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}):A.jsxs(A.Fragment,{children:[A.jsx("input",{type:"text",value:ue.question,onChange:ye=>{const be={...t};be.analysis[z][_e].question=ye.target.value,i(be)},onSelect:ye=>lt(`${z}-question-${_e}`,ye.target),placeholder:"Question",className:"w-full border p-1 rounded"}),A.jsx("button",{type:"button",onClick:()=>vt(`${z}-question-${_e}`,ue.question||"",ye=>{const be={...t};be.analysis[z][_e].question=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),A.jsx("textarea",{value:ue.answer,onChange:ye=>{const be={...t};be.analysis[z][_e].answer=ye.target.value,i(be)},onSelect:ye=>lt(`${z}-answer-${_e}`,ye.target),placeholder:"Answer",className:"w-full border p-1 rounded"}),A.jsx("button",{type:"button",onClick:()=>vt(`${z}-answer-${_e}`,ue.answer||"",ye=>{const be={...t};be.analysis[z][_e].answer=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}),A.jsx("button",{onClick:()=>{const ye={...t},be=[...Q?.[z]||[]];be.splice(_e,1),ye.analysis={...Q,[z]:be},i(ye)},className:"text-xs text-red-600 hover:underline",children:"Delete"})]},_e))})]})]},z)})}),A.jsxs("div",{className:"mt-6 border-t pt-4",children:[A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analysis Context Explainers"}),A.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"These terms will be highlighted within Stakeholders, FAQs, and Future sections."}),(t.analysis?.contexts||[]).map((z,Q)=>A.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[A.jsx("input",{type:"text",value:z.term,onChange:q=>{const re={...t.analysis||{}},ue=[...re.contexts||[]];ue[Q]={...ue[Q],term:q.target.value},re.contexts=ue,i({...t,analysis:re})},placeholder:"Term",className:"border p-2 rounded flex-1"}),A.jsx("input",{type:"text",value:z.explainer,onChange:q=>{const re={...t.analysis||{}},ue=[...re.contexts||[]];ue[Q]={...ue[Q],explainer:q.target.value},re.contexts=ue,i({...t,analysis:re})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),A.jsx("button",{type:"button",onClick:()=>{const q={...t.analysis||{}},re=(q.contexts||[]).filter((ue,_e)=>_e!==Q);q.contexts=re,i({...t,analysis:q})},className:"text-red-600 text-sm hover:underline",children:""})]},Q)),A.jsx("button",{type:"button",onClick:()=>{const z={...t.analysis||{}};z.contexts=[...z.contexts||[],{term:"",explainer:""}],i({...t,analysis:z})},className:"text-blue-600 text-sm hover:underline",children:" Add analysis context term"})]}),A.jsx("button",{onClick:async()=>{if(n)try{await Zn(n,{analysis:t.analysis}),E(!1),alert(" Analysis saved successfully!")}catch(z){console.error(z),alert(" Failed to save analysis: "+z.message)}},className:"mt-4 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:" Save Analysis"})]})]}):A.jsx("div",{className:"p-6 text-red-500",children:"Draft not found"})}function uN(){const[n,e]=J.useState({gpt:{timelinePrompt:`You are a precise news editor. 
Given a topic, generate a concise chronological timeline of 1015 key events.
Each event must include:
- date (YYYY-MM-DD)
- short event title
- 12 sentence factual description
- significance (1=low, 2=medium, 3=high)
Return only valid JSON with key "timeline".`,analysisPrompt:`You are a political analyst creating structured insights.
Given a topic and overview, produce three sections:
1. stakeholders  list key people/institutions and their roles.
2. faqs  questions readers might have with concise answers.
3. future  forward-looking questions with reasoned answers.
Keep all responses factual, under 50 words each. Return valid JSON with key "analysis".`},serper:{prompt:"title"}}),[t,i]=J.useState(!0),[o,l]=J.useState(!1);J.useEffect(()=>{(async()=>{try{const d=Li(li,"settings","global"),p=await _h(d);if(p.exists()){const y=p.data();e({gpt:{timelinePrompt:y?.gpt?.timelinePrompt||n.gpt.timelinePrompt,analysisPrompt:y?.gpt?.analysisPrompt||n.gpt.analysisPrompt},serper:{prompt:y?.serper?.prompt||n.serper.prompt}})}}catch(d){console.error(" Failed to load prompts:",d)}finally{i(!1)}})()},[]);const c=async()=>{try{l(!0);const d=Li(li,"settings","global");await Fp(d,n,{merge:!0}),alert(" Prompts saved successfully!")}catch(d){console.error(d),alert(" Failed to save prompts")}finally{l(!1)}};return t?A.jsx("div",{className:"p-6",children:"Loading..."}):A.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[A.jsx("h1",{className:"text-3xl font-bold",children:" Prompt Editor"}),A.jsx("p",{className:"text-gray-600 mb-4",children:"Edit the default text templates used by GPT and Serper for content generation."}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Timeline Prompt"}),A.jsx("textarea",{value:n.gpt.timelinePrompt,onChange:d=>e({...n,gpt:{...n.gpt,timelinePrompt:d.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Analysis Prompt"}),A.jsx("textarea",{value:n.gpt.analysisPrompt,onChange:d=>e({...n,gpt:{...n.gpt,analysisPrompt:d.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[A.jsx("h2",{className:"text-xl font-semibold",children:"Serper  Search Prompt"}),A.jsxs("p",{className:"text-sm text-gray-600",children:["This text defines what query is sent to Serper for event coverage. If left as ",A.jsx("code",{children:"title"}),", the drafts event title will be used by default."]}),A.jsx("textarea",{value:n.serper.prompt,onChange:d=>e({...n,serper:{prompt:d.target.value}}),className:"w-full border rounded p-3 h-24 text-sm",placeholder:"Example: Find recent, credible articles about {{topic}}."})]}),A.jsx("button",{onClick:c,disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:o?"Saving":" Save All Prompts"})]})}function cN(){const[n,e]=J.useState(""),[t,i]=J.useState(""),o=async()=>{try{await Ox(Yk,n,t),window.location.href="/app"}catch(l){alert(l.message)}};return A.jsxs("div",{className:"p-8 max-w-md mx-auto",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"CMS Login"}),A.jsx("input",{placeholder:"Email",value:n,onChange:l=>e(l.target.value),className:"border p-2 mb-2 w-full"}),A.jsx("input",{placeholder:"Password",type:"password",value:t,onChange:l=>i(l.target.value),className:"border p-2 mb-4 w-full"}),A.jsx("button",{onClick:o,className:"bg-blue-600 text-white p-2 rounded",children:"Login"})]})}const hN=tS([{path:"/login",element:A.jsx(cN,{})},{path:"/app",element:A.jsx(vS,{}),children:[{index:!0,element:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold",children:"Welcome to WaitWhat? CMS"}),A.jsx("p",{className:"text-gray-600 mt-2",children:"Use the sidebar to manage Theme and Story drafts, or adjust prompts in the Prompt Lab."})]})},{path:"drafts/themes",element:A.jsx(Zk,{})},{path:"drafts/stories",element:A.jsx(eN,{})},{path:"drafts/:id",element:A.jsx(lN,{})},{path:"promptlab",element:A.jsx(uN,{})}]},{path:"*",element:A.jsx(qI,{to:"/login",replace:!0})}]);xT.createRoot(document.getElementById("root")).render(A.jsx(m_.StrictMode,{children:A.jsx(uS,{router:hN})}));
