function S_(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Xf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ef={exports:{}},pl={},tf={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function kT(){if(cy)return tt;cy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,j={};function H(z,Z,Ce){this.props=z,this.context=Z,this.refs=j,this.updater=Ce||P}H.prototype.isReactComponent={},H.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},H.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function pe(){}pe.prototype=H.prototype;function ee(z,Z,Ce){this.props=z,this.context=Z,this.refs=j,this.updater=Ce||P}var de=ee.prototype=new pe;de.constructor=ee,V(de,H.prototype),de.isPureReactComponent=!0;var ge=Array.isArray,je=Object.prototype.hasOwnProperty,Fe={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(z,Z,Ce){var $e,be={},qe=null,Qe=null;if(Z!=null)for($e in Z.ref!==void 0&&(Qe=Z.ref),Z.key!==void 0&&(qe=""+Z.key),Z)je.call(Z,$e)&&!x.hasOwnProperty($e)&&(be[$e]=Z[$e]);var Ze=arguments.length-2;if(Ze===1)be.children=Ce;else if(1<Ze){for(var mt=Array(Ze),St=0;St<Ze;St++)mt[St]=arguments[St+2];be.children=mt}if(z&&z.defaultProps)for($e in Ze=z.defaultProps,Ze)be[$e]===void 0&&(be[$e]=Ze[$e]);return{$$typeof:n,type:z,key:qe,ref:Qe,props:be,_owner:Fe.current}}function A(z,Z){return{$$typeof:n,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function b(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function L(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ce){return Z[Ce]})}var F=/\/+/g;function N(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):Z.toString(36)}function Ye(z,Z,Ce,$e,be){var qe=typeof z;(qe==="undefined"||qe==="boolean")&&(z=null);var Qe=!1;if(z===null)Qe=!0;else switch(qe){case"string":case"number":Qe=!0;break;case"object":switch(z.$$typeof){case n:case e:Qe=!0}}if(Qe)return Qe=z,be=be(Qe),z=$e===""?"."+N(Qe,0):$e,ge(be)?(Ce="",z!=null&&(Ce=z.replace(F,"$&/")+"/"),Ye(be,Z,Ce,"",function(St){return St})):be!=null&&(b(be)&&(be=A(be,Ce+(!be.key||Qe&&Qe.key===be.key?"":(""+be.key).replace(F,"$&/")+"/")+z)),Z.push(be)),1;if(Qe=0,$e=$e===""?".":$e+":",ge(z))for(var Ze=0;Ze<z.length;Ze++){qe=z[Ze];var mt=$e+N(qe,Ze);Qe+=Ye(qe,Z,Ce,mt,be)}else if(mt=S(z),typeof mt=="function")for(z=mt.call(z),Ze=0;!(qe=z.next()).done;)qe=qe.value,mt=$e+N(qe,Ze++),Qe+=Ye(qe,Z,Ce,mt,be);else if(qe==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Qe}function vt(z,Z,Ce){if(z==null)return z;var $e=[],be=0;return Ye(z,$e,"","",function(qe){return Z.call(Ce,qe,be++)}),$e}function bt(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(Ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ce)},function(Ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ce)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var it={current:null},ae={transition:null},Ae={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:ae,ReactCurrentOwner:Fe};function me(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:vt,forEach:function(z,Z,Ce){vt(z,function(){Z.apply(this,arguments)},Ce)},count:function(z){var Z=0;return vt(z,function(){Z++}),Z},toArray:function(z){return vt(z,function(Z){return Z})||[]},only:function(z){if(!b(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},tt.Component=H,tt.Fragment=t,tt.Profiler=o,tt.PureComponent=ee,tt.StrictMode=i,tt.Suspense=p,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,tt.act=me,tt.cloneElement=function(z,Z,Ce){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var $e=V({},z.props),be=z.key,qe=z.ref,Qe=z._owner;if(Z!=null){if(Z.ref!==void 0&&(qe=Z.ref,Qe=Fe.current),Z.key!==void 0&&(be=""+Z.key),z.type&&z.type.defaultProps)var Ze=z.type.defaultProps;for(mt in Z)je.call(Z,mt)&&!x.hasOwnProperty(mt)&&($e[mt]=Z[mt]===void 0&&Ze!==void 0?Ze[mt]:Z[mt])}var mt=arguments.length-2;if(mt===1)$e.children=Ce;else if(1<mt){Ze=Array(mt);for(var St=0;St<mt;St++)Ze[St]=arguments[St+2];$e.children=Ze}return{$$typeof:n,type:z.type,key:be,ref:qe,props:$e,_owner:Qe}},tt.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:l,_context:z},z.Consumer=z},tt.createElement=C,tt.createFactory=function(z){var Z=C.bind(null,z);return Z.type=z,Z},tt.createRef=function(){return{current:null}},tt.forwardRef=function(z){return{$$typeof:h,render:z}},tt.isValidElement=b,tt.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:bt}},tt.memo=function(z,Z){return{$$typeof:y,type:z,compare:Z===void 0?null:Z}},tt.startTransition=function(z){var Z=ae.transition;ae.transition={};try{z()}finally{ae.transition=Z}},tt.unstable_act=me,tt.useCallback=function(z,Z){return it.current.useCallback(z,Z)},tt.useContext=function(z){return it.current.useContext(z)},tt.useDebugValue=function(){},tt.useDeferredValue=function(z){return it.current.useDeferredValue(z)},tt.useEffect=function(z,Z){return it.current.useEffect(z,Z)},tt.useId=function(){return it.current.useId()},tt.useImperativeHandle=function(z,Z,Ce){return it.current.useImperativeHandle(z,Z,Ce)},tt.useInsertionEffect=function(z,Z){return it.current.useInsertionEffect(z,Z)},tt.useLayoutEffect=function(z,Z){return it.current.useLayoutEffect(z,Z)},tt.useMemo=function(z,Z){return it.current.useMemo(z,Z)},tt.useReducer=function(z,Z,Ce){return it.current.useReducer(z,Z,Ce)},tt.useRef=function(z){return it.current.useRef(z)},tt.useState=function(z){return it.current.useState(z)},tt.useSyncExternalStore=function(z,Z,Ce){return it.current.useSyncExternalStore(z,Z,Ce)},tt.useTransition=function(){return it.current.useTransition()},tt.version="18.3.1",tt}var dy;function Zf(){return dy||(dy=1,tf.exports=kT()),tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function NT(){if(hy)return pl;hy=1;var n=Zf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,y){var _,w={},S=null,P=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(w[_]=p[_]);if(h&&h.defaultProps)for(_ in p=h.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:h,key:S,ref:P,props:w,_owner:o.current}}return pl.Fragment=t,pl.jsx=c,pl.jsxs=c,pl}var fy;function bT(){return fy||(fy=1,ef.exports=NT()),ef.exports}var T=bT(),Y=Zf();const I_=Xf(Y),DT=S_({__proto__:null,default:I_},[Y]);var uc={},nf={exports:{}},qn={},rf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function OT(){return py||(py=1,(function(n){function e(ae,Ae){var me=ae.length;ae.push(Ae);e:for(;0<me;){var z=me-1>>>1,Z=ae[z];if(0<o(Z,Ae))ae[z]=Ae,ae[me]=Z,me=z;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var Ae=ae[0],me=ae.pop();if(me!==Ae){ae[0]=me;e:for(var z=0,Z=ae.length,Ce=Z>>>1;z<Ce;){var $e=2*(z+1)-1,be=ae[$e],qe=$e+1,Qe=ae[qe];if(0>o(be,me))qe<Z&&0>o(Qe,be)?(ae[z]=Qe,ae[qe]=me,z=qe):(ae[z]=be,ae[$e]=me,z=$e);else if(qe<Z&&0>o(Qe,me))ae[z]=Qe,ae[qe]=me,z=qe;else break e}}return Ae}function o(ae,Ae){var me=ae.sortIndex-Ae.sortIndex;return me!==0?me:ae.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],y=[],_=1,w=null,S=3,P=!1,V=!1,j=!1,H=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(ae){for(var Ae=t(y);Ae!==null;){if(Ae.callback===null)i(y);else if(Ae.startTime<=ae)i(y),Ae.sortIndex=Ae.expirationTime,e(p,Ae);else break;Ae=t(y)}}function ge(ae){if(j=!1,de(ae),!V)if(t(p)!==null)V=!0,bt(je);else{var Ae=t(y);Ae!==null&&it(ge,Ae.startTime-ae)}}function je(ae,Ae){V=!1,j&&(j=!1,pe(C),C=-1),P=!0;var me=S;try{for(de(Ae),w=t(p);w!==null&&(!(w.expirationTime>Ae)||ae&&!L());){var z=w.callback;if(typeof z=="function"){w.callback=null,S=w.priorityLevel;var Z=z(w.expirationTime<=Ae);Ae=n.unstable_now(),typeof Z=="function"?w.callback=Z:w===t(p)&&i(p),de(Ae)}else i(p);w=t(p)}if(w!==null)var Ce=!0;else{var $e=t(y);$e!==null&&it(ge,$e.startTime-Ae),Ce=!1}return Ce}finally{w=null,S=me,P=!1}}var Fe=!1,x=null,C=-1,A=5,b=-1;function L(){return!(n.unstable_now()-b<A)}function F(){if(x!==null){var ae=n.unstable_now();b=ae;var Ae=!0;try{Ae=x(!0,ae)}finally{Ae?N():(Fe=!1,x=null)}}else Fe=!1}var N;if(typeof ee=="function")N=function(){ee(F)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,vt=Ye.port2;Ye.port1.onmessage=F,N=function(){vt.postMessage(null)}}else N=function(){H(F,0)};function bt(ae){x=ae,Fe||(Fe=!0,N())}function it(ae,Ae){C=H(function(){ae(n.unstable_now())},Ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){V||P||(V=!0,bt(je))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var Ae=3;break;default:Ae=S}var me=S;S=Ae;try{return ae()}finally{S=me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,Ae){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var me=S;S=ae;try{return Ae()}finally{S=me}},n.unstable_scheduleCallback=function(ae,Ae,me){var z=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?z+me:z):me=z,ae){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=me+Z,ae={id:_++,callback:Ae,priorityLevel:ae,startTime:me,expirationTime:Z,sortIndex:-1},me>z?(ae.sortIndex=me,e(y,ae),t(p)===null&&ae===t(y)&&(j?(pe(C),C=-1):j=!0,it(ge,me-z))):(ae.sortIndex=Z,e(p,ae),V||P||(V=!0,bt(je))),ae},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ae){var Ae=S;return function(){var me=S;S=Ae;try{return ae.apply(this,arguments)}finally{S=me}}}})(sf)),sf}var my;function LT(){return my||(my=1,rf.exports=OT()),rf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function VT(){if(gy)return qn;gy=1;var n=Zf(),e=LT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function S(r){return p.call(w,r)?!0:p.call(_,r)?!1:y.test(r)?w[r]=!0:(_[r]=!0,!1)}function P(r,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function V(r,s,a,d){if(s===null||typeof s>"u"||P(r,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(r,s,a,d,f,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){H[r]=new j(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];H[s]=new j(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){H[r]=new j(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){H[r]=new j(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){H[r]=new j(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){H[r]=new j(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){H[r]=new j(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){H[r]=new j(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){H[r]=new j(r,5,!1,r.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(pe,ee);H[s]=new j(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(pe,ee);H[s]=new j(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(pe,ee);H[s]=new j(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){H[r]=new j(r,1,!1,r.toLowerCase(),null,!1,!1)}),H.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){H[r]=new j(r,1,!1,r.toLowerCase(),null,!0,!0)});function de(r,s,a,d){var f=H.hasOwnProperty(s)?H[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(V(s,a,f,d)&&(a=null),d||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,s,a):r.setAttribute(s,a))))}var ge=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,je=Symbol.for("react.element"),Fe=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),vt=Symbol.for("react.memo"),bt=Symbol.for("react.lazy"),it=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Ae(r){return r===null||typeof r!="object"?null:(r=ae&&r[ae]||r["@@iterator"],typeof r=="function"?r:null)}var me=Object.assign,z;function Z(r){if(z===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);z=s&&s[1]||""}return`
`+z+r}var Ce=!1;function $e(r,s){if(!r||Ce)return"";Ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var d=Q}Reflect.construct(r,[],s)}else{try{s.call()}catch(Q){d=Q}r.call(s.prototype)}else{try{throw Error()}catch(Q){d=Q}r()}}catch(Q){if(Q&&d&&typeof Q.stack=="string"){for(var f=Q.stack.split(`
`),g=d.stack.split(`
`),E=f.length-1,R=g.length-1;1<=E&&0<=R&&f[E]!==g[R];)R--;for(;1<=E&&0<=R;E--,R--)if(f[E]!==g[R]){if(E!==1||R!==1)do if(E--,R--,0>R||f[E]!==g[R]){var O=`
`+f[E].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=E&&0<=R);break}}}finally{Ce=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Z(r):""}function be(r){switch(r.tag){case 5:return Z(r.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return r=$e(r.type,!1),r;case 11:return r=$e(r.type.render,!1),r;case 1:return r=$e(r.type,!0),r;default:return""}}function qe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case Fe:return"Portal";case A:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case Ye:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case vt:return s=r.displayName||null,s!==null?s:qe(r.type)||"Memo";case bt:s=r._payload,r=r._init;try{return qe(r(s))}catch{}}return null}function Qe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qe(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ze(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function mt(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function St(r){var s=mt(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){d=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function on(r){r._valueTracker||(r._valueTracker=St(r))}function It(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return r&&(d=mt(r)?r.checked?"true":"false":r.value),r=d,r!==a?(s.setValue(r),!0):!1}function hn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function hr(r,s){var a=s.checked;return me({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Wr(r,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=Ze(s.value!=null?s.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function bn(r,s){s=s.checked,s!=null&&de(r,"checked",s,!1)}function _i(r,s){bn(r,s);var a=Ze(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Pr(r,s.type,a):s.hasOwnProperty("defaultValue")&&Pr(r,s.type,Ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Wi(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Pr(r,s,a){(s!=="number"||hn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Xn=Array.isArray;function Zn(r,s,a,d){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+Ze(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Ct(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return me({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function qr(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Xn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Ze(a)}}function En(r,s){var a=Ze(s.value),d=Ze(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function k(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function W(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?W(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var X,te=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,d,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(X=X||document.createElement("div"),X.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=X.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ue(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},De=["Webkit","ms","Moz","O"];Object.keys(ye).forEach(function(r){De.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ye[s]=ye[r]})});function ut(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ye.hasOwnProperty(r)&&ye[r]?(""+s).trim():s+"px"}function Tt(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=ut(a,s[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var Zt=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(r,s){if(s){if(Zt[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ht(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=null;function Ar(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var wi=null,Tn=null,Mn=null;function qi(r){if(r=Za(r)){if(typeof wi!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Iu(s),wi(r.stateNode,r.type,s))}}function er(r){Tn?Mn?Mn.push(r):Mn=[r]:Tn=r}function Bs(){if(Tn){var r=Tn,s=Mn;if(Mn=Tn=null,qi(r),s)for(r=0;r<s.length;r++)qi(s[r])}}function Gr(r,s){return r(s)}function Kr(){}var Fn=!1;function $s(r,s,a){if(Fn)return r(s,a);Fn=!0;try{return Gr(r,s,a)}finally{Fn=!1,(Tn!==null||Mn!==null)&&(Kr(),Bs())}}function Vt(r,s){var a=r.stateNode;if(a===null)return null;var d=Iu(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var D=!1;if(h)try{var U={};Object.defineProperty(U,"passive",{get:function(){D=!0}}),window.addEventListener("test",U,U),window.removeEventListener("test",U,U)}catch{D=!1}function K(r,s,a,d,f,g,E,R,O){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(a,Q)}catch(oe){this.onError(oe)}}var re=!1,fe=null,Se=!1,Le=null,Ie={onError:function(r){re=!0,fe=r}};function Te(r,s,a,d,f,g,E,R,O){re=!1,fe=null,K.apply(Ie,arguments)}function _e(r,s,a,d,f,g,E,R,O){if(Te.apply(this,arguments),re){if(re){var Q=fe;re=!1,fe=null}else throw Error(t(198));Se||(Se=!0,Le=Q)}}function we(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Ue(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function We(r){if(we(r)!==r)throw Error(t(188))}function Ut(r){var s=r.alternate;if(!s){if(s=we(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return We(f),r;if(g===d)return We(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var E=!1,R=f.child;R;){if(R===a){E=!0,a=f,d=g;break}if(R===d){E=!0,d=f,a=g;break}R=R.sibling}if(!E){for(R=g.child;R;){if(R===a){E=!0,a=g,d=f;break}if(R===d){E=!0,d=g,a=f;break}R=R.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ft(r){return r=Ut(r),r!==null?et(r):null}function et(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=et(r);if(s!==null)return s;r=r.sibling}return null}var _t=e.unstable_scheduleCallback,pr=e.unstable_cancelCallback,Qr=e.unstable_shouldYield,tr=e.unstable_requestPaint,nt=e.unstable_now,Gi=e.unstable_getCurrentPriorityLevel,nr=e.unstable_ImmediatePriority,Sn=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,Yr=e.unstable_LowPriority,rt=e.unstable_IdlePriority,gt=null,Wt=null;function Jr(r){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(gt,r,void 0,(r.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:Ro,mr=Math.log,Hs=Math.LN2;function Ro(r){return r>>>=0,r===0?32:31-(mr(r)/Hs|0)|0}var ko=64,No=4194304;function Ki(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ws(r,s){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var R=E&~f;R!==0?d=Ki(R):(g&=E,g!==0&&(d=Ki(g)))}else E=a&~f,E!==0?d=Ki(E):g!==0&&(d=Ki(g));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)a=31-st(s),f=1<<a,d|=r[a],s&=~f;return d}function kd(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ei(r,s){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-st(g),R=1<<E,O=f[E];O===-1?((R&a)===0||(R&d)!==0)&&(f[E]=kd(R,s)):O<=s&&(r.expiredLanes|=R),g&=~R}}function rr(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function qs(){var r=ko;return ko<<=1,(ko&4194240)===0&&(ko=64),r}function Qi(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Yi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-st(s),r[s]=a}function xt(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-st(a),g=1<<f;s[f]=0,d[f]=-1,r[f]=-1,a&=~g}}function Ji(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var d=31-st(a),f=1<<d;f&s|r[d]&s&&(r[d]|=s),a&=~f}}var lt=0;function Xi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ru,bo,iu,su,ou,Fa=!1,Xr=[],pn=null,Rr=null,kr=null,Zi=new Map,gr=new Map,Zr=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(r,s){switch(r){case"focusin":case"focusout":pn=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Zi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gr.delete(s.pointerId)}}function jn(r,s,a,d,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Za(s),s!==null&&bo(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function bd(r,s,a,d,f){switch(s){case"focusin":return pn=jn(pn,r,s,a,d,f),!0;case"dragenter":return Rr=jn(Rr,r,s,a,d,f),!0;case"mouseover":return kr=jn(kr,r,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return Zi.set(g,jn(Zi.get(g)||null,r,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,gr.set(g,jn(gr.get(g)||null,r,s,a,d,f)),!0}return!1}function lu(r){var s=Js(r.target);if(s!==null){var a=we(s);if(a!==null){if(s=a.tag,s===13){if(s=Ue(a),s!==null){r.blockedOn=s,ou(r.priority,function(){iu(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ti(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Do(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);fr=d,a.target.dispatchEvent(d),fr=null}else return s=Za(a),s!==null&&bo(s),r.blockedOn=a,!1;s.shift()}return!0}function Gs(r,s,a){Ti(r)&&a.delete(s)}function uu(){Fa=!1,pn!==null&&Ti(pn)&&(pn=null),Rr!==null&&Ti(Rr)&&(Rr=null),kr!==null&&Ti(kr)&&(kr=null),Zi.forEach(Gs),gr.forEach(Gs)}function Nr(r,s){r.blockedOn===s&&(r.blockedOn=null,Fa||(Fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uu)))}function br(r){function s(f){return Nr(f,r)}if(0<Xr.length){Nr(Xr[0],r);for(var a=1;a<Xr.length;a++){var d=Xr[a];d.blockedOn===r&&(d.blockedOn=null)}}for(pn!==null&&Nr(pn,r),Rr!==null&&Nr(Rr,r),kr!==null&&Nr(kr,r),Zi.forEach(s),gr.forEach(s),a=0;a<Zr.length;a++)d=Zr[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<Zr.length&&(a=Zr[0],a.blockedOn===null);)lu(a),a.blockedOn===null&&Zr.shift()}var Si=ge.ReactCurrentBatchConfig,es=!0;function Dt(r,s,a,d){var f=lt,g=Si.transition;Si.transition=null;try{lt=1,ja(r,s,a,d)}finally{lt=f,Si.transition=g}}function Dd(r,s,a,d){var f=lt,g=Si.transition;Si.transition=null;try{lt=4,ja(r,s,a,d)}finally{lt=f,Si.transition=g}}function ja(r,s,a,d){if(es){var f=Do(r,s,a,d);if(f===null)Hd(r,s,d,Ks,a),au(r,d);else if(bd(f,r,s,a,d))d.stopPropagation();else if(au(r,d),s&4&&-1<Nd.indexOf(r)){for(;f!==null;){var g=Za(f);if(g!==null&&ru(g),g=Do(r,s,a,d),g===null&&Hd(r,s,d,Ks,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else Hd(r,s,d,null,a)}}var Ks=null;function Do(r,s,a,d){if(Ks=null,r=Ar(d),r=Js(r),r!==null)if(s=we(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Ue(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ks=r,null}function Ua(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gi()){case nr:return 1;case Sn:return 4;case fn:case Yr:return 16;case rt:return 536870912;default:return 16}default:return 16}}var ir=null,Oo=null,Un=null;function za(){if(Un)return Un;var r,s=Oo,a=s.length,d,f="value"in ir?ir.value:ir.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var E=a-r;for(d=1;d<=E&&s[a-d]===f[g-d];d++);return Un=f.slice(r,1<d?1-d:void 0)}function Lo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ei(){return!0}function Ba(){return!1}function mn(r){function s(a,d,f,g,E){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(a=r[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ei:Ba,this.isPropagationStopped=Ba,this}return me(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),s}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vo=mn(Dr),ti=me({},Dr,{view:0,detail:0}),Od=mn(ti),Mo,Ii,ts,Qs=me({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ts&&(ts&&r.type==="mousemove"?(Mo=r.screenX-ts.screenX,Ii=r.screenY-ts.screenY):Ii=Mo=0,ts=r),Mo)},movementY:function(r){return"movementY"in r?r.movementY:Ii}}),Fo=mn(Qs),$a=me({},Qs,{dataTransfer:0}),cu=mn($a),jo=me({},ti,{relatedTarget:0}),Uo=mn(jo),du=me({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),xi=mn(du),hu=me({},Dr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fu=mn(hu),pu=me({},Dr,{data:0}),Ha=mn(pu),zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=mu[r])?!!s[r]:!1}function ni(){return gu}var u=me({},ti,{key:function(r){if(r.key){var s=zo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Lo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(r){return r.type==="keypress"?Lo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Lo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=mn(u),v=me({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=mn(v),$=me({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),J=mn($),he=me({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wt=mn(he),en=me({},Qs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ct=mn(en),an=[9,13,27,32],qt=h&&"CompositionEvent"in window,yr=null;h&&"documentMode"in document&&(yr=document.documentMode);var sr=h&&"TextEvent"in window&&!yr,Ys=h&&(!qt||yr&&8<yr&&11>=yr),Bo=" ",im=!1;function sm(r,s){switch(r){case"keyup":return an.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function om(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $o=!1;function PE(r,s){switch(r){case"compositionend":return om(s);case"keypress":return s.which!==32?null:(im=!0,Bo);case"textInput":return r=s.data,r===Bo&&im?null:r;default:return null}}function AE(r,s){if($o)return r==="compositionend"||!qt&&sm(r,s)?(r=za(),Un=Oo=ir=null,$o=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ys&&s.locale!=="ko"?null:s.data;default:return null}}var RE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!RE[r.type]:s==="textarea"}function lm(r,s,a,d){er(d),s=Eu(s,"onChange"),0<s.length&&(a=new Vo("onChange","change",null,a,d),r.push({event:a,listeners:s}))}var Wa=null,qa=null;function kE(r){Cm(r,0)}function yu(r){var s=Ko(r);if(It(s))return r}function NE(r,s){if(r==="change")return s}var um=!1;if(h){var Ld;if(h){var Vd="oninput"in document;if(!Vd){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),Vd=typeof cm.oninput=="function"}Ld=Vd}else Ld=!1;um=Ld&&(!document.documentMode||9<document.documentMode)}function dm(){Wa&&(Wa.detachEvent("onpropertychange",hm),qa=Wa=null)}function hm(r){if(r.propertyName==="value"&&yu(qa)){var s=[];lm(s,qa,r,Ar(r)),$s(kE,s)}}function bE(r,s,a){r==="focusin"?(dm(),Wa=s,qa=a,Wa.attachEvent("onpropertychange",hm)):r==="focusout"&&dm()}function DE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return yu(qa)}function OE(r,s){if(r==="click")return yu(s)}function LE(r,s){if(r==="input"||r==="change")return yu(s)}function VE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Or=typeof Object.is=="function"?Object.is:VE;function Ga(r,s){if(Or(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(s,f)||!Or(r[f],s[f]))return!1}return!0}function fm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pm(r,s){var a=fm(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=s&&d>=s)return{node:a,offset:s-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fm(a)}}function mm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?mm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function gm(){for(var r=window,s=hn();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=hn(r.document)}return s}function Md(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function ME(r){var s=gm(),a=r.focusedElem,d=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&mm(a.ownerDocument.documentElement,a)){if(d!==null&&Md(a)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!r.extend&&g>d&&(f=d,d=g,g=f),f=pm(a,g);var E=pm(a,d);f&&E&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>d?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var FE=h&&"documentMode"in document&&11>=document.documentMode,Ho=null,Fd=null,Ka=null,jd=!1;function ym(r,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jd||Ho==null||Ho!==hn(d)||(d=Ho,"selectionStart"in d&&Md(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ka&&Ga(Ka,d)||(Ka=d,d=Eu(Fd,"onSelect"),0<d.length&&(s=new Vo("onSelect","select",null,s,a),r.push({event:s,listeners:d}),s.target=Ho)))}function vu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Wo={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},Ud={},vm={};h&&(vm=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function _u(r){if(Ud[r])return Ud[r];if(!Wo[r])return r;var s=Wo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in vm)return Ud[r]=s[a];return r}var _m=_u("animationend"),wm=_u("animationiteration"),Em=_u("animationstart"),Tm=_u("transitionend"),Sm=new Map,Im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(r,s){Sm.set(r,s),l(s,[r])}for(var zd=0;zd<Im.length;zd++){var Bd=Im[zd],jE=Bd.toLowerCase(),UE=Bd[0].toUpperCase()+Bd.slice(1);ns(jE,"on"+UE)}ns(_m,"onAnimationEnd"),ns(wm,"onAnimationIteration"),ns(Em,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(Tm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function xm(r,s,a){var d=r.type||"unknown-event";r.currentTarget=a,_e(d,s,void 0,r),r.currentTarget=null}function Cm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var E=d.length-1;0<=E;E--){var R=d[E],O=R.instance,Q=R.currentTarget;if(R=R.listener,O!==g&&f.isPropagationStopped())break e;xm(f,R,Q),g=O}else for(E=0;E<d.length;E++){if(R=d[E],O=R.instance,Q=R.currentTarget,R=R.listener,O!==g&&f.isPropagationStopped())break e;xm(f,R,Q),g=O}}}if(Se)throw r=Le,Se=!1,Le=null,r}function At(r,s){var a=s[Yd];a===void 0&&(a=s[Yd]=new Set);var d=r+"__bubble";a.has(d)||(Pm(s,r,2,!1),a.add(d))}function $d(r,s,a){var d=0;s&&(d|=4),Pm(a,r,d,s)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Ya(r){if(!r[wu]){r[wu]=!0,i.forEach(function(a){a!=="selectionchange"&&(zE.has(a)||$d(a,!1,r),$d(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[wu]||(s[wu]=!0,$d("selectionchange",!1,s))}}function Pm(r,s,a,d){switch(Ua(s)){case 1:var f=Dt;break;case 4:f=Dd;break;default:f=ja}a=f.bind(null,s,a,r),f=void 0,!D||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Hd(r,s,a,d,f){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var R=d.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(E===4)for(E=d.return;E!==null;){var O=E.tag;if((O===3||O===4)&&(O=E.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;E=E.return}for(;R!==null;){if(E=Js(R),E===null)return;if(O=E.tag,O===5||O===6){d=g=E;continue e}R=R.parentNode}}d=d.return}$s(function(){var Q=g,oe=Ar(a),le=[];e:{var se=Sm.get(r);if(se!==void 0){var ve=Vo,Pe=r;switch(r){case"keypress":if(Lo(a)===0)break e;case"keydown":case"keyup":ve=m;break;case"focusin":Pe="focus",ve=Uo;break;case"focusout":Pe="blur",ve=Uo;break;case"beforeblur":case"afterblur":ve=Uo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=J;break;case _m:case wm:case Em:ve=xi;break;case Tm:ve=wt;break;case"scroll":ve=Od;break;case"wheel":ve=ct;break;case"copy":case"cut":case"paste":ve=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=I}var Re=(s&4)!==0,Bt=!Re&&r==="scroll",q=Re?se!==null?se+"Capture":null:se;Re=[];for(var M=Q,G;M!==null;){G=M;var ce=G.stateNode;if(G.tag===5&&ce!==null&&(G=ce,q!==null&&(ce=Vt(M,q),ce!=null&&Re.push(Ja(M,ce,G)))),Bt)break;M=M.return}0<Re.length&&(se=new ve(se,Pe,null,a,oe),le.push({event:se,listeners:Re}))}}if((s&7)===0){e:{if(se=r==="mouseover"||r==="pointerover",ve=r==="mouseout"||r==="pointerout",se&&a!==fr&&(Pe=a.relatedTarget||a.fromElement)&&(Js(Pe)||Pe[Ci]))break e;if((ve||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ve?(Pe=a.relatedTarget||a.toElement,ve=Q,Pe=Pe?Js(Pe):null,Pe!==null&&(Bt=we(Pe),Pe!==Bt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(ve=null,Pe=Q),ve!==Pe)){if(Re=Fo,ce="onMouseLeave",q="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Re=I,ce="onPointerLeave",q="onPointerEnter",M="pointer"),Bt=ve==null?se:Ko(ve),G=Pe==null?se:Ko(Pe),se=new Re(ce,M+"leave",ve,a,oe),se.target=Bt,se.relatedTarget=G,ce=null,Js(oe)===Q&&(Re=new Re(q,M+"enter",Pe,a,oe),Re.target=G,Re.relatedTarget=Bt,ce=Re),Bt=ce,ve&&Pe)t:{for(Re=ve,q=Pe,M=0,G=Re;G;G=qo(G))M++;for(G=0,ce=q;ce;ce=qo(ce))G++;for(;0<M-G;)Re=qo(Re),M--;for(;0<G-M;)q=qo(q),G--;for(;M--;){if(Re===q||q!==null&&Re===q.alternate)break t;Re=qo(Re),q=qo(q)}Re=null}else Re=null;ve!==null&&Am(le,se,ve,Re,!1),Pe!==null&&Bt!==null&&Am(le,Bt,Pe,Re,!0)}}e:{if(se=Q?Ko(Q):window,ve=se.nodeName&&se.nodeName.toLowerCase(),ve==="select"||ve==="input"&&se.type==="file")var Ne=NE;else if(am(se))if(um)Ne=LE;else{Ne=DE;var Ve=bE}else(ve=se.nodeName)&&ve.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ne=OE);if(Ne&&(Ne=Ne(r,Q))){lm(le,Ne,a,oe);break e}Ve&&Ve(r,se,Q),r==="focusout"&&(Ve=se._wrapperState)&&Ve.controlled&&se.type==="number"&&Pr(se,"number",se.value)}switch(Ve=Q?Ko(Q):window,r){case"focusin":(am(Ve)||Ve.contentEditable==="true")&&(Ho=Ve,Fd=Q,Ka=null);break;case"focusout":Ka=Fd=Ho=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,ym(le,a,oe);break;case"selectionchange":if(FE)break;case"keydown":case"keyup":ym(le,a,oe)}var Me;if(qt)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else $o?sm(r,a)&&(He="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Ys&&a.locale!=="ko"&&($o||He!=="onCompositionStart"?He==="onCompositionEnd"&&$o&&(Me=za()):(ir=oe,Oo="value"in ir?ir.value:ir.textContent,$o=!0)),Ve=Eu(Q,He),0<Ve.length&&(He=new Ha(He,r,null,a,oe),le.push({event:He,listeners:Ve}),Me?He.data=Me:(Me=om(a),Me!==null&&(He.data=Me)))),(Me=sr?PE(r,a):AE(r,a))&&(Q=Eu(Q,"onBeforeInput"),0<Q.length&&(oe=new Ha("onBeforeInput","beforeinput",null,a,oe),le.push({event:oe,listeners:Q}),oe.data=Me))}Cm(le,s)})}function Ja(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Eu(r,s){for(var a=s+"Capture",d=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Vt(r,a),g!=null&&d.unshift(Ja(r,g,f)),g=Vt(r,s),g!=null&&d.push(Ja(r,g,f))),r=r.return}return d}function qo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Am(r,s,a,d,f){for(var g=s._reactName,E=[];a!==null&&a!==d;){var R=a,O=R.alternate,Q=R.stateNode;if(O!==null&&O===d)break;R.tag===5&&Q!==null&&(R=Q,f?(O=Vt(a,g),O!=null&&E.unshift(Ja(a,O,R))):f||(O=Vt(a,g),O!=null&&E.push(Ja(a,O,R)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var BE=/\r\n?/g,$E=/\u0000|\uFFFD/g;function Rm(r){return(typeof r=="string"?r:""+r).replace(BE,`
`).replace($E,"")}function Tu(r,s,a){if(s=Rm(s),Rm(r)!==s&&a)throw Error(t(425))}function Su(){}var Wd=null,qd=null;function Gd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,HE=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,WE=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(r){return km.resolve(null).then(r).catch(qE)}:Kd;function qE(r){setTimeout(function(){throw r})}function Qd(r,s){var a=s,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),br(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);br(s)}function rs(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Nm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Go=Math.random().toString(36).slice(2),ri="__reactFiber$"+Go,Xa="__reactProps$"+Go,Ci="__reactContainer$"+Go,Yd="__reactEvents$"+Go,GE="__reactListeners$"+Go,KE="__reactHandles$"+Go;function Js(r){var s=r[ri];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Ci]||a[ri]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Nm(r);r!==null;){if(a=r[ri])return a;r=Nm(r)}return s}r=a,a=r.parentNode}return null}function Za(r){return r=r[ri]||r[Ci],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ko(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Iu(r){return r[Xa]||null}var Jd=[],Qo=-1;function is(r){return{current:r}}function Rt(r){0>Qo||(r.current=Jd[Qo],Jd[Qo]=null,Qo--)}function Pt(r,s){Qo++,Jd[Qo]=r.current,r.current=s}var ss={},In=is(ss),zn=is(!1),Xs=ss;function Yo(r,s){var a=r.type.contextTypes;if(!a)return ss;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Bn(r){return r=r.childContextTypes,r!=null}function xu(){Rt(zn),Rt(In)}function bm(r,s,a){if(In.current!==ss)throw Error(t(168));Pt(In,s),Pt(zn,a)}function Dm(r,s,a){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Qe(r)||"Unknown",f));return me({},a,d)}function Cu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ss,Xs=In.current,Pt(In,r),Pt(zn,zn.current),!0}function Om(r,s,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=Dm(r,s,Xs),d.__reactInternalMemoizedMergedChildContext=r,Rt(zn),Rt(In),Pt(In,r)):Rt(zn),Pt(zn,a)}var Pi=null,Pu=!1,Xd=!1;function Lm(r){Pi===null?Pi=[r]:Pi.push(r)}function QE(r){Pu=!0,Lm(r)}function os(){if(!Xd&&Pi!==null){Xd=!0;var r=0,s=lt;try{var a=Pi;for(lt=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}Pi=null,Pu=!1}catch(f){throw Pi!==null&&(Pi=Pi.slice(r+1)),_t(nr,os),f}finally{lt=s,Xd=!1}}return null}var Jo=[],Xo=0,Au=null,Ru=0,vr=[],_r=0,Zs=null,Ai=1,Ri="";function eo(r,s){Jo[Xo++]=Ru,Jo[Xo++]=Au,Au=r,Ru=s}function Vm(r,s,a){vr[_r++]=Ai,vr[_r++]=Ri,vr[_r++]=Zs,Zs=r;var d=Ai;r=Ri;var f=32-st(d)-1;d&=~(1<<f),a+=1;var g=32-st(s)+f;if(30<g){var E=f-f%5;g=(d&(1<<E)-1).toString(32),d>>=E,f-=E,Ai=1<<32-st(s)+f|a<<f|d,Ri=g+r}else Ai=1<<g|a<<f|d,Ri=r}function Zd(r){r.return!==null&&(eo(r,1),Vm(r,1,0))}function eh(r){for(;r===Au;)Au=Jo[--Xo],Jo[Xo]=null,Ru=Jo[--Xo],Jo[Xo]=null;for(;r===Zs;)Zs=vr[--_r],vr[_r]=null,Ri=vr[--_r],vr[_r]=null,Ai=vr[--_r],vr[_r]=null}var or=null,ar=null,Ot=!1,Lr=null;function Mm(r,s){var a=Sr(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Fm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,or=r,ar=rs(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,or=r,ar=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Zs!==null?{id:Ai,overflow:Ri}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Sr(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,or=r,ar=null,!0):!1;default:return!1}}function th(r){return(r.mode&1)!==0&&(r.flags&128)===0}function nh(r){if(Ot){var s=ar;if(s){var a=s;if(!Fm(r,s)){if(th(r))throw Error(t(418));s=rs(a.nextSibling);var d=or;s&&Fm(r,s)?Mm(d,a):(r.flags=r.flags&-4097|2,Ot=!1,or=r)}}else{if(th(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ot=!1,or=r}}}function jm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;or=r}function ku(r){if(r!==or)return!1;if(!Ot)return jm(r),Ot=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Gd(r.type,r.memoizedProps)),s&&(s=ar)){if(th(r))throw Um(),Error(t(418));for(;s;)Mm(r,s),s=rs(s.nextSibling)}if(jm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){ar=rs(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}ar=null}}else ar=or?rs(r.stateNode.nextSibling):null;return!0}function Um(){for(var r=ar;r;)r=rs(r.nextSibling)}function Zo(){ar=or=null,Ot=!1}function rh(r){Lr===null?Lr=[r]:Lr.push(r)}var YE=ge.ReactCurrentBatchConfig;function el(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var R=f.refs;E===null?delete R[g]:R[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Nu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function zm(r){var s=r._init;return s(r._payload)}function Bm(r){function s(q,M){if(r){var G=q.deletions;G===null?(q.deletions=[M],q.flags|=16):G.push(M)}}function a(q,M){if(!r)return null;for(;M!==null;)s(q,M),M=M.sibling;return null}function d(q,M){for(q=new Map;M!==null;)M.key!==null?q.set(M.key,M):q.set(M.index,M),M=M.sibling;return q}function f(q,M){return q=ps(q,M),q.index=0,q.sibling=null,q}function g(q,M,G){return q.index=G,r?(G=q.alternate,G!==null?(G=G.index,G<M?(q.flags|=2,M):G):(q.flags|=2,M)):(q.flags|=1048576,M)}function E(q){return r&&q.alternate===null&&(q.flags|=2),q}function R(q,M,G,ce){return M===null||M.tag!==6?(M=Kh(G,q.mode,ce),M.return=q,M):(M=f(M,G),M.return=q,M)}function O(q,M,G,ce){var Ne=G.type;return Ne===x?oe(q,M,G.props.children,ce,G.key):M!==null&&(M.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===bt&&zm(Ne)===M.type)?(ce=f(M,G.props),ce.ref=el(q,M,G),ce.return=q,ce):(ce=tc(G.type,G.key,G.props,null,q.mode,ce),ce.ref=el(q,M,G),ce.return=q,ce)}function Q(q,M,G,ce){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=Qh(G,q.mode,ce),M.return=q,M):(M=f(M,G.children||[]),M.return=q,M)}function oe(q,M,G,ce,Ne){return M===null||M.tag!==7?(M=lo(G,q.mode,ce,Ne),M.return=q,M):(M=f(M,G),M.return=q,M)}function le(q,M,G){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Kh(""+M,q.mode,G),M.return=q,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case je:return G=tc(M.type,M.key,M.props,null,q.mode,G),G.ref=el(q,null,M),G.return=q,G;case Fe:return M=Qh(M,q.mode,G),M.return=q,M;case bt:var ce=M._init;return le(q,ce(M._payload),G)}if(Xn(M)||Ae(M))return M=lo(M,q.mode,G,null),M.return=q,M;Nu(q,M)}return null}function se(q,M,G,ce){var Ne=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Ne!==null?null:R(q,M,""+G,ce);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case je:return G.key===Ne?O(q,M,G,ce):null;case Fe:return G.key===Ne?Q(q,M,G,ce):null;case bt:return Ne=G._init,se(q,M,Ne(G._payload),ce)}if(Xn(G)||Ae(G))return Ne!==null?null:oe(q,M,G,ce,null);Nu(q,G)}return null}function ve(q,M,G,ce,Ne){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return q=q.get(G)||null,R(M,q,""+ce,Ne);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case je:return q=q.get(ce.key===null?G:ce.key)||null,O(M,q,ce,Ne);case Fe:return q=q.get(ce.key===null?G:ce.key)||null,Q(M,q,ce,Ne);case bt:var Ve=ce._init;return ve(q,M,G,Ve(ce._payload),Ne)}if(Xn(ce)||Ae(ce))return q=q.get(G)||null,oe(M,q,ce,Ne,null);Nu(M,ce)}return null}function Pe(q,M,G,ce){for(var Ne=null,Ve=null,Me=M,He=M=0,cn=null;Me!==null&&He<G.length;He++){Me.index>He?(cn=Me,Me=null):cn=Me.sibling;var pt=se(q,Me,G[He],ce);if(pt===null){Me===null&&(Me=cn);break}r&&Me&&pt.alternate===null&&s(q,Me),M=g(pt,M,He),Ve===null?Ne=pt:Ve.sibling=pt,Ve=pt,Me=cn}if(He===G.length)return a(q,Me),Ot&&eo(q,He),Ne;if(Me===null){for(;He<G.length;He++)Me=le(q,G[He],ce),Me!==null&&(M=g(Me,M,He),Ve===null?Ne=Me:Ve.sibling=Me,Ve=Me);return Ot&&eo(q,He),Ne}for(Me=d(q,Me);He<G.length;He++)cn=ve(Me,q,He,G[He],ce),cn!==null&&(r&&cn.alternate!==null&&Me.delete(cn.key===null?He:cn.key),M=g(cn,M,He),Ve===null?Ne=cn:Ve.sibling=cn,Ve=cn);return r&&Me.forEach(function(ms){return s(q,ms)}),Ot&&eo(q,He),Ne}function Re(q,M,G,ce){var Ne=Ae(G);if(typeof Ne!="function")throw Error(t(150));if(G=Ne.call(G),G==null)throw Error(t(151));for(var Ve=Ne=null,Me=M,He=M=0,cn=null,pt=G.next();Me!==null&&!pt.done;He++,pt=G.next()){Me.index>He?(cn=Me,Me=null):cn=Me.sibling;var ms=se(q,Me,pt.value,ce);if(ms===null){Me===null&&(Me=cn);break}r&&Me&&ms.alternate===null&&s(q,Me),M=g(ms,M,He),Ve===null?Ne=ms:Ve.sibling=ms,Ve=ms,Me=cn}if(pt.done)return a(q,Me),Ot&&eo(q,He),Ne;if(Me===null){for(;!pt.done;He++,pt=G.next())pt=le(q,pt.value,ce),pt!==null&&(M=g(pt,M,He),Ve===null?Ne=pt:Ve.sibling=pt,Ve=pt);return Ot&&eo(q,He),Ne}for(Me=d(q,Me);!pt.done;He++,pt=G.next())pt=ve(Me,q,He,pt.value,ce),pt!==null&&(r&&pt.alternate!==null&&Me.delete(pt.key===null?He:pt.key),M=g(pt,M,He),Ve===null?Ne=pt:Ve.sibling=pt,Ve=pt);return r&&Me.forEach(function(RT){return s(q,RT)}),Ot&&eo(q,He),Ne}function Bt(q,M,G,ce){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case je:e:{for(var Ne=G.key,Ve=M;Ve!==null;){if(Ve.key===Ne){if(Ne=G.type,Ne===x){if(Ve.tag===7){a(q,Ve.sibling),M=f(Ve,G.props.children),M.return=q,q=M;break e}}else if(Ve.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===bt&&zm(Ne)===Ve.type){a(q,Ve.sibling),M=f(Ve,G.props),M.ref=el(q,Ve,G),M.return=q,q=M;break e}a(q,Ve);break}else s(q,Ve);Ve=Ve.sibling}G.type===x?(M=lo(G.props.children,q.mode,ce,G.key),M.return=q,q=M):(ce=tc(G.type,G.key,G.props,null,q.mode,ce),ce.ref=el(q,M,G),ce.return=q,q=ce)}return E(q);case Fe:e:{for(Ve=G.key;M!==null;){if(M.key===Ve)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){a(q,M.sibling),M=f(M,G.children||[]),M.return=q,q=M;break e}else{a(q,M);break}else s(q,M);M=M.sibling}M=Qh(G,q.mode,ce),M.return=q,q=M}return E(q);case bt:return Ve=G._init,Bt(q,M,Ve(G._payload),ce)}if(Xn(G))return Pe(q,M,G,ce);if(Ae(G))return Re(q,M,G,ce);Nu(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,M!==null&&M.tag===6?(a(q,M.sibling),M=f(M,G),M.return=q,q=M):(a(q,M),M=Kh(G,q.mode,ce),M.return=q,q=M),E(q)):a(q,M)}return Bt}var ea=Bm(!0),$m=Bm(!1),bu=is(null),Du=null,ta=null,ih=null;function sh(){ih=ta=Du=null}function oh(r){var s=bu.current;Rt(bu),r._currentValue=s}function ah(r,s,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===a)break;r=r.return}}function na(r,s){Du=r,ih=ta=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&($n=!0),r.firstContext=null)}function wr(r){var s=r._currentValue;if(ih!==r)if(r={context:r,memoizedValue:s,next:null},ta===null){if(Du===null)throw Error(t(308));ta=r,Du.dependencies={lanes:0,firstContext:r}}else ta=ta.next=r;return s}var to=null;function lh(r){to===null?to=[r]:to.push(r)}function Hm(r,s,a,d){var f=s.interleaved;return f===null?(a.next=a,lh(s)):(a.next=f.next,f.next=a),s.interleaved=a,ki(r,d)}function ki(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var as=!1;function uh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ni(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(r,s,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ht&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,ki(r,a)}return f=d.interleaved,f===null?(s.next=s,lh(d)):(s.next=f.next,f.next=s),d.interleaved=s,ki(r,a)}function Ou(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Ji(r,a)}}function qm(r,s){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Lu(r,s,a,d){var f=r.updateQueue;as=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var O=R,Q=O.next;O.next=null,E===null?g=Q:E.next=Q,E=O;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,R=oe.lastBaseUpdate,R!==E&&(R===null?oe.firstBaseUpdate=Q:R.next=Q,oe.lastBaseUpdate=O))}if(g!==null){var le=f.baseState;E=0,oe=Q=O=null,R=g;do{var se=R.lane,ve=R.eventTime;if((d&se)===se){oe!==null&&(oe=oe.next={eventTime:ve,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Pe=r,Re=R;switch(se=s,ve=a,Re.tag){case 1:if(Pe=Re.payload,typeof Pe=="function"){le=Pe.call(ve,le,se);break e}le=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Re.payload,se=typeof Pe=="function"?Pe.call(ve,le,se):Pe,se==null)break e;le=me({},le,se);break e;case 2:as=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,se=f.effects,se===null?f.effects=[R]:se.push(R))}else ve={eventTime:ve,lane:se,tag:R.tag,payload:R.payload,callback:R.callback,next:null},oe===null?(Q=oe=ve,O=le):oe=oe.next=ve,E|=se;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;se=R,R=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(oe===null&&(O=le),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=oe,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);io|=E,r.lanes=E,r.memoizedState=le}}function Gm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var tl={},ii=is(tl),nl=is(tl),rl=is(tl);function no(r){if(r===tl)throw Error(t(174));return r}function ch(r,s){switch(Pt(rl,s),Pt(nl,r),Pt(ii,tl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:B(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=B(s,r)}Rt(ii),Pt(ii,s)}function ra(){Rt(ii),Rt(nl),Rt(rl)}function Km(r){no(rl.current);var s=no(ii.current),a=B(s,r.type);s!==a&&(Pt(nl,r),Pt(ii,a))}function dh(r){nl.current===r&&(Rt(ii),Rt(nl))}var Mt=is(0);function Vu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hh=[];function fh(){for(var r=0;r<hh.length;r++)hh[r]._workInProgressVersionPrimary=null;hh.length=0}var Mu=ge.ReactCurrentDispatcher,ph=ge.ReactCurrentBatchConfig,ro=0,Ft=null,tn=null,ln=null,Fu=!1,il=!1,sl=0,JE=0;function xn(){throw Error(t(321))}function mh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Or(r[a],s[a]))return!1;return!0}function gh(r,s,a,d,f,g){if(ro=g,Ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Mu.current=r===null||r.memoizedState===null?tT:nT,r=a(d,f),il){g=0;do{if(il=!1,sl=0,25<=g)throw Error(t(301));g+=1,ln=tn=null,s.updateQueue=null,Mu.current=rT,r=a(d,f)}while(il)}if(Mu.current=zu,s=tn!==null&&tn.next!==null,ro=0,ln=tn=Ft=null,Fu=!1,s)throw Error(t(300));return r}function yh(){var r=sl!==0;return sl=0,r}function si(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Ft.memoizedState=ln=r:ln=ln.next=r,ln}function Er(){if(tn===null){var r=Ft.alternate;r=r!==null?r.memoizedState:null}else r=tn.next;var s=ln===null?Ft.memoizedState:ln.next;if(s!==null)ln=s,tn=r;else{if(r===null)throw Error(t(310));tn=r,r={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},ln===null?Ft.memoizedState=ln=r:ln=ln.next=r}return ln}function ol(r,s){return typeof s=="function"?s(r):s}function vh(r){var s=Er(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=tn,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var R=E=null,O=null,Q=g;do{var oe=Q.lane;if((ro&oe)===oe)O!==null&&(O=O.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),d=Q.hasEagerState?Q.eagerState:r(d,Q.action);else{var le={lane:oe,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};O===null?(R=O=le,E=d):O=O.next=le,Ft.lanes|=oe,io|=oe}Q=Q.next}while(Q!==null&&Q!==g);O===null?E=d:O.next=R,Or(d,s.memoizedState)||($n=!0),s.memoizedState=d,s.baseState=E,s.baseQueue=O,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do g=f.lane,Ft.lanes|=g,io|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function _h(r){var s=Er(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do g=r(g,E.action),E=E.next;while(E!==f);Or(g,s.memoizedState)||($n=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function Qm(){}function Ym(r,s){var a=Ft,d=Er(),f=s(),g=!Or(d.memoizedState,f);if(g&&(d.memoizedState=f,$n=!0),d=d.queue,wh(Zm.bind(null,a,d,r),[r]),d.getSnapshot!==s||g||ln!==null&&ln.memoizedState.tag&1){if(a.flags|=2048,al(9,Xm.bind(null,a,d,f,s),void 0,null),un===null)throw Error(t(349));(ro&30)!==0||Jm(a,s,f)}return f}function Jm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Ft.updateQueue,s===null?(s={lastEffect:null,stores:null},Ft.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Xm(r,s,a,d){s.value=a,s.getSnapshot=d,eg(s)&&tg(r)}function Zm(r,s,a){return a(function(){eg(s)&&tg(r)})}function eg(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Or(r,a)}catch{return!0}}function tg(r){var s=ki(r,1);s!==null&&jr(s,r,1,-1)}function ng(r){var s=si();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:r},s.queue=r,r=r.dispatch=eT.bind(null,Ft,r),[s.memoizedState,r]}function al(r,s,a,d){return r={tag:r,create:s,destroy:a,deps:d,next:null},s=Ft.updateQueue,s===null?(s={lastEffect:null,stores:null},Ft.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,s.lastEffect=r)),r}function rg(){return Er().memoizedState}function ju(r,s,a,d){var f=si();Ft.flags|=r,f.memoizedState=al(1|s,a,void 0,d===void 0?null:d)}function Uu(r,s,a,d){var f=Er();d=d===void 0?null:d;var g=void 0;if(tn!==null){var E=tn.memoizedState;if(g=E.destroy,d!==null&&mh(d,E.deps)){f.memoizedState=al(s,a,g,d);return}}Ft.flags|=r,f.memoizedState=al(1|s,a,g,d)}function ig(r,s){return ju(8390656,8,r,s)}function wh(r,s){return Uu(2048,8,r,s)}function sg(r,s){return Uu(4,2,r,s)}function og(r,s){return Uu(4,4,r,s)}function ag(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function lg(r,s,a){return a=a!=null?a.concat([r]):null,Uu(4,4,ag.bind(null,s,r),a)}function Eh(){}function ug(r,s){var a=Er();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&mh(s,d[1])?d[0]:(a.memoizedState=[r,s],r)}function cg(r,s){var a=Er();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&mh(s,d[1])?d[0]:(r=r(),a.memoizedState=[r,s],r)}function dg(r,s,a){return(ro&21)===0?(r.baseState&&(r.baseState=!1,$n=!0),r.memoizedState=a):(Or(a,s)||(a=qs(),Ft.lanes|=a,io|=a,r.baseState=!0),s)}function XE(r,s){var a=lt;lt=a!==0&&4>a?a:4,r(!0);var d=ph.transition;ph.transition={};try{r(!1),s()}finally{lt=a,ph.transition=d}}function hg(){return Er().memoizedState}function ZE(r,s,a){var d=hs(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},fg(r))pg(s,a);else if(a=Hm(r,s,a,d),a!==null){var f=Ln();jr(a,r,d,f),mg(a,s,d)}}function eT(r,s,a){var d=hs(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(fg(r))pg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,R=g(E,a);if(f.hasEagerState=!0,f.eagerState=R,Or(R,E)){var O=s.interleaved;O===null?(f.next=f,lh(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}a=Hm(r,s,f,d),a!==null&&(f=Ln(),jr(a,r,d,f),mg(a,s,d))}}function fg(r){var s=r.alternate;return r===Ft||s!==null&&s===Ft}function pg(r,s){il=Fu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function mg(r,s,a){if((a&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Ji(r,a)}}var zu={readContext:wr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},tT={readContext:wr,useCallback:function(r,s){return si().memoizedState=[r,s===void 0?null:s],r},useContext:wr,useEffect:ig,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,ju(4194308,4,ag.bind(null,s,r),a)},useLayoutEffect:function(r,s){return ju(4194308,4,r,s)},useInsertionEffect:function(r,s){return ju(4,2,r,s)},useMemo:function(r,s){var a=si();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var d=si();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=ZE.bind(null,Ft,r),[d.memoizedState,r]},useRef:function(r){var s=si();return r={current:r},s.memoizedState=r},useState:ng,useDebugValue:Eh,useDeferredValue:function(r){return si().memoizedState=r},useTransition:function(){var r=ng(!1),s=r[0];return r=XE.bind(null,r[1]),si().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var d=Ft,f=si();if(Ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),un===null)throw Error(t(349));(ro&30)!==0||Jm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,ig(Zm.bind(null,d,g,r),[r]),d.flags|=2048,al(9,Xm.bind(null,d,g,a,s),void 0,null),a},useId:function(){var r=si(),s=un.identifierPrefix;if(Ot){var a=Ri,d=Ai;a=(d&~(1<<32-st(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=sl++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=JE++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},nT={readContext:wr,useCallback:ug,useContext:wr,useEffect:wh,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:og,useMemo:cg,useReducer:vh,useRef:rg,useState:function(){return vh(ol)},useDebugValue:Eh,useDeferredValue:function(r){var s=Er();return dg(s,tn.memoizedState,r)},useTransition:function(){var r=vh(ol)[0],s=Er().memoizedState;return[r,s]},useMutableSource:Qm,useSyncExternalStore:Ym,useId:hg,unstable_isNewReconciler:!1},rT={readContext:wr,useCallback:ug,useContext:wr,useEffect:wh,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:og,useMemo:cg,useReducer:_h,useRef:rg,useState:function(){return _h(ol)},useDebugValue:Eh,useDeferredValue:function(r){var s=Er();return tn===null?s.memoizedState=r:dg(s,tn.memoizedState,r)},useTransition:function(){var r=_h(ol)[0],s=Er().memoizedState;return[r,s]},useMutableSource:Qm,useSyncExternalStore:Ym,useId:hg,unstable_isNewReconciler:!1};function Vr(r,s){if(r&&r.defaultProps){s=me({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Th(r,s,a,d){s=r.memoizedState,a=a(d,s),a=a==null?s:me({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Bu={isMounted:function(r){return(r=r._reactInternals)?we(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var d=Ln(),f=hs(r),g=Ni(d,f);g.payload=s,a!=null&&(g.callback=a),s=ls(r,g,f),s!==null&&(jr(s,r,f,d),Ou(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var d=Ln(),f=hs(r),g=Ni(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ls(r,g,f),s!==null&&(jr(s,r,f,d),Ou(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Ln(),d=hs(r),f=Ni(a,d);f.tag=2,s!=null&&(f.callback=s),s=ls(r,f,d),s!==null&&(jr(s,r,d,a),Ou(s,r,d))}};function gg(r,s,a,d,f,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,E):s.prototype&&s.prototype.isPureReactComponent?!Ga(a,d)||!Ga(f,g):!0}function yg(r,s,a){var d=!1,f=ss,g=s.contextType;return typeof g=="object"&&g!==null?g=wr(g):(f=Bn(s)?Xs:In.current,d=s.contextTypes,g=(d=d!=null)?Yo(r,f):ss),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Bu,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function vg(r,s,a,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==r&&Bu.enqueueReplaceState(s,s.state,null)}function Sh(r,s,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},uh(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=wr(g):(g=Bn(s)?Xs:In.current,f.context=Yo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Th(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Bu.enqueueReplaceState(f,f.state,null),Lu(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ia(r,s){try{var a="",d=s;do a+=be(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Ih(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function xh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var iT=typeof WeakMap=="function"?WeakMap:Map;function _g(r,s,a){a=Ni(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Qu||(Qu=!0,Uh=d),xh(r,s)},a}function wg(r,s,a){a=Ni(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){xh(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){xh(r,s),typeof d!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Eg(r,s,a){var d=r.pingCache;if(d===null){d=r.pingCache=new iT;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),r=vT.bind(null,r,s,a),s.then(r,r))}function Tg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Sg(r,s,a,d,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ni(-1,1),s.tag=2,ls(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var sT=ge.ReactCurrentOwner,$n=!1;function On(r,s,a,d){s.child=r===null?$m(s,null,a,d):ea(s,r.child,a,d)}function Ig(r,s,a,d,f){a=a.render;var g=s.ref;return na(s,f),d=gh(r,s,a,d,g,f),a=yh(),r!==null&&!$n?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,bi(r,s,f)):(Ot&&a&&Zd(s),s.flags|=1,On(r,s,d,f),s.child)}function xg(r,s,a,d,f){if(r===null){var g=a.type;return typeof g=="function"&&!Gh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Cg(r,s,g,d,f)):(r=tc(a.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ga,a(E,d)&&r.ref===s.ref)return bi(r,s,f)}return s.flags|=1,r=ps(g,d),r.ref=s.ref,r.return=s,s.child=r}function Cg(r,s,a,d,f){if(r!==null){var g=r.memoizedProps;if(Ga(g,d)&&r.ref===s.ref)if($n=!1,s.pendingProps=d=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&($n=!0);else return s.lanes=r.lanes,bi(r,s,f)}return Ch(r,s,a,d,f)}function Pg(r,s,a){var d=s.pendingProps,f=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(oa,lr),lr|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Pt(oa,lr),lr|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Pt(oa,lr),lr|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,Pt(oa,lr),lr|=d;return On(r,s,f,a),s.child}function Ag(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ch(r,s,a,d,f){var g=Bn(a)?Xs:In.current;return g=Yo(s,g),na(s,f),a=gh(r,s,a,d,g,f),d=yh(),r!==null&&!$n?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,bi(r,s,f)):(Ot&&d&&Zd(s),s.flags|=1,On(r,s,a,f),s.child)}function Rg(r,s,a,d,f){if(Bn(a)){var g=!0;Cu(s)}else g=!1;if(na(s,f),s.stateNode===null)Hu(r,s),yg(s,a,d),Sh(s,a,d,f),d=!0;else if(r===null){var E=s.stateNode,R=s.memoizedProps;E.props=R;var O=E.context,Q=a.contextType;typeof Q=="object"&&Q!==null?Q=wr(Q):(Q=Bn(a)?Xs:In.current,Q=Yo(s,Q));var oe=a.getDerivedStateFromProps,le=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function";le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==d||O!==Q)&&vg(s,E,d,Q),as=!1;var se=s.memoizedState;E.state=se,Lu(s,d,E,f),O=s.memoizedState,R!==d||se!==O||zn.current||as?(typeof oe=="function"&&(Th(s,a,oe,d),O=s.memoizedState),(R=as||gg(s,a,R,d,se,O,Q))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=O),E.props=d,E.state=O,E.context=Q,d=R):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{E=s.stateNode,Wm(r,s),R=s.memoizedProps,Q=s.type===s.elementType?R:Vr(s.type,R),E.props=Q,le=s.pendingProps,se=E.context,O=a.contextType,typeof O=="object"&&O!==null?O=wr(O):(O=Bn(a)?Xs:In.current,O=Yo(s,O));var ve=a.getDerivedStateFromProps;(oe=typeof ve=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==le||se!==O)&&vg(s,E,d,O),as=!1,se=s.memoizedState,E.state=se,Lu(s,d,E,f);var Pe=s.memoizedState;R!==le||se!==Pe||zn.current||as?(typeof ve=="function"&&(Th(s,a,ve,d),Pe=s.memoizedState),(Q=as||gg(s,a,Q,d,se,Pe,O)||!1)?(oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Pe,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Pe,O)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&se===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&se===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Pe),E.props=d,E.state=Pe,E.context=O,d=Q):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&se===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&se===r.memoizedState||(s.flags|=1024),d=!1)}return Ph(r,s,a,d,g,f)}function Ph(r,s,a,d,f,g){Ag(r,s);var E=(s.flags&128)!==0;if(!d&&!E)return f&&Om(s,a,!1),bi(r,s,g);d=s.stateNode,sT.current=s;var R=E&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&E?(s.child=ea(s,r.child,null,g),s.child=ea(s,null,R,g)):On(r,s,R,g),s.memoizedState=d.state,f&&Om(s,a,!0),s.child}function kg(r){var s=r.stateNode;s.pendingContext?bm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&bm(r,s.context,!1),ch(r,s.containerInfo)}function Ng(r,s,a,d,f){return Zo(),rh(f),s.flags|=256,On(r,s,a,d),s.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Rh(r){return{baseLanes:r,cachePool:null,transitions:null}}function bg(r,s,a){var d=s.pendingProps,f=Mt.current,g=!1,E=(s.flags&128)!==0,R;if((R=E)||(R=r!==null&&r.memoizedState===null?!1:(f&2)!==0),R?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Pt(Mt,f&1),r===null)return nh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=d.children,r=d.fallback,g?(d=s.mode,g=s.child,E={mode:"hidden",children:E},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=nc(E,d,0,null),r=lo(r,d,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Rh(a),s.memoizedState=Ah,r):kh(s,E));if(f=r.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return oT(r,s,E,d,R,f,a);if(g){g=d.fallback,E=s.mode,f=r.child,R=f.sibling;var O={mode:"hidden",children:d.children};return(E&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=O,s.deletions=null):(d=ps(f,O),d.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=ps(R,g):(g=lo(g,E,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,E=r.child.memoizedState,E=E===null?Rh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,s.memoizedState=Ah,d}return g=r.child,r=g.sibling,d=ps(g,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=d,s.memoizedState=null,d}function kh(r,s){return s=nc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function $u(r,s,a,d){return d!==null&&rh(d),ea(s,r.child,null,a),r=kh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function oT(r,s,a,d,f,g,E){if(a)return s.flags&256?(s.flags&=-257,d=Ih(Error(t(422))),$u(r,s,E,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=nc({mode:"visible",children:d.children},f,0,null),g=lo(g,f,E,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,(s.mode&1)!==0&&ea(s,r.child,null,E),s.child.memoizedState=Rh(E),s.memoizedState=Ah,g);if((s.mode&1)===0)return $u(r,s,E,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var R=d.dgst;return d=R,g=Error(t(419)),d=Ih(g,d,void 0),$u(r,s,E,d)}if(R=(E&r.childLanes)!==0,$n||R){if(d=un,d!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|E))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,ki(r,f),jr(d,r,f,-1))}return qh(),d=Ih(Error(t(421))),$u(r,s,E,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=_T.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,ar=rs(f.nextSibling),or=s,Ot=!0,Lr=null,r!==null&&(vr[_r++]=Ai,vr[_r++]=Ri,vr[_r++]=Zs,Ai=r.id,Ri=r.overflow,Zs=s),s=kh(s,d.children),s.flags|=4096,s)}function Dg(r,s,a){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),ah(r.return,s,a)}function Nh(r,s,a,d,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function Og(r,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if(On(r,s,d.children,a),d=Mt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Dg(r,a,s);else if(r.tag===19)Dg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(Pt(Mt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Vu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Nh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Vu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Nh(s,!0,a,null,g);break;case"together":Nh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function bi(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),io|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=ps(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=ps(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function aT(r,s,a){switch(s.tag){case 3:kg(s),Zo();break;case 5:Km(s);break;case 1:Bn(s.type)&&Cu(s);break;case 4:ch(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Pt(bu,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Pt(Mt,Mt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?bg(r,s,a):(Pt(Mt,Mt.current&1),r=bi(r,s,a),r!==null?r.sibling:null);Pt(Mt,Mt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(r.flags&128)!==0){if(d)return Og(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Pt(Mt,Mt.current),d)break;return null;case 22:case 23:return s.lanes=0,Pg(r,s,a)}return bi(r,s,a)}var Lg,bh,Vg,Mg;Lg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},bh=function(){},Vg=function(r,s,a,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,no(ii.current);var g=null;switch(a){case"input":f=hr(r,f),d=hr(r,d),g=[];break;case"select":f=me({},f,{value:void 0}),d=me({},d,{value:void 0}),g=[];break;case"textarea":f=Ct(r,f),d=Ct(r,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=Su)}Vn(a,d);var E;a=null;for(Q in f)if(!d.hasOwnProperty(Q)&&f.hasOwnProperty(Q)&&f[Q]!=null)if(Q==="style"){var R=f[Q];for(E in R)R.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(o.hasOwnProperty(Q)?g||(g=[]):(g=g||[]).push(Q,null));for(Q in d){var O=d[Q];if(R=f?.[Q],d.hasOwnProperty(Q)&&O!==R&&(O!=null||R!=null))if(Q==="style")if(R){for(E in R)!R.hasOwnProperty(E)||O&&O.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in O)O.hasOwnProperty(E)&&R[E]!==O[E]&&(a||(a={}),a[E]=O[E])}else a||(g||(g=[]),g.push(Q,a)),a=O;else Q==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,R=R?R.__html:void 0,O!=null&&R!==O&&(g=g||[]).push(Q,O)):Q==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push(Q,""+O):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(o.hasOwnProperty(Q)?(O!=null&&Q==="onScroll"&&At("scroll",r),g||R===O||(g=[])):(g=g||[]).push(Q,O))}a&&(g=g||[]).push("style",a);var Q=g;(s.updateQueue=Q)&&(s.flags|=4)}},Mg=function(r,s,a,d){a!==d&&(s.flags|=4)};function ll(r,s){if(!Ot)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Cn(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,s}function lT(r,s,a){var d=s.pendingProps;switch(eh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(s),null;case 1:return Bn(s.type)&&xu(),Cn(s),null;case 3:return d=s.stateNode,ra(),Rt(zn),Rt(In),fh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(ku(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Lr!==null&&($h(Lr),Lr=null))),bh(r,s),Cn(s),null;case 5:dh(s);var f=no(rl.current);if(a=s.type,r!==null&&s.stateNode!=null)Vg(r,s,a,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Cn(s),null}if(r=no(ii.current),ku(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[ri]=s,d[Xa]=g,r=(s.mode&1)!==0,a){case"dialog":At("cancel",d),At("close",d);break;case"iframe":case"object":case"embed":At("load",d);break;case"video":case"audio":for(f=0;f<Qa.length;f++)At(Qa[f],d);break;case"source":At("error",d);break;case"img":case"image":case"link":At("error",d),At("load",d);break;case"details":At("toggle",d);break;case"input":Wr(d,g),At("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},At("invalid",d);break;case"textarea":qr(d,g),At("invalid",d)}Vn(a,g),f=null;for(var E in g)if(g.hasOwnProperty(E)){var R=g[E];E==="children"?typeof R=="string"?d.textContent!==R&&(g.suppressHydrationWarning!==!0&&Tu(d.textContent,R,r),f=["children",R]):typeof R=="number"&&d.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&Tu(d.textContent,R,r),f=["children",""+R]):o.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&At("scroll",d)}switch(a){case"input":on(d),Wi(d,g,!0);break;case"textarea":on(d),k(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Su)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=W(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=E.createElement(a,{is:d.is}):(r=E.createElement(a),a==="select"&&(E=r,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):r=E.createElementNS(r,a),r[ri]=s,r[Xa]=d,Lg(r,s,!1,!1),s.stateNode=r;e:{switch(E=Ht(a,d),a){case"dialog":At("cancel",r),At("close",r),f=d;break;case"iframe":case"object":case"embed":At("load",r),f=d;break;case"video":case"audio":for(f=0;f<Qa.length;f++)At(Qa[f],r);f=d;break;case"source":At("error",r),f=d;break;case"img":case"image":case"link":At("error",r),At("load",r),f=d;break;case"details":At("toggle",r),f=d;break;case"input":Wr(r,d),f=hr(r,d),At("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=me({},d,{value:void 0}),At("invalid",r);break;case"textarea":qr(r,d),f=Ct(r,d),At("invalid",r);break;default:f=d}Vn(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var O=R[g];g==="style"?Tt(r,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&te(r,O)):g==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&ue(r,O):typeof O=="number"&&ue(r,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&At("scroll",r):O!=null&&de(r,g,O,E))}switch(a){case"input":on(r),Wi(r,d,!1);break;case"textarea":on(r),k(r);break;case"option":d.value!=null&&r.setAttribute("value",""+Ze(d.value));break;case"select":r.multiple=!!d.multiple,g=d.value,g!=null?Zn(r,!!d.multiple,g,!1):d.defaultValue!=null&&Zn(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Su)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Cn(s),null;case 6:if(r&&s.stateNode!=null)Mg(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=no(rl.current),no(ii.current),ku(s)){if(d=s.stateNode,a=s.memoizedProps,d[ri]=s,(g=d.nodeValue!==a)&&(r=or,r!==null))switch(r.tag){case 3:Tu(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Tu(d.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[ri]=s,s.stateNode=d}return Cn(s),null;case 13:if(Rt(Mt),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ot&&ar!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Um(),Zo(),s.flags|=98560,g=!1;else if(g=ku(s),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ri]=s}else Zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Cn(s),g=!1}else Lr!==null&&($h(Lr),Lr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Mt.current&1)!==0?nn===0&&(nn=3):qh())),s.updateQueue!==null&&(s.flags|=4),Cn(s),null);case 4:return ra(),bh(r,s),r===null&&Ya(s.stateNode.containerInfo),Cn(s),null;case 10:return oh(s.type._context),Cn(s),null;case 17:return Bn(s.type)&&xu(),Cn(s),null;case 19:if(Rt(Mt),g=s.memoizedState,g===null)return Cn(s),null;if(d=(s.flags&128)!==0,E=g.rendering,E===null)if(d)ll(g,!1);else{if(nn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=Vu(r),E!==null){for(s.flags|=128,ll(g,!1),d=E.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,r=d,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Pt(Mt,Mt.current&1|2),s.child}r=r.sibling}g.tail!==null&&nt()>aa&&(s.flags|=128,d=!0,ll(g,!1),s.lanes=4194304)}else{if(!d)if(r=Vu(E),r!==null){if(s.flags|=128,d=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ll(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ot)return Cn(s),null}else 2*nt()-g.renderingStartTime>aa&&a!==1073741824&&(s.flags|=128,d=!0,ll(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=nt(),s.sibling=null,a=Mt.current,Pt(Mt,d?a&1|2:a&1),s):(Cn(s),null);case 22:case 23:return Wh(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(lr&1073741824)!==0&&(Cn(s),s.subtreeFlags&6&&(s.flags|=8192)):Cn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function uT(r,s){switch(eh(s),s.tag){case 1:return Bn(s.type)&&xu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ra(),Rt(zn),Rt(In),fh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return dh(s),null;case 13:if(Rt(Mt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Zo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Rt(Mt),null;case 4:return ra(),null;case 10:return oh(s.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var Wu=!1,Pn=!1,cT=typeof WeakSet=="function"?WeakSet:Set,xe=null;function sa(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){zt(r,s,d)}else a.current=null}function Dh(r,s,a){try{a()}catch(d){zt(r,s,d)}}var Fg=!1;function dT(r,s){if(Wd=es,r=gm(),Md(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,R=-1,O=-1,Q=0,oe=0,le=r,se=null;t:for(;;){for(var ve;le!==a||f!==0&&le.nodeType!==3||(R=E+f),le!==g||d!==0&&le.nodeType!==3||(O=E+d),le.nodeType===3&&(E+=le.nodeValue.length),(ve=le.firstChild)!==null;)se=le,le=ve;for(;;){if(le===r)break t;if(se===a&&++Q===f&&(R=E),se===g&&++oe===d&&(O=E),(ve=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=ve}a=R===-1||O===-1?null:{start:R,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(qd={focusedElem:r,selectionRange:a},es=!1,xe=s;xe!==null;)if(s=xe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,xe=r;else for(;xe!==null;){s=xe;try{var Pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Re=Pe.memoizedProps,Bt=Pe.memoizedState,q=s.stateNode,M=q.getSnapshotBeforeUpdate(s.elementType===s.type?Re:Vr(s.type,Re),Bt);q.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var G=s.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){zt(s,s.return,ce)}if(r=s.sibling,r!==null){r.return=s.return,xe=r;break}xe=s.return}return Pe=Fg,Fg=!1,Pe}function ul(r,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Dh(s,a,g)}f=f.next}while(f!==d)}}function qu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function Oh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function jg(r){var s=r.alternate;s!==null&&(r.alternate=null,jg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ri],delete s[Xa],delete s[Yd],delete s[GE],delete s[KE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ug(r){return r.tag===5||r.tag===3||r.tag===4}function zg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ug(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Lh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Su));else if(d!==4&&(r=r.child,r!==null))for(Lh(r,s,a),r=r.sibling;r!==null;)Lh(r,s,a),r=r.sibling}function Vh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(Vh(r,s,a),r=r.sibling;r!==null;)Vh(r,s,a),r=r.sibling}var gn=null,Mr=!1;function us(r,s,a){for(a=a.child;a!==null;)Bg(r,s,a),a=a.sibling}function Bg(r,s,a){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(gt,a)}catch{}switch(a.tag){case 5:Pn||sa(a,s);case 6:var d=gn,f=Mr;gn=null,us(r,s,a),gn=d,Mr=f,gn!==null&&(Mr?(r=gn,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):gn.removeChild(a.stateNode));break;case 18:gn!==null&&(Mr?(r=gn,a=a.stateNode,r.nodeType===8?Qd(r.parentNode,a):r.nodeType===1&&Qd(r,a),br(r)):Qd(gn,a.stateNode));break;case 4:d=gn,f=Mr,gn=a.stateNode.containerInfo,Mr=!0,us(r,s,a),gn=d,Mr=f;break;case 0:case 11:case 14:case 15:if(!Pn&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&Dh(a,s,E),f=f.next}while(f!==d)}us(r,s,a);break;case 1:if(!Pn&&(sa(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(R){zt(a,s,R)}us(r,s,a);break;case 21:us(r,s,a);break;case 22:a.mode&1?(Pn=(d=Pn)||a.memoizedState!==null,us(r,s,a),Pn=d):us(r,s,a);break;default:us(r,s,a)}}function $g(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new cT),s.forEach(function(d){var f=wT.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Fr(r,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=r,E=s,R=E;e:for(;R!==null;){switch(R.tag){case 5:gn=R.stateNode,Mr=!1;break e;case 3:gn=R.stateNode.containerInfo,Mr=!0;break e;case 4:gn=R.stateNode.containerInfo,Mr=!0;break e}R=R.return}if(gn===null)throw Error(t(160));Bg(g,E,f),gn=null,Mr=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch(Q){zt(f,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Hg(s,r),s=s.sibling}function Hg(r,s){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Fr(s,r),oi(r),d&4){try{ul(3,r,r.return),qu(3,r)}catch(Re){zt(r,r.return,Re)}try{ul(5,r,r.return)}catch(Re){zt(r,r.return,Re)}}break;case 1:Fr(s,r),oi(r),d&512&&a!==null&&sa(a,a.return);break;case 5:if(Fr(s,r),oi(r),d&512&&a!==null&&sa(a,a.return),r.flags&32){var f=r.stateNode;try{ue(f,"")}catch(Re){zt(r,r.return,Re)}}if(d&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,R=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&bn(f,g),Ht(R,E);var Q=Ht(R,g);for(E=0;E<O.length;E+=2){var oe=O[E],le=O[E+1];oe==="style"?Tt(f,le):oe==="dangerouslySetInnerHTML"?te(f,le):oe==="children"?ue(f,le):de(f,oe,le,Q)}switch(R){case"input":_i(f,g);break;case"textarea":En(f,g);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ve=g.value;ve!=null?Zn(f,!!g.multiple,ve,!1):se!==!!g.multiple&&(g.defaultValue!=null?Zn(f,!!g.multiple,g.defaultValue,!0):Zn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Xa]=g}catch(Re){zt(r,r.return,Re)}}break;case 6:if(Fr(s,r),oi(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(Re){zt(r,r.return,Re)}}break;case 3:if(Fr(s,r),oi(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{br(s.containerInfo)}catch(Re){zt(r,r.return,Re)}break;case 4:Fr(s,r),oi(r);break;case 13:Fr(s,r),oi(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(jh=nt())),d&4&&$g(r);break;case 22:if(oe=a!==null&&a.memoizedState!==null,r.mode&1?(Pn=(Q=Pn)||oe,Fr(s,r),Pn=Q):Fr(s,r),oi(r),d&8192){if(Q=r.memoizedState!==null,(r.stateNode.isHidden=Q)&&!oe&&(r.mode&1)!==0)for(xe=r,oe=r.child;oe!==null;){for(le=xe=oe;xe!==null;){switch(se=xe,ve=se.child,se.tag){case 0:case 11:case 14:case 15:ul(4,se,se.return);break;case 1:sa(se,se.return);var Pe=se.stateNode;if(typeof Pe.componentWillUnmount=="function"){d=se,a=se.return;try{s=d,Pe.props=s.memoizedProps,Pe.state=s.memoizedState,Pe.componentWillUnmount()}catch(Re){zt(d,a,Re)}}break;case 5:sa(se,se.return);break;case 22:if(se.memoizedState!==null){Gg(le);continue}}ve!==null?(ve.return=se,xe=ve):Gg(le)}oe=oe.sibling}e:for(oe=null,le=r;;){if(le.tag===5){if(oe===null){oe=le;try{f=le.stateNode,Q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=le.stateNode,O=le.memoizedProps.style,E=O!=null&&O.hasOwnProperty("display")?O.display:null,R.style.display=ut("display",E))}catch(Re){zt(r,r.return,Re)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=Q?"":le.memoizedProps}catch(Re){zt(r,r.return,Re)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===r)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===r)break e;for(;le.sibling===null;){if(le.return===null||le.return===r)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Fr(s,r),oi(r),d&4&&$g(r);break;case 21:break;default:Fr(s,r),oi(r)}}function oi(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Ug(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(ue(f,""),d.flags&=-33);var g=zg(r);Vh(r,g,f);break;case 3:case 4:var E=d.stateNode.containerInfo,R=zg(r);Lh(r,R,E);break;default:throw Error(t(161))}}catch(O){zt(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function hT(r,s,a){xe=r,Wg(r)}function Wg(r,s,a){for(var d=(r.mode&1)!==0;xe!==null;){var f=xe,g=f.child;if(f.tag===22&&d){var E=f.memoizedState!==null||Wu;if(!E){var R=f.alternate,O=R!==null&&R.memoizedState!==null||Pn;R=Wu;var Q=Pn;if(Wu=E,(Pn=O)&&!Q)for(xe=f;xe!==null;)E=xe,O=E.child,E.tag===22&&E.memoizedState!==null?Kg(f):O!==null?(O.return=E,xe=O):Kg(f);for(;g!==null;)xe=g,Wg(g),g=g.sibling;xe=f,Wu=R,Pn=Q}qg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,xe=g):qg(r)}}function qg(r){for(;xe!==null;){var s=xe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Pn||qu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Pn)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Vr(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Gm(s,g,d);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Gm(s,E,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var oe=Q.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&br(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pn||s.flags&512&&Oh(s)}catch(se){zt(s,s.return,se)}}if(s===r){xe=null;break}if(a=s.sibling,a!==null){a.return=s.return,xe=a;break}xe=s.return}}function Gg(r){for(;xe!==null;){var s=xe;if(s===r){xe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,xe=a;break}xe=s.return}}function Kg(r){for(;xe!==null;){var s=xe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{qu(4,s)}catch(O){zt(s,a,O)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(O){zt(s,f,O)}}var g=s.return;try{Oh(s)}catch(O){zt(s,g,O)}break;case 5:var E=s.return;try{Oh(s)}catch(O){zt(s,E,O)}}}catch(O){zt(s,s.return,O)}if(s===r){xe=null;break}var R=s.sibling;if(R!==null){R.return=s.return,xe=R;break}xe=s.return}}var fT=Math.ceil,Gu=ge.ReactCurrentDispatcher,Mh=ge.ReactCurrentOwner,Tr=ge.ReactCurrentBatchConfig,ht=0,un=null,Gt=null,yn=0,lr=0,oa=is(0),nn=0,cl=null,io=0,Ku=0,Fh=0,dl=null,Hn=null,jh=0,aa=1/0,Di=null,Qu=!1,Uh=null,cs=null,Yu=!1,ds=null,Ju=0,hl=0,zh=null,Xu=-1,Zu=0;function Ln(){return(ht&6)!==0?nt():Xu!==-1?Xu:Xu=nt()}function hs(r){return(r.mode&1)===0?1:(ht&2)!==0&&yn!==0?yn&-yn:YE.transition!==null?(Zu===0&&(Zu=qs()),Zu):(r=lt,r!==0||(r=window.event,r=r===void 0?16:Ua(r.type)),r)}function jr(r,s,a,d){if(50<hl)throw hl=0,zh=null,Error(t(185));Yi(r,a,d),((ht&2)===0||r!==un)&&(r===un&&((ht&2)===0&&(Ku|=a),nn===4&&fs(r,yn)),Wn(r,d),a===1&&ht===0&&(s.mode&1)===0&&(aa=nt()+500,Pu&&os()))}function Wn(r,s){var a=r.callbackNode;Ei(r,s);var d=Ws(r,r===un?yn:0);if(d===0)a!==null&&pr(a),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(a!=null&&pr(a),s===1)r.tag===0?QE(Yg.bind(null,r)):Lm(Yg.bind(null,r)),WE(function(){(ht&6)===0&&os()}),a=null;else{switch(Xi(d)){case 1:a=nr;break;case 4:a=Sn;break;case 16:a=fn;break;case 536870912:a=rt;break;default:a=fn}a=iy(a,Qg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Qg(r,s){if(Xu=-1,Zu=0,(ht&6)!==0)throw Error(t(327));var a=r.callbackNode;if(la()&&r.callbackNode!==a)return null;var d=Ws(r,r===un?yn:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=ec(r,d);else{s=d;var f=ht;ht|=2;var g=Xg();(un!==r||yn!==s)&&(Di=null,aa=nt()+500,oo(r,s));do try{gT();break}catch(R){Jg(r,R)}while(!0);sh(),Gu.current=g,ht=f,Gt!==null?s=0:(un=null,yn=0,s=nn)}if(s!==0){if(s===2&&(f=rr(r),f!==0&&(d=f,s=Bh(r,f))),s===1)throw a=cl,oo(r,0),fs(r,d),Wn(r,nt()),a;if(s===6)fs(r,d);else{if(f=r.current.alternate,(d&30)===0&&!pT(f)&&(s=ec(r,d),s===2&&(g=rr(r),g!==0&&(d=g,s=Bh(r,g))),s===1))throw a=cl,oo(r,0),fs(r,d),Wn(r,nt()),a;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ao(r,Hn,Di);break;case 3:if(fs(r,d),(d&130023424)===d&&(s=jh+500-nt(),10<s)){if(Ws(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){Ln(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Kd(ao.bind(null,r,Hn,Di),s);break}ao(r,Hn,Di);break;case 4:if(fs(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var E=31-st(d);g=1<<E,E=s[E],E>f&&(f=E),d&=~g}if(d=f,d=nt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*fT(d/1960))-d,10<d){r.timeoutHandle=Kd(ao.bind(null,r,Hn,Di),d);break}ao(r,Hn,Di);break;case 5:ao(r,Hn,Di);break;default:throw Error(t(329))}}}return Wn(r,nt()),r.callbackNode===a?Qg.bind(null,r):null}function Bh(r,s){var a=dl;return r.current.memoizedState.isDehydrated&&(oo(r,s).flags|=256),r=ec(r,s),r!==2&&(s=Hn,Hn=a,s!==null&&$h(s)),r}function $h(r){Hn===null?Hn=r:Hn.push.apply(Hn,r)}function pT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Or(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fs(r,s){for(s&=~Fh,s&=~Ku,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-st(s),d=1<<a;r[a]=-1,s&=~d}}function Yg(r){if((ht&6)!==0)throw Error(t(327));la();var s=Ws(r,0);if((s&1)===0)return Wn(r,nt()),null;var a=ec(r,s);if(r.tag!==0&&a===2){var d=rr(r);d!==0&&(s=d,a=Bh(r,d))}if(a===1)throw a=cl,oo(r,0),fs(r,s),Wn(r,nt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ao(r,Hn,Di),Wn(r,nt()),null}function Hh(r,s){var a=ht;ht|=1;try{return r(s)}finally{ht=a,ht===0&&(aa=nt()+500,Pu&&os())}}function so(r){ds!==null&&ds.tag===0&&(ht&6)===0&&la();var s=ht;ht|=1;var a=Tr.transition,d=lt;try{if(Tr.transition=null,lt=1,r)return r()}finally{lt=d,Tr.transition=a,ht=s,(ht&6)===0&&os()}}function Wh(){lr=oa.current,Rt(oa)}function oo(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,HE(a)),Gt!==null)for(a=Gt.return;a!==null;){var d=a;switch(eh(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&xu();break;case 3:ra(),Rt(zn),Rt(In),fh();break;case 5:dh(d);break;case 4:ra();break;case 13:Rt(Mt);break;case 19:Rt(Mt);break;case 10:oh(d.type._context);break;case 22:case 23:Wh()}a=a.return}if(un=r,Gt=r=ps(r.current,null),yn=lr=s,nn=0,cl=null,Fh=Ku=io=0,Hn=dl=null,to!==null){for(s=0;s<to.length;s++)if(a=to[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var E=g.next;g.next=f,d.next=E}a.pending=d}to=null}return r}function Jg(r,s){do{var a=Gt;try{if(sh(),Mu.current=zu,Fu){for(var d=Ft.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Fu=!1}if(ro=0,ln=tn=Ft=null,il=!1,sl=0,Mh.current=null,a===null||a.return===null){nn=1,cl=s,Gt=null;break}e:{var g=r,E=a.return,R=a,O=s;if(s=yn,R.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var Q=O,oe=R,le=oe.tag;if((oe.mode&1)===0&&(le===0||le===11||le===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ve=Tg(E);if(ve!==null){ve.flags&=-257,Sg(ve,E,R,g,s),ve.mode&1&&Eg(g,Q,s),s=ve,O=Q;var Pe=s.updateQueue;if(Pe===null){var Re=new Set;Re.add(O),s.updateQueue=Re}else Pe.add(O);break e}else{if((s&1)===0){Eg(g,Q,s),qh();break e}O=Error(t(426))}}else if(Ot&&R.mode&1){var Bt=Tg(E);if(Bt!==null){(Bt.flags&65536)===0&&(Bt.flags|=256),Sg(Bt,E,R,g,s),rh(ia(O,R));break e}}g=O=ia(O,R),nn!==4&&(nn=2),dl===null?dl=[g]:dl.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var q=_g(g,O,s);qm(g,q);break e;case 1:R=O;var M=g.type,G=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(cs===null||!cs.has(G)))){g.flags|=65536,s&=-s,g.lanes|=s;var ce=wg(g,R,s);qm(g,ce);break e}}g=g.return}while(g!==null)}ey(a)}catch(Ne){s=Ne,Gt===a&&a!==null&&(Gt=a=a.return);continue}break}while(!0)}function Xg(){var r=Gu.current;return Gu.current=zu,r===null?zu:r}function qh(){(nn===0||nn===3||nn===2)&&(nn=4),un===null||(io&268435455)===0&&(Ku&268435455)===0||fs(un,yn)}function ec(r,s){var a=ht;ht|=2;var d=Xg();(un!==r||yn!==s)&&(Di=null,oo(r,s));do try{mT();break}catch(f){Jg(r,f)}while(!0);if(sh(),ht=a,Gu.current=d,Gt!==null)throw Error(t(261));return un=null,yn=0,nn}function mT(){for(;Gt!==null;)Zg(Gt)}function gT(){for(;Gt!==null&&!Qr();)Zg(Gt)}function Zg(r){var s=ry(r.alternate,r,lr);r.memoizedProps=r.pendingProps,s===null?ey(r):Gt=s,Mh.current=null}function ey(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=lT(a,s,lr),a!==null){Gt=a;return}}else{if(a=uT(a,s),a!==null){a.flags&=32767,Gt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{nn=6,Gt=null;return}}if(s=s.sibling,s!==null){Gt=s;return}Gt=s=r}while(s!==null);nn===0&&(nn=5)}function ao(r,s,a){var d=lt,f=Tr.transition;try{Tr.transition=null,lt=1,yT(r,s,a,d)}finally{Tr.transition=f,lt=d}return null}function yT(r,s,a,d){do la();while(ds!==null);if((ht&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(xt(r,g),r===un&&(Gt=un=null,yn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Yu||(Yu=!0,iy(fn,function(){return la(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Tr.transition,Tr.transition=null;var E=lt;lt=1;var R=ht;ht|=4,Mh.current=null,dT(r,a),Hg(a,r),ME(qd),es=!!Wd,qd=Wd=null,r.current=a,hT(a),tr(),ht=R,lt=E,Tr.transition=g}else r.current=a;if(Yu&&(Yu=!1,ds=r,Ju=f),g=r.pendingLanes,g===0&&(cs=null),Jr(a.stateNode),Wn(r,nt()),s!==null)for(d=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Qu)throw Qu=!1,r=Uh,Uh=null,r;return(Ju&1)!==0&&r.tag!==0&&la(),g=r.pendingLanes,(g&1)!==0?r===zh?hl++:(hl=0,zh=r):hl=0,os(),null}function la(){if(ds!==null){var r=Xi(Ju),s=Tr.transition,a=lt;try{if(Tr.transition=null,lt=16>r?16:r,ds===null)var d=!1;else{if(r=ds,ds=null,Ju=0,(ht&6)!==0)throw Error(t(331));var f=ht;for(ht|=4,xe=r.current;xe!==null;){var g=xe,E=g.child;if((xe.flags&16)!==0){var R=g.deletions;if(R!==null){for(var O=0;O<R.length;O++){var Q=R[O];for(xe=Q;xe!==null;){var oe=xe;switch(oe.tag){case 0:case 11:case 15:ul(8,oe,g)}var le=oe.child;if(le!==null)le.return=oe,xe=le;else for(;xe!==null;){oe=xe;var se=oe.sibling,ve=oe.return;if(jg(oe),oe===Q){xe=null;break}if(se!==null){se.return=ve,xe=se;break}xe=ve}}}var Pe=g.alternate;if(Pe!==null){var Re=Pe.child;if(Re!==null){Pe.child=null;do{var Bt=Re.sibling;Re.sibling=null,Re=Bt}while(Re!==null)}}xe=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,xe=E;else e:for(;xe!==null;){if(g=xe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ul(9,g,g.return)}var q=g.sibling;if(q!==null){q.return=g.return,xe=q;break e}xe=g.return}}var M=r.current;for(xe=M;xe!==null;){E=xe;var G=E.child;if((E.subtreeFlags&2064)!==0&&G!==null)G.return=E,xe=G;else e:for(E=M;xe!==null;){if(R=xe,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:qu(9,R)}}catch(Ne){zt(R,R.return,Ne)}if(R===E){xe=null;break e}var ce=R.sibling;if(ce!==null){ce.return=R.return,xe=ce;break e}xe=R.return}}if(ht=f,os(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(gt,r)}catch{}d=!0}return d}finally{lt=a,Tr.transition=s}}return!1}function ty(r,s,a){s=ia(a,s),s=_g(r,s,1),r=ls(r,s,1),s=Ln(),r!==null&&(Yi(r,1,s),Wn(r,s))}function zt(r,s,a){if(r.tag===3)ty(r,r,a);else for(;s!==null;){if(s.tag===3){ty(s,r,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cs===null||!cs.has(d))){r=ia(a,r),r=wg(s,r,1),s=ls(s,r,1),r=Ln(),s!==null&&(Yi(s,1,r),Wn(s,r));break}}s=s.return}}function vT(r,s,a){var d=r.pingCache;d!==null&&d.delete(s),s=Ln(),r.pingedLanes|=r.suspendedLanes&a,un===r&&(yn&a)===a&&(nn===4||nn===3&&(yn&130023424)===yn&&500>nt()-jh?oo(r,0):Fh|=a),Wn(r,s)}function ny(r,s){s===0&&((r.mode&1)===0?s=1:(s=No,No<<=1,(No&130023424)===0&&(No=4194304)));var a=Ln();r=ki(r,s),r!==null&&(Yi(r,s,a),Wn(r,a))}function _T(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),ny(r,a)}function wT(r,s){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),ny(r,a)}var ry;ry=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||zn.current)$n=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return $n=!1,aT(r,s,a);$n=(r.flags&131072)!==0}else $n=!1,Ot&&(s.flags&1048576)!==0&&Vm(s,Ru,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Hu(r,s),r=s.pendingProps;var f=Yo(s,In.current);na(s,a),f=gh(null,s,d,r,f,a);var g=yh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Bn(d)?(g=!0,Cu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,uh(s),f.updater=Bu,s.stateNode=f,f._reactInternals=s,Sh(s,d,r,a),s=Ph(null,s,d,!0,g,a)):(s.tag=0,Ot&&g&&Zd(s),On(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Hu(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=TT(d),r=Vr(d,r),f){case 0:s=Ch(null,s,d,r,a);break e;case 1:s=Rg(null,s,d,r,a);break e;case 11:s=Ig(null,s,d,r,a);break e;case 14:s=xg(null,s,d,Vr(d.type,r),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vr(d,f),Ch(r,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vr(d,f),Rg(r,s,d,f,a);case 3:e:{if(kg(s),r===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,Wm(r,s),Lu(s,d,null,a);var E=s.memoizedState;if(d=E.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ia(Error(t(423)),s),s=Ng(r,s,d,a,f);break e}else if(d!==f){f=ia(Error(t(424)),s),s=Ng(r,s,d,a,f);break e}else for(ar=rs(s.stateNode.containerInfo.firstChild),or=s,Ot=!0,Lr=null,a=$m(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zo(),d===f){s=bi(r,s,a);break e}On(r,s,d,a)}s=s.child}return s;case 5:return Km(s),r===null&&nh(s),d=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,E=f.children,Gd(d,f)?E=null:g!==null&&Gd(d,g)&&(s.flags|=32),Ag(r,s),On(r,s,E,a),s.child;case 6:return r===null&&nh(s),null;case 13:return bg(r,s,a);case 4:return ch(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=ea(s,null,d,a):On(r,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vr(d,f),Ig(r,s,d,f,a);case 7:return On(r,s,s.pendingProps,a),s.child;case 8:return On(r,s,s.pendingProps.children,a),s.child;case 12:return On(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,E=f.value,Pt(bu,d._currentValue),d._currentValue=E,g!==null)if(Or(g.value,E)){if(g.children===f.children&&!zn.current){s=bi(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){E=g.child;for(var O=R.firstContext;O!==null;){if(O.context===d){if(g.tag===1){O=Ni(-1,a&-a),O.tag=2;var Q=g.updateQueue;if(Q!==null){Q=Q.shared;var oe=Q.pending;oe===null?O.next=O:(O.next=oe.next,oe.next=O),Q.pending=O}}g.lanes|=a,O=g.alternate,O!==null&&(O.lanes|=a),ah(g.return,a,s),R.lanes|=a;break}O=O.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,R=E.alternate,R!==null&&(R.lanes|=a),ah(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}On(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,na(s,a),f=wr(f),d=d(f),s.flags|=1,On(r,s,d,a),s.child;case 14:return d=s.type,f=Vr(d,s.pendingProps),f=Vr(d.type,f),xg(r,s,d,f,a);case 15:return Cg(r,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vr(d,f),Hu(r,s),s.tag=1,Bn(d)?(r=!0,Cu(s)):r=!1,na(s,a),yg(s,d,f),Sh(s,d,f,a),Ph(null,s,d,!0,r,a);case 19:return Og(r,s,a);case 22:return Pg(r,s,a)}throw Error(t(156,s.tag))};function iy(r,s){return _t(r,s)}function ET(r,s,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(r,s,a,d){return new ET(r,s,a,d)}function Gh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function TT(r){if(typeof r=="function")return Gh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===vt)return 14}return 2}function ps(r,s){var a=r.alternate;return a===null?(a=Sr(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function tc(r,s,a,d,f,g){var E=2;if(d=r,typeof r=="function")Gh(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case x:return lo(a.children,f,g,s);case C:E=8,f|=8;break;case A:return r=Sr(12,a,s,f|2),r.elementType=A,r.lanes=g,r;case N:return r=Sr(13,a,s,f),r.elementType=N,r.lanes=g,r;case Ye:return r=Sr(19,a,s,f),r.elementType=Ye,r.lanes=g,r;case it:return nc(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:E=10;break e;case L:E=9;break e;case F:E=11;break e;case vt:E=14;break e;case bt:E=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Sr(E,a,s,f),s.elementType=r,s.type=d,s.lanes=g,s}function lo(r,s,a,d){return r=Sr(7,r,d,s),r.lanes=a,r}function nc(r,s,a,d){return r=Sr(22,r,d,s),r.elementType=it,r.lanes=a,r.stateNode={isHidden:!1},r}function Kh(r,s,a){return r=Sr(6,r,null,s),r.lanes=a,r}function Qh(r,s,a){return s=Sr(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function ST(r,s,a,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qi(0),this.expirationTimes=Qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Yh(r,s,a,d,f,g,E,R,O){return r=new ST(r,s,a,R,O),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Sr(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},uh(g),r}function IT(r,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fe,key:d==null?null:""+d,children:r,containerInfo:s,implementation:a}}function sy(r){if(!r)return ss;r=r._reactInternals;e:{if(we(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Bn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Bn(a))return Dm(r,a,s)}return s}function oy(r,s,a,d,f,g,E,R,O){return r=Yh(a,d,!0,r,f,g,E,R,O),r.context=sy(null),a=r.current,d=Ln(),f=hs(a),g=Ni(d,f),g.callback=s??null,ls(a,g,f),r.current.lanes=f,Yi(r,f,d),Wn(r,d),r}function rc(r,s,a,d){var f=s.current,g=Ln(),E=hs(f);return a=sy(a),s.context===null?s.context=a:s.pendingContext=a,s=Ni(g,E),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=ls(f,s,E),r!==null&&(jr(r,f,E,g),Ou(r,f,E)),E}function ic(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ay(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Jh(r,s){ay(r,s),(r=r.alternate)&&ay(r,s)}function xT(){return null}var ly=typeof reportError=="function"?reportError:function(r){console.error(r)};function Xh(r){this._internalRoot=r}sc.prototype.render=Xh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));rc(r,s,null,null)},sc.prototype.unmount=Xh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;so(function(){rc(null,r,null,null)}),s[Ci]=null}};function sc(r){this._internalRoot=r}sc.prototype.unstable_scheduleHydration=function(r){if(r){var s=su();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Zr.length&&s!==0&&s<Zr[a].priority;a++);Zr.splice(a,0,r),a===0&&lu(r)}};function Zh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function oc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function uy(){}function CT(r,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var Q=ic(E);g.call(Q)}}var E=oy(s,d,r,0,null,!1,!1,"",uy);return r._reactRootContainer=E,r[Ci]=E.current,Ya(r.nodeType===8?r.parentNode:r),so(),E}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var R=d;d=function(){var Q=ic(O);R.call(Q)}}var O=Yh(r,0,!1,null,null,!1,!1,"",uy);return r._reactRootContainer=O,r[Ci]=O.current,Ya(r.nodeType===8?r.parentNode:r),so(function(){rc(s,O,a,d)}),O}function ac(r,s,a,d,f){var g=a._reactRootContainer;if(g){var E=g;if(typeof f=="function"){var R=f;f=function(){var O=ic(E);R.call(O)}}rc(s,E,r,f)}else E=CT(a,s,r,f,d);return ic(E)}ru=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ki(s.pendingLanes);a!==0&&(Ji(s,a|1),Wn(s,nt()),(ht&6)===0&&(aa=nt()+500,os()))}break;case 13:so(function(){var d=ki(r,1);if(d!==null){var f=Ln();jr(d,r,1,f)}}),Jh(r,1)}},bo=function(r){if(r.tag===13){var s=ki(r,134217728);if(s!==null){var a=Ln();jr(s,r,134217728,a)}Jh(r,134217728)}},iu=function(r){if(r.tag===13){var s=hs(r),a=ki(r,s);if(a!==null){var d=Ln();jr(a,r,s,d)}Jh(r,s)}},su=function(){return lt},ou=function(r,s){var a=lt;try{return lt=r,s()}finally{lt=a}},wi=function(r,s,a){switch(s){case"input":if(_i(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==r&&d.form===r.form){var f=Iu(d);if(!f)throw Error(t(90));It(d),_i(d,f)}}}break;case"textarea":En(r,a);break;case"select":s=a.value,s!=null&&Zn(r,!!a.multiple,s,!1)}},Gr=Hh,Kr=so;var PT={usingClientEntryPoint:!1,Events:[Za,Ko,Iu,er,Bs,Hh]},fl={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AT={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ft(r),r===null?null:r.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||xT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{gt=lc.inject(AT),Wt=lc}catch{}}return qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT,qn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(s))throw Error(t(200));return IT(r,s,null,a)},qn.createRoot=function(r,s){if(!Zh(r))throw Error(t(299));var a=!1,d="",f=ly;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Yh(r,1,!1,null,null,a,!1,d,f),r[Ci]=s.current,Ya(r.nodeType===8?r.parentNode:r),new Xh(s)},qn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ft(s),r=r===null?null:r.stateNode,r},qn.flushSync=function(r){return so(r)},qn.hydrate=function(r,s,a){if(!oc(s))throw Error(t(200));return ac(null,r,s,!0,a)},qn.hydrateRoot=function(r,s,a){if(!Zh(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",E=ly;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=oy(s,null,r,1,a??null,f,!1,g,E),r[Ci]=s.current,Ya(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new sc(s)},qn.render=function(r,s,a){if(!oc(s))throw Error(t(200));return ac(null,r,s,!1,a)},qn.unmountComponentAtNode=function(r){if(!oc(r))throw Error(t(40));return r._reactRootContainer?(so(function(){ac(null,null,r,!1,function(){r._reactRootContainer=null,r[Ci]=null})}),!0):!1},qn.unstable_batchedUpdates=Hh,qn.unstable_renderSubtreeIntoContainer=function(r,s,a,d){if(!oc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ac(r,s,a,!1,d)},qn.version="18.3.1-next-f1338f8080-20240426",qn}var yy;function x_(){if(yy)return nf.exports;yy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),nf.exports=VT(),nf.exports}var vy;function MT(){if(vy)return uc;vy=1;var n=x_();return uc.createRoot=n.createRoot,uc.hydrateRoot=n.hydrateRoot,uc}var FT=MT();const jT=Xf(FT);var C_=x_();const UT=Xf(C_),zT=S_({__proto__:null,default:UT},[C_]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lt(){return Lt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Lt.apply(this,arguments)}var Qt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Qt||(Qt={}));const _y="popstate";function BT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:h}=i.location;return bl("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:yo(o)}return HT(e,t,null,n)}function Je(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ea(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $T(){return Math.random().toString(36).substr(2,8)}function wy(n,e){return{usr:n.state,key:n.key,idx:e}}function bl(n,e,t,i){return t===void 0&&(t=null),Lt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ms(e):e,{state:t,key:e&&e.key||i||$T()})}function yo(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ms(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function HT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,h=Qt.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(Lt({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function w(){h=Qt.Pop;let H=_(),pe=H==null?null:H-y;y=H,p&&p({action:h,location:j.location,delta:pe})}function S(H,pe){h=Qt.Push;let ee=bl(j.location,H,pe);y=_()+1;let de=wy(ee,y),ge=j.createHref(ee);try{c.pushState(de,"",ge)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;o.location.assign(ge)}l&&p&&p({action:h,location:j.location,delta:1})}function P(H,pe){h=Qt.Replace;let ee=bl(j.location,H,pe);y=_();let de=wy(ee,y),ge=j.createHref(ee);c.replaceState(de,"",ge),l&&p&&p({action:h,location:j.location,delta:0})}function V(H){let pe=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof H=="string"?H:yo(H);return ee=ee.replace(/ $/,"%20"),Je(pe,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,pe)}let j={get action(){return h},get location(){return n(o,c)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(_y,w),p=H,()=>{o.removeEventListener(_y,w),p=null}},createHref(H){return e(o,H)},createURL:V,encodeLocation(H){let pe=V(H);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:S,replace:P,go(H){return c.go(H)}};return j}var Et;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Et||(Et={}));const WT=new Set(["lazy","caseSensitive","path","id","index","children"]);function qT(n){return n.index===!0}function Rc(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((o,l)=>{let c=[...t,String(l)],h=typeof o.id=="string"?o.id:c.join("-");if(Je(o.index!==!0||!o.children,"Cannot specify children on an index route"),Je(!i[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),qT(o)){let p=Lt({},o,e(o),{id:h});return i[h]=p,p}else{let p=Lt({},o,e(o),{id:h,children:void 0});return i[h]=p,o.children&&(p.children=Rc(o.children,e,c,i)),p}})}function ho(n,e,t){return t===void 0&&(t="/"),vc(n,e,t,!1)}function vc(n,e,t,i){let o=typeof e=="string"?Ms(e):e,l=ji(o.pathname||"/",t);if(l==null)return null;let c=P_(n);KT(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let y=sS(l);h=rS(c[p],y,i)}return h}function GT(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function P_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Je(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Vi([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),P_(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:tS(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of A_(l.path))o(l,c,p)}),e}function A_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=A_(i.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function KT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const QT=/^:[\w-]+$/,YT=3,JT=2,XT=1,ZT=10,eS=-2,Ey=n=>n==="*";function tS(n,e){let t=n.split("/"),i=t.length;return t.some(Ey)&&(i+=eS),e&&(i+=JT),t.filter(o=>!Ey(o)).reduce((o,l)=>o+(QT.test(l)?YT:l===""?XT:ZT),i)}function nS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function rS(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,o={},l="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],y=h===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=kc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),S=p.route;if(!w&&y&&t&&!i[i.length-1].route.index&&(w=kc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:Vi([l,w.pathname]),pathnameBase:lS(Vi([l,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(l=Vi([l,w.pathnameBase]))}return c}function kc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=iS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((y,_,w)=>{let{paramName:S,isOptional:P}=_;if(S==="*"){let j=h[w]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const V=h[w];return P&&!V?y[S]=void 0:y[S]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function iS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Ea(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function sS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ea(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function ji(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function oS(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ms(n):n;return{pathname:t?t.startsWith("/")?t:aS(t,e):e,search:uS(i),hash:cS(o)}}function aS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function of(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function R_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function td(n,e){let t=R_(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function nd(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ms(n):(o=Lt({},n),Je(!o.pathname||!o.pathname.includes("?"),of("?","pathname","search",o)),Je(!o.pathname||!o.pathname.includes("#"),of("#","pathname","hash",o)),Je(!o.search||!o.search.includes("#"),of("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let w=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}h=w>=0?e[w]:"/"}let p=oS(o,h),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const Vi=n=>n.join("/").replace(/\/\/+/g,"/"),lS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Nc{constructor(e,t,i,o){o===void 0&&(o=!1),this.status=e,this.statusText=t||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function Dl(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const k_=["post","put","patch","delete"],dS=new Set(k_),hS=["get",...k_],fS=new Set(hS),pS=new Set([301,302,303,307,308]),mS=new Set([307,308]),af={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gS={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ml={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ep=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yS=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),N_="remix-router-transitions";function vS(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Je(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(n.mapRouteProperties)o=n.mapRouteProperties;else if(n.detectErrorBoundary){let D=n.detectErrorBoundary;o=U=>({hasErrorBoundary:D(U)})}else o=yS;let l={},c=Rc(n.routes,o,void 0,l),h,p=n.basename||"/",y=n.dataStrategy||TS,_=n.patchRoutesOnNavigation,w=Lt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),S=null,P=new Set,V=null,j=null,H=null,pe=n.hydrationData!=null,ee=ho(c,n.history.location,p),de=!1,ge=null;if(ee==null&&!_){let D=Kn(404,{pathname:n.history.location.pathname}),{matches:U,route:K}=by(c);ee=U,ge={[K.id]:D}}ee&&!n.hydrationData&&Kr(ee,c,n.history.location.pathname).active&&(ee=null);let je;if(ee)if(ee.some(D=>D.route.lazy))je=!1;else if(!ee.some(D=>D.route.loader))je=!0;else if(w.v7_partialHydration){let D=n.hydrationData?n.hydrationData.loaderData:null,U=n.hydrationData?n.hydrationData.errors:null;if(U){let K=ee.findIndex(re=>U[re.route.id]!==void 0);je=ee.slice(0,K+1).every(re=>!Tf(re.route,D,U))}else je=ee.every(K=>!Tf(K.route,D,U))}else je=n.hydrationData!=null;else if(je=!1,ee=[],w.v7_partialHydration){let D=Kr(null,c,n.history.location.pathname);D.active&&D.matches&&(de=!0,ee=D.matches)}let Fe,x={historyAction:n.history.action,location:n.history.location,matches:ee,initialized:je,navigation:af,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ge,fetchers:new Map,blockers:new Map},C=Qt.Pop,A=!1,b,L=!1,F=new Map,N=null,Ye=!1,vt=!1,bt=[],it=new Set,ae=new Map,Ae=0,me=-1,z=new Map,Z=new Set,Ce=new Map,$e=new Map,be=new Set,qe=new Map,Qe=new Map,Ze;function mt(){if(S=n.history.listen(D=>{let{action:U,location:K,delta:re}=D;if(Ze){Ze(),Ze=void 0;return}Ea(Qe.size===0||re!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=wi({currentLocation:x.location,nextLocation:K,historyAction:U});if(fe&&re!=null){let Se=new Promise(Le=>{Ze=Le});n.history.go(re*-1),Ar(fe,{state:"blocked",location:K,proceed(){Ar(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Se.then(()=>n.history.go(re))},reset(){let Le=new Map(x.blockers);Le.set(fe,ml),It({blockers:Le})}});return}return bn(U,K)}),t){VS(e,F);let D=()=>MS(e,F);e.addEventListener("pagehide",D),N=()=>e.removeEventListener("pagehide",D)}return x.initialized||bn(Qt.Pop,x.location,{initialHydration:!0}),Fe}function St(){S&&S(),N&&N(),P.clear(),b&&b.abort(),x.fetchers.forEach((D,U)=>ye(U)),x.blockers.forEach((D,U)=>fr(U))}function on(D){return P.add(D),()=>P.delete(D)}function It(D,U){U===void 0&&(U={}),x=Lt({},x,D);let K=[],re=[];w.v7_fetcherPersist&&x.fetchers.forEach((fe,Se)=>{fe.state==="idle"&&(be.has(Se)?re.push(Se):K.push(Se))}),be.forEach(fe=>{!x.fetchers.has(fe)&&!ae.has(fe)&&re.push(fe)}),[...P].forEach(fe=>fe(x,{deletedFetchers:re,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),w.v7_fetcherPersist?(K.forEach(fe=>x.fetchers.delete(fe)),re.forEach(fe=>ye(fe))):re.forEach(fe=>be.delete(fe))}function hn(D,U,K){var re,fe;let{flushSync:Se}=K===void 0?{}:K,Le=x.actionData!=null&&x.navigation.formMethod!=null&&Ur(x.navigation.formMethod)&&x.navigation.state==="loading"&&((re=D.state)==null?void 0:re._isRedirect)!==!0,Ie;U.actionData?Object.keys(U.actionData).length>0?Ie=U.actionData:Ie=null:Le?Ie=x.actionData:Ie=null;let Te=U.loaderData?ky(x.loaderData,U.loaderData,U.matches||[],U.errors):x.loaderData,_e=x.blockers;_e.size>0&&(_e=new Map(_e),_e.forEach((We,Ut)=>_e.set(Ut,ml)));let we=A===!0||x.navigation.formMethod!=null&&Ur(x.navigation.formMethod)&&((fe=D.state)==null?void 0:fe._isRedirect)!==!0;h&&(c=h,h=void 0),Ye||C===Qt.Pop||(C===Qt.Push?n.history.push(D,D.state):C===Qt.Replace&&n.history.replace(D,D.state));let Ue;if(C===Qt.Pop){let We=F.get(x.location.pathname);We&&We.has(D.pathname)?Ue={currentLocation:x.location,nextLocation:D}:F.has(D.pathname)&&(Ue={currentLocation:D,nextLocation:x.location})}else if(L){let We=F.get(x.location.pathname);We?We.add(D.pathname):(We=new Set([D.pathname]),F.set(x.location.pathname,We)),Ue={currentLocation:x.location,nextLocation:D}}It(Lt({},U,{actionData:Ie,loaderData:Te,historyAction:C,location:D,initialized:!0,navigation:af,revalidation:"idle",restoreScrollPosition:Gr(D,U.matches||x.matches),preventScrollReset:we,blockers:_e}),{viewTransitionOpts:Ue,flushSync:Se===!0}),C=Qt.Pop,A=!1,L=!1,Ye=!1,vt=!1,bt=[]}async function hr(D,U){if(typeof D=="number"){n.history.go(D);return}let K=Ef(x.location,x.matches,p,w.v7_prependBasename,D,w.v7_relativeSplatPath,U?.fromRouteId,U?.relative),{path:re,submission:fe,error:Se}=Ty(w.v7_normalizeFormMethod,!1,K,U),Le=x.location,Ie=bl(x.location,re,U&&U.state);Ie=Lt({},Ie,n.history.encodeLocation(Ie));let Te=U&&U.replace!=null?U.replace:void 0,_e=Qt.Push;Te===!0?_e=Qt.Replace:Te===!1||fe!=null&&Ur(fe.formMethod)&&fe.formAction===x.location.pathname+x.location.search&&(_e=Qt.Replace);let we=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Ue=(U&&U.flushSync)===!0,We=wi({currentLocation:Le,nextLocation:Ie,historyAction:_e});if(We){Ar(We,{state:"blocked",location:Ie,proceed(){Ar(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),hr(D,U)},reset(){let Ut=new Map(x.blockers);Ut.set(We,ml),It({blockers:Ut})}});return}return await bn(_e,Ie,{submission:fe,pendingError:Se,preventScrollReset:we,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:Ue})}function Wr(){if(B(),It({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){bn(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}bn(C||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:L===!0})}}async function bn(D,U,K){b&&b.abort(),b=null,C=D,Ye=(K&&K.startUninterruptedRevalidation)===!0,Bs(x.location,x.matches),A=(K&&K.preventScrollReset)===!0,L=(K&&K.enableViewTransition)===!0;let re=h||c,fe=K&&K.overrideNavigation,Se=K!=null&&K.initialHydration&&x.matches&&x.matches.length>0&&!de?x.matches:ho(re,U,p),Le=(K&&K.flushSync)===!0;if(Se&&x.initialized&&!vt&&AS(x.location,U)&&!(K&&K.submission&&Ur(K.submission.formMethod))){hn(U,{matches:Se},{flushSync:Le});return}let Ie=Kr(Se,re,U.pathname);if(Ie.active&&Ie.matches&&(Se=Ie.matches),!Se){let{error:ft,notFoundMatches:et,route:_t}=Tn(U.pathname);hn(U,{matches:et,loaderData:{},errors:{[_t.id]:ft}},{flushSync:Le});return}b=new AbortController;let Te=ua(n.history,U,b.signal,K&&K.submission),_e;if(K&&K.pendingError)_e=[fo(Se).route.id,{type:Et.error,error:K.pendingError}];else if(K&&K.submission&&Ur(K.submission.formMethod)){let ft=await _i(Te,U,K.submission,Se,Ie.active,{replace:K.replace,flushSync:Le});if(ft.shortCircuited)return;if(ft.pendingActionResult){let[et,_t]=ft.pendingActionResult;if(ur(_t)&&Dl(_t.error)&&_t.error.status===404){b=null,hn(U,{matches:ft.matches,loaderData:{},errors:{[et]:_t.error}});return}}Se=ft.matches||Se,_e=ft.pendingActionResult,fe=lf(U,K.submission),Le=!1,Ie.active=!1,Te=ua(n.history,Te.url,Te.signal)}let{shortCircuited:we,matches:Ue,loaderData:We,errors:Ut}=await Wi(Te,U,Se,Ie.active,fe,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Le,_e);we||(b=null,hn(U,Lt({matches:Ue||Se},Ny(_e),{loaderData:We,errors:Ut})))}async function _i(D,U,K,re,fe,Se){Se===void 0&&(Se={}),B();let Le=OS(U,K);if(It({navigation:Le},{flushSync:Se.flushSync===!0}),fe){let _e=await Fn(re,U.pathname,D.signal);if(_e.type==="aborted")return{shortCircuited:!0};if(_e.type==="error"){let we=fo(_e.partialMatches).route.id;return{matches:_e.partialMatches,pendingActionResult:[we,{type:Et.error,error:_e.error}]}}else if(_e.matches)re=_e.matches;else{let{notFoundMatches:we,error:Ue,route:We}=Tn(U.pathname);return{matches:we,pendingActionResult:[We.id,{type:Et.error,error:Ue}]}}}let Ie,Te=vl(re,U);if(!Te.route.action&&!Te.route.lazy)Ie={type:Et.error,error:Kn(405,{method:D.method,pathname:U.pathname,routeId:Te.route.id})};else if(Ie=(await k("action",x,D,[Te],re,null))[Te.route.id],D.signal.aborted)return{shortCircuited:!0};if(po(Ie)){let _e;return Se&&Se.replace!=null?_e=Se.replace:_e=Py(Ie.response.headers.get("Location"),new URL(D.url),p)===x.location.pathname+x.location.search,await En(D,Ie,!0,{submission:K,replace:_e}),{shortCircuited:!0}}if(Ss(Ie))throw Kn(400,{type:"defer-action"});if(ur(Ie)){let _e=fo(re,Te.route.id);return(Se&&Se.replace)!==!0&&(C=Qt.Push),{matches:re,pendingActionResult:[_e.route.id,Ie]}}return{matches:re,pendingActionResult:[Te.route.id,Ie]}}async function Wi(D,U,K,re,fe,Se,Le,Ie,Te,_e,we){let Ue=fe||lf(U,Se),We=Se||Le||Oy(Ue),Ut=!Ye&&(!w.v7_partialHydration||!Te);if(re){if(Ut){let gt=Pr(we);It(Lt({navigation:Ue},gt!==void 0?{actionData:gt}:{}),{flushSync:_e})}let rt=await Fn(K,U.pathname,D.signal);if(rt.type==="aborted")return{shortCircuited:!0};if(rt.type==="error"){let gt=fo(rt.partialMatches).route.id;return{matches:rt.partialMatches,loaderData:{},errors:{[gt]:rt.error}}}else if(rt.matches)K=rt.matches;else{let{error:gt,notFoundMatches:Wt,route:Jr}=Tn(U.pathname);return{matches:Wt,loaderData:{},errors:{[Jr.id]:gt}}}}let ft=h||c,[et,_t]=Iy(n.history,x,K,We,U,w.v7_partialHydration&&Te===!0,w.v7_skipActionErrorRevalidation,vt,bt,it,be,Ce,Z,ft,p,we);if(Mn(rt=>!(K&&K.some(gt=>gt.route.id===rt))||et&&et.some(gt=>gt.route.id===rt)),me=++Ae,et.length===0&&_t.length===0){let rt=Zt();return hn(U,Lt({matches:K,loaderData:{},errors:we&&ur(we[1])?{[we[0]]:we[1].error}:null},Ny(we),rt?{fetchers:new Map(x.fetchers)}:{}),{flushSync:_e}),{shortCircuited:!0}}if(Ut){let rt={};if(!re){rt.navigation=Ue;let gt=Pr(we);gt!==void 0&&(rt.actionData=gt)}_t.length>0&&(rt.fetchers=Xn(_t)),It(rt,{flushSync:_e})}_t.forEach(rt=>{ut(rt.key),rt.controller&&ae.set(rt.key,rt.controller)});let pr=()=>_t.forEach(rt=>ut(rt.key));b&&b.signal.addEventListener("abort",pr);let{loaderResults:Qr,fetcherResults:tr}=await W(x,K,et,_t,D);if(D.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",pr),_t.forEach(rt=>ae.delete(rt.key));let nt=cc(Qr);if(nt)return await En(D,nt.result,!0,{replace:Ie}),{shortCircuited:!0};if(nt=cc(tr),nt)return Z.add(nt.key),await En(D,nt.result,!0,{replace:Ie}),{shortCircuited:!0};let{loaderData:Gi,errors:nr}=Ry(x,K,Qr,we,_t,tr,qe);qe.forEach((rt,gt)=>{rt.subscribe(Wt=>{(Wt||rt.done)&&qe.delete(gt)})}),w.v7_partialHydration&&Te&&x.errors&&(nr=Lt({},x.errors,nr));let Sn=Zt(),fn=Vn(me),Yr=Sn||fn||_t.length>0;return Lt({matches:K,loaderData:Gi,errors:nr},Yr?{fetchers:new Map(x.fetchers)}:{})}function Pr(D){if(D&&!ur(D[1]))return{[D[0]]:D[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function Xn(D){return D.forEach(U=>{let K=x.fetchers.get(U.key),re=gl(void 0,K?K.data:void 0);x.fetchers.set(U.key,re)}),new Map(x.fetchers)}function Zn(D,U,K,re){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ut(D);let fe=(re&&re.flushSync)===!0,Se=h||c,Le=Ef(x.location,x.matches,p,w.v7_prependBasename,K,w.v7_relativeSplatPath,U,re?.relative),Ie=ho(Se,Le,p),Te=Kr(Ie,Se,Le);if(Te.active&&Te.matches&&(Ie=Te.matches),!Ie){te(D,U,Kn(404,{pathname:Le}),{flushSync:fe});return}let{path:_e,submission:we,error:Ue}=Ty(w.v7_normalizeFormMethod,!0,Le,re);if(Ue){te(D,U,Ue,{flushSync:fe});return}let We=vl(Ie,_e),Ut=(re&&re.preventScrollReset)===!0;if(we&&Ur(we.formMethod)){Ct(D,U,_e,We,Ie,Te.active,fe,Ut,we);return}Ce.set(D,{routeId:U,path:_e}),qr(D,U,_e,We,Ie,Te.active,fe,Ut,we)}async function Ct(D,U,K,re,fe,Se,Le,Ie,Te){B(),Ce.delete(D);function _e(st){if(!st.route.action&&!st.route.lazy){let mr=Kn(405,{method:Te.formMethod,pathname:K,routeId:U});return te(D,U,mr,{flushSync:Le}),!0}return!1}if(!Se&&_e(re))return;let we=x.fetchers.get(D);X(D,LS(Te,we),{flushSync:Le});let Ue=new AbortController,We=ua(n.history,K,Ue.signal,Te);if(Se){let st=await Fn(fe,new URL(We.url).pathname,We.signal,D);if(st.type==="aborted")return;if(st.type==="error"){te(D,U,st.error,{flushSync:Le});return}else if(st.matches){if(fe=st.matches,re=vl(fe,K),_e(re))return}else{te(D,U,Kn(404,{pathname:K}),{flushSync:Le});return}}ae.set(D,Ue);let Ut=Ae,et=(await k("action",x,We,[re],fe,D))[re.route.id];if(We.signal.aborted){ae.get(D)===Ue&&ae.delete(D);return}if(w.v7_fetcherPersist&&be.has(D)){if(po(et)||ur(et)){X(D,ys(void 0));return}}else{if(po(et))if(ae.delete(D),me>Ut){X(D,ys(void 0));return}else return Z.add(D),X(D,gl(Te)),En(We,et,!1,{fetcherSubmission:Te,preventScrollReset:Ie});if(ur(et)){te(D,U,et.error);return}}if(Ss(et))throw Kn(400,{type:"defer-action"});let _t=x.navigation.location||x.location,pr=ua(n.history,_t,Ue.signal),Qr=h||c,tr=x.navigation.state!=="idle"?ho(Qr,x.navigation.location,p):x.matches;Je(tr,"Didn't find any matches after fetcher action");let nt=++Ae;z.set(D,nt);let Gi=gl(Te,et.data);x.fetchers.set(D,Gi);let[nr,Sn]=Iy(n.history,x,tr,Te,_t,!1,w.v7_skipActionErrorRevalidation,vt,bt,it,be,Ce,Z,Qr,p,[re.route.id,et]);Sn.filter(st=>st.key!==D).forEach(st=>{let mr=st.key,Hs=x.fetchers.get(mr),Ro=gl(void 0,Hs?Hs.data:void 0);x.fetchers.set(mr,Ro),ut(mr),st.controller&&ae.set(mr,st.controller)}),It({fetchers:new Map(x.fetchers)});let fn=()=>Sn.forEach(st=>ut(st.key));Ue.signal.addEventListener("abort",fn);let{loaderResults:Yr,fetcherResults:rt}=await W(x,tr,nr,Sn,pr);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",fn),z.delete(D),ae.delete(D),Sn.forEach(st=>ae.delete(st.key));let gt=cc(Yr);if(gt)return En(pr,gt.result,!1,{preventScrollReset:Ie});if(gt=cc(rt),gt)return Z.add(gt.key),En(pr,gt.result,!1,{preventScrollReset:Ie});let{loaderData:Wt,errors:Jr}=Ry(x,tr,Yr,void 0,Sn,rt,qe);if(x.fetchers.has(D)){let st=ys(et.data);x.fetchers.set(D,st)}Vn(nt),x.navigation.state==="loading"&&nt>me?(Je(C,"Expected pending action"),b&&b.abort(),hn(x.navigation.location,{matches:tr,loaderData:Wt,errors:Jr,fetchers:new Map(x.fetchers)})):(It({errors:Jr,loaderData:ky(x.loaderData,Wt,tr,Jr),fetchers:new Map(x.fetchers)}),vt=!1)}async function qr(D,U,K,re,fe,Se,Le,Ie,Te){let _e=x.fetchers.get(D);X(D,gl(Te,_e?_e.data:void 0),{flushSync:Le});let we=new AbortController,Ue=ua(n.history,K,we.signal);if(Se){let et=await Fn(fe,new URL(Ue.url).pathname,Ue.signal,D);if(et.type==="aborted")return;if(et.type==="error"){te(D,U,et.error,{flushSync:Le});return}else if(et.matches)fe=et.matches,re=vl(fe,K);else{te(D,U,Kn(404,{pathname:K}),{flushSync:Le});return}}ae.set(D,we);let We=Ae,ft=(await k("loader",x,Ue,[re],fe,D))[re.route.id];if(Ss(ft)&&(ft=await tp(ft,Ue.signal,!0)||ft),ae.get(D)===we&&ae.delete(D),!Ue.signal.aborted){if(be.has(D)){X(D,ys(void 0));return}if(po(ft))if(me>We){X(D,ys(void 0));return}else{Z.add(D),await En(Ue,ft,!1,{preventScrollReset:Ie});return}if(ur(ft)){te(D,U,ft.error);return}Je(!Ss(ft),"Unhandled fetcher deferred data"),X(D,ys(ft.data))}}async function En(D,U,K,re){let{submission:fe,fetcherSubmission:Se,preventScrollReset:Le,replace:Ie}=re===void 0?{}:re;U.response.headers.has("X-Remix-Revalidate")&&(vt=!0);let Te=U.response.headers.get("Location");Je(Te,"Expected a Location header on the redirect Response"),Te=Py(Te,new URL(D.url),p);let _e=bl(x.location,Te,{_isRedirect:!0});if(t){let et=!1;if(U.response.headers.has("X-Remix-Reload-Document"))et=!0;else if(ep.test(Te)){const _t=n.history.createURL(Te);et=_t.origin!==e.location.origin||ji(_t.pathname,p)==null}if(et){Ie?e.location.replace(Te):e.location.assign(Te);return}}b=null;let we=Ie===!0||U.response.headers.has("X-Remix-Replace")?Qt.Replace:Qt.Push,{formMethod:Ue,formAction:We,formEncType:Ut}=x.navigation;!fe&&!Se&&Ue&&We&&Ut&&(fe=Oy(x.navigation));let ft=fe||Se;if(mS.has(U.response.status)&&ft&&Ur(ft.formMethod))await bn(we,_e,{submission:Lt({},ft,{formAction:Te}),preventScrollReset:Le||A,enableViewTransition:K?L:void 0});else{let et=lf(_e,fe);await bn(we,_e,{overrideNavigation:et,fetcherSubmission:Se,preventScrollReset:Le||A,enableViewTransition:K?L:void 0})}}async function k(D,U,K,re,fe,Se){let Le,Ie={};try{Le=await SS(y,D,U,K,re,fe,Se,l,o)}catch(Te){return re.forEach(_e=>{Ie[_e.route.id]={type:Et.error,error:Te}}),Ie}for(let[Te,_e]of Object.entries(Le))if(RS(_e)){let we=_e.result;Ie[Te]={type:Et.redirect,response:CS(we,K,Te,fe,p,w.v7_relativeSplatPath)}}else Ie[Te]=await xS(_e);return Ie}async function W(D,U,K,re,fe){let Se=D.matches,Le=k("loader",D,fe,K,U,null),Ie=Promise.all(re.map(async we=>{if(we.matches&&we.match&&we.controller){let We=(await k("loader",D,ua(n.history,we.path,we.controller.signal),[we.match],we.matches,we.key))[we.match.route.id];return{[we.key]:We}}else return Promise.resolve({[we.key]:{type:Et.error,error:Kn(404,{pathname:we.path})}})})),Te=await Le,_e=(await Ie).reduce((we,Ue)=>Object.assign(we,Ue),{});return await Promise.all([bS(U,Te,fe.signal,Se,D.loaderData),DS(U,_e,re)]),{loaderResults:Te,fetcherResults:_e}}function B(){vt=!0,bt.push(...Mn()),Ce.forEach((D,U)=>{ae.has(U)&&it.add(U),ut(U)})}function X(D,U,K){K===void 0&&(K={}),x.fetchers.set(D,U),It({fetchers:new Map(x.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function te(D,U,K,re){re===void 0&&(re={});let fe=fo(x.matches,U);ye(D),It({errors:{[fe.route.id]:K},fetchers:new Map(x.fetchers)},{flushSync:(re&&re.flushSync)===!0})}function ue(D){return $e.set(D,($e.get(D)||0)+1),be.has(D)&&be.delete(D),x.fetchers.get(D)||gS}function ye(D){let U=x.fetchers.get(D);ae.has(D)&&!(U&&U.state==="loading"&&z.has(D))&&ut(D),Ce.delete(D),z.delete(D),Z.delete(D),w.v7_fetcherPersist&&be.delete(D),it.delete(D),x.fetchers.delete(D)}function De(D){let U=($e.get(D)||0)-1;U<=0?($e.delete(D),be.add(D),w.v7_fetcherPersist||ye(D)):$e.set(D,U),It({fetchers:new Map(x.fetchers)})}function ut(D){let U=ae.get(D);U&&(U.abort(),ae.delete(D))}function Tt(D){for(let U of D){let K=ue(U),re=ys(K.data);x.fetchers.set(U,re)}}function Zt(){let D=[],U=!1;for(let K of Z){let re=x.fetchers.get(K);Je(re,"Expected fetcher: "+K),re.state==="loading"&&(Z.delete(K),D.push(K),U=!0)}return Tt(D),U}function Vn(D){let U=[];for(let[K,re]of z)if(re<D){let fe=x.fetchers.get(K);Je(fe,"Expected fetcher: "+K),fe.state==="loading"&&(ut(K),z.delete(K),U.push(K))}return Tt(U),U.length>0}function Ht(D,U){let K=x.blockers.get(D)||ml;return Qe.get(D)!==U&&Qe.set(D,U),K}function fr(D){x.blockers.delete(D),Qe.delete(D)}function Ar(D,U){let K=x.blockers.get(D)||ml;Je(K.state==="unblocked"&&U.state==="blocked"||K.state==="blocked"&&U.state==="blocked"||K.state==="blocked"&&U.state==="proceeding"||K.state==="blocked"&&U.state==="unblocked"||K.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+K.state+" -> "+U.state);let re=new Map(x.blockers);re.set(D,U),It({blockers:re})}function wi(D){let{currentLocation:U,nextLocation:K,historyAction:re}=D;if(Qe.size===0)return;Qe.size>1&&Ea(!1,"A router only supports one blocker at a time");let fe=Array.from(Qe.entries()),[Se,Le]=fe[fe.length-1],Ie=x.blockers.get(Se);if(!(Ie&&Ie.state==="proceeding")&&Le({currentLocation:U,nextLocation:K,historyAction:re}))return Se}function Tn(D){let U=Kn(404,{pathname:D}),K=h||c,{matches:re,route:fe}=by(K);return Mn(),{notFoundMatches:re,route:fe,error:U}}function Mn(D){let U=[];return qe.forEach((K,re)=>{(!D||D(re))&&(K.cancel(),U.push(re),qe.delete(re))}),U}function qi(D,U,K){if(V=D,H=U,j=K||null,!pe&&x.navigation===af){pe=!0;let re=Gr(x.location,x.matches);re!=null&&It({restoreScrollPosition:re})}return()=>{V=null,H=null,j=null}}function er(D,U){return j&&j(D,U.map(re=>GT(re,x.loaderData)))||D.key}function Bs(D,U){if(V&&H){let K=er(D,U);V[K]=H()}}function Gr(D,U){if(V){let K=er(D,U),re=V[K];if(typeof re=="number")return re}return null}function Kr(D,U,K){if(_)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:vc(U,K,p,!0)}}else return{active:!0,matches:vc(U,K,p,!0)||[]};return{active:!1,matches:null}}async function Fn(D,U,K,re){if(!_)return{type:"success",matches:D};let fe=D;for(;;){let Se=h==null,Le=h||c,Ie=l;try{await _({signal:K,path:U,matches:fe,fetcherKey:re,patch:(we,Ue)=>{K.aborted||Cy(we,Ue,Le,Ie,o)}})}catch(we){return{type:"error",error:we,partialMatches:fe}}finally{Se&&!K.aborted&&(c=[...c])}if(K.aborted)return{type:"aborted"};let Te=ho(Le,U,p);if(Te)return{type:"success",matches:Te};let _e=vc(Le,U,p,!0);if(!_e||fe.length===_e.length&&fe.every((we,Ue)=>we.route.id===_e[Ue].route.id))return{type:"success",matches:null};fe=_e}}function $s(D){l={},h=Rc(D,o,void 0,l)}function Vt(D,U){let K=h==null;Cy(D,U,h||c,l,o),K&&(c=[...c],It({}))}return Fe={get basename(){return p},get future(){return w},get state(){return x},get routes(){return c},get window(){return e},initialize:mt,subscribe:on,enableScrollRestoration:qi,navigate:hr,fetch:Zn,revalidate:Wr,createHref:D=>n.history.createHref(D),encodeLocation:D=>n.history.encodeLocation(D),getFetcher:ue,deleteFetcher:De,dispose:St,getBlocker:Ht,deleteBlocker:fr,patchRoutes:Vt,_internalFetchControllers:ae,_internalActiveDeferreds:qe,_internalSetRoutes:$s},Fe}function _S(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ef(n,e,t,i,o,l,c,h){let p,y;if(c){p=[];for(let w of e)if(p.push(w),w.route.id===c){y=w;break}}else p=e,y=e[e.length-1];let _=nd(o||".",td(p,l),ji(n.pathname,t)||n.pathname,h==="path");if(o==null&&(_.search=n.search,_.hash=n.hash),(o==null||o===""||o===".")&&y){let w=np(_.search);if(y.route.index&&!w)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!y.route.index&&w){let S=new URLSearchParams(_.search),P=S.getAll("index");S.delete("index"),P.filter(j=>j).forEach(j=>S.append("index",j));let V=S.toString();_.search=V?"?"+V:""}}return i&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Vi([t,_.pathname])),yo(_)}function Ty(n,e,t,i){if(!i||!_S(i))return{path:t};if(i.formMethod&&!NS(i.formMethod))return{path:t,error:Kn(405,{method:i.formMethod})};let o=()=>({path:t,error:Kn(400,{type:"invalid-body"})}),l=i.formMethod||"get",c=n?l.toUpperCase():l.toLowerCase(),h=O_(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Ur(c))return o();let S=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((P,V)=>{let[j,H]=V;return""+P+j+"="+H+`
`},""):String(i.body);return{path:t,submission:{formMethod:c,formAction:h,formEncType:i.formEncType,formData:void 0,json:void 0,text:S}}}else if(i.formEncType==="application/json"){if(!Ur(c))return o();try{let S=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:c,formAction:h,formEncType:i.formEncType,formData:void 0,json:S,text:void 0}}}catch{return o()}}}Je(typeof FormData=="function","FormData is not available in this environment");let p,y;if(i.formData)p=Sf(i.formData),y=i.formData;else if(i.body instanceof FormData)p=Sf(i.body),y=i.body;else if(i.body instanceof URLSearchParams)p=i.body,y=Ay(p);else if(i.body==null)p=new URLSearchParams,y=new FormData;else try{p=new URLSearchParams(i.body),y=Ay(p)}catch{return o()}let _={formMethod:c,formAction:h,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(Ur(_.formMethod))return{path:t,submission:_};let w=Ms(t);return e&&w.search&&np(w.search)&&p.append("index",""),w.search="?"+p,{path:yo(w),submission:_}}function Sy(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function Iy(n,e,t,i,o,l,c,h,p,y,_,w,S,P,V,j){let H=j?ur(j[1])?j[1].error:j[1].data:void 0,pe=n.createURL(e.location),ee=n.createURL(o),de=t;l&&e.errors?de=Sy(t,Object.keys(e.errors)[0],!0):j&&ur(j[1])&&(de=Sy(t,j[0]));let ge=j?j[1].statusCode:void 0,je=c&&ge&&ge>=400,Fe=de.filter((C,A)=>{let{route:b}=C;if(b.lazy)return!0;if(b.loader==null)return!1;if(l)return Tf(b,e.loaderData,e.errors);if(wS(e.loaderData,e.matches[A],C)||p.some(N=>N===C.route.id))return!0;let L=e.matches[A],F=C;return xy(C,Lt({currentUrl:pe,currentParams:L.params,nextUrl:ee,nextParams:F.params},i,{actionResult:H,actionStatus:ge,defaultShouldRevalidate:je?!1:h||pe.pathname+pe.search===ee.pathname+ee.search||pe.search!==ee.search||b_(L,F)}))}),x=[];return w.forEach((C,A)=>{if(l||!t.some(Ye=>Ye.route.id===C.routeId)||_.has(A))return;let b=ho(P,C.path,V);if(!b){x.push({key:A,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(A),F=vl(b,C.path),N=!1;S.has(A)?N=!1:y.has(A)?(y.delete(A),N=!0):L&&L.state!=="idle"&&L.data===void 0?N=h:N=xy(F,Lt({currentUrl:pe,currentParams:e.matches[e.matches.length-1].params,nextUrl:ee,nextParams:t[t.length-1].params},i,{actionResult:H,actionStatus:ge,defaultShouldRevalidate:je?!1:h})),N&&x.push({key:A,routeId:C.routeId,path:C.path,matches:b,match:F,controller:new AbortController})}),[Fe,x]}function Tf(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function wS(n,e,t){let i=!e||t.route.id!==e.route.id,o=n[t.route.id]===void 0;return i||o}function b_(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function xy(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Cy(n,e,t,i,o){var l;let c;if(n){let y=i[n];Je(y,"No route found to patch children into: routeId = "+n),y.children||(y.children=[]),c=y.children}else c=t;let h=e.filter(y=>!c.some(_=>D_(y,_))),p=Rc(h,o,[n||"_","patch",String(((l=c)==null?void 0:l.length)||"0")],i);c.push(...p)}function D_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(l=>D_(t,l))}):!1}async function ES(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Je(o,"No route found in manifest");let l={};for(let c in i){let p=o[c]!==void 0&&c!=="hasErrorBoundary";Ea(!p,'Route "'+o.id+'" has a static property "'+c+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+c+'" will be ignored.')),!p&&!WT.has(c)&&(l[c]=i[c])}Object.assign(o,l),Object.assign(o,Lt({},e(o),{lazy:void 0}))}async function TS(n){let{matches:e}=n,t=e.filter(o=>o.shouldLoad);return(await Promise.all(t.map(o=>o.resolve()))).reduce((o,l,c)=>Object.assign(o,{[t[c].route.id]:l}),{})}async function SS(n,e,t,i,o,l,c,h,p,y){let _=l.map(P=>P.route.lazy?ES(P.route,p,h):void 0),w=l.map((P,V)=>{let j=_[V],H=o.some(ee=>ee.route.id===P.route.id);return Lt({},P,{shouldLoad:H,resolve:async ee=>(ee&&i.method==="GET"&&(P.route.lazy||P.route.loader)&&(H=!0),H?IS(e,i,P,j,ee,y):Promise.resolve({type:Et.data,result:void 0}))})}),S=await n({matches:w,request:i,params:l[0].params,fetcherKey:c,context:y});try{await Promise.all(_)}catch{}return S}async function IS(n,e,t,i,o,l){let c,h,p=y=>{let _,w=new Promise((V,j)=>_=j);h=()=>_(),e.signal.addEventListener("abort",h);let S=V=>typeof y!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):y({request:e,params:t.params,context:l},...V!==void 0?[V]:[]),P=(async()=>{try{return{type:"data",result:await(o?o(j=>S(j)):S())}}catch(V){return{type:"error",result:V}}})();return Promise.race([P,w])};try{let y=t.route[n];if(i)if(y){let _,[w]=await Promise.all([p(y).catch(S=>{_=S}),i]);if(_!==void 0)throw _;c=w}else if(await i,y=t.route[n],y)c=await p(y);else if(n==="action"){let _=new URL(e.url),w=_.pathname+_.search;throw Kn(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:Et.data,result:void 0};else if(y)c=await p(y);else{let _=new URL(e.url),w=_.pathname+_.search;throw Kn(404,{pathname:w})}Je(c.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(y){return{type:Et.error,result:y}}finally{h&&e.signal.removeEventListener("abort",h)}return c}async function xS(n){let{result:e,type:t}=n;if(L_(e)){let w;try{let S=e.headers.get("Content-Type");S&&/\bapplication\/json\b/.test(S)?e.body==null?w=null:w=await e.json():w=await e.text()}catch(S){return{type:Et.error,error:S}}return t===Et.error?{type:Et.error,error:new Nc(e.status,e.statusText,w),statusCode:e.status,headers:e.headers}:{type:Et.data,data:w,statusCode:e.status,headers:e.headers}}if(t===Et.error){if(Dy(e)){var i,o;if(e.data instanceof Error){var l,c;return{type:Et.error,error:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:Et.error,error:new Nc(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:Dl(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Et.error,error:e,statusCode:Dl(e)?e.status:void 0}}if(kS(e)){var h,p;return{type:Et.deferred,deferredData:e,statusCode:(h=e.init)==null?void 0:h.status,headers:((p=e.init)==null?void 0:p.headers)&&new Headers(e.init.headers)}}if(Dy(e)){var y,_;return{type:Et.data,data:e.data,statusCode:(y=e.init)==null?void 0:y.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:Et.data,data:e}}function CS(n,e,t,i,o,l){let c=n.headers.get("Location");if(Je(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!ep.test(c)){let h=i.slice(0,i.findIndex(p=>p.route.id===t)+1);c=Ef(new URL(e.url),h,o,!0,c,l),n.headers.set("Location",c)}return n}function Py(n,e,t){if(ep.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=ji(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return n}function ua(n,e,t,i){let o=n.createURL(O_(e)).toString(),l={signal:t};if(i&&Ur(i.formMethod)){let{formMethod:c,formEncType:h}=i;l.method=c.toUpperCase(),h==="application/json"?(l.headers=new Headers({"Content-Type":h}),l.body=JSON.stringify(i.json)):h==="text/plain"?l.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?l.body=Sf(i.formData):l.body=i.formData}return new Request(o,l)}function Sf(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Ay(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function PS(n,e,t,i,o){let l={},c=null,h,p=!1,y={},_=t&&ur(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let S=w.route.id,P=e[S];if(Je(!po(P),"Cannot handle redirect results in processLoaderData"),ur(P)){let V=P.error;_!==void 0&&(V=_,_=void 0),c=c||{};{let j=fo(n,S);c[j.route.id]==null&&(c[j.route.id]=V)}l[S]=void 0,p||(p=!0,h=Dl(P.error)?P.error.status:500),P.headers&&(y[S]=P.headers)}else Ss(P)?(i.set(S,P.deferredData),l[S]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!p&&(h=P.statusCode),P.headers&&(y[S]=P.headers)):(l[S]=P.data,P.statusCode&&P.statusCode!==200&&!p&&(h=P.statusCode),P.headers&&(y[S]=P.headers))}),_!==void 0&&t&&(c={[t[0]]:_},l[t[0]]=void 0),{loaderData:l,errors:c,statusCode:h||200,loaderHeaders:y}}function Ry(n,e,t,i,o,l,c){let{loaderData:h,errors:p}=PS(e,t,i,c);return o.forEach(y=>{let{key:_,match:w,controller:S}=y,P=l[_];if(Je(P,"Did not find corresponding fetcher result"),!(S&&S.signal.aborted))if(ur(P)){let V=fo(n.matches,w?.route.id);p&&p[V.route.id]||(p=Lt({},p,{[V.route.id]:P.error})),n.fetchers.delete(_)}else if(po(P))Je(!1,"Unhandled fetcher revalidation redirect");else if(Ss(P))Je(!1,"Unhandled fetcher deferred data");else{let V=ys(P.data);n.fetchers.set(_,V)}}),{loaderData:h,errors:p}}function ky(n,e,t,i){let o=Lt({},e);for(let l of t){let c=l.route.id;if(e.hasOwnProperty(c)?e[c]!==void 0&&(o[c]=e[c]):n[c]!==void 0&&l.route.loader&&(o[c]=n[c]),i&&i.hasOwnProperty(c))break}return o}function Ny(n){return n?ur(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function fo(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function by(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Kn(n,e){let{pathname:t,routeId:i,method:o,type:l,message:c}=e===void 0?{}:e,h="Unknown Server Error",p="Unknown @remix-run/router error";return n===400?(h="Bad Request",o&&t&&i?p="You made a "+o+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":l==="defer-action"?p="defer() is not supported in actions":l==="invalid-body"&&(p="Unable to encode submission body")):n===403?(h="Forbidden",p='Route "'+i+'" does not match URL "'+t+'"'):n===404?(h="Not Found",p='No route matches URL "'+t+'"'):n===405&&(h="Method Not Allowed",o&&t&&i?p="You made a "+o.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":o&&(p='Invalid request method "'+o.toUpperCase()+'"')),new Nc(n||500,h,new Error(p),!0)}function cc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(po(o))return{key:i,result:o}}}function O_(n){let e=typeof n=="string"?Ms(n):n;return yo(Lt({},e,{hash:""}))}function AS(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function RS(n){return L_(n.result)&&pS.has(n.result.status)}function Ss(n){return n.type===Et.deferred}function ur(n){return n.type===Et.error}function po(n){return(n&&n.type)===Et.redirect}function Dy(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function kS(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function L_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function NS(n){return fS.has(n.toLowerCase())}function Ur(n){return dS.has(n.toLowerCase())}async function bS(n,e,t,i,o){let l=Object.entries(e);for(let c=0;c<l.length;c++){let[h,p]=l[c],y=n.find(S=>S?.route.id===h);if(!y)continue;let _=i.find(S=>S.route.id===y.route.id),w=_!=null&&!b_(_,y)&&(o&&o[y.route.id])!==void 0;Ss(p)&&w&&await tp(p,t,!1).then(S=>{S&&(e[h]=S)})}}async function DS(n,e,t){for(let i=0;i<t.length;i++){let{key:o,routeId:l,controller:c}=t[i],h=e[o];n.find(y=>y?.route.id===l)&&Ss(h)&&(Je(c,"Expected an AbortController for revalidating fetcher deferred result"),await tp(h,c.signal,!0).then(y=>{y&&(e[o]=y)}))}}async function tp(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Et.data,data:n.deferredData.unwrappedData}}catch(o){return{type:Et.error,error:o}}return{type:Et.data,data:n.deferredData.data}}}function np(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function vl(n,e){let t=typeof e=="string"?Ms(e).search:e.search;if(n[n.length-1].route.index&&np(t||""))return n[n.length-1];let i=R_(n);return i[i.length-1]}function Oy(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:l,json:c}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function lf(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function OS(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function gl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LS(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ys(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function VS(n,e){try{let t=n.sessionStorage.getItem(N_);if(t){let i=JSON.parse(t);for(let[o,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function MS(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(N_,JSON.stringify(t))}catch(i){Ea(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bc.apply(this,arguments)}const Hl=Y.createContext(null),rp=Y.createContext(null),Hi=Y.createContext(null),ip=Y.createContext(null),yi=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),V_=Y.createContext(null);function FS(n,e){let{relative:t}=e===void 0?{}:e;Ra()||Je(!1);let{basename:i,navigator:o}=Y.useContext(Hi),{hash:l,pathname:c,search:h}=rd(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:Vi([i,c])),o.createHref({pathname:p,search:h,hash:l})}function Ra(){return Y.useContext(ip)!=null}function ka(){return Ra()||Je(!1),Y.useContext(ip).location}function M_(n){Y.useContext(Hi).static||Y.useLayoutEffect(n)}function Na(){let{isDataRoute:n}=Y.useContext(yi);return n?ZS():jS()}function jS(){Ra()||Je(!1);let n=Y.useContext(Hl),{basename:e,future:t,navigator:i}=Y.useContext(Hi),{matches:o}=Y.useContext(yi),{pathname:l}=ka(),c=JSON.stringify(td(o,t.v7_relativeSplatPath)),h=Y.useRef(!1);return M_(()=>{h.current=!0}),Y.useCallback(function(y,_){if(_===void 0&&(_={}),!h.current)return;if(typeof y=="number"){i.go(y);return}let w=nd(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Vi([e,w.pathname])),(_.replace?i.replace:i.push)(w,_.state,_)},[e,i,c,l,n])}const US=Y.createContext(null);function zS(n){let e=Y.useContext(yi).outlet;return e&&Y.createElement(US.Provider,{value:n},e)}function BS(){let{matches:n}=Y.useContext(yi),e=n[n.length-1];return e?e.params:{}}function rd(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Y.useContext(Hi),{matches:o}=Y.useContext(yi),{pathname:l}=ka(),c=JSON.stringify(td(o,i.v7_relativeSplatPath));return Y.useMemo(()=>nd(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function $S(n,e,t,i){Ra()||Je(!1);let{navigator:o}=Y.useContext(Hi),{matches:l}=Y.useContext(yi),c=l[l.length-1],h=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=ka(),_;_=y;let w=_.pathname||"/",S=w;if(p!=="/"){let j=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let P=ho(n,{pathname:S});return KS(P&&P.map(j=>Object.assign({},j,{params:Object.assign({},h,j.params),pathname:Vi([p,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:Vi([p,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,t,i)}function HS(){let n=XS(),e=Dl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:o},t):null,null)}const WS=Y.createElement(HS,null);class qS extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(yi.Provider,{value:this.props.routeContext},Y.createElement(V_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GS(n){let{routeContext:e,match:t,children:i}=n,o=Y.useContext(Hl);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(yi.Provider,{value:e},i)}function KS(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let _=c.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);_>=0||Je(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let w=c[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=_),w.route.id){let{loaderData:S,errors:P}=t,V=w.route.loader&&S[w.route.id]===void 0&&(!P||P[w.route.id]===void 0);if(w.route.lazy||V){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,w,S)=>{let P,V=!1,j=null,H=null;t&&(P=h&&w.route.id?h[w.route.id]:void 0,j=w.route.errorElement||WS,p&&(y<0&&S===0?(eI("route-fallback"),V=!0,H=null):y===S&&(V=!0,H=w.route.hydrateFallbackElement||null)));let pe=e.concat(c.slice(0,S+1)),ee=()=>{let de;return P?de=j:V?de=H:w.route.Component?de=Y.createElement(w.route.Component,null):w.route.element?de=w.route.element:de=_,Y.createElement(GS,{match:w,routeContext:{outlet:_,matches:pe,isDataRoute:t!=null},children:de})};return t&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?Y.createElement(qS,{location:t.location,revalidation:t.revalidation,component:j,error:P,children:ee(),routeContext:{outlet:null,matches:pe,isDataRoute:!0}}):ee()},null)}var F_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(F_||{}),j_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(j_||{});function QS(n){let e=Y.useContext(Hl);return e||Je(!1),e}function YS(n){let e=Y.useContext(rp);return e||Je(!1),e}function JS(n){let e=Y.useContext(yi);return e||Je(!1),e}function U_(n){let e=JS(),t=e.matches[e.matches.length-1];return t.route.id||Je(!1),t.route.id}function XS(){var n;let e=Y.useContext(V_),t=YS(j_.UseRouteError),i=U_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function ZS(){let{router:n}=QS(F_.UseNavigateStable),e=U_(),t=Y.useRef(!1);return M_(()=>{t.current=!0}),Y.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,bc({fromRouteId:e},l)))},[n,e])}const Ly={};function eI(n,e,t){Ly[n]||(Ly[n]=!0)}function tI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function nI(n){let{to:e,replace:t,state:i,relative:o}=n;Ra()||Je(!1);let{future:l,static:c}=Y.useContext(Hi),{matches:h}=Y.useContext(yi),{pathname:p}=ka(),y=Na(),_=nd(e,td(h,l.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(_);return Y.useEffect(()=>y(JSON.parse(w),{replace:t,state:i,relative:o}),[y,w,o,t,i]),null}function rI(n){return zS(n.context)}function iI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Qt.Pop,navigator:l,static:c=!1,future:h}=n;Ra()&&Je(!1);let p=e.replace(/^\/*/,"/"),y=Y.useMemo(()=>({basename:p,navigator:l,static:c,future:bc({v7_relativeSplatPath:!1},h)}),[p,h,l,c]);typeof i=="string"&&(i=Ms(i));let{pathname:_="/",search:w="",hash:S="",state:P=null,key:V="default"}=i,j=Y.useMemo(()=>{let H=ji(_,p);return H==null?null:{location:{pathname:H,search:w,hash:S,state:P,key:V},navigationType:o}},[p,_,w,S,P,V,o]);return j==null?null:Y.createElement(Hi.Provider,{value:y},Y.createElement(ip.Provider,{children:t,value:j}))}new Promise(()=>{});function sI(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:Y.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Y.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:Y.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ta.apply(this,arguments)}function z_(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function oI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aI(n,e){return n.button===0&&(!e||e==="_self")&&!oI(n)}const lI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cI="6";try{window.__reactRouterVersion=cI}catch{}function dI(n,e){return vS({basename:void 0,future:Ta({},void 0,{v7_prependBasename:!0}),history:BT({window:void 0}),hydrationData:hI(),routes:n,mapRouteProperties:sI,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function hI(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ta({},e,{errors:fI(e.errors)})),e}function fI(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new Nc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let c=new l(o.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(o.message);l.stack="",t[i]=l}}else t[i]=o;return t}const B_=Y.createContext({isTransitioning:!1}),pI=Y.createContext(new Map),mI="startTransition",Vy=DT[mI],gI="flushSync",My=zT[gI];function yI(n){Vy?Vy(n):n()}function yl(n){My?My(n):n()}let vI=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function _I(n){let{fallbackElement:e,router:t,future:i}=n,[o,l]=Y.useState(t.state),[c,h]=Y.useState(),[p,y]=Y.useState({isTransitioning:!1}),[_,w]=Y.useState(),[S,P]=Y.useState(),[V,j]=Y.useState(),H=Y.useRef(new Map),{v7_startTransition:pe}=i||{},ee=Y.useCallback(C=>{pe?yI(C):C()},[pe]),de=Y.useCallback((C,A)=>{let{deletedFetchers:b,flushSync:L,viewTransitionOpts:F}=A;C.fetchers.forEach((Ye,vt)=>{Ye.data!==void 0&&H.current.set(vt,Ye.data)}),b.forEach(Ye=>H.current.delete(Ye));let N=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!F||N){L?yl(()=>l(C)):ee(()=>l(C));return}if(L){yl(()=>{S&&(_&&_.resolve(),S.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let Ye=t.window.document.startViewTransition(()=>{yl(()=>l(C))});Ye.finished.finally(()=>{yl(()=>{w(void 0),P(void 0),h(void 0),y({isTransitioning:!1})})}),yl(()=>P(Ye));return}S?(_&&_.resolve(),S.skipTransition(),j({state:C,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(h(C),y({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[t.window,S,_,H,ee]);Y.useLayoutEffect(()=>t.subscribe(de),[t,de]),Y.useEffect(()=>{p.isTransitioning&&!p.flushSync&&w(new vI)},[p]),Y.useEffect(()=>{if(_&&c&&t.window){let C=c,A=_.promise,b=t.window.document.startViewTransition(async()=>{ee(()=>l(C)),await A});b.finished.finally(()=>{w(void 0),P(void 0),h(void 0),y({isTransitioning:!1})}),P(b)}},[ee,c,_,t.window]),Y.useEffect(()=>{_&&c&&o.location.key===c.location.key&&_.resolve()},[_,S,o.location,c]),Y.useEffect(()=>{!p.isTransitioning&&V&&(h(V.state),y({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}),j(void 0))},[p.isTransitioning,V]),Y.useEffect(()=>{},[]);let ge=Y.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:C=>t.navigate(C),push:(C,A,b)=>t.navigate(C,{state:A,preventScrollReset:b?.preventScrollReset}),replace:(C,A,b)=>t.navigate(C,{replace:!0,state:A,preventScrollReset:b?.preventScrollReset})}),[t]),je=t.basename||"/",Fe=Y.useMemo(()=>({router:t,navigator:ge,static:!1,basename:je}),[t,ge,je]),x=Y.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Y.useEffect(()=>tI(i,t.future),[i,t.future]),Y.createElement(Y.Fragment,null,Y.createElement(Hl.Provider,{value:Fe},Y.createElement(rp.Provider,{value:o},Y.createElement(pI.Provider,{value:H.current},Y.createElement(B_.Provider,{value:p},Y.createElement(iI,{basename:je,location:o.location,navigationType:o.historyAction,navigator:ge,future:x},o.initialized||t.future.v7_partialHydration?Y.createElement(wI,{routes:t.routes,future:t.future,state:o}):e))))),null)}const wI=Y.memo(EI);function EI(n){let{routes:e,future:t,state:i}=n;return $S(e,void 0,i,t)}const TI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$_=Y.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:h,target:p,to:y,preventScrollReset:_,viewTransition:w}=e,S=z_(e,lI),{basename:P}=Y.useContext(Hi),V,j=!1;if(typeof y=="string"&&SI.test(y)&&(V=y,TI))try{let de=new URL(window.location.href),ge=y.startsWith("//")?new URL(de.protocol+y):new URL(y),je=ji(ge.pathname,P);ge.origin===de.origin&&je!=null?y=je+ge.search+ge.hash:j=!0}catch{}let H=FS(y,{relative:o}),pe=CI(y,{replace:c,state:h,target:p,preventScrollReset:_,relative:o,viewTransition:w});function ee(de){i&&i(de),de.defaultPrevented||pe(de)}return Y.createElement("a",Ta({},S,{href:V||H,onClick:j||l?i:ee,ref:t,target:p}))}),II=Y.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:c=!1,style:h,to:p,viewTransition:y,children:_}=e,w=z_(e,uI),S=rd(p,{relative:w.relative}),P=ka(),V=Y.useContext(rp),{navigator:j,basename:H}=Y.useContext(Hi),pe=V!=null&&PI(S)&&y===!0,ee=j.encodeLocation?j.encodeLocation(S).pathname:S.pathname,de=P.pathname,ge=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;o||(de=de.toLowerCase(),ge=ge?ge.toLowerCase():null,ee=ee.toLowerCase()),ge&&H&&(ge=ji(ge,H)||ge);const je=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Fe=de===ee||!c&&de.startsWith(ee)&&de.charAt(je)==="/",x=ge!=null&&(ge===ee||!c&&ge.startsWith(ee)&&ge.charAt(ee.length)==="/"),C={isActive:Fe,isPending:x,isTransitioning:pe},A=Fe?i:void 0,b;typeof l=="function"?b=l(C):b=[l,Fe?"active":null,x?"pending":null,pe?"transitioning":null].filter(Boolean).join(" ");let L=typeof h=="function"?h(C):h;return Y.createElement($_,Ta({},w,{"aria-current":A,className:b,ref:t,style:L,to:p,viewTransition:y}),typeof _=="function"?_(C):_)});var If;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(If||(If={}));var Fy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Fy||(Fy={}));function xI(n){let e=Y.useContext(Hl);return e||Je(!1),e}function CI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:h}=e===void 0?{}:e,p=Na(),y=ka(),_=rd(n,{relative:c});return Y.useCallback(w=>{if(aI(w,t)){w.preventDefault();let S=i!==void 0?i:yo(y)===yo(_);p(n,{replace:S,state:o,preventScrollReset:l,relative:c,viewTransition:h})}},[y,p,_,i,o,t,n,l,c,h])}function PI(n,e){e===void 0&&(e={});let t=Y.useContext(B_);t==null&&Je(!1);let{basename:i}=xI(If.useViewTransitionState),o=rd(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=ji(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=ji(t.nextLocation.pathname,i)||t.nextLocation.pathname;return kc(o.pathname,c)!=null||kc(o.pathname,l)!=null}const AI=()=>{};var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},RI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},W_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,w=(l&3)<<4|h>>4;let S=(h&15)<<2|y>>6,P=y&63;p||(P=64,c||(S=64)),i.push(t[_],t[w],t[S],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(H_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||y==null||w==null)throw new kI;const S=l<<2|h>>4;if(i.push(S),y!==64){const P=h<<4&240|y>>2;if(i.push(P),w!==64){const V=y<<6&192|w;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NI=function(n){const e=H_(n);return W_.encodeByteArray(e,!0)},Dc=function(n){return NI(n).replace(/\./g,"")},q_=function(n){try{return W_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=()=>bI().__FIREBASE_DEFAULTS__,OI=()=>{if(typeof process>"u"||typeof jy>"u")return;const n=jy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&q_(n[1]);return e&&JSON.parse(e)},id=()=>{try{return AI()||DI()||OI()||LI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},G_=n=>{var e,t;return(t=(e=id())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},K_=n=>{const e=G_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Q_=()=>{var n;return(n=id())===null||n===void 0?void 0:n.config},Y_=n=>{var e;return(e=id())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sp(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Dc(JSON.stringify(t)),Dc(JSON.stringify(c)),""].join(".")}const xl={};function FI(){const n={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?n.emulator.push(e):n.prod.push(e);return n}function jI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Uy=!1;function op(n,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||xl[n]===e||xl[n]||Uy)return;xl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=FI().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Uy=!0,c()},S}function _(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=jI(i),P=t("text"),V=document.getElementById(P)||document.createElement("span"),j=t("learnmore"),H=document.getElementById(j)||document.createElement("a"),pe=t("preprendIcon"),ee=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const de=S.element;h(de),_(H,j);const ge=y();p(ee,pe),de.append(ee,V,H,ge),document.body.appendChild(de)}l?(V.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function zI(){var n;const e=(n=id())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $I(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WI(){const n=Nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qI(){return!zI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="FirebaseError";class vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=QI,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?YI(l,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new vi(o,h,i)}}function YI(n,e){return n.replace(JI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const JI=/\{\$([^}]+)}/g;function XI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(zy(l)&&zy(c)){if(!vo(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function zy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _l(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function wl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ZI(n,e){const t=new ex(n,e);return t.subscribe.bind(t)}class ex{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");tx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=uf),o.error===void 0&&(o.error=uf),o.complete===void 0&&(o.complete=uf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function uf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n){return n&&n._delegate?n._delegate:n}class Rs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new VI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ix(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rx(n){return n===uo?void 0:n}function ix(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const ox={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},ax=ot.INFO,lx={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},ux=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=lx[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=ax,this._logHandler=ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ox[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const cx=(n,e)=>e.some(t=>n instanceof t);let By,$y;function dx(){return By||(By=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hx(){return $y||($y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J_=new WeakMap,xf=new WeakMap,X_=new WeakMap,cf=new WeakMap,lp=new WeakMap;function fx(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(xs(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&J_.set(t,n)}).catch(()=>{}),lp.set(e,n),e}function px(n){if(xf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});xf.set(n,e)}let Cf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||X_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mx(n){Cf=n(Cf)}function gx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(df(this),e,...t);return X_.set(i,e.sort?e.sort():[e]),xs(i)}:hx().includes(n)?function(...e){return n.apply(df(this),e),xs(J_.get(this))}:function(...e){return xs(n.apply(df(this),e))}}function yx(n){return typeof n=="function"?gx(n):(n instanceof IDBTransaction&&px(n),cx(n,dx())?new Proxy(n,Cf):n)}function xs(n){if(n instanceof IDBRequest)return fx(n);if(cf.has(n))return cf.get(n);const e=yx(n);return e!==n&&(cf.set(n,e),lp.set(e,n)),e}const df=n=>lp.get(n);function vx(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=xs(c);return i&&c.addEventListener("upgradeneeded",p=>{i(xs(c.result),p.oldVersion,p.newVersion,xs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const _x=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],hf=new Map;function Hy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hf.get(e))return hf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=wx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||_x.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),o&&p.done]))[0]};return hf.set(e,l),l}mx(n=>({...n,get:(e,t,i)=>Hy(e,t)||n.get(e,t,i),has:(e,t)=>!!Hy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Tx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Tx(n){const e=n.getComponent();return e?.type==="VERSION"}const Pf="@firebase/app",Wy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new ap("@firebase/app"),Sx="@firebase/app-compat",Ix="@firebase/analytics-compat",xx="@firebase/analytics",Cx="@firebase/app-check-compat",Px="@firebase/app-check",Ax="@firebase/auth",Rx="@firebase/auth-compat",kx="@firebase/database",Nx="@firebase/data-connect",bx="@firebase/database-compat",Dx="@firebase/functions",Ox="@firebase/functions-compat",Lx="@firebase/installations",Vx="@firebase/installations-compat",Mx="@firebase/messaging",Fx="@firebase/messaging-compat",jx="@firebase/performance",Ux="@firebase/performance-compat",zx="@firebase/remote-config",Bx="@firebase/remote-config-compat",$x="@firebase/storage",Hx="@firebase/storage-compat",Wx="@firebase/firestore",qx="@firebase/ai",Gx="@firebase/firestore-compat",Kx="firebase",Qx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="[DEFAULT]",Yx={[Pf]:"fire-core",[Sx]:"fire-core-compat",[xx]:"fire-analytics",[Ix]:"fire-analytics-compat",[Px]:"fire-app-check",[Cx]:"fire-app-check-compat",[Ax]:"fire-auth",[Rx]:"fire-auth-compat",[kx]:"fire-rtdb",[Nx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[Dx]:"fire-fn",[Ox]:"fire-fn-compat",[Lx]:"fire-iid",[Vx]:"fire-iid-compat",[Mx]:"fire-fcm",[Fx]:"fire-fcm-compat",[jx]:"fire-perf",[Ux]:"fire-perf-compat",[zx]:"fire-rc",[Bx]:"fire-rc-compat",[$x]:"fire-gcs",[Hx]:"fire-gcs-compat",[Wx]:"fire-fst",[Gx]:"fire-fst-compat",[qx]:"fire-vertex","fire-js":"fire-js",[Kx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,Jx=new Map,Rf=new Map;function qy(n,e){try{n.container.addComponent(e)}catch(t){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _o(n){const e=n.name;if(Rf.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Rf.set(e,n);for(const t of Oc.values())qy(t,n);for(const t of Jx.values())qy(t,n);return!0}function sd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new Wl("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=Qx;function Z_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Af,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Cs.create("bad-app-name",{appName:String(o)});if(t||(t=Q_()),!t)throw Cs.create("no-options");const l=Oc.get(o);if(l){if(vo(t,l.options)&&vo(i,l.config))return l;throw Cs.create("duplicate-app",{appName:o})}const c=new sx(o);for(const p of Rf.values())c.addComponent(p);const h=new Zx(t,i,c);return Oc.set(o,h),h}function up(n=Af){const e=Oc.get(n);if(!e&&n===Af&&Q_())return Z_();if(!e)throw Cs.create("no-app",{appName:n});return e}function li(n,e,t){var i;let o=(i=Yx[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(h.join(" "));return}_o(new Rs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebase-heartbeat-database",tC=1,Ol="firebase-heartbeat-store";let ff=null;function ew(){return ff||(ff=vx(eC,tC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ol)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cs.create("idb-open",{originalErrorMessage:n.message})})),ff}async function nC(n){try{const t=(await ew()).transaction(Ol),i=await t.objectStore(Ol).get(tw(n));return await t.done,i}catch(e){if(e instanceof vi)Ui.warn(e.message);else{const t=Cs.create("idb-get",{originalErrorMessage:e?.message});Ui.warn(t.message)}}}async function Gy(n,e){try{const i=(await ew()).transaction(Ol,"readwrite");await i.objectStore(Ol).put(e,tw(n)),await i.done}catch(t){if(t instanceof vi)Ui.warn(t.message);else{const i=Cs.create("idb-set",{originalErrorMessage:t?.message});Ui.warn(i.message)}}}function tw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1024,iC=30;class sC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ky();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>iC){const c=lC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ky(),{heartbeatsToSend:i,unsentEntries:o}=oC(this._heartbeatsCache.heartbeats),l=Dc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ui.warn(t),""}}}function Ky(){return new Date().toISOString().substring(0,10)}function oC(n,e=rC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Qy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Qy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class aC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Qy(n){return Dc(JSON.stringify({version:2,heartbeats:n})).length}function lC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){_o(new Rs("platform-logger",e=>new Ex(e),"PRIVATE")),_o(new Rs("heartbeat",e=>new sC(e),"PRIVATE")),li(Pf,Wy,n),li(Pf,Wy,"esm2017"),li("fire-js","")}uC("");function cp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cC=nw,rw=new Wl("auth","Firebase",nw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new ap("@firebase/auth");function dC(n,...e){Lc.logLevel<=ot.WARN&&Lc.warn(`Auth (${ba}): ${n}`,...e)}function _c(n,...e){Lc.logLevel<=ot.ERROR&&Lc.error(`Auth (${ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(n,...e){throw dp(n,...e)}function ui(n,...e){return dp(n,...e)}function iw(n,e,t){const i=Object.assign(Object.assign({},cC()),{[e]:t});return new Wl("auth","Firebase",i).create(e,{appName:n.name})}function Mi(n){return iw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return rw.create(n,...e)}function ze(n,e,...t){if(!n)throw dp(e,...t)}function Oi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _c(e),new Error(e)}function zi(n,e){n||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hC(){return Yy()==="http:"||Yy()==="https:"}function Yy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hC()||$I()||"connection"in navigator)?navigator.onLine:!0}function pC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,zi(t>e,"Short delay should be less than long delay!"),this.isMobile=UI()||HI()}get(){return fC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(n,e){zi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yC=new Gl(3e4,6e4);function Fs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function js(n,e,t,i,o={}){return ow(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=ql(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return BI()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Io(n.emulatorConfig.host)&&(y.credentials="include"),sw.fetch()(await aw(n,n.config.apiHost,t,h),y)})}async function ow(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},mC),e);try{const o=new _C(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw dc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw dc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw dc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw iw(n,_,y);$r(n,_)}}catch(o){if(o instanceof vi)throw o;$r(n,"network-request-failed",{message:String(o)})}}async function Kl(n,e,t,i,o={}){const l=await js(n,e,t,i,o);return"mfaPendingCredential"in l&&$r(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function aw(n,e,t,i){const o=`${e}${t}?${i}`,l=n,c=l.config.emulator?hp(n.config,o):`${n.config.apiScheme}://${o}`;return gC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function vC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _C{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ui(this.auth,"network-request-failed")),yC.get())})}}function dc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ui(n,e,i);return o.customData._tokenResponse=t,o}function Jy(n){return n!==void 0&&n.enterprise!==void 0}class wC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EC(n,e){return js(n,"GET","/v2/recaptchaConfig",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,e){return js(n,"POST","/v1/accounts:delete",e)}async function Vc(n,e){return js(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SC(n,e=!1){const t=Xt(n),i=await t.getIdToken(e),o=fp(i);ze(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Cl(pf(o.auth_time)),issuedAtTime:Cl(pf(o.iat)),expirationTime:Cl(pf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function pf(n){return Number(n)*1e3}function fp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{const o=q_(t);return o?JSON.parse(o):(_c("Failed to decode base64 JWT payload"),null)}catch(o){return _c("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Xy(n){const e=fp(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof vi&&IC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function IC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ll(n,Vc(t,{idToken:i}));ze(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?lw(l.providerUserInfo):[],h=PC(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!h?.length,_=p?y:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Nf(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function CC(n){const e=Xt(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function lw(n){return n.map(e=>{var{providerId:t}=e,i=cp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(n,e){const t=await ow(n,{},async()=>{const i=ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await aw(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:i};return n.emulatorConfig&&Io(n.emulatorConfig.host)&&(p.credentials="include"),sw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(n,e){return js(n,"POST","/v2/accounts:revokeToken",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=Xy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await AC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ma;return i&&(ze(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(ze(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(ze(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ma,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Nf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SC(this,e)}reload(){return CC(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await Ll(this,TC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,h,p,y,_;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,P=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,V=(c=t.photoURL)!==null&&c!==void 0?c:void 0,j=(h=t.tenantId)!==null&&h!==void 0?h:void 0,H=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,pe=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ee=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:de,emailVerified:ge,isAnonymous:je,providerData:Fe,stsTokenManager:x}=t;ze(de&&x,e,"internal-error");const C=ma.fromJSON(this.name,x);ze(typeof de=="string",e,"internal-error"),gs(w,e.name),gs(S,e.name),ze(typeof ge=="boolean",e,"internal-error"),ze(typeof je=="boolean",e,"internal-error"),gs(P,e.name),gs(V,e.name),gs(j,e.name),gs(H,e.name),gs(pe,e.name),gs(ee,e.name);const A=new zr({uid:de,auth:e,email:S,emailVerified:ge,displayName:w,isAnonymous:je,photoURL:V,phoneNumber:P,tenantId:j,stsTokenManager:C,createdAt:pe,lastLoginAt:ee});return Fe&&Array.isArray(Fe)&&(A.providerData=Fe.map(b=>Object.assign({},b))),H&&(A._redirectEventId=H),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new ma;o.updateFromServerResponse(t);const l=new zr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ze(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?lw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,h=new ma;h.updateFromIdToken(i);const p=new zr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Nf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new Map;function Li(n){zi(n instanceof Function,"Expected a class definition");let e=Zy.get(n);return e?(zi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Zy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uw.type="NONE";const ev=uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n,e,t){return`firebase:${n}:${e}:${t}`}class ga{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=wc(this.userKey,o.apiKey,l),this.fullPersistenceKey=wc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vc(this.auth,{idToken:e}).catch(()=>{});return t?zr._fromGetAccountInfoResponse(this.auth,t,e):null}return zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ga(Li(ev),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Li(ev);const c=wc(i,e.config.apiKey,e.name);let h=null;for(const y of t)try{const _=await y._get(c);if(_){let w;if(typeof _=="string"){const S=await Vc(e,{idToken:_}).catch(()=>{});if(!S)break;w=await zr._fromGetAccountInfoResponse(e,S,_)}else w=zr._fromJSON(e,_);y!==l&&(h=w),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ga(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ga(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mw(e))return"Blackberry";if(gw(e))return"Webos";if(dw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(pw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function cw(n=Nn()){return/firefox\//i.test(n)}function dw(n=Nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(n=Nn()){return/crios\//i.test(n)}function fw(n=Nn()){return/iemobile/i.test(n)}function pw(n=Nn()){return/android/i.test(n)}function mw(n=Nn()){return/blackberry/i.test(n)}function gw(n=Nn()){return/webos/i.test(n)}function pp(n=Nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kC(n=Nn()){var e;return pp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NC(){return WI()&&document.documentMode===10}function yw(n=Nn()){return pp(n)||pw(n)||gw(n)||mw(n)||/windows phone/i.test(n)||fw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(n,e=[]){let t;switch(n){case"Browser":t=tv(Nn());break;case"Worker":t=`${tv(Nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(n,e={}){return js(n,"GET","/v2/passwordPolicy",Fs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=6;class LC{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:OC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Li(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vc(this,{idToken:e}),i=await zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(cr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(Mi(this));const t=e?Xt(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DC(this),t=new LC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Li(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[Li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&dC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function xo(n){return Xt(n)}class nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZI(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MC(n){od=n}function _w(n){return od.loadJS(n)}function FC(){return od.recaptchaEnterpriseScript}function jC(){return od.gapiScript}function UC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class zC{constructor(){this.enterprise=new BC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $C="recaptcha-enterprise",ww="NO_RECAPTCHA";class HC{constructor(e){this.type=$C,this.auth=xo(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{EC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new wC(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{h(p)})})}function o(l,c,h){const p=window.grecaptcha;Jy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(ww)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zC().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!t&&Jy(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=FC();p.length!==0&&(p+=h),_w(p).then(()=>{o(h,l,c)}).catch(y=>{c(y)})}}).catch(h=>{c(h)})})}}async function rv(n,e,t,i=!1,o=!1){const l=new HC(n);let c;if(o)c=ww;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function bf(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await rv(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await rv(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(n,e){const t=sd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(vo(l,e??{}))return o;$r(o,"already-initialized")}return t.initialize({options:e})}function qC(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Li);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function GC(n,e,t){const i=xo(n);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Ew(e),{host:c,port:h}=KC(e),p=h===null?"":`:${h}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(vo(y,i.config.emulator)&&vo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Io(c)?(sp(`${l}//${c}${p}`),op("Auth",!0)):QC()}function Ew(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KC(n){const e=Ew(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:iv(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:iv(c)}}}function iv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,t){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function YC(n,e){return js(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(n,e){return Kl(n,"POST","/v1/accounts:signInWithPassword",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,e){return Kl(n,"POST","/v1/accounts:signInWithEmailLink",Fs(n,e))}async function ZC(n,e){return Kl(n,"POST","/v1/accounts:signInWithEmailLink",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends mp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Vl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Vl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bf(e,t,"signInWithPassword",JC);case"emailLink":return XC(e,{email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bf(e,i,"signUpPassword",YC);case"emailLink":return ZC(e,{idToken:t,email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n,e){return Kl(n,"POST","/v1/accounts:signInWithIdp",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="http://localhost";class wo extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=cp(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new wo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ya(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ya(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ya(e,t)}buildRequest(){const e={requestUri:e1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ql(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n1(n){const e=_l(wl(n)).link,t=e?_l(wl(e)).deep_link_id:null,i=_l(wl(n)).deep_link_id;return(i?_l(wl(i)).link:null)||i||t||e||n}class gp{constructor(e){var t,i,o,l,c,h;const p=_l(wl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,w=t1((o=p.mode)!==null&&o!==void 0?o:null);ze(y&&_&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=n1(e);try{return new gp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.providerId=Da.PROVIDER_ID}static credential(e,t){return Vl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=gp.parseLink(t);return ze(i,"argument-error"),Vl._fromEmailAndCode(e,i.code,i.tenantId)}}Da.PROVIDER_ID="password";Da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Tw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ql{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ws.credential(t,i)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Ql{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Ql{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ts.credential(t,i)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(n,e){return Kl(n,"POST","/v1/accounts:signUp",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await zr._fromIdTokenResponse(e,i,o),c=sv(i);return new Eo({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=sv(i);return new Eo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function sv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends vi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Fc(e,t,i,o)}}function Sw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Fc._fromErrorAndOperation(n,l,e,i):l})}async function i1(n,e,t=!1){const i=await Ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Eo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(n,e,t=!1){const{auth:i}=n;if(cr(i.app))return Promise.reject(Mi(i));const o="reauthenticate";try{const l=await Ll(n,Sw(i,o,e,n),t);ze(l.idToken,i,"internal-error");const c=fp(l.idToken);ze(c,i,"internal-error");const{sub:h}=c;return ze(n.uid===h,i,"user-mismatch"),Eo._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&$r(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(n,e,t=!1){if(cr(n.app))return Promise.reject(Mi(n));const i="signIn",o=await Sw(n,i,e),l=await Eo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function o1(n,e){return Iw(xo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(n){const e=xo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function a1(n,e,t){if(cr(n.app))return Promise.reject(Mi(n));const i=xo(n),c=await bf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&xw(n),p}),h=await Eo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function l1(n,e,t){return cr(n.app)?Promise.reject(Mi(n)):o1(Xt(n),Da.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xw(n),i})}function u1(n,e,t,i){return Xt(n).onIdTokenChanged(e,t,i)}function c1(n,e,t){return Xt(n).beforeAuthStateChanged(e,t)}function d1(n,e,t,i){return Xt(n).onAuthStateChanged(e,t,i)}function h1(n){return Xt(n).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=1e3,p1=10;class Pw extends Cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);NC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,p1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},f1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pw.type="LOCAL";const m1=Pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends Cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Aw.type="SESSION";const Rw=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ad(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async y=>y(t.origin,l)),p=await g1(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const y=yp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function v1(n){ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function _1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function E1(){return kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firebaseLocalStorageDb",T1=1,Uc="firebaseLocalStorage",bw="fbase_key";class Yl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ld(n,e){return n.transaction([Uc],e?"readwrite":"readonly").objectStore(Uc)}function S1(){const n=indexedDB.deleteDatabase(Nw);return new Yl(n).toPromise()}function Df(){const n=indexedDB.open(Nw,T1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Uc,{keyPath:bw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Uc)?e(i):(i.close(),await S1(),e(await Df()))})})}async function ov(n,e,t){const i=ld(n,!0).put({[bw]:e,value:t});return new Yl(i).toPromise()}async function I1(n,e){const t=ld(n,!1).get(e),i=await new Yl(t).toPromise();return i===void 0?null:i.value}function av(n,e){const t=ld(n,!0).delete(e);return new Yl(t).toPromise()}const x1=800,C1=3;class Dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Df(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>C1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ad._getInstance(E1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _1(),!this.activeServiceWorker)return;this.sender=new y1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Df();return await ov(e,jc,"1"),await av(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ov(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>I1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>av(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ld(o,!1).getAll();return new Yl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dw.type="LOCAL";const P1=Dw;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n,e){return e?Li(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R1(n){return Iw(n.auth,new vp(n),n.bypassAuthState)}function k1(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),s1(t,new vp(n),n.bypassAuthState)}async function N1(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),i1(t,new vp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R1;case"linkViaPopup":case"linkViaRedirect":return N1;case"reauthViaPopup":case"reauthViaRedirect":return k1;default:$r(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Gl(2e3,1e4);class pa extends Ow{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b1.get())};e()}}pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="pendingRedirect",Ec=new Map;class O1 extends Ow{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ec.get(this.auth._key());if(!e){try{const i=await L1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ec.set(this.auth._key(),e)}return this.bypassAuthState||Ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L1(n,e){const t=F1(e),i=M1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function V1(n,e){Ec.set(n._key(),e)}function M1(n){return Li(n._redirectPersistence)}function F1(n){return wc(D1,n.config.apiKey,n.name)}async function j1(n,e,t=!1){if(cr(n.app))return Promise.reject(Mi(n));const i=xo(n),o=A1(i,e),c=await new O1(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=600*1e3;class z1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Lw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U1&&this.cachedEventUids.clear(),this.cachedEventUids.has(lv(e))}saveEventToCache(e){this.cachedEventUids.add(lv(e)),this.lastProcessedEventTime=Date.now()}}function lv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Lw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function B1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(n,e={}){return js(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W1=/^https?/;async function q1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $1(n);for(const t of e)try{if(G1(t))return}catch{}$r(n,"unauthorized-domain")}function G1(n){const e=kf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!W1.test(t))return!1;if(H1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Gl(3e4,6e4);function uv(){const n=ci().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q1(n){return new Promise((e,t)=>{var i,o,l;function c(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),t(ui(n,"network-request-failed"))},timeout:K1.get()})}if(!((o=(i=ci().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ci().gapi)===null||l===void 0)&&l.load)c();else{const h=UC("iframefcb");return ci()[h]=()=>{gapi.load?c():t(ui(n,"network-request-failed"))},_w(`${jC()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Tc=null,e})}let Tc=null;function Y1(n){return Tc=Tc||Q1(n),Tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Gl(5e3,15e3),X1="__/auth/iframe",Z1="emulator/auth/iframe",eP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nP(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hp(e,Z1):`https://${n.config.authDomain}/${X1}`,i={apiKey:e.apiKey,appName:n.name,v:ba},o=tP.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ql(i).slice(1)}`}async function rP(n){const e=await Y1(n),t=ci().gapi;return ze(t,n,"internal-error"),e.open({where:document.body,url:nP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=ui(n,"network-request-failed"),h=ci().setTimeout(()=>{l(c)},J1.get());function p(){ci().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sP=500,oP=600,aP="_blank",lP="http://localhost";class cv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uP(n,e,t,i=sP,o=oP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},iP),{width:i.toString(),height:o.toString(),top:l,left:c}),y=Nn().toLowerCase();t&&(h=hw(y)?aP:t),cw(y)&&(e=e||lP,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[P,V])=>`${S}${P}=${V},`,"");if(kC(y)&&h!=="_self")return cP(e||"",h),new cv(null);const w=window.open(e||"",h,_);ze(w,n,"popup-blocked");try{w.focus()}catch{}return new cv(w)}function cP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="__/auth/handler",hP="emulator/auth/handler",fP=encodeURIComponent("fac");async function dv(n,e,t,i,o,l){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ba,eventId:o};if(e instanceof Tw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",XI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))c[_]=w}if(e instanceof Ql){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await n._getAppCheckToken(),y=p?`#${fP}=${encodeURIComponent(p)}`:"";return`${pP(n)}?${ql(h).slice(1)}${y}`}function pP({config:n}){return n.emulator?hp(n,hP):`https://${n.authDomain}/${dP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class mP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rw,this._completeRedirectFn=j1,this._overrideRedirectResult=V1}async _openPopup(e,t,i,o){var l;zi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await dv(e,t,i,kf(),o);return uP(e,c,yp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await dv(e,t,i,kf(),o);return v1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(zi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await rP(e),i=new z1(e);return t.register("authEvent",o=>(ze(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mf,{type:mf},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[mf];c!==void 0&&t(!!c),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=q1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yw()||dw()||pp()}}const gP=mP;var hv="@firebase/auth",fv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _P(n){_o(new Rs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;ze(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vw(n)},y=new VC(i,o,l,p);return qC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_o(new Rs("auth-internal",e=>{const t=xo(e.getProvider("auth").getImmediate());return(i=>new yP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(hv,fv,vP(n)),li(hv,fv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=300,EP=Y_("authIdTokenMaxAge")||wP;let pv=null;const TP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>EP)return;const o=t?.token;pv!==o&&(pv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function SP(n=up()){const e=sd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=WC(n,{popupRedirectResolver:gP,persistence:[P1,m1,Rw]}),i=Y_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=TP(l.toString());c1(t,c,()=>c(t.currentUser)),u1(t,h=>c(h))}}const o=G_("auth");return o&&GC(t,`http://${o}`),t}function IP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}MC({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ui("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",IP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_P("Browser");var xP="firebase",CP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(xP,CP,"app");var mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,Vw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,C){function A(){}A.prototype=C.prototype,x.D=C.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(b,L,F){for(var N=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)N[Ye-2]=arguments[Ye];return C.prototype[L].apply(b,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,A){A||(A=0);var b=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)b[L]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(L=0;16>L;++L)b[L]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=x.g[0],A=x.g[1],L=x.g[2];var F=x.g[3],N=C+(F^A&(L^F))+b[0]+3614090360&4294967295;C=A+(N<<7&4294967295|N>>>25),N=F+(L^C&(A^L))+b[1]+3905402710&4294967295,F=C+(N<<12&4294967295|N>>>20),N=L+(A^F&(C^A))+b[2]+606105819&4294967295,L=F+(N<<17&4294967295|N>>>15),N=A+(C^L&(F^C))+b[3]+3250441966&4294967295,A=L+(N<<22&4294967295|N>>>10),N=C+(F^A&(L^F))+b[4]+4118548399&4294967295,C=A+(N<<7&4294967295|N>>>25),N=F+(L^C&(A^L))+b[5]+1200080426&4294967295,F=C+(N<<12&4294967295|N>>>20),N=L+(A^F&(C^A))+b[6]+2821735955&4294967295,L=F+(N<<17&4294967295|N>>>15),N=A+(C^L&(F^C))+b[7]+4249261313&4294967295,A=L+(N<<22&4294967295|N>>>10),N=C+(F^A&(L^F))+b[8]+1770035416&4294967295,C=A+(N<<7&4294967295|N>>>25),N=F+(L^C&(A^L))+b[9]+2336552879&4294967295,F=C+(N<<12&4294967295|N>>>20),N=L+(A^F&(C^A))+b[10]+4294925233&4294967295,L=F+(N<<17&4294967295|N>>>15),N=A+(C^L&(F^C))+b[11]+2304563134&4294967295,A=L+(N<<22&4294967295|N>>>10),N=C+(F^A&(L^F))+b[12]+1804603682&4294967295,C=A+(N<<7&4294967295|N>>>25),N=F+(L^C&(A^L))+b[13]+4254626195&4294967295,F=C+(N<<12&4294967295|N>>>20),N=L+(A^F&(C^A))+b[14]+2792965006&4294967295,L=F+(N<<17&4294967295|N>>>15),N=A+(C^L&(F^C))+b[15]+1236535329&4294967295,A=L+(N<<22&4294967295|N>>>10),N=C+(L^F&(A^L))+b[1]+4129170786&4294967295,C=A+(N<<5&4294967295|N>>>27),N=F+(A^L&(C^A))+b[6]+3225465664&4294967295,F=C+(N<<9&4294967295|N>>>23),N=L+(C^A&(F^C))+b[11]+643717713&4294967295,L=F+(N<<14&4294967295|N>>>18),N=A+(F^C&(L^F))+b[0]+3921069994&4294967295,A=L+(N<<20&4294967295|N>>>12),N=C+(L^F&(A^L))+b[5]+3593408605&4294967295,C=A+(N<<5&4294967295|N>>>27),N=F+(A^L&(C^A))+b[10]+38016083&4294967295,F=C+(N<<9&4294967295|N>>>23),N=L+(C^A&(F^C))+b[15]+3634488961&4294967295,L=F+(N<<14&4294967295|N>>>18),N=A+(F^C&(L^F))+b[4]+3889429448&4294967295,A=L+(N<<20&4294967295|N>>>12),N=C+(L^F&(A^L))+b[9]+568446438&4294967295,C=A+(N<<5&4294967295|N>>>27),N=F+(A^L&(C^A))+b[14]+3275163606&4294967295,F=C+(N<<9&4294967295|N>>>23),N=L+(C^A&(F^C))+b[3]+4107603335&4294967295,L=F+(N<<14&4294967295|N>>>18),N=A+(F^C&(L^F))+b[8]+1163531501&4294967295,A=L+(N<<20&4294967295|N>>>12),N=C+(L^F&(A^L))+b[13]+2850285829&4294967295,C=A+(N<<5&4294967295|N>>>27),N=F+(A^L&(C^A))+b[2]+4243563512&4294967295,F=C+(N<<9&4294967295|N>>>23),N=L+(C^A&(F^C))+b[7]+1735328473&4294967295,L=F+(N<<14&4294967295|N>>>18),N=A+(F^C&(L^F))+b[12]+2368359562&4294967295,A=L+(N<<20&4294967295|N>>>12),N=C+(A^L^F)+b[5]+4294588738&4294967295,C=A+(N<<4&4294967295|N>>>28),N=F+(C^A^L)+b[8]+2272392833&4294967295,F=C+(N<<11&4294967295|N>>>21),N=L+(F^C^A)+b[11]+1839030562&4294967295,L=F+(N<<16&4294967295|N>>>16),N=A+(L^F^C)+b[14]+4259657740&4294967295,A=L+(N<<23&4294967295|N>>>9),N=C+(A^L^F)+b[1]+2763975236&4294967295,C=A+(N<<4&4294967295|N>>>28),N=F+(C^A^L)+b[4]+1272893353&4294967295,F=C+(N<<11&4294967295|N>>>21),N=L+(F^C^A)+b[7]+4139469664&4294967295,L=F+(N<<16&4294967295|N>>>16),N=A+(L^F^C)+b[10]+3200236656&4294967295,A=L+(N<<23&4294967295|N>>>9),N=C+(A^L^F)+b[13]+681279174&4294967295,C=A+(N<<4&4294967295|N>>>28),N=F+(C^A^L)+b[0]+3936430074&4294967295,F=C+(N<<11&4294967295|N>>>21),N=L+(F^C^A)+b[3]+3572445317&4294967295,L=F+(N<<16&4294967295|N>>>16),N=A+(L^F^C)+b[6]+76029189&4294967295,A=L+(N<<23&4294967295|N>>>9),N=C+(A^L^F)+b[9]+3654602809&4294967295,C=A+(N<<4&4294967295|N>>>28),N=F+(C^A^L)+b[12]+3873151461&4294967295,F=C+(N<<11&4294967295|N>>>21),N=L+(F^C^A)+b[15]+530742520&4294967295,L=F+(N<<16&4294967295|N>>>16),N=A+(L^F^C)+b[2]+3299628645&4294967295,A=L+(N<<23&4294967295|N>>>9),N=C+(L^(A|~F))+b[0]+4096336452&4294967295,C=A+(N<<6&4294967295|N>>>26),N=F+(A^(C|~L))+b[7]+1126891415&4294967295,F=C+(N<<10&4294967295|N>>>22),N=L+(C^(F|~A))+b[14]+2878612391&4294967295,L=F+(N<<15&4294967295|N>>>17),N=A+(F^(L|~C))+b[5]+4237533241&4294967295,A=L+(N<<21&4294967295|N>>>11),N=C+(L^(A|~F))+b[12]+1700485571&4294967295,C=A+(N<<6&4294967295|N>>>26),N=F+(A^(C|~L))+b[3]+2399980690&4294967295,F=C+(N<<10&4294967295|N>>>22),N=L+(C^(F|~A))+b[10]+4293915773&4294967295,L=F+(N<<15&4294967295|N>>>17),N=A+(F^(L|~C))+b[1]+2240044497&4294967295,A=L+(N<<21&4294967295|N>>>11),N=C+(L^(A|~F))+b[8]+1873313359&4294967295,C=A+(N<<6&4294967295|N>>>26),N=F+(A^(C|~L))+b[15]+4264355552&4294967295,F=C+(N<<10&4294967295|N>>>22),N=L+(C^(F|~A))+b[6]+2734768916&4294967295,L=F+(N<<15&4294967295|N>>>17),N=A+(F^(L|~C))+b[13]+1309151649&4294967295,A=L+(N<<21&4294967295|N>>>11),N=C+(L^(A|~F))+b[4]+4149444226&4294967295,C=A+(N<<6&4294967295|N>>>26),N=F+(A^(C|~L))+b[11]+3174756917&4294967295,F=C+(N<<10&4294967295|N>>>22),N=L+(C^(F|~A))+b[2]+718787259&4294967295,L=F+(N<<15&4294967295|N>>>17),N=A+(F^(L|~C))+b[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(L+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+F&4294967295}i.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var A=C-this.blockSize,b=this.B,L=this.h,F=0;F<C;){if(L==0)for(;F<=A;)o(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<C;)if(b[L++]=x.charCodeAt(F++),L==this.blockSize){o(this,b),L=0;break}}else for(;F<C;)if(b[L++]=x[F++],L==this.blockSize){o(this,b),L=0;break}}this.h=L,this.o+=C},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var A=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=A&255,A/=256;for(this.u(x),x=Array(16),C=A=0;4>C;++C)for(var b=0;32>b;b+=8)x[A++]=this.g[C]>>>b&255;return x};function l(x,C){var A=h;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=C(x)}function c(x,C){this.h=C;for(var A=[],b=!0,L=x.length-1;0<=L;L--){var F=x[L]|0;b&&F==C||(A[L]=F,b=!1)}this.g=A}var h={};function p(x){return-128<=x&&128>x?l(x,function(C){return new c([C|0],0>C?-1:0)}):new c([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return w;if(0>x)return H(y(-x));for(var C=[],A=1,b=0;x>=A;b++)C[b]=x/A|0,A*=4294967296;return new c(C,0)}function _(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return H(_(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(C,8)),b=w,L=0;L<x.length;L+=8){var F=Math.min(8,x.length-L),N=parseInt(x.substring(L,L+F),C);8>F?(F=y(Math.pow(C,F)),b=b.j(F).add(y(N))):(b=b.j(A),b=b.add(y(N)))}return b}var w=p(0),S=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-H(this).m();for(var x=0,C=1,A=0;A<this.g.length;A++){var b=this.i(A);x+=(0<=b?b:4294967296+b)*C,C*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(j(this))return"-"+H(this).toString(x);for(var C=y(Math.pow(x,6)),A=this,b="";;){var L=ge(A,C).g;A=pe(A,L.j(C));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=L,V(A))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function j(x){return x.h==-1}n.l=function(x){return x=pe(this,x),j(x)?-1:V(x)?0:1};function H(x){for(var C=x.g.length,A=[],b=0;b<C;b++)A[b]=~x.g[b];return new c(A,~x.h).add(S)}n.abs=function(){return j(this)?H(this):this},n.add=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],b=0,L=0;L<=C;L++){var F=b+(this.i(L)&65535)+(x.i(L)&65535),N=(F>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);b=N>>>16,F&=65535,N&=65535,A[L]=N<<16|F}return new c(A,A[A.length-1]&-2147483648?-1:0)};function pe(x,C){return x.add(H(C))}n.j=function(x){if(V(this)||V(x))return w;if(j(this))return j(x)?H(this).j(H(x)):H(H(this).j(x));if(j(x))return H(this.j(H(x)));if(0>this.l(P)&&0>x.l(P))return y(this.m()*x.m());for(var C=this.g.length+x.g.length,A=[],b=0;b<2*C;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var L=0;L<x.g.length;L++){var F=this.i(b)>>>16,N=this.i(b)&65535,Ye=x.i(L)>>>16,vt=x.i(L)&65535;A[2*b+2*L]+=N*vt,ee(A,2*b+2*L),A[2*b+2*L+1]+=F*vt,ee(A,2*b+2*L+1),A[2*b+2*L+1]+=N*Ye,ee(A,2*b+2*L+1),A[2*b+2*L+2]+=F*Ye,ee(A,2*b+2*L+2)}for(b=0;b<C;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=C;b<2*C;b++)A[b]=0;return new c(A,0)};function ee(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function de(x,C){this.g=x,this.h=C}function ge(x,C){if(V(C))throw Error("division by zero");if(V(x))return new de(w,w);if(j(x))return C=ge(H(x),C),new de(H(C.g),H(C.h));if(j(C))return C=ge(x,H(C)),new de(H(C.g),C.h);if(30<x.g.length){if(j(x)||j(C))throw Error("slowDivide_ only works with positive integers.");for(var A=S,b=C;0>=b.l(x);)A=je(A),b=je(b);var L=Fe(A,1),F=Fe(b,1);for(b=Fe(b,2),A=Fe(A,2);!V(b);){var N=F.add(b);0>=N.l(x)&&(L=L.add(A),F=N),b=Fe(b,1),A=Fe(A,1)}return C=pe(x,L.j(C)),new de(L,C)}for(L=w;0<=x.l(C);){for(A=Math.max(1,Math.floor(x.m()/C.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=y(A),N=F.j(C);j(N)||0<N.l(x);)A-=b,F=y(A),N=F.j(C);V(F)&&(F=S),L=L.add(F),x=pe(x,N)}return new de(L,x)}n.A=function(x){return ge(this,x).h},n.and=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],b=0;b<C;b++)A[b]=this.i(b)&x.i(b);return new c(A,this.h&x.h)},n.or=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],b=0;b<C;b++)A[b]=this.i(b)|x.i(b);return new c(A,this.h|x.h)},n.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],b=0;b<C;b++)A[b]=this.i(b)^x.i(b);return new c(A,this.h^x.h)};function je(x){for(var C=x.g.length+1,A=[],b=0;b<C;b++)A[b]=x.i(b)<<1|x.i(b-1)>>>31;return new c(A,x.h)}function Fe(x,C){var A=C>>5;C%=32;for(var b=x.g.length-A,L=[],F=0;F<b;F++)L[F]=0<C?x.i(F+A)>>>C|x.i(F+A+1)<<32-C:x.i(F+A);return new c(L,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Vw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Ps=c}).apply(typeof mv<"u"?mv:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,El,Fw,Sc,Of,jw,Uw,zw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var $=u[I];if(!($ in v))break e;v=v[$]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,$={next:function(){if(!I&&v<u.length){var J=v++;return{value:m(J,u[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),u.apply(m,$)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,S.apply(null,arguments)}function P(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function V(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,$,J){for(var he=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)he[wt-2]=arguments[wt];return m.prototype[$].apply(I,he)}}function j(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function H(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const $=u.length||0,J=I.length||0;u.length=$+J;for(let he=0;he<J;he++)u[$+he]=I[he]}else u.push(I)}}class pe{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function de(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var je=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function Fe(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function C(u){const m={};for(const v in u)m[v]=u[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let v,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(v in I)u[v]=I[v];for(let J=0;J<A.length;J++)v=A[J],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function F(u){h.setTimeout(()=>{throw u},0)}function N(){var u=Ae;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ye{constructor(){this.h=this.g=null}add(m,v){const I=vt.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var vt=new pe(()=>new bt,u=>u.reset());class bt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let it,ae=!1,Ae=new Ye,me=()=>{const u=h.Promise.resolve(void 0);it=()=>{u.then(z)}};var z=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(v){F(v)}var m=vt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ae=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var $e=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function be(u,m){if(Ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(je){e:{try{ge(m.nodeName);var $=!0;break e}catch{}$=!1}$||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:qe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&be.aa.h.call(this)}}V(be,Ce);var qe={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function mt(u,m,v,I,$){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=$,this.key=++Ze,this.da=this.fa=!1}function St(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function on(u){this.src=u,this.g={},this.h=0}on.prototype.add=function(u,m,v,I,$){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var he=hn(u,m,I,$);return-1<he?(m=u[he],v||(m.fa=!1)):(m=new mt(m,this.src,J,!!I,$),m.fa=v,u.push(m)),m};function It(u,m){var v=m.type;if(v in u.g){var I=u.g[v],$=Array.prototype.indexOf.call(I,m,void 0),J;(J=0<=$)&&Array.prototype.splice.call(I,$,1),J&&(St(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function hn(u,m,v,I){for(var $=0;$<u.length;++$){var J=u[$];if(!J.da&&J.listener==m&&J.capture==!!v&&J.ha==I)return $}return-1}var hr="closure_lm_"+(1e6*Math.random()|0),Wr={};function bn(u,m,v,I,$){if(Array.isArray(m)){for(var J=0;J<m.length;J++)bn(u,m[J],v,I,$);return null}return v=k(v),u&&u[Qe]?u.K(m,v,y(I)?!!I.capture:!1,$):_i(u,m,v,!1,I,$)}function _i(u,m,v,I,$,J){if(!m)throw Error("Invalid event type");var he=y($)?!!$.capture:!!$,wt=qr(u);if(wt||(u[hr]=wt=new on(u)),v=wt.add(m,v,I,he,J),v.proxy)return v;if(I=Wi(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)$e||($=he),$===void 0&&($=!1),u.addEventListener(m.toString(),I,$);else if(u.attachEvent)u.attachEvent(Zn(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wi(){function u(v){return m.call(u.src,u.listener,v)}const m=Ct;return u}function Pr(u,m,v,I,$){if(Array.isArray(m))for(var J=0;J<m.length;J++)Pr(u,m[J],v,I,$);else I=y(I)?!!I.capture:!!I,v=k(v),u&&u[Qe]?(u=u.i,m=String(m).toString(),m in u.g&&(J=u.g[m],v=hn(J,v,I,$),-1<v&&(St(J[v]),Array.prototype.splice.call(J,v,1),J.length==0&&(delete u.g[m],u.h--)))):u&&(u=qr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=hn(m,v,I,$)),(v=-1<u?m[u]:null)&&Xn(v))}function Xn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Qe])It(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(Zn(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=qr(m))?(It(v,u),v.h==0&&(v.src=null,m[hr]=null)):St(u)}}}function Zn(u){return u in Wr?Wr[u]:Wr[u]="on"+u}function Ct(u,m){if(u.da)u=!0;else{m=new be(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&Xn(u),u=v.call(I,m)}return u}function qr(u){return u=u[hr],u instanceof on?u:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function k(u){return typeof u=="function"?u:(u[En]||(u[En]=function(m){return u.handleEvent(m)}),u[En])}function W(){Z.call(this),this.i=new on(this),this.M=this,this.F=null}V(W,Z),W.prototype[Qe]=!0,W.prototype.removeEventListener=function(u,m,v,I){Pr(this,u,m,v,I)};function B(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Ce(m,u);else if(m instanceof Ce)m.target=m.target||u;else{var $=m;m=new Ce(I,u),b(m,$)}if($=!0,v)for(var J=v.length-1;0<=J;J--){var he=m.g=v[J];$=X(he,I,!0,m)&&$}if(he=m.g=u,$=X(he,I,!0,m)&&$,$=X(he,I,!1,m)&&$,v)for(J=0;J<v.length;J++)he=m.g=v[J],$=X(he,I,!1,m)&&$}W.prototype.N=function(){if(W.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)St(v[I]);delete u.g[m],u.h--}}this.F=null},W.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},W.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function X(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var $=!0,J=0;J<m.length;++J){var he=m[J];if(he&&!he.da&&he.capture==v){var wt=he.listener,en=he.ha||he.src;he.fa&&It(u.i,he),$=wt.call(en,I)!==!1&&$}}return $&&!I.defaultPrevented}function te(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function ue(u){u.g=te(()=>{u.g=null,u.i&&(u.i=!1,ue(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ye extends Z{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(u){Z.call(this),this.h=u,this.g={}}V(De,Z);var ut=[];function Tt(u){Fe(u.g,function(m,v){this.g.hasOwnProperty(v)&&Xn(m)},u),u.g={}}De.prototype.N=function(){De.aa.N.call(this),Tt(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=h.JSON.stringify,Vn=h.JSON.parse,Ht=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function fr(){}fr.prototype.h=null;function Ar(u){return u.h||(u.h=u.i())}function wi(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){Ce.call(this,"d")}V(Mn,Ce);function qi(){Ce.call(this,"c")}V(qi,Ce);var er={},Bs=null;function Gr(){return Bs=Bs||new W}er.La="serverreachability";function Kr(u){Ce.call(this,er.La,u)}V(Kr,Ce);function Fn(u){const m=Gr();B(m,new Kr(m))}er.STAT_EVENT="statevent";function $s(u,m){Ce.call(this,er.STAT_EVENT,u),this.stat=m}V($s,Ce);function Vt(u){const m=Gr();B(m,new $s(m,u))}er.Ma="timingevent";function D(u,m){Ce.call(this,er.Ma,u),this.size=m}V(D,Ce);function U(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function K(){this.g=!0}K.prototype.xa=function(){this.g=!1};function re(u,m,v,I,$,J){u.info(function(){if(u.g)if(J)for(var he="",wt=J.split("&"),en=0;en<wt.length;en++){var ct=wt[en].split("=");if(1<ct.length){var an=ct[0];ct=ct[1];var qt=an.split("_");he=2<=qt.length&&qt[1]=="type"?he+(an+"="+ct+"&"):he+(an+"=redacted&")}}else he=null;else he=J;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+m+`
`+v+`
`+he})}function fe(u,m,v,I,$,J,he){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+m+`
`+v+`
`+J+" "+he})}function Se(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ie(u,v)+(I?" "+I:"")})}function Le(u,m){u.info(function(){return"TIMEOUT: "+m})}K.prototype.info=function(){};function Ie(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var J=$[0];if(J!="noop"&&J!="stop"&&J!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return Zt(v)}catch{return m}}var Te={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},we;function Ue(){}V(Ue,fr),Ue.prototype.g=function(){return new XMLHttpRequest},Ue.prototype.i=function(){return{}},we=new Ue;function We(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new De(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var ft={},et={};function _t(u,m,v){u.L=1,u.v=Ji(rr(m)),u.m=v,u.P=!0,pr(u,null)}function pr(u,m){u.F=Date.now(),nt(u),u.A=rr(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Zi(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Ut,u.g=pu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new ye(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var $="readystatechange";Array.isArray($)||($&&(ut[0]=$.toString()),$=ut);for(var J=0;J<$.length;J++){var he=bn(v,$[J],I||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Fn(),re(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Un(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)e:{const qt=Un(this.g);var m=this.g.Ba();const yr=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||za(this.g)))){this.J||qt!=4||m==7||(m==8||0>=yr?Fn(3):Fn(2)),nr(this);var v=this.g.Z();this.X=v;t:if(Qr(this)){var I=za(this.g);u="";var $=I.length,J=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Sn(this);var he="";break t}this.h.i=new h.TextDecoder}for(m=0;m<$;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(J&&m==$-1)});I.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,fe(this.i,this.u,this.A,this.l,this.R,qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,en=this.g;if((wt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(wt)){var ct=wt;break t}}ct=null}if(v=ct)Se(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,v);else{this.o=!1,this.s=3,Vt(12),fn(this),Sn(this);break e}}if(this.P){v=!0;let sr;for(;!this.J&&this.C<he.length;)if(sr=tr(this,he),sr==et){qt==4&&(this.s=4,Vt(14),v=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==ft){this.s=4,Vt(15),Se(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else Se(this.i,this.l,sr,null),Yr(this,sr);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||he.length!=0||this.h.h||(this.s=1,Vt(16),v=!1),this.o=this.o&&v,!v)Se(this.i,this.l,he,"[Invalid Chunked Response]"),fn(this),Sn(this);else if(0<he.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),$a(an),an.M=!0,Vt(11))}}else Se(this.i,this.l,he,null),Yr(this,he);qt==4&&fn(this),this.o&&!this.J&&(qt==4?Uo(this.j,this):(this.o=!1,nt(this)))}else Lo(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),fn(this),Sn(this)}}}catch{}finally{}};function Qr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function tr(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?et:(v=Number(m.substring(v,I)),isNaN(v)?ft:(I+=1,I+v>m.length?et:(m=m.slice(I,I+v),u.C=I+v,m)))}We.prototype.cancel=function(){this.J=!0,fn(this)};function nt(u){u.S=Date.now()+u.I,Gi(u,u.I)}function Gi(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=U(S(u.ba,u),m)}function nr(u){u.B&&(h.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Le(this.i,this.A),this.L!=2&&(Fn(),Vt(17)),fn(this),this.s=2,Sn(this)):Gi(this,this.S-u)};function Sn(u){u.j.G==0||u.J||Uo(u.j,u)}function fn(u){nr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Tt(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Yr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||st(v.h,u))){if(!u.K&&st(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)jo(v),Dr(v);else break e;Fo(v),Vt(18)}}else v.za=$[1],0<v.za-v.T&&37500>$[2]&&v.F&&v.v==0&&!v.C&&(v.C=U(S(v.Za,v),6e3));if(1>=Jr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else xi(v,11)}else if((u.K||v.g==u)&&jo(v),!ee(m))for($=v.Da.g.parse(m),m=0;m<$.length;m++){let ct=$[m];if(v.T=ct[0],ct=ct[1],v.G==2)if(ct[0]=="c"){v.K=ct[1],v.ia=ct[2];const an=ct[3];an!=null&&(v.la=an,v.j.info("VER="+v.la));const qt=ct[4];qt!=null&&(v.Aa=qt,v.j.info("SVER="+v.Aa));const yr=ct[5];yr!=null&&typeof yr=="number"&&0<yr&&(I=1.5*yr,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const sr=u.g;if(sr){const Ys=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ys){var J=I.h;J.g||Ys.indexOf("spdy")==-1&&Ys.indexOf("quic")==-1&&Ys.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(mr(J,J.h),J.h=null))}if(I.D){const Bo=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(I.ya=Bo,xt(I.I,I.D,Bo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var he=u;if(I.qa=fu(I,I.J?I.ia:null,I.W),he.K){Hs(I.h,he);var wt=he,en=I.L;en&&(wt.I=en),wt.B&&(nr(wt),nt(wt)),I.g=he}else Qs(I);0<v.i.length&&ti(v)}else ct[0]!="stop"&&ct[0]!="close"||xi(v,7);else v.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?xi(v,7):mn(v):ct[0]!="noop"&&v.l&&v.l.ta(ct),v.v=0)}}Fn(4)}catch{}}var rt=class{constructor(u,m){this.g=u,this.map=m}};function gt(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Jr(u){return u.h?1:u.g?u.g.size:0}function st(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function mr(u,m){u.g?u.g.add(m):u.h=m}function Hs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}gt.prototype.cancel=function(){if(this.i=Ro(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ro(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return j(u.i)}function ko(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function No(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Ki(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=No(u),I=ko(u),$=I.length,J=0;J<$;J++)m.call(void 0,I[J],v&&v[J],u)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kd(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),$=null;if(0<=I){var J=u[v].substring(0,I);$=u[v].substring(I+1)}else J=u[v];m(J,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ei(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ei){this.h=u.h,qs(this,u.j),this.o=u.o,this.g=u.g,Qi(this,u.s),this.l=u.l;var m=u.i,v=new Xr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Yi(this,v),this.m=u.m}else u&&(m=String(u).match(Ws))?(this.h=!1,qs(this,m[1]||"",!0),this.o=lt(m[2]||""),this.g=lt(m[3]||"",!0),Qi(this,m[4]),this.l=lt(m[5]||"",!0),Yi(this,m[6]||"",!0),this.m=lt(m[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}Ei.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Xi(m,bo,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Xi(m,bo,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Xi(v,v.charAt(0)=="/"?su:iu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Xi(v,Fa)),u.join("")};function rr(u){return new Ei(u)}function qs(u,m,v){u.j=v?lt(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Qi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Yi(u,m,v){m instanceof Xr?(u.i=m,Zr(u.i,u.h)):(v||(m=Xi(m,ou)),u.i=new Xr(m,u.h))}function xt(u,m,v){u.i.set(m,v)}function Ji(u){return xt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function lt(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xi(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,ru),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ru(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bo=/[#\/\?@]/g,iu=/[#\?:]/g,su=/[#\?]/g,ou=/[#\?@]/g,Fa=/#/g;function Xr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function pn(u){u.g||(u.g=new Map,u.h=0,u.i&&kd(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Xr.prototype,n.add=function(u,m){pn(this),this.i=null,u=gr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Rr(u,m){pn(u),m=gr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function kr(u,m){return pn(u),m=gr(u,m),u.g.has(m)}n.forEach=function(u,m){pn(this),this.g.forEach(function(v,I){v.forEach(function($){u.call(m,$,I,this)},this)},this)},n.na=function(){pn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const $=u[I];for(let J=0;J<$.length;J++)v.push(m[I])}return v},n.V=function(u){pn(this);let m=[];if(typeof u=="string")kr(this,u)&&(m=m.concat(this.g.get(gr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return pn(this),this.i=null,u=gr(this,u),kr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Zi(u,m,v){Rr(u,m),0<v.length&&(u.i=null,u.g.set(gr(u,m),j(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const J=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var $=J;he[I]!==""&&($+="="+encodeURIComponent(String(he[I]))),u.push($)}}return this.i=u.join("&")};function gr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Zr(u,m){m&&!u.j&&(pn(u),u.i=null,u.g.forEach(function(v,I){var $=I.toLowerCase();I!=$&&(Rr(this,I),Zi(this,$,v))},u)),u.j=m}function Nd(u,m){const v=new K;if(h.Image){const I=new Image;I.onload=P(jn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=P(jn,v,"TestLoadImage: error",!1,m,I),I.onabort=P(jn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=P(jn,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function au(u,m){const v=new K,I=new AbortController,$=setTimeout(()=>{I.abort(),jn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(J=>{clearTimeout($),J.ok?jn(v,"TestPingServer: ok",!0,m):jn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout($),jn(v,"TestPingServer: error",!1,m)})}function jn(u,m,v,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(v)}catch{}}function bd(){this.g=new Ht}function lu(u,m,v){const I=v||"";try{Ki(u,function($,J){let he=$;y($)&&(he=Zt($)),m.push(I+J+"="+encodeURIComponent(he))})}catch($){throw m.push(I+"type="+encodeURIComponent("_badmap")),$}}function Ti(u){this.l=u.Ub||null,this.j=u.eb||!1}V(Ti,fr),Ti.prototype.g=function(){return new Gs(this.l,this.j)},Ti.prototype.i=(function(u){return function(){return u}})({});function Gs(u,m){W.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Gs,W),n=Gs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,br(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function uu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Nr(this):br(this),this.readyState==3&&uu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Nr(this))},n.Qa=function(u){this.g&&(this.response=u,Nr(this))},n.ga=function(){this.g&&Nr(this)};function Nr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,br(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function br(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Si(u){let m="";return Fe(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function es(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Si(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):xt(u,m,v))}function Dt(u){W.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Dt,W);var Dd=/^https?$/i,ja=["POST","PUT"];n=Dt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():we.g(),this.v=this.o?Ar(this.o):Ar(we),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(J){Ks(this,J);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)v.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())v.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),$=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ja,m,void 0))||I||$||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of v)this.g.setRequestHeader(J,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oo(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){Ks(this,J)}};function Ks(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Do(u),ir(u)}function Do(u){u.A||(u.A=!0,B(u,"complete"),B(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,B(this,"complete"),B(this,"abort"),ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ir(this,!0)),Dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ua(this):this.bb())},n.bb=function(){Ua(this)};function Ua(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Un(u)!=4||u.Z()!=2)){if(u.u&&Un(u)==4)te(u.Ea,0,u);else if(B(u,"readystatechange"),Un(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=he===0){var $=String(u.D).match(Ws)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),I=!Dd.test($?$.toLowerCase():"")}v=I}if(v)B(u,"complete"),B(u,"success");else{u.m=6;try{var J=2<Un(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",Do(u)}}finally{ir(u)}}}}function ir(u,m){if(u.g){Oo(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||B(u,"ready");try{v.onreadystatechange=I}catch{}}}function Oo(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Vn(m)}};function za(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(u){const m={};u=(u.g&&2<=Un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(ee(u[I]))continue;var v=L(u[I]);const $=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=m[$]||[];m[$]=J,J.push(v)}x(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Ba(u){this.Aa=0,this.i=[],this.j=new K,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,u),this.cb=ei("retryDelaySeedMs",1e4,u),this.Wa=ei("forwardChannelMaxRetries",2,u),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gt(u&&u.concurrentRequestLimit),this.Da=new bd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ba.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){Vt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=fu(this,null,this.W),ti(this)};function mn(u){if(Vo(u),u.G==3){var m=u.U++,v=rr(u.I);if(xt(v,"SID",u.K),xt(v,"RID",m),xt(v,"TYPE","terminate"),Ii(u,v),m=new We(u,u.j,m),m.L=2,m.v=Ji(rr(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=pu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),nt(m)}hu(u)}function Dr(u){u.g&&($a(u),u.g.cancel(),u.g=null)}function Vo(u){Dr(u),u.u&&(h.clearTimeout(u.u),u.u=null),jo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function ti(u){if(!Wt(u.h)&&!u.s){u.s=!0;var m=u.Ga;it||me(),ae||(it(),ae=!0),Ae.add(m,u),u.B=0}}function Od(u,m){return Jr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=U(S(u.Ga,u,m),du(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new We(this,this.j,u);let J=this.o;if(this.S&&(J?(J=C(J),b(J,this.S)):J=this.S),this.m!==null||this.O||($.H=J,J=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ts(this,$,m),v=rr(this.I),xt(v,"RID",u),xt(v,"CVER",22),this.D&&xt(v,"X-HTTP-Session-Id",this.D),Ii(this,v),J&&(this.O?m="headers="+encodeURIComponent(String(Si(J)))+"&"+m:this.m&&es(v,this.m,J)),mr(this.h,$),this.Ua&&xt(v,"TYPE","init"),this.P?(xt(v,"$req",m),xt(v,"SID","null"),$.T=!0,_t($,v,null)):_t($,v,m),this.G=2}}else this.G==3&&(u?Mo(this,u):this.i.length==0||Wt(this.h)||Mo(this))};function Mo(u,m){var v;m?v=m.l:v=u.U++;const I=rr(u.I);xt(I,"SID",u.K),xt(I,"RID",v),xt(I,"AID",u.T),Ii(u,I),u.m&&u.o&&es(I,u.m,u.o),v=new We(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ts(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mr(u.h,v),_t(v,I,m)}function Ii(u,m){u.H&&Fe(u.H,function(v,I){xt(m,I,v)}),u.l&&Ki({},function(v,I){xt(m,I,v)})}function ts(u,m,v){v=Math.min(u.i.length,v);var I=u.l?S(u.l.Na,u.l,u):null;e:{var $=u.i;let J=-1;for(;;){const he=["count="+v];J==-1?0<v?(J=$[0].g,he.push("ofs="+J)):J=0:he.push("ofs="+J);let wt=!0;for(let en=0;en<v;en++){let ct=$[en].g;const an=$[en].map;if(ct-=J,0>ct)J=Math.max(0,$[en].g-100),wt=!1;else try{lu(an,he,"req"+ct+"_")}catch{I&&I(an)}}if(wt){I=he.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Qs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;it||me(),ae||(it(),ae=!0),Ae.add(m,u),u.v=0}}function Fo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=U(S(u.Fa,u),du(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=U(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),Dr(this),cu(this))};function $a(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function cu(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=rr(u.qa);xt(m,"RID","rpc"),xt(m,"SID",u.K),xt(m,"AID",u.T),xt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&xt(m,"TO",u.ja),xt(m,"TYPE","xmlhttp"),Ii(u,m),u.m&&u.o&&es(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ji(rr(m)),v.m=null,v.P=!0,pr(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Dr(this),Fo(this),Vt(19))};function jo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Uo(u,m){var v=null;if(u.g==m){jo(u),$a(u),u.g=null;var I=2}else if(st(u.h,m))v=m.D,Hs(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var $=u.B;I=Gr(),B(I,new D(I,v)),ti(u)}else Qs(u);else if($=m.s,$==3||$==0&&0<m.X||!(I==1&&Od(u,m)||I==2&&Fo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),$){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function du(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function xi(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),I=u.Xa;const $=!I;I=new Ei(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qs(I,"https"),Ji(I),$?Nd(I.toString(),v):au(I.toString(),v)}else Vt(2);u.G=0,u.l&&u.l.sa(m),hu(u),Vo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function hu(u){if(u.G=0,u.ka=[],u.l){const m=Ro(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ka,m),H(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function fu(u,m,v){var I=v instanceof Ei?rr(v):new Ei(v);if(I.g!="")m&&(I.g=m+"."+I.g),Qi(I,I.s);else{var $=h.location;I=$.protocol,m=m?m+"."+$.hostname:$.hostname,$=+$.port;var J=new Ei(null);I&&qs(J,I),m&&(J.g=m),$&&Qi(J,$),v&&(J.l=v),I=J}return v=u.D,m=u.ya,v&&m&&xt(I,v,m),xt(I,"VER",u.la),Ii(u,I),I}function pu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Dt(new Ti({eb:v})):new Dt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ha(){}n=Ha.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zo(){}zo.prototype.g=function(u,m){return new Dn(u,m)};function Dn(u,m){W.call(this),this.g=new Ba(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ni(this)}V(Dn,W),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){mn(this.g)},Dn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Zt(u),u=v);m.i.push(new rt(m.Ya++,u)),m.G==3&&ti(m)},Dn.prototype.N=function(){this.g.l=null,delete this.j,mn(this.g),delete this.g,Dn.aa.N.call(this)};function mu(u){Mn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}V(mu,Mn);function gu(){qi.call(this),this.status=1}V(gu,qi);function ni(u){this.g=u}V(ni,Ha),ni.prototype.ua=function(){B(this.g,"a")},ni.prototype.ta=function(u){B(this.g,new mu(u))},ni.prototype.sa=function(u){B(this.g,new gu)},ni.prototype.ra=function(){B(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,zw=function(){return new zo},Uw=function(){return Gr()},jw=er,Of={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Sc=Te,_e.COMPLETE="complete",Fw=_e,wi.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",W.prototype.listen=W.prototype.K,El=wi,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,Mw=Dt}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});const gv="@firebase/firestore",yv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new ap("@firebase/firestore");function ca(){return To.logLevel}function Ee(n,...e){if(To.logLevel<=ot.DEBUG){const t=e.map(_p);To.debug(`Firestore (${Oa}): ${n}`,...t)}}function Bi(n,...e){if(To.logLevel<=ot.ERROR){const t=e.map(_p);To.error(`Firestore (${Oa}): ${n}`,...t)}}function ks(n,...e){if(To.logLevel<=ot.WARN){const t=e.map(_p);To.warn(`Firestore (${Oa}): ${n}`,...t)}}function _p(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Bw(n,i,t)}function Bw(n,e,t){let i=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Bi(i),new Error(i)}function yt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||Bw(e,o,i)}function Ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class AP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RP{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Fi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},h=p=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Fi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string",31837,{l:i}),new $w(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class kP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new kP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const i=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=DP(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function Lf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Xe(i,o);{const l=Hw(),c=OP(l.encode(_v(n,t)),l.encode(_v(e,t)));return c!==0?c:Xe(i,o)}}t+=i>65535?2:1}return Xe(n.length,e.length)}function _v(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function OP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Xe(n[t],e[t]);return Xe(n.length,e.length)}function Sa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__name__";class ai{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ai?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ai.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Xe(e.length,t.length)}static compareSegments(e,t){const i=ai.isNumericId(e),o=ai.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ai.extractNumericId(e).compare(ai.extractNumericId(t)):Lf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ps.fromString(e.substring(4,e.length-2))}}class kt extends ai{construct(e,t,i){return new kt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const LP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends ai{construct(e,t,i){return new _n(e,t,i)}static isValidIdentifier(e){return LP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wv}static keyField(){return new _n([wv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ke(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ke(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ke(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(l(),o++)}if(l(),c)throw new ke(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(kt.fromString(e))}static fromName(e){return new Oe(kt.fromString(e).popFirst(5))}static empty(){return new Oe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n,e,t){if(!t)throw new ke(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VP(n,e,t,i){if(e===!0&&i===!0)throw new ke(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ev(n){if(!Oe.isDocumentKey(n))throw new ke(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tv(n){if(Oe.isDocumentKey(n))throw new ke(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ep(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ep(n);throw new ke(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Jl(n,e){if(!qw(n))throw new ke(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ke(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=-62135596800,Iv=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Iv);return new Nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sv)throw new ke(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jl(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Yt("string",Nt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Nt(0,0))}static max(){return new Ge(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function MP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ge.fromTimestamp(i===1e9?new Nt(t+1,0):new Nt(t,i));return new Ns(o,Oe.empty(),e)}function FP(n){return new Ns(n.readTime,n.key,Ml)}class Ns{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ns(Ge.min(),Oe.empty(),Ml)}static max(){return new Ns(Ge.max(),Oe.empty(),Ml)}}function jP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==UP)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,i)=>{t(e)}))}static reject(e){return new ne(((t,i)=>{i(e)}))}static waitFor(e){return new ne(((t,i)=>{let o=0,l=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next((o=>o?ne.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ne(((i,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++h,h===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new ne(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function BP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ud.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=-1;function cd(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function $P(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="";function HP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xv(e)),e=WP(n.get(t),e);return xv(e)}function WP(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Gw:t+="";break;default:t+=l}}return t}function xv(n){return n+Gw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Us(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??vn.RED,this.left=o??vn.EMPTY,this.right=l??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new vn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return vn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(e){return new Pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class Pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new dr([])}unionWith(e){let t=new sn(_n.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Qw("Invalid base64 string: "+l):l}})(e);return new wn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const qP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(yt(!!n,39018),typeof n=="string"){let e=0;const t=qP.exec(n);if(yt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$t(n.seconds),nanos:$t(n.nanos)}}function $t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ds(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="server_timestamp",Jw="__type__",Xw="__previous_value__",Zw="__local_write_time__";function Sp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jw])===null||t===void 0?void 0:t.stringValue)===Yw}function dd(n){const e=n.mapValue.fields[Xw];return Sp(e)?dd(e):e}function Fl(n){const e=bs(n.mapValue.fields[Zw].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t,i,o,l,c,h,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Bc="(default)";class jl{constructor(e,t){this.projectId=e,this.database=t||Bc}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===Bc}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__type__",KP="__max__",pc={mapValue:{}},t0="__vector__",$c="value";function Os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sp(n)?4:YP(n)?9007199254740991:QP(n)?10:11:Be(28295,{value:n})}function mi(n,e){if(n===e)return!0;const t=Os(n);if(t!==Os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fl(n).isEqual(Fl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=bs(o.timestampValue),h=bs(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ds(o.bytesValue).isEqual(Ds(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return $t(o.geoPointValue.latitude)===$t(l.geoPointValue.latitude)&&$t(o.geoPointValue.longitude)===$t(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return $t(o.integerValue)===$t(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=$t(o.doubleValue),h=$t(l.doubleValue);return c===h?zc(c)===zc(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Sa(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Cv(c)!==Cv(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!mi(c[p],h[p])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function Ul(n,e){return(n.values||[]).find((t=>mi(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=Os(n),i=Os(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=$t(l.integerValue||l.doubleValue),p=$t(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return Av(n.timestampValue,e.timestampValue);case 4:return Av(Fl(n),Fl(e));case 5:return Lf(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ds(l),p=Ds(c);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const _=Xe(h[y],p[y]);if(_!==0)return _}return Xe(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Xe($t(l.latitude),$t(c.latitude));return h!==0?h:Xe($t(l.longitude),$t(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Rv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var h,p,y,_;const w=l.fields||{},S=c.fields||{},P=(h=w[$c])===null||h===void 0?void 0:h.arrayValue,V=(p=S[$c])===null||p===void 0?void 0:p.arrayValue,j=Xe(((y=P?.values)===null||y===void 0?void 0:y.length)||0,((_=V?.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:Rv(P,V)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===pc.mapValue&&c===pc.mapValue)return 0;if(l===pc.mapValue)return 1;if(c===pc.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const S=Lf(p[w],_[w]);if(S!==0)return S;const P=Ia(h[p[w]],y[_[w]]);if(P!==0)return P}return Xe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{le:t})}}function Av(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=bs(n),i=bs(e),o=Xe(t.seconds,i.seconds);return o!==0?o:Xe(t.nanos,i.nanos)}function Rv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ia(t[o],i[o]);if(l)return l}return Xe(t.length,i.length)}function xa(n){return Vf(n)}function Vf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=bs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ds(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Vf(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Vf(t.fields[c])}`;return o+"}"})(n.mapValue):Be(61005,{value:n})}function Ic(n){switch(Os(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(n);return e?16+Ic(e):16;case 5:return 2*n.stringValue.length;case 6:return Ds(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Ic(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Us(i.fields,((l,c)=>{o+=l.length+Ic(c)})),o})(n.mapValue);default:throw Be(13486,{value:n})}}function Mf(n){return!!n&&"integerValue"in n}function Ip(n){return!!n&&"arrayValue"in n}function kv(n){return!!n&&"nullValue"in n}function Nv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xc(n){return!!n&&"mapValue"in n}function QP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[e0])===null||t===void 0?void 0:t.stringValue)===t0}function Pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Us(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Pl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(t)}setAll(e){let t=_n.emptyPath(),i={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}c?i[h.lastSegment()]=Pl(c):o.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());xc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Us(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Yn(Pl(this.value))}}function n0(n){const e=[];return Us(n.fields,((t,i)=>{const o=new _n([t]);if(xc(i)){const l=n0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,i,o,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new kn(e,0,Ge.min(),Ge.min(),Ge.min(),Yn.empty(),0)}static newFoundDocument(e,t,i,o){return new kn(e,1,t,Ge.min(),i,o,0)}static newNoDocument(e,t){return new kn(e,2,t,Ge.min(),Ge.min(),Yn.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Ge.min(),Ge.min(),Yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.position=e,this.inclusive=t}}function bv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=Oe.comparator(Oe.fromName(c.referenceValue),t.key):i=Ia(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Dv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function JP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{}class rn extends r0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ZP(e,t,i):t==="array-contains"?new nA(e,i):t==="in"?new rA(e,i):t==="not-in"?new iA(e,i):t==="array-contains-any"?new sA(e,i):new rn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eA(e,i):new tA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&Os(this.value)===Os(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends r0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new gi(e,t)}matches(e){return i0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function i0(n){return n.op==="and"}function s0(n){return XP(n)&&i0(n)}function XP(n){for(const e of n.filters)if(e instanceof gi)return!1;return!0}function Ff(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+xa(n.value);if(s0(n))return n.filters.map((e=>Ff(e))).join(",");{const e=n.filters.map((t=>Ff(t))).join(",");return`${n.op}(${e})`}}function o0(n,e){return n instanceof rn?(function(i,o){return o instanceof rn&&i.op===o.op&&i.field.isEqual(o.field)&&mi(i.value,o.value)})(n,e):n instanceof gi?(function(i,o){return o instanceof gi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,h)=>l&&o0(c,o.filters[h])),!0):!1})(n,e):void Be(19439)}function a0(n){return n instanceof rn?(function(t){return`${t.field.canonicalString()} ${t.op} ${xa(t.value)}`})(n):n instanceof gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(a0).join(" ,")+"}"})(n):"Filter"}class ZP extends rn{constructor(e,t,i){super(e,t,i),this.key=Oe.fromName(i.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class eA extends rn{constructor(e,t){super(e,"in",t),this.keys=l0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tA extends rn{constructor(e,t){super(e,"not-in",t),this.keys=l0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Oe.fromName(i.referenceValue)))}class nA extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ip(t)&&Ul(t.arrayValue,this.value)}}class rA extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ul(this.value.arrayValue,t)}}class iA extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ul(this.value.arrayValue,t)}}class sA extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ul(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t=null,i=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Pe=null}}function Ov(n,e=null,t=[],i=[],o=null,l=null,c=null){return new oA(n,e,t,i,o,l,c)}function xp(n){const e=Ke(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ff(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),cd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>xa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>xa(i))).join(",")),e.Pe=t}return e.Pe}function Cp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!o0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dv(n.startAt,e.startAt)&&Dv(n.endAt,e.endAt)}function jf(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t=null,i=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function aA(n,e,t,i,o,l,c,h){return new hd(n,e,t,i,o,l,c,h)}function Pp(n){return new hd(n)}function Lv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lA(n){return n.collectionGroup!==null}function Al(n){const e=Ke(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new sn(_n.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(h=h.add(y.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Wc(l,i))})),t.has(_n.keyField().canonicalString())||e.Te.push(new Wc(_n.keyField(),i))}return e.Te}function di(n){const e=Ke(n);return e.Ie||(e.Ie=uA(e,Al(n))),e.Ie}function uA(n,e){if(n.limitType==="F")return Ov(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Wc(o.field,l)}));const t=n.endAt?new Hc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Hc(n.startAt.position,n.startAt.inclusive):null;return Ov(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Uf(n,e,t){return new hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fd(n,e){return Cp(di(n),di(e))&&n.limitType===e.limitType}function u0(n){return`${xp(di(n))}|lt:${n.limitType}`}function da(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>a0(o))).join(", ")}]`),cd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>xa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>xa(o))).join(",")),`Target(${i})`})(di(n))}; limitType=${n.limitType})`}function pd(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Oe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of Al(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,h,p){const y=bv(c,h,p);return c.inclusive?y<=0:y<0})(i.startAt,Al(i),o)||i.endAt&&!(function(c,h,p){const y=bv(c,h,p);return c.inclusive?y>=0:y>0})(i.endAt,Al(i),o))})(n,e)}function cA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function c0(n){return(e,t)=>{let i=!1;for(const o of Al(n)){const l=dA(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function dA(n,e,t){const i=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(l,c,h){const p=c.data.field(l),y=h.data.field(l);return p!==null&&y!==null?Ia(p,y):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new jt(Oe.comparator);function $i(){return hA}const d0=new jt(Oe.comparator);function Tl(...n){let e=d0;for(const t of n)e=e.insert(t.key,t);return e}function h0(n){let e=d0;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function mo(){return Rl()}function f0(){return Rl()}function Rl(){return new Co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fA=new jt(Oe.comparator),pA=new sn(Oe.comparator);function at(...n){let e=pA;for(const t of n)e=e.add(t);return e}const mA=new sn(Xe);function gA(){return mA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function p0(n){return{integerValue:""+n}}function yA(n,e){return $P(e)?p0(e):Ap(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function vA(n,e,t){return n instanceof zl?(function(o,l){const c={fields:{[Jw]:{stringValue:Yw},[Zw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Sp(l)&&(l=dd(l)),l&&(c.fields[Xw]=l),{mapValue:c}})(t,e):n instanceof Bl?g0(n,e):n instanceof $l?y0(n,e):(function(o,l){const c=m0(o,l),h=Vv(c)+Vv(o.Ee);return Mf(c)&&Mf(o.Ee)?p0(h):Ap(o.serializer,h)})(n,e)}function _A(n,e,t){return n instanceof Bl?g0(n,e):n instanceof $l?y0(n,e):t}function m0(n,e){return n instanceof qc?(function(i){return Mf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class zl extends md{}class Bl extends md{constructor(e){super(),this.elements=e}}function g0(n,e){const t=v0(e);for(const i of n.elements)t.some((o=>mi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class $l extends md{constructor(e){super(),this.elements=e}}function y0(n,e){let t=v0(e);for(const i of n.elements)t=t.filter((o=>!mi(o,i)));return{arrayValue:{values:t}}}class qc extends md{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Vv(n){return $t(n.integerValue||n.doubleValue)}function v0(n){return Ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.field=e,this.transform=t}}function EA(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Bl&&o instanceof Bl||i instanceof $l&&o instanceof $l?Sa(i.elements,o.elements,mi):i instanceof qc&&o instanceof qc?mi(i.Ee,o.Ee):i instanceof zl&&o instanceof zl})(n.transform,e.transform)}class TA{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gd{}function _0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rp(n.key,xr.none()):new Xl(n.key,n.data,xr.none());{const t=n.data,i=Yn.empty();let o=new sn(_n.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new zs(n.key,i,new dr(o.toArray()),xr.none())}}function SA(n,e,t){n instanceof Xl?(function(o,l,c){const h=o.value.clone(),p=Fv(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof zs?(function(o,l,c){if(!Cc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Fv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(w0(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function kl(n,e,t,i){return n instanceof Xl?(function(l,c,h,p){if(!Cc(l.precondition,c))return h;const y=l.value.clone(),_=jv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof zs?(function(l,c,h,p){if(!Cc(l.precondition,c))return h;const y=jv(l.fieldTransforms,p,c),_=c.data;return _.setAll(w0(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(n,e,t,i):(function(l,c,h){return Cc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function IA(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=m0(i.transform,o||null);l!=null&&(t===null&&(t=Yn.empty()),t.set(i.field,l))}return t||null}function Mv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sa(i,o,((l,c)=>EA(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xl extends gd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zs extends gd{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function w0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Fv(n,e,t){const i=new Map;yt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);i.set(l.field,_A(c,h,t[o]))}return i}function jv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,vA(l,c,e))}return i}class Rp extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xA extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SA(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=kl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=kl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=f0();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=_0(c,h);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ge.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),at())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,((t,i)=>Mv(t,i)))&&Sa(this.baseMutations,e.baseMutations,((t,i)=>Mv(t,i)))}}class kp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){yt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return fA})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new kp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,dt;function RA(n){switch(n){case ie.OK:return Be(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function E0(n){if(n===void 0)return Bi("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Kt.OK:return ie.OK;case Kt.CANCELLED:return ie.CANCELLED;case Kt.UNKNOWN:return ie.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ie.INTERNAL;case Kt.UNAVAILABLE:return ie.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ie.NOT_FOUND;case Kt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Kt.ABORTED:return ie.ABORTED;case Kt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Kt.DATA_LOSS:return ie.DATA_LOSS;default:return Be(39323,{code:n})}}(dt=Kt||(Kt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Ps([4294967295,4294967295],0);function Uv(n){const e=Hw().encode(n),t=new Vw;return t.update(e),new Uint8Array(t.digest())}function zv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ps([t,i],0),new Ps([o,l],0)]}class Np{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(i<0)throw new Sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ps.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ps.fromNumber(i)));return o.compare(kA)===1&&(o=new Ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Uv(e),[i,o]=zv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Np(l,o,t);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.fe===0)return;const t=Uv(e),[i,o]=zv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new yd(Ge.min(),o,new jt(Xe),$i(),at())}}class Zl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zl(i,t,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class T0{constructor(e,t){this.targetId=e,this.De=t}}class S0{constructor(e,t,i=wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Bv{constructor(){this.ve=0,this.Ce=$v(),this.Fe=wn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=at(),t=at(),i=at();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Be(38017,{changeType:l})}})),new Zl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=$v()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class NA{constructor(e){this.We=e,this.Ge=new Map,this.ze=$i(),this.je=mc(),this.Je=mc(),this.He=new jt(Xe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(jf(l))if(i===0){const c=new Oe(l.path);this.Xe(t,c,kn.newNoDocument(c,Ge.min()))}else yt(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const h=this._t(e),p=h?this.ut(h,e,c):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=Ds(i).toUint8Array()}catch(p){if(p instanceof Qw)return ks("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Np(c,o,l)}catch(p){return ks(p instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.fe===0?null:h}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const h=this.st(c);if(h){if(l.current&&jf(h.target)){const p=new Oe(h.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,kn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let i=at();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new yd(e,t,this.He,this.ze,i);return this.ze=$i(),this.je=mc(),this.Je=mc(),this.He=new jt(Xe),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Bv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new sn(Xe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new sn(Xe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Bv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function mc(){return new jt(Oe.comparator)}function $v(){return new jt(Oe.comparator)}const bA={asc:"ASCENDING",desc:"DESCENDING"},DA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OA={and:"AND",or:"OR"};class LA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zf(n,e){return n.useProto3Json||cd(e)?e:{value:e}}function Gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VA(n,e){return Gc(n,e.toTimestamp())}function hi(n){return yt(!!n,49232),Ge.fromTimestamp((function(t){const i=bs(t);return new Nt(i.seconds,i.nanos)})(n))}function bp(n,e){return Bf(n,e).canonicalString()}function Bf(n,e){const t=(function(o){return new kt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function x0(n){const e=kt.fromString(n);return yt(k0(e),10190,{key:e.toString()}),e}function $f(n,e){return bp(n.databaseId,e.path)}function gf(n,e){const t=x0(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(P0(t))}function C0(n,e){return bp(n.databaseId,e)}function MA(n){const e=x0(n);return e.length===4?kt.emptyPath():P0(e)}function Hf(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P0(n){return yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Hv(n,e,t){return{name:$f(n,e),fields:t.value.mapValue.fields}}function FA(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(yt(_===void 0||typeof _=="string",58123),wn.fromBase64String(_||"")):(yt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),wn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(y){const _=y.code===void 0?ie.UNKNOWN:E0(y.code);return new ke(_,y.message||"")})(c);t=new S0(i,o,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gf(n,i.document.name),l=hi(i.document.updateTime),c=i.document.createTime?hi(i.document.createTime):Ge.min(),h=new Yn({mapValue:{fields:i.document.fields}}),p=kn.newFoundDocument(o,l,c,h),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Pc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gf(n,i.document),l=i.readTime?hi(i.readTime):Ge.min(),c=kn.newNoDocument(o,l),h=i.removedTargetIds||[];t=new Pc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gf(n,i.document),l=i.removedTargetIds||[];t=new Pc([],l,o,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new AA(o,l),h=i.targetId;t=new T0(h,c)}}return t}function jA(n,e){let t;if(e instanceof Xl)t={update:Hv(n,e.key,e.value)};else if(e instanceof Rp)t={delete:$f(n,e.key)};else if(e instanceof zs)t={update:Hv(n,e.key,e.data),updateMask:KA(e.fieldMask)};else{if(!(e instanceof xA))return Be(16599,{Rt:e.type});t={verify:$f(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const h=c.transform;if(h instanceof zl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Bl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof $l)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof qc)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function UA(n,e){return n&&n.length>0?(yt(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?hi(o.updateTime):hi(l);return c.isEqual(Ge.min())&&(c=hi(l)),new TA(c,o.transformResults||[])})(t,e)))):[]}function zA(n,e){return{documents:[C0(n,e.path)]}}function BA(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=C0(n,o);const l=(function(y){if(y.length!==0)return R0(gi.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(S){return{field:ha(S.field),direction:WA(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=zf(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function $A(n){let e=MA(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){yt(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(w){const S=A0(w);return S instanceof gi&&s0(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((S=>(function(V){return new Wc(fa(V.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let S;return S=typeof w=="object"?w.value:w,cd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(w){const S=!!w.before,P=w.values||[];return new Hc(P,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const S=!w.before,P=w.values||[];return new Hc(P,S)})(t.endAt)),aA(e,o,c,l,h,"F",p,y)}function HA(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function A0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=fa(t.unaryFilter.field);return rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=fa(t.unaryFilter.field);return rn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fa(t.unaryFilter.field);return rn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=fa(t.unaryFilter.field);return rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return rn.create(fa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gi.create(t.compositeFilter.filters.map((i=>A0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function WA(n){return bA[n]}function qA(n){return DA[n]}function GA(n){return OA[n]}function ha(n){return{fieldPath:n.canonicalString()}}function fa(n){return _n.fromServerFormat(n.fieldPath)}function R0(n){return n instanceof rn?(function(t){if(t.op==="=="){if(Nv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NAN"}};if(kv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NAN"}};if(kv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(t.field),op:qA(t.op),value:t.value}}})(n):n instanceof gi?(function(t){const i=t.getFilters().map((o=>R0(o)));return i.length===1?i[0]:{compositeFilter:{op:GA(t.op),filters:i}}})(n):Be(54877,{filter:n})}function KA(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function k0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,i,o,l=Ge.min(),c=Ge.min(),h=wn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.gt=e}}function YA(n){const e=$A({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.Dn=new XA}addToCollectionParentIndex(e,t){return this.Dn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ns.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class XA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new sn(kt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new sn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},N0=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(N0,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ca(0)}static ur(){return new Ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="LruGarbageCollector",ZA=1048576;function Gv([n,e],[t,i]){const o=Xe(n,t);return o===0?Xe(e,i):o}class eR{constructor(e){this.Tr=e,this.buffer=new sn(Gv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(qv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Va(t)?Ee(qv,"Ignoring IndexedDB error during garbage collection: ",t):await La(t)}await this.Rr(3e5)}))}}class nR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(ud.ue);const i=new eR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Wv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,c,h,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,h=Date.now(),this.removeTargets(e,i,t)))).next((w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),ca()<=ot.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w}))))}}function rR(n,e){return new nR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.changes=new Co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&kl(i.mutation,o,dr.empty(),Nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,at()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=at()){const o=mo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Tl();return l.forEach(((h,p)=>{c=c.insert(h,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=mo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,at())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,i,o){let l=$i();const c=Rl(),h=(function(){return Rl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof zs)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),kl(_.mutation,y,_.mutation.getFieldMask(),Nt.now())):c.set(y.key,dr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>{var w;return h.set(y,new sR(_,(w=c.get(y))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const i=Rl();let o=new jt(((c,h)=>c-h)),l=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||dr.empty();_=h.applyToLocalView(y,_),i.set(p,_);const w=(o.get(h.batchId)||at()).add(p);o=o.insert(h.batchId,w)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,_=p.value,w=f0();_.forEach((S=>{if(!l.has(S)){const P=_0(t.get(S),i.get(S));P!==null&&w.set(S,P),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ne.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return Oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ne.resolve(mo());let h=Ml,p=l;return c.next((y=>ne.forEach(y,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),l.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,at()))).next((_=>({batchId:h,changes:h0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((i=>{let o=Tl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Tl();return this.indexManager.getCollectionParents(e,l).next((h=>ne.forEach(h,(p=>{const y=(function(w,S){return new hd(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((w,S)=>{c=c.insert(w,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,kn.newInvalidDocument(_)))}));let h=Tl();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&kl(_.mutation,y,dr.empty(),Nt.now()),pd(t,y)&&(h=h.insert(p,y))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hi(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:YA(o.bundledQuery),readTime:hi(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.overlays=new jt(Oe.comparator),this.kr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=mo();return ne.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=mo(),l=t.length+1,c=new Oe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new jt(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=mo(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const h=mo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>h.set(y,_))),!(h.size()>=o)););return ne.resolve(h)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new PA(t,i));let l=this.kr.get(t);l===void 0&&(l=at(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(){this.qr=new sn(dn.Qr),this.$r=new sn(dn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new dn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new dn(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Oe(new kt([])),i=new dn(t,e),o=new dn(t,e+1),l=[];return this.$r.forEachInRange([i,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Oe(new kt([])),i=new dn(t,e),o=new dn(t,e+1);let l=at();return this.$r.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new dn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class dn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Oe.comparator(e.key,t.key)||Xe(e.Hr,t.Hr)}static Ur(e,t){return Xe(e.Hr,t.Hr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new sn(dn.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new CA(l,t,i,o);this.mutationQueue.push(c);for(const h of o)this.Yr=this.Yr.add(new dn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Tp:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new dn(t,0),o=new dn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(c=>{const h=this.Zr(c.Hr);l.push(h)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(Xe);return t.forEach((o=>{const l=new dn(o,0),c=new dn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(h=>{i=i.add(h.Hr)}))})),ne.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Oe.isDocumentKey(l)||(l=l.child(""));const c=new dn(new Oe(l),0);let h=new sn(Xe);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.Hr)),!0)}),c),ne.resolve(this.ei(h))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){yt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ne.forEach(t.mutations,(o=>{const l=new dn(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new dn(t,0),o=this.Yr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.ni=e,this.docs=(function(){return new jt(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let i=$i();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():kn.newInvalidDocument(o))})),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=$i();const c=t.path,h=new Oe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||jP(FP(_),i)<=0||(o.has(_.key)||pd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Be(9500)}ri(e,t){return ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new hR(this)}getSize(e){return ne.resolve(this.size)}}class hR extends iR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),ne.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.persistence=e,this.ii=new Co((t=>xp(t)),Cp),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new Dp,this.targetCount=0,this._i=Ca.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ne.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.hr(t),ne.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),ne.waitFor(l).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,t){this.ai={},this.overlays={},this.ui=new ud(0),this.ci=!1,this.ci=!0,this.li=new uR,this.referenceDelegate=e(this),this.hi=new fR(this),this.indexManager=new JA,this.remoteDocumentCache=(function(o){return new dR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new QA(t),this.Ti=new aR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new cR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Ee("MemoryPersistence","Starting transaction:",e);const o=new pR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ne.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class pR extends zP{constructor(e){super(),this.currentSequenceNumber=e}}class Op{constructor(e){this.persistence=e,this.Ai=new Dp,this.Ri=null}static Vi(e){return new Op(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,(i=>{const o=Oe.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ge.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ne.or([()=>ne.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Kc{constructor(e,t){this.persistence=e,this.gi=new Co((i=>HP(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=rR(this,t)}static Vi(e,t){return new Kc(e,t)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return ne.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?ne.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((h=>{h||(i++,l.removeEntry(c,Ge.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ne.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ic(e.data.value)),t}Sr(e,t,i){return ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=at(),o=at();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Lp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return qI()?8:BP(Nn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new mR;return this.ws(e,t,c).next((h=>{if(l.result=h,this.Rs)return this.Ss(e,t,c,h.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ca()<=ot.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(ca()<=ot.DEBUG&&Ee("QueryEngine","Query:",da(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ca()<=ot.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(t))):ne.resolve())}ps(e,t){if(Lv(t))return ne.resolve(null);let i=di(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Uf(t,null,"F"),i=di(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=at(...l);return this.gs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,h);return this.Ds(t,y,c,p.readTime)?this.ps(e,Uf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return Lv(t)||o.isEqual(Ge.min())?ne.resolve(null):this.gs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,i,o)?ne.resolve(null):(ca()<=ot.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),da(t)),this.vs(e,c,t,MP(o,Ml)).next((h=>h)))}))}bs(e,t){let i=new sn(c0(e));return t.forEach(((o,l)=>{pd(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return ca()<=ot.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",da(t)),this.gs.getDocumentsMatchingQuery(e,t,Ns.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="LocalStore",yR=3e8;class vR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new jt(Xe),this.Ms=new Co((l=>xp(l)),Cp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function _R(n,e,t,i){return new vR(n,e,t,i)}async function D0(n,e){const t=Ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],h=[];let p=at();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:c,addedBatchIds:h})))}))}))}function wR(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(h,p,y,_){const w=y.batch,S=w.keys();let P=ne.resolve();return S.forEach((V=>{P=P.next((()=>_.getEntry(p,V))).next((j=>{const H=y.docVersions.get(V);yt(H!==null,48541),j.version.compareTo(H)<0&&(w.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),_.addEntry(j)))}))})),P.next((()=>h.mutationQueue.removeMutationBatch(p,w)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let p=at();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function O0(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function ER(n,e){const t=Ke(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const h=[];e.targetChanges.forEach(((_,w)=>{const S=o.get(w);if(!S)return;h.push(t.hi.removeMatchingKeys(l,_.removedDocuments,w).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,w))));let P=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(wn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(w,P),(function(j,H,pe){return j.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=yR?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(S,P,_)&&h.push(t.hi.updateTargetData(l,P))}));let p=$i(),y=at();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),h.push(TR(l,c,e.documentUpdates).next((_=>{p=_.Ls,y=_.ks}))),!i.isEqual(Ge.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((w=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(_)}return ne.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function TR(n,e,t){let i=at(),o=at();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=$i();return t.forEach(((h,p)=>{const y=l.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ge.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Ee(Vp,"Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function SR(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Tp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function IR(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,ne.resolve(o)):t.hi.allocateTargetId(i).next((c=>(o=new Is(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Wf(n,e,t){const i=Ke(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Va(c))throw c;Ee(Vp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Kv(n,e,t){const i=Ke(n);let o=Ge.min(),l=at();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const w=Ke(p),S=w.Ms.get(_);return S!==void 0?ne.resolve(w.Fs.get(S)):w.hi.getTargetData(y,_)})(i,c,di(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?o:Ge.min(),t?l:at()))).next((h=>(xR(i,cA(e),h),{documents:h,qs:l})))))}function xR(n,e,t){let i=n.xs.get(e)||Ge.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class Qv{constructor(){this.activeTargetIds=gA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CR{constructor(){this.Fo=new Qv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Jv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(Yv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(Yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function qf(){return gc===null?gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="RestConnection",AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Bc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const c=qf(),h=this.Go(e,t.toUriEncodedString());Ee(yf,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(h),_=Io(y);return this.jo(e,h,p,i,_).then((w=>(Ee(yf,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw ks(yf,`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",i),w}))}Jo(e,t,i,o,l,c){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=AR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class NR extends RR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const c=qf();return new Promise(((h,p)=>{const y=new Mw;y.setWithCredentials(!0),y.listenOnce(Fw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Sc.NO_ERROR:const w=y.getResponseJson();Ee(An,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case Sc.TIMEOUT:Ee(An,`RPC '${e}' ${c} timed out`),p(new ke(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Sc.HTTP_ERROR:const S=y.getStatus();if(Ee(An,`RPC '${e}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=P?.error;if(V&&V.status&&V.message){const j=(function(pe){const ee=pe.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(ee)>=0?ee:ie.UNKNOWN})(V.status);p(new ke(j,V.message))}else p(new ke(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ke(ie.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:c,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{Ee(An,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);Ee(An,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=qf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zw(),h=Uw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");Ee(An,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=c.createWebChannel(_,p);this.T_(w);let S=!1,P=!1;const V=new kR({Ho:H=>{P?Ee(An,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(Ee(An,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),Ee(An,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Yo:()=>w.close()}),j=(H,pe,ee)=>{H.listen(pe,(de=>{try{ee(de)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return j(w,El.EventType.OPEN,(()=>{P||(Ee(An,`RPC '${e}' stream ${o} transport opened.`),V.s_())})),j(w,El.EventType.CLOSE,(()=>{P||(P=!0,Ee(An,`RPC '${e}' stream ${o} transport closed`),V.__(),this.I_(w))})),j(w,El.EventType.ERROR,(H=>{P||(P=!0,ks(An,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),V.__(new ke(ie.UNAVAILABLE,"The operation could not be completed")))})),j(w,El.EventType.MESSAGE,(H=>{var pe;if(!P){const ee=H.data[0];yt(!!ee,16349);const de=ee,ge=de?.error||((pe=de[0])===null||pe===void 0?void 0:pe.error);if(ge){Ee(An,`RPC '${e}' stream ${o} received error:`,ge);const je=ge.status;let Fe=(function(A){const b=Kt[A];if(b!==void 0)return E0(b)})(je),x=ge.message;Fe===void 0&&(Fe=ie.INTERNAL,x="Unknown error status: "+je+" with message "+ge.message),P=!0,V.__(new ke(Fe,x)),w.close()}else Ee(An,`RPC '${e}' stream ${o} received:`,ee),V.a_(ee)}})),j(h,jw.STAT_EVENT,(H=>{H.stat===Of.PROXY?Ee(An,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Of.NOPROXY&&Ee(An,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){return new LA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="PersistentStream";class V0{constructor(e,t,i,o,l,c,h,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new L0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ke(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ee(Xv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ee(Xv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bR extends V0{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=FA(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ge.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ge.min():c.readTime?hi(c.readTime):Ge.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Hf(this.serializer),t.addTarget=(function(l,c){let h;const p=c.target;if(h=jf(p)?{documents:zA(l,p)}:{query:BA(l,p).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=I0(l,c.resumeToken);const y=zf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ge.min())>0){h.readTime=Gc(l,c.snapshotVersion.toTimestamp());const y=zf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}return h})(this.serializer,e);const i=HA(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Hf(this.serializer),t.removeTarget=e,this.k_(t)}}class DR extends V0{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=UA(e.writeResults,e.commitTime),i=hi(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Hf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jA(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{}class LR extends OR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ke(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Bf(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ie.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Jo(e,Bf(t,i),o,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(ie.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class VR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Bi(t),this._a=!1):Ee("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class MR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{Po(this)&&(Ee(So,"Restarting streams for network reachability change."),await(async function(p){const y=Ke(p);y.Ia.add(4),await eu(y),y.Aa.set("Unknown"),y.Ia.delete(4),await _d(y)})(this))}))})),this.Aa=new VR(i,o)}}async function _d(n){if(Po(n))for(const e of n.da)await e(!0)}async function eu(n){for(const e of n.da)await e(!1)}function M0(n,e){const t=Ke(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Up(t)?jp(t):Ma(t).x_()&&Fp(t,e))}function Mp(n,e){const t=Ke(n),i=Ma(t);t.Ta.delete(e),i.x_()&&F0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Po(t)&&t.Aa.set("Unknown"))}function Fp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).H_(e)}function F0(n,e){n.Ra.$e(e),Ma(n).Y_(e)}function jp(n){n.Ra=new NA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.Aa.aa()}function Up(n){return Po(n)&&!Ma(n).M_()&&n.Ta.size>0}function Po(n){return Ke(n).Ia.size===0}function j0(n){n.Ra=void 0}async function FR(n){n.Aa.set("Online")}async function jR(n){n.Ta.forEach(((e,t)=>{Fp(n,e)}))}async function UR(n,e){j0(n),Up(n)?(n.Aa.la(e),jp(n)):n.Aa.set("Unknown")}async function zR(n,e,t){if(n.Aa.set("Online"),e instanceof S0&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ta.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ta.delete(h),o.Ra.removeTarget(h))})(n,e)}catch(i){Ee(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qc(n,i)}else if(e instanceof Pc?n.Ra.Ye(e):e instanceof T0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ge.min()))try{const i=await O0(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const h=l.Ra.Pt(c);return h.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(y);_&&l.Ta.set(y,_.withResumeToken(p.resumeToken,c))}})),h.targetMismatches.forEach(((p,y)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(wn.EMPTY_BYTE_STRING,_.snapshotVersion)),F0(l,p);const w=new Is(_.target,p,y,_.sequenceNumber);Fp(l,w)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){Ee(So,"Failed to raise snapshot:",i),await Qc(n,i)}}async function Qc(n,e,t){if(!Va(e))throw e;n.Ia.add(1),await eu(n),n.Aa.set("Offline"),t||(t=()=>O0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ee(So,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await _d(n)}))}function U0(n,e){return e().catch((t=>Qc(n,t,e)))}async function wd(n){const e=Ke(n),t=Ls(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Tp;for(;BR(e);)try{const o=await SR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,$R(e,o)}catch(o){await Qc(e,o)}z0(e)&&B0(e)}function BR(n){return Po(n)&&n.Pa.length<10}function $R(n,e){n.Pa.push(e);const t=Ls(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function z0(n){return Po(n)&&!Ls(n).M_()&&n.Pa.length>0}function B0(n){Ls(n).start()}async function HR(n){Ls(n).na()}async function WR(n){const e=Ls(n);for(const t of n.Pa)e.X_(t.mutations)}async function qR(n,e,t){const i=n.Pa.shift(),o=kp.from(i,e,t);await U0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await wd(n)}async function GR(n,e){e&&Ls(n).Z_&&await(async function(i,o){if((function(c){return RA(c)&&c!==ie.ABORTED})(o.code)){const l=i.Pa.shift();Ls(i).N_(),await U0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await wd(i)}})(n,e),z0(n)&&B0(n)}async function Zv(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Ee(So,"RemoteStore received new credentials");const i=Po(t);t.Ia.add(3),await eu(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await _d(t)}async function KR(n,e){const t=Ke(n);e?(t.Ia.delete(2),await _d(t)):e||(t.Ia.add(2),await eu(t),t.Aa.set("Unknown"))}function Ma(n){return n.Va||(n.Va=(function(t,i,o){const l=Ke(t);return l.ia(),new bR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:FR.bind(null,n),e_:jR.bind(null,n),n_:UR.bind(null,n),J_:zR.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Up(n)?jp(n):n.Aa.set("Unknown")):(await n.Va.stop(),j0(n))}))),n.Va}function Ls(n){return n.ma||(n.ma=(function(t,i,o){const l=Ke(t);return l.ia(),new DR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:HR.bind(null,n),n_:GR.bind(null,n),ea:WR.bind(null,n),ta:qR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await wd(n)):(await n.ma.stop(),n.Pa.length>0&&(Ee(So,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,h=new zp(e,t,c,o,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(n,e){if(Bi("AsyncQueue",`${e}: ${n}`),Va(n))return new ke(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static emptySet(e){return new va(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Oe.comparator(t.key,i.key):(t,i)=>Oe.comparator(t.key,i.key),this.keyedMap=Tl(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new va;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.fa=new jt(Oe.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Pa{constructor(e,t,i,o,l,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Pa(e,t,va.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class YR{constructor(){this.queries=t_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ke(t),l=o.queries;o.queries=t_(),l.forEach(((c,h)=>{for(const p of h.wa)p.onError(i)}))})(this,new ke(ie.ABORTED,"Firestore shutting down"))}}function t_(){return new Co((n=>u0(n)),fd)}async function $0(n,e){const t=Ke(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new QR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Bp(c,`Initialization of query '${da(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&$p(t)}async function H0(n,e){const t=Ke(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function JR(n,e){const t=Ke(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.wa)h.Ca(o)&&(i=!0);c.ya=o}}i&&$p(t)}function XR(n,e,t){const i=Ke(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function $p(n){n.Da.forEach((e=>{e.next()}))}var Gf,n_;(n_=Gf||(Gf={})).Fa="default",n_.Cache="cache";class W0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Pa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this.key=e}}class G0{constructor(e){this.key=e}}class ZR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=at(),this.mutatedKeys=at(),this.Xa=c0(e),this.eu=new va(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new e_,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const S=o.get(_),P=pd(this.query,w)?w:null,V=!!S&&this.mutatedKeys.has(S.key),j=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let H=!1;S&&P?S.data.isEqual(P.data)?V!==j&&(i.track({type:3,doc:P}),H=!0):this.iu(S,P)||(i.track({type:2,doc:P}),H=!0,(p&&this.Xa(P,p)>0||y&&this.Xa(P,y)<0)&&(h=!0)):!S&&P?(i.track({type:0,doc:P}),H=!0):S&&!P&&(i.track({type:1,doc:S}),H=!0,(p||y)&&(h=!0)),H&&(P?(c=c.add(P),l=j?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((_,w)=>(function(P,V){const j=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:H})}};return j(P)-j(V)})(_.type,w.type)||this.Xa(_.doc,w.doc))),this.su(i),o=o!=null&&o;const h=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,c.length!==0||y?{snapshot:new Pa(this.query,e.eu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new e_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=at(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new G0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new q0(i))})),t}uu(e){this.Ha=e.qs,this.Za=at();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Hp="SyncEngine";class ek{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tk{constructor(e){this.key=e,this.lu=!1}}class nk{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Co((h=>u0(h)),fd),this.Tu=new Map,this.Iu=new Set,this.du=new jt(Oe.comparator),this.Eu=new Map,this.Au=new Dp,this.Ru={},this.Vu=new Map,this.mu=Ca.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function rk(n,e,t=!0){const i=Z0(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await K0(i,e,t,!0),o}async function ik(n,e){const t=Z0(n);await K0(t,e,!0,!1)}async function K0(n,e,t,i){const o=await IR(n.localStore,di(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await sk(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&M0(n.remoteStore,o),h}async function sk(n,e,t,i,o){n.gu=(w,S,P)=>(async function(j,H,pe,ee){let de=H.view.nu(pe);de.Ds&&(de=await Kv(j.localStore,H.query,!1).then((({documents:x})=>H.view.nu(x,de))));const ge=ee&&ee.targetChanges.get(H.targetId),je=ee&&ee.targetMismatches.get(H.targetId)!=null,Fe=H.view.applyChanges(de,j.isPrimaryClient,ge,je);return i_(j,H.targetId,Fe._u),Fe.snapshot})(n,w,S,P);const l=await Kv(n.localStore,e,!0),c=new ZR(e,l.qs),h=c.nu(l.documents),p=Zl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(h,n.isPrimaryClient,p);i_(n,t,y._u);const _=new ek(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function ok(n,e,t){const i=Ke(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((c=>!fd(c,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Wf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Mp(i.remoteStore,o.targetId),Kf(i,o.targetId)})).catch(La)):(Kf(i,o.targetId),await Wf(i.localStore,o.targetId,!0))}async function ak(n,e){const t=Ke(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Mp(t.remoteStore,i.targetId))}async function lk(n,e,t){const i=mk(n);try{const o=await(function(c,h){const p=Ke(c),y=Nt.now(),_=h.reduce(((P,V)=>P.add(V.key)),at());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let V=$i(),j=at();return p.Os.getEntries(P,_).next((H=>{V=H,V.forEach(((pe,ee)=>{ee.isValidDocument()||(j=j.add(pe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(P,V))).next((H=>{w=H;const pe=[];for(const ee of h){const de=IA(ee,w.get(ee.key).overlayedDocument);de!=null&&pe.push(new zs(ee.key,de,n0(de.value.mapValue),xr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,pe,h)})).next((H=>{S=H;const pe=H.applyToLocalDocumentSet(w,j);return p.documentOverlayCache.saveOverlays(P,H.batchId,pe)}))})).then((()=>({batchId:S.batchId,changes:h0(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,h,p){let y=c.Ru[c.currentUser.toKey()];y||(y=new jt(Xe)),y=y.insert(h,p),c.Ru[c.currentUser.toKey()]=y})(i,o.batchId,t),await tu(i,o.changes),await wd(i.remoteStore)}catch(o){const l=Bp(o,"Failed to persist write");t.reject(l)}}async function Q0(n,e){const t=Ke(n);try{const i=await ER(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(yt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?yt(c.lu,14607):o.removedDocuments.size>0&&(yt(c.lu,42227),c.lu=!1))})),await tu(t,i,e)}catch(i){await La(i)}}function r_(n,e,t){const i=Ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const p=Ke(c);p.onlineState=h;let y=!1;p.queries.forEach(((_,w)=>{for(const S of w.wa)S.va(h)&&(y=!0)})),y&&$p(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uk(n,e,t){const i=Ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let c=new jt(Oe.comparator);c=c.insert(l,kn.newNoDocument(l,Ge.min()));const h=at().add(l),p=new yd(Ge.min(),new Map,new jt(Xe),c,h);await Q0(i,p),i.du=i.du.remove(l),i.Eu.delete(e),Wp(i)}else await Wf(i.localStore,e,!1).then((()=>Kf(i,e,t))).catch(La)}async function ck(n,e){const t=Ke(n),i=e.batch.batchId;try{const o=await wR(t.localStore,e);J0(t,i,null),Y0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await tu(t,o)}catch(o){await La(o)}}async function dk(n,e,t){const i=Ke(n);try{const o=await(function(c,h){const p=Ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,h).next((w=>(yt(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);J0(i,e,t),Y0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await tu(i,o)}catch(o){await La(o)}}function Y0(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function J0(n,e,t){const i=Ke(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Kf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||X0(n,i)}))}function X0(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Wp(n))}function i_(n,e,t){for(const i of t)i instanceof q0?(n.Au.addReference(i.key,e),hk(n,i)):i instanceof G0?(Ee(Hp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||X0(n,i.key)):Be(19791,{yu:i})}function hk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(Ee(Hp,"New document in limbo: "+t),n.Iu.add(i),Wp(n))}function Wp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Oe(kt.fromString(e)),i=n.mu.next();n.Eu.set(i,new tk(t)),n.du=n.du.insert(t,i),M0(n.remoteStore,new Is(di(Pp(t.path)),i,"TargetPurposeLimboResolution",ud.ue))}}async function tu(n,e,t){const i=Ke(n),o=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((h,p)=>{c.push(i.gu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Lp.Es(p.targetId,y);l.push(w)}})))})),await Promise.all(c),i.hu.J_(o),await(async function(p,y){const _=Ke(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ne.forEach(y,(S=>ne.forEach(S.Is,(P=>_.persistence.referenceDelegate.addReference(w,S.targetId,P))).next((()=>ne.forEach(S.ds,(P=>_.persistence.referenceDelegate.removeReference(w,S.targetId,P)))))))))}catch(w){if(!Va(w))throw w;Ee(Vp,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const P=_.Fs.get(S),V=P.snapshotVersion,j=P.withLastLimboFreeSnapshotVersion(V);_.Fs=_.Fs.insert(S,j)}}})(i.localStore,l))}async function fk(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Ee(Hp,"User change. New user:",e.toKey());const i=await D0(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((h=>{h.forEach((p=>{p.reject(new ke(ie.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tu(t,i.Bs)}}function pk(n,e){const t=Ke(n),i=t.Eu.get(e);if(i&&i.lu)return at().add(i.key);{let o=at();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const h=t.Pu.get(c);o=o.unionWith(h.view.tu)}return o}}function Z0(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uk.bind(null,e),e.hu.J_=JR.bind(null,e.eventManager),e.hu.pu=XR.bind(null,e.eventManager),e}function mk(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dk.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return _R(this.persistence,new gR,e.initialUser,this.serializer)}Du(e){return new b0(Op.Vi,this.serializer)}bu(e){return new CR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class gk extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){yt(this.persistence.referenceDelegate instanceof Kc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new tR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new b0((i=>Kc.Vi(i,t)),this.serializer)}}class Qf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>r_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fk.bind(null,this.syncEngine),await KR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YR})()}createDatastore(e){const t=vd(e.databaseInfo.databaseId),i=(function(l){return new NR(l)})(e.databaseInfo);return(function(l,c,h,p){return new LR(l,c,h,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,h){return new MR(i,o,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>r_(this.syncEngine,t,0)),(function(){return Jv.C()?new Jv:new PR})())}createSyncEngine(e,t){return(function(o,l,c,h,p,y,_){const w=new nk(o,l,c,h,p,y);return _&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ke(o);Ee(So,"RemoteStore shutting down."),l.Ia.add(5),await eu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qf.provider={build:()=>new Qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="FirestoreClient";class yk{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Rn.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Ee(Vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Ee(Vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Bp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function _f(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(Vs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await D0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{ks("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{ks("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function s_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vk(n);Ee(Vs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Zv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Zv(e.remoteStore,o))),n._onlineComponents=e}async function vk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(Vs,"Using user provided OfflineComponentProvider");try{await _f(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ks("Error using user provided cache. Falling back to memory cache: "+t),await _f(n,new Yc)}}else Ee(Vs,"Using default OfflineComponentProvider"),await _f(n,new gk(void 0));return n._offlineComponents}async function tE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(Vs,"Using user provided OnlineComponentProvider"),await s_(n,n._uninitializedComponentsProvider._online)):(Ee(Vs,"Using default OnlineComponentProvider"),await s_(n,new Qf))),n._onlineComponents}function _k(n){return tE(n).then((e=>e.syncEngine))}async function nE(n){const e=await tE(n),t=e.eventManager;return t.onListen=rk.bind(null,e.syncEngine),t.onUnlisten=ok.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ik.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ak.bind(null,e.syncEngine),t}function wk(n,e,t={}){const i=new Fi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const _=new eE({next:S=>{_.Ou(),c.enqueueAndForget((()=>H0(l,w)));const P=S.docs.has(h);!P&&S.fromCache?y.reject(new ke(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&p.source==="server"?y.reject(new ke(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new W0(Pp(h.path),_,{includeMetadataChanges:!0,ka:!0});return $0(l,w)})(await nE(n),n.asyncQueue,e,t,i))),i.promise}function Ek(n,e,t={}){const i=new Fi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const _=new eE({next:S=>{_.Ou(),c.enqueueAndForget((()=>H0(l,w))),S.fromCache&&p.source==="server"?y.reject(new ke(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new W0(h,_,{includeMetadataChanges:!0,ka:!0});return $0(l,w)})(await nE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="firestore.googleapis.com",a_=!0;class l_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iE,this.ssl=a_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:a_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=N0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZA)throw new ke(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ke(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ke(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ke(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new PP;switch(i.type){case"firstParty":return new NP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ke(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=o_.get(t);i&&(Ee("ComponentProvider","Removing Datastore"),o_.delete(t),i.terminate())})(this),Promise.resolve()}}function Tk(n,e,t,i={}){var o;n=Hr(n,Ed);const l=Io(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(sp(`https://${p}`),op("Firestore",!0)),c.host!==iE&&c.host!==p&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!vo(y,h)&&(n._setSettings(y),i.mockUserToken)){let _,w;if(typeof i.mockUserToken=="string")_=i.mockUserToken,w=Rn.MOCK_USER;else{_=MI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ke(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Rn(S)}n._authCredentials=new AP(new $w(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Td(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Jl(t,Jt._jsonSchema))return new Jt(e,i||null,new Oe(kt.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Yt("string",Jt._jsonSchemaVersion),referencePath:Yt("string")};class As extends Td{constructor(e,t,i){super(e,t,Pp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Oe(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function sE(n,e,...t){if(n=Xt(n),Ww("collection","path",e),n instanceof Ed){const i=kt.fromString(e,...t);return Tv(i),new As(n,null,i)}{if(!(n instanceof Jt||n instanceof As))throw new ke(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kt.fromString(e,...t));return Tv(i),new As(n.firestore,null,i)}}function Br(n,e,...t){if(n=Xt(n),arguments.length===1&&(e=wp.newId()),Ww("doc","path",e),n instanceof Ed){const i=kt.fromString(e,...t);return Ev(i),new Jt(n,null,new Oe(i))}{if(!(n instanceof Jt||n instanceof As))throw new ke(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kt.fromString(e,...t));return Ev(i),new Jt(n.firestore,n instanceof As?n.converter:null,new Oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="AsyncQueue";class c_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new L0(this,"async_queue_retry"),this.oc=()=>{const i=vf();i&&Ee(u_,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=vf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=vf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Fi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Va(e))throw e;Ee(u_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Bi("INTERNAL UNHANDLED ERROR: ",d_(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=zp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Be(47125,{hc:d_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function d_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ao extends Ed{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new c_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function Sk(n,e){const t=typeof n=="object"?n:up(),i=typeof n=="string"?n:Bc,o=sd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=K_("firestore");l&&Tk(o,...l)}return o}function qp(n){if(n._terminated)throw new ke(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ik(n),n._firestoreClient}function Ik(n){var e,t,i;const o=n._freezeSettings(),l=(function(h,p,y,_){return new GP(h,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,rE(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new yk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(h){const p=h?._online.build();return{_offline:h?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ir(wn.fromBase64String(e))}catch(t){throw new ke(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ir(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jl(e,Ir._jsonSchema))return Ir.fromBase64String(e.bytes)}}Ir._jsonSchemaVersion="firestore/bytes/1.0",Ir._jsonSchema={type:Yt("string",Ir._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(Jl(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Yt("string",fi._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jl(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new ke(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Yt("string",pi._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=/^__.*__$/;class Ck{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class oE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:n})}}class Gp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(aE(this.Ec)&&xk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||vd(e)}Dc(e,t,i,o=!1){return new Gp({Ec:e,methodName:t,bc:i,path:_n.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kp(n){const e=n._freezeSettings(),t=vd(n._databaseId);return new Pk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lE(n,e,t,i,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Yp("Data must be an object, but it was:",c,i);const h=uE(i,c);let p,y;if(l.merge)p=new dr(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const S=Yf(e,w,t);if(!c.contains(S))throw new ke(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);dE(_,S)||_.push(S)}p=new dr(_),y=c.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=c.fieldTransforms;return new Ck(new Yn(h),p,y)}class xd extends Id{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}class Qp extends Id{_toFieldTransform(e){return new wA(e.path,new zl)}isEqual(e){return e instanceof Qp}}function Ak(n,e,t,i){const o=n.Dc(1,e,t);Yp("Data must be an object, but it was:",o,i);const l=[],c=Yn.empty();Us(i,((p,y)=>{const _=Jp(e,p,t);y=Xt(y);const w=o.gc(_);if(y instanceof xd)l.push(_);else{const S=Cd(y,w);S!=null&&(l.push(_),c.set(_,S))}}));const h=new dr(l);return new oE(c,h,o.fieldTransforms)}function Rk(n,e,t,i,o,l){const c=n.Dc(1,e,t),h=[Yf(e,i,t)],p=[o];if(l.length%2!=0)throw new ke(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)h.push(Yf(e,l[S])),p.push(l[S+1]);const y=[],_=Yn.empty();for(let S=h.length-1;S>=0;--S)if(!dE(y,h[S])){const P=h[S];let V=p[S];V=Xt(V);const j=c.gc(P);if(V instanceof xd)y.push(P);else{const H=Cd(V,j);H!=null&&(y.push(P),_.set(P,H))}}const w=new dr(y);return new oE(_,w,c.fieldTransforms)}function Cd(n,e){if(cE(n=Xt(n)))return Yp("Unsupported field value:",e,n),uE(n,e);if(n instanceof Id)return(function(i,o){if(!aE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const h of i){let p=Cd(h,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Nt.fromDate(i);return{timestampValue:Gc(o.serializer,l)}}if(i instanceof Nt){const l=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gc(o.serializer,l)}}if(i instanceof fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ir)return{bytesValue:I0(o.serializer,i._byteString)};if(i instanceof Jt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:bp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof pi)return(function(c,h){return{mapValue:{fields:{[e0]:{stringValue:t0},[$c]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw h.wc("VectorValues must only contain numeric values.");return Ap(h.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Ep(i)}`)})(n,e)}function uE(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(n,((i,o)=>{const l=Cd(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function cE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof fi||n instanceof Ir||n instanceof Jt||n instanceof Id||n instanceof pi)}function Yp(n,e,t){if(!cE(t)||!qw(t)){const i=Ep(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Yf(n,e,t){if((e=Xt(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return Jp(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const kk=new RegExp("[~\\*/\\[\\]]");function Jp(n,e,t){if(e.search(kk)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ke(ie.INVALID_ARGUMENT,h+n+p)}function dE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Nk extends hE{data(){return super.data()}}function fE(n,e){return typeof e=="string"?Jp(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dk{convertValue(e,t="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Us(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[$c].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((c=>$t(c.doubleValue)));return new pi(l)}convertGeoPoint(e){return new fi($t(e.latitude),$t(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=dd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const t=bs(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=kt.fromString(e);yt(k0(i),9688,{name:e});const o=new jl(i.get(1),i.get(3)),l=new Oe(i.popFirst(5));return o.isEqual(t)||Bi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class go extends hE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(fE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=go._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}go._jsonSchemaVersion="firestore/documentSnapshot/1.0",go._jsonSchema={type:Yt("string",go._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Ac extends go{data(e={}){return super.data(e)}}class _a{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Il(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ac(this._firestore,this._userDataWriter,i.key,i,new Il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const p=new Ac(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new Ac(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return h.type!==0&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:Ok(h.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ok(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){n=Hr(n,Jt);const e=Hr(n.firestore,Ao);return wk(qp(e),n._key).then((t=>Fk(e,n,t)))}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:Yt("string",_a._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class mE extends Dk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function Lk(n){n=Hr(n,Td);const e=Hr(n.firestore,Ao),t=qp(e),i=new mE(e);return bk(n._query),Ek(t,n._query).then((o=>new _a(e,i,n,o)))}function Xp(n,e,t){n=Hr(n,Jt);const i=Hr(n.firestore,Ao),o=pE(n.converter,e,t);return Pd(i,[lE(Kp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,xr.none())])}function Vk(n,e,t,...i){n=Hr(n,Jt);const o=Hr(n.firestore,Ao),l=Kp(o);let c;return c=typeof(e=Xt(e))=="string"||e instanceof Sd?Rk(l,"updateDoc",n._key,e,t,i):Ak(l,"updateDoc",n._key,e),Pd(o,[c.toMutation(n._key,xr.exists(!0))])}function wf(n){return Pd(Hr(n.firestore,Ao),[new Rp(n._key,xr.none())])}function Mk(n,e){const t=Hr(n.firestore,Ao),i=Br(n),o=pE(n.converter,e);return Pd(t,[lE(Kp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,xr.exists(!1))]).then((()=>i))}function Pd(n,e){return(function(i,o){const l=new Fi;return i.asyncQueue.enqueueAndForget((async()=>lk(await _k(i),o,l))),l.promise})(qp(n),e)}function Fk(n,e,t){const i=t.docs.get(e._key),o=new mE(n);return new go(n,o,e._key,i,new Il(t.hasPendingWrites,t.fromCache),e.converter)}function wa(){return new Qp("serverTimestamp")}(function(e,t=!0){(function(o){Oa=o})(ba),_o(new Rs("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Ao(new RP(i.getProvider("auth-internal")),new bP(c,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ke(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(y.options.projectId,_)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),li(gv,yv,e),li(gv,yv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="type.googleapis.com/google.protobuf.Int64Value",Uk="type.googleapis.com/google.protobuf.UInt64Value";function gE(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Xc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Xc(e));if(typeof n=="function"||typeof n=="object")return gE(n,e=>Xc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Aa(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case jk:case Uk:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Aa(e)):typeof n=="function"||typeof n=="object"?gE(n,e=>Aa(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jn extends vi{constructor(e,t,i){super(`${Zp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,Jn.prototype)}}function zk(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Zc(n,e){let t=zk(n),i=t,o;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!h_[c])return new Jn("internal","internal");t=h_[c],i=c}const h=l.message;typeof h=="string"&&(i=h),o=l.details,o!==void 0&&(o=Aa(o))}}catch{}return t==="ok"?null:new Jn(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,cr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="us-central1",$k=/^data: (.*?)(?:\n|$)/;function Hk(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new Jn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Wk{constructor(e,t,i,o,l=Jf,c=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new Bk(e,t,i,o),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Jf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function qk(n,e,t){const i=Io(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(sp(n.emulatorOrigin),op("Functions",!0))}function Gk(n,e,t){const i=o=>Qk(n,e,o,{});return i.stream=(o,l)=>Jk(n,e,o,l),i}async function Kk(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function yE(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function Qk(n,e,t,i){const o=n._url(e);return Yk(n,o,t,i)}async function Yk(n,e,t,i){t=Xc(t);const o={data:t},l=await yE(n,i),c=i.timeout||7e4,h=Hk(c),p=await Promise.race([Kk(e,o,l,n.fetchImpl),h.promise,n.cancelAllRequests]);if(h.cancel(),!p)throw new Jn("cancelled","Firebase Functions instance was deleted.");const y=Zc(p.status,p.json);if(y)throw y;if(!p.json)throw new Jn("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new Jn("internal","Response is missing data field.");return{data:Aa(_)}}function Jk(n,e,t,i){const o=n._url(e);return Xk(n,o,t,i||{})}async function Xk(n,e,t,i){var o;t=Xc(t);const l={data:t},c=await yE(n,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let h;try{h=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const j=new Jn("cancelled","Request was cancelled.");return{data:Promise.reject(j),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(j)}}}}}}const V=Zc(0,null);return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}let p,y;const _=new Promise((P,V)=>{p=P,y=V});(o=i?.signal)===null||o===void 0||o.addEventListener("abort",()=>{const P=new Jn("cancelled","Request was cancelled.");y(P)});const w=h.body.getReader(),S=Zk(w,p,y,i?.signal);return{stream:{[Symbol.asyncIterator](){const P=S.getReader();return{async next(){const{value:V,done:j}=await P.read();return{value:V,done:j}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:_}}function Zk(n,e,t,i){const o=(c,h)=>{const p=c.match($k);if(!p)return;const y=p[1];try{const _=JSON.parse(y);if("result"in _){e(Aa(_.result));return}if("message"in _){h.enqueue(Aa(_.message));return}if("error"in _){const w=Zc(0,_);h.error(w),t(w);return}}catch(_){if(_ instanceof Jn){h.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(c){let h="";return p();async function p(){if(i?.aborted){const y=new Jn("cancelled","Request was cancelled");return c.error(y),t(y),Promise.resolve()}try{const{value:y,done:_}=await n.read();if(_){h.trim()&&o(h.trim(),c),c.close();return}if(i?.aborted){const S=new Jn("cancelled","Request was cancelled");c.error(S),t(S),await n.cancel();return}h+=l.decode(y,{stream:!0});const w=h.split(`
`);h=w.pop()||"";for(const S of w)S.trim()&&o(S.trim(),c);return p()}catch(y){const _=y instanceof Jn?y:Zc(0,null);c.error(_),t(_)}}},cancel(){return n.cancel()}})}const f_="@firebase/functions",p_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="auth-internal",tN="app-check-internal",nN="messaging-internal";function rN(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(eN),c=t.getProvider(nN),h=t.getProvider(tN);return new Wk(o,l,c,h,i)};_o(new Rs(Zp,e,"PUBLIC").setMultipleInstances(!0)),li(f_,p_,n),li(f_,p_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(n=up(),e=Jf){const i=sd(Xt(n),Zp).getImmediate({identifier:e}),o=K_("functions");return o&&iN(i,...o),i}function iN(n,e,t){qk(Xt(n),e,t)}function em(n,e,t){return Gk(Xt(n),e)}rN();const sN={apiKey:"AIzaSyBjOeHP4Pst7BYyRF2c85KKMe6lifXOU1M",authDomain:"wwconsole-93f76.firebaseapp.com",projectId:"wwconsole-93f76",storageBucket:"wwconsole-93f76.appspot.com",messagingSenderId:"936183161335",appId:"1:936183161335:web:0762f9ac5837ada128cef2",measurementId:"G-H6R483JTGT"},Ad=Z_(sN),Cr=Sk(Ad),_E=vE(Ad,"asia-south1"),Nl=SP(Ad);function oN(){const n=Na(),[e,t]=Y.useState(()=>Nl.currentUser);Y.useEffect(()=>{const l=d1(Nl,c=>t(c));return()=>l()},[]);const i=async()=>{try{await h1(Nl)}catch(l){console.error(" Logout failed:",l)}finally{n("/login")}},o=[{label:" Dashboard",path:"/app"},{label:" Theme Drafts",path:"/app/drafts/themes"},{label:" Story Drafts",path:"/app/drafts/stories"},{label:" Prompt Lab",path:"/app/promptlab"}];return T.jsxs("div",{className:"min-h-screen flex bg-gray-100 text-gray-800",children:[T.jsxs("aside",{className:"w-64 bg-white shadow-md flex flex-col",children:[T.jsxs("div",{className:"p-5 border-b",children:[T.jsx("h1",{className:"text-2xl font-bold text-blue-700",children:"WaitWhat? CMS"}),T.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editorial Console"})]}),T.jsx("nav",{className:"flex-1 p-4 space-y-1",children:o.map(l=>T.jsx(II,{to:l.path,className:({isActive:c})=>`block px-4 py-2 rounded-md transition ${c?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:l.label},l.path))}),T.jsx("div",{className:"p-4 border-t text-center text-xs text-gray-500",children:T.jsxs("p",{children:[" ",new Date().getFullYear()," WaitWhat?"]})})]}),T.jsxs("main",{className:"flex-1 overflow-y-auto",children:[T.jsxs("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[T.jsx("h2",{className:"text-lg font-semibold",children:"Content Manager"}),T.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e?.email&&T.jsxs("span",{className:"text-gray-500 hidden sm:inline",children:["Signed in as ",e.email]}),!e&&T.jsx("button",{onClick:()=>n("/login"),className:"text-blue-600 hover:underline",children:"Login"}),e&&T.jsx("button",{onClick:i,className:"text-red-600 hover:underline",children:"Logout"}),T.jsx("a",{href:"https://waitwhat.news",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Live Site "})]})]}),T.jsx("div",{className:"p-6",children:T.jsx(rI,{})})]})]})}const Rd=(n,e=[])=>{const t=[n,...e||[]].filter(i=>!!i&&i.trim().length>0);return Array.from(new Set(t.map(i=>i.trim())))},wE=n=>({...n,isPinned:n.isPinned??n.isPinnedFeatured??!1,secondaryCategories:n.secondaryCategories||[],secondarySubcategories:n.secondarySubcategories||[],allCategories:n.allCategories||Rd(n.category,n.secondaryCategories||[])}),EE=async n=>{const e={title:n.title||"",type:n.type||"Theme",overview:n.overview||"",category:n.category||"",subcategory:n.subcategory||"",secondaryCategories:n.secondaryCategories||[],secondarySubcategories:n.secondarySubcategories||[],allCategories:n.allCategories||Rd(n.category,n.secondaryCategories||[]),tags:n.tags||[],imageUrl:n.imageUrl||"",sources:n.sources||[],timeline:[],cardDescription:n.cardDescription||"",cardDescriptionHome:n.cardDescriptionHome||"",cardDescriptionTheme:n.cardDescriptionTheme||"",cardDescriptionStory:n.cardDescriptionStory||"",analysis:{stakeholders:[],faqs:[],future:[]},disableDepthToggle:n.disableDepthToggle||!1,isPinned:n.isPinned??n.isPinnedFeatured??!1,isPinnedFeatured:n.isPinnedFeatured??n.isPinned??!1,isCompactCard:n.isCompactCard??!1,pinnedCategory:n.pinnedCategory??"All",keywords:n.keywords||[],status:n.status||"draft",slug:n.slug||(n.title?n.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):""),editorNotes:n.editorNotes||"",createdAt:wa(),updatedAt:wa()};return(await Mk(sE(Cr,"drafts"),e)).id},ed=async()=>(await Lk(sE(Cr,"drafts"))).docs.map(e=>wE({id:e.id,...e.data()})),vs=async n=>{const e=Br(Cr,"drafts",n),t=await nu(e);return t.exists()?wE({id:t.id,...t.data()}):null},Gn=async(n,e)=>{const t=Br(Cr,"drafts",n),i=Rd(e.category,e.secondaryCategories||[]);await Xp(t,{...e,...e.category||e.secondaryCategories?{allCategories:i}:{},updatedAt:wa()},{merge:!0})},TE=async n=>{const e=Br(Cr,"drafts",n),t=await nu(e);if(t.exists()){const i=t.data(),o=i.slug||(i.title?i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):n),l=i.type==="Story"?"stories":"themes";try{await wf(Br(Cr,l,o))}catch(c){console.warn(" Failed to delete published doc (ignoring):",c)}if(o!==n)try{await wf(Br(Cr,l,n))}catch(c){console.warn(" Failed to delete published doc by ID (ignoring):",c)}}await wf(e)},m_=async(n,e,t)=>{const i=await vs(n);if(!i)throw new Error("Draft not found");const o=[...i.timeline||[]];o[e]={...o[e],...t},await Gn(n,{timeline:o})},SE=async n=>{const e=Br(Cr,"drafts",n),t=await nu(e);if(!t.exists())throw new Error("Draft not found");const i=t.data(),o=i.slug||i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),l=i.timeline?.flatMap(y=>y.sources||[]).filter(y=>y?.link&&y.link.startsWith("http"))||[],c=i.type==="Story"?"stories":"themes",h=Br(Cr,c,o),p=i.allCategories?.length?i.allCategories:Rd(i.category,i.secondaryCategories||[]);await Xp(h,{...i,allCategories:p,sources:l,publishedAt:wa(),createdAt:i.createdAt||wa(),status:"published"}),await Vk(e,{status:"published",updatedAt:wa()}),console.log(` Published ${i.type}  /${c}/${o} with ${l.length} sources`)},aN=async n=>{await SE(n)};function lN(){const n=Na(),[e,t]=Y.useState([]),[i,o]=Y.useState(!0),[l,c]=Y.useState(!1),[h,p]=Y.useState({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];Y.useEffect(()=>{(async()=>{try{const V=(await ed()).filter(j=>j.type==="Theme");t(V)}catch(V){console.error("Error loading drafts:",V)}finally{o(!1)}})()},[]);const _=P=>{const{name:V,value:j}=P.target;p({...h,[V]:j})},w=async P=>{if(P.preventDefault(),!h.title.trim()||!h.category.trim()){alert("Title and Category are required");return}try{c(!0);const V=await EE({title:h.title,overview:h.overview,category:h.category,subcategory:h.subcategory,tags:[],imageUrl:h.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Theme"}),j=(await ed()).filter(H=>H.type==="Theme");t(j),p({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${V}`)}catch(V){console.error("Error creating draft:",V),alert("Failed to create draft")}finally{c(!1)}},S=async P=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await TE(P),t(V=>V.filter(j=>j.id!==P))}catch(V){console.error(V),alert("Failed to delete draft")}};return i?T.jsx("div",{className:"p-6",children:"Loading drafts..."}):T.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h1",{className:"text-3xl font-bold",children:"Theme Drafts"})}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Theme Draft"}),T.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsx("input",{name:"title",placeholder:"Title",value:h.title,onChange:_,className:"border p-2 rounded"}),T.jsxs("select",{name:"category",value:h.category,onChange:_,className:"border p-2 rounded",children:[T.jsx("option",{value:"",children:"Select Category"}),y.map(P=>T.jsx("option",{value:P,children:P},P))]}),T.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Climate Policy, Geopolitical Conflict)",value:h.subcategory,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"date",placeholder:"Date (optional)",value:h.date,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:h.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),T.jsx("textarea",{name:"overview",placeholder:"Overview",value:h.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),T.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Theme Draft"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Theme Drafts"}),e.length===0?T.jsx("p",{className:"text-gray-500",children:"No theme drafts yet."}):T.jsx("ul",{className:"divide-y",children:e.map(P=>T.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-medium",children:P.title||"Untitled"}),T.jsxs("p",{className:"text-sm text-gray-500",children:[P.category,"  ",P.subcategory||"","  ",P.status]}),T.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:P.cardDescription||P.overview||""}),T.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",P.id]})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[T.jsx("button",{onClick:()=>n(`/app/drafts/${P.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),T.jsx("button",{onClick:()=>S(P.id),className:"text-red-600 hover:underline",children:"Delete"}),T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),P.slug&&T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),T.jsx("button",{onClick:()=>{const V=P.slug||P.id,j=`[${P.title}](@theme/${V})`;navigator.clipboard.writeText(j),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},P.id))})]})]})}function uN(){const n=Na(),[e,t]=Y.useState([]),[i,o]=Y.useState(!0),[l,c]=Y.useState(!1),[h,p]=Y.useState({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];Y.useEffect(()=>{(async()=>{try{const V=(await ed()).filter(j=>j.type==="Story");t(V)}catch(V){console.error("Error loading drafts:",V)}finally{o(!1)}})()},[]);const _=P=>{const{name:V,value:j}=P.target;p({...h,[V]:j})},w=async P=>{if(P.preventDefault(),!h.title.trim()||!h.category.trim()){alert("Title and Category are required");return}try{c(!0);const V=await EE({title:h.title,overview:h.overview,category:h.category,subcategory:h.subcategory,tags:[],imageUrl:h.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Story"}),j=(await ed()).filter(H=>H.type==="Story");t(j),p({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${V}`)}catch(V){console.error("Error creating draft:",V),alert("Failed to create draft")}finally{c(!1)}},S=async P=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await TE(P),t(V=>V.filter(j=>j.id!==P))}catch(V){console.error(V),alert("Failed to delete draft")}};return i?T.jsx("div",{className:"p-6",children:"Loading drafts..."}):T.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h1",{className:"text-3xl font-bold",children:"Story Drafts"})}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Story Draft"}),T.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsx("input",{name:"title",placeholder:"Title",value:h.title,onChange:_,className:"border p-2 rounded"}),T.jsxs("select",{name:"category",value:h.category,onChange:_,className:"border p-2 rounded",children:[T.jsx("option",{value:"",children:"Select Category"}),y.map(P=>T.jsx("option",{value:P,children:P},P))]}),T.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Geopolitical Conflict)",value:h.subcategory,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"date",placeholder:"Date (optional)",value:h.date,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:h.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),T.jsx("textarea",{name:"overview",placeholder:"Overview",value:h.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),T.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Story Draft"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Story Drafts"}),e.length===0?T.jsx("p",{className:"text-gray-500",children:"No story drafts yet."}):T.jsx("ul",{className:"divide-y",children:e.map(P=>T.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-medium",children:P.title||"Untitled"}),T.jsxs("p",{className:"text-sm text-gray-500",children:[P.category,"  ",P.subcategory||"","  ",P.status]}),T.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:P.cardDescription||P.overview||""}),T.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",P.id]})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[T.jsx("button",{onClick:()=>n(`/app/drafts/${P.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),T.jsx("button",{onClick:()=>S(P.id),className:"text-red-600 hover:underline",children:"Delete"}),T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),P.slug&&T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),T.jsx("button",{onClick:()=>{const V=P.slug||P.id,j=`[${P.title}](@story/${V})`;navigator.clipboard.writeText(j),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},P.id))})]})]})}const cN="modulepreload",dN=function(n){return"/"+n},g_={},y_=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let y=function(_){return Promise.all(_.map(w=>Promise.resolve(w).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var c=y;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");o=y(t.map(_=>{if(_=dN(_),_ in g_)return;g_[_]=!0;const w=_.endsWith(".css"),S=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${S}`))return;const P=document.createElement("link");if(P.rel=w?"stylesheet":cN,w||(P.as="script"),P.crossOrigin="",P.href=_,p&&P.setAttribute("nonce",p),document.head.appendChild(P),w)return new Promise((V,j)=>{P.addEventListener("load",V),P.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},tm="https://api.openai.com/v1/chat/completions",nm="gpt-4o-mini";async function rm(n,e){const t="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",i={model:nm,messages:[{role:"system",content:`You are a precise news editor.
Always respond ONLY with valid JSON matching this schema:
${e}
Do not include markdown, code fences, or commentary.`},{role:"user",content:n}]},o=await fetch(tm,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!o.ok){const h=await o.text();throw new Error(`API error: ${o.status} ${h}`)}const c=(await o.json()).choices?.[0]?.message?.content?.trim();if(!c)throw new Error("Empty response from model");try{return JSON.parse(c)}catch{throw console.error(" Raw model output:",c),new Error("Invalid JSON returned by model")}}async function IE(n){const e=`
{
  "analysis": {
    "stakeholders": [{ "name": "string", "detail": "string" }],
    "faqs": [{ "question": "string", "answer": "string" }],
    "future": [{ "question": "string", "answer": "string" }]
  }
}`,t=`
You are a political analyst creating structured insights for the theme "${n.title}".

Context:
${n.overview}

Return three sections:
1. stakeholders  list of key people/institutions and their roles.
2. faqs  common reader questions with concise factual answers.
3. future  forward-looking questions with short, reasoned answers.

Keep all answers under 50 words.
Return only valid JSON.
`;return(await rm(t,e)).analysis}async function hN(n){const e="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",t=`
You are a clear and factual news editor.
From the following overview, identify up to 8 important or complex terms that a reader might not immediately understand.

Return JSON only:
[
  { "term": "term or phrase", "explainer": "short, clear, factual, under 25 words" }
]

Overview:
${n}
`,l=(await(await fetch(tm,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:nm,messages:[{role:"user",content:t}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT overview context output:",l);try{return JSON.parse(l)}catch{return console.warn(" GPT Context JSON parse error:",l),[]}}async function fN(n){const e="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",t=n.contexts?.map(h=>h.term).filter(Boolean);if(!t?.length)return[];const i=`
You are a concise factual explainer.
For the given event, write a short (under 25 words) neutral definition for each listed term.

Event title: ${n.event}
Event description: ${n.description}

Terms to explain:
${t.map(h=>`- ${h}`).join(`
`)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`,c=(await(await fetch(tm,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:nm,messages:[{role:"user",content:i}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT event explainer output:",c);try{return JSON.parse(c).filter(p=>p.term&&p.explainer)}catch{return console.warn(" Invalid JSON for event explainer:",c),[]}}async function xE(n){const e=`
You are a concise factual news explainer.
Given the event below, identify key proper nouns, organizations, or technical terms a general reader may not know.
For each, write a short (under 20 words) neutral explanation.

Event Title: ${n.event}
Event Description: ${n.description}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await rm(e,'[{"term": "string", "explainer": "string"}]')}async function CE(n,e){const t=`
You are a concise factual explainer for a news analysis section.
Section: ${n}

For each entry below, suggest short (under 20 words) neutral explainers for key names or entities readers may not know.

Entries:
${JSON.stringify(e,null,2)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await rm(t,'[{"term": "string", "explainer": "string"}]')}const v_=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:IE,generateContexts:hN,generateContextsForAnalysis:CE,generateContextsForTimelineEvent:xE,generateExplainersForEvent:fN},Symbol.toStringTag,{value:"Module"}));async function pN(n){const i=(await em(_E,"fetchSonarTimeline")({title:n.title,overview:n.overview})).data;return!i||!Array.isArray(i.events)?[]:i.events.map((o,l)=>({id:`sonar-${l}`,date:o.date??"",event:o.title??"",description:o.description??"",significance:o.importance??2,imageUrl:o.sources?.[0]?.imageUrl??"",sourceLink:o.sources?.[0]?.url??"",sources:o.sources?.map(c=>({title:c.title??"",link:c.url??"",sourceName:c.sourceName??"",imageUrl:c.imageUrl??"",pubDate:c.publishedAt??"",provider:"sonar"}))??[],contexts:[],faqs:[]}))}async function mN({title:n,event:e,description:t}){try{const i=Br(Cr,"settings","global"),o=await nu(i),l=o.exists()&&o.data()?.serper?.prompt||"title";if(l.trim().toLowerCase()==="title")return n||e||t||"";let c=l;return c=c.replace(/{{\s*title\s*}}/gi,n||"").replace(/{{\s*event\s*}}/gi,e||"").replace(/{{\s*description\s*}}/gi,t||""),c.trim()||n||e||t||""}catch(i){return console.error(" Error building Serper query:",i),n||e||t||""}}async function gN(n,e,t){const i=vE(Ad,"asia-south1"),o=em(i,"fetchEventCoverage");try{const l=await mN({title:n,event:n,description:e});return console.log(" Serper query:",l),(await o({title:l,description:e,date:t})).data}catch(l){throw console.error(" Error calling fetchEventCoverage:",l),new Error(l.message||"Failed to fetch event coverage")}}function __(n){if(!n)return T.jsx("span",{children:n});const e=n.replace(/\]\(@\[([^\]]+)\]\(@(story|theme)\/([A-Za-z0-9_-]+)\)\)/g,"](@$2/$3)"),t=/\[([^\]]+)\]\((@(?:story|theme)\/[A-Za-z0-9_-]+|https?:\/\/[^\s)]+)\)/g,i=[];let o=0,l;for(;(l=t.exec(e))!==null;){const[c,h,p]=l,y=e.slice(o,l.index);y&&i.push({type:"text",value:y}),i.push({type:"link",label:h,target:p}),o=l.index+c.length}return o<e.length&&i.push({type:"text",value:e.slice(o)}),T.jsx("span",{style:{display:"inline",flexWrap:"wrap",lineHeight:"1.6"},children:i.map((c,h)=>{if(c.type==="text")return T.jsx("span",{children:c.value},h);const{label:p,target:y}=c,_=y.startsWith("@story/")||y.startsWith("@theme/"),w=y.startsWith("@theme/"),S=_?y.split("/")[1]:"";return _?T.jsx($_,{to:`/${w?"themes":"stories"}/${S}`,style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},h):T.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},h)})})}async function yN(n){const e="dpjnkc0dq",t="waitwhat_unsigned",i=new FormData;return i.append("file",n),i.append("upload_preset",t),(await(await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i})).json()).secure_url}function vN(n){if(!n)return null;try{const e=new URL(n).hostname;return e?`https://api.faviconkit.com/${e}/64`:null}catch{return null}}function _N(n){if(!n)return null;try{return`${new URL(n).origin}/favicon.ico`}catch{return null}}function wN(n){return n&&n.trim().split(/\s+/).map(e=>e[0]?.toUpperCase()??"").join("").slice(0,3)||"?"}function w_({label:n,image:e,onGenerate:t}){const[i,o]=Y.useState(e?.prompt||""),[l,c]=Y.useState(e?.negativePrompt||""),[h,p]=Y.useState(!1),[y,_]=Y.useState(null),w=async()=>{if(!i.trim()){_("Prompt required");return}_(null),p(!0);try{await t(i,l)}catch(S){_(S?.message||"Failed to generate image")}finally{p(!1)}};return T.jsxs("div",{className:"border rounded p-3 space-y-2",children:[T.jsx("div",{className:"font-medium",children:n}),T.jsx("textarea",{className:"w-full border rounded p-2 text-sm",rows:3,placeholder:"Image prompt",value:i,onChange:S=>o(S.target.value)}),T.jsx("textarea",{className:"w-full border rounded p-2 text-xs text-gray-600",rows:2,placeholder:"Negative prompt (optional)",value:l,onChange:S=>c(S.target.value)}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:w,disabled:h,className:"px-3 py-1 bg-black text-white rounded text-sm disabled:opacity-50",children:h||e?.status==="generating"?"Generating...":e?.status==="ready"?"Regenerate":"Generate"}),e?.status==="error"&&T.jsx("span",{className:"text-red-600 text-xs",children:e.error?.message||"Error"}),y&&T.jsx("span",{className:"text-red-600 text-xs",children:y})]}),e?.url&&T.jsx("img",{src:e.url,alt:"Generated",className:"mt-2 w-full rounded"})]})}async function E_(n){return(await em(_E,"generateImage")(n)).data}const co=[{value:"Politics",subcategories:["Elections & Power Transitions","Government Policies & Bills","Public Institutions & Judiciary","Geopolitics & Diplomacy"]},{value:"Business & Economy",subcategories:["Macroeconomy","Industries","Markets & Finance","Trade & Tariffs","Corporate Developments"]},{value:"World",subcategories:["International Conflicts","Global Governance","Migration & Humanitarian Crises","Elections Worldwide","Science & Tech","Environment"]},{value:"India",subcategories:["Social Issues","Infrastructure & Development","Science, Tech and Environment"]}];co.map(n=>n.value.toLowerCase());const T_=n=>n.split(",").map(e=>e.trim()).filter(Boolean),yc=n=>n||"";function EN(n){return n>=85?"#16a34a":n>=70?"#eab308":n>=50?"#f97316":"#dc2626"}function TN(n){return n>=85?"bg-green-100 text-green-800":n>=70?"bg-yellow-100 text-yellow-800":n>=50?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}function SN(){const{id:n}=BS(),e=Na(),[t,i]=Y.useState(null),[o,l]=Y.useState(!0),[c,h]=Y.useState(!1),[p,y]=Y.useState(!1),[_,w]=Y.useState(!1),[S,P]=Y.useState({}),[V,j]=Y.useState(!1),[H,pe]=Y.useState(""),[ee,de]=Y.useState(""),[ge,je]=Y.useState([]),[Fe,x]=Y.useState(!1),[C,A]=Y.useState(null),[b,L]=Y.useState(!0),[F,N]=Y.useState(!0),[Ye,vt]=Y.useState(!1),[bt,it]=Y.useState(!1),ae=k=>Array.from(new Set(k)),Ae=k=>{if(!k)return"";const W=co.find(B=>B.value.toLowerCase()===k.toLowerCase());return W?W.value:k},me=(k,W=[])=>{const B=[k,...W||[]].filter(X=>!!X?.trim?.().length).map(X=>Ae(X.trim())).filter(Boolean);return Array.from(new Set(B))},z=co.find(k=>k.value===t?.category)?.subcategories||[],Z=ae(co.flatMap(k=>k.subcategories||[])),Ce=k=>{if(!t)return;const W=co.find(ue=>ue.value===k)?.subcategories||[],B=W.includes(t.subcategory||"")?t.subcategory:W[0]||"",X=me(k,t.secondaryCategories||[]),te=t.pinnedCategory&&t.pinnedCategory===t.category?k:t.pinnedCategory;i({...t,category:k,subcategory:B,allCategories:X,pinnedCategory:te})},$e=(k,W)=>{if(!t)return;const B=t.secondaryCategories||[],X=W?ae([...B,k]):B.filter(ue=>ue!==k),te=me(t.category,X);i({...t,secondaryCategories:X,allCategories:te}),w(!0)},be=k=>{const W=(k.timeline||[]).map((B,X)=>{const te=B.title??B.event??"",ue=B.id||`event-${X+1}-${(te||"item").toLowerCase().replace(/\s+/g,"-").slice(0,12)||"item"}`;return{...B,id:ue,title:te,event:B.event??te}});return{...k,timeline:W,phases:k.phases||[],isPinned:k.isPinned??k.isPinnedFeatured??!1,category:Ae(k.category),secondaryCategories:(k.secondaryCategories||[]).map(B=>Ae(B)||"").filter(Boolean),secondarySubcategories:(k.secondarySubcategories||[]).filter(Boolean),allCategories:k.allCategories?.filter(Boolean)||me(k.category,k.secondaryCategories||[]),tags:k.tags||[],cardDescription:yc(k.cardDescription),cardDescriptionHome:yc(k.cardDescriptionHome),cardDescriptionTheme:yc(k.cardDescriptionTheme),cardDescriptionStory:yc(k.cardDescriptionStory)}},qe=async()=>{if(!n)return null;const k=await vs(n);return k&&i(be(k)),k},Qe=()=>{if(!t||!t.timeline||t.timeline.length===0){alert("No timeline events to copy.");return}const k=`You are a fact-checking assistant. For each event below, fact-check the explanation using the listed sources and your own browsing.

Return ONLY a JSON array of objects. Each object MUST have:
- "id": the event id (string, as provided)
- "confidenceScore": integer from 0 to 100
- "confidenceExplanation": short 13 sentence explanation of why you gave that score (number and credibility of sources, agreement between sources, recency, etc.)

Example of desired output:
[
  {
    "id": "event-1",
    "confidenceScore": 88,
    "confidenceExplanation": "Verified by multiple major outlets with consistent details."
  }
]

Events:
`,W=t.timeline.map((X,te)=>{const ue=X.sources?.map(ye=>`- ${ye.link||ye.title||ye.sourceName||""}`).join(`
`)||"- (no sources listed)";return["#EVENT",`id: ${X.id??`event-${te+1}`}`,`title: ${X.event||X.title||"(no title)"}`,`explanation: ${X.description||"(no explanation)"}`,"","sources:",ue,""].join(`
`)}).join(`
`),B=`${k}
${W}`;if(!navigator?.clipboard){alert("Clipboard not available in this browser.");return}navigator.clipboard.writeText(B).then(()=>{alert("All events copied for fact-checking. Paste into ChatGPT.")}).catch(X=>{console.error("Clipboard error",X),alert("Failed to copy to clipboard.")})},Ze=async()=>{if(t)try{const k=JSON.parse(H);if(!Array.isArray(k))throw new Error("JSON is not an array");const W=t.timeline.map((te,ue)=>{const ye=k.find(De=>De.id===te.id||De.id===`event-${ue+1}`);return ye?{...te,factCheck:{confidenceScore:ye.confidenceScore,explanation:ye.confidenceExplanation,lastCheckedAt:Date.now()}}:te}),B={...t,timeline:W};h(!0);const X=t.id||n;if(!X)throw new Error("Draft id missing.");await Gn(X,{timeline:W}),i(B),j(!1),pe(""),alert("Fact-check data applied to events.")}catch(k){console.error(k),alert("Could not parse JSON. Make sure you pasted valid JSON array with id, confidenceScore, and confidenceExplanation.")}finally{h(!1)}},mt=(k=[],W,B)=>(k||[]).filter(X=>X.startIndex!==W).map(X=>{const te=X.startIndex>W?X.startIndex-1:X.startIndex;let ue=typeof X.endIndex=="number"?X.endIndex>=W?X.endIndex-1:X.endIndex:void 0;return typeof ue=="number"&&ue<te&&(ue=te),te>=B?null:{...X,startIndex:te,endIndex:ue}}).filter(Boolean),St=(k,W)=>{if(!W)return;const B=W.selectionStart??0,X=W.selectionEnd??0;P(te=>({...te,[k]:{start:B,end:X}}))},on=(k,W,B)=>{let X=prompt("Enter linked story/theme ID (e.g. story/abc123 or theme/xyz456):");if(!X||(X=X.replace(/^@+/,"").replace(/\[|\]|\(|\)/g,"").trim(),!X))return;const te=S[k];if(!te||te.start===te.end){alert("Select text in the field first, then click Link.");return}const ue=W||"",{start:ye,end:De}=te,ut=ue.substring(ye,De);if(!ut){alert("Selection is empty.");return}const Tt=`[${ut}](@${X})`,Zt=ue.substring(0,ye)+Tt+ue.substring(De);B(Zt),w(!0)};Y.useEffect(()=>{(async()=>{try{if(!n)return;const W=await vs(n),B=W?be(W):null;i(B),de((B?.tags||[]).join(", "))}catch(W){console.error(W),alert("Failed to load draft.")}finally{l(!1)}})()},[n]),Y.useEffect(()=>{const k=W=>{_&&(W.preventDefault(),W.returnValue="")};return window.addEventListener("beforeunload",k),()=>window.removeEventListener("beforeunload",k)},[_]);const It=k=>{if(!t)return;const{name:W,value:B}=k.target;i({...t,[W]:B}),w(!0)},hn=k=>{de(k.target.value),w(!0)},hr=k=>{i(W=>W&&{...W,tags:T_(k)})},Wr=async()=>{const k=prompt("Paste Midjourney Image URL:");if(k)try{const W=await yN(k);i(B=>B&&{...B,imageUrl:W}),w(!0),alert(" Uploaded to Cloudinary!")}catch(W){console.error(W),alert(" Failed to upload image.")}},bn=async()=>{if(!(!t||!n))try{h(!0);const k=me(t.category,t.secondaryCategories||[]),W=T_(ee),B={...t,allCategories:(k||[]).filter(Boolean),tags:W};i(B),await Gn(n,B),w(!1),alert(" Metadata saved")}catch(k){console.error(k),alert(" Failed to save metadata: "+(k?.message||"Unknown error"))}finally{h(!1)}},_i=async()=>{if(!(!n||!t)){y(!0);try{await Gn(n,{phases:t.phases||[]}),t.type==="Story"?(await aN(n),alert(" Story published successfully!")):(await SE(n),alert(" Theme published successfully!"))}catch(k){console.error(k),alert(" Publish failed: "+k.message)}finally{y(!1)}}},Wi=async()=>{if(!(!t||!n)){vt(!0);try{const k=await pN(t),W={...t,timeline:k,updatedAt:new Date().toISOString()};i(W),await Gn(n,{timeline:k,updatedAt:W.updatedAt}),w(!1),alert(" Timeline generated with Sonar and saved.")}catch(k){console.error("Failed to generate timeline with Sonar:",k),alert(" Failed to generate timeline: "+(k.message||"Unknown error"))}finally{vt(!1)}}},Pr=async()=>{if(!(!t||!n)){it(!0);try{const k=await IE(t);await Gn(n,{analysis:k});const W=await vs(n);i(W?be(W):null),alert(" Analysis generated successfully!")}catch(k){console.error(k),alert(" Failed to generate analysis: "+k.message)}finally{it(!1)}}},Xn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`event-${Date.now()}-${Math.random().toString(16).slice(2)}`,Zn=async()=>{if(!n||!t)return;const k={id:Xn(),title:"",date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:"",sources:[],contexts:[],faqs:[]},W=[...t.timeline||[],k];i({...t,timeline:W});try{await Gn(n,{timeline:W}),alert(" Blank event added. Scroll to the end of the timeline to edit it.")}catch(B){console.error(" Failed to add event:",B),alert(" Failed to add event. Please try again.");const X=await vs(n);X&&i(be(X))}},Ct=async(k,W,B)=>{if(!n||!t)return;const X=[...t.timeline],te={...X[k],[W]:B};(W==="event"||W==="title")&&(te.title=B),X[k]=te,i({...t,timeline:X}),w(!0)},qr=async k=>{if(!n||!t||!window.confirm("Delete this event?"))return;const W=t.timeline.filter((X,te)=>te!==k),B=mt(t.phases||[],k,W.length);i({...t,timeline:W,phases:B}),w(!0);try{await Gn(n,{timeline:W,phases:B});const X=await vs(n);X&&(i(be(X)),w(!1)),alert(" Event deleted.")}catch(X){console.error(" Failed to delete event:",X),alert(" Failed to delete event.");const te=await vs(n);te&&i(be(te))}},En=async(k,W)=>{if(!n||!t)return;const B=W.event?.trim();if(!B){alert("Please add an event title before fetching coverage.");return}const X=W.description??"";try{console.log(" Fetching Serper coverage for:",B);const te=await gN(B,X,W.date||"");if(te.sources?.length){const ue=te.sources.map(Ht=>({...Ht,imageUrl:Ht.imageUrl??null})),ye=t.timeline[k].sources||[],De=ue.map(Ht=>({title:Ht.title,link:Ht.link,sourceName:Ht.sourceName,imageUrl:Ht.imageUrl??null,pubDate:Ht.pubDate,provider:"serper"})),ut=[...ye,...De.filter(Ht=>!ye.some(fr=>fr.link===Ht.link))],Tt={...t.timeline[k],sources:ut,imageUrl:ut.find(Ht=>Ht.imageUrl)?.imageUrl||t.timeline[k].imageUrl};await m_(n,k,Tt);const Zt=[...t.timeline];Zt[k]=Tt;const Vn=await vs(n);i(be(Vn||{...t,timeline:Zt})),w(!0),alert(` Found ${te.sources.length} sources for "${W.event}"`)}else alert(" No relevant sources found for this event");console.log(" Sources:",te.sources)}catch(te){console.error(" Error fetching coverage:",te),alert(" Failed to fetch coverage: "+te.message)}};return o?T.jsx("div",{className:"p-6",children:"Loading..."}):t?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h1",{className:"text-3xl font-bold",children:"Edit Draft"}),_&&T.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" You have unsaved changes"}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 hover:underline",children:" Back"}),T.jsx("button",{onClick:_i,disabled:p,className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 disabled:opacity-50",children:p?"Publishing":t?.type==="Story"?" Publish Story":" Publish Theme"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metadata"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsx("input",{name:"title",value:t.title,onChange:It,placeholder:"Title",className:"border p-2 rounded"}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Primary Category"}),T.jsxs("select",{name:"category",value:t.category,onChange:k=>Ce(k.target.value),className:"border p-2 rounded",children:[T.jsx("option",{value:"",children:"Select category"}),co.map(k=>T.jsx("option",{value:k.value,children:k.value},k.value))]})]}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Primary Subcategory"}),T.jsxs("select",{name:"subcategory",value:t.subcategory,onChange:k=>i({...t,subcategory:k.target.value}),className:"border p-2 rounded",disabled:!t.category,children:[T.jsx("option",{value:"",children:"Select subcategory"}),z.map(k=>T.jsx("option",{value:k,children:k},k))]})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-2",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Secondary Categories"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:co.filter(k=>k.value!==t.category).map(k=>T.jsxs("label",{className:"flex items-center gap-2 border rounded px-2 py-1 text-sm",children:[T.jsx("input",{type:"checkbox",checked:t.secondaryCategories?.includes(k.value)||!1,onChange:W=>$e(k.value,W.target.checked)}),T.jsx("span",{children:k.value})]},`sec-cat-${k.value}`))})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Secondary Subcategories"}),T.jsx("select",{multiple:!0,value:t.secondarySubcategories||[],onChange:k=>{const W=Array.from(k.target.selectedOptions).map(B=>B.value);i({...t,secondarySubcategories:W})},className:"border p-2 rounded h-28",children:Z.map(k=>T.jsx("option",{value:k,children:k},k))}),T.jsx("p",{className:"text-xs text-gray-500",children:"Hold Ctrl/Cmd to select multiple."})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Card Preview (all screens)"}),T.jsx("textarea",{name:"cardDescription",value:t.cardDescription||"",onChange:It,placeholder:"Short blurb shown under the title on cards (used instead of Overview)",rows:3,className:"border p-2 rounded"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Leave blank to fall back to the overview."})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Tags"}),T.jsx("input",{type:"text",value:ee,onChange:hn,onBlur:()=>hr(ee),placeholder:"Comma-separated tags (e.g. politics, elections, policy)",className:"border p-2 rounded"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Saved as a tag list; you can decide how to use them later."})]}),T.jsx("input",{name:"imageUrl",value:t.imageUrl||"",onChange:It,placeholder:"Main Thumbnail / Cover Image URL",className:"border p-2 rounded md:col-span-2"}),T.jsx("button",{type:"button",onClick:Wr,className:"px-3 py-2 bg-purple-600 text-white rounded md:col-span-2 hover:bg-purple-700",children:" Upload Image from Midjourney Link"}),"np",T.jsx("div",{className:"md:col-span-2",children:T.jsx(w_,{label:"Draft Thumbnail (16:9)",image:t?.images?.thumbnail,onGenerate:async(k,W)=>{if(!n)throw new Error("Missing draft id");await E_({targetType:"draftThumbnail",draftId:n,prompt:k,negativePrompt:W}),await qe()}})}),t.imageUrl&&T.jsxs("div",{className:"md:col-span-2 flex justify-start items-center gap-4",children:[T.jsx("img",{src:t.imageUrl,alt:"Cover",className:"w-48 h-32 object-cover rounded border",onError:k=>{const W=t.imageUrl??"";try{if(W.startsWith("http")){const B=new URL(W).origin;k.currentTarget.src=`${B}/favicon.ico`}else k.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}catch{k.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}}}),T.jsx("p",{className:"text-gray-600 text-sm",children:"Preview of your main thumbnail"})]}),T.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 mt-2",children:[T.jsx("input",{type:"checkbox",id:"isPinned",checked:t.isPinned||!1,onChange:async k=>{const W=k.target.checked;if(i({...t,isPinned:W}),n)try{await Gn(n,{isPinned:W,isPinnedFeatured:W})}catch(B){console.error(" Failed to update isPinned:",B)}},className:"w-4 h-4"}),T.jsx("label",{htmlFor:"isPinned",className:"text-sm text-gray-800",children:"Pin as Featured"}),t.isPinned&&T.jsxs("select",{value:t.pinnedCategory||"All",onChange:async k=>{const W=k.target.value;if(i({...t,pinnedCategory:W}),n)try{await Gn(n,{pinnedCategory:W})}catch(B){console.error(" Failed to update pinnedCategory:",B)}},className:"border p-1 rounded text-sm",children:[T.jsx("option",{value:"All",children:"All Categories"}),T.jsx("option",{value:t.category,children:t.category})]})]}),T.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[T.jsx("input",{type:"checkbox",id:"isCompactCard",checked:t.isCompactCard||!1,onChange:async k=>{const W=k.target.checked;if(i({...t,isCompactCard:W}),n)try{await Gn(n,{isCompactCard:W})}catch(B){console.error(" Failed to update isCompactCard:",B)}},className:"w-4 h-4 mt-1"}),T.jsxs("label",{htmlFor:"isCompactCard",className:"text-sm text-gray-800",children:["Render as compact card",T.jsx("span",{className:"block text-gray-500 text-xs",children:"Home/Stories/Themes screens on WWFinal will show only the title and a small thumbnail when enabled."})]})]}),T.jsx("textarea",{name:"overview",value:t.overview||"",onChange:It,onSelect:k=>St("overview",k.target),placeholder:"Overview",rows:3,className:"border p-2 rounded md:col-span-2"}),T.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 text-xs text-blue-600 mt-1",children:[T.jsx("button",{type:"button",onClick:()=>on("overview",t.overview||"",k=>i({...t,overview:k})),className:"text-blue-600 hover:underline",children:" Link selected text"}),T.jsx("span",{className:"text-gray-500",children:"Select text in the overview box, then click to link another story/theme."})]}),T.jsx("div",{className:"md:col-span-2 text-sm text-gray-600",children:__(t.overview||"")})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[T.jsx("input",{type:"checkbox",id:"disableDepthToggle",checked:t.disableDepthToggle||!1,onChange:async k=>{const W=k.target.checked;if(i({...t,disableDepthToggle:W}),n)try{await Gn(n,{disableDepthToggle:W}),console.log(" disableDepthToggle updated to:",W)}catch(B){console.error(" Failed to update disableDepthToggle:",B),alert(" Failed to update disableDepthToggle.")}},className:"w-4 h-4"}),T.jsx("label",{htmlFor:"disableDepthToggle",className:"text-sm text-gray-700",children:"Disable Depth Toggle in App"})]}),T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Context Explainers (Overview)"}),T.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add terms that will be highlighted in the overview for reader context."}),(t.contexts||[]).map((k,W)=>T.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[T.jsx("input",{type:"text",value:k.term,onChange:B=>{const X=[...t.contexts||[]];X[W].term=B.target.value,i({...t,contexts:X})},placeholder:"Term",className:"border p-2 rounded flex-1"}),T.jsx("input",{type:"text",value:k.explainer,onChange:B=>{const X=[...t.contexts||[]];X[W].explainer=B.target.value,i({...t,contexts:X})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),T.jsx("button",{onClick:()=>{const B=(t.contexts||[]).filter((X,te)=>te!==W);i({...t,contexts:B})},className:"text-red-500 text-sm hover:underline",children:""})]},W)),T.jsx("button",{onClick:()=>i({...t,contexts:[...t.contexts||[],{term:"",explainer:""}]}),className:"text-blue-600 text-sm hover:underline",children:" Add new context term"})]}),T.jsx("button",{onClick:async()=>{if(!t.overview){alert("Please write an overview first!");return}try{if(!window.confirm("Use GPT to suggest contextual explainers?"))return;h(!0);const{generateContexts:W}=await y_(async()=>{const{generateContexts:te}=await Promise.resolve().then(()=>v_);return{generateContexts:te}},void 0),B=await W(t.overview);if(!B||B.length===0){alert("No terms found.");return}const X=[...t.contexts||[],...B];i({...t,contexts:X}),alert(` Added ${B.length} suggested context terms.`)}catch(k){console.error(" GPT error:",k),alert("Failed to fetch GPT suggestions. Check console.")}finally{h(!1)}},className:"text-purple-600 text-sm hover:underline mt-2",children:" Suggest Contexts with GPT"}),T.jsx("button",{onClick:bn,disabled:c,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:c?"Saving...":"Save Metadata"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Chronology of Events"}),T.jsxs("div",{className:"flex gap-3 items-center",children:[T.jsx("button",{onClick:Wi,disabled:Ye,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:Ye?"Generating":" Generate Timeline"}),T.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",onClick:Qe,disabled:!t||!t.timeline||t.timeline.length===0,children:"Copy Events for Fact-Check"}),T.jsx("button",{type:"button",className:"px-3 py-1 rounded border border-blue-600 text-blue-600 text-sm hover:bg-blue-50 disabled:opacity-50",onClick:()=>j(!0),disabled:!t||!t.timeline||t.timeline.length===0,children:"Apply Fact-Check Results"}),T.jsx("button",{onClick:Zn,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:" Add Event"}),T.jsx("button",{onClick:async()=>{if(!(!n||!t))try{h(!0),await Gn(n,{timeline:t.timeline,phases:t.phases||[]}),w(!1),alert(" Timeline saved successfully!")}catch(k){console.error(" Timeline save failed:",k),alert(" Failed to save timeline.")}finally{h(!1)}},className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" Save Timeline"}),T.jsx("button",{onClick:()=>L(!b),className:"text-sm text-blue-600 hover:underline",children:b?"Hide":"Show"})]})]}),b&&T.jsx(T.Fragment,{children:t.timeline.length===0?T.jsx("p",{className:"text-gray-500 mb-3",children:"No events yet."}):T.jsx("div",{className:"space-y-4 mb-4",children:t.timeline.map((k,W)=>T.jsxs("div",{className:"mb-6",children:[T.jsx("button",{className:"text-purple-600 text-xs hover:underline mb-2",onClick:()=>{const B={title:"New Phase",startIndex:W,endIndex:W},X=[...t.phases||[],B];i({...t,phases:X}),w(!0)},children:" Insert Phase Here"}),(t.phases||[]).filter(B=>B.startIndex===W).map(B=>{const X=(t.phases||[]).indexOf(B),te=t.timeline.length,ue=Math.max(B.startIndex,te>0?te-1:B.startIndex),ye=Math.min(Math.max(B.startIndex,B.endIndex??B.startIndex),ue),De=t.timeline[B.startIndex]?.event||`Event ${B.startIndex+1}`;return T.jsxs("div",{className:"border border-purple-300 bg-purple-50 p-3 rounded mb-3",children:[T.jsx("input",{value:B.title||"",onChange:ut=>{const Tt=[...t.phases||[]];Tt[X]={...B,title:ut.target.value},i({...t,phases:Tt}),w(!0)},className:"border p-2 rounded w-full",placeholder:"Phase title"}),T.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Starts at event #",B.startIndex+1,": ",De]}),T.jsxs("label",{className:"text-xs text-gray-600 mt-2 block",children:["End this phase after event",T.jsx("select",{className:"border p-2 rounded w-full mt-1 text-sm",value:ye,onChange:ut=>{const Tt=Number(ut.target.value),Zt=Math.max(B.startIndex,Tt),Vn=[...t.phases||[]];Vn[X]={...B,endIndex:Zt},i({...t,phases:Vn}),w(!0)},children:t.timeline.map((ut,Tt)=>T.jsxs("option",{value:Tt,disabled:Tt<B.startIndex,children:["#",Tt+1,"  ",ut.event||`Event ${Tt+1}`]},`phase-${X}-end-${Tt}`))})]}),T.jsx("button",{className:"text-red-600 text-xs mt-1 hover:underline",onClick:()=>{const ut=(t.phases||[]).filter((Tt,Zt)=>Zt!==X);i({...t,phases:ut}),w(!0)},children:" Remove Phase"})]},`phase-${X}`)}),T.jsxs("div",{className:"border p-3 rounded",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[T.jsx("input",{value:k.date||"",onChange:B=>Ct(W,"date",B.target.value),placeholder:"Date",className:"border p-2 rounded"}),T.jsx("input",{value:k.event,onChange:B=>Ct(W,"event",B.target.value),placeholder:"Event",className:"border p-2 rounded"}),T.jsx("input",{value:k.imageUrl||"",onChange:B=>Ct(W,"imageUrl",B.target.value),placeholder:"Image URL",className:"border p-2 rounded"}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sources"}),(k.sources||[]).map((B,X)=>T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx("input",{value:B.link,onChange:te=>{const ue=[...k.sources||[]];ue[X].link=te.target.value,Ct(W,"sources",ue)},placeholder:`Source link #${X+1}`,className:"border p-2 rounded w-full"}),T.jsx("button",{onClick:()=>{const te=(k.sources||[]).filter((ue,ye)=>ye!==X);Ct(W,"sources",te)},className:"text-red-600 text-sm hover:underline",children:""})]},X)),T.jsx("button",{onClick:()=>{const B=[...k.sources||[],{title:"",link:"",sourceName:""}];Ct(W,"sources",B)},className:"text-blue-600 text-sm hover:underline",children:" Add another link"})]})]}),T.jsx("div",{className:"mt-3",children:T.jsx(w_,{label:"Event Image (16:9)",image:k.image,onGenerate:async(B,X)=>{if(!n)throw new Error("Missing draft id");if(!k.id)throw new Error("Missing event id");await E_({targetType:"timelineEvent",draftId:n,eventId:k.id,prompt:B,negativePrompt:X}),await qe()}})}),T.jsx("textarea",{value:k.description||"",onChange:B=>{Ct(W,"description",B.target.value)},onSelect:B=>St(`timeline-${W}`,B.target),placeholder:"Description",rows:2,className:"border p-2 rounded w-full mb-2"}),T.jsx("button",{onClick:()=>on(`timeline-${W}`,k.description||"",B=>{const X=[...t.timeline];X[W]={...k,description:B},i({...t,timeline:X})}),className:"text-blue-600 text-xs hover:underline mb-2",children:" Link selected text"}),T.jsx("div",{className:"text-sm text-gray-700 mt-2",children:__(k.description??"")}),k.factCheck&&typeof k.factCheck.confidenceScore=="number"&&T.jsxs("div",{className:"mt-3 text-xs text-gray-700 border-t pt-2 border-dashed border-gray-200",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full font-semibold "+TN(k.factCheck.confidenceScore),children:[k.factCheck.confidenceScore,"% fact-check confidence"]}),T.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:EN(k.factCheck.confidenceScore)}})]}),k.factCheck.explanation&&T.jsx("p",{className:"leading-snug",children:k.factCheck.explanation}),k.factCheck.lastCheckedAt&&T.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:["Last checked:"," ",new Date(k.factCheck.lastCheckedAt).toLocaleString()]})]}),T.jsxs("div",{className:"mt-2",children:[T.jsx("h4",{className:"text-sm font-medium mb-1",children:"Context Explainers"}),(k.contexts||[]).map((B,X)=>T.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[T.jsx("input",{type:"text",value:B.term,onChange:te=>{const ue=[...k.contexts||[]];ue[X].term=te.target.value,Ct(W,"contexts",ue)},placeholder:"Term",className:"border p-1 rounded flex-1"}),T.jsx("input",{type:"text",value:B.explainer,onChange:te=>{const ue=[...k.contexts||[]];ue[X].explainer=te.target.value,Ct(W,"contexts",ue)},placeholder:"Explainer",className:"border p-1 rounded flex-[2]"}),T.jsx("button",{onClick:()=>{const te=(k.contexts||[]).filter((ue,ye)=>ye!==X);Ct(W,"contexts",te)},className:"text-red-600 text-xs hover:underline",children:""})]},X)),T.jsx("button",{onClick:()=>{const B=[...k.contexts||[],{term:"",explainer:""}];Ct(W,"contexts",B)},className:"text-blue-600 text-xs hover:underline",children:" Add term"})]}),T.jsx("button",{onClick:async()=>{try{h(!0);const B=await xE(k);if(!B?.length){alert("No contextual terms found for this event.");return}const X=[...k.contexts||[],...B];Ct(W,"contexts",X),alert(` Added ${B.length} contextual explainers for this event.`)}catch(B){console.error("GPT error (event contexts):",B),alert(" Failed to generate contexts for this event.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),T.jsx("button",{onClick:async()=>{const B=k.event?.trim(),X=k.description?.trim();if(!B||!X){alert("Please add an event title and description first.");return}const te={event:B,description:X,contexts:k.contexts||[]};if(!te.contexts.length){alert("Please add at least one term first.");return}try{h(!0);const{generateExplainersForEvent:ue}=await y_(async()=>{const{generateExplainersForEvent:ut}=await Promise.resolve().then(()=>v_);return{generateExplainersForEvent:ut}},void 0),ye=await ue(te);if(!ye.length){alert("No explainers returned.");return}const De=(te.contexts||[]).map(ut=>{const Tt=ye.find(Zt=>Zt.term.toLowerCase()===ut.term.toLowerCase());return Tt?{...ut,explainer:Tt.explainer}:ut});Ct(W,"contexts",De),alert(` Added ${ye.length} explainers.`)}catch(ue){console.error("GPT error:",ue),alert("Failed to generate explainers for this event.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-2 block",children:" Generate Explainers for this Event"}),T.jsxs("div",{className:"mt-3",children:[T.jsx("h4",{className:"text-sm font-medium mb-2",children:"Event FAQs"}),(k.faqs||[]).map((B,X)=>T.jsxs("div",{className:"flex flex-col md:flex-row gap-2 mb-2",children:[T.jsx("input",{type:"text",value:B.question||"",onChange:te=>{const ue=[...k.faqs||[]];ue[X]={...ue[X],question:te.target.value},Ct(W,"faqs",ue)},placeholder:"Question",className:"border p-2 rounded flex-1"}),T.jsx("textarea",{value:B.answer||"",onChange:te=>{const ue=[...k.faqs||[]];ue[X]={...ue[X],answer:te.target.value},Ct(W,"faqs",ue)},placeholder:"Answer",rows:2,className:"border p-2 rounded flex-[2]"}),T.jsx("button",{onClick:()=>{const te=(k.faqs||[]).filter((ue,ye)=>ye!==X);Ct(W,"faqs",te)},className:"text-red-600 text-sm hover:underline self-start",children:""})]},X)),T.jsx("button",{onClick:()=>{const B=[...k.faqs||[],{question:"",answer:""}];Ct(W,"faqs",B)},className:"text-blue-600 text-sm hover:underline",children:" Add FAQ"})]}),T.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Importance"}),T.jsxs("select",{value:k.significance,onChange:B=>Ct(W,"significance",Number(B.target.value)),className:"border p-2 rounded mb-2",children:[T.jsx("option",{value:1,children:"Low"}),T.jsx("option",{value:2,children:"Medium"}),T.jsx("option",{value:3,children:"High"})]}),T.jsxs("div",{className:"flex gap-4 items-center mt-2",children:[T.jsx("button",{onClick:()=>qr(W),className:"text-red-600 text-sm hover:underline",children:"Delete"}),T.jsx("button",{onClick:()=>En(W,k),className:"text-blue-600 text-sm hover:underline",children:" Fetch Top Sources"}),T.jsx("button",{onClick:async()=>{if(n)try{h(!0),await m_(n,W,t.timeline[W]),w(!1),alert(" Event saved!")}catch(B){console.error(B),alert(" Failed to save event.")}finally{h(!1)}},className:"text-green-600 text-sm hover:underline",children:" Save Event"})]}),k.sources&&k.sources.length>0&&T.jsxs("div",{className:"mt-3 border-t pt-2",children:[T.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Top Sources:"}),T.jsx("div",{className:"space-y-2",children:k.sources.map((B,X)=>T.jsxs("div",{className:"flex items-center space-x-3 border p-2 rounded-md hover:bg-gray-50",children:[(()=>{const te=vN(B.link),ue=_N(B.link),ye=wN(B.sourceName||B.title||"");return T.jsxs(T.Fragment,{children:[T.jsx("img",{src:te||"",className:"w-10 h-10 object-cover rounded bg-gray-100",onError:De=>{De.currentTarget.src!==ue?De.currentTarget.src=ue||"":De.currentTarget.style.display="none"},style:{display:te?"block":"none"},alt:B.sourceName||"source"}),!te&&T.jsx("div",{className:"w-10 h-10 rounded bg-gray-800 text-white flex items-center justify-center",children:ye})]})})(),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("a",{href:B.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium hover:underline",children:B.title}),T.jsx("span",{className:"text-gray-500 text-xs",children:B.sourceName})]})]},X))})]})]})]},W))})})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Analysis"}),T.jsx("button",{onClick:Pr,disabled:bt,className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:bt?"Generating":" Generate Analysis"})]}),F&&T.jsx("div",{className:"space-y-4",children:["stakeholders","faqs","future"].map(k=>{const W=t.analysis,B=W?.[k]||[],X={stakeholders:"Stakeholders",faqs:"FAQs",future:"Future Questions"};return T.jsxs("details",{className:"border rounded-lg p-3 group",children:[T.jsxs("summary",{className:"cursor-pointer font-semibold text-blue-700 select-none flex justify-between items-center",children:[X[k],T.jsx("span",{className:"text-gray-500 group-open:rotate-90 transition-transform",children:""})]}),T.jsxs("div",{className:"mt-2 space-y-3",children:[T.jsxs("button",{onClick:()=>{const te={...t},ue=W?.[k]||[],ye=k==="stakeholders"?{name:"",detail:""}:{question:"",answer:""};te.analysis={...W,[k]:[...ue,ye]},i(te)},className:"text-sm text-green-700 hover:underline",children:[" Add ",X[k].slice(0,-1)]}),T.jsx("button",{onClick:async()=>{const te=t.analysis?.[k]||[];if(!te.length){alert("No items to analyze yet.");return}try{h(!0);const ue=await CE(k,te);if(!ue?.length){alert("No contextual terms found.");return}const ye={...t.analysis||{}},De=[...ye.contexts||[],...ue];ye.contexts=De,i({...t,analysis:ye}),alert(` Added ${ue.length} contextual explainers from ${k}.`)}catch(ue){console.error("GPT error (analysis contexts):",ue),alert(" Failed to generate analysis contexts.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),B.length===0?T.jsxs("p",{className:"text-sm text-gray-500",children:["No ",X[k]," yet."]}):T.jsx("ul",{className:"space-y-2",children:B.map((te,ue)=>T.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border text-sm space-y-2",children:[k==="stakeholders"?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:te.name,onChange:ye=>{const De={...t};De.analysis[k][ue].name=ye.target.value,i(De)},onSelect:ye=>St(`stakeholder-name-${ue}`,ye.target),placeholder:"Name",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>on(`stakeholder-name-${ue}`,te.name||"",ye=>{const De={...t};De.analysis[k][ue].name=ye,i(De)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),T.jsx("textarea",{value:te.detail,onChange:ye=>{const De={...t};De.analysis[k][ue].detail=ye.target.value,i(De)},onSelect:ye=>St(`stakeholder-detail-${ue}`,ye.target),placeholder:"Detail",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>on(`stakeholder-detail-${ue}`,te.detail||"",ye=>{const De={...t};De.analysis[k][ue].detail=ye,i(De)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}):T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:te.question,onChange:ye=>{const De={...t};De.analysis[k][ue].question=ye.target.value,i(De)},onSelect:ye=>St(`${k}-question-${ue}`,ye.target),placeholder:"Question",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>on(`${k}-question-${ue}`,te.question||"",ye=>{const De={...t};De.analysis[k][ue].question=ye,i(De)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),T.jsx("textarea",{value:te.answer,onChange:ye=>{const De={...t};De.analysis[k][ue].answer=ye.target.value,i(De)},onSelect:ye=>St(`${k}-answer-${ue}`,ye.target),placeholder:"Answer",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>on(`${k}-answer-${ue}`,te.answer||"",ye=>{const De={...t};De.analysis[k][ue].answer=ye,i(De)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}),T.jsx("button",{onClick:()=>{const ye={...t},De=[...W?.[k]||[]];De.splice(ue,1),ye.analysis={...W,[k]:De},i(ye)},className:"text-xs text-red-600 hover:underline",children:"Delete"})]},ue))})]})]},k)})}),T.jsxs("div",{className:"mt-6 border-t pt-4",children:[T.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analysis Context Explainers"}),T.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"These terms will be highlighted within Stakeholders, FAQs, and Future sections."}),(t.analysis?.contexts||[]).map((k,W)=>T.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[T.jsx("input",{type:"text",value:k.term,onChange:B=>{const X={...t.analysis||{}},te=[...X.contexts||[]];te[W]={...te[W],term:B.target.value},X.contexts=te,i({...t,analysis:X})},placeholder:"Term",className:"border p-2 rounded flex-1"}),T.jsx("input",{type:"text",value:k.explainer,onChange:B=>{const X={...t.analysis||{}},te=[...X.contexts||[]];te[W]={...te[W],explainer:B.target.value},X.contexts=te,i({...t,analysis:X})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),T.jsx("button",{type:"button",onClick:()=>{const B={...t.analysis||{}},X=(B.contexts||[]).filter((te,ue)=>ue!==W);B.contexts=X,i({...t,analysis:B})},className:"text-red-600 text-sm hover:underline",children:""})]},W)),T.jsx("button",{type:"button",onClick:()=>{const k={...t.analysis||{}};k.contexts=[...k.contexts||[],{term:"",explainer:""}],i({...t,analysis:k})},className:"text-blue-600 text-sm hover:underline",children:" Add analysis context term"})]}),T.jsx("button",{onClick:async()=>{if(n)try{await Gn(n,{analysis:t.analysis}),w(!1),alert(" Analysis saved successfully!")}catch(k){console.error(k),alert(" Failed to save analysis: "+k.message)}},className:"mt-4 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:" Save Analysis"})]})]}),V&&T.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-4",children:[T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Apply Fact-Check Results"}),T.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Paste the JSON array returned by ChatGPT. Each item should include",T.jsx("code",{className:"bg-gray-100 px-1 mx-1 rounded",children:"id"}),",",T.jsx("code",{className:"bg-gray-100 px-1 mx-1 rounded",children:"confidenceScore"}),"and",T.jsx("code",{className:"bg-gray-100 px-1 mx-1 rounded",children:"confidenceExplanation"}),"."]}),T.jsx("textarea",{className:"w-full h-64 border rounded p-2 font-mono text-xs",value:H,onChange:k=>pe(k.target.value),placeholder:'[{"id":"event-1","confidenceScore":88,"confidenceExplanation":"..."}]'}),T.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[T.jsx("button",{type:"button",className:"px-3 py-1 rounded border text-sm",onClick:()=>{j(!1),pe("")},children:"Cancel"}),T.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white text-sm",onClick:Ze,disabled:c,children:c?"Applying...":"Apply"})]})]})})]}):T.jsx("div",{className:"p-6 text-red-500",children:"Draft not found"})}function IN(){const n={gpt:{timelinePrompt:`You are a precise news editor.
Given a topic, generate a concise chronological timeline of 1015 key events.
Each event must include:
- date (YYYY-MM-DD)
- short event title
- 12 sentence factual description
- significance (1=low, 2=medium, 3=high)
Return only valid JSON with key "timeline".`,analysisPrompt:`You are a political analyst creating structured insights.
Given a topic and overview, produce three sections:
1. stakeholders  list key people/institutions and their roles.
2. faqs  questions readers might have with concise answers.
3. future  forward-looking questions with reasoned answers.
Keep all responses factual, under 50 words each. Return valid JSON with key "analysis".`},serper:{prompt:"title"},sonar:{model:"sonar",timelineSystemPrompt:`You are a meticulous news researcher.
You must:
- Use live web search.
- Produce an exhaustive but concise chronological timeline.
- Focus on distinct, real-world events (not analysis).
- Include both major and important minor events if they move the story.
- Deduplicate overlapping coverage.
- Attach multiple reliable sources per event.
- Prefer recognized and reliable outlets across geographies.
- Output VALID JSON ONLY, no commentary, no markdown.`,timelineUserPromptTemplate:`Generate a chronological news timeline.

Title: {{title}}

Summary / overview:
{{overview}}

IMPORTANT RULES:
- Maximum events: 1020
- Keep descriptions under 5 lines each
- Merge micro-events where necessary
- DO NOT use ellipses (...). DO NOT include trailing commas.
- DO NOT output anything except JSON.

JSON FORMAT (MANDATORY):
{
  "events": [
    {
      "date": "YYYY-MM-DD or null",
      "title": "string",
      "description": "string",
      "importance": 1,
      "sources": [
        {
          "title": "string",
          "url": "string",
          "sourceName": "string",
          "publishedAt": "YYYY-MM-DD or null",
          "imageUrl": "string or null"
        }
      ]
    }
  ]
}`}},[e,t]=Y.useState(n),[i,o]=Y.useState(!0),[l,c]=Y.useState(!1);Y.useEffect(()=>{(async()=>{try{const p=Br(Cr,"settings","global"),y=await nu(p);if(y.exists()){const _=y.data();t({gpt:{timelinePrompt:_?.gpt?.timelinePrompt??n.gpt.timelinePrompt,analysisPrompt:_?.gpt?.analysisPrompt??n.gpt.analysisPrompt},serper:{prompt:_?.serper?.prompt??n.serper.prompt},sonar:{model:_?.sonar?.model??n.sonar.model,timelineSystemPrompt:_?.sonar?.timelineSystemPrompt??n.sonar.timelineSystemPrompt,timelineUserPromptTemplate:_?.sonar?.timelineUserPromptTemplate??n.sonar.timelineUserPromptTemplate}})}}catch(p){console.error(" Failed to load prompts:",p)}finally{o(!1)}})()},[]);const h=async()=>{try{c(!0);const p=Br(Cr,"settings","global");await Xp(p,e,{merge:!0}),alert(" Prompts saved successfully!")}catch(p){console.error(p),alert(" Failed to save prompts")}finally{c(!1)}};return i?T.jsx("div",{className:"p-6",children:"Loading..."}):T.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[T.jsx("h1",{className:"text-3xl font-bold",children:" Prompt Editor"}),T.jsx("p",{className:"text-gray-600 mb-4",children:"Edit the default text templates used by GPT, Sonar, and Serper."}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Timeline Prompt"}),T.jsx("textarea",{value:e.gpt.timelinePrompt,onChange:p=>t({...e,gpt:{...e.gpt,timelinePrompt:p.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Analysis Prompt"}),T.jsx("textarea",{value:e.gpt.analysisPrompt,onChange:p=>t({...e,gpt:{...e.gpt,analysisPrompt:p.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Perplexity Sonar  Timeline Prompts"}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),T.jsx("input",{value:e.sonar.model,onChange:p=>t({...e,sonar:{...e.sonar,model:p.target.value}}),className:"w-full border rounded p-2 text-sm",placeholder:"sonar (recommended)"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeline System Prompt"}),T.jsx("textarea",{value:e.sonar.timelineSystemPrompt,onChange:p=>t({...e,sonar:{...e.sonar,timelineSystemPrompt:p.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeline User Prompt Template"}),T.jsxs("p",{className:"text-sm text-gray-600",children:["Use placeholders: ",T.jsx("code",{children:"{{title}}"})," and"," ",T.jsx("code",{children:"{{overview}}"}),"."]}),T.jsx("textarea",{value:e.sonar.timelineUserPromptTemplate,onChange:p=>t({...e,sonar:{...e.sonar,timelineUserPromptTemplate:p.target.value}}),className:"w-full border rounded p-3 h-56 text-sm"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Serper  Search Prompt"}),T.jsx("textarea",{value:e.serper.prompt,onChange:p=>t({...e,serper:{prompt:p.target.value}}),className:"w-full border rounded p-3 h-24 text-sm"})]}),T.jsx("button",{onClick:h,disabled:l,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50",children:l?"Saving":" Save All Prompts"})]})}function xN(){const[n,e]=Y.useState(""),[t,i]=Y.useState(""),[o,l]=Y.useState(""),[c,h]=Y.useState("login"),[p,y]=Y.useState(!1),[_,w]=Y.useState(null),S=async()=>{if(w(null),!n||!t){w("Please enter an email and password.");return}if(c==="signup"&&t!==o){w("Passwords do not match.");return}try{y(!0),c==="login"?await l1(Nl,n,t):await a1(Nl,n,t),window.location.href="/app"}catch(P){w(P.message||"Authentication failed.")}finally{y(!1)}};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:T.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow p-8",children:[T.jsx("h1",{className:"text-2xl font-bold mb-4",children:c==="login"?"CMS Login":"Create CMS Account"}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("input",{placeholder:"Email",type:"email",value:n,onChange:P=>e(P.target.value),className:"border p-2 w-full rounded"}),T.jsx("input",{placeholder:"Password",type:"password",value:t,onChange:P=>i(P.target.value),className:"border p-2 w-full rounded"}),c==="signup"&&T.jsx("input",{placeholder:"Confirm Password",type:"password",value:o,onChange:P=>l(P.target.value),className:"border p-2 w-full rounded"})]}),_&&T.jsx("p",{className:"text-red-600 text-sm mt-3",children:_}),T.jsx("button",{type:"button",onClick:S,disabled:p,className:"mt-4 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-60",children:p?"Please wait":c==="login"?"Login":"Sign Up"}),T.jsxs("p",{className:"text-sm text-gray-600 mt-4 text-center",children:[c==="login"?"Need an account?":"Already have an account?"," ",T.jsx("button",{type:"button",onClick:()=>h(P=>P==="login"?"signup":"login"),className:"text-blue-600 hover:underline font-medium",children:c==="login"?"Sign Up":"Log In"})]})]})})}const CN=dI([{path:"/login",element:T.jsx(xN,{})},{path:"/app",element:T.jsx(oN,{}),children:[{index:!0,element:T.jsxs("div",{className:"p-6",children:[T.jsx("h1",{className:"text-3xl font-bold",children:"Welcome to WaitWhat? CMS"}),T.jsx("p",{className:"text-gray-600 mt-2",children:"Use the sidebar to manage Theme and Story drafts, or adjust prompts in the Prompt Lab."})]})},{path:"drafts/themes",element:T.jsx(lN,{})},{path:"drafts/stories",element:T.jsx(uN,{})},{path:"drafts/:id",element:T.jsx(SN,{})},{path:"promptlab",element:T.jsx(IN,{})}]},{path:"*",element:T.jsx(nI,{to:"/login",replace:!0})}]);jT.createRoot(document.getElementById("root")).render(T.jsx(I_.StrictMode,{children:T.jsx(_I,{router:CN})}));
