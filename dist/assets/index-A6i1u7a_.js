function m_(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Qf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xh={exports:{}},fl={},Zh={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function TT(){if(sy)return Xe;sy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,U={};function H(j,X,me){this.props=j,this.context=X,this.refs=U,this.updater=me||P}H.prototype.isReactComponent={},H.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},H.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function fe(){}fe.prototype=H.prototype;function ee(j,X,me){this.props=j,this.context=X,this.refs=U,this.updater=me||P}var ce=ee.prototype=new fe;ce.constructor=ee,L(ce,H.prototype),ce.isPureReactComponent=!0;var pe=Array.isArray,Ue=Object.prototype.hasOwnProperty,Fe={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(j,X,me){var $e,Oe={},z=null,K=null;if(X!=null)for($e in X.ref!==void 0&&(K=X.ref),X.key!==void 0&&(z=""+X.key),X)Ue.call(X,$e)&&!S.hasOwnProperty($e)&&(Oe[$e]=X[$e]);var q=arguments.length-2;if(q===1)Oe.children=me;else if(1<q){for(var Z=Array(q),le=0;le<q;le++)Z[le]=arguments[le+2];Oe.children=Z}if(j&&j.defaultProps)for($e in q=j.defaultProps,q)Oe[$e]===void 0&&(Oe[$e]=q[$e]);return{$$typeof:n,type:j,key:z,ref:K,props:Oe,_owner:Fe.current}}function A(j,X){return{$$typeof:n,type:j.type,key:X,ref:j.ref,props:j.props,_owner:j._owner}}function N(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function O(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(me){return X[me]})}var V=/\/+/g;function k(j,X){return typeof j=="object"&&j!==null&&j.key!=null?O(""+j.key):X.toString(36)}function Ke(j,X,me,$e,Oe){var z=typeof j;(z==="undefined"||z==="boolean")&&(j=null);var K=!1;if(j===null)K=!0;else switch(z){case"string":case"number":K=!0;break;case"object":switch(j.$$typeof){case n:case e:K=!0}}if(K)return K=j,Oe=Oe(K),j=$e===""?"."+k(K,0):$e,pe(Oe)?(me="",j!=null&&(me=j.replace(V,"$&/")+"/"),Ke(Oe,X,me,"",function(le){return le})):Oe!=null&&(N(Oe)&&(Oe=A(Oe,me+(!Oe.key||K&&K.key===Oe.key?"":(""+Oe.key).replace(V,"$&/")+"/")+j)),X.push(Oe)),1;if(K=0,$e=$e===""?".":$e+":",pe(j))for(var q=0;q<j.length;q++){z=j[q];var Z=$e+k(z,q);K+=Ke(z,X,me,Z,Oe)}else if(Z=T(j),typeof Z=="function")for(j=Z.call(j),q=0;!(z=j.next()).done;)z=z.value,Z=$e+k(z,q++),K+=Ke(z,X,me,Z,Oe);else if(z==="object")throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return K}function lt(j,X,me){if(j==null)return j;var $e=[],Oe=0;return Ke(j,$e,"","",function(z){return X.call(me,z,Oe++)}),$e}function vt(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(me){(j._status===0||j._status===-1)&&(j._status=1,j._result=me)},function(me){(j._status===0||j._status===-1)&&(j._status=2,j._result=me)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var it={current:null},oe={transition:null},ke={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:oe,ReactCurrentOwner:Fe};function ge(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:lt,forEach:function(j,X,me){lt(j,function(){X.apply(this,arguments)},me)},count:function(j){var X=0;return lt(j,function(){X++}),X},toArray:function(j){return lt(j,function(X){return X})||[]},only:function(j){if(!N(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Xe.Component=H,Xe.Fragment=t,Xe.Profiler=o,Xe.PureComponent=ee,Xe.StrictMode=i,Xe.Suspense=p,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,Xe.act=ge,Xe.cloneElement=function(j,X,me){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var $e=L({},j.props),Oe=j.key,z=j.ref,K=j._owner;if(X!=null){if(X.ref!==void 0&&(z=X.ref,K=Fe.current),X.key!==void 0&&(Oe=""+X.key),j.type&&j.type.defaultProps)var q=j.type.defaultProps;for(Z in X)Ue.call(X,Z)&&!S.hasOwnProperty(Z)&&($e[Z]=X[Z]===void 0&&q!==void 0?q[Z]:X[Z])}var Z=arguments.length-2;if(Z===1)$e.children=me;else if(1<Z){q=Array(Z);for(var le=0;le<Z;le++)q[le]=arguments[le+2];$e.children=q}return{$$typeof:n,type:j.type,key:Oe,ref:z,props:$e,_owner:K}},Xe.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Xe.createElement=C,Xe.createFactory=function(j){var X=C.bind(null,j);return X.type=j,X},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(j){return{$$typeof:h,render:j}},Xe.isValidElement=N,Xe.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:vt}},Xe.memo=function(j,X){return{$$typeof:y,type:j,compare:X===void 0?null:X}},Xe.startTransition=function(j){var X=oe.transition;oe.transition={};try{j()}finally{oe.transition=X}},Xe.unstable_act=ge,Xe.useCallback=function(j,X){return it.current.useCallback(j,X)},Xe.useContext=function(j){return it.current.useContext(j)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(j){return it.current.useDeferredValue(j)},Xe.useEffect=function(j,X){return it.current.useEffect(j,X)},Xe.useId=function(){return it.current.useId()},Xe.useImperativeHandle=function(j,X,me){return it.current.useImperativeHandle(j,X,me)},Xe.useInsertionEffect=function(j,X){return it.current.useInsertionEffect(j,X)},Xe.useLayoutEffect=function(j,X){return it.current.useLayoutEffect(j,X)},Xe.useMemo=function(j,X){return it.current.useMemo(j,X)},Xe.useReducer=function(j,X,me){return it.current.useReducer(j,X,me)},Xe.useRef=function(j){return it.current.useRef(j)},Xe.useState=function(j){return it.current.useState(j)},Xe.useSyncExternalStore=function(j,X,me){return it.current.useSyncExternalStore(j,X,me)},Xe.useTransition=function(){return it.current.useTransition()},Xe.version="18.3.1",Xe}var oy;function Yf(){return oy||(oy=1,Zh.exports=TT()),Zh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function IT(){if(ay)return fl;ay=1;var n=Yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,y){var _,E={},T=null,P=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(h&&h.defaultProps)for(_ in p=h.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:h,key:T,ref:P,props:E,_owner:o.current}}return fl.Fragment=t,fl.jsx=c,fl.jsxs=c,fl}var ly;function ST(){return ly||(ly=1,Xh.exports=IT()),Xh.exports}var R=ST(),J=Yf();const g_=Qf(J),CT=m_({__proto__:null,default:g_},[J]);var ac={},ef={exports:{}},Un={},tf={exports:{}},nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function PT(){return uy||(uy=1,(function(n){function e(oe,ke){var ge=oe.length;oe.push(ke);e:for(;0<ge;){var j=ge-1>>>1,X=oe[j];if(0<o(X,ke))oe[j]=ke,oe[ge]=X,ge=j;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ke=oe[0],ge=oe.pop();if(ge!==ke){oe[0]=ge;e:for(var j=0,X=oe.length,me=X>>>1;j<me;){var $e=2*(j+1)-1,Oe=oe[$e],z=$e+1,K=oe[z];if(0>o(Oe,ge))z<X&&0>o(K,Oe)?(oe[j]=K,oe[z]=ge,j=z):(oe[j]=Oe,oe[$e]=ge,j=$e);else if(z<X&&0>o(K,ge))oe[j]=K,oe[z]=ge,j=z;else break e}}return ke}function o(oe,ke){var ge=oe.sortIndex-ke.sortIndex;return ge!==0?ge:oe.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],y=[],_=1,E=null,T=3,P=!1,L=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(oe){for(var ke=t(y);ke!==null;){if(ke.callback===null)i(y);else if(ke.startTime<=oe)i(y),ke.sortIndex=ke.expirationTime,e(p,ke);else break;ke=t(y)}}function pe(oe){if(U=!1,ce(oe),!L)if(t(p)!==null)L=!0,vt(Ue);else{var ke=t(y);ke!==null&&it(pe,ke.startTime-oe)}}function Ue(oe,ke){L=!1,U&&(U=!1,fe(C),C=-1),P=!0;var ge=T;try{for(ce(ke),E=t(p);E!==null&&(!(E.expirationTime>ke)||oe&&!O());){var j=E.callback;if(typeof j=="function"){E.callback=null,T=E.priorityLevel;var X=j(E.expirationTime<=ke);ke=n.unstable_now(),typeof X=="function"?E.callback=X:E===t(p)&&i(p),ce(ke)}else i(p);E=t(p)}if(E!==null)var me=!0;else{var $e=t(y);$e!==null&&it(pe,$e.startTime-ke),me=!1}return me}finally{E=null,T=ge,P=!1}}var Fe=!1,S=null,C=-1,A=5,N=-1;function O(){return!(n.unstable_now()-N<A)}function V(){if(S!==null){var oe=n.unstable_now();N=oe;var ke=!0;try{ke=S(!0,oe)}finally{ke?k():(Fe=!1,S=null)}}else Fe=!1}var k;if(typeof ee=="function")k=function(){ee(V)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,lt=Ke.port2;Ke.port1.onmessage=V,k=function(){lt.postMessage(null)}}else k=function(){H(V,0)};function vt(oe){S=oe,Fe||(Fe=!0,k())}function it(oe,ke){C=H(function(){oe(n.unstable_now())},ke)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){L||P||(L=!0,vt(Ue))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var ke=3;break;default:ke=T}var ge=T;T=ke;try{return oe()}finally{T=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ke){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ge=T;T=oe;try{return ke()}finally{T=ge}},n.unstable_scheduleCallback=function(oe,ke,ge){var j=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?j+ge:j):ge=j,oe){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ge+X,oe={id:_++,callback:ke,priorityLevel:oe,startTime:ge,expirationTime:X,sortIndex:-1},ge>j?(oe.sortIndex=ge,e(y,oe),t(p)===null&&oe===t(y)&&(U?(fe(C),C=-1):U=!0,it(pe,ge-j))):(oe.sortIndex=X,e(p,oe),L||P||(L=!0,vt(Ue))),oe},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(oe){var ke=T;return function(){var ge=T;T=ke;try{return oe.apply(this,arguments)}finally{T=ge}}}})(nf)),nf}var cy;function RT(){return cy||(cy=1,tf.exports=PT()),tf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function AT(){if(dy)return Un;dy=1;var n=Yf(),e=RT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function T(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function P(r,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function L(r,s,a,d){if(s===null||typeof s>"u"||P(r,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,a,d,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){H[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];H[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){H[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){H[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){H[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){H[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){H[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){H[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){H[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var fe=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(fe,ee);H[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(fe,ee);H[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(fe,ee);H[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){H[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),H.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){H[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function ce(r,s,a,d){var f=H.hasOwnProperty(s)?H[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,f,d)&&(a=null),d||f===null?T(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,s,a):r.setAttribute(s,a))))}var pe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ue=Symbol.for("react.element"),Fe=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),vt=Symbol.for("react.lazy"),it=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ke(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var ge=Object.assign,j;function X(r){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var me=!1;function $e(r,s){if(!r||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var d=Q}Reflect.construct(r,[],s)}else{try{s.call()}catch(Q){d=Q}r.call(s.prototype)}else{try{throw Error()}catch(Q){d=Q}r()}}catch(Q){if(Q&&d&&typeof Q.stack=="string"){for(var f=Q.stack.split(`
`),g=d.stack.split(`
`),w=f.length-1,x=g.length-1;1<=w&&0<=x&&f[w]!==g[x];)x--;for(;1<=w&&0<=x;w--,x--)if(f[w]!==g[x]){if(w!==1||x!==1)do if(w--,x--,0>x||f[w]!==g[x]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=x);break}}}finally{me=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?X(r):""}function Oe(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=$e(r.type,!1),r;case 11:return r=$e(r.type.render,!1),r;case 1:return r=$e(r.type,!0),r;default:return""}}function z(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case Fe:return"Portal";case A:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case Ke:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case V:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case lt:return s=r.displayName||null,s!==null?s:z(r.type)||"Memo";case vt:s=r._payload,r=r._init;try{return z(r(s))}catch{}}return null}function K(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function q(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Z(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function le(r){var s=Z(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){d=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function _e(r){r._valueTracker||(r._valueTracker=le(r))}function ye(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return r&&(d=Z(r)?r.checked?"true":"false":r.value),r=d,r!==a?(s.setValue(r),!0):!1}function be(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ht(r,s){var a=s.checked;return ge({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Et(r,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=q(s.value!=null?s.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Mt(r,s){s=s.checked,s!=null&&ce(r,"checked",s,!1)}function Vr(r,s){Mt(r,s);var a=q(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?di(r,s.type,a):s.hasOwnProperty("defaultValue")&&di(r,s.type,q(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ro(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function di(r,s,a){(s!=="number"||be(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var gr=Array.isArray;function yr(r,s,a,d){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+q(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Fs(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ge({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ui(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:q(a)}}function An(r,s){var a=q(s.value),d=q(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function vr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Ot(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Ot(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Zt,Sn=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,d,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Zt=Zt||document.createElement("div"),Zt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function _r(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hi=["Webkit","ms","Moz","O"];Object.keys(rr).forEach(function(r){hi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),rr[s]=rr[r]})});function xn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||rr.hasOwnProperty(r)&&rr[r]?(""+s).trim():s+"px"}function ji(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=xn(a,s[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var zi=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bi(r,s){if(s){if(zi[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Us(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mr=null;function wr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var fi=null,pn=null,kn=null;function $i(r){if(r=Xa(r)){if(typeof fi!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Tu(s),fi(r.stateNode,r.type,s))}}function Hn(r){pn?kn?kn.push(r):kn=[r]:pn=r}function js(){if(pn){var r=pn,s=kn;if(kn=pn=null,$i(r),s)for(r=0;r<s.length;r++)$i(s[r])}}function Fr(r,s){return r(s)}function Ur(){}var Nn=!1;function zs(r,s,a){if(Nn)return r(s,a);Nn=!0;try{return Fr(r,s,a)}finally{Nn=!1,(pn!==null||kn!==null)&&(Ur(),js())}}function kt(r,s){var a=r.stateNode;if(a===null)return null;var d=Tu(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var b=!1;if(h)try{var F={};Object.defineProperty(F,"passive",{get:function(){b=!0}}),window.addEventListener("test",F,F),window.removeEventListener("test",F,F)}catch{b=!1}function G(r,s,a,d,f,g,w,x,D){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(a,Q)}catch(se){this.onError(se)}}var ne=!1,he=null,Se=!1,Le=null,Ce={onError:function(r){ne=!0,he=r}};function Ie(r,s,a,d,f,g,w,x,D){ne=!1,he=null,G.apply(Ce,arguments)}function we(r,s,a,d,f,g,w,x,D){if(Ie.apply(this,arguments),ne){if(ne){var Q=he;ne=!1,he=null}else throw Error(t(198));Se||(Se=!0,Le=Q)}}function Ee(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function je(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function We(r){if(Ee(r)!==r)throw Error(t(188))}function Lt(r){var s=r.alternate;if(!s){if(s=Ee(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return We(f),r;if(g===d)return We(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var w=!1,x=f.child;x;){if(x===a){w=!0,a=f,d=g;break}if(x===d){w=!0,d=f,a=g;break}x=x.sibling}if(!w){for(x=g.child;x;){if(x===a){w=!0,a=g,d=f;break}if(x===d){w=!0,d=g,a=f;break}x=x.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ct(r){return r=Lt(r),r!==null?Je(r):null}function Je(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Je(r);if(s!==null)return s;r=r.sibling}return null}var mt=e.unstable_scheduleCallback,ir=e.unstable_cancelCallback,jr=e.unstable_shouldYield,Wn=e.unstable_requestPaint,Ze=e.unstable_now,Hi=e.unstable_getCurrentPriorityLevel,qn=e.unstable_ImmediatePriority,mn=e.unstable_UserBlockingPriority,on=e.unstable_NormalPriority,zr=e.unstable_LowPriority,et=e.unstable_IdlePriority,ft=null,jt=null;function Br(r){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:Ao,sr=Math.log,Bs=Math.LN2;function Ao(r){return r>>>=0,r===0?32:31-(sr(r)/Bs|0)|0}var xo=64,ko=4194304;function Wi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function $s(r,s){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var x=w&~f;x!==0?d=Wi(x):(g&=w,g!==0&&(d=Wi(g)))}else w=a&~f,w!==0?d=Wi(w):g!==0&&(d=Wi(g));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)a=31-tt(s),f=1<<a,d|=r[a],s&=~f;return d}function Ad(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(r,s){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-tt(g),x=1<<w,D=f[w];D===-1?((x&a)===0||(x&d)!==0)&&(f[w]=Ad(x,s)):D<=s&&(r.expiredLanes|=x),g&=~x}}function Gn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Hs(){var r=xo;return xo<<=1,(xo&4194240)===0&&(xo=64),r}function qi(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Gi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-tt(s),r[s]=a}function _t(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-tt(a),g=1<<f;s[f]=0,d[f]=-1,r[f]=-1,a&=~g}}function Ki(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var d=31-tt(a),f=1<<d;f&s|r[d]&s&&(r[d]|=s),a&=~f}}var st=0;function Qi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var tu,No,nu,ru,iu,Ma=!1,$r=[],an=null,Er=null,Tr=null,Yi=new Map,or=new Map,Hr=[],xd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(r,s){switch(r){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Yi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":or.delete(s.pointerId)}}function bn(r,s,a,d,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Xa(s),s!==null&&No(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function kd(r,s,a,d,f){switch(s){case"focusin":return an=bn(an,r,s,a,d,f),!0;case"dragenter":return Er=bn(Er,r,s,a,d,f),!0;case"mouseover":return Tr=bn(Tr,r,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return Yi.set(g,bn(Yi.get(g)||null,r,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,or.set(g,bn(or.get(g)||null,r,s,a,d,f)),!0}return!1}function ou(r){var s=Qs(r.target);if(s!==null){var a=Ee(s);if(a!==null){if(s=a.tag,s===13){if(s=je(a),s!==null){r.blockedOn=s,iu(r.priority,function(){nu(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function mi(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=bo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);Mr=d,a.target.dispatchEvent(d),Mr=null}else return s=Xa(a),s!==null&&No(s),r.blockedOn=a,!1;s.shift()}return!0}function Ws(r,s,a){mi(r)&&a.delete(s)}function au(){Ma=!1,an!==null&&mi(an)&&(an=null),Er!==null&&mi(Er)&&(Er=null),Tr!==null&&mi(Tr)&&(Tr=null),Yi.forEach(Ws),or.forEach(Ws)}function Ir(r,s){r.blockedOn===s&&(r.blockedOn=null,Ma||(Ma=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,au)))}function Sr(r){function s(f){return Ir(f,r)}if(0<$r.length){Ir($r[0],r);for(var a=1;a<$r.length;a++){var d=$r[a];d.blockedOn===r&&(d.blockedOn=null)}}for(an!==null&&Ir(an,r),Er!==null&&Ir(Er,r),Tr!==null&&Ir(Tr,r),Yi.forEach(s),or.forEach(s),a=0;a<Hr.length;a++)d=Hr[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<Hr.length&&(a=Hr[0],a.blockedOn===null);)ou(a),a.blockedOn===null&&Hr.shift()}var gi=pe.ReactCurrentBatchConfig,Ji=!0;function Pt(r,s,a,d){var f=st,g=gi.transition;gi.transition=null;try{st=1,Fa(r,s,a,d)}finally{st=f,gi.transition=g}}function Nd(r,s,a,d){var f=st,g=gi.transition;gi.transition=null;try{st=4,Fa(r,s,a,d)}finally{st=f,gi.transition=g}}function Fa(r,s,a,d){if(Ji){var f=bo(r,s,a,d);if(f===null)Bd(r,s,d,qs,a),su(r,d);else if(kd(f,r,s,a,d))d.stopPropagation();else if(su(r,d),s&4&&-1<xd.indexOf(r)){for(;f!==null;){var g=Xa(f);if(g!==null&&tu(g),g=bo(r,s,a,d),g===null&&Bd(r,s,d,qs,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else Bd(r,s,d,null,a)}}var qs=null;function bo(r,s,a,d){if(qs=null,r=wr(d),r=Qs(r),r!==null)if(s=Ee(r),s===null)r=null;else if(a=s.tag,a===13){if(r=je(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return qs=r,null}function Ua(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hi()){case qn:return 1;case mn:return 4;case on:case zr:return 16;case et:return 536870912;default:return 16}default:return 16}}var Kn=null,Do=null,Dn=null;function ja(){if(Dn)return Dn;var r,s=Do,a=s.length,d,f="value"in Kn?Kn.value:Kn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(d=1;d<=w&&s[a-d]===f[g-d];d++);return Dn=f.slice(r,1<d?1-d:void 0)}function Oo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Wr(){return!0}function za(){return!1}function ln(r){function s(a,d,f,g,w){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(a=r[x],this[x]=a?a(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wr:za,this.isPropagationStopped=za,this}return ge(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),s}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=ln(Cr),qr=ge({},Cr,{view:0,detail:0}),bd=ln(qr),Vo,yi,Xi,Gs=ge({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xi&&(Xi&&r.type==="mousemove"?(Vo=r.screenX-Xi.screenX,yi=r.screenY-Xi.screenY):yi=Vo=0,Xi=r),Vo)},movementY:function(r){return"movementY"in r?r.movementY:yi}}),Mo=ln(Gs),Ba=ge({},Gs,{dataTransfer:0}),lu=ln(Ba),Fo=ge({},qr,{relatedTarget:0}),Uo=ln(Fo),uu=ge({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),vi=ln(uu),cu=ge({},Cr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),du=ln(cu),hu=ge({},Cr,{data:0}),$a=ln(hu),jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=fu[r])?!!s[r]:!1}function Gr(){return pu}var u=ge({},qr,{key:function(r){if(r.key){var s=jo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Oo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(r){return r.type==="keypress"?Oo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Oo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=ln(u),v=ge({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=ln(v),B=ge({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),Y=ln(B),de=ge({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gt=ln(de),Kt=ge({},Gs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=ln(Kt),en=[9,13,27,32],zt=h&&"CompositionEvent"in window,ar=null;h&&"documentMode"in document&&(ar=document.documentMode);var Qn=h&&"TextEvent"in window&&!ar,Ks=h&&(!zt||ar&&8<ar&&11>=ar),zo=" ",Zp=!1;function em(r,s){switch(r){case"keyup":return en.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bo=!1;function _0(r,s){switch(r){case"compositionend":return tm(s);case"keypress":return s.which!==32?null:(Zp=!0,zo);case"textInput":return r=s.data,r===zo&&Zp?null:r;default:return null}}function w0(r,s){if(Bo)return r==="compositionend"||!zt&&em(r,s)?(r=ja(),Dn=Do=Kn=null,Bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ks&&s.locale!=="ko"?null:s.data;default:return null}}var E0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!E0[r.type]:s==="textarea"}function rm(r,s,a,d){Hn(d),s=_u(s,"onChange"),0<s.length&&(a=new Lo("onChange","change",null,a,d),r.push({event:a,listeners:s}))}var Ha=null,Wa=null;function T0(r){Em(r,0)}function mu(r){var s=Go(r);if(ye(s))return r}function I0(r,s){if(r==="change")return s}var im=!1;if(h){var Dd;if(h){var Od="oninput"in document;if(!Od){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),Od=typeof sm.oninput=="function"}Dd=Od}else Dd=!1;im=Dd&&(!document.documentMode||9<document.documentMode)}function om(){Ha&&(Ha.detachEvent("onpropertychange",am),Wa=Ha=null)}function am(r){if(r.propertyName==="value"&&mu(Wa)){var s=[];rm(s,Wa,r,wr(r)),zs(T0,s)}}function S0(r,s,a){r==="focusin"?(om(),Ha=s,Wa=a,Ha.attachEvent("onpropertychange",am)):r==="focusout"&&om()}function C0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return mu(Wa)}function P0(r,s){if(r==="click")return mu(s)}function R0(r,s){if(r==="input"||r==="change")return mu(s)}function A0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Pr=typeof Object.is=="function"?Object.is:A0;function qa(r,s){if(Pr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(s,f)||!Pr(r[f],s[f]))return!1}return!0}function lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function um(r,s){var a=lm(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=s&&d>=s)return{node:a,offset:s-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lm(a)}}function cm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?cm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function dm(){for(var r=window,s=be();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=be(r.document)}return s}function Ld(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function x0(r){var s=dm(),a=r.focusedElem,d=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&cm(a.ownerDocument.documentElement,a)){if(d!==null&&Ld(a)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!r.extend&&g>d&&(f=d,d=g,g=f),f=um(a,g);var w=um(a,d);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>d?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var k0=h&&"documentMode"in document&&11>=document.documentMode,$o=null,Vd=null,Ga=null,Md=!1;function hm(r,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Md||$o==null||$o!==be(d)||(d=$o,"selectionStart"in d&&Ld(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ga&&qa(Ga,d)||(Ga=d,d=_u(Vd,"onSelect"),0<d.length&&(s=new Lo("onSelect","select",null,s,a),r.push({event:s,listeners:d}),s.target=$o)))}function gu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Ho={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},Fd={},fm={};h&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function yu(r){if(Fd[r])return Fd[r];if(!Ho[r])return r;var s=Ho[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in fm)return Fd[r]=s[a];return r}var pm=yu("animationend"),mm=yu("animationiteration"),gm=yu("animationstart"),ym=yu("transitionend"),vm=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(r,s){vm.set(r,s),l(s,[r])}for(var Ud=0;Ud<_m.length;Ud++){var jd=_m[Ud],N0=jd.toLowerCase(),b0=jd[0].toUpperCase()+jd.slice(1);Zi(N0,"on"+b0)}Zi(pm,"onAnimationEnd"),Zi(mm,"onAnimationIteration"),Zi(gm,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(ym,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ka));function wm(r,s,a){var d=r.type||"unknown-event";r.currentTarget=a,we(d,s,void 0,r),r.currentTarget=null}function Em(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var w=d.length-1;0<=w;w--){var x=d[w],D=x.instance,Q=x.currentTarget;if(x=x.listener,D!==g&&f.isPropagationStopped())break e;wm(f,x,Q),g=D}else for(w=0;w<d.length;w++){if(x=d[w],D=x.instance,Q=x.currentTarget,x=x.listener,D!==g&&f.isPropagationStopped())break e;wm(f,x,Q),g=D}}}if(Se)throw r=Le,Se=!1,Le=null,r}function Tt(r,s){var a=s[Kd];a===void 0&&(a=s[Kd]=new Set);var d=r+"__bubble";a.has(d)||(Tm(s,r,2,!1),a.add(d))}function zd(r,s,a){var d=0;s&&(d|=4),Tm(a,r,d,s)}var vu="_reactListening"+Math.random().toString(36).slice(2);function Qa(r){if(!r[vu]){r[vu]=!0,i.forEach(function(a){a!=="selectionchange"&&(D0.has(a)||zd(a,!1,r),zd(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[vu]||(s[vu]=!0,zd("selectionchange",!1,s))}}function Tm(r,s,a,d){switch(Ua(s)){case 1:var f=Pt;break;case 4:f=Nd;break;default:f=Fa}a=f.bind(null,s,a,r),f=void 0,!b||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Bd(r,s,a,d,f){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var x=d.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(w===4)for(w=d.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;x!==null;){if(w=Qs(x),w===null)return;if(D=w.tag,D===5||D===6){d=g=w;continue e}x=x.parentNode}}d=d.return}zs(function(){var Q=g,se=wr(a),ae=[];e:{var ie=vm.get(r);if(ie!==void 0){var ve=Lo,Re=r;switch(r){case"keypress":if(Oo(a)===0)break e;case"keydown":case"keyup":ve=m;break;case"focusin":Re="focus",ve=Uo;break;case"focusout":Re="blur",ve=Uo;break;case"beforeblur":case"afterblur":ve=Uo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Y;break;case pm:case mm:case gm:ve=vi;break;case ym:ve=gt;break;case"scroll":ve=bd;break;case"wheel":ve=ot;break;case"copy":case"cut":case"paste":ve=du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=I}var Ae=(s&4)!==0,Ft=!Ae&&r==="scroll",$=Ae?ie!==null?ie+"Capture":null:ie;Ae=[];for(var M=Q,W;M!==null;){W=M;var ue=W.stateNode;if(W.tag===5&&ue!==null&&(W=ue,$!==null&&(ue=kt(M,$),ue!=null&&Ae.push(Ya(M,ue,W)))),Ft)break;M=M.return}0<Ae.length&&(ie=new ve(ie,Re,null,a,se),ae.push({event:ie,listeners:Ae}))}}if((s&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",ve=r==="mouseout"||r==="pointerout",ie&&a!==Mr&&(Re=a.relatedTarget||a.fromElement)&&(Qs(Re)||Re[_i]))break e;if((ve||ie)&&(ie=se.window===se?se:(ie=se.ownerDocument)?ie.defaultView||ie.parentWindow:window,ve?(Re=a.relatedTarget||a.toElement,ve=Q,Re=Re?Qs(Re):null,Re!==null&&(Ft=Ee(Re),Re!==Ft||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(ve=null,Re=Q),ve!==Re)){if(Ae=Mo,ue="onMouseLeave",$="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=I,ue="onPointerLeave",$="onPointerEnter",M="pointer"),Ft=ve==null?ie:Go(ve),W=Re==null?ie:Go(Re),ie=new Ae(ue,M+"leave",ve,a,se),ie.target=Ft,ie.relatedTarget=W,ue=null,Qs(se)===Q&&(Ae=new Ae($,M+"enter",Re,a,se),Ae.target=W,Ae.relatedTarget=Ft,ue=Ae),Ft=ue,ve&&Re)t:{for(Ae=ve,$=Re,M=0,W=Ae;W;W=Wo(W))M++;for(W=0,ue=$;ue;ue=Wo(ue))W++;for(;0<M-W;)Ae=Wo(Ae),M--;for(;0<W-M;)$=Wo($),W--;for(;M--;){if(Ae===$||$!==null&&Ae===$.alternate)break t;Ae=Wo(Ae),$=Wo($)}Ae=null}else Ae=null;ve!==null&&Im(ae,ie,ve,Ae,!1),Re!==null&&Ft!==null&&Im(ae,Ft,Re,Ae,!0)}}e:{if(ie=Q?Go(Q):window,ve=ie.nodeName&&ie.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ie.type==="file")var Ne=I0;else if(nm(ie))if(im)Ne=R0;else{Ne=C0;var Ve=S0}else(ve=ie.nodeName)&&ve.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ne=P0);if(Ne&&(Ne=Ne(r,Q))){rm(ae,Ne,a,se);break e}Ve&&Ve(r,ie,Q),r==="focusout"&&(Ve=ie._wrapperState)&&Ve.controlled&&ie.type==="number"&&di(ie,"number",ie.value)}switch(Ve=Q?Go(Q):window,r){case"focusin":(nm(Ve)||Ve.contentEditable==="true")&&($o=Ve,Vd=Q,Ga=null);break;case"focusout":Ga=Vd=$o=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,hm(ae,a,se);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":hm(ae,a,se)}var Me;if(zt)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Bo?em(r,a)&&(He="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Ks&&a.locale!=="ko"&&(Bo||He!=="onCompositionStart"?He==="onCompositionEnd"&&Bo&&(Me=ja()):(Kn=se,Do="value"in Kn?Kn.value:Kn.textContent,Bo=!0)),Ve=_u(Q,He),0<Ve.length&&(He=new $a(He,r,null,a,se),ae.push({event:He,listeners:Ve}),Me?He.data=Me:(Me=tm(a),Me!==null&&(He.data=Me)))),(Me=Qn?_0(r,a):w0(r,a))&&(Q=_u(Q,"onBeforeInput"),0<Q.length&&(se=new $a("onBeforeInput","beforeinput",null,a,se),ae.push({event:se,listeners:Q}),se.data=Me))}Em(ae,s)})}function Ya(r,s,a){return{instance:r,listener:s,currentTarget:a}}function _u(r,s){for(var a=s+"Capture",d=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=kt(r,a),g!=null&&d.unshift(Ya(r,g,f)),g=kt(r,s),g!=null&&d.push(Ya(r,g,f))),r=r.return}return d}function Wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Im(r,s,a,d,f){for(var g=s._reactName,w=[];a!==null&&a!==d;){var x=a,D=x.alternate,Q=x.stateNode;if(D!==null&&D===d)break;x.tag===5&&Q!==null&&(x=Q,f?(D=kt(a,g),D!=null&&w.unshift(Ya(a,D,x))):f||(D=kt(a,g),D!=null&&w.push(Ya(a,D,x)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var O0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function Sm(r){return(typeof r=="string"?r:""+r).replace(O0,`
`).replace(L0,"")}function wu(r,s,a){if(s=Sm(s),Sm(r)!==s&&a)throw Error(t(425))}function Eu(){}var $d=null,Hd=null;function Wd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qd=typeof setTimeout=="function"?setTimeout:void 0,V0=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(r){return Cm.resolve(null).then(r).catch(F0)}:qd;function F0(r){setTimeout(function(){throw r})}function Gd(r,s){var a=s,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),Sr(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);Sr(s)}function es(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Pm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var qo=Math.random().toString(36).slice(2),Kr="__reactFiber$"+qo,Ja="__reactProps$"+qo,_i="__reactContainer$"+qo,Kd="__reactEvents$"+qo,U0="__reactListeners$"+qo,j0="__reactHandles$"+qo;function Qs(r){var s=r[Kr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[_i]||a[Kr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Pm(r);r!==null;){if(a=r[Kr])return a;r=Pm(r)}return s}r=a,a=r.parentNode}return null}function Xa(r){return r=r[Kr]||r[_i],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Go(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Tu(r){return r[Ja]||null}var Qd=[],Ko=-1;function ts(r){return{current:r}}function It(r){0>Ko||(r.current=Qd[Ko],Qd[Ko]=null,Ko--)}function wt(r,s){Ko++,Qd[Ko]=r.current,r.current=s}var ns={},gn=ts(ns),On=ts(!1),Ys=ns;function Qo(r,s){var a=r.type.contextTypes;if(!a)return ns;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Ln(r){return r=r.childContextTypes,r!=null}function Iu(){It(On),It(gn)}function Rm(r,s,a){if(gn.current!==ns)throw Error(t(168));wt(gn,s),wt(On,a)}function Am(r,s,a){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,K(r)||"Unknown",f));return ge({},a,d)}function Su(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ns,Ys=gn.current,wt(gn,r),wt(On,On.current),!0}function xm(r,s,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=Am(r,s,Ys),d.__reactInternalMemoizedMergedChildContext=r,It(On),It(gn),wt(gn,r)):It(On),wt(On,a)}var wi=null,Cu=!1,Yd=!1;function km(r){wi===null?wi=[r]:wi.push(r)}function z0(r){Cu=!0,km(r)}function rs(){if(!Yd&&wi!==null){Yd=!0;var r=0,s=st;try{var a=wi;for(st=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}wi=null,Cu=!1}catch(f){throw wi!==null&&(wi=wi.slice(r+1)),mt(qn,rs),f}finally{st=s,Yd=!1}}return null}var Yo=[],Jo=0,Pu=null,Ru=0,lr=[],ur=0,Js=null,Ei=1,Ti="";function Xs(r,s){Yo[Jo++]=Ru,Yo[Jo++]=Pu,Pu=r,Ru=s}function Nm(r,s,a){lr[ur++]=Ei,lr[ur++]=Ti,lr[ur++]=Js,Js=r;var d=Ei;r=Ti;var f=32-tt(d)-1;d&=~(1<<f),a+=1;var g=32-tt(s)+f;if(30<g){var w=f-f%5;g=(d&(1<<w)-1).toString(32),d>>=w,f-=w,Ei=1<<32-tt(s)+f|a<<f|d,Ti=g+r}else Ei=1<<g|a<<f|d,Ti=r}function Jd(r){r.return!==null&&(Xs(r,1),Nm(r,1,0))}function Xd(r){for(;r===Pu;)Pu=Yo[--Jo],Yo[Jo]=null,Ru=Yo[--Jo],Yo[Jo]=null;for(;r===Js;)Js=lr[--ur],lr[ur]=null,Ti=lr[--ur],lr[ur]=null,Ei=lr[--ur],lr[ur]=null}var Yn=null,Jn=null,Rt=!1,Rr=null;function bm(r,s){var a=fr(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Dm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Yn=r,Jn=es(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Yn=r,Jn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Js!==null?{id:Ei,overflow:Ti}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=fr(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Yn=r,Jn=null,!0):!1;default:return!1}}function Zd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function eh(r){if(Rt){var s=Jn;if(s){var a=s;if(!Dm(r,s)){if(Zd(r))throw Error(t(418));s=es(a.nextSibling);var d=Yn;s&&Dm(r,s)?bm(d,a):(r.flags=r.flags&-4097|2,Rt=!1,Yn=r)}}else{if(Zd(r))throw Error(t(418));r.flags=r.flags&-4097|2,Rt=!1,Yn=r}}}function Om(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Yn=r}function Au(r){if(r!==Yn)return!1;if(!Rt)return Om(r),Rt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Wd(r.type,r.memoizedProps)),s&&(s=Jn)){if(Zd(r))throw Lm(),Error(t(418));for(;s;)bm(r,s),s=es(s.nextSibling)}if(Om(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Jn=es(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Jn=null}}else Jn=Yn?es(r.stateNode.nextSibling):null;return!0}function Lm(){for(var r=Jn;r;)r=es(r.nextSibling)}function Xo(){Jn=Yn=null,Rt=!1}function th(r){Rr===null?Rr=[r]:Rr.push(r)}var B0=pe.ReactCurrentBatchConfig;function Za(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var x=f.refs;w===null?delete x[g]:x[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function xu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Vm(r){var s=r._init;return s(r._payload)}function Mm(r){function s($,M){if(r){var W=$.deletions;W===null?($.deletions=[M],$.flags|=16):W.push(M)}}function a($,M){if(!r)return null;for(;M!==null;)s($,M),M=M.sibling;return null}function d($,M){for($=new Map;M!==null;)M.key!==null?$.set(M.key,M):$.set(M.index,M),M=M.sibling;return $}function f($,M){return $=ds($,M),$.index=0,$.sibling=null,$}function g($,M,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<M?($.flags|=2,M):W):($.flags|=2,M)):($.flags|=1048576,M)}function w($){return r&&$.alternate===null&&($.flags|=2),$}function x($,M,W,ue){return M===null||M.tag!==6?(M=qh(W,$.mode,ue),M.return=$,M):(M=f(M,W),M.return=$,M)}function D($,M,W,ue){var Ne=W.type;return Ne===S?se($,M,W.props.children,ue,W.key):M!==null&&(M.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===vt&&Vm(Ne)===M.type)?(ue=f(M,W.props),ue.ref=Za($,M,W),ue.return=$,ue):(ue=Zu(W.type,W.key,W.props,null,$.mode,ue),ue.ref=Za($,M,W),ue.return=$,ue)}function Q($,M,W,ue){return M===null||M.tag!==4||M.stateNode.containerInfo!==W.containerInfo||M.stateNode.implementation!==W.implementation?(M=Gh(W,$.mode,ue),M.return=$,M):(M=f(M,W.children||[]),M.return=$,M)}function se($,M,W,ue,Ne){return M===null||M.tag!==7?(M=oo(W,$.mode,ue,Ne),M.return=$,M):(M=f(M,W),M.return=$,M)}function ae($,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return M=qh(""+M,$.mode,W),M.return=$,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ue:return W=Zu(M.type,M.key,M.props,null,$.mode,W),W.ref=Za($,null,M),W.return=$,W;case Fe:return M=Gh(M,$.mode,W),M.return=$,M;case vt:var ue=M._init;return ae($,ue(M._payload),W)}if(gr(M)||ke(M))return M=oo(M,$.mode,W,null),M.return=$,M;xu($,M)}return null}function ie($,M,W,ue){var Ne=M!==null?M.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ne!==null?null:x($,M,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Ue:return W.key===Ne?D($,M,W,ue):null;case Fe:return W.key===Ne?Q($,M,W,ue):null;case vt:return Ne=W._init,ie($,M,Ne(W._payload),ue)}if(gr(W)||ke(W))return Ne!==null?null:se($,M,W,ue,null);xu($,W)}return null}function ve($,M,W,ue,Ne){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return $=$.get(W)||null,x(M,$,""+ue,Ne);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case Ue:return $=$.get(ue.key===null?W:ue.key)||null,D(M,$,ue,Ne);case Fe:return $=$.get(ue.key===null?W:ue.key)||null,Q(M,$,ue,Ne);case vt:var Ve=ue._init;return ve($,M,W,Ve(ue._payload),Ne)}if(gr(ue)||ke(ue))return $=$.get(W)||null,se(M,$,ue,Ne,null);xu(M,ue)}return null}function Re($,M,W,ue){for(var Ne=null,Ve=null,Me=M,He=M=0,rn=null;Me!==null&&He<W.length;He++){Me.index>He?(rn=Me,Me=null):rn=Me.sibling;var dt=ie($,Me,W[He],ue);if(dt===null){Me===null&&(Me=rn);break}r&&Me&&dt.alternate===null&&s($,Me),M=g(dt,M,He),Ve===null?Ne=dt:Ve.sibling=dt,Ve=dt,Me=rn}if(He===W.length)return a($,Me),Rt&&Xs($,He),Ne;if(Me===null){for(;He<W.length;He++)Me=ae($,W[He],ue),Me!==null&&(M=g(Me,M,He),Ve===null?Ne=Me:Ve.sibling=Me,Ve=Me);return Rt&&Xs($,He),Ne}for(Me=d($,Me);He<W.length;He++)rn=ve(Me,$,He,W[He],ue),rn!==null&&(r&&rn.alternate!==null&&Me.delete(rn.key===null?He:rn.key),M=g(rn,M,He),Ve===null?Ne=rn:Ve.sibling=rn,Ve=rn);return r&&Me.forEach(function(hs){return s($,hs)}),Rt&&Xs($,He),Ne}function Ae($,M,W,ue){var Ne=ke(W);if(typeof Ne!="function")throw Error(t(150));if(W=Ne.call(W),W==null)throw Error(t(151));for(var Ve=Ne=null,Me=M,He=M=0,rn=null,dt=W.next();Me!==null&&!dt.done;He++,dt=W.next()){Me.index>He?(rn=Me,Me=null):rn=Me.sibling;var hs=ie($,Me,dt.value,ue);if(hs===null){Me===null&&(Me=rn);break}r&&Me&&hs.alternate===null&&s($,Me),M=g(hs,M,He),Ve===null?Ne=hs:Ve.sibling=hs,Ve=hs,Me=rn}if(dt.done)return a($,Me),Rt&&Xs($,He),Ne;if(Me===null){for(;!dt.done;He++,dt=W.next())dt=ae($,dt.value,ue),dt!==null&&(M=g(dt,M,He),Ve===null?Ne=dt:Ve.sibling=dt,Ve=dt);return Rt&&Xs($,He),Ne}for(Me=d($,Me);!dt.done;He++,dt=W.next())dt=ve(Me,$,He,dt.value,ue),dt!==null&&(r&&dt.alternate!==null&&Me.delete(dt.key===null?He:dt.key),M=g(dt,M,He),Ve===null?Ne=dt:Ve.sibling=dt,Ve=dt);return r&&Me.forEach(function(ET){return s($,ET)}),Rt&&Xs($,He),Ne}function Ft($,M,W,ue){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Ue:e:{for(var Ne=W.key,Ve=M;Ve!==null;){if(Ve.key===Ne){if(Ne=W.type,Ne===S){if(Ve.tag===7){a($,Ve.sibling),M=f(Ve,W.props.children),M.return=$,$=M;break e}}else if(Ve.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===vt&&Vm(Ne)===Ve.type){a($,Ve.sibling),M=f(Ve,W.props),M.ref=Za($,Ve,W),M.return=$,$=M;break e}a($,Ve);break}else s($,Ve);Ve=Ve.sibling}W.type===S?(M=oo(W.props.children,$.mode,ue,W.key),M.return=$,$=M):(ue=Zu(W.type,W.key,W.props,null,$.mode,ue),ue.ref=Za($,M,W),ue.return=$,$=ue)}return w($);case Fe:e:{for(Ve=W.key;M!==null;){if(M.key===Ve)if(M.tag===4&&M.stateNode.containerInfo===W.containerInfo&&M.stateNode.implementation===W.implementation){a($,M.sibling),M=f(M,W.children||[]),M.return=$,$=M;break e}else{a($,M);break}else s($,M);M=M.sibling}M=Gh(W,$.mode,ue),M.return=$,$=M}return w($);case vt:return Ve=W._init,Ft($,M,Ve(W._payload),ue)}if(gr(W))return Re($,M,W,ue);if(ke(W))return Ae($,M,W,ue);xu($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,M!==null&&M.tag===6?(a($,M.sibling),M=f(M,W),M.return=$,$=M):(a($,M),M=qh(W,$.mode,ue),M.return=$,$=M),w($)):a($,M)}return Ft}var Zo=Mm(!0),Fm=Mm(!1),ku=ts(null),Nu=null,ea=null,nh=null;function rh(){nh=ea=Nu=null}function ih(r){var s=ku.current;It(ku),r._currentValue=s}function sh(r,s,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===a)break;r=r.return}}function ta(r,s){Nu=r,nh=ea=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Vn=!0),r.firstContext=null)}function cr(r){var s=r._currentValue;if(nh!==r)if(r={context:r,memoizedValue:s,next:null},ea===null){if(Nu===null)throw Error(t(308));ea=r,Nu.dependencies={lanes:0,firstContext:r}}else ea=ea.next=r;return s}var Zs=null;function oh(r){Zs===null?Zs=[r]:Zs.push(r)}function Um(r,s,a,d){var f=s.interleaved;return f===null?(a.next=a,oh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ii(r,d)}function Ii(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var is=!1;function ah(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Si(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ss(r,s,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ut&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Ii(r,a)}return f=d.interleaved,f===null?(s.next=s,oh(d)):(s.next=f.next,f.next=s),d.interleaved=s,Ii(r,a)}function bu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Ki(r,a)}}function zm(r,s){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Du(r,s,a,d){var f=r.updateQueue;is=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var D=x,Q=D.next;D.next=null,w===null?g=Q:w.next=Q,w=D;var se=r.alternate;se!==null&&(se=se.updateQueue,x=se.lastBaseUpdate,x!==w&&(x===null?se.firstBaseUpdate=Q:x.next=Q,se.lastBaseUpdate=D))}if(g!==null){var ae=f.baseState;w=0,se=Q=D=null,x=g;do{var ie=x.lane,ve=x.eventTime;if((d&ie)===ie){se!==null&&(se=se.next={eventTime:ve,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Re=r,Ae=x;switch(ie=s,ve=a,Ae.tag){case 1:if(Re=Ae.payload,typeof Re=="function"){ae=Re.call(ve,ae,ie);break e}ae=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ae.payload,ie=typeof Re=="function"?Re.call(ve,ae,ie):Re,ie==null)break e;ae=ge({},ae,ie);break e;case 2:is=!0}}x.callback!==null&&x.lane!==0&&(r.flags|=64,ie=f.effects,ie===null?f.effects=[x]:ie.push(x))}else ve={eventTime:ve,lane:ie,tag:x.tag,payload:x.payload,callback:x.callback,next:null},se===null?(Q=se=ve,D=ae):se=se.next=ve,w|=ie;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;ie=x,x=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);if(se===null&&(D=ae),f.baseState=D,f.firstBaseUpdate=Q,f.lastBaseUpdate=se,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);no|=w,r.lanes=w,r.memoizedState=ae}}function Bm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var el={},Qr=ts(el),tl=ts(el),nl=ts(el);function eo(r){if(r===el)throw Error(t(174));return r}function lh(r,s){switch(wt(nl,s),wt(tl,r),wt(Qr,el),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:xt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=xt(s,r)}It(Qr),wt(Qr,s)}function na(){It(Qr),It(tl),It(nl)}function $m(r){eo(nl.current);var s=eo(Qr.current),a=xt(s,r.type);s!==a&&(wt(tl,r),wt(Qr,a))}function uh(r){tl.current===r&&(It(Qr),It(tl))}var Nt=ts(0);function Ou(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ch=[];function dh(){for(var r=0;r<ch.length;r++)ch[r]._workInProgressVersionPrimary=null;ch.length=0}var Lu=pe.ReactCurrentDispatcher,hh=pe.ReactCurrentBatchConfig,to=0,bt=null,Qt=null,tn=null,Vu=!1,rl=!1,il=0,$0=0;function yn(){throw Error(t(321))}function fh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Pr(r[a],s[a]))return!1;return!0}function ph(r,s,a,d,f,g){if(to=g,bt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Lu.current=r===null||r.memoizedState===null?G0:K0,r=a(d,f),rl){g=0;do{if(rl=!1,il=0,25<=g)throw Error(t(301));g+=1,tn=Qt=null,s.updateQueue=null,Lu.current=Q0,r=a(d,f)}while(rl)}if(Lu.current=Uu,s=Qt!==null&&Qt.next!==null,to=0,tn=Qt=bt=null,Vu=!1,s)throw Error(t(300));return r}function mh(){var r=il!==0;return il=0,r}function Yr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?bt.memoizedState=tn=r:tn=tn.next=r,tn}function dr(){if(Qt===null){var r=bt.alternate;r=r!==null?r.memoizedState:null}else r=Qt.next;var s=tn===null?bt.memoizedState:tn.next;if(s!==null)tn=s,Qt=r;else{if(r===null)throw Error(t(310));Qt=r,r={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},tn===null?bt.memoizedState=tn=r:tn=tn.next=r}return tn}function sl(r,s){return typeof s=="function"?s(r):s}function gh(r){var s=dr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=Qt,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var x=w=null,D=null,Q=g;do{var se=Q.lane;if((to&se)===se)D!==null&&(D=D.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),d=Q.hasEagerState?Q.eagerState:r(d,Q.action);else{var ae={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};D===null?(x=D=ae,w=d):D=D.next=ae,bt.lanes|=se,no|=se}Q=Q.next}while(Q!==null&&Q!==g);D===null?w=d:D.next=x,Pr(d,s.memoizedState)||(Vn=!0),s.memoizedState=d,s.baseState=w,s.baseQueue=D,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do g=f.lane,bt.lanes|=g,no|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function yh(r){var s=dr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Pr(g,s.memoizedState)||(Vn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function Hm(){}function Wm(r,s){var a=bt,d=dr(),f=s(),g=!Pr(d.memoizedState,f);if(g&&(d.memoizedState=f,Vn=!0),d=d.queue,vh(Km.bind(null,a,d,r),[r]),d.getSnapshot!==s||g||tn!==null&&tn.memoizedState.tag&1){if(a.flags|=2048,ol(9,Gm.bind(null,a,d,f,s),void 0,null),nn===null)throw Error(t(349));(to&30)!==0||qm(a,s,f)}return f}function qm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=bt.updateQueue,s===null?(s={lastEffect:null,stores:null},bt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Gm(r,s,a,d){s.value=a,s.getSnapshot=d,Qm(s)&&Ym(r)}function Km(r,s,a){return a(function(){Qm(s)&&Ym(r)})}function Qm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Pr(r,a)}catch{return!0}}function Ym(r){var s=Ii(r,1);s!==null&&Nr(s,r,1,-1)}function Jm(r){var s=Yr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:r},s.queue=r,r=r.dispatch=q0.bind(null,bt,r),[s.memoizedState,r]}function ol(r,s,a,d){return r={tag:r,create:s,destroy:a,deps:d,next:null},s=bt.updateQueue,s===null?(s={lastEffect:null,stores:null},bt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,s.lastEffect=r)),r}function Xm(){return dr().memoizedState}function Mu(r,s,a,d){var f=Yr();bt.flags|=r,f.memoizedState=ol(1|s,a,void 0,d===void 0?null:d)}function Fu(r,s,a,d){var f=dr();d=d===void 0?null:d;var g=void 0;if(Qt!==null){var w=Qt.memoizedState;if(g=w.destroy,d!==null&&fh(d,w.deps)){f.memoizedState=ol(s,a,g,d);return}}bt.flags|=r,f.memoizedState=ol(1|s,a,g,d)}function Zm(r,s){return Mu(8390656,8,r,s)}function vh(r,s){return Fu(2048,8,r,s)}function eg(r,s){return Fu(4,2,r,s)}function tg(r,s){return Fu(4,4,r,s)}function ng(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function rg(r,s,a){return a=a!=null?a.concat([r]):null,Fu(4,4,ng.bind(null,s,r),a)}function _h(){}function ig(r,s){var a=dr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&fh(s,d[1])?d[0]:(a.memoizedState=[r,s],r)}function sg(r,s){var a=dr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&fh(s,d[1])?d[0]:(r=r(),a.memoizedState=[r,s],r)}function og(r,s,a){return(to&21)===0?(r.baseState&&(r.baseState=!1,Vn=!0),r.memoizedState=a):(Pr(a,s)||(a=Hs(),bt.lanes|=a,no|=a,r.baseState=!0),s)}function H0(r,s){var a=st;st=a!==0&&4>a?a:4,r(!0);var d=hh.transition;hh.transition={};try{r(!1),s()}finally{st=a,hh.transition=d}}function ag(){return dr().memoizedState}function W0(r,s,a){var d=us(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},lg(r))ug(s,a);else if(a=Um(r,s,a,d),a!==null){var f=Rn();Nr(a,r,d,f),cg(a,s,d)}}function q0(r,s,a){var d=us(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(lg(r))ug(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,x=g(w,a);if(f.hasEagerState=!0,f.eagerState=x,Pr(x,w)){var D=s.interleaved;D===null?(f.next=f,oh(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}a=Um(r,s,f,d),a!==null&&(f=Rn(),Nr(a,r,d,f),cg(a,s,d))}}function lg(r){var s=r.alternate;return r===bt||s!==null&&s===bt}function ug(r,s){rl=Vu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function cg(r,s,a){if((a&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Ki(r,a)}}var Uu={readContext:cr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},G0={readContext:cr,useCallback:function(r,s){return Yr().memoizedState=[r,s===void 0?null:s],r},useContext:cr,useEffect:Zm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Mu(4194308,4,ng.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Mu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Mu(4,2,r,s)},useMemo:function(r,s){var a=Yr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var d=Yr();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=W0.bind(null,bt,r),[d.memoizedState,r]},useRef:function(r){var s=Yr();return r={current:r},s.memoizedState=r},useState:Jm,useDebugValue:_h,useDeferredValue:function(r){return Yr().memoizedState=r},useTransition:function(){var r=Jm(!1),s=r[0];return r=H0.bind(null,r[1]),Yr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var d=bt,f=Yr();if(Rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),nn===null)throw Error(t(349));(to&30)!==0||qm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Zm(Km.bind(null,d,g,r),[r]),d.flags|=2048,ol(9,Gm.bind(null,d,g,a,s),void 0,null),a},useId:function(){var r=Yr(),s=nn.identifierPrefix;if(Rt){var a=Ti,d=Ei;a=(d&~(1<<32-tt(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=il++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=$0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},K0={readContext:cr,useCallback:ig,useContext:cr,useEffect:vh,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:gh,useRef:Xm,useState:function(){return gh(sl)},useDebugValue:_h,useDeferredValue:function(r){var s=dr();return og(s,Qt.memoizedState,r)},useTransition:function(){var r=gh(sl)[0],s=dr().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:Wm,useId:ag,unstable_isNewReconciler:!1},Q0={readContext:cr,useCallback:ig,useContext:cr,useEffect:vh,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:yh,useRef:Xm,useState:function(){return yh(sl)},useDebugValue:_h,useDeferredValue:function(r){var s=dr();return Qt===null?s.memoizedState=r:og(s,Qt.memoizedState,r)},useTransition:function(){var r=yh(sl)[0],s=dr().memoizedState;return[r,s]},useMutableSource:Hm,useSyncExternalStore:Wm,useId:ag,unstable_isNewReconciler:!1};function Ar(r,s){if(r&&r.defaultProps){s=ge({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function wh(r,s,a,d){s=r.memoizedState,a=a(d,s),a=a==null?s:ge({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var ju={isMounted:function(r){return(r=r._reactInternals)?Ee(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var d=Rn(),f=us(r),g=Si(d,f);g.payload=s,a!=null&&(g.callback=a),s=ss(r,g,f),s!==null&&(Nr(s,r,f,d),bu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var d=Rn(),f=us(r),g=Si(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ss(r,g,f),s!==null&&(Nr(s,r,f,d),bu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Rn(),d=us(r),f=Si(a,d);f.tag=2,s!=null&&(f.callback=s),s=ss(r,f,d),s!==null&&(Nr(s,r,d,a),bu(s,r,d))}};function dg(r,s,a,d,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,w):s.prototype&&s.prototype.isPureReactComponent?!qa(a,d)||!qa(f,g):!0}function hg(r,s,a){var d=!1,f=ns,g=s.contextType;return typeof g=="object"&&g!==null?g=cr(g):(f=Ln(s)?Ys:gn.current,d=s.contextTypes,g=(d=d!=null)?Qo(r,f):ns),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ju,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function fg(r,s,a,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==r&&ju.enqueueReplaceState(s,s.state,null)}function Eh(r,s,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},ah(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=cr(g):(g=Ln(s)?Ys:gn.current,f.context=Qo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(wh(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&ju.enqueueReplaceState(f,f.state,null),Du(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ra(r,s){try{var a="",d=s;do a+=Oe(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Th(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Ih(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Y0=typeof WeakMap=="function"?WeakMap:Map;function pg(r,s,a){a=Si(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Gu||(Gu=!0,Fh=d),Ih(r,s)},a}function mg(r,s,a){a=Si(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Ih(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ih(r,s),typeof d!="function"&&(as===null?as=new Set([this]):as.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function gg(r,s,a){var d=r.pingCache;if(d===null){d=r.pingCache=new Y0;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),r=cT.bind(null,r,s,a),s.then(r,r))}function yg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function vg(r,s,a,d,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Si(-1,1),s.tag=2,ss(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var J0=pe.ReactCurrentOwner,Vn=!1;function Pn(r,s,a,d){s.child=r===null?Fm(s,null,a,d):Zo(s,r.child,a,d)}function _g(r,s,a,d,f){a=a.render;var g=s.ref;return ta(s,f),d=ph(r,s,a,d,g,f),a=mh(),r!==null&&!Vn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ci(r,s,f)):(Rt&&a&&Jd(s),s.flags|=1,Pn(r,s,d,f),s.child)}function wg(r,s,a,d,f){if(r===null){var g=a.type;return typeof g=="function"&&!Wh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Eg(r,s,g,d,f)):(r=Zu(a.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:qa,a(w,d)&&r.ref===s.ref)return Ci(r,s,f)}return s.flags|=1,r=ds(g,d),r.ref=s.ref,r.return=s,s.child=r}function Eg(r,s,a,d,f){if(r!==null){var g=r.memoizedProps;if(qa(g,d)&&r.ref===s.ref)if(Vn=!1,s.pendingProps=d=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Vn=!0);else return s.lanes=r.lanes,Ci(r,s,f)}return Sh(r,s,a,d,f)}function Tg(r,s,a){var d=s.pendingProps,f=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(sa,Xn),Xn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,wt(sa,Xn),Xn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,wt(sa,Xn),Xn|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,wt(sa,Xn),Xn|=d;return Pn(r,s,f,a),s.child}function Ig(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Sh(r,s,a,d,f){var g=Ln(a)?Ys:gn.current;return g=Qo(s,g),ta(s,f),a=ph(r,s,a,d,g,f),d=mh(),r!==null&&!Vn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Ci(r,s,f)):(Rt&&d&&Jd(s),s.flags|=1,Pn(r,s,a,f),s.child)}function Sg(r,s,a,d,f){if(Ln(a)){var g=!0;Su(s)}else g=!1;if(ta(s,f),s.stateNode===null)Bu(r,s),hg(s,a,d),Eh(s,a,d,f),d=!0;else if(r===null){var w=s.stateNode,x=s.memoizedProps;w.props=x;var D=w.context,Q=a.contextType;typeof Q=="object"&&Q!==null?Q=cr(Q):(Q=Ln(a)?Ys:gn.current,Q=Qo(s,Q));var se=a.getDerivedStateFromProps,ae=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function";ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==d||D!==Q)&&fg(s,w,d,Q),is=!1;var ie=s.memoizedState;w.state=ie,Du(s,d,w,f),D=s.memoizedState,x!==d||ie!==D||On.current||is?(typeof se=="function"&&(wh(s,a,se,d),D=s.memoizedState),(x=is||dg(s,a,x,d,ie,D,Q))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=D),w.props=d,w.state=D,w.context=Q,d=x):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{w=s.stateNode,jm(r,s),x=s.memoizedProps,Q=s.type===s.elementType?x:Ar(s.type,x),w.props=Q,ae=s.pendingProps,ie=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=cr(D):(D=Ln(a)?Ys:gn.current,D=Qo(s,D));var ve=a.getDerivedStateFromProps;(se=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==ae||ie!==D)&&fg(s,w,d,D),is=!1,ie=s.memoizedState,w.state=ie,Du(s,d,w,f);var Re=s.memoizedState;x!==ae||ie!==Re||On.current||is?(typeof ve=="function"&&(wh(s,a,ve,d),Re=s.memoizedState),(Q=is||dg(s,a,Q,d,ie,Re,D)||!1)?(se||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Re,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Re,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Re),w.props=d,w.state=Re,w.context=D,d=Q):(typeof w.componentDidUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),d=!1)}return Ch(r,s,a,d,g,f)}function Ch(r,s,a,d,f,g){Ig(r,s);var w=(s.flags&128)!==0;if(!d&&!w)return f&&xm(s,a,!1),Ci(r,s,g);d=s.stateNode,J0.current=s;var x=w&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&w?(s.child=Zo(s,r.child,null,g),s.child=Zo(s,null,x,g)):Pn(r,s,x,g),s.memoizedState=d.state,f&&xm(s,a,!0),s.child}function Cg(r){var s=r.stateNode;s.pendingContext?Rm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Rm(r,s.context,!1),lh(r,s.containerInfo)}function Pg(r,s,a,d,f){return Xo(),th(f),s.flags|=256,Pn(r,s,a,d),s.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Rh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Rg(r,s,a){var d=s.pendingProps,f=Nt.current,g=!1,w=(s.flags&128)!==0,x;if((x=w)||(x=r!==null&&r.memoizedState===null?!1:(f&2)!==0),x?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),wt(Nt,f&1),r===null)return eh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=d.children,r=d.fallback,g?(d=s.mode,g=s.child,w={mode:"hidden",children:w},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ec(w,d,0,null),r=oo(r,d,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Rh(a),s.memoizedState=Ph,r):Ah(s,w));if(f=r.memoizedState,f!==null&&(x=f.dehydrated,x!==null))return X0(r,s,w,d,x,f,a);if(g){g=d.fallback,w=s.mode,f=r.child,x=f.sibling;var D={mode:"hidden",children:d.children};return(w&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=D,s.deletions=null):(d=ds(f,D),d.subtreeFlags=f.subtreeFlags&14680064),x!==null?g=ds(x,g):(g=oo(g,w,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,w=r.child.memoizedState,w=w===null?Rh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=Ph,d}return g=r.child,r=g.sibling,d=ds(g,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=d,s.memoizedState=null,d}function Ah(r,s){return s=ec({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function zu(r,s,a,d){return d!==null&&th(d),Zo(s,r.child,null,a),r=Ah(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function X0(r,s,a,d,f,g,w){if(a)return s.flags&256?(s.flags&=-257,d=Th(Error(t(422))),zu(r,s,w,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=ec({mode:"visible",children:d.children},f,0,null),g=oo(g,f,w,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,(s.mode&1)!==0&&Zo(s,r.child,null,w),s.child.memoizedState=Rh(w),s.memoizedState=Ph,g);if((s.mode&1)===0)return zu(r,s,w,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var x=d.dgst;return d=x,g=Error(t(419)),d=Th(g,d,void 0),zu(r,s,w,d)}if(x=(w&r.childLanes)!==0,Vn||x){if(d=nn,d!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ii(r,f),Nr(d,r,f,-1))}return Hh(),d=Th(Error(t(421))),zu(r,s,w,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=dT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,Jn=es(f.nextSibling),Yn=s,Rt=!0,Rr=null,r!==null&&(lr[ur++]=Ei,lr[ur++]=Ti,lr[ur++]=Js,Ei=r.id,Ti=r.overflow,Js=s),s=Ah(s,d.children),s.flags|=4096,s)}function Ag(r,s,a){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),sh(r.return,s,a)}function xh(r,s,a,d,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function xg(r,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if(Pn(r,s,d.children,a),d=Nt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ag(r,a,s);else if(r.tag===19)Ag(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(wt(Nt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Ou(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),xh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Ou(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}xh(s,!0,a,null,g);break;case"together":xh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Bu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Ci(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),no|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=ds(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=ds(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Z0(r,s,a){switch(s.tag){case 3:Cg(s),Xo();break;case 5:$m(s);break;case 1:Ln(s.type)&&Su(s);break;case 4:lh(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;wt(ku,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(wt(Nt,Nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Rg(r,s,a):(wt(Nt,Nt.current&1),r=Ci(r,s,a),r!==null?r.sibling:null);wt(Nt,Nt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(r.flags&128)!==0){if(d)return xg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),wt(Nt,Nt.current),d)break;return null;case 22:case 23:return s.lanes=0,Tg(r,s,a)}return Ci(r,s,a)}var kg,kh,Ng,bg;kg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},kh=function(){},Ng=function(r,s,a,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,eo(Qr.current);var g=null;switch(a){case"input":f=ht(r,f),d=ht(r,d),g=[];break;case"select":f=ge({},f,{value:void 0}),d=ge({},d,{value:void 0}),g=[];break;case"textarea":f=Fs(r,f),d=Fs(r,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=Eu)}Bi(a,d);var w;a=null;for(Q in f)if(!d.hasOwnProperty(Q)&&f.hasOwnProperty(Q)&&f[Q]!=null)if(Q==="style"){var x=f[Q];for(w in x)x.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(o.hasOwnProperty(Q)?g||(g=[]):(g=g||[]).push(Q,null));for(Q in d){var D=d[Q];if(x=f?.[Q],d.hasOwnProperty(Q)&&D!==x&&(D!=null||x!=null))if(Q==="style")if(x){for(w in x)!x.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&x[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(g||(g=[]),g.push(Q,a)),a=D;else Q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,x=x?x.__html:void 0,D!=null&&x!==D&&(g=g||[]).push(Q,D)):Q==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(Q,""+D):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(o.hasOwnProperty(Q)?(D!=null&&Q==="onScroll"&&Tt("scroll",r),g||x===D||(g=[])):(g=g||[]).push(Q,D))}a&&(g=g||[]).push("style",a);var Q=g;(s.updateQueue=Q)&&(s.flags|=4)}},bg=function(r,s,a,d){a!==d&&(s.flags|=4)};function al(r,s){if(!Rt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function vn(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,s}function eT(r,s,a){var d=s.pendingProps;switch(Xd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(s),null;case 1:return Ln(s.type)&&Iu(),vn(s),null;case 3:return d=s.stateNode,na(),It(On),It(gn),dh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Au(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rr!==null&&(zh(Rr),Rr=null))),kh(r,s),vn(s),null;case 5:uh(s);var f=eo(nl.current);if(a=s.type,r!==null&&s.stateNode!=null)Ng(r,s,a,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return vn(s),null}if(r=eo(Qr.current),Au(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[Kr]=s,d[Ja]=g,r=(s.mode&1)!==0,a){case"dialog":Tt("cancel",d),Tt("close",d);break;case"iframe":case"object":case"embed":Tt("load",d);break;case"video":case"audio":for(f=0;f<Ka.length;f++)Tt(Ka[f],d);break;case"source":Tt("error",d);break;case"img":case"image":case"link":Tt("error",d),Tt("load",d);break;case"details":Tt("toggle",d);break;case"input":Et(d,g),Tt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Tt("invalid",d);break;case"textarea":Ui(d,g),Tt("invalid",d)}Bi(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var x=g[w];w==="children"?typeof x=="string"?d.textContent!==x&&(g.suppressHydrationWarning!==!0&&wu(d.textContent,x,r),f=["children",x]):typeof x=="number"&&d.textContent!==""+x&&(g.suppressHydrationWarning!==!0&&wu(d.textContent,x,r),f=["children",""+x]):o.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&Tt("scroll",d)}switch(a){case"input":_e(d),Ro(d,g,!0);break;case"textarea":_e(d),vr(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Eu)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ot(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=w.createElement(a,{is:d.is}):(r=w.createElement(a),a==="select"&&(w=r,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):r=w.createElementNS(r,a),r[Kr]=s,r[Ja]=d,kg(r,s,!1,!1),s.stateNode=r;e:{switch(w=Us(a,d),a){case"dialog":Tt("cancel",r),Tt("close",r),f=d;break;case"iframe":case"object":case"embed":Tt("load",r),f=d;break;case"video":case"audio":for(f=0;f<Ka.length;f++)Tt(Ka[f],r);f=d;break;case"source":Tt("error",r),f=d;break;case"img":case"image":case"link":Tt("error",r),Tt("load",r),f=d;break;case"details":Tt("toggle",r),f=d;break;case"input":Et(r,d),f=ht(r,d),Tt("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=ge({},d,{value:void 0}),Tt("invalid",r);break;case"textarea":Ui(r,d),f=Fs(r,d),Tt("invalid",r);break;default:f=d}Bi(a,f),x=f;for(g in x)if(x.hasOwnProperty(g)){var D=x[g];g==="style"?ji(r,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Sn(r,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&_r(r,D):typeof D=="number"&&_r(r,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&Tt("scroll",r):D!=null&&ce(r,g,D,w))}switch(a){case"input":_e(r),Ro(r,d,!1);break;case"textarea":_e(r),vr(r);break;case"option":d.value!=null&&r.setAttribute("value",""+q(d.value));break;case"select":r.multiple=!!d.multiple,g=d.value,g!=null?yr(r,!!d.multiple,g,!1):d.defaultValue!=null&&yr(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Eu)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return vn(s),null;case 6:if(r&&s.stateNode!=null)bg(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=eo(nl.current),eo(Qr.current),Au(s)){if(d=s.stateNode,a=s.memoizedProps,d[Kr]=s,(g=d.nodeValue!==a)&&(r=Yn,r!==null))switch(r.tag){case 3:wu(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&wu(d.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Kr]=s,s.stateNode=d}return vn(s),null;case 13:if(It(Nt),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Rt&&Jn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Lm(),Xo(),s.flags|=98560,g=!1;else if(g=Au(s),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Kr]=s}else Xo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;vn(s),g=!1}else Rr!==null&&(zh(Rr),Rr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Nt.current&1)!==0?Yt===0&&(Yt=3):Hh())),s.updateQueue!==null&&(s.flags|=4),vn(s),null);case 4:return na(),kh(r,s),r===null&&Qa(s.stateNode.containerInfo),vn(s),null;case 10:return ih(s.type._context),vn(s),null;case 17:return Ln(s.type)&&Iu(),vn(s),null;case 19:if(It(Nt),g=s.memoizedState,g===null)return vn(s),null;if(d=(s.flags&128)!==0,w=g.rendering,w===null)if(d)al(g,!1);else{if(Yt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Ou(r),w!==null){for(s.flags|=128,al(g,!1),d=w.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,r=d,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return wt(Nt,Nt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ze()>oa&&(s.flags|=128,d=!0,al(g,!1),s.lanes=4194304)}else{if(!d)if(r=Ou(w),r!==null){if(s.flags|=128,d=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),al(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Rt)return vn(s),null}else 2*Ze()-g.renderingStartTime>oa&&a!==1073741824&&(s.flags|=128,d=!0,al(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ze(),s.sibling=null,a=Nt.current,wt(Nt,d?a&1|2:a&1),s):(vn(s),null);case 22:case 23:return $h(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(Xn&1073741824)!==0&&(vn(s),s.subtreeFlags&6&&(s.flags|=8192)):vn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tT(r,s){switch(Xd(s),s.tag){case 1:return Ln(s.type)&&Iu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return na(),It(On),It(gn),dh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return uh(s),null;case 13:if(It(Nt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Xo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return It(Nt),null;case 4:return na(),null;case 10:return ih(s.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var $u=!1,_n=!1,nT=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function ia(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){Vt(r,s,d)}else a.current=null}function Nh(r,s,a){try{a()}catch(d){Vt(r,s,d)}}var Dg=!1;function rT(r,s){if($d=Ji,r=dm(),Ld(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,x=-1,D=-1,Q=0,se=0,ae=r,ie=null;t:for(;;){for(var ve;ae!==a||f!==0&&ae.nodeType!==3||(x=w+f),ae!==g||d!==0&&ae.nodeType!==3||(D=w+d),ae.nodeType===3&&(w+=ae.nodeValue.length),(ve=ae.firstChild)!==null;)ie=ae,ae=ve;for(;;){if(ae===r)break t;if(ie===a&&++Q===f&&(x=w),ie===g&&++se===d&&(D=w),(ve=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=ve}a=x===-1||D===-1?null:{start:x,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hd={focusedElem:r,selectionRange:a},Ji=!1,Pe=s;Pe!==null;)if(s=Pe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Pe=r;else for(;Pe!==null;){s=Pe;try{var Re=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var Ae=Re.memoizedProps,Ft=Re.memoizedState,$=s.stateNode,M=$.getSnapshotBeforeUpdate(s.elementType===s.type?Ae:Ar(s.type,Ae),Ft);$.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){Vt(s,s.return,ue)}if(r=s.sibling,r!==null){r.return=s.return,Pe=r;break}Pe=s.return}return Re=Dg,Dg=!1,Re}function ll(r,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Nh(s,a,g)}f=f.next}while(f!==d)}}function Hu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function bh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Og(r){var s=r.alternate;s!==null&&(r.alternate=null,Og(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Kr],delete s[Ja],delete s[Kd],delete s[U0],delete s[j0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Lg(r){return r.tag===5||r.tag===3||r.tag===4}function Vg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Lg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Dh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Eu));else if(d!==4&&(r=r.child,r!==null))for(Dh(r,s,a),r=r.sibling;r!==null;)Dh(r,s,a),r=r.sibling}function Oh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(Oh(r,s,a),r=r.sibling;r!==null;)Oh(r,s,a),r=r.sibling}var un=null,xr=!1;function os(r,s,a){for(a=a.child;a!==null;)Mg(r,s,a),a=a.sibling}function Mg(r,s,a){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 5:_n||ia(a,s);case 6:var d=un,f=xr;un=null,os(r,s,a),un=d,xr=f,un!==null&&(xr?(r=un,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):un.removeChild(a.stateNode));break;case 18:un!==null&&(xr?(r=un,a=a.stateNode,r.nodeType===8?Gd(r.parentNode,a):r.nodeType===1&&Gd(r,a),Sr(r)):Gd(un,a.stateNode));break;case 4:d=un,f=xr,un=a.stateNode.containerInfo,xr=!0,os(r,s,a),un=d,xr=f;break;case 0:case 11:case 14:case 15:if(!_n&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Nh(a,s,w),f=f.next}while(f!==d)}os(r,s,a);break;case 1:if(!_n&&(ia(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(x){Vt(a,s,x)}os(r,s,a);break;case 21:os(r,s,a);break;case 22:a.mode&1?(_n=(d=_n)||a.memoizedState!==null,os(r,s,a),_n=d):os(r,s,a);break;default:os(r,s,a)}}function Fg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new nT),s.forEach(function(d){var f=hT.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function kr(r,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=r,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 5:un=x.stateNode,xr=!1;break e;case 3:un=x.stateNode.containerInfo,xr=!0;break e;case 4:un=x.stateNode.containerInfo,xr=!0;break e}x=x.return}if(un===null)throw Error(t(160));Mg(g,w,f),un=null,xr=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(Q){Vt(f,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ug(s,r),s=s.sibling}function Ug(r,s){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(kr(s,r),Jr(r),d&4){try{ll(3,r,r.return),Hu(3,r)}catch(Ae){Vt(r,r.return,Ae)}try{ll(5,r,r.return)}catch(Ae){Vt(r,r.return,Ae)}}break;case 1:kr(s,r),Jr(r),d&512&&a!==null&&ia(a,a.return);break;case 5:if(kr(s,r),Jr(r),d&512&&a!==null&&ia(a,a.return),r.flags&32){var f=r.stateNode;try{_r(f,"")}catch(Ae){Vt(r,r.return,Ae)}}if(d&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,x=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{x==="input"&&g.type==="radio"&&g.name!=null&&Mt(f,g),Us(x,w);var Q=Us(x,g);for(w=0;w<D.length;w+=2){var se=D[w],ae=D[w+1];se==="style"?ji(f,ae):se==="dangerouslySetInnerHTML"?Sn(f,ae):se==="children"?_r(f,ae):ce(f,se,ae,Q)}switch(x){case"input":Vr(f,g);break;case"textarea":An(f,g);break;case"select":var ie=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ve=g.value;ve!=null?yr(f,!!g.multiple,ve,!1):ie!==!!g.multiple&&(g.defaultValue!=null?yr(f,!!g.multiple,g.defaultValue,!0):yr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ja]=g}catch(Ae){Vt(r,r.return,Ae)}}break;case 6:if(kr(s,r),Jr(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(Ae){Vt(r,r.return,Ae)}}break;case 3:if(kr(s,r),Jr(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Sr(s.containerInfo)}catch(Ae){Vt(r,r.return,Ae)}break;case 4:kr(s,r),Jr(r);break;case 13:kr(s,r),Jr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Mh=Ze())),d&4&&Fg(r);break;case 22:if(se=a!==null&&a.memoizedState!==null,r.mode&1?(_n=(Q=_n)||se,kr(s,r),_n=Q):kr(s,r),Jr(r),d&8192){if(Q=r.memoizedState!==null,(r.stateNode.isHidden=Q)&&!se&&(r.mode&1)!==0)for(Pe=r,se=r.child;se!==null;){for(ae=Pe=se;Pe!==null;){switch(ie=Pe,ve=ie.child,ie.tag){case 0:case 11:case 14:case 15:ll(4,ie,ie.return);break;case 1:ia(ie,ie.return);var Re=ie.stateNode;if(typeof Re.componentWillUnmount=="function"){d=ie,a=ie.return;try{s=d,Re.props=s.memoizedProps,Re.state=s.memoizedState,Re.componentWillUnmount()}catch(Ae){Vt(d,a,Ae)}}break;case 5:ia(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Bg(ae);continue}}ve!==null?(ve.return=ie,Pe=ve):Bg(ae)}se=se.sibling}e:for(se=null,ae=r;;){if(ae.tag===5){if(se===null){se=ae;try{f=ae.stateNode,Q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(x=ae.stateNode,D=ae.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,x.style.display=xn("display",w))}catch(Ae){Vt(r,r.return,Ae)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=Q?"":ae.memoizedProps}catch(Ae){Vt(r,r.return,Ae)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===r)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===r)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===r)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:kr(s,r),Jr(r),d&4&&Fg(r);break;case 21:break;default:kr(s,r),Jr(r)}}function Jr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Lg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(_r(f,""),d.flags&=-33);var g=Vg(r);Oh(r,g,f);break;case 3:case 4:var w=d.stateNode.containerInfo,x=Vg(r);Dh(r,x,w);break;default:throw Error(t(161))}}catch(D){Vt(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function iT(r,s,a){Pe=r,jg(r)}function jg(r,s,a){for(var d=(r.mode&1)!==0;Pe!==null;){var f=Pe,g=f.child;if(f.tag===22&&d){var w=f.memoizedState!==null||$u;if(!w){var x=f.alternate,D=x!==null&&x.memoizedState!==null||_n;x=$u;var Q=_n;if($u=w,(_n=D)&&!Q)for(Pe=f;Pe!==null;)w=Pe,D=w.child,w.tag===22&&w.memoizedState!==null?$g(f):D!==null?(D.return=w,Pe=D):$g(f);for(;g!==null;)Pe=g,jg(g),g=g.sibling;Pe=f,$u=x,_n=Q}zg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,Pe=g):zg(r)}}function zg(r){for(;Pe!==null;){var s=Pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:_n||Hu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!_n)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Ar(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Bm(s,g,d);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Bm(s,w,a)}break;case 5:var x=s.stateNode;if(a===null&&s.flags&4){a=x;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&Sr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}_n||s.flags&512&&bh(s)}catch(ie){Vt(s,s.return,ie)}}if(s===r){Pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,Pe=a;break}Pe=s.return}}function Bg(r){for(;Pe!==null;){var s=Pe;if(s===r){Pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Pe=a;break}Pe=s.return}}function $g(r){for(;Pe!==null;){var s=Pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Hu(4,s)}catch(D){Vt(s,a,D)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(D){Vt(s,f,D)}}var g=s.return;try{bh(s)}catch(D){Vt(s,g,D)}break;case 5:var w=s.return;try{bh(s)}catch(D){Vt(s,w,D)}}}catch(D){Vt(s,s.return,D)}if(s===r){Pe=null;break}var x=s.sibling;if(x!==null){x.return=s.return,Pe=x;break}Pe=s.return}}var sT=Math.ceil,Wu=pe.ReactCurrentDispatcher,Lh=pe.ReactCurrentOwner,hr=pe.ReactCurrentBatchConfig,ut=0,nn=null,Bt=null,cn=0,Xn=0,sa=ts(0),Yt=0,ul=null,no=0,qu=0,Vh=0,cl=null,Mn=null,Mh=0,oa=1/0,Pi=null,Gu=!1,Fh=null,as=null,Ku=!1,ls=null,Qu=0,dl=0,Uh=null,Yu=-1,Ju=0;function Rn(){return(ut&6)!==0?Ze():Yu!==-1?Yu:Yu=Ze()}function us(r){return(r.mode&1)===0?1:(ut&2)!==0&&cn!==0?cn&-cn:B0.transition!==null?(Ju===0&&(Ju=Hs()),Ju):(r=st,r!==0||(r=window.event,r=r===void 0?16:Ua(r.type)),r)}function Nr(r,s,a,d){if(50<dl)throw dl=0,Uh=null,Error(t(185));Gi(r,a,d),((ut&2)===0||r!==nn)&&(r===nn&&((ut&2)===0&&(qu|=a),Yt===4&&cs(r,cn)),Fn(r,d),a===1&&ut===0&&(s.mode&1)===0&&(oa=Ze()+500,Cu&&rs()))}function Fn(r,s){var a=r.callbackNode;pi(r,s);var d=$s(r,r===nn?cn:0);if(d===0)a!==null&&ir(a),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(a!=null&&ir(a),s===1)r.tag===0?z0(Wg.bind(null,r)):km(Wg.bind(null,r)),M0(function(){(ut&6)===0&&rs()}),a=null;else{switch(Qi(d)){case 1:a=qn;break;case 4:a=mn;break;case 16:a=on;break;case 536870912:a=et;break;default:a=on}a=Zg(a,Hg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Hg(r,s){if(Yu=-1,Ju=0,(ut&6)!==0)throw Error(t(327));var a=r.callbackNode;if(aa()&&r.callbackNode!==a)return null;var d=$s(r,r===nn?cn:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=Xu(r,d);else{s=d;var f=ut;ut|=2;var g=Gg();(nn!==r||cn!==s)&&(Pi=null,oa=Ze()+500,io(r,s));do try{lT();break}catch(x){qg(r,x)}while(!0);rh(),Wu.current=g,ut=f,Bt!==null?s=0:(nn=null,cn=0,s=Yt)}if(s!==0){if(s===2&&(f=Gn(r),f!==0&&(d=f,s=jh(r,f))),s===1)throw a=ul,io(r,0),cs(r,d),Fn(r,Ze()),a;if(s===6)cs(r,d);else{if(f=r.current.alternate,(d&30)===0&&!oT(f)&&(s=Xu(r,d),s===2&&(g=Gn(r),g!==0&&(d=g,s=jh(r,g))),s===1))throw a=ul,io(r,0),cs(r,d),Fn(r,Ze()),a;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:so(r,Mn,Pi);break;case 3:if(cs(r,d),(d&130023424)===d&&(s=Mh+500-Ze(),10<s)){if($s(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){Rn(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=qd(so.bind(null,r,Mn,Pi),s);break}so(r,Mn,Pi);break;case 4:if(cs(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var w=31-tt(d);g=1<<w,w=s[w],w>f&&(f=w),d&=~g}if(d=f,d=Ze()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*sT(d/1960))-d,10<d){r.timeoutHandle=qd(so.bind(null,r,Mn,Pi),d);break}so(r,Mn,Pi);break;case 5:so(r,Mn,Pi);break;default:throw Error(t(329))}}}return Fn(r,Ze()),r.callbackNode===a?Hg.bind(null,r):null}function jh(r,s){var a=cl;return r.current.memoizedState.isDehydrated&&(io(r,s).flags|=256),r=Xu(r,s),r!==2&&(s=Mn,Mn=a,s!==null&&zh(s)),r}function zh(r){Mn===null?Mn=r:Mn.push.apply(Mn,r)}function oT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Pr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function cs(r,s){for(s&=~Vh,s&=~qu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-tt(s),d=1<<a;r[a]=-1,s&=~d}}function Wg(r){if((ut&6)!==0)throw Error(t(327));aa();var s=$s(r,0);if((s&1)===0)return Fn(r,Ze()),null;var a=Xu(r,s);if(r.tag!==0&&a===2){var d=Gn(r);d!==0&&(s=d,a=jh(r,d))}if(a===1)throw a=ul,io(r,0),cs(r,s),Fn(r,Ze()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,so(r,Mn,Pi),Fn(r,Ze()),null}function Bh(r,s){var a=ut;ut|=1;try{return r(s)}finally{ut=a,ut===0&&(oa=Ze()+500,Cu&&rs())}}function ro(r){ls!==null&&ls.tag===0&&(ut&6)===0&&aa();var s=ut;ut|=1;var a=hr.transition,d=st;try{if(hr.transition=null,st=1,r)return r()}finally{st=d,hr.transition=a,ut=s,(ut&6)===0&&rs()}}function $h(){Xn=sa.current,It(sa)}function io(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,V0(a)),Bt!==null)for(a=Bt.return;a!==null;){var d=a;switch(Xd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Iu();break;case 3:na(),It(On),It(gn),dh();break;case 5:uh(d);break;case 4:na();break;case 13:It(Nt);break;case 19:It(Nt);break;case 10:ih(d.type._context);break;case 22:case 23:$h()}a=a.return}if(nn=r,Bt=r=ds(r.current,null),cn=Xn=s,Yt=0,ul=null,Vh=qu=no=0,Mn=cl=null,Zs!==null){for(s=0;s<Zs.length;s++)if(a=Zs[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,d.next=w}a.pending=d}Zs=null}return r}function qg(r,s){do{var a=Bt;try{if(rh(),Lu.current=Uu,Vu){for(var d=bt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Vu=!1}if(to=0,tn=Qt=bt=null,rl=!1,il=0,Lh.current=null,a===null||a.return===null){Yt=1,ul=s,Bt=null;break}e:{var g=r,w=a.return,x=a,D=s;if(s=cn,x.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var Q=D,se=x,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=se.alternate;ie?(se.updateQueue=ie.updateQueue,se.memoizedState=ie.memoizedState,se.lanes=ie.lanes):(se.updateQueue=null,se.memoizedState=null)}var ve=yg(w);if(ve!==null){ve.flags&=-257,vg(ve,w,x,g,s),ve.mode&1&&gg(g,Q,s),s=ve,D=Q;var Re=s.updateQueue;if(Re===null){var Ae=new Set;Ae.add(D),s.updateQueue=Ae}else Re.add(D);break e}else{if((s&1)===0){gg(g,Q,s),Hh();break e}D=Error(t(426))}}else if(Rt&&x.mode&1){var Ft=yg(w);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),vg(Ft,w,x,g,s),th(ra(D,x));break e}}g=D=ra(D,x),Yt!==4&&(Yt=2),cl===null?cl=[g]:cl.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var $=pg(g,D,s);zm(g,$);break e;case 1:x=D;var M=g.type,W=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(as===null||!as.has(W)))){g.flags|=65536,s&=-s,g.lanes|=s;var ue=mg(g,x,s);zm(g,ue);break e}}g=g.return}while(g!==null)}Qg(a)}catch(Ne){s=Ne,Bt===a&&a!==null&&(Bt=a=a.return);continue}break}while(!0)}function Gg(){var r=Wu.current;return Wu.current=Uu,r===null?Uu:r}function Hh(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),nn===null||(no&268435455)===0&&(qu&268435455)===0||cs(nn,cn)}function Xu(r,s){var a=ut;ut|=2;var d=Gg();(nn!==r||cn!==s)&&(Pi=null,io(r,s));do try{aT();break}catch(f){qg(r,f)}while(!0);if(rh(),ut=a,Wu.current=d,Bt!==null)throw Error(t(261));return nn=null,cn=0,Yt}function aT(){for(;Bt!==null;)Kg(Bt)}function lT(){for(;Bt!==null&&!jr();)Kg(Bt)}function Kg(r){var s=Xg(r.alternate,r,Xn);r.memoizedProps=r.pendingProps,s===null?Qg(r):Bt=s,Lh.current=null}function Qg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=eT(a,s,Xn),a!==null){Bt=a;return}}else{if(a=tT(a,s),a!==null){a.flags&=32767,Bt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Yt=6,Bt=null;return}}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=r}while(s!==null);Yt===0&&(Yt=5)}function so(r,s,a){var d=st,f=hr.transition;try{hr.transition=null,st=1,uT(r,s,a,d)}finally{hr.transition=f,st=d}return null}function uT(r,s,a,d){do aa();while(ls!==null);if((ut&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(_t(r,g),r===nn&&(Bt=nn=null,cn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ku||(Ku=!0,Zg(on,function(){return aa(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=hr.transition,hr.transition=null;var w=st;st=1;var x=ut;ut|=4,Lh.current=null,rT(r,a),Ug(a,r),x0(Hd),Ji=!!$d,Hd=$d=null,r.current=a,iT(a),Wn(),ut=x,st=w,hr.transition=g}else r.current=a;if(Ku&&(Ku=!1,ls=r,Qu=f),g=r.pendingLanes,g===0&&(as=null),Br(a.stateNode),Fn(r,Ze()),s!==null)for(d=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Gu)throw Gu=!1,r=Fh,Fh=null,r;return(Qu&1)!==0&&r.tag!==0&&aa(),g=r.pendingLanes,(g&1)!==0?r===Uh?dl++:(dl=0,Uh=r):dl=0,rs(),null}function aa(){if(ls!==null){var r=Qi(Qu),s=hr.transition,a=st;try{if(hr.transition=null,st=16>r?16:r,ls===null)var d=!1;else{if(r=ls,ls=null,Qu=0,(ut&6)!==0)throw Error(t(331));var f=ut;for(ut|=4,Pe=r.current;Pe!==null;){var g=Pe,w=g.child;if((Pe.flags&16)!==0){var x=g.deletions;if(x!==null){for(var D=0;D<x.length;D++){var Q=x[D];for(Pe=Q;Pe!==null;){var se=Pe;switch(se.tag){case 0:case 11:case 15:ll(8,se,g)}var ae=se.child;if(ae!==null)ae.return=se,Pe=ae;else for(;Pe!==null;){se=Pe;var ie=se.sibling,ve=se.return;if(Og(se),se===Q){Pe=null;break}if(ie!==null){ie.return=ve,Pe=ie;break}Pe=ve}}}var Re=g.alternate;if(Re!==null){var Ae=Re.child;if(Ae!==null){Re.child=null;do{var Ft=Ae.sibling;Ae.sibling=null,Ae=Ft}while(Ae!==null)}}Pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Pe=w;else e:for(;Pe!==null;){if(g=Pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ll(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,Pe=$;break e}Pe=g.return}}var M=r.current;for(Pe=M;Pe!==null;){w=Pe;var W=w.child;if((w.subtreeFlags&2064)!==0&&W!==null)W.return=w,Pe=W;else e:for(w=M;Pe!==null;){if(x=Pe,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Hu(9,x)}}catch(Ne){Vt(x,x.return,Ne)}if(x===w){Pe=null;break e}var ue=x.sibling;if(ue!==null){ue.return=x.return,Pe=ue;break e}Pe=x.return}}if(ut=f,rs(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ft,r)}catch{}d=!0}return d}finally{st=a,hr.transition=s}}return!1}function Yg(r,s,a){s=ra(a,s),s=pg(r,s,1),r=ss(r,s,1),s=Rn(),r!==null&&(Gi(r,1,s),Fn(r,s))}function Vt(r,s,a){if(r.tag===3)Yg(r,r,a);else for(;s!==null;){if(s.tag===3){Yg(s,r,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(as===null||!as.has(d))){r=ra(a,r),r=mg(s,r,1),s=ss(s,r,1),r=Rn(),s!==null&&(Gi(s,1,r),Fn(s,r));break}}s=s.return}}function cT(r,s,a){var d=r.pingCache;d!==null&&d.delete(s),s=Rn(),r.pingedLanes|=r.suspendedLanes&a,nn===r&&(cn&a)===a&&(Yt===4||Yt===3&&(cn&130023424)===cn&&500>Ze()-Mh?io(r,0):Vh|=a),Fn(r,s)}function Jg(r,s){s===0&&((r.mode&1)===0?s=1:(s=ko,ko<<=1,(ko&130023424)===0&&(ko=4194304)));var a=Rn();r=Ii(r,s),r!==null&&(Gi(r,s,a),Fn(r,a))}function dT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Jg(r,a)}function hT(r,s){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Jg(r,a)}var Xg;Xg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||On.current)Vn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Vn=!1,Z0(r,s,a);Vn=(r.flags&131072)!==0}else Vn=!1,Rt&&(s.flags&1048576)!==0&&Nm(s,Ru,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Bu(r,s),r=s.pendingProps;var f=Qo(s,gn.current);ta(s,a),f=ph(null,s,d,r,f,a);var g=mh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ln(d)?(g=!0,Su(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,ah(s),f.updater=ju,s.stateNode=f,f._reactInternals=s,Eh(s,d,r,a),s=Ch(null,s,d,!0,g,a)):(s.tag=0,Rt&&g&&Jd(s),Pn(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Bu(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=pT(d),r=Ar(d,r),f){case 0:s=Sh(null,s,d,r,a);break e;case 1:s=Sg(null,s,d,r,a);break e;case 11:s=_g(null,s,d,r,a);break e;case 14:s=wg(null,s,d,Ar(d.type,r),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Ar(d,f),Sh(r,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Ar(d,f),Sg(r,s,d,f,a);case 3:e:{if(Cg(s),r===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,jm(r,s),Du(s,d,null,a);var w=s.memoizedState;if(d=w.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ra(Error(t(423)),s),s=Pg(r,s,d,a,f);break e}else if(d!==f){f=ra(Error(t(424)),s),s=Pg(r,s,d,a,f);break e}else for(Jn=es(s.stateNode.containerInfo.firstChild),Yn=s,Rt=!0,Rr=null,a=Fm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xo(),d===f){s=Ci(r,s,a);break e}Pn(r,s,d,a)}s=s.child}return s;case 5:return $m(s),r===null&&eh(s),d=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Wd(d,f)?w=null:g!==null&&Wd(d,g)&&(s.flags|=32),Ig(r,s),Pn(r,s,w,a),s.child;case 6:return r===null&&eh(s),null;case 13:return Rg(r,s,a);case 4:return lh(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Zo(s,null,d,a):Pn(r,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Ar(d,f),_g(r,s,d,f,a);case 7:return Pn(r,s,s.pendingProps,a),s.child;case 8:return Pn(r,s,s.pendingProps.children,a),s.child;case 12:return Pn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,wt(ku,d._currentValue),d._currentValue=w,g!==null)if(Pr(g.value,w)){if(g.children===f.children&&!On.current){s=Ci(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var x=g.dependencies;if(x!==null){w=g.child;for(var D=x.firstContext;D!==null;){if(D.context===d){if(g.tag===1){D=Si(-1,a&-a),D.tag=2;var Q=g.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?D.next=D:(D.next=se.next,se.next=D),Q.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),sh(g.return,a,s),x.lanes|=a;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,x=w.alternate,x!==null&&(x.lanes|=a),sh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Pn(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,ta(s,a),f=cr(f),d=d(f),s.flags|=1,Pn(r,s,d,a),s.child;case 14:return d=s.type,f=Ar(d,s.pendingProps),f=Ar(d.type,f),wg(r,s,d,f,a);case 15:return Eg(r,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Ar(d,f),Bu(r,s),s.tag=1,Ln(d)?(r=!0,Su(s)):r=!1,ta(s,a),hg(s,d,f),Eh(s,d,f,a),Ch(null,s,d,!0,r,a);case 19:return xg(r,s,a);case 22:return Tg(r,s,a)}throw Error(t(156,s.tag))};function Zg(r,s){return mt(r,s)}function fT(r,s,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(r,s,a,d){return new fT(r,s,a,d)}function Wh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function pT(r){if(typeof r=="function")return Wh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===lt)return 14}return 2}function ds(r,s){var a=r.alternate;return a===null?(a=fr(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Zu(r,s,a,d,f,g){var w=2;if(d=r,typeof r=="function")Wh(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case S:return oo(a.children,f,g,s);case C:w=8,f|=8;break;case A:return r=fr(12,a,s,f|2),r.elementType=A,r.lanes=g,r;case k:return r=fr(13,a,s,f),r.elementType=k,r.lanes=g,r;case Ke:return r=fr(19,a,s,f),r.elementType=Ke,r.lanes=g,r;case it:return ec(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:w=10;break e;case O:w=9;break e;case V:w=11;break e;case lt:w=14;break e;case vt:w=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=fr(w,a,s,f),s.elementType=r,s.type=d,s.lanes=g,s}function oo(r,s,a,d){return r=fr(7,r,d,s),r.lanes=a,r}function ec(r,s,a,d){return r=fr(22,r,d,s),r.elementType=it,r.lanes=a,r.stateNode={isHidden:!1},r}function qh(r,s,a){return r=fr(6,r,null,s),r.lanes=a,r}function Gh(r,s,a){return s=fr(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function mT(r,s,a,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qi(0),this.expirationTimes=qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Kh(r,s,a,d,f,g,w,x,D){return r=new mT(r,s,a,x,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=fr(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(g),r}function gT(r,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fe,key:d==null?null:""+d,children:r,containerInfo:s,implementation:a}}function ey(r){if(!r)return ns;r=r._reactInternals;e:{if(Ee(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ln(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Ln(a))return Am(r,a,s)}return s}function ty(r,s,a,d,f,g,w,x,D){return r=Kh(a,d,!0,r,f,g,w,x,D),r.context=ey(null),a=r.current,d=Rn(),f=us(a),g=Si(d,f),g.callback=s??null,ss(a,g,f),r.current.lanes=f,Gi(r,f,d),Fn(r,d),r}function tc(r,s,a,d){var f=s.current,g=Rn(),w=us(f);return a=ey(a),s.context===null?s.context=a:s.pendingContext=a,s=Si(g,w),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=ss(f,s,w),r!==null&&(Nr(r,f,w,g),bu(r,f,w)),w}function nc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ny(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Qh(r,s){ny(r,s),(r=r.alternate)&&ny(r,s)}function yT(){return null}var ry=typeof reportError=="function"?reportError:function(r){console.error(r)};function Yh(r){this._internalRoot=r}rc.prototype.render=Yh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));tc(r,s,null,null)},rc.prototype.unmount=Yh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ro(function(){tc(null,r,null,null)}),s[_i]=null}};function rc(r){this._internalRoot=r}rc.prototype.unstable_scheduleHydration=function(r){if(r){var s=ru();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Hr.length&&s!==0&&s<Hr[a].priority;a++);Hr.splice(a,0,r),a===0&&ou(r)}};function Jh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ic(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function iy(){}function vT(r,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var Q=nc(w);g.call(Q)}}var w=ty(s,d,r,0,null,!1,!1,"",iy);return r._reactRootContainer=w,r[_i]=w.current,Qa(r.nodeType===8?r.parentNode:r),ro(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var x=d;d=function(){var Q=nc(D);x.call(Q)}}var D=Kh(r,0,!1,null,null,!1,!1,"",iy);return r._reactRootContainer=D,r[_i]=D.current,Qa(r.nodeType===8?r.parentNode:r),ro(function(){tc(s,D,a,d)}),D}function sc(r,s,a,d,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var x=f;f=function(){var D=nc(w);x.call(D)}}tc(s,w,r,f)}else w=vT(a,s,r,f,d);return nc(w)}tu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Wi(s.pendingLanes);a!==0&&(Ki(s,a|1),Fn(s,Ze()),(ut&6)===0&&(oa=Ze()+500,rs()))}break;case 13:ro(function(){var d=Ii(r,1);if(d!==null){var f=Rn();Nr(d,r,1,f)}}),Qh(r,1)}},No=function(r){if(r.tag===13){var s=Ii(r,134217728);if(s!==null){var a=Rn();Nr(s,r,134217728,a)}Qh(r,134217728)}},nu=function(r){if(r.tag===13){var s=us(r),a=Ii(r,s);if(a!==null){var d=Rn();Nr(a,r,s,d)}Qh(r,s)}},ru=function(){return st},iu=function(r,s){var a=st;try{return st=r,s()}finally{st=a}},fi=function(r,s,a){switch(s){case"input":if(Vr(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==r&&d.form===r.form){var f=Tu(d);if(!f)throw Error(t(90));ye(d),Vr(d,f)}}}break;case"textarea":An(r,a);break;case"select":s=a.value,s!=null&&yr(r,!!a.multiple,s,!1)}},Fr=Bh,Ur=ro;var _T={usingClientEntryPoint:!1,Events:[Xa,Go,Tu,Hn,js,Bh]},hl={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wT={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ct(r),r===null?null:r.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||yT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{ft=oc.inject(wT),jt=oc}catch{}}return Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_T,Un.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(s))throw Error(t(200));return gT(r,s,null,a)},Un.createRoot=function(r,s){if(!Jh(r))throw Error(t(299));var a=!1,d="",f=ry;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Kh(r,1,!1,null,null,a,!1,d,f),r[_i]=s.current,Qa(r.nodeType===8?r.parentNode:r),new Yh(s)},Un.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ct(s),r=r===null?null:r.stateNode,r},Un.flushSync=function(r){return ro(r)},Un.hydrate=function(r,s,a){if(!ic(s))throw Error(t(200));return sc(null,r,s,!0,a)},Un.hydrateRoot=function(r,s,a){if(!Jh(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",w=ry;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ty(s,null,r,1,a??null,f,!1,g,w),r[_i]=s.current,Qa(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new rc(s)},Un.render=function(r,s,a){if(!ic(s))throw Error(t(200));return sc(null,r,s,!1,a)},Un.unmountComponentAtNode=function(r){if(!ic(r))throw Error(t(40));return r._reactRootContainer?(ro(function(){sc(null,null,r,!1,function(){r._reactRootContainer=null,r[_i]=null})}),!0):!1},Un.unstable_batchedUpdates=Bh,Un.unstable_renderSubtreeIntoContainer=function(r,s,a,d){if(!ic(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return sc(r,s,a,!1,d)},Un.version="18.3.1-next-f1338f8080-20240426",Un}var hy;function y_(){if(hy)return ef.exports;hy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ef.exports=AT(),ef.exports}var fy;function xT(){if(fy)return ac;fy=1;var n=y_();return ac.createRoot=n.createRoot,ac.hydrateRoot=n.hydrateRoot,ac}var kT=xT();const NT=Qf(kT);var v_=y_();const bT=Qf(v_),DT=m_({__proto__:null,default:bT},[v_]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function At(){return At=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},At.apply(this,arguments)}var Ht;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ht||(Ht={}));const py="popstate";function OT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:h}=i.location;return Nl("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:mo(o)}return VT(e,t,null,n)}function Qe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LT(){return Math.random().toString(36).substr(2,8)}function my(n,e){return{usr:n.state,key:n.key,idx:e}}function Nl(n,e,t,i){return t===void 0&&(t=null),At({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ds(e):e,{state:t,key:e&&e.key||i||LT()})}function mo(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ds(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function VT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,h=Ht.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(At({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function E(){h=Ht.Pop;let H=_(),fe=H==null?null:H-y;y=H,p&&p({action:h,location:U.location,delta:fe})}function T(H,fe){h=Ht.Push;let ee=Nl(U.location,H,fe);y=_()+1;let ce=my(ee,y),pe=U.createHref(ee);try{c.pushState(ce,"",pe)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;o.location.assign(pe)}l&&p&&p({action:h,location:U.location,delta:1})}function P(H,fe){h=Ht.Replace;let ee=Nl(U.location,H,fe);y=_();let ce=my(ee,y),pe=U.createHref(ee);c.replaceState(ce,"",pe),l&&p&&p({action:h,location:U.location,delta:0})}function L(H){let fe=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof H=="string"?H:mo(H);return ee=ee.replace(/ $/,"%20"),Qe(fe,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,fe)}let U={get action(){return h},get location(){return n(o,c)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(py,E),p=H,()=>{o.removeEventListener(py,E),p=null}},createHref(H){return e(o,H)},createURL:L,encodeLocation(H){let fe=L(H);return{pathname:fe.pathname,search:fe.search,hash:fe.hash}},push:T,replace:P,go(H){return c.go(H)}};return U}var yt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(yt||(yt={}));const MT=new Set(["lazy","caseSensitive","path","id","index","children"]);function FT(n){return n.index===!0}function Pc(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((o,l)=>{let c=[...t,String(l)],h=typeof o.id=="string"?o.id:c.join("-");if(Qe(o.index!==!0||!o.children,"Cannot specify children on an index route"),Qe(!i[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),FT(o)){let p=At({},o,e(o),{id:h});return i[h]=p,p}else{let p=At({},o,e(o),{id:h,children:void 0});return i[h]=p,o.children&&(p.children=Pc(o.children,e,c,i)),p}})}function uo(n,e,t){return t===void 0&&(t="/"),mc(n,e,t,!1)}function mc(n,e,t,i){let o=typeof e=="string"?Ds(e):e,l=bi(o.pathname||"/",t);if(l==null)return null;let c=__(n);jT(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let y=JT(l);h=QT(c[p],y,i)}return h}function UT(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function __(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Qe(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=xi([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),__(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:GT(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of w_(l.path))o(l,c,p)}),e}function w_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=w_(i.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function jT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:KT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const zT=/^:[\w-]+$/,BT=3,$T=2,HT=1,WT=10,qT=-2,gy=n=>n==="*";function GT(n,e){let t=n.split("/"),i=t.length;return t.some(gy)&&(i+=qT),e&&(i+=$T),t.filter(o=>!gy(o)).reduce((o,l)=>o+(zT.test(l)?BT:l===""?HT:WT),i)}function KT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function QT(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,o={},l="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],y=h===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=Rc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),T=p.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=Rc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:xi([l,E.pathname]),pathnameBase:eI(xi([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=xi([l,E.pathnameBase]))}return c}function Rc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=YT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:T,isOptional:P}=_;if(T==="*"){let U=h[E]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const L=h[E];return P&&!L?y[T]=void 0:y[T]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function YT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),wa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function JT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wa(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function bi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function XT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ds(n):n;return{pathname:t?t.startsWith("/")?t:ZT(t,e):e,search:tI(i),hash:nI(o)}}function ZT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function rf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xc(n,e){let t=E_(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Zc(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ds(n):(o=At({},n),Qe(!o.pathname||!o.pathname.includes("?"),rf("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),rf("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),rf("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}h=E>=0?e[E]:"/"}let p=XT(o,h),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const xi=n=>n.join("/").replace(/\/\/+/g,"/"),eI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,nI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Ac{constructor(e,t,i,o){o===void 0&&(o=!1),this.status=e,this.statusText=t||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function bl(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const T_=["post","put","patch","delete"],rI=new Set(T_),iI=["get",...T_],sI=new Set(iI),oI=new Set([301,302,303,307,308]),aI=new Set([307,308]),sf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Jf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),I_="remix-router-transitions";function cI(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Qe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(n.mapRouteProperties)o=n.mapRouteProperties;else if(n.detectErrorBoundary){let b=n.detectErrorBoundary;o=F=>({hasErrorBoundary:b(F)})}else o=uI;let l={},c=Pc(n.routes,o,void 0,l),h,p=n.basename||"/",y=n.dataStrategy||pI,_=n.patchRoutesOnNavigation,E=At({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),T=null,P=new Set,L=null,U=null,H=null,fe=n.hydrationData!=null,ee=uo(c,n.history.location,p),ce=!1,pe=null;if(ee==null&&!_){let b=jn(404,{pathname:n.history.location.pathname}),{matches:F,route:G}=Ry(c);ee=F,pe={[G.id]:b}}ee&&!n.hydrationData&&Ur(ee,c,n.history.location.pathname).active&&(ee=null);let Ue;if(ee)if(ee.some(b=>b.route.lazy))Ue=!1;else if(!ee.some(b=>b.route.loader))Ue=!0;else if(E.v7_partialHydration){let b=n.hydrationData?n.hydrationData.loaderData:null,F=n.hydrationData?n.hydrationData.errors:null;if(F){let G=ee.findIndex(ne=>F[ne.route.id]!==void 0);Ue=ee.slice(0,G+1).every(ne=>!_f(ne.route,b,F))}else Ue=ee.every(G=>!_f(G.route,b,F))}else Ue=n.hydrationData!=null;else if(Ue=!1,ee=[],E.v7_partialHydration){let b=Ur(null,c,n.history.location.pathname);b.active&&b.matches&&(ce=!0,ee=b.matches)}let Fe,S={historyAction:n.history.action,location:n.history.location,matches:ee,initialized:Ue,navigation:sf,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||pe,fetchers:new Map,blockers:new Map},C=Ht.Pop,A=!1,N,O=!1,V=new Map,k=null,Ke=!1,lt=!1,vt=[],it=new Set,oe=new Map,ke=0,ge=-1,j=new Map,X=new Set,me=new Map,$e=new Map,Oe=new Set,z=new Map,K=new Map,q;function Z(){if(T=n.history.listen(b=>{let{action:F,location:G,delta:ne}=b;if(q){q(),q=void 0;return}wa(K.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=fi({currentLocation:S.location,nextLocation:G,historyAction:F});if(he&&ne!=null){let Se=new Promise(Le=>{q=Le});n.history.go(ne*-1),wr(he,{state:"blocked",location:G,proceed(){wr(he,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),Se.then(()=>n.history.go(ne))},reset(){let Le=new Map(S.blockers);Le.set(he,pl),ye({blockers:Le})}});return}return Mt(F,G)}),t){AI(e,V);let b=()=>xI(e,V);e.addEventListener("pagehide",b),k=()=>e.removeEventListener("pagehide",b)}return S.initialized||Mt(Ht.Pop,S.location,{initialHydration:!0}),Fe}function le(){T&&T(),k&&k(),P.clear(),N&&N.abort(),S.fetchers.forEach((b,F)=>rr(F)),S.blockers.forEach((b,F)=>Mr(F))}function _e(b){return P.add(b),()=>P.delete(b)}function ye(b,F){F===void 0&&(F={}),S=At({},S,b);let G=[],ne=[];E.v7_fetcherPersist&&S.fetchers.forEach((he,Se)=>{he.state==="idle"&&(Oe.has(Se)?ne.push(Se):G.push(Se))}),Oe.forEach(he=>{!S.fetchers.has(he)&&!oe.has(he)&&ne.push(he)}),[...P].forEach(he=>he(S,{deletedFetchers:ne,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),E.v7_fetcherPersist?(G.forEach(he=>S.fetchers.delete(he)),ne.forEach(he=>rr(he))):ne.forEach(he=>Oe.delete(he))}function be(b,F,G){var ne,he;let{flushSync:Se}=G===void 0?{}:G,Le=S.actionData!=null&&S.navigation.formMethod!=null&&br(S.navigation.formMethod)&&S.navigation.state==="loading"&&((ne=b.state)==null?void 0:ne._isRedirect)!==!0,Ce;F.actionData?Object.keys(F.actionData).length>0?Ce=F.actionData:Ce=null:Le?Ce=S.actionData:Ce=null;let Ie=F.loaderData?Cy(S.loaderData,F.loaderData,F.matches||[],F.errors):S.loaderData,we=S.blockers;we.size>0&&(we=new Map(we),we.forEach((We,Lt)=>we.set(Lt,pl)));let Ee=A===!0||S.navigation.formMethod!=null&&br(S.navigation.formMethod)&&((he=b.state)==null?void 0:he._isRedirect)!==!0;h&&(c=h,h=void 0),Ke||C===Ht.Pop||(C===Ht.Push?n.history.push(b,b.state):C===Ht.Replace&&n.history.replace(b,b.state));let je;if(C===Ht.Pop){let We=V.get(S.location.pathname);We&&We.has(b.pathname)?je={currentLocation:S.location,nextLocation:b}:V.has(b.pathname)&&(je={currentLocation:b,nextLocation:S.location})}else if(O){let We=V.get(S.location.pathname);We?We.add(b.pathname):(We=new Set([b.pathname]),V.set(S.location.pathname,We)),je={currentLocation:S.location,nextLocation:b}}ye(At({},F,{actionData:Ce,loaderData:Ie,historyAction:C,location:b,initialized:!0,navigation:sf,revalidation:"idle",restoreScrollPosition:Fr(b,F.matches||S.matches),preventScrollReset:Ee,blockers:we}),{viewTransitionOpts:je,flushSync:Se===!0}),C=Ht.Pop,A=!1,O=!1,Ke=!1,lt=!1,vt=[]}async function ht(b,F){if(typeof b=="number"){n.history.go(b);return}let G=vf(S.location,S.matches,p,E.v7_prependBasename,b,E.v7_relativeSplatPath,F?.fromRouteId,F?.relative),{path:ne,submission:he,error:Se}=yy(E.v7_normalizeFormMethod,!1,G,F),Le=S.location,Ce=Nl(S.location,ne,F&&F.state);Ce=At({},Ce,n.history.encodeLocation(Ce));let Ie=F&&F.replace!=null?F.replace:void 0,we=Ht.Push;Ie===!0?we=Ht.Replace:Ie===!1||he!=null&&br(he.formMethod)&&he.formAction===S.location.pathname+S.location.search&&(we=Ht.Replace);let Ee=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,je=(F&&F.flushSync)===!0,We=fi({currentLocation:Le,nextLocation:Ce,historyAction:we});if(We){wr(We,{state:"blocked",location:Ce,proceed(){wr(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),ht(b,F)},reset(){let Lt=new Map(S.blockers);Lt.set(We,pl),ye({blockers:Lt})}});return}return await Mt(we,Ce,{submission:he,pendingError:Se,preventScrollReset:Ee,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:je})}function Et(){if(xt(),ye({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){Mt(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}Mt(C||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:O===!0})}}async function Mt(b,F,G){N&&N.abort(),N=null,C=b,Ke=(G&&G.startUninterruptedRevalidation)===!0,js(S.location,S.matches),A=(G&&G.preventScrollReset)===!0,O=(G&&G.enableViewTransition)===!0;let ne=h||c,he=G&&G.overrideNavigation,Se=G!=null&&G.initialHydration&&S.matches&&S.matches.length>0&&!ce?S.matches:uo(ne,F,p),Le=(G&&G.flushSync)===!0;if(Se&&S.initialized&&!lt&&wI(S.location,F)&&!(G&&G.submission&&br(G.submission.formMethod))){be(F,{matches:Se},{flushSync:Le});return}let Ce=Ur(Se,ne,F.pathname);if(Ce.active&&Ce.matches&&(Se=Ce.matches),!Se){let{error:ct,notFoundMatches:Je,route:mt}=pn(F.pathname);be(F,{matches:Je,loaderData:{},errors:{[mt.id]:ct}},{flushSync:Le});return}N=new AbortController;let Ie=la(n.history,F,N.signal,G&&G.submission),we;if(G&&G.pendingError)we=[co(Se).route.id,{type:yt.error,error:G.pendingError}];else if(G&&G.submission&&br(G.submission.formMethod)){let ct=await Vr(Ie,F,G.submission,Se,Ce.active,{replace:G.replace,flushSync:Le});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[Je,mt]=ct.pendingActionResult;if(er(mt)&&bl(mt.error)&&mt.error.status===404){N=null,be(F,{matches:ct.matches,loaderData:{},errors:{[Je]:mt.error}});return}}Se=ct.matches||Se,we=ct.pendingActionResult,he=of(F,G.submission),Le=!1,Ce.active=!1,Ie=la(n.history,Ie.url,Ie.signal)}let{shortCircuited:Ee,matches:je,loaderData:We,errors:Lt}=await Ro(Ie,F,Se,Ce.active,he,G&&G.submission,G&&G.fetcherSubmission,G&&G.replace,G&&G.initialHydration===!0,Le,we);Ee||(N=null,be(F,At({matches:je||Se},Py(we),{loaderData:We,errors:Lt})))}async function Vr(b,F,G,ne,he,Se){Se===void 0&&(Se={}),xt();let Le=PI(F,G);if(ye({navigation:Le},{flushSync:Se.flushSync===!0}),he){let we=await Nn(ne,F.pathname,b.signal);if(we.type==="aborted")return{shortCircuited:!0};if(we.type==="error"){let Ee=co(we.partialMatches).route.id;return{matches:we.partialMatches,pendingActionResult:[Ee,{type:yt.error,error:we.error}]}}else if(we.matches)ne=we.matches;else{let{notFoundMatches:Ee,error:je,route:We}=pn(F.pathname);return{matches:Ee,pendingActionResult:[We.id,{type:yt.error,error:je}]}}}let Ce,Ie=yl(ne,F);if(!Ie.route.action&&!Ie.route.lazy)Ce={type:yt.error,error:jn(405,{method:b.method,pathname:F.pathname,routeId:Ie.route.id})};else if(Ce=(await vr("action",S,b,[Ie],ne,null))[Ie.route.id],b.signal.aborted)return{shortCircuited:!0};if(ho(Ce)){let we;return Se&&Se.replace!=null?we=Se.replace:we=Ty(Ce.response.headers.get("Location"),new URL(b.url),p)===S.location.pathname+S.location.search,await An(b,Ce,!0,{submission:G,replace:we}),{shortCircuited:!0}}if(_s(Ce))throw jn(400,{type:"defer-action"});if(er(Ce)){let we=co(ne,Ie.route.id);return(Se&&Se.replace)!==!0&&(C=Ht.Push),{matches:ne,pendingActionResult:[we.route.id,Ce]}}return{matches:ne,pendingActionResult:[Ie.route.id,Ce]}}async function Ro(b,F,G,ne,he,Se,Le,Ce,Ie,we,Ee){let je=he||of(F,Se),We=Se||Le||xy(je),Lt=!Ke&&(!E.v7_partialHydration||!Ie);if(ne){if(Lt){let ft=di(Ee);ye(At({navigation:je},ft!==void 0?{actionData:ft}:{}),{flushSync:we})}let et=await Nn(G,F.pathname,b.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let ft=co(et.partialMatches).route.id;return{matches:et.partialMatches,loaderData:{},errors:{[ft]:et.error}}}else if(et.matches)G=et.matches;else{let{error:ft,notFoundMatches:jt,route:Br}=pn(F.pathname);return{matches:jt,loaderData:{},errors:{[Br.id]:ft}}}}let ct=h||c,[Je,mt]=_y(n.history,S,G,We,F,E.v7_partialHydration&&Ie===!0,E.v7_skipActionErrorRevalidation,lt,vt,it,Oe,me,X,ct,p,Ee);if(kn(et=>!(G&&G.some(ft=>ft.route.id===et))||Je&&Je.some(ft=>ft.route.id===et)),ge=++ke,Je.length===0&&mt.length===0){let et=zi();return be(F,At({matches:G,loaderData:{},errors:Ee&&er(Ee[1])?{[Ee[0]]:Ee[1].error}:null},Py(Ee),et?{fetchers:new Map(S.fetchers)}:{}),{flushSync:we}),{shortCircuited:!0}}if(Lt){let et={};if(!ne){et.navigation=je;let ft=di(Ee);ft!==void 0&&(et.actionData=ft)}mt.length>0&&(et.fetchers=gr(mt)),ye(et,{flushSync:we})}mt.forEach(et=>{xn(et.key),et.controller&&oe.set(et.key,et.controller)});let ir=()=>mt.forEach(et=>xn(et.key));N&&N.signal.addEventListener("abort",ir);let{loaderResults:jr,fetcherResults:Wn}=await Ot(S,G,Je,mt,b);if(b.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",ir),mt.forEach(et=>oe.delete(et.key));let Ze=lc(jr);if(Ze)return await An(b,Ze.result,!0,{replace:Ce}),{shortCircuited:!0};if(Ze=lc(Wn),Ze)return X.add(Ze.key),await An(b,Ze.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Hi,errors:qn}=Sy(S,G,jr,Ee,mt,Wn,z);z.forEach((et,ft)=>{et.subscribe(jt=>{(jt||et.done)&&z.delete(ft)})}),E.v7_partialHydration&&Ie&&S.errors&&(qn=At({},S.errors,qn));let mn=zi(),on=Bi(ge),zr=mn||on||mt.length>0;return At({matches:G,loaderData:Hi,errors:qn},zr?{fetchers:new Map(S.fetchers)}:{})}function di(b){if(b&&!er(b[1]))return{[b[0]]:b[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function gr(b){return b.forEach(F=>{let G=S.fetchers.get(F.key),ne=ml(void 0,G?G.data:void 0);S.fetchers.set(F.key,ne)}),new Map(S.fetchers)}function yr(b,F,G,ne){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xn(b);let he=(ne&&ne.flushSync)===!0,Se=h||c,Le=vf(S.location,S.matches,p,E.v7_prependBasename,G,E.v7_relativeSplatPath,F,ne?.relative),Ce=uo(Se,Le,p),Ie=Ur(Ce,Se,Le);if(Ie.active&&Ie.matches&&(Ce=Ie.matches),!Ce){Sn(b,F,jn(404,{pathname:Le}),{flushSync:he});return}let{path:we,submission:Ee,error:je}=yy(E.v7_normalizeFormMethod,!0,Le,ne);if(je){Sn(b,F,je,{flushSync:he});return}let We=yl(Ce,we),Lt=(ne&&ne.preventScrollReset)===!0;if(Ee&&br(Ee.formMethod)){Fs(b,F,we,We,Ce,Ie.active,he,Lt,Ee);return}me.set(b,{routeId:F,path:we}),Ui(b,F,we,We,Ce,Ie.active,he,Lt,Ee)}async function Fs(b,F,G,ne,he,Se,Le,Ce,Ie){xt(),me.delete(b);function we(tt){if(!tt.route.action&&!tt.route.lazy){let sr=jn(405,{method:Ie.formMethod,pathname:G,routeId:F});return Sn(b,F,sr,{flushSync:Le}),!0}return!1}if(!Se&&we(ne))return;let Ee=S.fetchers.get(b);Zt(b,RI(Ie,Ee),{flushSync:Le});let je=new AbortController,We=la(n.history,G,je.signal,Ie);if(Se){let tt=await Nn(he,new URL(We.url).pathname,We.signal,b);if(tt.type==="aborted")return;if(tt.type==="error"){Sn(b,F,tt.error,{flushSync:Le});return}else if(tt.matches){if(he=tt.matches,ne=yl(he,G),we(ne))return}else{Sn(b,F,jn(404,{pathname:G}),{flushSync:Le});return}}oe.set(b,je);let Lt=ke,Je=(await vr("action",S,We,[ne],he,b))[ne.route.id];if(We.signal.aborted){oe.get(b)===je&&oe.delete(b);return}if(E.v7_fetcherPersist&&Oe.has(b)){if(ho(Je)||er(Je)){Zt(b,ps(void 0));return}}else{if(ho(Je))if(oe.delete(b),ge>Lt){Zt(b,ps(void 0));return}else return X.add(b),Zt(b,ml(Ie)),An(We,Je,!1,{fetcherSubmission:Ie,preventScrollReset:Ce});if(er(Je)){Sn(b,F,Je.error);return}}if(_s(Je))throw jn(400,{type:"defer-action"});let mt=S.navigation.location||S.location,ir=la(n.history,mt,je.signal),jr=h||c,Wn=S.navigation.state!=="idle"?uo(jr,S.navigation.location,p):S.matches;Qe(Wn,"Didn't find any matches after fetcher action");let Ze=++ke;j.set(b,Ze);let Hi=ml(Ie,Je.data);S.fetchers.set(b,Hi);let[qn,mn]=_y(n.history,S,Wn,Ie,mt,!1,E.v7_skipActionErrorRevalidation,lt,vt,it,Oe,me,X,jr,p,[ne.route.id,Je]);mn.filter(tt=>tt.key!==b).forEach(tt=>{let sr=tt.key,Bs=S.fetchers.get(sr),Ao=ml(void 0,Bs?Bs.data:void 0);S.fetchers.set(sr,Ao),xn(sr),tt.controller&&oe.set(sr,tt.controller)}),ye({fetchers:new Map(S.fetchers)});let on=()=>mn.forEach(tt=>xn(tt.key));je.signal.addEventListener("abort",on);let{loaderResults:zr,fetcherResults:et}=await Ot(S,Wn,qn,mn,ir);if(je.signal.aborted)return;je.signal.removeEventListener("abort",on),j.delete(b),oe.delete(b),mn.forEach(tt=>oe.delete(tt.key));let ft=lc(zr);if(ft)return An(ir,ft.result,!1,{preventScrollReset:Ce});if(ft=lc(et),ft)return X.add(ft.key),An(ir,ft.result,!1,{preventScrollReset:Ce});let{loaderData:jt,errors:Br}=Sy(S,Wn,zr,void 0,mn,et,z);if(S.fetchers.has(b)){let tt=ps(Je.data);S.fetchers.set(b,tt)}Bi(Ze),S.navigation.state==="loading"&&Ze>ge?(Qe(C,"Expected pending action"),N&&N.abort(),be(S.navigation.location,{matches:Wn,loaderData:jt,errors:Br,fetchers:new Map(S.fetchers)})):(ye({errors:Br,loaderData:Cy(S.loaderData,jt,Wn,Br),fetchers:new Map(S.fetchers)}),lt=!1)}async function Ui(b,F,G,ne,he,Se,Le,Ce,Ie){let we=S.fetchers.get(b);Zt(b,ml(Ie,we?we.data:void 0),{flushSync:Le});let Ee=new AbortController,je=la(n.history,G,Ee.signal);if(Se){let Je=await Nn(he,new URL(je.url).pathname,je.signal,b);if(Je.type==="aborted")return;if(Je.type==="error"){Sn(b,F,Je.error,{flushSync:Le});return}else if(Je.matches)he=Je.matches,ne=yl(he,G);else{Sn(b,F,jn(404,{pathname:G}),{flushSync:Le});return}}oe.set(b,Ee);let We=ke,ct=(await vr("loader",S,je,[ne],he,b))[ne.route.id];if(_s(ct)&&(ct=await Xf(ct,je.signal,!0)||ct),oe.get(b)===Ee&&oe.delete(b),!je.signal.aborted){if(Oe.has(b)){Zt(b,ps(void 0));return}if(ho(ct))if(ge>We){Zt(b,ps(void 0));return}else{X.add(b),await An(je,ct,!1,{preventScrollReset:Ce});return}if(er(ct)){Sn(b,F,ct.error);return}Qe(!_s(ct),"Unhandled fetcher deferred data"),Zt(b,ps(ct.data))}}async function An(b,F,G,ne){let{submission:he,fetcherSubmission:Se,preventScrollReset:Le,replace:Ce}=ne===void 0?{}:ne;F.response.headers.has("X-Remix-Revalidate")&&(lt=!0);let Ie=F.response.headers.get("Location");Qe(Ie,"Expected a Location header on the redirect Response"),Ie=Ty(Ie,new URL(b.url),p);let we=Nl(S.location,Ie,{_isRedirect:!0});if(t){let Je=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Je=!0;else if(Jf.test(Ie)){const mt=n.history.createURL(Ie);Je=mt.origin!==e.location.origin||bi(mt.pathname,p)==null}if(Je){Ce?e.location.replace(Ie):e.location.assign(Ie);return}}N=null;let Ee=Ce===!0||F.response.headers.has("X-Remix-Replace")?Ht.Replace:Ht.Push,{formMethod:je,formAction:We,formEncType:Lt}=S.navigation;!he&&!Se&&je&&We&&Lt&&(he=xy(S.navigation));let ct=he||Se;if(aI.has(F.response.status)&&ct&&br(ct.formMethod))await Mt(Ee,we,{submission:At({},ct,{formAction:Ie}),preventScrollReset:Le||A,enableViewTransition:G?O:void 0});else{let Je=of(we,he);await Mt(Ee,we,{overrideNavigation:Je,fetcherSubmission:Se,preventScrollReset:Le||A,enableViewTransition:G?O:void 0})}}async function vr(b,F,G,ne,he,Se){let Le,Ce={};try{Le=await mI(y,b,F,G,ne,he,Se,l,o)}catch(Ie){return ne.forEach(we=>{Ce[we.route.id]={type:yt.error,error:Ie}}),Ce}for(let[Ie,we]of Object.entries(Le))if(EI(we)){let Ee=we.result;Ce[Ie]={type:yt.redirect,response:vI(Ee,G,Ie,he,p,E.v7_relativeSplatPath)}}else Ce[Ie]=await yI(we);return Ce}async function Ot(b,F,G,ne,he){let Se=b.matches,Le=vr("loader",b,he,G,F,null),Ce=Promise.all(ne.map(async Ee=>{if(Ee.matches&&Ee.match&&Ee.controller){let We=(await vr("loader",b,la(n.history,Ee.path,Ee.controller.signal),[Ee.match],Ee.matches,Ee.key))[Ee.match.route.id];return{[Ee.key]:We}}else return Promise.resolve({[Ee.key]:{type:yt.error,error:jn(404,{pathname:Ee.path})}})})),Ie=await Le,we=(await Ce).reduce((Ee,je)=>Object.assign(Ee,je),{});return await Promise.all([SI(F,Ie,he.signal,Se,b.loaderData),CI(F,we,ne)]),{loaderResults:Ie,fetcherResults:we}}function xt(){lt=!0,vt.push(...kn()),me.forEach((b,F)=>{oe.has(F)&&it.add(F),xn(F)})}function Zt(b,F,G){G===void 0&&(G={}),S.fetchers.set(b,F),ye({fetchers:new Map(S.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function Sn(b,F,G,ne){ne===void 0&&(ne={});let he=co(S.matches,F);rr(b),ye({errors:{[he.route.id]:G},fetchers:new Map(S.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function _r(b){return $e.set(b,($e.get(b)||0)+1),Oe.has(b)&&Oe.delete(b),S.fetchers.get(b)||lI}function rr(b){let F=S.fetchers.get(b);oe.has(b)&&!(F&&F.state==="loading"&&j.has(b))&&xn(b),me.delete(b),j.delete(b),X.delete(b),E.v7_fetcherPersist&&Oe.delete(b),it.delete(b),S.fetchers.delete(b)}function hi(b){let F=($e.get(b)||0)-1;F<=0?($e.delete(b),Oe.add(b),E.v7_fetcherPersist||rr(b)):$e.set(b,F),ye({fetchers:new Map(S.fetchers)})}function xn(b){let F=oe.get(b);F&&(F.abort(),oe.delete(b))}function ji(b){for(let F of b){let G=_r(F),ne=ps(G.data);S.fetchers.set(F,ne)}}function zi(){let b=[],F=!1;for(let G of X){let ne=S.fetchers.get(G);Qe(ne,"Expected fetcher: "+G),ne.state==="loading"&&(X.delete(G),b.push(G),F=!0)}return ji(b),F}function Bi(b){let F=[];for(let[G,ne]of j)if(ne<b){let he=S.fetchers.get(G);Qe(he,"Expected fetcher: "+G),he.state==="loading"&&(xn(G),j.delete(G),F.push(G))}return ji(F),F.length>0}function Us(b,F){let G=S.blockers.get(b)||pl;return K.get(b)!==F&&K.set(b,F),G}function Mr(b){S.blockers.delete(b),K.delete(b)}function wr(b,F){let G=S.blockers.get(b)||pl;Qe(G.state==="unblocked"&&F.state==="blocked"||G.state==="blocked"&&F.state==="blocked"||G.state==="blocked"&&F.state==="proceeding"||G.state==="blocked"&&F.state==="unblocked"||G.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+G.state+" -> "+F.state);let ne=new Map(S.blockers);ne.set(b,F),ye({blockers:ne})}function fi(b){let{currentLocation:F,nextLocation:G,historyAction:ne}=b;if(K.size===0)return;K.size>1&&wa(!1,"A router only supports one blocker at a time");let he=Array.from(K.entries()),[Se,Le]=he[he.length-1],Ce=S.blockers.get(Se);if(!(Ce&&Ce.state==="proceeding")&&Le({currentLocation:F,nextLocation:G,historyAction:ne}))return Se}function pn(b){let F=jn(404,{pathname:b}),G=h||c,{matches:ne,route:he}=Ry(G);return kn(),{notFoundMatches:ne,route:he,error:F}}function kn(b){let F=[];return z.forEach((G,ne)=>{(!b||b(ne))&&(G.cancel(),F.push(ne),z.delete(ne))}),F}function $i(b,F,G){if(L=b,H=F,U=G||null,!fe&&S.navigation===sf){fe=!0;let ne=Fr(S.location,S.matches);ne!=null&&ye({restoreScrollPosition:ne})}return()=>{L=null,H=null,U=null}}function Hn(b,F){return U&&U(b,F.map(ne=>UT(ne,S.loaderData)))||b.key}function js(b,F){if(L&&H){let G=Hn(b,F);L[G]=H()}}function Fr(b,F){if(L){let G=Hn(b,F),ne=L[G];if(typeof ne=="number")return ne}return null}function Ur(b,F,G){if(_)if(b){if(Object.keys(b[0].params).length>0)return{active:!0,matches:mc(F,G,p,!0)}}else return{active:!0,matches:mc(F,G,p,!0)||[]};return{active:!1,matches:null}}async function Nn(b,F,G,ne){if(!_)return{type:"success",matches:b};let he=b;for(;;){let Se=h==null,Le=h||c,Ce=l;try{await _({signal:G,path:F,matches:he,fetcherKey:ne,patch:(Ee,je)=>{G.aborted||Ey(Ee,je,Le,Ce,o)}})}catch(Ee){return{type:"error",error:Ee,partialMatches:he}}finally{Se&&!G.aborted&&(c=[...c])}if(G.aborted)return{type:"aborted"};let Ie=uo(Le,F,p);if(Ie)return{type:"success",matches:Ie};let we=mc(Le,F,p,!0);if(!we||he.length===we.length&&he.every((Ee,je)=>Ee.route.id===we[je].route.id))return{type:"success",matches:null};he=we}}function zs(b){l={},h=Pc(b,o,void 0,l)}function kt(b,F){let G=h==null;Ey(b,F,h||c,l,o),G&&(c=[...c],ye({}))}return Fe={get basename(){return p},get future(){return E},get state(){return S},get routes(){return c},get window(){return e},initialize:Z,subscribe:_e,enableScrollRestoration:$i,navigate:ht,fetch:yr,revalidate:Et,createHref:b=>n.history.createHref(b),encodeLocation:b=>n.history.encodeLocation(b),getFetcher:_r,deleteFetcher:hi,dispose:le,getBlocker:Us,deleteBlocker:Mr,patchRoutes:kt,_internalFetchControllers:oe,_internalActiveDeferreds:z,_internalSetRoutes:zs},Fe}function dI(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function vf(n,e,t,i,o,l,c,h){let p,y;if(c){p=[];for(let E of e)if(p.push(E),E.route.id===c){y=E;break}}else p=e,y=e[e.length-1];let _=Zc(o||".",Xc(p,l),bi(n.pathname,t)||n.pathname,h==="path");if(o==null&&(_.search=n.search,_.hash=n.hash),(o==null||o===""||o===".")&&y){let E=Zf(_.search);if(y.route.index&&!E)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!y.route.index&&E){let T=new URLSearchParams(_.search),P=T.getAll("index");T.delete("index"),P.filter(U=>U).forEach(U=>T.append("index",U));let L=T.toString();_.search=L?"?"+L:""}}return i&&t!=="/"&&(_.pathname=_.pathname==="/"?t:xi([t,_.pathname])),mo(_)}function yy(n,e,t,i){if(!i||!dI(i))return{path:t};if(i.formMethod&&!II(i.formMethod))return{path:t,error:jn(405,{method:i.formMethod})};let o=()=>({path:t,error:jn(400,{type:"invalid-body"})}),l=i.formMethod||"get",c=n?l.toUpperCase():l.toLowerCase(),h=P_(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!br(c))return o();let T=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((P,L)=>{let[U,H]=L;return""+P+U+"="+H+`
`},""):String(i.body);return{path:t,submission:{formMethod:c,formAction:h,formEncType:i.formEncType,formData:void 0,json:void 0,text:T}}}else if(i.formEncType==="application/json"){if(!br(c))return o();try{let T=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:c,formAction:h,formEncType:i.formEncType,formData:void 0,json:T,text:void 0}}}catch{return o()}}}Qe(typeof FormData=="function","FormData is not available in this environment");let p,y;if(i.formData)p=wf(i.formData),y=i.formData;else if(i.body instanceof FormData)p=wf(i.body),y=i.body;else if(i.body instanceof URLSearchParams)p=i.body,y=Iy(p);else if(i.body==null)p=new URLSearchParams,y=new FormData;else try{p=new URLSearchParams(i.body),y=Iy(p)}catch{return o()}let _={formMethod:c,formAction:h,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(br(_.formMethod))return{path:t,submission:_};let E=Ds(t);return e&&E.search&&Zf(E.search)&&p.append("index",""),E.search="?"+p,{path:mo(E),submission:_}}function vy(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function _y(n,e,t,i,o,l,c,h,p,y,_,E,T,P,L,U){let H=U?er(U[1])?U[1].error:U[1].data:void 0,fe=n.createURL(e.location),ee=n.createURL(o),ce=t;l&&e.errors?ce=vy(t,Object.keys(e.errors)[0],!0):U&&er(U[1])&&(ce=vy(t,U[0]));let pe=U?U[1].statusCode:void 0,Ue=c&&pe&&pe>=400,Fe=ce.filter((C,A)=>{let{route:N}=C;if(N.lazy)return!0;if(N.loader==null)return!1;if(l)return _f(N,e.loaderData,e.errors);if(hI(e.loaderData,e.matches[A],C)||p.some(k=>k===C.route.id))return!0;let O=e.matches[A],V=C;return wy(C,At({currentUrl:fe,currentParams:O.params,nextUrl:ee,nextParams:V.params},i,{actionResult:H,actionStatus:pe,defaultShouldRevalidate:Ue?!1:h||fe.pathname+fe.search===ee.pathname+ee.search||fe.search!==ee.search||S_(O,V)}))}),S=[];return E.forEach((C,A)=>{if(l||!t.some(Ke=>Ke.route.id===C.routeId)||_.has(A))return;let N=uo(P,C.path,L);if(!N){S.push({key:A,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let O=e.fetchers.get(A),V=yl(N,C.path),k=!1;T.has(A)?k=!1:y.has(A)?(y.delete(A),k=!0):O&&O.state!=="idle"&&O.data===void 0?k=h:k=wy(V,At({currentUrl:fe,currentParams:e.matches[e.matches.length-1].params,nextUrl:ee,nextParams:t[t.length-1].params},i,{actionResult:H,actionStatus:pe,defaultShouldRevalidate:Ue?!1:h})),k&&S.push({key:A,routeId:C.routeId,path:C.path,matches:N,match:V,controller:new AbortController})}),[Fe,S]}function _f(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function hI(n,e,t){let i=!e||t.route.id!==e.route.id,o=n[t.route.id]===void 0;return i||o}function S_(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function wy(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Ey(n,e,t,i,o){var l;let c;if(n){let y=i[n];Qe(y,"No route found to patch children into: routeId = "+n),y.children||(y.children=[]),c=y.children}else c=t;let h=e.filter(y=>!c.some(_=>C_(y,_))),p=Pc(h,o,[n||"_","patch",String(((l=c)==null?void 0:l.length)||"0")],i);c.push(...p)}function C_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(l=>C_(t,l))}):!1}async function fI(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Qe(o,"No route found in manifest");let l={};for(let c in i){let p=o[c]!==void 0&&c!=="hasErrorBoundary";wa(!p,'Route "'+o.id+'" has a static property "'+c+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+c+'" will be ignored.')),!p&&!MT.has(c)&&(l[c]=i[c])}Object.assign(o,l),Object.assign(o,At({},e(o),{lazy:void 0}))}async function pI(n){let{matches:e}=n,t=e.filter(o=>o.shouldLoad);return(await Promise.all(t.map(o=>o.resolve()))).reduce((o,l,c)=>Object.assign(o,{[t[c].route.id]:l}),{})}async function mI(n,e,t,i,o,l,c,h,p,y){let _=l.map(P=>P.route.lazy?fI(P.route,p,h):void 0),E=l.map((P,L)=>{let U=_[L],H=o.some(ee=>ee.route.id===P.route.id);return At({},P,{shouldLoad:H,resolve:async ee=>(ee&&i.method==="GET"&&(P.route.lazy||P.route.loader)&&(H=!0),H?gI(e,i,P,U,ee,y):Promise.resolve({type:yt.data,result:void 0}))})}),T=await n({matches:E,request:i,params:l[0].params,fetcherKey:c,context:y});try{await Promise.all(_)}catch{}return T}async function gI(n,e,t,i,o,l){let c,h,p=y=>{let _,E=new Promise((L,U)=>_=U);h=()=>_(),e.signal.addEventListener("abort",h);let T=L=>typeof y!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):y({request:e,params:t.params,context:l},...L!==void 0?[L]:[]),P=(async()=>{try{return{type:"data",result:await(o?o(U=>T(U)):T())}}catch(L){return{type:"error",result:L}}})();return Promise.race([P,E])};try{let y=t.route[n];if(i)if(y){let _,[E]=await Promise.all([p(y).catch(T=>{_=T}),i]);if(_!==void 0)throw _;c=E}else if(await i,y=t.route[n],y)c=await p(y);else if(n==="action"){let _=new URL(e.url),E=_.pathname+_.search;throw jn(405,{method:e.method,pathname:E,routeId:t.route.id})}else return{type:yt.data,result:void 0};else if(y)c=await p(y);else{let _=new URL(e.url),E=_.pathname+_.search;throw jn(404,{pathname:E})}Qe(c.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(y){return{type:yt.error,result:y}}finally{h&&e.signal.removeEventListener("abort",h)}return c}async function yI(n){let{result:e,type:t}=n;if(R_(e)){let E;try{let T=e.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?e.body==null?E=null:E=await e.json():E=await e.text()}catch(T){return{type:yt.error,error:T}}return t===yt.error?{type:yt.error,error:new Ac(e.status,e.statusText,E),statusCode:e.status,headers:e.headers}:{type:yt.data,data:E,statusCode:e.status,headers:e.headers}}if(t===yt.error){if(Ay(e)){var i,o;if(e.data instanceof Error){var l,c;return{type:yt.error,error:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:yt.error,error:new Ac(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:bl(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:yt.error,error:e,statusCode:bl(e)?e.status:void 0}}if(TI(e)){var h,p;return{type:yt.deferred,deferredData:e,statusCode:(h=e.init)==null?void 0:h.status,headers:((p=e.init)==null?void 0:p.headers)&&new Headers(e.init.headers)}}if(Ay(e)){var y,_;return{type:yt.data,data:e.data,statusCode:(y=e.init)==null?void 0:y.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:yt.data,data:e}}function vI(n,e,t,i,o,l){let c=n.headers.get("Location");if(Qe(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!Jf.test(c)){let h=i.slice(0,i.findIndex(p=>p.route.id===t)+1);c=vf(new URL(e.url),h,o,!0,c,l),n.headers.set("Location",c)}return n}function Ty(n,e,t){if(Jf.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=bi(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return n}function la(n,e,t,i){let o=n.createURL(P_(e)).toString(),l={signal:t};if(i&&br(i.formMethod)){let{formMethod:c,formEncType:h}=i;l.method=c.toUpperCase(),h==="application/json"?(l.headers=new Headers({"Content-Type":h}),l.body=JSON.stringify(i.json)):h==="text/plain"?l.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?l.body=wf(i.formData):l.body=i.formData}return new Request(o,l)}function wf(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Iy(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function _I(n,e,t,i,o){let l={},c=null,h,p=!1,y={},_=t&&er(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let T=E.route.id,P=e[T];if(Qe(!ho(P),"Cannot handle redirect results in processLoaderData"),er(P)){let L=P.error;_!==void 0&&(L=_,_=void 0),c=c||{};{let U=co(n,T);c[U.route.id]==null&&(c[U.route.id]=L)}l[T]=void 0,p||(p=!0,h=bl(P.error)?P.error.status:500),P.headers&&(y[T]=P.headers)}else _s(P)?(i.set(T,P.deferredData),l[T]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!p&&(h=P.statusCode),P.headers&&(y[T]=P.headers)):(l[T]=P.data,P.statusCode&&P.statusCode!==200&&!p&&(h=P.statusCode),P.headers&&(y[T]=P.headers))}),_!==void 0&&t&&(c={[t[0]]:_},l[t[0]]=void 0),{loaderData:l,errors:c,statusCode:h||200,loaderHeaders:y}}function Sy(n,e,t,i,o,l,c){let{loaderData:h,errors:p}=_I(e,t,i,c);return o.forEach(y=>{let{key:_,match:E,controller:T}=y,P=l[_];if(Qe(P,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(er(P)){let L=co(n.matches,E?.route.id);p&&p[L.route.id]||(p=At({},p,{[L.route.id]:P.error})),n.fetchers.delete(_)}else if(ho(P))Qe(!1,"Unhandled fetcher revalidation redirect");else if(_s(P))Qe(!1,"Unhandled fetcher deferred data");else{let L=ps(P.data);n.fetchers.set(_,L)}}),{loaderData:h,errors:p}}function Cy(n,e,t,i){let o=At({},e);for(let l of t){let c=l.route.id;if(e.hasOwnProperty(c)?e[c]!==void 0&&(o[c]=e[c]):n[c]!==void 0&&l.route.loader&&(o[c]=n[c]),i&&i.hasOwnProperty(c))break}return o}function Py(n){return n?er(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function co(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Ry(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function jn(n,e){let{pathname:t,routeId:i,method:o,type:l,message:c}=e===void 0?{}:e,h="Unknown Server Error",p="Unknown @remix-run/router error";return n===400?(h="Bad Request",o&&t&&i?p="You made a "+o+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":l==="defer-action"?p="defer() is not supported in actions":l==="invalid-body"&&(p="Unable to encode submission body")):n===403?(h="Forbidden",p='Route "'+i+'" does not match URL "'+t+'"'):n===404?(h="Not Found",p='No route matches URL "'+t+'"'):n===405&&(h="Method Not Allowed",o&&t&&i?p="You made a "+o.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":o&&(p='Invalid request method "'+o.toUpperCase()+'"')),new Ac(n||500,h,new Error(p),!0)}function lc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(ho(o))return{key:i,result:o}}}function P_(n){let e=typeof n=="string"?Ds(n):n;return mo(At({},e,{hash:""}))}function wI(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function EI(n){return R_(n.result)&&oI.has(n.result.status)}function _s(n){return n.type===yt.deferred}function er(n){return n.type===yt.error}function ho(n){return(n&&n.type)===yt.redirect}function Ay(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function TI(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function R_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function II(n){return sI.has(n.toLowerCase())}function br(n){return rI.has(n.toLowerCase())}async function SI(n,e,t,i,o){let l=Object.entries(e);for(let c=0;c<l.length;c++){let[h,p]=l[c],y=n.find(T=>T?.route.id===h);if(!y)continue;let _=i.find(T=>T.route.id===y.route.id),E=_!=null&&!S_(_,y)&&(o&&o[y.route.id])!==void 0;_s(p)&&E&&await Xf(p,t,!1).then(T=>{T&&(e[h]=T)})}}async function CI(n,e,t){for(let i=0;i<t.length;i++){let{key:o,routeId:l,controller:c}=t[i],h=e[o];n.find(y=>y?.route.id===l)&&_s(h)&&(Qe(c,"Expected an AbortController for revalidating fetcher deferred result"),await Xf(h,c.signal,!0).then(y=>{y&&(e[o]=y)}))}}async function Xf(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:yt.data,data:n.deferredData.unwrappedData}}catch(o){return{type:yt.error,error:o}}return{type:yt.data,data:n.deferredData.data}}}function Zf(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function yl(n,e){let t=typeof e=="string"?Ds(e).search:e.search;if(n[n.length-1].route.index&&Zf(t||""))return n[n.length-1];let i=E_(n);return i[i.length-1]}function xy(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:l,json:c}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function of(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function PI(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ml(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function RI(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ps(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function AI(n,e){try{let t=n.sessionStorage.getItem(I_);if(t){let i=JSON.parse(t);for(let[o,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function xI(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(I_,JSON.stringify(t))}catch(i){wa(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xc.apply(this,arguments)}const $l=J.createContext(null),ep=J.createContext(null),Fi=J.createContext(null),tp=J.createContext(null),ui=J.createContext({outlet:null,matches:[],isDataRoute:!1}),A_=J.createContext(null);function kI(n,e){let{relative:t}=e===void 0?{}:e;Aa()||Qe(!1);let{basename:i,navigator:o}=J.useContext(Fi),{hash:l,pathname:c,search:h}=ed(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:xi([i,c])),o.createHref({pathname:p,search:h,hash:l})}function Aa(){return J.useContext(tp)!=null}function xa(){return Aa()||Qe(!1),J.useContext(tp).location}function x_(n){J.useContext(Fi).static||J.useLayoutEffect(n)}function ka(){let{isDataRoute:n}=J.useContext(ui);return n?WI():NI()}function NI(){Aa()||Qe(!1);let n=J.useContext($l),{basename:e,future:t,navigator:i}=J.useContext(Fi),{matches:o}=J.useContext(ui),{pathname:l}=xa(),c=JSON.stringify(Xc(o,t.v7_relativeSplatPath)),h=J.useRef(!1);return x_(()=>{h.current=!0}),J.useCallback(function(y,_){if(_===void 0&&(_={}),!h.current)return;if(typeof y=="number"){i.go(y);return}let E=Zc(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:xi([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,c,l,n])}const bI=J.createContext(null);function DI(n){let e=J.useContext(ui).outlet;return e&&J.createElement(bI.Provider,{value:n},e)}function OI(){let{matches:n}=J.useContext(ui),e=n[n.length-1];return e?e.params:{}}function ed(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=J.useContext(Fi),{matches:o}=J.useContext(ui),{pathname:l}=xa(),c=JSON.stringify(Xc(o,i.v7_relativeSplatPath));return J.useMemo(()=>Zc(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function LI(n,e,t,i){Aa()||Qe(!1);let{navigator:o}=J.useContext(Fi),{matches:l}=J.useContext(ui),c=l[l.length-1],h=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=xa(),_;_=y;let E=_.pathname||"/",T=E;if(p!=="/"){let U=p.replace(/^\//,"").split("/");T="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let P=uo(n,{pathname:T});return jI(P&&P.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:xi([p,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:xi([p,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,i)}function VI(){let n=HI(),e=bl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:o},t):null,null)}const MI=J.createElement(VI,null);class FI extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(ui.Provider,{value:this.props.routeContext},J.createElement(A_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UI(n){let{routeContext:e,match:t,children:i}=n,o=J.useContext($l);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(ui.Provider,{value:e},i)}function jI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let _=c.findIndex(E=>E.route.id&&h?.[E.route.id]!==void 0);_>=0||Qe(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:T,errors:P}=t,L=E.route.loader&&T[E.route.id]===void 0&&(!P||P[E.route.id]===void 0);if(E.route.lazy||L){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,E,T)=>{let P,L=!1,U=null,H=null;t&&(P=h&&E.route.id?h[E.route.id]:void 0,U=E.route.errorElement||MI,p&&(y<0&&T===0?(qI("route-fallback"),L=!0,H=null):y===T&&(L=!0,H=E.route.hydrateFallbackElement||null)));let fe=e.concat(c.slice(0,T+1)),ee=()=>{let ce;return P?ce=U:L?ce=H:E.route.Component?ce=J.createElement(E.route.Component,null):E.route.element?ce=E.route.element:ce=_,J.createElement(UI,{match:E,routeContext:{outlet:_,matches:fe,isDataRoute:t!=null},children:ce})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?J.createElement(FI,{location:t.location,revalidation:t.revalidation,component:U,error:P,children:ee(),routeContext:{outlet:null,matches:fe,isDataRoute:!0}}):ee()},null)}var k_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(k_||{}),N_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(N_||{});function zI(n){let e=J.useContext($l);return e||Qe(!1),e}function BI(n){let e=J.useContext(ep);return e||Qe(!1),e}function $I(n){let e=J.useContext(ui);return e||Qe(!1),e}function b_(n){let e=$I(),t=e.matches[e.matches.length-1];return t.route.id||Qe(!1),t.route.id}function HI(){var n;let e=J.useContext(A_),t=BI(N_.UseRouteError),i=b_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function WI(){let{router:n}=zI(k_.UseNavigateStable),e=b_(),t=J.useRef(!1);return x_(()=>{t.current=!0}),J.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,xc({fromRouteId:e},l)))},[n,e])}const ky={};function qI(n,e,t){ky[n]||(ky[n]=!0)}function GI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function KI(n){let{to:e,replace:t,state:i,relative:o}=n;Aa()||Qe(!1);let{future:l,static:c}=J.useContext(Fi),{matches:h}=J.useContext(ui),{pathname:p}=xa(),y=ka(),_=Zc(e,Xc(h,l.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return J.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function QI(n){return DI(n.context)}function YI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ht.Pop,navigator:l,static:c=!1,future:h}=n;Aa()&&Qe(!1);let p=e.replace(/^\/*/,"/"),y=J.useMemo(()=>({basename:p,navigator:l,static:c,future:xc({v7_relativeSplatPath:!1},h)}),[p,h,l,c]);typeof i=="string"&&(i=Ds(i));let{pathname:_="/",search:E="",hash:T="",state:P=null,key:L="default"}=i,U=J.useMemo(()=>{let H=bi(_,p);return H==null?null:{location:{pathname:H,search:E,hash:T,state:P,key:L},navigationType:o}},[p,_,E,T,P,L,o]);return U==null?null:J.createElement(Fi.Provider,{value:y},J.createElement(tp.Provider,{children:t,value:U}))}new Promise(()=>{});function JI(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:J.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:J.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:J.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ea.apply(this,arguments)}function D_(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function XI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZI(n,e){return n.button===0&&(!e||e==="_self")&&!XI(n)}const eS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],nS="6";try{window.__reactRouterVersion=nS}catch{}function rS(n,e){return cI({basename:void 0,future:Ea({},void 0,{v7_prependBasename:!0}),history:OT({window:void 0}),hydrationData:iS(),routes:n,mapRouteProperties:JI,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function iS(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ea({},e,{errors:sS(e.errors)})),e}function sS(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new Ac(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let c=new l(o.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(o.message);l.stack="",t[i]=l}}else t[i]=o;return t}const O_=J.createContext({isTransitioning:!1}),oS=J.createContext(new Map),aS="startTransition",Ny=CT[aS],lS="flushSync",by=DT[lS];function uS(n){Ny?Ny(n):n()}function gl(n){by?by(n):n()}let cS=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function dS(n){let{fallbackElement:e,router:t,future:i}=n,[o,l]=J.useState(t.state),[c,h]=J.useState(),[p,y]=J.useState({isTransitioning:!1}),[_,E]=J.useState(),[T,P]=J.useState(),[L,U]=J.useState(),H=J.useRef(new Map),{v7_startTransition:fe}=i||{},ee=J.useCallback(C=>{fe?uS(C):C()},[fe]),ce=J.useCallback((C,A)=>{let{deletedFetchers:N,flushSync:O,viewTransitionOpts:V}=A;C.fetchers.forEach((Ke,lt)=>{Ke.data!==void 0&&H.current.set(lt,Ke.data)}),N.forEach(Ke=>H.current.delete(Ke));let k=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!V||k){O?gl(()=>l(C)):ee(()=>l(C));return}if(O){gl(()=>{T&&(_&&_.resolve(),T.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let Ke=t.window.document.startViewTransition(()=>{gl(()=>l(C))});Ke.finished.finally(()=>{gl(()=>{E(void 0),P(void 0),h(void 0),y({isTransitioning:!1})})}),gl(()=>P(Ke));return}T?(_&&_.resolve(),T.skipTransition(),U({state:C,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(h(C),y({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[t.window,T,_,H,ee]);J.useLayoutEffect(()=>t.subscribe(ce),[t,ce]),J.useEffect(()=>{p.isTransitioning&&!p.flushSync&&E(new cS)},[p]),J.useEffect(()=>{if(_&&c&&t.window){let C=c,A=_.promise,N=t.window.document.startViewTransition(async()=>{ee(()=>l(C)),await A});N.finished.finally(()=>{E(void 0),P(void 0),h(void 0),y({isTransitioning:!1})}),P(N)}},[ee,c,_,t.window]),J.useEffect(()=>{_&&c&&o.location.key===c.location.key&&_.resolve()},[_,T,o.location,c]),J.useEffect(()=>{!p.isTransitioning&&L&&(h(L.state),y({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),U(void 0))},[p.isTransitioning,L]),J.useEffect(()=>{},[]);let pe=J.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:C=>t.navigate(C),push:(C,A,N)=>t.navigate(C,{state:A,preventScrollReset:N?.preventScrollReset}),replace:(C,A,N)=>t.navigate(C,{replace:!0,state:A,preventScrollReset:N?.preventScrollReset})}),[t]),Ue=t.basename||"/",Fe=J.useMemo(()=>({router:t,navigator:pe,static:!1,basename:Ue}),[t,pe,Ue]),S=J.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return J.useEffect(()=>GI(i,t.future),[i,t.future]),J.createElement(J.Fragment,null,J.createElement($l.Provider,{value:Fe},J.createElement(ep.Provider,{value:o},J.createElement(oS.Provider,{value:H.current},J.createElement(O_.Provider,{value:p},J.createElement(YI,{basename:Ue,location:o.location,navigationType:o.historyAction,navigator:pe,future:S},o.initialized||t.future.v7_partialHydration?J.createElement(hS,{routes:t.routes,future:t.future,state:o}):e))))),null)}const hS=J.memo(fS);function fS(n){let{routes:e,future:t,state:i}=n;return LI(e,void 0,i,t)}const pS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L_=J.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:h,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,T=D_(e,eS),{basename:P}=J.useContext(Fi),L,U=!1;if(typeof y=="string"&&mS.test(y)&&(L=y,pS))try{let ce=new URL(window.location.href),pe=y.startsWith("//")?new URL(ce.protocol+y):new URL(y),Ue=bi(pe.pathname,P);pe.origin===ce.origin&&Ue!=null?y=Ue+pe.search+pe.hash:U=!0}catch{}let H=kI(y,{relative:o}),fe=vS(y,{replace:c,state:h,target:p,preventScrollReset:_,relative:o,viewTransition:E});function ee(ce){i&&i(ce),ce.defaultPrevented||fe(ce)}return J.createElement("a",Ea({},T,{href:L||H,onClick:U||l?i:ee,ref:t,target:p}))}),gS=J.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:c=!1,style:h,to:p,viewTransition:y,children:_}=e,E=D_(e,tS),T=ed(p,{relative:E.relative}),P=xa(),L=J.useContext(ep),{navigator:U,basename:H}=J.useContext(Fi),fe=L!=null&&_S(T)&&y===!0,ee=U.encodeLocation?U.encodeLocation(T).pathname:T.pathname,ce=P.pathname,pe=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;o||(ce=ce.toLowerCase(),pe=pe?pe.toLowerCase():null,ee=ee.toLowerCase()),pe&&H&&(pe=bi(pe,H)||pe);const Ue=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Fe=ce===ee||!c&&ce.startsWith(ee)&&ce.charAt(Ue)==="/",S=pe!=null&&(pe===ee||!c&&pe.startsWith(ee)&&pe.charAt(ee.length)==="/"),C={isActive:Fe,isPending:S,isTransitioning:fe},A=Fe?i:void 0,N;typeof l=="function"?N=l(C):N=[l,Fe?"active":null,S?"pending":null,fe?"transitioning":null].filter(Boolean).join(" ");let O=typeof h=="function"?h(C):h;return J.createElement(L_,Ea({},E,{"aria-current":A,className:N,ref:t,style:O,to:p,viewTransition:y}),typeof _=="function"?_(C):_)});var Ef;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ef||(Ef={}));var Dy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Dy||(Dy={}));function yS(n){let e=J.useContext($l);return e||Qe(!1),e}function vS(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:h}=e===void 0?{}:e,p=ka(),y=xa(),_=ed(n,{relative:c});return J.useCallback(E=>{if(ZI(E,t)){E.preventDefault();let T=i!==void 0?i:mo(y)===mo(_);p(n,{replace:T,state:o,preventScrollReset:l,relative:c,viewTransition:h})}},[y,p,_,i,o,t,n,l,c,h])}function _S(n,e){e===void 0&&(e={});let t=J.useContext(O_);t==null&&Qe(!1);let{basename:i}=yS(Ef.useViewTransitionState),o=ed(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=bi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=bi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Rc(o.pathname,c)!=null||Rc(o.pathname,l)!=null}const wS=()=>{};var Oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ES=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},M_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|h>>4;let T=(h&15)<<2|y>>6,P=y&63;p||(P=64,c||(T=64)),i.push(t[_],t[E],t[T],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ES(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||y==null||E==null)throw new TS;const T=l<<2|h>>4;if(i.push(T),y!==64){const P=h<<4&240|y>>2;if(i.push(P),E!==64){const L=y<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IS=function(n){const e=V_(n);return M_.encodeByteArray(e,!0)},kc=function(n){return IS(n).replace(/\./g,"")},F_=function(n){try{return M_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=()=>SS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof Oy>"u")return;const n=Oy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&F_(n[1]);return e&&JSON.parse(e)},td=()=>{try{return wS()||CS()||PS()||RS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},U_=n=>{var e,t;return(t=(e=td())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},j_=n=>{const e=U_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},z_=()=>{var n;return(n=td())===null||n===void 0?void 0:n.config},B_=n=>{var e;return(e=td())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function np(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[kc(JSON.stringify(t)),kc(JSON.stringify(c)),""].join(".")}const Sl={};function kS(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sl))Sl[e]?n.emulator.push(e):n.prod.push(e);return n}function NS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ly=!1;function rp(n,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||Sl[n]===e||Sl[n]||Ly)return;Sl[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=kS().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ly=!0,c()},T}function _(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=NS(i),P=t("text"),L=document.getElementById(P)||document.createElement("span"),U=t("learnmore"),H=document.getElementById(U)||document.createElement("a"),fe=t("preprendIcon"),ee=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ce=T.element;h(ce),_(H,U);const pe=y();p(ee,fe),ce.append(ee,L,H,pe),document.body.appendChild(ce)}l?(L.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function DS(){var n;const e=(n=td())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MS(){const n=In();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FS(){return!DS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function US(){try{return typeof indexedDB=="object"}catch{return!1}}function jS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="FirebaseError";class ci extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=zS,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?BS(l,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new ci(o,h,i)}}function BS(n,e){return n.replace($S,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const $S=/\{\$([^}]+)}/g;function HS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function go(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(Vy(l)&&Vy(c)){if(!go(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Vy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function _l(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function WS(n,e){const t=new qS(n,e);return t.subscribe.bind(t)}class qS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");GS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=af),o.error===void 0&&(o.error=af),o.complete===void 0&&(o.complete=af);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function af(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n){return n&&n._delegate?n._delegate:n}class Cs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new AS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YS(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QS(n){return n===ao?void 0:n}function YS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const XS={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},ZS=nt.INFO,eC={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},tC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=eC[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ip{constructor(e){this.name=e,this._logLevel=ZS,this._logHandler=tC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const nC=(n,e)=>e.some(t=>n instanceof t);let My,Fy;function rC(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iC(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $_=new WeakMap,Tf=new WeakMap,H_=new WeakMap,lf=new WeakMap,sp=new WeakMap;function sC(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Es(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&$_.set(t,n)}).catch(()=>{}),sp.set(e,n),e}function oC(n){if(Tf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Tf.set(n,e)}let If={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Tf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||H_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aC(n){If=n(If)}function lC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(uf(this),e,...t);return H_.set(i,e.sort?e.sort():[e]),Es(i)}:iC().includes(n)?function(...e){return n.apply(uf(this),e),Es($_.get(this))}:function(...e){return Es(n.apply(uf(this),e))}}function uC(n){return typeof n=="function"?lC(n):(n instanceof IDBTransaction&&oC(n),nC(n,rC())?new Proxy(n,If):n)}function Es(n){if(n instanceof IDBRequest)return sC(n);if(lf.has(n))return lf.get(n);const e=uC(n);return e!==n&&(lf.set(n,e),sp.set(e,n)),e}const uf=n=>sp.get(n);function cC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=Es(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Es(c.result),p.oldVersion,p.newVersion,Es(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const dC=["get","getKey","getAll","getAllKeys","count"],hC=["put","add","delete","clear"],cf=new Map;function Uy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cf.get(e))return cf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=hC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dC.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),o&&p.done]))[0]};return cf.set(e,l),l}aC(n=>({...n,get:(e,t,i)=>Uy(e,t)||n.get(e,t,i),has:(e,t)=>!!Uy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function pC(n){const e=n.getComponent();return e?.type==="VERSION"}const Sf="@firebase/app",jy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new ip("@firebase/app"),mC="@firebase/app-compat",gC="@firebase/analytics-compat",yC="@firebase/analytics",vC="@firebase/app-check-compat",_C="@firebase/app-check",wC="@firebase/auth",EC="@firebase/auth-compat",TC="@firebase/database",IC="@firebase/data-connect",SC="@firebase/database-compat",CC="@firebase/functions",PC="@firebase/functions-compat",RC="@firebase/installations",AC="@firebase/installations-compat",xC="@firebase/messaging",kC="@firebase/messaging-compat",NC="@firebase/performance",bC="@firebase/performance-compat",DC="@firebase/remote-config",OC="@firebase/remote-config-compat",LC="@firebase/storage",VC="@firebase/storage-compat",MC="@firebase/firestore",FC="@firebase/ai",UC="@firebase/firestore-compat",jC="firebase",zC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="[DEFAULT]",BC={[Sf]:"fire-core",[mC]:"fire-core-compat",[yC]:"fire-analytics",[gC]:"fire-analytics-compat",[_C]:"fire-app-check",[vC]:"fire-app-check-compat",[wC]:"fire-auth",[EC]:"fire-auth-compat",[TC]:"fire-rtdb",[IC]:"fire-data-connect",[SC]:"fire-rtdb-compat",[CC]:"fire-fn",[PC]:"fire-fn-compat",[RC]:"fire-iid",[AC]:"fire-iid-compat",[xC]:"fire-fcm",[kC]:"fire-fcm-compat",[NC]:"fire-perf",[bC]:"fire-perf-compat",[DC]:"fire-rc",[OC]:"fire-rc-compat",[LC]:"fire-gcs",[VC]:"fire-gcs-compat",[MC]:"fire-fst",[UC]:"fire-fst-compat",[FC]:"fire-vertex","fire-js":"fire-js",[jC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new Map,$C=new Map,Pf=new Map;function zy(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yo(n){const e=n.name;if(Pf.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,n);for(const t of Nc.values())zy(t,n);for(const t of $C.values())zy(t,n);return!0}function nd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new Hl("app","Firebase",HC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=zC;function W_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Cf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ts.create("bad-app-name",{appName:String(o)});if(t||(t=z_()),!t)throw Ts.create("no-options");const l=Nc.get(o);if(l){if(go(t,l.options)&&go(i,l.config))return l;throw Ts.create("duplicate-app",{appName:o})}const c=new JS(o);for(const p of Pf.values())c.addComponent(p);const h=new WC(t,i,c);return Nc.set(o,h),h}function op(n=Cf){const e=Nc.get(n);if(!e&&n===Cf&&z_())return W_();if(!e)throw Ts.create("no-app",{appName:n});return e}function Zr(n,e,t){var i;let o=(i=BC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(h.join(" "));return}yo(new Cs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firebase-heartbeat-database",GC=1,Dl="firebase-heartbeat-store";let df=null;function q_(){return df||(df=cC(qC,GC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),df}async function KC(n){try{const t=(await q_()).transaction(Dl),i=await t.objectStore(Dl).get(G_(n));return await t.done,i}catch(e){if(e instanceof ci)Di.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e?.message});Di.warn(t.message)}}}async function By(n,e){try{const i=(await q_()).transaction(Dl,"readwrite");await i.objectStore(Dl).put(e,G_(n)),await i.done}catch(t){if(t instanceof ci)Di.warn(t.message);else{const i=Ts.create("idb-set",{originalErrorMessage:t?.message});Di.warn(i.message)}}}function G_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=1024,YC=30;class JC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$y();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>YC){const c=e1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Di.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$y(),{heartbeatsToSend:i,unsentEntries:o}=XC(this._heartbeatsCache.heartbeats),l=kc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Di.warn(t),""}}}function $y(){return new Date().toISOString().substring(0,10)}function XC(n,e=QC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Hy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Hy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class ZC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return US()?jS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return By(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return By(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Hy(n){return kc(JSON.stringify({version:2,heartbeats:n})).length}function e1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(n){yo(new Cs("platform-logger",e=>new fC(e),"PRIVATE")),yo(new Cs("heartbeat",e=>new JC(e),"PRIVATE")),Zr(Sf,jy,n),Zr(Sf,jy,"esm2017"),Zr("fire-js","")}t1("");function ap(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function K_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n1=K_,Q_=new Hl("auth","Firebase",K_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new ip("@firebase/auth");function r1(n,...e){bc.logLevel<=nt.WARN&&bc.warn(`Auth (${Na}): ${n}`,...e)}function gc(n,...e){bc.logLevel<=nt.ERROR&&bc.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(n,...e){throw lp(n,...e)}function ei(n,...e){return lp(n,...e)}function Y_(n,e,t){const i=Object.assign(Object.assign({},n1()),{[e]:t});return new Hl("auth","Firebase",i).create(e,{appName:n.name})}function ki(n){return Y_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Q_.create(n,...e)}function ze(n,e,...t){if(!n)throw lp(e,...t)}function Ri(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gc(e),new Error(e)}function Oi(n,e){n||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function i1(){return Wy()==="http:"||Wy()==="https:"}function Wy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i1()||LS()||"connection"in navigator)?navigator.onLine:!0}function o1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oi(t>e,"Short delay should be less than long delay!"),this.isMobile=bS()||VS()}get(){return s1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e){Oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],u1=new ql(3e4,6e4);function Os(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ls(n,e,t,i,o={}){return X_(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=Wl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return OS()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&To(n.emulatorConfig.host)&&(y.credentials="include"),J_.fetch()(await Z_(n,n.config.apiHost,t,h),y)})}async function X_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},a1),e);try{const o=new d1(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw uc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw uc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw uc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Y_(n,_,y);Or(n,_)}}catch(o){if(o instanceof ci)throw o;Or(n,"network-request-failed",{message:String(o)})}}async function Gl(n,e,t,i,o={}){const l=await Ls(n,e,t,i,o);return"mfaPendingCredential"in l&&Or(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Z_(n,e,t,i){const o=`${e}${t}?${i}`,l=n,c=l.config.emulator?up(n.config,o):`${n.config.apiScheme}://${o}`;return l1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function c1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ei(this.auth,"network-request-failed")),u1.get())})}}function uc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ei(n,e,i);return o.customData._tokenResponse=t,o}function qy(n){return n!==void 0&&n.enterprise!==void 0}class h1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return c1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function f1(n,e){return Ls(n,"GET","/v2/recaptchaConfig",Os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(n,e){return Ls(n,"POST","/v1/accounts:delete",e)}async function Dc(n,e){return Ls(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function m1(n,e=!1){const t=Gt(n),i=await t.getIdToken(e),o=cp(i);ze(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Cl(hf(o.auth_time)),issuedAtTime:Cl(hf(o.iat)),expirationTime:Cl(hf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function hf(n){return Number(n)*1e3}function cp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return gc("JWT malformed, contained fewer than 3 sections"),null;try{const o=F_(t);return o?JSON.parse(o):(gc("Failed to decode base64 JWT payload"),null)}catch(o){return gc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Gy(n){const e=cp(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ci&&g1(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function g1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ol(n,Dc(t,{idToken:i}));ze(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?ew(l.providerUserInfo):[],h=_1(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!h?.length,_=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Af(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function v1(n){const e=Gt(n);await Oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _1(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ew(n){return n.map(e=>{var{providerId:t}=e,i=ap(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(n,e){const t=await X_(n,{},async()=>{const i=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await Z_(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:i};return n.emulatorConfig&&To(n.emulatorConfig.host)&&(p.credentials="include"),J_.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function E1(n,e){return Ls(n,"POST","/v2/accounts:revokeToken",Os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=Gy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await w1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new pa;return i&&(ze(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(ze(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(ze(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Af(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return m1(this,e)}reload(){return v1(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Oc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await Ol(this,p1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,h,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,P=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(h=t.tenantId)!==null&&h!==void 0?h:void 0,H=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,fe=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ee=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ce,emailVerified:pe,isAnonymous:Ue,providerData:Fe,stsTokenManager:S}=t;ze(ce&&S,e,"internal-error");const C=pa.fromJSON(this.name,S);ze(typeof ce=="string",e,"internal-error"),fs(E,e.name),fs(T,e.name),ze(typeof pe=="boolean",e,"internal-error"),ze(typeof Ue=="boolean",e,"internal-error"),fs(P,e.name),fs(L,e.name),fs(U,e.name),fs(H,e.name),fs(fe,e.name),fs(ee,e.name);const A=new Dr({uid:ce,auth:e,email:T,emailVerified:pe,displayName:E,isAnonymous:Ue,photoURL:L,phoneNumber:P,tenantId:U,stsTokenManager:C,createdAt:fe,lastLoginAt:ee});return Fe&&Array.isArray(Fe)&&(A.providerData=Fe.map(N=>Object.assign({},N))),H&&(A._redirectEventId=H),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new pa;o.updateFromServerResponse(t);const l=new Dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Oc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ze(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ew(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,h=new pa;h.updateFromIdToken(i);const p=new Dr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Map;function Ai(n){Oi(n instanceof Function,"Expected a class definition");let e=Ky.get(n);return e?(Oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ky.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tw.type="NONE";const Qy=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(n,e,t){return`firebase:${n}:${e}:${t}`}class ma{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=yc(this.userKey,o.apiKey,l),this.fullPersistenceKey=yc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Dc(this.auth,{idToken:e}).catch(()=>{});return t?Dr._fromGetAccountInfoResponse(this.auth,t,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ma(Ai(Qy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Ai(Qy);const c=yc(i,e.config.apiKey,e.name);let h=null;for(const y of t)try{const _=await y._get(c);if(_){let E;if(typeof _=="string"){const T=await Dc(e,{idToken:_}).catch(()=>{});if(!T)break;E=await Dr._fromGetAccountInfoResponse(e,T,_)}else E=Dr._fromJSON(e,_);y!==l&&(h=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ma(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ma(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aw(e))return"Blackberry";if(lw(e))return"Webos";if(rw(e))return"Safari";if((e.includes("chrome/")||iw(e))&&!e.includes("edge/"))return"Chrome";if(ow(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function nw(n=In()){return/firefox\//i.test(n)}function rw(n=In()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iw(n=In()){return/crios\//i.test(n)}function sw(n=In()){return/iemobile/i.test(n)}function ow(n=In()){return/android/i.test(n)}function aw(n=In()){return/blackberry/i.test(n)}function lw(n=In()){return/webos/i.test(n)}function dp(n=In()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function T1(n=In()){var e;return dp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function I1(){return MS()&&document.documentMode===10}function uw(n=In()){return dp(n)||ow(n)||lw(n)||aw(n)||/windows phone/i.test(n)||sw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n,e=[]){let t;switch(n){case"Browser":t=Yy(In());break;case"Worker":t=`${Yy(In())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(n,e={}){return Ls(n,"GET","/v2/passwordPolicy",Os(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=6;class R1{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:P1,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jy(this),this.idTokenSubscription=new Jy(this),this.beforeStateQueue=new S1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Dc(this,{idToken:e}),i=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(ki(this));const t=e?Gt(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C1(this),t=new R1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await E1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&r1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Io(n){return Gt(n)}class Jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=WS(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x1(n){rd=n}function dw(n){return rd.loadJS(n)}function k1(){return rd.recaptchaEnterpriseScript}function N1(){return rd.gapiScript}function b1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class D1{constructor(){this.enterprise=new O1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class O1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const L1="recaptcha-enterprise",hw="NO_RECAPTCHA";class V1{constructor(e){this.type=L1,this.auth=Io(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{f1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new h1(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{h(p)})})}function o(l,c,h){const p=window.grecaptcha;qy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(hw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D1().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!t&&qy(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=k1();p.length!==0&&(p+=h),dw(p).then(()=>{o(h,l,c)}).catch(y=>{c(y)})}}).catch(h=>{c(h)})})}}async function Xy(n,e,t,i=!1,o=!1){const l=new V1(n);let c;if(o)c=hw;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function xf(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xy(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Xy(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e){const t=nd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(go(l,e??{}))return o;Or(o,"already-initialized")}return t.initialize({options:e})}function F1(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ai);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function U1(n,e,t){const i=Io(n);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=fw(e),{host:c,port:h}=j1(e),p=h===null?"":`:${h}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(go(y,i.config.emulator)&&go(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,To(c)?(np(`${l}//${c}${p}`),rp("Auth",!0)):z1()}function fw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j1(n){const e=fw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Zy(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Zy(c)}}}function Zy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,t){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function B1(n,e){return Ls(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(n,e){return Gl(n,"POST","/v1/accounts:signInWithPassword",Os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(n,e){return Gl(n,"POST","/v1/accounts:signInWithEmailLink",Os(n,e))}async function W1(n,e){return Gl(n,"POST","/v1/accounts:signInWithEmailLink",Os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends hp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ll(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ll(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xf(e,t,"signInWithPassword",$1);case"emailLink":return H1(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xf(e,i,"signUpPassword",B1);case"emailLink":return W1(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n,e){return Gl(n,"POST","/v1/accounts:signInWithIdp",Os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="http://localhost";class vo extends hp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=ap(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new vo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ga(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ga(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ga(e,t)}buildRequest(){const e={requestUri:q1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K1(n){const e=vl(_l(n)).link,t=e?vl(_l(e)).deep_link_id:null,i=vl(_l(n)).deep_link_id;return(i?vl(_l(i)).link:null)||i||t||e||n}class fp{constructor(e){var t,i,o,l,c,h;const p=vl(_l(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=G1((o=p.mode)!==null&&o!==void 0?o:null);ze(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=K1(e);try{return new fp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.providerId=ba.PROVIDER_ID}static credential(e,t){return Ll._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=fp.parseLink(t);return ze(i,"argument-error"),Ll._fromEmailAndCode(e,i.code,i.tenantId)}}ba.PROVIDER_ID="password";ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Kl{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Kl{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Kl{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(n,e){return Gl(n,"POST","/v1/accounts:signUp",Os(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Dr._fromIdTokenResponse(e,i,o),c=ev(i);return new _o({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ev(i);return new _o({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ev(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends ci{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Lc(e,t,i,o)}}function mw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Lc._fromErrorAndOperation(n,l,e,i):l})}async function Y1(n,e,t=!1){const i=await Ol(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _o._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(n,e,t=!1){const{auth:i}=n;if(tr(i.app))return Promise.reject(ki(i));const o="reauthenticate";try{const l=await Ol(n,mw(i,o,e,n),t);ze(l.idToken,i,"internal-error");const c=cp(l.idToken);ze(c,i,"internal-error");const{sub:h}=c;return ze(n.uid===h,i,"user-mismatch"),_o._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Or(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(n,e,t=!1){if(tr(n.app))return Promise.reject(ki(n));const i="signIn",o=await mw(n,i,e),l=await _o._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function X1(n,e){return gw(Io(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(n){const e=Io(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z1(n,e,t){if(tr(n.app))return Promise.reject(ki(n));const i=Io(n),c=await xf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&yw(n),p}),h=await _o._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function eP(n,e,t){return tr(n.app)?Promise.reject(ki(n)):X1(Gt(n),ba.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&yw(n),i})}function tP(n,e,t,i){return Gt(n).onIdTokenChanged(e,t,i)}function nP(n,e,t){return Gt(n).beforeAuthStateChanged(e,t)}function rP(n,e,t,i){return Gt(n).onAuthStateChanged(e,t,i)}function iP(n){return Gt(n).signOut()}const Vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vc,"1"),this.storage.removeItem(Vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=1e3,oP=10;class _w extends vw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);I1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oP):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},sP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_w.type="LOCAL";const aP=_w;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends vw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ww.type="SESSION";const Ew=ww;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new id(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async y=>y(t.origin,l)),p=await lP(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const y=pp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return window}function cP(n){ti().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}async function dP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hP(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function fP(){return Tw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firebaseLocalStorageDb",pP=1,Mc="firebaseLocalStorage",Sw="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sd(n,e){return n.transaction([Mc],e?"readwrite":"readonly").objectStore(Mc)}function mP(){const n=indexedDB.deleteDatabase(Iw);return new Ql(n).toPromise()}function kf(){const n=indexedDB.open(Iw,pP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Mc,{keyPath:Sw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Mc)?e(i):(i.close(),await mP(),e(await kf()))})})}async function tv(n,e,t){const i=sd(n,!0).put({[Sw]:e,value:t});return new Ql(i).toPromise()}async function gP(n,e){const t=sd(n,!1).get(e),i=await new Ql(t).toPromise();return i===void 0?null:i.value}function nv(n,e){const t=sd(n,!0).delete(e);return new Ql(t).toPromise()}const yP=800,vP=3;class Cw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>vP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(fP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await dP(),!this.activeServiceWorker)return;this.sender=new uP(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kf();return await tv(e,Vc,"1"),await nv(e,Vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>tv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>gP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=sd(o,!1).getAll();return new Ql(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cw.type="LOCAL";const _P=Cw;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n,e){return e?Ai(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends hp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EP(n){return gw(n.auth,new mp(n),n.bypassAuthState)}function TP(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),J1(t,new mp(n),n.bypassAuthState)}async function IP(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),Y1(t,new mp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EP;case"linkViaPopup":case"linkViaRedirect":return IP;case"reauthViaPopup":case"reauthViaRedirect":return TP;default:Or(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new ql(2e3,1e4);class fa extends Pw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SP.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="pendingRedirect",vc=new Map;class PP extends Pw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=vc.get(this.auth._key());if(!e){try{const i=await RP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}vc.set(this.auth._key(),e)}return this.bypassAuthState||vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RP(n,e){const t=kP(e),i=xP(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function AP(n,e){vc.set(n._key(),e)}function xP(n){return Ai(n._redirectPersistence)}function kP(n){return yc(CP,n.config.apiKey,n.name)}async function NP(n,e,t=!1){if(tr(n.app))return Promise.reject(ki(n));const i=Io(n),o=wP(i,e),c=await new PP(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=600*1e3;class DP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Rw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ei(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bP&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(e))}saveEventToCache(e){this.cachedEventUids.add(rv(e)),this.lastProcessedEventTime=Date.now()}}function rv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Rw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function OP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,e={}){return Ls(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MP=/^https?/;async function FP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await LP(n);for(const t of e)try{if(UP(t))return}catch{}Or(n,"unauthorized-domain")}function UP(n){const e=Rf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!MP.test(t))return!1;if(VP.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new ql(3e4,6e4);function iv(){const n=ti().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zP(n){return new Promise((e,t)=>{var i,o,l;function c(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),t(ei(n,"network-request-failed"))},timeout:jP.get()})}if(!((o=(i=ti().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ti().gapi)===null||l===void 0)&&l.load)c();else{const h=b1("iframefcb");return ti()[h]=()=>{gapi.load?c():t(ei(n,"network-request-failed"))},dw(`${N1()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw _c=null,e})}let _c=null;function BP(n){return _c=_c||zP(n),_c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=new ql(5e3,15e3),HP="__/auth/iframe",WP="emulator/auth/iframe",qP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KP(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?up(e,WP):`https://${n.config.authDomain}/${HP}`,i={apiKey:e.apiKey,appName:n.name,v:Na},o=GP.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Wl(i).slice(1)}`}async function QP(n){const e=await BP(n),t=ti().gapi;return ze(t,n,"internal-error"),e.open({where:document.body,url:KP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=ei(n,"network-request-failed"),h=ti().setTimeout(()=>{l(c)},$P.get());function p(){ti().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JP=500,XP=600,ZP="_blank",eR="http://localhost";class sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(n,e,t,i=JP,o=XP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},YP),{width:i.toString(),height:o.toString(),top:l,left:c}),y=In().toLowerCase();t&&(h=iw(y)?ZP:t),nw(y)&&(e=e||eR,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[P,L])=>`${T}${P}=${L},`,"");if(T1(y)&&h!=="_self")return nR(e||"",h),new sv(null);const E=window.open(e||"",h,_);ze(E,n,"popup-blocked");try{E.focus()}catch{}return new sv(E)}function nR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="__/auth/handler",iR="emulator/auth/handler",sR=encodeURIComponent("fac");async function ov(n,e,t,i,o,l){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Na,eventId:o};if(e instanceof pw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",HS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Kl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await n._getAppCheckToken(),y=p?`#${sR}=${encodeURIComponent(p)}`:"";return`${oR(n)}?${Wl(h).slice(1)}${y}`}function oR({config:n}){return n.emulator?up(n,iR):`https://${n.authDomain}/${rR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=NP,this._overrideRedirectResult=AP}async _openPopup(e,t,i,o){var l;Oi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await ov(e,t,i,Rf(),o);return tR(e,c,pp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await ov(e,t,i,Rf(),o);return cP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Oi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await QP(e),i=new DP(e);return t.register("authEvent",o=>(ze(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ff,{type:ff},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[ff];c!==void 0&&t(!!c),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=FP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uw()||rw()||dp()}}const lR=aR;var av="@firebase/auth",lv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dR(n){yo(new Cs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;ze(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cw(n)},y=new A1(i,o,l,p);return F1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),yo(new Cs("auth-internal",e=>{const t=Io(e.getProvider("auth").getImmediate());return(i=>new uR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(av,lv,cR(n)),Zr(av,lv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=300,fR=B_("authIdTokenMaxAge")||hR;let uv=null;const pR=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>fR)return;const o=t?.token;uv!==o&&(uv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mR(n=op()){const e=nd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=M1(n,{popupRedirectResolver:lR,persistence:[_P,aP,Ew]}),i=B_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=pR(l.toString());nP(t,c,()=>c(t.currentUser)),tP(t,h=>c(h))}}const o=U_("auth");return o&&U1(t,`http://${o}`),t}function gR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}x1({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ei("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",gR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dR("Browser");var yR="firebase",vR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr(yR,vR,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,Aw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(N,O,V){for(var k=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)k[Ke-2]=arguments[Ke];return C.prototype[O].apply(N,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,C,A){A||(A=0);var N=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)N[O]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(O=0;16>O;++O)N[O]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],O=S.g[2];var V=S.g[3],k=C+(V^A&(O^V))+N[0]+3614090360&4294967295;C=A+(k<<7&4294967295|k>>>25),k=V+(O^C&(A^O))+N[1]+3905402710&4294967295,V=C+(k<<12&4294967295|k>>>20),k=O+(A^V&(C^A))+N[2]+606105819&4294967295,O=V+(k<<17&4294967295|k>>>15),k=A+(C^O&(V^C))+N[3]+3250441966&4294967295,A=O+(k<<22&4294967295|k>>>10),k=C+(V^A&(O^V))+N[4]+4118548399&4294967295,C=A+(k<<7&4294967295|k>>>25),k=V+(O^C&(A^O))+N[5]+1200080426&4294967295,V=C+(k<<12&4294967295|k>>>20),k=O+(A^V&(C^A))+N[6]+2821735955&4294967295,O=V+(k<<17&4294967295|k>>>15),k=A+(C^O&(V^C))+N[7]+4249261313&4294967295,A=O+(k<<22&4294967295|k>>>10),k=C+(V^A&(O^V))+N[8]+1770035416&4294967295,C=A+(k<<7&4294967295|k>>>25),k=V+(O^C&(A^O))+N[9]+2336552879&4294967295,V=C+(k<<12&4294967295|k>>>20),k=O+(A^V&(C^A))+N[10]+4294925233&4294967295,O=V+(k<<17&4294967295|k>>>15),k=A+(C^O&(V^C))+N[11]+2304563134&4294967295,A=O+(k<<22&4294967295|k>>>10),k=C+(V^A&(O^V))+N[12]+1804603682&4294967295,C=A+(k<<7&4294967295|k>>>25),k=V+(O^C&(A^O))+N[13]+4254626195&4294967295,V=C+(k<<12&4294967295|k>>>20),k=O+(A^V&(C^A))+N[14]+2792965006&4294967295,O=V+(k<<17&4294967295|k>>>15),k=A+(C^O&(V^C))+N[15]+1236535329&4294967295,A=O+(k<<22&4294967295|k>>>10),k=C+(O^V&(A^O))+N[1]+4129170786&4294967295,C=A+(k<<5&4294967295|k>>>27),k=V+(A^O&(C^A))+N[6]+3225465664&4294967295,V=C+(k<<9&4294967295|k>>>23),k=O+(C^A&(V^C))+N[11]+643717713&4294967295,O=V+(k<<14&4294967295|k>>>18),k=A+(V^C&(O^V))+N[0]+3921069994&4294967295,A=O+(k<<20&4294967295|k>>>12),k=C+(O^V&(A^O))+N[5]+3593408605&4294967295,C=A+(k<<5&4294967295|k>>>27),k=V+(A^O&(C^A))+N[10]+38016083&4294967295,V=C+(k<<9&4294967295|k>>>23),k=O+(C^A&(V^C))+N[15]+3634488961&4294967295,O=V+(k<<14&4294967295|k>>>18),k=A+(V^C&(O^V))+N[4]+3889429448&4294967295,A=O+(k<<20&4294967295|k>>>12),k=C+(O^V&(A^O))+N[9]+568446438&4294967295,C=A+(k<<5&4294967295|k>>>27),k=V+(A^O&(C^A))+N[14]+3275163606&4294967295,V=C+(k<<9&4294967295|k>>>23),k=O+(C^A&(V^C))+N[3]+4107603335&4294967295,O=V+(k<<14&4294967295|k>>>18),k=A+(V^C&(O^V))+N[8]+1163531501&4294967295,A=O+(k<<20&4294967295|k>>>12),k=C+(O^V&(A^O))+N[13]+2850285829&4294967295,C=A+(k<<5&4294967295|k>>>27),k=V+(A^O&(C^A))+N[2]+4243563512&4294967295,V=C+(k<<9&4294967295|k>>>23),k=O+(C^A&(V^C))+N[7]+1735328473&4294967295,O=V+(k<<14&4294967295|k>>>18),k=A+(V^C&(O^V))+N[12]+2368359562&4294967295,A=O+(k<<20&4294967295|k>>>12),k=C+(A^O^V)+N[5]+4294588738&4294967295,C=A+(k<<4&4294967295|k>>>28),k=V+(C^A^O)+N[8]+2272392833&4294967295,V=C+(k<<11&4294967295|k>>>21),k=O+(V^C^A)+N[11]+1839030562&4294967295,O=V+(k<<16&4294967295|k>>>16),k=A+(O^V^C)+N[14]+4259657740&4294967295,A=O+(k<<23&4294967295|k>>>9),k=C+(A^O^V)+N[1]+2763975236&4294967295,C=A+(k<<4&4294967295|k>>>28),k=V+(C^A^O)+N[4]+1272893353&4294967295,V=C+(k<<11&4294967295|k>>>21),k=O+(V^C^A)+N[7]+4139469664&4294967295,O=V+(k<<16&4294967295|k>>>16),k=A+(O^V^C)+N[10]+3200236656&4294967295,A=O+(k<<23&4294967295|k>>>9),k=C+(A^O^V)+N[13]+681279174&4294967295,C=A+(k<<4&4294967295|k>>>28),k=V+(C^A^O)+N[0]+3936430074&4294967295,V=C+(k<<11&4294967295|k>>>21),k=O+(V^C^A)+N[3]+3572445317&4294967295,O=V+(k<<16&4294967295|k>>>16),k=A+(O^V^C)+N[6]+76029189&4294967295,A=O+(k<<23&4294967295|k>>>9),k=C+(A^O^V)+N[9]+3654602809&4294967295,C=A+(k<<4&4294967295|k>>>28),k=V+(C^A^O)+N[12]+3873151461&4294967295,V=C+(k<<11&4294967295|k>>>21),k=O+(V^C^A)+N[15]+530742520&4294967295,O=V+(k<<16&4294967295|k>>>16),k=A+(O^V^C)+N[2]+3299628645&4294967295,A=O+(k<<23&4294967295|k>>>9),k=C+(O^(A|~V))+N[0]+4096336452&4294967295,C=A+(k<<6&4294967295|k>>>26),k=V+(A^(C|~O))+N[7]+1126891415&4294967295,V=C+(k<<10&4294967295|k>>>22),k=O+(C^(V|~A))+N[14]+2878612391&4294967295,O=V+(k<<15&4294967295|k>>>17),k=A+(V^(O|~C))+N[5]+4237533241&4294967295,A=O+(k<<21&4294967295|k>>>11),k=C+(O^(A|~V))+N[12]+1700485571&4294967295,C=A+(k<<6&4294967295|k>>>26),k=V+(A^(C|~O))+N[3]+2399980690&4294967295,V=C+(k<<10&4294967295|k>>>22),k=O+(C^(V|~A))+N[10]+4293915773&4294967295,O=V+(k<<15&4294967295|k>>>17),k=A+(V^(O|~C))+N[1]+2240044497&4294967295,A=O+(k<<21&4294967295|k>>>11),k=C+(O^(A|~V))+N[8]+1873313359&4294967295,C=A+(k<<6&4294967295|k>>>26),k=V+(A^(C|~O))+N[15]+4264355552&4294967295,V=C+(k<<10&4294967295|k>>>22),k=O+(C^(V|~A))+N[6]+2734768916&4294967295,O=V+(k<<15&4294967295|k>>>17),k=A+(V^(O|~C))+N[13]+1309151649&4294967295,A=O+(k<<21&4294967295|k>>>11),k=C+(O^(A|~V))+N[4]+4149444226&4294967295,C=A+(k<<6&4294967295|k>>>26),k=V+(A^(C|~O))+N[11]+3174756917&4294967295,V=C+(k<<10&4294967295|k>>>22),k=O+(C^(V|~A))+N[2]+718787259&4294967295,O=V+(k<<15&4294967295|k>>>17),k=A+(V^(O|~C))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+V&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,N=this.B,O=this.h,V=0;V<C;){if(O==0)for(;V<=A;)o(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<C;)if(N[O++]=S.charCodeAt(V++),O==this.blockSize){o(this,N),O=0;break}}else for(;V<C;)if(N[O++]=S[V++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var N=0;32>N;N+=8)S[A++]=this.g[C]>>>N&255;return S};function l(S,C){var A=h;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function c(S,C){this.h=C;for(var A=[],N=!0,O=S.length-1;0<=O;O--){var V=S[O]|0;N&&V==C||(A[O]=V,N=!1)}this.g=A}var h={};function p(S){return-128<=S&&128>S?l(S,function(C){return new c([C|0],0>C?-1:0)}):new c([S|0],0>S?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return E;if(0>S)return H(y(-S));for(var C=[],A=1,N=0;S>=A;N++)C[N]=S/A|0,A*=4294967296;return new c(C,0)}function _(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return H(_(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(C,8)),N=E,O=0;O<S.length;O+=8){var V=Math.min(8,S.length-O),k=parseInt(S.substring(O,O+V),C);8>V?(V=y(Math.pow(C,V)),N=N.j(V).add(y(k))):(N=N.j(A),N=N.add(y(k)))}return N}var E=p(0),T=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(U(this))return-H(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var N=this.i(A);S+=(0<=N?N:4294967296+N)*C,C*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(U(this))return"-"+H(this).toString(S);for(var C=y(Math.pow(S,6)),A=this,N="";;){var O=pe(A,C).g;A=fe(A,O.j(C));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=O,L(A))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function U(S){return S.h==-1}n.l=function(S){return S=fe(this,S),U(S)?-1:L(S)?0:1};function H(S){for(var C=S.g.length,A=[],N=0;N<C;N++)A[N]=~S.g[N];return new c(A,~S.h).add(T)}n.abs=function(){return U(this)?H(this):this},n.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0,O=0;O<=C;O++){var V=N+(this.i(O)&65535)+(S.i(O)&65535),k=(V>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);N=k>>>16,V&=65535,k&=65535,A[O]=k<<16|V}return new c(A,A[A.length-1]&-2147483648?-1:0)};function fe(S,C){return S.add(H(C))}n.j=function(S){if(L(this)||L(S))return E;if(U(this))return U(S)?H(this).j(H(S)):H(H(this).j(S));if(U(S))return H(this.j(H(S)));if(0>this.l(P)&&0>S.l(P))return y(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],N=0;N<2*C;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<S.g.length;O++){var V=this.i(N)>>>16,k=this.i(N)&65535,Ke=S.i(O)>>>16,lt=S.i(O)&65535;A[2*N+2*O]+=k*lt,ee(A,2*N+2*O),A[2*N+2*O+1]+=V*lt,ee(A,2*N+2*O+1),A[2*N+2*O+1]+=k*Ke,ee(A,2*N+2*O+1),A[2*N+2*O+2]+=V*Ke,ee(A,2*N+2*O+2)}for(N=0;N<C;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=C;N<2*C;N++)A[N]=0;return new c(A,0)};function ee(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function ce(S,C){this.g=S,this.h=C}function pe(S,C){if(L(C))throw Error("division by zero");if(L(S))return new ce(E,E);if(U(S))return C=pe(H(S),C),new ce(H(C.g),H(C.h));if(U(C))return C=pe(S,H(C)),new ce(H(C.g),C.h);if(30<S.g.length){if(U(S)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var A=T,N=C;0>=N.l(S);)A=Ue(A),N=Ue(N);var O=Fe(A,1),V=Fe(N,1);for(N=Fe(N,2),A=Fe(A,2);!L(N);){var k=V.add(N);0>=k.l(S)&&(O=O.add(A),V=k),N=Fe(N,1),A=Fe(A,1)}return C=fe(S,O.j(C)),new ce(O,C)}for(O=E;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=y(A),k=V.j(C);U(k)||0<k.l(S);)A-=N,V=y(A),k=V.j(C);L(V)&&(V=T),O=O.add(V),S=fe(S,k)}return new ce(O,S)}n.A=function(S){return pe(this,S).h},n.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)&S.i(N);return new c(A,this.h&S.h)},n.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)|S.i(N);return new c(A,this.h|S.h)},n.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)^S.i(N);return new c(A,this.h^S.h)};function Ue(S){for(var C=S.g.length+1,A=[],N=0;N<C;N++)A[N]=S.i(N)<<1|S.i(N-1)>>>31;return new c(A,S.h)}function Fe(S,C){var A=C>>5;C%=32;for(var N=S.g.length-A,O=[],V=0;V<N;V++)O[V]=0<C?S.i(V+A)>>>C|S.i(V+A+1)<<32-C:S.i(V+A);return new c(O,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Aw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Is=c}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xw,wl,kw,wc,Nf,Nw,bw,Dw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cc=="object"&&cc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in v))break e;v=v[B]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,B={next:function(){if(!I&&v<u.length){var Y=v++;return{value:m(Y,u[Y]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function E(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,T.apply(null,arguments)}function P(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function L(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,B,Y){for(var de=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)de[gt-2]=arguments[gt];return m.prototype[B].apply(I,de)}}function U(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function H(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const B=u.length||0,Y=I.length||0;u.length=B+Y;for(let de=0;de<Y;de++)u[B+de]=I[de]}else u.push(I)}}class fe{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function ce(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function pe(u){return pe[" "](u),u}pe[" "]=function(){};var Ue=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Fe(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function S(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function C(u){const m={};for(const v in u)m[v]=u[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(v in I)u[v]=I[v];for(let Y=0;Y<A.length;Y++)v=A[Y],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function O(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function V(u){h.setTimeout(()=>{throw u},0)}function k(){var u=ke;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ke{constructor(){this.h=this.g=null}add(m,v){const I=lt.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var lt=new fe(()=>new vt,u=>u.reset());class vt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let it,oe=!1,ke=new Ke,ge=()=>{const u=h.Promise.resolve(void 0);it=()=>{u.then(j)}};var j=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){V(v)}var m=lt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}oe=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var $e=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function Oe(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ue){e:{try{pe(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:z[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}L(Oe,me);var z={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),q=0;function Z(u,m,v,I,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=B,this.key=++q,this.da=this.fa=!1}function le(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _e(u){this.src=u,this.g={},this.h=0}_e.prototype.add=function(u,m,v,I,B){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var de=be(u,m,I,B);return-1<de?(m=u[de],v||(m.fa=!1)):(m=new Z(m,this.src,Y,!!I,B),m.fa=v,u.push(m)),m};function ye(u,m){var v=m.type;if(v in u.g){var I=u.g[v],B=Array.prototype.indexOf.call(I,m,void 0),Y;(Y=0<=B)&&Array.prototype.splice.call(I,B,1),Y&&(le(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function be(u,m,v,I){for(var B=0;B<u.length;++B){var Y=u[B];if(!Y.da&&Y.listener==m&&Y.capture==!!v&&Y.ha==I)return B}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),Et={};function Mt(u,m,v,I,B){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)Mt(u,m[Y],v,I,B);return null}return v=vr(v),u&&u[K]?u.K(m,v,y(I)?!!I.capture:!1,B):Vr(u,m,v,!1,I,B)}function Vr(u,m,v,I,B,Y){if(!m)throw Error("Invalid event type");var de=y(B)?!!B.capture:!!B,gt=Ui(u);if(gt||(u[ht]=gt=new _e(u)),v=gt.add(m,v,I,de,Y),v.proxy)return v;if(I=Ro(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)$e||(B=de),B===void 0&&(B=!1),u.addEventListener(m.toString(),I,B);else if(u.attachEvent)u.attachEvent(yr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ro(){function u(v){return m.call(u.src,u.listener,v)}const m=Fs;return u}function di(u,m,v,I,B){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)di(u,m[Y],v,I,B);else I=y(I)?!!I.capture:!!I,v=vr(v),u&&u[K]?(u=u.i,m=String(m).toString(),m in u.g&&(Y=u.g[m],v=be(Y,v,I,B),-1<v&&(le(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ui(u))&&(m=u.g[m.toString()],u=-1,m&&(u=be(m,v,I,B)),(v=-1<u?m[u]:null)&&gr(v))}function gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[K])ye(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(yr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Ui(m))?(ye(v,u),v.h==0&&(v.src=null,m[ht]=null)):le(u)}}}function yr(u){return u in Et?Et[u]:Et[u]="on"+u}function Fs(u,m){if(u.da)u=!0;else{m=new Oe(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&gr(u),u=v.call(I,m)}return u}function Ui(u){return u=u[ht],u instanceof _e?u:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function vr(u){return typeof u=="function"?u:(u[An]||(u[An]=function(m){return u.handleEvent(m)}),u[An])}function Ot(){X.call(this),this.i=new _e(this),this.M=this,this.F=null}L(Ot,X),Ot.prototype[K]=!0,Ot.prototype.removeEventListener=function(u,m,v,I){di(this,u,m,v,I)};function xt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var B=m;m=new me(I,u),N(m,B)}if(B=!0,v)for(var Y=v.length-1;0<=Y;Y--){var de=m.g=v[Y];B=Zt(de,I,!0,m)&&B}if(de=m.g=u,B=Zt(de,I,!0,m)&&B,B=Zt(de,I,!1,m)&&B,v)for(Y=0;Y<v.length;Y++)de=m.g=v[Y],B=Zt(de,I,!1,m)&&B}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)le(v[I]);delete u.g[m],u.h--}}this.F=null},Ot.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},Ot.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function Zt(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,Y=0;Y<m.length;++Y){var de=m[Y];if(de&&!de.da&&de.capture==v){var gt=de.listener,Kt=de.ha||de.src;de.fa&&ye(u.i,de),B=gt.call(Kt,I)!==!1&&B}}return B&&!I.defaultPrevented}function Sn(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function _r(u){u.g=Sn(()=>{u.g=null,u.i&&(u.i=!1,_r(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class rr extends X{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(u){X.call(this),this.h=u,this.g={}}L(hi,X);var xn=[];function ji(u){Fe(u.g,function(m,v){this.g.hasOwnProperty(v)&&gr(m)},u),u.g={}}hi.prototype.N=function(){hi.aa.N.call(this),ji(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zi=h.JSON.stringify,Bi=h.JSON.parse,Us=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Mr(){}Mr.prototype.h=null;function wr(u){return u.h||(u.h=u.i())}function fi(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){me.call(this,"d")}L(kn,me);function $i(){me.call(this,"c")}L($i,me);var Hn={},js=null;function Fr(){return js=js||new Ot}Hn.La="serverreachability";function Ur(u){me.call(this,Hn.La,u)}L(Ur,me);function Nn(u){const m=Fr();xt(m,new Ur(m))}Hn.STAT_EVENT="statevent";function zs(u,m){me.call(this,Hn.STAT_EVENT,u),this.stat=m}L(zs,me);function kt(u){const m=Fr();xt(m,new zs(m,u))}Hn.Ma="timingevent";function b(u,m){me.call(this,Hn.Ma,u),this.size=m}L(b,me);function F(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function G(){this.g=!0}G.prototype.xa=function(){this.g=!1};function ne(u,m,v,I,B,Y){u.info(function(){if(u.g)if(Y)for(var de="",gt=Y.split("&"),Kt=0;Kt<gt.length;Kt++){var ot=gt[Kt].split("=");if(1<ot.length){var en=ot[0];ot=ot[1];var zt=en.split("_");de=2<=zt.length&&zt[1]=="type"?de+(en+"="+ot+"&"):de+(en+"=redacted&")}}else de=null;else de=Y;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+v+`
`+de})}function he(u,m,v,I,B,Y,de){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+v+`
`+Y+" "+de})}function Se(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ce(u,v)+(I?" "+I:"")})}function Le(u,m){u.info(function(){return"TIMEOUT: "+m})}G.prototype.info=function(){};function Ce(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var Y=B[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var de=1;de<B.length;de++)B[de]=""}}}}return zi(v)}catch{return m}}var Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},we={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ee;function je(){}L(je,Mr),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},Ee=new je;function We(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lt}function Lt(){this.i=null,this.g="",this.h=!1}var ct={},Je={};function mt(u,m,v){u.L=1,u.v=Ki(Gn(m)),u.m=v,u.P=!0,ir(u,null)}function ir(u,m){u.F=Date.now(),Ze(u),u.A=Gn(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Yi(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Lt,u.g=hu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new rr(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(xn[0]=B.toString()),B=xn);for(var Y=0;Y<B.length;Y++){var de=Mt(v,B[Y],I||m.handleEvent,!1,m.h||m);if(!de)break;m.g[de.key]=de}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Nn(),ne(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Dn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)e:{const zt=Dn(this.g);var m=this.g.Ba();const ar=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||ja(this.g)))){this.J||zt!=4||m==7||(m==8||0>=ar?Nn(3):Nn(2)),qn(this);var v=this.g.Z();this.X=v;t:if(jr(this)){var I=ja(this.g);u="";var B=I.length,Y=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),mn(this);var de="";break t}this.h.i=new h.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(Y&&m==B-1)});I.length=0,this.h.g+=u,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=v==200,he(this.i,this.u,this.A,this.l,this.R,zt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Kt=this.g;if((gt=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(gt)){var ot=gt;break t}}ot=null}if(v=ot)Se(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zr(this,v);else{this.o=!1,this.s=3,kt(12),on(this),mn(this);break e}}if(this.P){v=!0;let Qn;for(;!this.J&&this.C<de.length;)if(Qn=Wn(this,de),Qn==Je){zt==4&&(this.s=4,kt(14),v=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==ct){this.s=4,kt(15),Se(this.i,this.l,de,"[Invalid Chunk]"),v=!1;break}else Se(this.i,this.l,Qn,null),zr(this,Qn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||de.length!=0||this.h.h||(this.s=1,kt(16),v=!1),this.o=this.o&&v,!v)Se(this.i,this.l,de,"[Invalid Chunked Response]"),on(this),mn(this);else if(0<de.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ba(en),en.M=!0,kt(11))}}else Se(this.i,this.l,de,null),zr(this,de);zt==4&&on(this),this.o&&!this.J&&(zt==4?Uo(this.j,this):(this.o=!1,Ze(this)))}else Oo(this.g),v==400&&0<de.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),on(this),mn(this)}}}catch{}finally{}};function jr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Wn(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Je:(v=Number(m.substring(v,I)),isNaN(v)?ct:(I+=1,I+v>m.length?Je:(m=m.slice(I,I+v),u.C=I+v,m)))}We.prototype.cancel=function(){this.J=!0,on(this)};function Ze(u){u.S=Date.now()+u.I,Hi(u,u.I)}function Hi(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=F(T(u.ba,u),m)}function qn(u){u.B&&(h.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Le(this.i,this.A),this.L!=2&&(Nn(),kt(17)),on(this),this.s=2,mn(this)):Hi(this,this.S-u)};function mn(u){u.j.G==0||u.J||Uo(u.j,u)}function on(u){qn(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ji(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function zr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||tt(v.h,u))){if(!u.K&&tt(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Fo(v),Cr(v);else break e;Mo(v),kt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=F(T(v.Za,v),6e3));if(1>=Br(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else vi(v,11)}else if((u.K||v.g==u)&&Fo(v),!ee(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let ot=B[m];if(v.T=ot[0],ot=ot[1],v.G==2)if(ot[0]=="c"){v.K=ot[1],v.ia=ot[2];const en=ot[3];en!=null&&(v.la=en,v.j.info("VER="+v.la));const zt=ot[4];zt!=null&&(v.Aa=zt,v.j.info("SVER="+v.Aa));const ar=ot[5];ar!=null&&typeof ar=="number"&&0<ar&&(I=1.5*ar,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Qn=u.g;if(Qn){const Ks=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var Y=I.h;Y.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sr(Y,Y.h),Y.h=null))}if(I.D){const zo=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(I.ya=zo,_t(I.I,I.D,zo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var de=u;if(I.qa=du(I,I.J?I.ia:null,I.W),de.K){Bs(I.h,de);var gt=de,Kt=I.L;Kt&&(gt.I=Kt),gt.B&&(qn(gt),Ze(gt)),I.g=de}else Gs(I);0<v.i.length&&qr(v)}else ot[0]!="stop"&&ot[0]!="close"||vi(v,7);else v.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?vi(v,7):ln(v):ot[0]!="noop"&&v.l&&v.l.ta(ot),v.v=0)}}Nn(4)}catch{}}var et=class{constructor(u,m){this.g=u,this.map=m}};function ft(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Br(u){return u.h?1:u.g?u.g.size:0}function tt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function sr(u,m){u.g?u.g.add(m):u.h=m}function Bs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ft.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ao(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return U(u.i)}function xo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function ko(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Wi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=ko(u),I=xo(u),B=I.length,Y=0;Y<B;Y++)m.call(void 0,I[Y],v&&v[Y],u)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ad(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),B=null;if(0<=I){var Y=u[v].substring(0,I);B=u[v].substring(I+1)}else Y=u[v];m(Y,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pi){this.h=u.h,Hs(this,u.j),this.o=u.o,this.g=u.g,qi(this,u.s),this.l=u.l;var m=u.i,v=new $r;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Gi(this,v),this.m=u.m}else u&&(m=String(u).match($s))?(this.h=!1,Hs(this,m[1]||"",!0),this.o=st(m[2]||""),this.g=st(m[3]||"",!0),qi(this,m[4]),this.l=st(m[5]||"",!0),Gi(this,m[6]||"",!0),this.m=st(m[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}pi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Qi(m,No,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qi(m,No,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Qi(v,v.charAt(0)=="/"?ru:nu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Qi(v,Ma)),u.join("")};function Gn(u){return new pi(u)}function Hs(u,m,v){u.j=v?st(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Gi(u,m,v){m instanceof $r?(u.i=m,Hr(u.i,u.h)):(v||(m=Qi(m,iu)),u.i=new $r(m,u.h))}function _t(u,m,v){u.i.set(m,v)}function Ki(u){return _t(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function st(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,tu),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var No=/[#\/\?@]/g,nu=/[#\?:]/g,ru=/[#\?]/g,iu=/[#\?@]/g,Ma=/#/g;function $r(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&Ad(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=$r.prototype,n.add=function(u,m){an(this),this.i=null,u=or(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Er(u,m){an(u),m=or(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Tr(u,m){return an(u),m=or(u,m),u.g.has(m)}n.forEach=function(u,m){an(this),this.g.forEach(function(v,I){v.forEach(function(B){u.call(m,B,I,this)},this)},this)},n.na=function(){an(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const B=u[I];for(let Y=0;Y<B.length;Y++)v.push(m[I])}return v},n.V=function(u){an(this);let m=[];if(typeof u=="string")Tr(this,u)&&(m=m.concat(this.g.get(or(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return an(this),this.i=null,u=or(this,u),Tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Yi(u,m,v){Er(u,m),0<v.length&&(u.i=null,u.g.set(or(u,m),U(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const Y=encodeURIComponent(String(I)),de=this.V(I);for(I=0;I<de.length;I++){var B=Y;de[I]!==""&&(B+="="+encodeURIComponent(String(de[I]))),u.push(B)}}return this.i=u.join("&")};function or(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Hr(u,m){m&&!u.j&&(an(u),u.i=null,u.g.forEach(function(v,I){var B=I.toLowerCase();I!=B&&(Er(this,I),Yi(this,B,v))},u)),u.j=m}function xd(u,m){const v=new G;if(h.Image){const I=new Image;I.onload=P(bn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=P(bn,v,"TestLoadImage: error",!1,m,I),I.onabort=P(bn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=P(bn,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function su(u,m){const v=new G,I=new AbortController,B=setTimeout(()=>{I.abort(),bn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(Y=>{clearTimeout(B),Y.ok?bn(v,"TestPingServer: ok",!0,m):bn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),bn(v,"TestPingServer: error",!1,m)})}function bn(u,m,v,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(v)}catch{}}function kd(){this.g=new Us}function ou(u,m,v){const I=v||"";try{Wi(u,function(B,Y){let de=B;y(B)&&(de=zi(B)),m.push(I+Y+"="+encodeURIComponent(de))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function mi(u){this.l=u.Ub||null,this.j=u.eb||!1}L(mi,Mr),mi.prototype.g=function(){return new Ws(this.l,this.j)},mi.prototype.i=(function(u){return function(){return u}})({});function Ws(u,m){Ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Ws,Ot),n=Ws.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Sr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;au(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function au(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ir(this):Sr(this),this.readyState==3&&au(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ir(this))},n.Qa=function(u){this.g&&(this.response=u,Ir(this))},n.ga=function(){this.g&&Ir(this)};function Ir(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Sr(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gi(u){let m="";return Fe(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Ji(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=gi(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):_t(u,m,v))}function Pt(u){Ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Pt,Ot);var Nd=/^https?$/i,Fa=["POST","PUT"];n=Pt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ee.g(),this.v=this.o?wr(this.o):wr(Ee),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Y){qs(this,Y);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)v.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())v.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Fa,m,void 0))||I||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,de]of v)this.g.setRequestHeader(Y,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Do(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){qs(this,Y)}};function qs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,bo(u),Kn(u)}function bo(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),Kn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ua(this):this.bb())},n.bb=function(){Ua(this)};function Ua(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Dn(u)!=4||u.Z()!=2)){if(u.u&&Dn(u)==4)Sn(u.Ea,0,u);else if(xt(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const de=u.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=de===0){var B=String(u.D).match($s)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),I=!Nd.test(B?B.toLowerCase():"")}v=I}if(v)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var Y=2<Dn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",bo(u)}}finally{Kn(u)}}}}function Kn(u,m){if(u.g){Do(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||xt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Do(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Bi(m)}};function ja(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Oo(u){const m={};u=(u.g&&2<=Dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(ee(u[I]))continue;var v=O(u[I]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=m[B]||[];m[B]=Y,Y.push(v)}S(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function za(u){this.Aa=0,this.i=[],this.j=new G,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,u),this.cb=Wr("retryDelaySeedMs",1e4,u),this.Wa=Wr("forwardChannelMaxRetries",2,u),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ft(u&&u.concurrentRequestLimit),this.Da=new kd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=za.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){kt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=du(this,null,this.W),qr(this)};function ln(u){if(Lo(u),u.G==3){var m=u.U++,v=Gn(u.I);if(_t(v,"SID",u.K),_t(v,"RID",m),_t(v,"TYPE","terminate"),yi(u,v),m=new We(u,u.j,m),m.L=2,m.v=Ki(Gn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=hu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ze(m)}cu(u)}function Cr(u){u.g&&(Ba(u),u.g.cancel(),u.g=null)}function Lo(u){Cr(u),u.u&&(h.clearTimeout(u.u),u.u=null),Fo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function qr(u){if(!jt(u.h)&&!u.s){u.s=!0;var m=u.Ga;it||ge(),oe||(it(),oe=!0),ke.add(m,u),u.B=0}}function bd(u,m){return Br(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=F(T(u.Ga,u,m),uu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new We(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=C(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(B.H=Y,Y=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Xi(this,B,m),v=Gn(this.I),_t(v,"RID",u),_t(v,"CVER",22),this.D&&_t(v,"X-HTTP-Session-Id",this.D),yi(this,v),Y&&(this.O?m="headers="+encodeURIComponent(String(gi(Y)))+"&"+m:this.m&&Ji(v,this.m,Y)),sr(this.h,B),this.Ua&&_t(v,"TYPE","init"),this.P?(_t(v,"$req",m),_t(v,"SID","null"),B.T=!0,mt(B,v,null)):mt(B,v,m),this.G=2}}else this.G==3&&(u?Vo(this,u):this.i.length==0||jt(this.h)||Vo(this))};function Vo(u,m){var v;m?v=m.l:v=u.U++;const I=Gn(u.I);_t(I,"SID",u.K),_t(I,"RID",v),_t(I,"AID",u.T),yi(u,I),u.m&&u.o&&Ji(I,u.m,u.o),v=new We(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Xi(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sr(u.h,v),mt(v,I,m)}function yi(u,m){u.H&&Fe(u.H,function(v,I){_t(m,I,v)}),u.l&&Wi({},function(v,I){_t(m,I,v)})}function Xi(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var B=u.i;let Y=-1;for(;;){const de=["count="+v];Y==-1?0<v?(Y=B[0].g,de.push("ofs="+Y)):Y=0:de.push("ofs="+Y);let gt=!0;for(let Kt=0;Kt<v;Kt++){let ot=B[Kt].g;const en=B[Kt].map;if(ot-=Y,0>ot)Y=Math.max(0,B[Kt].g-100),gt=!1;else try{ou(en,de,"req"+ot+"_")}catch{I&&I(en)}}if(gt){I=de.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Gs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;it||ge(),oe||(it(),oe=!0),ke.add(m,u),u.v=0}}function Mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=F(T(u.Fa,u),uu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=F(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Cr(this),lu(this))};function Ba(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function lu(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Gn(u.qa);_t(m,"RID","rpc"),_t(m,"SID",u.K),_t(m,"AID",u.T),_t(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&_t(m,"TO",u.ja),_t(m,"TYPE","xmlhttp"),yi(u,m),u.m&&u.o&&Ji(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ki(Gn(m)),v.m=null,v.P=!0,ir(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Cr(this),Mo(this),kt(19))};function Fo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Uo(u,m){var v=null;if(u.g==m){Fo(u),Ba(u),u.g=null;var I=2}else if(tt(u.h,m))v=m.D,Bs(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;I=Fr(),xt(I,new b(I,v)),qr(u)}else Gs(u);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&bd(u,m)||I==2&&Mo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:vi(u,5);break;case 4:vi(u,10);break;case 3:vi(u,6);break;default:vi(u,2)}}}function uu(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function vi(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const B=!I;I=new pi(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hs(I,"https"),Ki(I),B?xd(I.toString(),v):su(I.toString(),v)}else kt(2);u.G=0,u.l&&u.l.sa(m),cu(u),Lo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function cu(u){if(u.G=0,u.ka=[],u.l){const m=Ao(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ka,m),H(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function du(u,m,v){var I=v instanceof pi?Gn(v):new pi(v);if(I.g!="")m&&(I.g=m+"."+I.g),qi(I,I.s);else{var B=h.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var Y=new pi(null);I&&Hs(Y,I),m&&(Y.g=m),B&&qi(Y,B),v&&(Y.l=v),I=Y}return v=u.D,m=u.ya,v&&m&&_t(I,v,m),_t(I,"VER",u.la),yi(u,I),I}function hu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Pt(new mi({eb:v})):new Pt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $a(){}n=$a.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jo(){}jo.prototype.g=function(u,m){return new Cn(u,m)};function Cn(u,m){Ot.call(this),this.g=new za(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Gr(this)}L(Cn,Ot),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){ln(this.g)},Cn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=zi(u),u=v);m.i.push(new et(m.Ya++,u)),m.G==3&&qr(m)},Cn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Cn.aa.N.call(this)};function fu(u){kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}L(fu,kn);function pu(){$i.call(this),this.status=1}L(pu,$i);function Gr(u){this.g=u}L(Gr,$a),Gr.prototype.ua=function(){xt(this.g,"a")},Gr.prototype.ta=function(u){xt(this.g,new fu(u))},Gr.prototype.sa=function(u){xt(this.g,new pu)},Gr.prototype.ra=function(){xt(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,Dw=function(){return new jo},bw=function(){return Fr()},Nw=Hn,Nf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,wc=Ie,we.COMPLETE="complete",kw=we,fi.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,wl=fi,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,xw=Pt}).apply(typeof cc<"u"?cc:typeof self<"u"?self:typeof window<"u"?window:{});const dv="@firebase/firestore",hv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new ip("@firebase/firestore");function ua(){return wo.logLevel}function Te(n,...e){if(wo.logLevel<=nt.DEBUG){const t=e.map(gp);wo.debug(`Firestore (${Da}): ${n}`,...t)}}function Li(n,...e){if(wo.logLevel<=nt.ERROR){const t=e.map(gp);wo.error(`Firestore (${Da}): ${n}`,...t)}}function Ps(n,...e){if(wo.logLevel<=nt.WARN){const t=e.map(gp);wo.warn(`Firestore (${Da}): ${n}`,...t)}}function gp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Ow(n,i,t)}function Ow(n,e,t){let i=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Li(i),new Error(i)}function pt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||Ow(e,o,i)}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(En.UNAUTHENTICATED)))}shutdown(){}}class wR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ER{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ni,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},h=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ni)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string",31837,{l:i}),new Lw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class TR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new TR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const i=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=CR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ye(n,e){return n<e?-1:n>e?1:0}function bf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ye(i,o);{const l=Vw(),c=PR(l.encode(pv(n,t)),l.encode(pv(e,t)));return c!==0?c:Ye(i,o)}}t+=i>65535?2:1}return Ye(n.length,e.length)}function pv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function PR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ye(n[t],e[t]);return Ye(n.length,e.length)}function Ta(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="__name__";class Xr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Xr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ye(e.length,t.length)}static compareSegments(e,t){const i=Xr.isNumericId(e),o=Xr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Xr.extractNumericId(e).compare(Xr.extractNumericId(t)):bf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class St extends Xr{construct(e,t,i){return new St(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const RR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Xr{construct(e,t,i){return new hn(e,t,i)}static isValidIdentifier(e){return RR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mv}static keyField(){return new hn([mv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new xe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new xe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new xe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(l(),o++)}if(l(),c)throw new xe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(St.fromString(e))}static fromName(e){return new De(St.fromString(e).popFirst(5))}static empty(){return new De(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n,e,t){if(!t)throw new xe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AR(n,e,t,i){if(e===!0&&i===!0)throw new xe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gv(n){if(!De.isDocumentKey(n))throw new xe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yv(n){if(De.isDocumentKey(n))throw new xe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function vp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function Lr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vp(n);throw new xe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Yl(n,e){if(!Fw(n))throw new xe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new xe(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=-62135596800,_v=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*_v);return new Ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vv)throw new xe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_v}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yl(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Wt("string",Ct._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Ct(0,0))}static max(){return new qe(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function xR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(i===1e9?new Ct(t+1,0):new Ct(t,i));return new Rs(o,De.empty(),e)}function kR(n){return new Rs(n.readTime,n.key,Vl)}class Rs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Rs(qe.min(),De.empty(),Vl)}static max(){return new Rs(qe.max(),De.empty(),Vl)}}function NR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==bR)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,l=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++h,h===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new te(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function OR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function La(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}od.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=-1;function ad(n){return n==null}function Fc(n){return n===0&&1/n==-1/0}function LR(n){return typeof n=="number"&&Number.isInteger(n)&&!Fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="";function VR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wv(e)),e=MR(n.get(t),e);return wv(e)}function MR(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Uw:t+="";break;default:t+=l}}return t}function wv(n){return n+Uw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??dn.RED,this.left=o??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new dn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return dn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new nr([])}unionWith(e){let t=new Xt(hn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new zw("Invalid base64 string: "+l):l}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const FR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(pt(!!n,39018),typeof n=="string"){let e=0;const t=FR.exec(n);if(pt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="server_timestamp",$w="__type__",Hw="__previous_value__",Ww="__local_write_time__";function wp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$w])===null||t===void 0?void 0:t.stringValue)===Bw}function ld(n){const e=n.mapValue.fields[Hw];return wp(e)?ld(e):e}function Ml(n){const e=As(n.mapValue.fields[Ww].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,o,l,c,h,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Uc="(default)";class Fl{constructor(e,t){this.projectId=e,this.database=t||Uc}static empty(){return new Fl("","")}get isDefaultDatabase(){return this.database===Uc}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="__type__",jR="__max__",hc={mapValue:{}},Gw="__vector__",jc="value";function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wp(n)?4:BR(n)?9007199254740991:zR(n)?10:11:Be(28295,{value:n})}function oi(n,e){if(n===e)return!0;const t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ml(n).isEqual(Ml(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=As(o.timestampValue),h=As(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return xs(o.bytesValue).isEqual(xs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ut(o.geoPointValue.latitude)===Ut(l.geoPointValue.latitude)&&Ut(o.geoPointValue.longitude)===Ut(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ut(o.integerValue)===Ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Ut(o.doubleValue),h=Ut(l.doubleValue);return c===h?Fc(c)===Fc(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Ta(n.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Ev(c)!==Ev(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!oi(c[p],h[p])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function Ul(n,e){return(n.values||[]).find((t=>oi(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=ks(n),i=ks(e);if(t!==i)return Ye(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Ut(l.integerValue||l.doubleValue),p=Ut(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return Iv(n.timestampValue,e.timestampValue);case 4:return Iv(Ml(n),Ml(e));case 5:return bf(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=xs(l),p=xs(c);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const _=Ye(h[y],p[y]);if(_!==0)return _}return Ye(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ye(Ut(l.latitude),Ut(c.latitude));return h!==0?h:Ye(Ut(l.longitude),Ut(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Sv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var h,p,y,_;const E=l.fields||{},T=c.fields||{},P=(h=E[jc])===null||h===void 0?void 0:h.arrayValue,L=(p=T[jc])===null||p===void 0?void 0:p.arrayValue,U=Ye(((y=P?.values)===null||y===void 0?void 0:y.length)||0,((_=L?.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:Sv(P,L)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===hc.mapValue&&c===hc.mapValue)return 0;if(l===hc.mapValue)return 1;if(c===hc.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=bf(p[E],_[E]);if(T!==0)return T;const P=Ia(h[p[E]],y[_[E]]);if(P!==0)return P}return Ye(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{le:t})}}function Iv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=As(n),i=As(e),o=Ye(t.seconds,i.seconds);return o!==0?o:Ye(t.nanos,i.nanos)}function Sv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ia(t[o],i[o]);if(l)return l}return Ye(t.length,i.length)}function Sa(n){return Df(n)}function Df(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=As(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Df(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Df(t.fields[c])}`;return o+"}"})(n.mapValue):Be(61005,{value:n})}function Ec(n){switch(ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ld(n);return e?16+Ec(e):16;case 5:return 2*n.stringValue.length;case 6:return xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Ec(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Vs(i.fields,((l,c)=>{o+=l.length+Ec(c)})),o})(n.mapValue);default:throw Be(13486,{value:n})}}function Of(n){return!!n&&"integerValue"in n}function Ep(n){return!!n&&"arrayValue"in n}function Cv(n){return!!n&&"nullValue"in n}function Pv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tc(n){return!!n&&"mapValue"in n}function zR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[qw])===null||t===void 0?void 0:t.stringValue)===Gw}function Pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Pl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(t)}setAll(e){let t=hn.emptyPath(),i={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}c?i[h.lastSegment()]=Pl(c):o.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Vs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Bn(Pl(this.value))}}function Kw(n){const e=[];return Vs(n.fields,((t,i)=>{const o=new hn([t]);if(Tc(i)){const l=Kw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,i,o,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Tn(e,0,qe.min(),qe.min(),qe.min(),Bn.empty(),0)}static newFoundDocument(e,t,i,o){return new Tn(e,1,t,qe.min(),i,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,qe.min(),qe.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,qe.min(),qe.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.position=e,this.inclusive=t}}function Rv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=De.comparator(De.fromName(c.referenceValue),t.key):i=Ia(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Av(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function $R(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{}class Jt extends Qw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new WR(e,t,i):t==="array-contains"?new KR(e,i):t==="in"?new QR(e,i):t==="not-in"?new YR(e,i):t==="array-contains-any"?new JR(e,i):new Jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new qR(e,i):new GR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends Qw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ai(e,t)}matches(e){return Yw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Yw(n){return n.op==="and"}function Jw(n){return HR(n)&&Yw(n)}function HR(n){for(const e of n.filters)if(e instanceof ai)return!1;return!0}function Lf(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(Jw(n))return n.filters.map((e=>Lf(e))).join(",");{const e=n.filters.map((t=>Lf(t))).join(",");return`${n.op}(${e})`}}function Xw(n,e){return n instanceof Jt?(function(i,o){return o instanceof Jt&&i.op===o.op&&i.field.isEqual(o.field)&&oi(i.value,o.value)})(n,e):n instanceof ai?(function(i,o){return o instanceof ai&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,h)=>l&&Xw(c,o.filters[h])),!0):!1})(n,e):void Be(19439)}function Zw(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(Zw).join(" ,")+"}"})(n):"Filter"}class WR extends Jt{constructor(e,t,i){super(e,t,i),this.key=De.fromName(i.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class qR extends Jt{constructor(e,t){super(e,"in",t),this.keys=eE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GR extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=eE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>De.fromName(i.referenceValue)))}class KR extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ep(t)&&Ul(t.arrayValue,this.value)}}class QR extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ul(this.value.arrayValue,t)}}class YR extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ul(this.value.arrayValue,t)}}class JR extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ul(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t=null,i=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Pe=null}}function xv(n,e=null,t=[],i=[],o=null,l=null,c=null){return new XR(n,e,t,i,o,l,c)}function Tp(n){const e=Ge(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Lf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Sa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Sa(i))).join(",")),e.Pe=t}return e.Pe}function Ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$R(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Av(n.startAt,e.startAt)&&Av(n.endAt,e.endAt)}function Vf(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t=null,i=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ZR(n,e,t,i,o,l,c,h){return new ud(n,e,t,i,o,l,c,h)}function Sp(n){return new ud(n)}function kv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eA(n){return n.collectionGroup!==null}function Rl(n){const e=Ge(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Xt(hn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(h=h.add(y.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Bc(l,i))})),t.has(hn.keyField().canonicalString())||e.Te.push(new Bc(hn.keyField(),i))}return e.Te}function ni(n){const e=Ge(n);return e.Ie||(e.Ie=tA(e,Rl(n))),e.Ie}function tA(n,e){if(n.limitType==="F")return xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Bc(o.field,l)}));const t=n.endAt?new zc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new zc(n.startAt.position,n.startAt.inclusive):null;return xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Mf(n,e,t){return new ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cd(n,e){return Ip(ni(n),ni(e))&&n.limitType===e.limitType}function tE(n){return`${Tp(ni(n))}|lt:${n.limitType}`}function ca(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Zw(o))).join(", ")}]`),ad(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Sa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Sa(o))).join(",")),`Target(${i})`})(ni(n))}; limitType=${n.limitType})`}function dd(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):De.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of Rl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,h,p){const y=Rv(c,h,p);return c.inclusive?y<=0:y<0})(i.startAt,Rl(i),o)||i.endAt&&!(function(c,h,p){const y=Rv(c,h,p);return c.inclusive?y>=0:y>0})(i.endAt,Rl(i),o))})(n,e)}function nA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nE(n){return(e,t)=>{let i=!1;for(const o of Rl(n)){const l=rA(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function rA(n,e,t){const i=n.field.isKeyField()?De.comparator(e.key,t.key):(function(l,c,h){const p=c.data.field(l),y=h.data.field(l);return p!==null&&y!==null?Ia(p,y):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Dt(De.comparator);function Vi(){return iA}const rE=new Dt(De.comparator);function El(...n){let e=rE;for(const t of n)e=e.insert(t.key,t);return e}function iE(n){let e=rE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fo(){return Al()}function sE(){return Al()}function Al(){return new So((n=>n.toString()),((n,e)=>n.isEqual(e)))}const sA=new Dt(De.comparator),oA=new Xt(De.comparator);function rt(...n){let e=oA;for(const t of n)e=e.add(t);return e}const aA=new Xt(Ye);function lA(){return aA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function oE(n){return{integerValue:""+n}}function uA(n,e){return LR(e)?oE(e):Cp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function cA(n,e,t){return n instanceof jl?(function(o,l){const c={fields:{[$w]:{stringValue:Bw},[Ww]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&wp(l)&&(l=ld(l)),l&&(c.fields[Hw]=l),{mapValue:c}})(t,e):n instanceof zl?lE(n,e):n instanceof Bl?uE(n,e):(function(o,l){const c=aE(o,l),h=Nv(c)+Nv(o.Ee);return Of(c)&&Of(o.Ee)?oE(h):Cp(o.serializer,h)})(n,e)}function dA(n,e,t){return n instanceof zl?lE(n,e):n instanceof Bl?uE(n,e):t}function aE(n,e){return n instanceof $c?(function(i){return Of(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class jl extends hd{}class zl extends hd{constructor(e){super(),this.elements=e}}function lE(n,e){const t=cE(e);for(const i of n.elements)t.some((o=>oi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Bl extends hd{constructor(e){super(),this.elements=e}}function uE(n,e){let t=cE(e);for(const i of n.elements)t=t.filter((o=>!oi(o,i)));return{arrayValue:{values:t}}}class $c extends hd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Nv(n){return Ut(n.integerValue||n.doubleValue)}function cE(n){return Ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.field=e,this.transform=t}}function fA(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof zl&&o instanceof zl||i instanceof Bl&&o instanceof Bl?Ta(i.elements,o.elements,oi):i instanceof $c&&o instanceof $c?oi(i.Ee,o.Ee):i instanceof jl&&o instanceof jl})(n.transform,e.transform)}class pA{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fd{}function dE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pp(n.key,mr.none()):new Jl(n.key,n.data,mr.none());{const t=n.data,i=Bn.empty();let o=new Xt(hn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Ms(n.key,i,new nr(o.toArray()),mr.none())}}function mA(n,e,t){n instanceof Jl?(function(o,l,c){const h=o.value.clone(),p=Dv(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ms?(function(o,l,c){if(!Ic(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Dv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(hE(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function xl(n,e,t,i){return n instanceof Jl?(function(l,c,h,p){if(!Ic(l.precondition,c))return h;const y=l.value.clone(),_=Ov(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ms?(function(l,c,h,p){if(!Ic(l.precondition,c))return h;const y=Ov(l.fieldTransforms,p,c),_=c.data;return _.setAll(hE(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,c,h){return Ic(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function gA(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=aE(i.transform,o||null);l!=null&&(t===null&&(t=Bn.empty()),t.set(i.field,l))}return t||null}function bv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ta(i,o,((l,c)=>fA(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jl extends fd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ms extends fd{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function hE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Dv(n,e,t){const i=new Map;pt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);i.set(l.field,dA(c,h,t[o]))}return i}function Ov(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,cA(l,c,e))}return i}class Pp extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yA extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&mA(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=sE();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=dE(c,h);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(qe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rt())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,((t,i)=>bv(t,i)))&&Ta(this.baseMutations,e.baseMutations,((t,i)=>bv(t,i)))}}class Rp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){pt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return sA})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Rp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,at;function EA(n){switch(n){case re.OK:return Be(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function fE(n){if(n===void 0)return Li("GRPC error has no .code"),re.UNKNOWN;switch(n){case $t.OK:return re.OK;case $t.CANCELLED:return re.CANCELLED;case $t.UNKNOWN:return re.UNKNOWN;case $t.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case $t.INTERNAL:return re.INTERNAL;case $t.UNAVAILABLE:return re.UNAVAILABLE;case $t.UNAUTHENTICATED:return re.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case $t.NOT_FOUND:return re.NOT_FOUND;case $t.ALREADY_EXISTS:return re.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return re.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case $t.ABORTED:return re.ABORTED;case $t.OUT_OF_RANGE:return re.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return re.UNIMPLEMENTED;case $t.DATA_LOSS:return re.DATA_LOSS;default:return Be(39323,{code:n})}}(at=$t||($t={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Is([4294967295,4294967295],0);function Lv(n){const e=Vw().encode(n),t=new Aw;return t.update(e),new Uint8Array(t.digest())}function Vv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([t,i],0),new Is([o,l],0)]}class Ap{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tl(`Invalid padding: ${t}`);if(i<0)throw new Tl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Is.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Is.fromNumber(i)));return o.compare(TA)===1&&(o=new Is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Lv(e),[i,o]=Vv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ap(l,o,t);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.fe===0)return;const t=Lv(e),[i,o]=Vv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new pd(qe.min(),o,new Dt(Ye),Vi(),rt())}}class Xl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xl(i,t,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class pE{constructor(e,t){this.targetId=e,this.De=t}}class mE{constructor(e,t,i=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Mv{constructor(){this.ve=0,this.Ce=Fv(),this.Fe=fn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=rt(),t=rt(),i=rt();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Be(38017,{changeType:l})}})),new Xl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Fv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class IA{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=fc(),this.Je=fc(),this.He=new Dt(Ye)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Vf(l))if(i===0){const c=new De(l.path);this.Xe(t,c,Tn.newNoDocument(c,qe.min()))}else pt(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const h=this._t(e),p=h?this.ut(h,e,c):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=xs(i).toUint8Array()}catch(p){if(p instanceof zw)return Ps("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Ap(c,o,l)}catch(p){return Ps(p instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.fe===0?null:h}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const h=this.st(c);if(h){if(l.current&&Vf(h.target)){const p=new De(h.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,Tn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let i=rt();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new pd(e,t,this.He,this.ze,i);return this.ze=Vi(),this.je=fc(),this.Je=fc(),this.He=new Dt(Ye),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Mv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Xt(Ye),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Xt(Ye),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Mv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function fc(){return new Dt(De.comparator)}function Fv(){return new Dt(De.comparator)}const SA={asc:"ASCENDING",desc:"DESCENDING"},CA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PA={and:"AND",or:"OR"};class RA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ff(n,e){return n.useProto3Json||ad(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AA(n,e){return Hc(n,e.toTimestamp())}function ri(n){return pt(!!n,49232),qe.fromTimestamp((function(t){const i=As(t);return new Ct(i.seconds,i.nanos)})(n))}function xp(n,e){return Uf(n,e).canonicalString()}function Uf(n,e){const t=(function(o){return new St(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function yE(n){const e=St.fromString(n);return pt(TE(e),10190,{key:e.toString()}),e}function jf(n,e){return xp(n.databaseId,e.path)}function pf(n,e){const t=yE(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(_E(t))}function vE(n,e){return xp(n.databaseId,e)}function xA(n){const e=yE(n);return e.length===4?St.emptyPath():_E(e)}function zf(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _E(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Uv(n,e,t){return{name:jf(n,e),fields:t.value.mapValue.fields}}function kA(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(pt(_===void 0||typeof _=="string",58123),fn.fromBase64String(_||"")):(pt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),fn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(y){const _=y.code===void 0?re.UNKNOWN:fE(y.code);return new xe(_,y.message||"")})(c);t=new mE(i,o,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pf(n,i.document.name),l=ri(i.document.updateTime),c=i.document.createTime?ri(i.document.createTime):qe.min(),h=new Bn({mapValue:{fields:i.document.fields}}),p=Tn.newFoundDocument(o,l,c,h),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Sc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pf(n,i.document),l=i.readTime?ri(i.readTime):qe.min(),c=Tn.newNoDocument(o,l),h=i.removedTargetIds||[];t=new Sc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pf(n,i.document),l=i.removedTargetIds||[];t=new Sc([],l,o,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new wA(o,l),h=i.targetId;t=new pE(h,c)}}return t}function NA(n,e){let t;if(e instanceof Jl)t={update:Uv(n,e.key,e.value)};else if(e instanceof Pp)t={delete:jf(n,e.key)};else if(e instanceof Ms)t={update:Uv(n,e.key,e.data),updateMask:jA(e.fieldMask)};else{if(!(e instanceof yA))return Be(16599,{Rt:e.type});t={verify:jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const h=c.transform;if(h instanceof jl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof zl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Bl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof $c)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:AA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function bA(n,e){return n&&n.length>0?(pt(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ri(o.updateTime):ri(l);return c.isEqual(qe.min())&&(c=ri(l)),new pA(c,o.transformResults||[])})(t,e)))):[]}function DA(n,e){return{documents:[vE(n,e.path)]}}function OA(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=vE(n,o);const l=(function(y){if(y.length!==0)return EE(ai.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(T){return{field:da(T.field),direction:MA(T.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Ff(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function LA(n){let e=xA(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){pt(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const T=wE(E);return T instanceof ai&&Jw(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(L){return new Bc(ha(L.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let T;return T=typeof E=="object"?E.value:E,ad(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,P=E.values||[];return new zc(P,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,P=E.values||[];return new zc(P,T)})(t.endAt)),ZR(e,o,c,l,h,"F",p,y)}function VA(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ha(t.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ha(t.unaryFilter.field);return Jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ha(t.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ha(t.unaryFilter.field);return Jt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(ha(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((i=>wE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function MA(n){return SA[n]}function FA(n){return CA[n]}function UA(n){return PA[n]}function da(n){return{fieldPath:n.canonicalString()}}function ha(n){return hn.fromServerFormat(n.fieldPath)}function EE(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(Pv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NAN"}};if(Cv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Pv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NAN"}};if(Cv(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(t.field),op:FA(t.op),value:t.value}}})(n):n instanceof ai?(function(t){const i=t.getFilters().map((o=>EE(o)));return i.length===1?i[0]:{compositeFilter:{op:UA(t.op),filters:i}}})(n):Be(54877,{filter:n})}function jA(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,i,o,l=qe.min(),c=qe.min(),h=fn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.gt=e}}function BA(n){const e=LA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.Dn=new HA}addToCollectionParentIndex(e,t){return this.Dn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Rs.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class HA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Xt(St.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Xt(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IE=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(IE,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ca(0)}static ur(){return new Ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="LruGarbageCollector",WA=1048576;function Bv([n,e],[t,i]){const o=Ye(n,t);return o===0?Ye(e,i):o}class qA{constructor(e){this.Tr=e,this.buffer=new Xt(Bv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Bv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Te(zv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){La(t)?Te(zv,"Ignoring IndexedDB error during garbage collection: ",t):await Oa(t)}await this.Rr(3e5)}))}}class KA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(od.ue);const i=new qA(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(jv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,c,h,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,h=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),ua()<=nt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function QA(n,e){return new KA(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.changes=new So((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&xl(i.mutation,o,nr.empty(),Ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,rt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=rt()){const o=fo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=El();return l.forEach(((h,p)=>{c=c.insert(h,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,rt())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,i,o){let l=Vi();const c=Al(),h=(function(){return Al()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ms)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),xl(_.mutation,y,_.mutation.getFieldMask(),Ct.now())):c.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>{var E;return h.set(y,new JA(_,(E=c.get(y))!==null&&E!==void 0?E:null))})),h)))}recalculateAndSaveOverlays(e,t){const i=Al();let o=new Dt(((c,h)=>c-h)),l=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||nr.empty();_=h.applyToLocalView(y,_),i.set(p,_);const E=(o.get(h.batchId)||rt()).add(p);o=o.insert(h.batchId,E)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,_=p.value,E=sE();_.forEach((T=>{if(!l.has(T)){const P=dE(t.get(T),i.get(T));P!==null&&E.set(T,P),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return te.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return De.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):te.resolve(fo());let h=Vl,p=l;return c.next((y=>te.forEach(y,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),l.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,rt()))).next((_=>({batchId:h,changes:iE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((i=>{let o=El();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=El();return this.indexManager.getCollectionParents(e,l).next((h=>te.forEach(h,(p=>{const y=(function(E,T){return new ud(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Tn.newInvalidDocument(_)))}));let h=El();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&xl(_.mutation,y,nr.empty(),Ct.now()),dd(t,y)&&(h=h.insert(p,y))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ri(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:BA(o.bundledQuery),readTime:ri(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.overlays=new Dt(De.comparator),this.kr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return te.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=fo(),l=t.length+1,c=new De(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Dt(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=fo(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const h=fo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>h.set(y,_))),!(h.size()>=o)););return te.resolve(h)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new _A(t,i));let l=this.kr.get(t);l===void 0&&(l=rt(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.qr=new Xt(sn.Qr),this.$r=new Xt(sn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new sn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new sn(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new De(new St([])),i=new sn(t,e),o=new sn(t,e+1),l=[];return this.$r.forEachInRange([i,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new De(new St([])),i=new sn(t,e),o=new sn(t,e+1);let l=rt();return this.$r.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new sn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return De.comparator(e.key,t.key)||Ye(e.Hr,t.Hr)}static Ur(e,t){return Ye(e.Hr,t.Hr)||De.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Xt(sn.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new vA(l,t,i,o);this.mutationQueue.push(c);for(const h of o)this.Yr=this.Yr.add(new sn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?_p:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new sn(t,0),o=new sn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(c=>{const h=this.Zr(c.Hr);l.push(h)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xt(Ye);return t.forEach((o=>{const l=new sn(o,0),c=new sn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(h=>{i=i.add(h.Hr)}))})),te.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;De.isDocumentKey(l)||(l=l.child(""));const c=new sn(new De(l),0);let h=new Xt(Ye);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.Hr)),!0)}),c),te.resolve(this.ei(h))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){pt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return te.forEach(t.mutations,(o=>{const l=new sn(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new sn(t,0),o=this.Yr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.ni=e,this.docs=(function(){return new Dt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let i=Vi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Vi();const c=t.path,h=new De(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||NR(kR(_),i)<=0||(o.has(_.key)||dd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Be(9500)}ri(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ix(this)}getSize(e){return te.resolve(this.size)}}class ix extends YA{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.persistence=e,this.ii=new So((t=>Tp(t)),Ip),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new kp,this.targetCount=0,this._i=Ca.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.hr(t),te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),te.waitFor(l).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.ai={},this.overlays={},this.ui=new od(0),this.ci=!1,this.ci=!0,this.li=new tx,this.referenceDelegate=e(this),this.hi=new sx(this),this.indexManager=new $A,this.remoteDocumentCache=(function(o){return new rx(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new zA(t),this.Ti=new ZA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ex,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new nx(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Te("MemoryPersistence","Starting transaction:",e);const o=new ox(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return te.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class ox extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ai=new kp,this.Ri=null}static Vi(e){return new Np(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,(i=>{const o=De.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,qe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return te.or([()=>te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wc{constructor(e,t){this.persistence=e,this.gi=new So((i=>VR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=QA(this,t)}static Vi(e,t){return new Wc(e,t)}Ii(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return te.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((h=>{h||(i++,l.removeEntry(c,qe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ec(e.data.value)),t}Sr(e,t,i){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=rt(),o=rt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new bp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return FS()?8:OR(In())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new ax;return this.ws(e,t,c).next((h=>{if(l.result=h,this.Rs)return this.Ss(e,t,c,h.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ua()<=nt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(ua()<=nt.DEBUG&&Te("QueryEngine","Query:",ca(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ua()<=nt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):te.resolve())}ps(e,t){if(kv(t))return te.resolve(null);let i=ni(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Mf(t,null,"F"),i=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=rt(...l);return this.gs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,h);return this.Ds(t,y,c,p.readTime)?this.ps(e,Mf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return kv(t)||o.isEqual(qe.min())?te.resolve(null):this.gs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,i,o)?te.resolve(null):(ua()<=nt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ca(t)),this.vs(e,c,t,xR(o,Vl)).next((h=>h)))}))}bs(e,t){let i=new Xt(nE(e));return t.forEach(((o,l)=>{dd(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return ua()<=nt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",ca(t)),this.gs.getDocumentsMatchingQuery(e,t,Rs.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="LocalStore",ux=3e8;class cx{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Dt(Ye),this.Ms=new So((l=>Tp(l)),Ip),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function dx(n,e,t,i){return new cx(n,e,t,i)}async function CE(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],h=[];let p=rt();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:c,addedBatchIds:h})))}))}))}function hx(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(h,p,y,_){const E=y.batch,T=E.keys();let P=te.resolve();return T.forEach((L=>{P=P.next((()=>_.getEntry(p,L))).next((U=>{const H=y.docVersions.get(L);pt(H!==null,48541),U.version.compareTo(H)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),_.addEntry(U)))}))})),P.next((()=>h.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let p=rt();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function PE(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function fx(n,e){const t=Ge(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const h=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;h.push(t.hi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,E))));let P=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(fn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(E,P),(function(U,H,fe){return U.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=ux?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(T,P,_)&&h.push(t.hi.updateTargetData(l,P))}));let p=Vi(),y=rt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),h.push(px(l,c,e.documentUpdates).next((_=>{p=_.Ls,y=_.ks}))),!i.isEqual(qe.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(_)}return te.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function px(n,e,t){let i=rt(),o=rt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Vi();return t.forEach(((h,p)=>{const y=l.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(qe.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Te(Dp,"Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function mx(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=_p),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function gx(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,te.resolve(o)):t.hi.allocateTargetId(i).next((c=>(o=new ws(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Bf(n,e,t){const i=Ge(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!La(c))throw c;Te(Dp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function $v(n,e,t){const i=Ge(n);let o=qe.min(),l=rt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const E=Ge(p),T=E.Ms.get(_);return T!==void 0?te.resolve(E.Fs.get(T)):E.hi.getTargetData(y,_)})(i,c,ni(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?o:qe.min(),t?l:rt()))).next((h=>(yx(i,nA(e),h),{documents:h,qs:l})))))}function yx(n,e,t){let i=n.xs.get(e)||qe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class Hv{constructor(){this.activeTargetIds=lA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vx{constructor(){this.Fo=new Hv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="ConnectivityMonitor";class qv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Te(Wv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Te(Wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc=null;function $f(){return pc===null?pc=(function(){return 268435456+Math.round(2147483648*Math.random())})():pc++,"0x"+pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="RestConnection",wx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ex{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Uc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const c=$f(),h=this.Go(e,t.toUriEncodedString());Te(mf,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(h),_=To(y);return this.jo(e,h,p,i,_).then((E=>(Te(mf,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Ps(mf,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",i),E}))}Jo(e,t,i,o,l,c){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Da})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=wx[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class Ix extends Ex{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const c=$f();return new Promise(((h,p)=>{const y=new xw;y.setWithCredentials(!0),y.listenOnce(kw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case wc.NO_ERROR:const E=y.getResponseJson();Te(wn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case wc.TIMEOUT:Te(wn,`RPC '${e}' ${c} timed out`),p(new xe(re.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const T=y.getStatus();if(Te(wn,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const L=P?.error;if(L&&L.status&&L.message){const U=(function(fe){const ee=fe.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ee)>=0?ee:re.UNKNOWN})(L.status);p(new xe(U,L.message))}else p(new xe(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new xe(re.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:c,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{Te(wn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);Te(wn,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=$f(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Dw(),h=bw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");Te(wn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=c.createWebChannel(_,p);this.T_(E);let T=!1,P=!1;const L=new Tx({Ho:H=>{P?Te(wn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(T||(Te(wn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),Te(wn,`RPC '${e}' stream ${o} sending:`,H),E.send(H))},Yo:()=>E.close()}),U=(H,fe,ee)=>{H.listen(fe,(ce=>{try{ee(ce)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return U(E,wl.EventType.OPEN,(()=>{P||(Te(wn,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),U(E,wl.EventType.CLOSE,(()=>{P||(P=!0,Te(wn,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(E))})),U(E,wl.EventType.ERROR,(H=>{P||(P=!0,Ps(wn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),L.__(new xe(re.UNAVAILABLE,"The operation could not be completed")))})),U(E,wl.EventType.MESSAGE,(H=>{var fe;if(!P){const ee=H.data[0];pt(!!ee,16349);const ce=ee,pe=ce?.error||((fe=ce[0])===null||fe===void 0?void 0:fe.error);if(pe){Te(wn,`RPC '${e}' stream ${o} received error:`,pe);const Ue=pe.status;let Fe=(function(A){const N=$t[A];if(N!==void 0)return fE(N)})(Ue),S=pe.message;Fe===void 0&&(Fe=re.INTERNAL,S="Unknown error status: "+Ue+" with message "+pe.message),P=!0,L.__(new xe(Fe,S)),E.close()}else Te(wn,`RPC '${e}' stream ${o} received:`,ee),L.a_(ee)}})),U(h,Nw.STAT_EVENT,(H=>{H.stat===Nf.PROXY?Te(wn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Nf.NOPROXY&&Te(wn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){return new RA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="PersistentStream";class AE{constructor(e,t,i,o,l,c,h,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new RE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Li(t.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new xe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Te(Gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Te(Gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sx extends AE{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=kA(this.serializer,e),i=(function(l){if(!("targetChange"in l))return qe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?qe.min():c.readTime?ri(c.readTime):qe.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=zf(this.serializer),t.addTarget=(function(l,c){let h;const p=c.target;if(h=Vf(p)?{documents:DA(l,p)}:{query:OA(l,p).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=gE(l,c.resumeToken);const y=Ff(l,c.expectedCount);y!==null&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(qe.min())>0){h.readTime=Hc(l,c.snapshotVersion.toTimestamp());const y=Ff(l,c.expectedCount);y!==null&&(h.expectedCount=y)}return h})(this.serializer,e);const i=VA(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=zf(this.serializer),t.removeTarget=e,this.k_(t)}}class Cx extends AE{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=bA(e.writeResults,e.commitTime),i=ri(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=zf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>NA(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{}class Rx extends Px{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new xe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Uf(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(re.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Jo(e,Uf(t,i),o,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(re.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Ax{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Li(t),this._a=!1):Te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="RemoteStore";class xx{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{Co(this)&&(Te(Eo,"Restarting streams for network reachability change."),await(async function(p){const y=Ge(p);y.Ia.add(4),await Zl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await gd(y)})(this))}))})),this.Aa=new Ax(i,o)}}async function gd(n){if(Co(n))for(const e of n.da)await e(!0)}async function Zl(n){for(const e of n.da)await e(!1)}function xE(n,e){const t=Ge(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Mp(t)?Vp(t):Va(t).x_()&&Lp(t,e))}function Op(n,e){const t=Ge(n),i=Va(t);t.Ta.delete(e),i.x_()&&kE(t,e),t.Ta.size===0&&(i.x_()?i.B_():Co(t)&&t.Aa.set("Unknown"))}function Lp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Va(n).H_(e)}function kE(n,e){n.Ra.$e(e),Va(n).Y_(e)}function Vp(n){n.Ra=new IA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Va(n).start(),n.Aa.aa()}function Mp(n){return Co(n)&&!Va(n).M_()&&n.Ta.size>0}function Co(n){return Ge(n).Ia.size===0}function NE(n){n.Ra=void 0}async function kx(n){n.Aa.set("Online")}async function Nx(n){n.Ta.forEach(((e,t)=>{Lp(n,e)}))}async function bx(n,e){NE(n),Mp(n)?(n.Aa.la(e),Vp(n)):n.Aa.set("Unknown")}async function Dx(n,e,t){if(n.Aa.set("Online"),e instanceof mE&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ta.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ta.delete(h),o.Ra.removeTarget(h))})(n,e)}catch(i){Te(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await qc(n,i)}else if(e instanceof Sc?n.Ra.Ye(e):e instanceof pE?n.Ra.it(e):n.Ra.et(e),!t.isEqual(qe.min()))try{const i=await PE(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const h=l.Ra.Pt(c);return h.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(y);_&&l.Ta.set(y,_.withResumeToken(p.resumeToken,c))}})),h.targetMismatches.forEach(((p,y)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),kE(l,p);const E=new ws(_.target,p,y,_.sequenceNumber);Lp(l,E)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){Te(Eo,"Failed to raise snapshot:",i),await qc(n,i)}}async function qc(n,e,t){if(!La(e))throw e;n.Ia.add(1),await Zl(n),n.Aa.set("Offline"),t||(t=()=>PE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(Eo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await gd(n)}))}function bE(n,e){return e().catch((t=>qc(n,t,e)))}async function yd(n){const e=Ge(n),t=Ns(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_p;for(;Ox(e);)try{const o=await mx(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,Lx(e,o)}catch(o){await qc(e,o)}DE(e)&&OE(e)}function Ox(n){return Co(n)&&n.Pa.length<10}function Lx(n,e){n.Pa.push(e);const t=Ns(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function DE(n){return Co(n)&&!Ns(n).M_()&&n.Pa.length>0}function OE(n){Ns(n).start()}async function Vx(n){Ns(n).na()}async function Mx(n){const e=Ns(n);for(const t of n.Pa)e.X_(t.mutations)}async function Fx(n,e,t){const i=n.Pa.shift(),o=Rp.from(i,e,t);await bE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await yd(n)}async function Ux(n,e){e&&Ns(n).Z_&&await(async function(i,o){if((function(c){return EA(c)&&c!==re.ABORTED})(o.code)){const l=i.Pa.shift();Ns(i).N_(),await bE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await yd(i)}})(n,e),DE(n)&&OE(n)}async function Kv(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Te(Eo,"RemoteStore received new credentials");const i=Co(t);t.Ia.add(3),await Zl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await gd(t)}async function jx(n,e){const t=Ge(n);e?(t.Ia.delete(2),await gd(t)):e||(t.Ia.add(2),await Zl(t),t.Aa.set("Unknown"))}function Va(n){return n.Va||(n.Va=(function(t,i,o){const l=Ge(t);return l.ia(),new Sx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:kx.bind(null,n),e_:Nx.bind(null,n),n_:bx.bind(null,n),J_:Dx.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Mp(n)?Vp(n):n.Aa.set("Unknown")):(await n.Va.stop(),NE(n))}))),n.Va}function Ns(n){return n.ma||(n.ma=(function(t,i,o){const l=Ge(t);return l.ia(),new Cx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Vx.bind(null,n),n_:Ux.bind(null,n),ea:Mx.bind(null,n),ta:Fx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await yd(n)):(await n.ma.stop(),n.Pa.length>0&&(Te(Eo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,h=new Fp(e,t,c,o,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(n,e){if(Li("AsyncQueue",`${e}: ${n}`),La(n))return new xe(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{static emptySet(e){return new ya(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||De.comparator(t.key,i.key):(t,i)=>De.comparator(t.key,i.key),this.keyedMap=El(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ya;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.fa=new Dt(De.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Pa{constructor(e,t,i,o,l,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Pa(e,t,ya.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Bx{constructor(){this.queries=Yv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ge(t),l=o.queries;o.queries=Yv(),l.forEach(((c,h)=>{for(const p of h.wa)p.onError(i)}))})(this,new xe(re.ABORTED,"Firestore shutting down"))}}function Yv(){return new So((n=>tE(n)),cd)}async function LE(n,e){const t=Ge(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new zx,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Up(c,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&jp(t)}async function VE(n,e){const t=Ge(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function $x(n,e){const t=Ge(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.wa)h.Ca(o)&&(i=!0);c.ya=o}}i&&jp(t)}function Hx(n,e,t){const i=Ge(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function jp(n){n.Da.forEach((e=>{e.next()}))}var Hf,Jv;(Jv=Hf||(Hf={})).Fa="default",Jv.Cache="cache";class ME{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Pa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.key=e}}class UE{constructor(e){this.key=e}}class Wx{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=rt(),this.mutatedKeys=rt(),this.Xa=nE(e),this.eu=new ya(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new Qv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),P=dd(this.query,E)?E:null,L=!!T&&this.mutatedKeys.has(T.key),U=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let H=!1;T&&P?T.data.isEqual(P.data)?L!==U&&(i.track({type:3,doc:P}),H=!0):this.iu(T,P)||(i.track({type:2,doc:P}),H=!0,(p&&this.Xa(P,p)>0||y&&this.Xa(P,y)<0)&&(h=!0)):!T&&P?(i.track({type:0,doc:P}),H=!0):T&&!P&&(i.track({type:1,doc:T}),H=!0,(p||y)&&(h=!0)),H&&(P?(c=c.add(P),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((_,E)=>(function(P,L){const U=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:H})}};return U(P)-U(L)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(i),o=o!=null&&o;const h=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,c.length!==0||y?{snapshot:new Pa(this.query,e.eu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Qv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=rt(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new UE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new FE(i))})),t}uu(e){this.Ha=e.qs,this.Za=rt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const zp="SyncEngine";class qx{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Gx{constructor(e){this.key=e,this.lu=!1}}class Kx{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new So((h=>tE(h)),cd),this.Tu=new Map,this.Iu=new Set,this.du=new Dt(De.comparator),this.Eu=new Map,this.Au=new kp,this.Ru={},this.Vu=new Map,this.mu=Ca.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Qx(n,e,t=!0){const i=WE(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await jE(i,e,t,!0),o}async function Yx(n,e){const t=WE(n);await jE(t,e,!0,!1)}async function jE(n,e,t,i){const o=await gx(n.localStore,ni(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await Jx(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&xE(n.remoteStore,o),h}async function Jx(n,e,t,i,o){n.gu=(E,T,P)=>(async function(U,H,fe,ee){let ce=H.view.nu(fe);ce.Ds&&(ce=await $v(U.localStore,H.query,!1).then((({documents:S})=>H.view.nu(S,ce))));const pe=ee&&ee.targetChanges.get(H.targetId),Ue=ee&&ee.targetMismatches.get(H.targetId)!=null,Fe=H.view.applyChanges(ce,U.isPrimaryClient,pe,Ue);return Zv(U,H.targetId,Fe._u),Fe.snapshot})(n,E,T,P);const l=await $v(n.localStore,e,!0),c=new Wx(e,l.qs),h=c.nu(l.documents),p=Xl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(h,n.isPrimaryClient,p);Zv(n,t,y._u);const _=new qx(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function Xx(n,e,t){const i=Ge(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((c=>!cd(c,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Bf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Op(i.remoteStore,o.targetId),Wf(i,o.targetId)})).catch(Oa)):(Wf(i,o.targetId),await Bf(i.localStore,o.targetId,!0))}async function Zx(n,e){const t=Ge(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Op(t.remoteStore,i.targetId))}async function ek(n,e,t){const i=ak(n);try{const o=await(function(c,h){const p=Ge(c),y=Ct.now(),_=h.reduce(((P,L)=>P.add(L.key)),rt());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let L=Vi(),U=rt();return p.Os.getEntries(P,_).next((H=>{L=H,L.forEach(((fe,ee)=>{ee.isValidDocument()||(U=U.add(fe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(P,L))).next((H=>{E=H;const fe=[];for(const ee of h){const ce=gA(ee,E.get(ee.key).overlayedDocument);ce!=null&&fe.push(new Ms(ee.key,ce,Kw(ce.value.mapValue),mr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,fe,h)})).next((H=>{T=H;const fe=H.applyToLocalDocumentSet(E,U);return p.documentOverlayCache.saveOverlays(P,H.batchId,fe)}))})).then((()=>({batchId:T.batchId,changes:iE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,h,p){let y=c.Ru[c.currentUser.toKey()];y||(y=new Dt(Ye)),y=y.insert(h,p),c.Ru[c.currentUser.toKey()]=y})(i,o.batchId,t),await eu(i,o.changes),await yd(i.remoteStore)}catch(o){const l=Up(o,"Failed to persist write");t.reject(l)}}async function zE(n,e){const t=Ge(n);try{const i=await fx(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?pt(c.lu,14607):o.removedDocuments.size>0&&(pt(c.lu,42227),c.lu=!1))})),await eu(t,i,e)}catch(i){await Oa(i)}}function Xv(n,e,t){const i=Ge(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const p=Ge(c);p.onlineState=h;let y=!1;p.queries.forEach(((_,E)=>{for(const T of E.wa)T.va(h)&&(y=!0)})),y&&jp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tk(n,e,t){const i=Ge(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let c=new Dt(De.comparator);c=c.insert(l,Tn.newNoDocument(l,qe.min()));const h=rt().add(l),p=new pd(qe.min(),new Map,new Dt(Ye),c,h);await zE(i,p),i.du=i.du.remove(l),i.Eu.delete(e),Bp(i)}else await Bf(i.localStore,e,!1).then((()=>Wf(i,e,t))).catch(Oa)}async function nk(n,e){const t=Ge(n),i=e.batch.batchId;try{const o=await hx(t.localStore,e);$E(t,i,null),BE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await eu(t,o)}catch(o){await Oa(o)}}async function rk(n,e,t){const i=Ge(n);try{const o=await(function(c,h){const p=Ge(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,h).next((E=>(pt(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);$E(i,e,t),BE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await eu(i,o)}catch(o){await Oa(o)}}function BE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function $E(n,e,t){const i=Ge(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Wf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||HE(n,i)}))}function HE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Op(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Bp(n))}function Zv(n,e,t){for(const i of t)i instanceof FE?(n.Au.addReference(i.key,e),ik(n,i)):i instanceof UE?(Te(zp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||HE(n,i.key)):Be(19791,{yu:i})}function ik(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(Te(zp,"New document in limbo: "+t),n.Iu.add(i),Bp(n))}function Bp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new De(St.fromString(e)),i=n.mu.next();n.Eu.set(i,new Gx(t)),n.du=n.du.insert(t,i),xE(n.remoteStore,new ws(ni(Sp(t.path)),i,"TargetPurposeLimboResolution",od.ue))}}async function eu(n,e,t){const i=Ge(n),o=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((h,p)=>{c.push(i.gu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=bp.Es(p.targetId,y);l.push(E)}})))})),await Promise.all(c),i.hu.J_(o),await(async function(p,y){const _=Ge(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(y,(T=>te.forEach(T.Is,(P=>_.persistence.referenceDelegate.addReference(E,T.targetId,P))).next((()=>te.forEach(T.ds,(P=>_.persistence.referenceDelegate.removeReference(E,T.targetId,P)))))))))}catch(E){if(!La(E))throw E;Te(Dp,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const P=_.Fs.get(T),L=P.snapshotVersion,U=P.withLastLimboFreeSnapshotVersion(L);_.Fs=_.Fs.insert(T,U)}}})(i.localStore,l))}async function sk(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Te(zp,"User change. New user:",e.toKey());const i=await CE(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((h=>{h.forEach((p=>{p.reject(new xe(re.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await eu(t,i.Bs)}}function ok(n,e){const t=Ge(n),i=t.Eu.get(e);if(i&&i.lu)return rt().add(i.key);{let o=rt();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const h=t.Pu.get(c);o=o.unionWith(h.view.tu)}return o}}function WE(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ok.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tk.bind(null,e),e.hu.J_=$x.bind(null,e.eventManager),e.hu.pu=Hx.bind(null,e.eventManager),e}function ak(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rk.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return dx(this.persistence,new lx,e.initialUser,this.serializer)}Du(e){return new SE(Np.Vi,this.serializer)}bu(e){return new vx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class lk extends Gc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){pt(this.persistence.referenceDelegate instanceof Wc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new GA(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new SE((i=>Wc.Vi(i,t)),this.serializer)}}class qf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sk.bind(null,this.syncEngine),await jx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Bx})()}createDatastore(e){const t=md(e.databaseInfo.databaseId),i=(function(l){return new Ix(l)})(e.databaseInfo);return(function(l,c,h,p){return new Rx(l,c,h,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,h){return new xx(i,o,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Xv(this.syncEngine,t,0)),(function(){return qv.C()?new qv:new _x})())}createSyncEngine(e,t){return(function(o,l,c,h,p,y,_){const E=new Kx(o,l,c,h,p,y);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ge(o);Te(Eo,"RemoteStore shutting down."),l.Ia.add(5),await Zl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}qf.provider={build:()=>new qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class uk{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Te(bs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Te(bs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Up(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function yf(n,e){n.asyncQueue.verifyOperationInProgress(),Te(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await CE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ps("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Te("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ps("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function e_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ck(n);Te(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Kv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Kv(e.remoteStore,o))),n._onlineComponents=e}async function ck(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(bs,"Using user provided OfflineComponentProvider");try{await yf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ps("Error using user provided cache. Falling back to memory cache: "+t),await yf(n,new Gc)}}else Te(bs,"Using default OfflineComponentProvider"),await yf(n,new lk(void 0));return n._offlineComponents}async function GE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(bs,"Using user provided OnlineComponentProvider"),await e_(n,n._uninitializedComponentsProvider._online)):(Te(bs,"Using default OnlineComponentProvider"),await e_(n,new qf))),n._onlineComponents}function dk(n){return GE(n).then((e=>e.syncEngine))}async function KE(n){const e=await GE(n),t=e.eventManager;return t.onListen=Qx.bind(null,e.syncEngine),t.onUnlisten=Xx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Yx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Zx.bind(null,e.syncEngine),t}function hk(n,e,t={}){const i=new Ni;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const _=new qE({next:T=>{_.Ou(),c.enqueueAndForget((()=>VE(l,E)));const P=T.docs.has(h);!P&&T.fromCache?y.reject(new xe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&p&&p.source==="server"?y.reject(new xe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new ME(Sp(h.path),_,{includeMetadataChanges:!0,ka:!0});return LE(l,E)})(await KE(n),n.asyncQueue,e,t,i))),i.promise}function fk(n,e,t={}){const i=new Ni;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const _=new qE({next:T=>{_.Ou(),c.enqueueAndForget((()=>VE(l,E))),T.fromCache&&p.source==="server"?y.reject(new xe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new ME(h,_,{includeMetadataChanges:!0,ka:!0});return LE(l,E)})(await KE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firestore.googleapis.com",n_=!0;class r_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YE,this.ssl=n_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:n_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WA)throw new xe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _R;switch(i.type){case"firstParty":return new IR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=t_.get(t);i&&(Te("ComponentProvider","Removing Datastore"),t_.delete(t),i.terminate())})(this),Promise.resolve()}}function pk(n,e,t,i={}){var o;n=Lr(n,vd);const l=To(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(np(`https://${p}`),rp("Firestore",!0)),c.host!==YE&&c.host!==p&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!go(y,h)&&(n._setSettings(y),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=En.MOCK_USER;else{_=xS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new xe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new En(T)}n._authCredentials=new wR(new Lw(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _d(this.firestore,e,this._query)}}class qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Yl(t,qt._jsonSchema))return new qt(e,i||null,new De(St.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Wt("string",qt._jsonSchemaVersion),referencePath:Wt("string")};class Ss extends _d{constructor(e,t,i){super(e,t,Sp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new De(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function JE(n,e,...t){if(n=Gt(n),Mw("collection","path",e),n instanceof vd){const i=St.fromString(e,...t);return yv(i),new Ss(n,null,i)}{if(!(n instanceof qt||n instanceof Ss))throw new xe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return yv(i),new Ss(n.firestore,null,i)}}function Mi(n,e,...t){if(n=Gt(n),arguments.length===1&&(e=yp.newId()),Mw("doc","path",e),n instanceof vd){const i=St.fromString(e,...t);return gv(i),new qt(n,null,new De(i))}{if(!(n instanceof qt||n instanceof Ss))throw new xe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return gv(i),new qt(n.firestore,n instanceof Ss?n.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="AsyncQueue";class s_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new RE(this,"async_queue_retry"),this.oc=()=>{const i=gf();i&&Te(i_,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=gf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=gf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Ni;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!La(e))throw e;Te(i_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Li("INTERNAL UNHANDLED ERROR: ",o_(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Fp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Be(47125,{hc:o_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function o_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Po extends vd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new s_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s_(e),this._firestoreClient=void 0,await e}}}function mk(n,e){const t=typeof n=="object"?n:op(),i=typeof n=="string"?n:Uc,o=nd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=j_("firestore");l&&pk(o,...l)}return o}function $p(n){if(n._terminated)throw new xe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gk(n),n._firestoreClient}function gk(n){var e,t,i;const o=n._freezeSettings(),l=(function(h,p,y,_){return new UR(h,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,QE(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new uk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(h){const p=h?._online.build();return{_offline:h?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(fn.fromBase64String(e))}catch(t){throw new xe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pr(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yl(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:Wt("string",pr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(Yl(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:Wt("string",ii._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yl(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new si(e.vectorValues);throw new xe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:Wt("string",si._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=/^__.*__$/;class vk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jl(e,this.data,t,this.fieldTransforms)}}class XE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ms(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:n})}}class Hp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Hp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ZE(this.Ec)&&yk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _k{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||md(e)}Dc(e,t,i,o=!1){return new Hp({Ec:e,methodName:t,bc:i,path:hn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wp(n){const e=n._freezeSettings(),t=md(n._databaseId);return new _k(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e0(n,e,t,i,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Gp("Data must be an object, but it was:",c,i);const h=t0(i,c);let p,y;if(l.merge)p=new nr(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=Gf(e,E,t);if(!c.contains(T))throw new xe(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);r0(_,T)||_.push(T)}p=new nr(_),y=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=c.fieldTransforms;return new vk(new Bn(h),p,y)}class Td extends Ed{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}class qp extends Ed{_toFieldTransform(e){return new hA(e.path,new jl)}isEqual(e){return e instanceof qp}}function wk(n,e,t,i){const o=n.Dc(1,e,t);Gp("Data must be an object, but it was:",o,i);const l=[],c=Bn.empty();Vs(i,((p,y)=>{const _=Kp(e,p,t);y=Gt(y);const E=o.gc(_);if(y instanceof Td)l.push(_);else{const T=Id(y,E);T!=null&&(l.push(_),c.set(_,T))}}));const h=new nr(l);return new XE(c,h,o.fieldTransforms)}function Ek(n,e,t,i,o,l){const c=n.Dc(1,e,t),h=[Gf(e,i,t)],p=[o];if(l.length%2!=0)throw new xe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(Gf(e,l[T])),p.push(l[T+1]);const y=[],_=Bn.empty();for(let T=h.length-1;T>=0;--T)if(!r0(y,h[T])){const P=h[T];let L=p[T];L=Gt(L);const U=c.gc(P);if(L instanceof Td)y.push(P);else{const H=Id(L,U);H!=null&&(y.push(P),_.set(P,H))}}const E=new nr(y);return new XE(_,E,c.fieldTransforms)}function Id(n,e){if(n0(n=Gt(n)))return Gp("Unsupported field value:",e,n),t0(n,e);if(n instanceof Ed)return(function(i,o){if(!ZE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const h of i){let p=Id(h,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ct.fromDate(i);return{timestampValue:Hc(o.serializer,l)}}if(i instanceof Ct){const l=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(o.serializer,l)}}if(i instanceof ii)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pr)return{bytesValue:gE(o.serializer,i._byteString)};if(i instanceof qt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:xp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof si)return(function(c,h){return{mapValue:{fields:{[qw]:{stringValue:Gw},[jc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw h.wc("VectorValues must only contain numeric values.");return Cp(h.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${vp(i)}`)})(n,e)}function t0(n,e){const t={};return jw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(n,((i,o)=>{const l=Id(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function n0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof ii||n instanceof pr||n instanceof qt||n instanceof Ed||n instanceof si)}function Gp(n,e,t){if(!n0(t)||!Fw(t)){const i=vp(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Gf(n,e,t){if((e=Gt(e))instanceof wd)return e._internalPath;if(typeof e=="string")return Kp(n,e);throw Kc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tk=new RegExp("[~\\*/\\[\\]]");function Kp(n,e,t){if(e.search(Tk)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wd(...e.split("."))._internalPath}catch{throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new xe(re.INVALID_ARGUMENT,h+n+p)}function r0(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ik(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(s0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ik extends i0{data(){return super.data()}}function s0(n,e){return typeof e=="string"?Kp(n,e):e instanceof wd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ck{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Vs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[jc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((c=>Ut(c.doubleValue)));return new si(l)}convertGeoPoint(e){return new ii(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ld(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const t=As(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=St.fromString(e);pt(TE(i),9688,{name:e});const o=new Fl(i.get(1),i.get(3)),l=new De(i.popFirst(5));return o.isEqual(t)||Li(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends i0{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(s0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:Wt("string",po._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Cc extends po{data(e={}){return super.data(e)}}class va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Il(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Cc(this._firestore,this._userDataWriter,i.key,i,new Il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const p=new Cc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new Cc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return h.type!==0&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:Pk(h.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Pk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){n=Lr(n,qt);const e=Lr(n.firestore,Po);return hk($p(e),n._key).then((t=>Nk(e,n,t)))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Wt("string",va._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class a0 extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function Rk(n){n=Lr(n,_d);const e=Lr(n.firestore,Po),t=$p(e),i=new a0(e);return Sk(n._query),fk(t,n._query).then((o=>new va(e,i,n,o)))}function Qp(n,e,t){n=Lr(n,qt);const i=Lr(n.firestore,Po),o=o0(n.converter,e,t);return Cd(i,[e0(Wp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,mr.none())])}function Ak(n,e,t,...i){n=Lr(n,qt);const o=Lr(n.firestore,Po),l=Wp(o);let c;return c=typeof(e=Gt(e))=="string"||e instanceof wd?Ek(l,"updateDoc",n._key,e,t,i):wk(l,"updateDoc",n._key,e),Cd(o,[c.toMutation(n._key,mr.exists(!0))])}function xk(n){return Cd(Lr(n.firestore,Po),[new Pp(n._key,mr.none())])}function kk(n,e){const t=Lr(n.firestore,Po),i=Mi(n),o=o0(n.converter,e);return Cd(t,[e0(Wp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,mr.exists(!1))]).then((()=>i))}function Cd(n,e){return(function(i,o){const l=new Ni;return i.asyncQueue.enqueueAndForget((async()=>ek(await dk(i),o,l))),l.promise})($p(n),e)}function Nk(n,e,t){const i=t.docs.get(e._key),o=new a0(n);return new po(n,o,e._key,i,new Il(t.hasPendingWrites,t.fromCache),e.converter)}function _a(){return new qp("serverTimestamp")}(function(e,t=!0){(function(o){Da=o})(Na),yo(new Cs("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Po(new ER(i.getProvider("auth-internal")),new SR(c,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new xe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(y.options.projectId,_)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Zr(dv,hv,e),Zr(dv,hv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="type.googleapis.com/google.protobuf.Int64Value",Dk="type.googleapis.com/google.protobuf.UInt64Value";function l0(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Qc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Qc(e));if(typeof n=="function"||typeof n=="object")return l0(n,e=>Qc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Ra(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case bk:case Dk:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Ra(e)):typeof n=="function"||typeof n=="object"?l0(n,e=>Ra(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends ci{constructor(e,t,i){super(`${Yp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function Ok(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Yc(n,e){let t=Ok(n),i=t,o;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!a_[c])return new $n("internal","internal");t=a_[c],i=c}const h=l.message;typeof h=="string"&&(i=h),o=l.details,o!==void 0&&(o=Ra(o))}}catch{}return t==="ok"?null:new $n(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,tr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="us-central1",Vk=/^data: (.*?)(?:\n|$)/;function Mk(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Fk{constructor(e,t,i,o,l=Kf,c=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new Lk(e,t,i,o),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Kf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Uk(n,e,t){const i=To(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(np(n.emulatorOrigin),rp("Functions",!0))}function jk(n,e,t){const i=o=>Bk(n,e,o,{});return i.stream=(o,l)=>Hk(n,e,o,l),i}async function zk(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function u0(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function Bk(n,e,t,i){const o=n._url(e);return $k(n,o,t,i)}async function $k(n,e,t,i){t=Qc(t);const o={data:t},l=await u0(n,i),c=i.timeout||7e4,h=Mk(c),p=await Promise.race([zk(e,o,l,n.fetchImpl),h.promise,n.cancelAllRequests]);if(h.cancel(),!p)throw new $n("cancelled","Firebase Functions instance was deleted.");const y=Yc(p.status,p.json);if(y)throw y;if(!p.json)throw new $n("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new $n("internal","Response is missing data field.");return{data:Ra(_)}}function Hk(n,e,t,i){const o=n._url(e);return Wk(n,o,t,i||{})}async function Wk(n,e,t,i){var o;t=Qc(t);const l={data:t},c=await u0(n,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let h;try{h=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const U=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(U),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(U)}}}}}}const L=Yc(0,null);return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}let p,y;const _=new Promise((P,L)=>{p=P,y=L});(o=i?.signal)===null||o===void 0||o.addEventListener("abort",()=>{const P=new $n("cancelled","Request was cancelled.");y(P)});const E=h.body.getReader(),T=qk(E,p,y,i?.signal);return{stream:{[Symbol.asyncIterator](){const P=T.getReader();return{async next(){const{value:L,done:U}=await P.read();return{value:L,done:U}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:_}}function qk(n,e,t,i){const o=(c,h)=>{const p=c.match(Vk);if(!p)return;const y=p[1];try{const _=JSON.parse(y);if("result"in _){e(Ra(_.result));return}if("message"in _){h.enqueue(Ra(_.message));return}if("error"in _){const E=Yc(0,_);h.error(E),t(E);return}}catch(_){if(_ instanceof $n){h.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(c){let h="";return p();async function p(){if(i?.aborted){const y=new $n("cancelled","Request was cancelled");return c.error(y),t(y),Promise.resolve()}try{const{value:y,done:_}=await n.read();if(_){h.trim()&&o(h.trim(),c),c.close();return}if(i?.aborted){const T=new $n("cancelled","Request was cancelled");c.error(T),t(T),await n.cancel();return}h+=l.decode(y,{stream:!0});const E=h.split(`
`);h=E.pop()||"";for(const T of E)T.trim()&&o(T.trim(),c);return p()}catch(y){const _=y instanceof $n?y:Yc(0,null);c.error(_),t(_)}}},cancel(){return n.cancel()}})}const l_="@firebase/functions",u_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="auth-internal",Kk="app-check-internal",Qk="messaging-internal";function Yk(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(Gk),c=t.getProvider(Qk),h=t.getProvider(Kk);return new Fk(o,l,c,h,i)};yo(new Cs(Yp,e,"PUBLIC").setMultipleInstances(!0)),Zr(l_,u_,n),Zr(l_,u_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n=op(),e=Kf){const i=nd(Gt(n),Yp).getImmediate({identifier:e}),o=j_("functions");return o&&Jk(i,...o),i}function Jk(n,e,t){Uk(Gt(n),e,t)}function Xk(n,e,t){return jk(Gt(n),e)}Yk();const Zk={apiKey:"AIzaSyBjOeHP4Pst7BYyRF2c85KKMe6lifXOU1M",authDomain:"wwconsole-93f76.firebaseapp.com",projectId:"wwconsole-93f76",storageBucket:"wwconsole-93f76.appspot.com",messagingSenderId:"936183161335",appId:"1:936183161335:web:0762f9ac5837ada128cef2",measurementId:"G-H6R483JTGT"},Pd=W_(Zk),li=mk(Pd);c0(Pd,"asia-south1");const kl=mR(Pd);function eN(){const n=ka(),[e,t]=J.useState(()=>kl.currentUser);J.useEffect(()=>{const l=rP(kl,c=>t(c));return()=>l()},[]);const i=async()=>{try{await iP(kl)}catch(l){console.error(" Logout failed:",l)}finally{n("/login")}},o=[{label:" Dashboard",path:"/app"},{label:" Theme Drafts",path:"/app/drafts/themes"},{label:" Story Drafts",path:"/app/drafts/stories"},{label:" Prompt Lab",path:"/app/promptlab"}];return R.jsxs("div",{className:"min-h-screen flex bg-gray-100 text-gray-800",children:[R.jsxs("aside",{className:"w-64 bg-white shadow-md flex flex-col",children:[R.jsxs("div",{className:"p-5 border-b",children:[R.jsx("h1",{className:"text-2xl font-bold text-blue-700",children:"WaitWhat? CMS"}),R.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editorial Console"})]}),R.jsx("nav",{className:"flex-1 p-4 space-y-1",children:o.map(l=>R.jsx(gS,{to:l.path,className:({isActive:c})=>`block px-4 py-2 rounded-md transition ${c?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:l.label},l.path))}),R.jsx("div",{className:"p-4 border-t text-center text-xs text-gray-500",children:R.jsxs("p",{children:[" ",new Date().getFullYear()," WaitWhat?"]})})]}),R.jsxs("main",{className:"flex-1 overflow-y-auto",children:[R.jsxs("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[R.jsx("h2",{className:"text-lg font-semibold",children:"Content Manager"}),R.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e?.email&&R.jsxs("span",{className:"text-gray-500 hidden sm:inline",children:["Signed in as ",e.email]}),!e&&R.jsx("button",{onClick:()=>n("/login"),className:"text-blue-600 hover:underline",children:"Login"}),e&&R.jsx("button",{onClick:i,className:"text-red-600 hover:underline",children:"Logout"}),R.jsx("a",{href:"https://waitwhat.news",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Live Site "})]})]}),R.jsx("div",{className:"p-6",children:R.jsx(QI,{})})]})]})}const d0=n=>({...n,isPinned:n.isPinned??n.isPinnedFeatured??!1}),h0=async n=>{const e={title:n.title||"",type:n.type||"Theme",overview:n.overview||"",category:n.category||"",subcategory:n.subcategory||"",tags:n.tags||[],imageUrl:n.imageUrl||"",sources:n.sources||[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},disableDepthToggle:n.disableDepthToggle||!1,isPinned:n.isPinned??n.isPinnedFeatured??!1,isPinnedFeatured:n.isPinnedFeatured??n.isPinned??!1,isCompactCard:n.isCompactCard??!1,pinnedCategory:n.pinnedCategory??"All",keywords:n.keywords||[],status:n.status||"draft",slug:n.slug||(n.title?n.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):""),editorNotes:n.editorNotes||"",createdAt:_a(),updatedAt:_a()};return(await kk(JE(li,"drafts"),e)).id},Jc=async()=>(await Rk(JE(li,"drafts"))).docs.map(e=>d0({id:e.id,...e.data()})),lo=async n=>{const e=Mi(li,"drafts",n),t=await Sd(e);return t.exists()?d0({id:t.id,...t.data()}):null},Zn=async(n,e)=>{const t=Mi(li,"drafts",n);await Qp(t,{...e,updatedAt:_a()},{merge:!0})},f0=async n=>{await xk(Mi(li,"drafts",n))},c_=async(n,e,t)=>{const i=await lo(n);if(!i)throw new Error("Draft not found");const o=[...i.timeline||[]];o[e]={...o[e],...t},await Zn(n,{timeline:o})},p0=async n=>{const e=Mi(li,"drafts",n),t=await Sd(e);if(!t.exists())throw new Error("Draft not found");const i=t.data(),o=i.slug||i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),l=i.timeline?.flatMap(p=>p.sources||[]).filter(p=>p?.link&&p.link.startsWith("http"))||[],c=i.type==="Story"?"stories":"themes",h=Mi(li,c,o);await Qp(h,{...i,sources:l,publishedAt:_a(),createdAt:i.createdAt||_a(),status:"published"}),await Ak(e,{status:"published",updatedAt:_a()}),console.log(` Published ${i.type}  /${c}/${o} with ${l.length} sources`)},tN=async n=>{await p0(n)};function nN(){const n=ka(),[e,t]=J.useState([]),[i,o]=J.useState(!0),[l,c]=J.useState(!1),[h,p]=J.useState({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];J.useEffect(()=>{(async()=>{try{const L=(await Jc()).filter(U=>U.type==="Theme");t(L)}catch(L){console.error("Error loading drafts:",L)}finally{o(!1)}})()},[]);const _=P=>{const{name:L,value:U}=P.target;p({...h,[L]:U})},E=async P=>{if(P.preventDefault(),!h.title.trim()||!h.category.trim()){alert("Title and Category are required");return}try{c(!0);const L=await h0({title:h.title,overview:h.overview,category:h.category,subcategory:h.subcategory,tags:[],imageUrl:h.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Theme"}),U=(await Jc()).filter(H=>H.type==="Theme");t(U),p({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${L}`)}catch(L){console.error("Error creating draft:",L),alert("Failed to create draft")}finally{c(!1)}},T=async P=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await f0(P),t(L=>L.filter(U=>U.id!==P))}catch(L){console.error(L),alert("Failed to delete draft")}};return i?R.jsx("div",{className:"p-6",children:"Loading drafts..."}):R.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[R.jsx("div",{className:"flex justify-between items-center",children:R.jsx("h1",{className:"text-3xl font-bold",children:"Theme Drafts"})}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Theme Draft"}),R.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{name:"title",placeholder:"Title",value:h.title,onChange:_,className:"border p-2 rounded"}),R.jsxs("select",{name:"category",value:h.category,onChange:_,className:"border p-2 rounded",children:[R.jsx("option",{value:"",children:"Select Category"}),y.map(P=>R.jsx("option",{value:P,children:P},P))]}),R.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Climate Policy, Geopolitical Conflict)",value:h.subcategory,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"date",placeholder:"Date (optional)",value:h.date,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:h.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),R.jsx("textarea",{name:"overview",placeholder:"Overview",value:h.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),R.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Theme Draft"})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Theme Drafts"}),e.length===0?R.jsx("p",{className:"text-gray-500",children:"No theme drafts yet."}):R.jsx("ul",{className:"divide-y",children:e.map(P=>R.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-medium",children:P.title||"Untitled"}),R.jsxs("p",{className:"text-sm text-gray-500",children:[P.category,"  ",P.subcategory||"","  ",P.status]}),R.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",P.id]})]}),R.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[R.jsx("button",{onClick:()=>n(`/app/drafts/${P.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),R.jsx("button",{onClick:()=>T(P.id),className:"text-red-600 hover:underline",children:"Delete"}),R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),P.slug&&R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),R.jsx("button",{onClick:()=>{const L=P.slug||P.id,U=`[${P.title}](@theme/${L})`;navigator.clipboard.writeText(U),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},P.id))})]})]})}function rN(){const n=ka(),[e,t]=J.useState([]),[i,o]=J.useState(!0),[l,c]=J.useState(!1),[h,p]=J.useState({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];J.useEffect(()=>{(async()=>{try{const L=(await Jc()).filter(U=>U.type==="Story");t(L)}catch(L){console.error("Error loading drafts:",L)}finally{o(!1)}})()},[]);const _=P=>{const{name:L,value:U}=P.target;p({...h,[L]:U})},E=async P=>{if(P.preventDefault(),!h.title.trim()||!h.category.trim()){alert("Title and Category are required");return}try{c(!0);const L=await h0({title:h.title,overview:h.overview,category:h.category,subcategory:h.subcategory,tags:[],imageUrl:h.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Story"}),U=(await Jc()).filter(H=>H.type==="Story");t(U),p({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${L}`)}catch(L){console.error("Error creating draft:",L),alert("Failed to create draft")}finally{c(!1)}},T=async P=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await f0(P),t(L=>L.filter(U=>U.id!==P))}catch(L){console.error(L),alert("Failed to delete draft")}};return i?R.jsx("div",{className:"p-6",children:"Loading drafts..."}):R.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[R.jsx("div",{className:"flex justify-between items-center",children:R.jsx("h1",{className:"text-3xl font-bold",children:"Story Drafts"})}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Story Draft"}),R.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{name:"title",placeholder:"Title",value:h.title,onChange:_,className:"border p-2 rounded"}),R.jsxs("select",{name:"category",value:h.category,onChange:_,className:"border p-2 rounded",children:[R.jsx("option",{value:"",children:"Select Category"}),y.map(P=>R.jsx("option",{value:P,children:P},P))]}),R.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Geopolitical Conflict)",value:h.subcategory,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"date",placeholder:"Date (optional)",value:h.date,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:h.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),R.jsx("textarea",{name:"overview",placeholder:"Overview",value:h.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),R.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Story Draft"})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Story Drafts"}),e.length===0?R.jsx("p",{className:"text-gray-500",children:"No story drafts yet."}):R.jsx("ul",{className:"divide-y",children:e.map(P=>R.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-medium",children:P.title||"Untitled"}),R.jsxs("p",{className:"text-sm text-gray-500",children:[P.category,"  ",P.subcategory||"","  ",P.status]}),R.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",P.id]})]}),R.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[R.jsx("button",{onClick:()=>n(`/app/drafts/${P.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),R.jsx("button",{onClick:()=>T(P.id),className:"text-red-600 hover:underline",children:"Delete"}),R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),P.slug&&R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),R.jsx("button",{onClick:()=>{const L=P.slug||P.id,U=`[${P.title}](@story/${L})`;navigator.clipboard.writeText(U),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},P.id))})]})]})}const iN="modulepreload",sN=function(n){return"/"+n},d_={},h_=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let y=function(_){return Promise.all(_.map(E=>Promise.resolve(E).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var c=y;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");o=y(t.map(_=>{if(_=sN(_),_ in d_)return;d_[_]=!0;const E=_.endsWith(".css"),T=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${T}`))return;const P=document.createElement("link");if(P.rel=E?"stylesheet":iN,E||(P.as="script"),P.crossOrigin="",P.href=_,p&&P.setAttribute("nonce",p),document.head.appendChild(P),E)return new Promise((L,U)=>{P.addEventListener("load",L),P.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},Jp="https://api.openai.com/v1/chat/completions",Xp="gpt-4o-mini";async function Rd(n,e){const t="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",i={model:Xp,messages:[{role:"system",content:`You are a precise news editor.
Always respond ONLY with valid JSON matching this schema:
${e}
Do not include markdown, code fences, or commentary.`},{role:"user",content:n}]},o=await fetch(Jp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!o.ok){const h=await o.text();throw new Error(`API error: ${o.status} ${h}`)}const c=(await o.json()).choices?.[0]?.message?.content?.trim();if(!c)throw new Error("Empty response from model");try{return JSON.parse(c)}catch{throw console.error(" Raw model output:",c),new Error("Invalid JSON returned by model")}}async function m0(n){const e=`
{
  "timeline": [
    { "date": "YYYY-MM-DD", "event": "string", "description": "string",
      "significance": 1|2|3, "imageUrl": null, "sourceLink": null }
  ]
}`,t=`
You are a news editor.
Create a concise chronological timeline of key developments for the topic:
"${n.title}"
Make descriptions factual, data-rich, and written as short bullet summaries.

Context:
${n.overview}

Return 1015 events.
Each must have:
- date (ISO format)
- event
- short description
- significance (1=low,2=medium,3=high)

Return only valid JSON.
`;return(await Rd(t,e)).timeline}async function g0(n){const e=`
{
  "analysis": {
    "stakeholders": [{ "name": "string", "detail": "string" }],
    "faqs": [{ "question": "string", "answer": "string" }],
    "future": [{ "question": "string", "answer": "string" }]
  }
}`,t=`
You are a political analyst creating structured insights for the theme "${n.title}".

Context:
${n.overview}

Return three sections:
1. stakeholders  list of key people/institutions and their roles.
2. faqs  common reader questions with concise factual answers.
3. future  forward-looking questions with short, reasoned answers.

Keep all answers under 50 words.
Return only valid JSON.
`;return(await Rd(t,e)).analysis}async function oN(n){const e="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",t=`
You are a clear and factual news editor.
From the following overview, identify up to 8 important or complex terms that a reader might not immediately understand.

Return JSON only:
[
  { "term": "term or phrase", "explainer": "short, clear, factual, under 25 words" }
]

Overview:
${n}
`,l=(await(await fetch(Jp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:Xp,messages:[{role:"user",content:t}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT overview context output:",l);try{return JSON.parse(l)}catch{return console.warn(" GPT Context JSON parse error:",l),[]}}async function aN(n){const e="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",t=n.contexts?.map(h=>h.term).filter(Boolean);if(!t?.length)return[];const i=`
You are a concise factual explainer.
For the given event, write a short (under 25 words) neutral definition for each listed term.

Event title: ${n.event}
Event description: ${n.description}

Terms to explain:
${t.map(h=>`- ${h}`).join(`
`)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`,c=(await(await fetch(Jp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:Xp,messages:[{role:"user",content:i}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT event explainer output:",c);try{return JSON.parse(c).filter(p=>p.term&&p.explainer)}catch{return console.warn(" Invalid JSON for event explainer:",c),[]}}async function y0(n){const e=`
You are a concise factual news explainer.
Given the event below, identify key proper nouns, organizations, or technical terms a general reader may not know.
For each, write a short (under 20 words) neutral explanation.

Event Title: ${n.event}
Event Description: ${n.description}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await Rd(e,'[{"term": "string", "explainer": "string"}]')}async function v0(n,e){const t=`
You are a concise factual explainer for a news analysis section.
Section: ${n}

For each entry below, suggest short (under 20 words) neutral explainers for key names or entities readers may not know.

Entries:
${JSON.stringify(e,null,2)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await Rd(t,'[{"term": "string", "explainer": "string"}]')}const f_=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:g0,generateContexts:oN,generateContextsForAnalysis:v0,generateContextsForTimelineEvent:y0,generateExplainersForEvent:aN,generateTimeline:m0},Symbol.toStringTag,{value:"Module"}));async function lN({title:n,event:e,description:t}){try{const i=Mi(li,"settings","global"),o=await Sd(i),l=o.exists()&&o.data()?.serper?.prompt||"title";if(l.trim().toLowerCase()==="title")return n||e||t||"";let c=l;return c=c.replace(/{{\s*title\s*}}/gi,n||"").replace(/{{\s*event\s*}}/gi,e||"").replace(/{{\s*description\s*}}/gi,t||""),c.trim()||n||e||t||""}catch(i){return console.error(" Error building Serper query:",i),n||e||t||""}}async function uN(n,e,t){const i=c0(Pd,"asia-south1"),o=Xk(i,"fetchEventCoverage");try{const l=await lN({title:n,event:n,description:e});return console.log(" Serper query:",l),(await o({title:l,description:e,date:t})).data}catch(l){throw console.error(" Error calling fetchEventCoverage:",l),new Error(l.message||"Failed to fetch event coverage")}}function p_(n){if(!n)return R.jsx("span",{children:n});const e=n.replace(/\]\(@\[([^\]]+)\]\(@(story|theme)\/([A-Za-z0-9_-]+)\)\)/g,"](@$2/$3)"),t=/\[([^\]]+)\]\((@(?:story|theme)\/[A-Za-z0-9_-]+|https?:\/\/[^\s)]+)\)/g,i=[];let o=0,l;for(;(l=t.exec(e))!==null;){const[c,h,p]=l,y=e.slice(o,l.index);y&&i.push({type:"text",value:y}),i.push({type:"link",label:h,target:p}),o=l.index+c.length}return o<e.length&&i.push({type:"text",value:e.slice(o)}),R.jsx("span",{style:{display:"inline",flexWrap:"wrap",lineHeight:"1.6"},children:i.map((c,h)=>{if(c.type==="text")return R.jsx("span",{children:c.value},h);const{label:p,target:y}=c,_=y.startsWith("@story/")||y.startsWith("@theme/"),E=y.startsWith("@theme/"),T=_?y.split("/")[1]:"";return _?R.jsx(L_,{to:`/${E?"themes":"stories"}/${T}`,style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},h):R.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},h)})})}async function cN(n){const e="dpjnkc0dq",t="waitwhat_unsigned",i=new FormData;return i.append("file",n),i.append("upload_preset",t),(await(await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i})).json()).secure_url}function dN(){const{id:n}=OI(),e=ka(),[t,i]=J.useState(null),[o,l]=J.useState(!0),[c,h]=J.useState(!1),[p,y]=J.useState(!1),[_,E]=J.useState(!1),[T,P]=J.useState({}),[L,U]=J.useState([]),[H,fe]=J.useState(!1),[ee,ce]=J.useState(null),[pe,Ue]=J.useState(!0),[Fe,S]=J.useState(!0),[C,A]=J.useState(!1),[N,O]=J.useState(!1),V=z=>({...z,timeline:z.timeline||[],phases:z.phases||[],isPinned:z.isPinned??z.isPinnedFeatured??!1}),k=(z=[],K,q)=>(z||[]).filter(Z=>Z.startIndex!==K).map(Z=>{const le=Z.startIndex>K?Z.startIndex-1:Z.startIndex;let _e=typeof Z.endIndex=="number"?Z.endIndex>=K?Z.endIndex-1:Z.endIndex:void 0;return typeof _e=="number"&&_e<le&&(_e=le),le>=q?null:{...Z,startIndex:le,endIndex:_e}}).filter(Boolean),Ke=(z,K)=>{if(!K)return;const q=K.selectionStart??0,Z=K.selectionEnd??0;P(le=>({...le,[z]:{start:q,end:Z}}))},lt=(z,K,q)=>{let Z=prompt("Enter linked story/theme ID (e.g. story/abc123 or theme/xyz456):");if(!Z||(Z=Z.replace(/^@+/,"").replace(/\[|\]|\(|\)/g,"").trim(),!Z))return;const le=T[z];if(!le||le.start===le.end){alert("Select text in the field first, then click Link.");return}const _e=K||"",{start:ye,end:be}=le,ht=_e.substring(ye,be);if(!ht){alert("Selection is empty.");return}const Et=`[${ht}](@${Z})`,Mt=_e.substring(0,ye)+Et+_e.substring(be);q(Mt),E(!0)};J.useEffect(()=>{(async()=>{try{if(!n)return;const K=await lo(n);i(K?V(K):null)}catch(K){console.error(K),alert("Failed to load draft.")}finally{l(!1)}})()},[n]),J.useEffect(()=>{const z=K=>{_&&(K.preventDefault(),K.returnValue="")};return window.addEventListener("beforeunload",z),()=>window.removeEventListener("beforeunload",z)},[_]);const vt=z=>{if(!t)return;const{name:K,value:q}=z.target;i({...t,[K]:q})},it=async()=>{const z=prompt("Paste Midjourney Image URL:");if(z)try{const K=await cN(z);i(q=>q&&{...q,imageUrl:K}),E(!0),alert(" Uploaded to Cloudinary!")}catch(K){console.error(K),alert(" Failed to upload image.")}},oe=async()=>{if(!(!t||!n))try{h(!0),await Zn(n,t),E(!1),alert(" Metadata saved")}catch(z){console.error(z),alert(" Failed to save metadata")}finally{h(!1)}},ke=async()=>{if(!(!n||!t)){y(!0);try{await Zn(n,{phases:t.phases||[]}),t.type==="Story"?(await tN(n),alert(" Story published successfully!")):(await p0(n),alert(" Theme published successfully!"))}catch(z){console.error(z),alert(" Publish failed: "+z.message)}finally{y(!1)}}},ge=async()=>{if(!(!t||!n)){A(!0);try{const z=await m0(t);await Zn(n,{timeline:z});const K=await lo(n);i(K?V(K):null),alert(" Timeline generated successfully!")}catch(z){console.error(z),alert(" Failed to generate timeline: "+z.message)}finally{A(!1)}}},j=async()=>{if(!(!t||!n)){O(!0);try{const z=await g0(t);await Zn(n,{analysis:z});const K=await lo(n);i(K?V(K):null),alert(" Analysis generated successfully!")}catch(z){console.error(z),alert(" Failed to generate analysis: "+z.message)}finally{O(!1)}}},X=async()=>{if(!n||!t)return;const z={date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:"",sources:[],contexts:[]},K=[...t.timeline||[],z];i({...t,timeline:K});try{await Zn(n,{timeline:K}),alert(" Blank event added. Scroll to the end of the timeline to edit it.")}catch(q){console.error(" Failed to add event:",q),alert(" Failed to add event. Please try again.");const Z=await lo(n);Z&&i(V(Z))}},me=async(z,K,q)=>{if(!n||!t)return;const Z=[...t.timeline];Z[z]={...Z[z],[K]:q},i({...t,timeline:Z}),E(!0)},$e=async z=>{if(!n||!t||!window.confirm("Delete this event?"))return;const K=t.timeline.filter((Z,le)=>le!==z),q=k(t.phases||[],z,K.length);i({...t,timeline:K,phases:q}),E(!0);try{await Zn(n,{timeline:K,phases:q});const Z=await lo(n);Z&&(i(V(Z)),E(!1)),alert(" Event deleted.")}catch(Z){console.error(" Failed to delete event:",Z),alert(" Failed to delete event.");const le=await lo(n);le&&i(V(le))}},Oe=async(z,K)=>{if(!n||!t)return;const q=K.event?.trim();if(!q){alert("Please add an event title before fetching coverage.");return}const Z=K.description??"";try{console.log(" Fetching Serper coverage for:",q);const le=await uN(q,Z,K.date||"");if(le.sources?.length){const _e=le.sources.map(ht=>({...ht,imageUrl:ht.imageUrl??null})),ye={...t.timeline[z],sources:_e,imageUrl:_e[0]?.imageUrl||t.timeline[z].imageUrl};await c_(n,z,ye);const be=[...t.timeline];i({...t,timeline:be}),alert(` Found ${le.sources.length} sources for "${K.event}"`)}else alert(" No relevant sources found for this event");console.log(" Sources:",le.sources)}catch(le){console.error(" Error fetching coverage:",le),alert(" Failed to fetch coverage: "+le.message)}};return o?R.jsx("div",{className:"p-6",children:"Loading..."}):t?R.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h1",{className:"text-3xl font-bold",children:"Edit Draft"}),_&&R.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" You have unsaved changes"}),R.jsxs("div",{className:"flex gap-3",children:[R.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 hover:underline",children:" Back"}),R.jsx("button",{onClick:ke,disabled:p,className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 disabled:opacity-50",children:p?"Publishing":t?.type==="Story"?" Publish Story":" Publish Theme"})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metadata"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{name:"title",value:t.title,onChange:vt,placeholder:"Title",className:"border p-2 rounded"}),R.jsx("input",{name:"category",value:t.category,onChange:vt,placeholder:"Category (e.g. Politics, Economy)",className:"border p-2 rounded"}),R.jsx("input",{name:"subcategory",value:t.subcategory,onChange:vt,placeholder:"Subcategory (e.g. Geopolitical Conflict)",className:"border p-2 rounded"}),R.jsx("input",{name:"imageUrl",value:t.imageUrl||"",onChange:vt,placeholder:"Main Thumbnail / Cover Image URL",className:"border p-2 rounded md:col-span-2"}),R.jsx("button",{type:"button",onClick:it,className:"px-3 py-2 bg-purple-600 text-white rounded md:col-span-2 hover:bg-purple-700",children:" Upload Image from Midjourney Link"}),"np",t.imageUrl&&R.jsxs("div",{className:"md:col-span-2 flex justify-start items-center gap-4",children:[R.jsx("img",{src:t.imageUrl,alt:"Cover",className:"w-48 h-32 object-cover rounded border",onError:z=>{const K=t.imageUrl??"";try{if(K.startsWith("http")){const q=new URL(K).origin;z.currentTarget.src=`${q}/favicon.ico`}else z.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}catch{z.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}}}),R.jsx("p",{className:"text-gray-600 text-sm",children:"Preview of your main thumbnail"})]}),R.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 mt-2",children:[R.jsx("input",{type:"checkbox",id:"isPinned",checked:t.isPinned||!1,onChange:async z=>{const K=z.target.checked;if(i({...t,isPinned:K}),n)try{await Zn(n,{isPinned:K,isPinnedFeatured:K})}catch(q){console.error(" Failed to update isPinned:",q)}},className:"w-4 h-4"}),R.jsx("label",{htmlFor:"isPinned",className:"text-sm text-gray-800",children:"Pin as Featured"}),t.isPinned&&R.jsxs("select",{value:t.pinnedCategory||"All",onChange:async z=>{const K=z.target.value;if(i({...t,pinnedCategory:K}),n)try{await Zn(n,{pinnedCategory:K})}catch(q){console.error(" Failed to update pinnedCategory:",q)}},className:"border p-1 rounded text-sm",children:[R.jsx("option",{value:"All",children:"All Categories"}),R.jsx("option",{value:t.category,children:t.category})]})]}),R.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[R.jsx("input",{type:"checkbox",id:"isCompactCard",checked:t.isCompactCard||!1,onChange:async z=>{const K=z.target.checked;if(i({...t,isCompactCard:K}),n)try{await Zn(n,{isCompactCard:K})}catch(q){console.error(" Failed to update isCompactCard:",q)}},className:"w-4 h-4 mt-1"}),R.jsxs("label",{htmlFor:"isCompactCard",className:"text-sm text-gray-800",children:["Render as compact card",R.jsx("span",{className:"block text-gray-500 text-xs",children:"Home/Stories/Themes screens on WWFinal will show only the title and a small thumbnail when enabled."})]})]}),R.jsx("textarea",{name:"overview",value:t.overview||"",onChange:vt,onSelect:z=>Ke("overview",z.target),placeholder:"Overview",rows:3,className:"border p-2 rounded md:col-span-2"}),R.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 text-xs text-blue-600 mt-1",children:[R.jsx("button",{type:"button",onClick:()=>lt("overview",t.overview||"",z=>i({...t,overview:z})),className:"text-blue-600 hover:underline",children:" Link selected text"}),R.jsx("span",{className:"text-gray-500",children:"Select text in the overview box, then click to link another story/theme."})]}),R.jsx("div",{className:"md:col-span-2 text-sm text-gray-600",children:p_(t.overview||"")})]}),R.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[R.jsx("input",{type:"checkbox",id:"disableDepthToggle",checked:t.disableDepthToggle||!1,onChange:async z=>{const K=z.target.checked;if(i({...t,disableDepthToggle:K}),n)try{await Zn(n,{disableDepthToggle:K}),console.log(" disableDepthToggle updated to:",K)}catch(q){console.error(" Failed to update disableDepthToggle:",q),alert(" Failed to update disableDepthToggle.")}},className:"w-4 h-4"}),R.jsx("label",{htmlFor:"disableDepthToggle",className:"text-sm text-gray-700",children:"Disable Depth Toggle in App"})]}),R.jsxs("div",{className:"mt-6",children:[R.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Context Explainers (Overview)"}),R.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add terms that will be highlighted in the overview for reader context."}),(t.contexts||[]).map((z,K)=>R.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[R.jsx("input",{type:"text",value:z.term,onChange:q=>{const Z=[...t.contexts||[]];Z[K].term=q.target.value,i({...t,contexts:Z})},placeholder:"Term",className:"border p-2 rounded flex-1"}),R.jsx("input",{type:"text",value:z.explainer,onChange:q=>{const Z=[...t.contexts||[]];Z[K].explainer=q.target.value,i({...t,contexts:Z})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),R.jsx("button",{onClick:()=>{const q=(t.contexts||[]).filter((Z,le)=>le!==K);i({...t,contexts:q})},className:"text-red-500 text-sm hover:underline",children:""})]},K)),R.jsx("button",{onClick:()=>i({...t,contexts:[...t.contexts||[],{term:"",explainer:""}]}),className:"text-blue-600 text-sm hover:underline",children:" Add new context term"})]}),R.jsx("button",{onClick:async()=>{if(!t.overview){alert("Please write an overview first!");return}try{if(!window.confirm("Use GPT to suggest contextual explainers?"))return;h(!0);const{generateContexts:K}=await h_(async()=>{const{generateContexts:le}=await Promise.resolve().then(()=>f_);return{generateContexts:le}},void 0),q=await K(t.overview);if(!q||q.length===0){alert("No terms found.");return}const Z=[...t.contexts||[],...q];i({...t,contexts:Z}),alert(` Added ${q.length} suggested context terms.`)}catch(z){console.error(" GPT error:",z),alert("Failed to fetch GPT suggestions. Check console.")}finally{h(!1)}},className:"text-purple-600 text-sm hover:underline mt-2",children:" Suggest Contexts with GPT"}),R.jsx("button",{onClick:oe,disabled:c,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:c?"Saving...":"Save Metadata"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Chronology of Events"}),R.jsxs("div",{className:"flex gap-3 items-center",children:[R.jsx("button",{onClick:ge,disabled:C,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:C?"Generating":" Generate Timeline"}),R.jsx("button",{onClick:X,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:" Add Event"}),R.jsx("button",{onClick:async()=>{if(!(!n||!t))try{h(!0),await Zn(n,{timeline:t.timeline,phases:t.phases||[]}),E(!1),alert(" Timeline saved successfully!")}catch(z){console.error(" Timeline save failed:",z),alert(" Failed to save timeline.")}finally{h(!1)}},className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" Save Timeline"}),R.jsx("button",{onClick:()=>Ue(!pe),className:"text-sm text-blue-600 hover:underline",children:pe?"Hide":"Show"})]})]}),pe&&R.jsx(R.Fragment,{children:t.timeline.length===0?R.jsx("p",{className:"text-gray-500 mb-3",children:"No events yet."}):R.jsx("div",{className:"space-y-4 mb-4",children:t.timeline.map((z,K)=>R.jsxs("div",{className:"mb-6",children:[R.jsx("button",{className:"text-purple-600 text-xs hover:underline mb-2",onClick:()=>{const q={title:"New Phase",startIndex:K,endIndex:K},Z=[...t.phases||[],q];i({...t,phases:Z}),E(!0)},children:" Insert Phase Here"}),(t.phases||[]).filter(q=>q.startIndex===K).map(q=>{const Z=(t.phases||[]).indexOf(q),le=t.timeline.length,_e=Math.max(q.startIndex,le>0?le-1:q.startIndex),ye=Math.min(Math.max(q.startIndex,q.endIndex??q.startIndex),_e),be=t.timeline[q.startIndex]?.event||`Event ${q.startIndex+1}`;return R.jsxs("div",{className:"border border-purple-300 bg-purple-50 p-3 rounded mb-3",children:[R.jsx("input",{value:q.title||"",onChange:ht=>{const Et=[...t.phases||[]];Et[Z]={...q,title:ht.target.value},i({...t,phases:Et}),E(!0)},className:"border p-2 rounded w-full",placeholder:"Phase title"}),R.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Starts at event #",q.startIndex+1,": ",be]}),R.jsxs("label",{className:"text-xs text-gray-600 mt-2 block",children:["End this phase after event",R.jsx("select",{className:"border p-2 rounded w-full mt-1 text-sm",value:ye,onChange:ht=>{const Et=Number(ht.target.value),Mt=Math.max(q.startIndex,Et),Vr=[...t.phases||[]];Vr[Z]={...q,endIndex:Mt},i({...t,phases:Vr}),E(!0)},children:t.timeline.map((ht,Et)=>R.jsxs("option",{value:Et,disabled:Et<q.startIndex,children:["#",Et+1,"  ",ht.event||`Event ${Et+1}`]},`phase-${Z}-end-${Et}`))})]}),R.jsx("button",{className:"text-red-600 text-xs mt-1 hover:underline",onClick:()=>{const ht=(t.phases||[]).filter((Et,Mt)=>Mt!==Z);i({...t,phases:ht}),E(!0)},children:" Remove Phase"})]},`phase-${Z}`)}),R.jsxs("div",{className:"border p-3 rounded",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[R.jsx("input",{value:z.date||"",onChange:q=>me(K,"date",q.target.value),placeholder:"Date",className:"border p-2 rounded"}),R.jsx("input",{value:z.event,onChange:q=>me(K,"event",q.target.value),placeholder:"Event",className:"border p-2 rounded"}),R.jsx("input",{value:z.imageUrl||"",onChange:q=>me(K,"imageUrl",q.target.value),placeholder:"Image URL",className:"border p-2 rounded"}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sources"}),(z.sources||[]).map((q,Z)=>R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("input",{value:q.link,onChange:le=>{const _e=[...z.sources||[]];_e[Z].link=le.target.value,me(K,"sources",_e)},placeholder:`Source link #${Z+1}`,className:"border p-2 rounded w-full"}),R.jsx("button",{onClick:()=>{const le=(z.sources||[]).filter((_e,ye)=>ye!==Z);me(K,"sources",le)},className:"text-red-600 text-sm hover:underline",children:""})]},Z)),R.jsx("button",{onClick:()=>{const q=[...z.sources||[],{title:"",link:"",sourceName:""}];me(K,"sources",q)},className:"text-blue-600 text-sm hover:underline",children:" Add another link"})]})]}),R.jsx("textarea",{value:z.description||"",onChange:q=>{me(K,"description",q.target.value)},onSelect:q=>Ke(`timeline-${K}`,q.target),placeholder:"Description",rows:2,className:"border p-2 rounded w-full mb-2"}),R.jsx("button",{onClick:()=>lt(`timeline-${K}`,z.description||"",q=>{const Z=[...t.timeline];Z[K]={...z,description:q},i({...t,timeline:Z})}),className:"text-blue-600 text-xs hover:underline mb-2",children:" Link selected text"}),R.jsx("div",{className:"text-sm text-gray-700 mt-2",children:p_(z.description??"")}),R.jsxs("div",{className:"mt-2",children:[R.jsx("h4",{className:"text-sm font-medium mb-1",children:"Context Explainers"}),(z.contexts||[]).map((q,Z)=>R.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[R.jsx("input",{type:"text",value:q.term,onChange:le=>{const _e=[...z.contexts||[]];_e[Z].term=le.target.value,me(K,"contexts",_e)},placeholder:"Term",className:"border p-1 rounded flex-1"}),R.jsx("input",{type:"text",value:q.explainer,onChange:le=>{const _e=[...z.contexts||[]];_e[Z].explainer=le.target.value,me(K,"contexts",_e)},placeholder:"Explainer",className:"border p-1 rounded flex-[2]"}),R.jsx("button",{onClick:()=>{const le=(z.contexts||[]).filter((_e,ye)=>ye!==Z);me(K,"contexts",le)},className:"text-red-600 text-xs hover:underline",children:""})]},Z)),R.jsx("button",{onClick:()=>{const q=[...z.contexts||[],{term:"",explainer:""}];me(K,"contexts",q)},className:"text-blue-600 text-xs hover:underline",children:" Add term"})]}),R.jsx("button",{onClick:async()=>{try{h(!0);const q=await y0(z);if(!q?.length){alert("No contextual terms found for this event.");return}const Z=[...z.contexts||[],...q];me(K,"contexts",Z),alert(` Added ${q.length} contextual explainers for this event.`)}catch(q){console.error("GPT error (event contexts):",q),alert(" Failed to generate contexts for this event.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),R.jsx("button",{onClick:async()=>{const q=z.event?.trim(),Z=z.description?.trim();if(!q||!Z){alert("Please add an event title and description first.");return}const le={event:q,description:Z,contexts:z.contexts||[]};if(!le.contexts.length){alert("Please add at least one term first.");return}try{h(!0);const{generateExplainersForEvent:_e}=await h_(async()=>{const{generateExplainersForEvent:ht}=await Promise.resolve().then(()=>f_);return{generateExplainersForEvent:ht}},void 0),ye=await _e(le);if(!ye.length){alert("No explainers returned.");return}const be=(le.contexts||[]).map(ht=>{const Et=ye.find(Mt=>Mt.term.toLowerCase()===ht.term.toLowerCase());return Et?{...ht,explainer:Et.explainer}:ht});me(K,"contexts",be),alert(` Added ${ye.length} explainers.`)}catch(_e){console.error("GPT error:",_e),alert("Failed to generate explainers for this event.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-2 block",children:" Generate Explainers for this Event"}),R.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Importance"}),R.jsxs("select",{value:z.significance,onChange:q=>me(K,"significance",Number(q.target.value)),className:"border p-2 rounded mb-2",children:[R.jsx("option",{value:1,children:"Low"}),R.jsx("option",{value:2,children:"Medium"}),R.jsx("option",{value:3,children:"High"})]}),R.jsxs("div",{className:"flex gap-4 items-center mt-2",children:[R.jsx("button",{onClick:()=>$e(K),className:"text-red-600 text-sm hover:underline",children:"Delete"}),R.jsx("button",{onClick:()=>Oe(K,z),className:"text-blue-600 text-sm hover:underline",children:" Fetch Top Sources"}),R.jsx("button",{onClick:async()=>{if(n)try{h(!0),await c_(n,K,t.timeline[K]),E(!1),alert(" Event saved!")}catch(q){console.error(q),alert(" Failed to save event.")}finally{h(!1)}},className:"text-green-600 text-sm hover:underline",children:" Save Event"})]}),z.sources&&z.sources.length>0&&R.jsxs("div",{className:"mt-3 border-t pt-2",children:[R.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Top Sources:"}),R.jsx("div",{className:"space-y-2",children:z.sources.map((q,Z)=>R.jsxs("div",{className:"flex items-center space-x-3 border p-2 rounded-md hover:bg-gray-50",children:[q.imageUrl&&R.jsx("img",{src:q.imageUrl,alt:q.title,className:"w-10 h-10 object-cover rounded",onError:le=>{le.currentTarget.src=`${new URL(q.link).origin}/favicon.ico`}}),R.jsxs("div",{className:"flex flex-col",children:[R.jsx("a",{href:q.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium hover:underline",children:q.title}),R.jsx("span",{className:"text-gray-500 text-xs",children:q.sourceName})]})]},Z))})]})]})]},K))})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Analysis"}),R.jsx("button",{onClick:j,disabled:N,className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:N?"Generating":" Generate Analysis"})]}),Fe&&R.jsx("div",{className:"space-y-4",children:["stakeholders","faqs","future"].map(z=>{const K=t.analysis,q=K?.[z]||[],Z={stakeholders:"Stakeholders",faqs:"FAQs",future:"Future Questions"};return R.jsxs("details",{className:"border rounded-lg p-3 group",children:[R.jsxs("summary",{className:"cursor-pointer font-semibold text-blue-700 select-none flex justify-between items-center",children:[Z[z],R.jsx("span",{className:"text-gray-500 group-open:rotate-90 transition-transform",children:""})]}),R.jsxs("div",{className:"mt-2 space-y-3",children:[R.jsxs("button",{onClick:()=>{const le={...t},_e=K?.[z]||[],ye=z==="stakeholders"?{name:"",detail:""}:{question:"",answer:""};le.analysis={...K,[z]:[..._e,ye]},i(le)},className:"text-sm text-green-700 hover:underline",children:[" Add ",Z[z].slice(0,-1)]}),R.jsx("button",{onClick:async()=>{const le=t.analysis?.[z]||[];if(!le.length){alert("No items to analyze yet.");return}try{h(!0);const _e=await v0(z,le);if(!_e?.length){alert("No contextual terms found.");return}const ye={...t.analysis||{}},be=[...ye.contexts||[],..._e];ye.contexts=be,i({...t,analysis:ye}),alert(` Added ${_e.length} contextual explainers from ${z}.`)}catch(_e){console.error("GPT error (analysis contexts):",_e),alert(" Failed to generate analysis contexts.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),q.length===0?R.jsxs("p",{className:"text-sm text-gray-500",children:["No ",Z[z]," yet."]}):R.jsx("ul",{className:"space-y-2",children:q.map((le,_e)=>R.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border text-sm space-y-2",children:[z==="stakeholders"?R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"text",value:le.name,onChange:ye=>{const be={...t};be.analysis[z][_e].name=ye.target.value,i(be)},onSelect:ye=>Ke(`stakeholder-name-${_e}`,ye.target),placeholder:"Name",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>lt(`stakeholder-name-${_e}`,le.name||"",ye=>{const be={...t};be.analysis[z][_e].name=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),R.jsx("textarea",{value:le.detail,onChange:ye=>{const be={...t};be.analysis[z][_e].detail=ye.target.value,i(be)},onSelect:ye=>Ke(`stakeholder-detail-${_e}`,ye.target),placeholder:"Detail",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>lt(`stakeholder-detail-${_e}`,le.detail||"",ye=>{const be={...t};be.analysis[z][_e].detail=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}):R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"text",value:le.question,onChange:ye=>{const be={...t};be.analysis[z][_e].question=ye.target.value,i(be)},onSelect:ye=>Ke(`${z}-question-${_e}`,ye.target),placeholder:"Question",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>lt(`${z}-question-${_e}`,le.question||"",ye=>{const be={...t};be.analysis[z][_e].question=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),R.jsx("textarea",{value:le.answer,onChange:ye=>{const be={...t};be.analysis[z][_e].answer=ye.target.value,i(be)},onSelect:ye=>Ke(`${z}-answer-${_e}`,ye.target),placeholder:"Answer",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>lt(`${z}-answer-${_e}`,le.answer||"",ye=>{const be={...t};be.analysis[z][_e].answer=ye,i(be)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}),R.jsx("button",{onClick:()=>{const ye={...t},be=[...K?.[z]||[]];be.splice(_e,1),ye.analysis={...K,[z]:be},i(ye)},className:"text-xs text-red-600 hover:underline",children:"Delete"})]},_e))})]})]},z)})}),R.jsxs("div",{className:"mt-6 border-t pt-4",children:[R.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analysis Context Explainers"}),R.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"These terms will be highlighted within Stakeholders, FAQs, and Future sections."}),(t.analysis?.contexts||[]).map((z,K)=>R.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[R.jsx("input",{type:"text",value:z.term,onChange:q=>{const Z={...t.analysis||{}},le=[...Z.contexts||[]];le[K]={...le[K],term:q.target.value},Z.contexts=le,i({...t,analysis:Z})},placeholder:"Term",className:"border p-2 rounded flex-1"}),R.jsx("input",{type:"text",value:z.explainer,onChange:q=>{const Z={...t.analysis||{}},le=[...Z.contexts||[]];le[K]={...le[K],explainer:q.target.value},Z.contexts=le,i({...t,analysis:Z})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),R.jsx("button",{type:"button",onClick:()=>{const q={...t.analysis||{}},Z=(q.contexts||[]).filter((le,_e)=>_e!==K);q.contexts=Z,i({...t,analysis:q})},className:"text-red-600 text-sm hover:underline",children:""})]},K)),R.jsx("button",{type:"button",onClick:()=>{const z={...t.analysis||{}};z.contexts=[...z.contexts||[],{term:"",explainer:""}],i({...t,analysis:z})},className:"text-blue-600 text-sm hover:underline",children:" Add analysis context term"})]}),R.jsx("button",{onClick:async()=>{if(n)try{await Zn(n,{analysis:t.analysis}),E(!1),alert(" Analysis saved successfully!")}catch(z){console.error(z),alert(" Failed to save analysis: "+z.message)}},className:"mt-4 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:" Save Analysis"})]})]}):R.jsx("div",{className:"p-6 text-red-500",children:"Draft not found"})}function hN(){const[n,e]=J.useState({gpt:{timelinePrompt:`You are a precise news editor. 
Given a topic, generate a concise chronological timeline of 1015 key events.
Each event must include:
- date (YYYY-MM-DD)
- short event title
- 12 sentence factual description
- significance (1=low, 2=medium, 3=high)
Return only valid JSON with key "timeline".`,analysisPrompt:`You are a political analyst creating structured insights.
Given a topic and overview, produce three sections:
1. stakeholders  list key people/institutions and their roles.
2. faqs  questions readers might have with concise answers.
3. future  forward-looking questions with reasoned answers.
Keep all responses factual, under 50 words each. Return valid JSON with key "analysis".`},serper:{prompt:"title"}}),[t,i]=J.useState(!0),[o,l]=J.useState(!1);J.useEffect(()=>{(async()=>{try{const h=Mi(li,"settings","global"),p=await Sd(h);if(p.exists()){const y=p.data();e({gpt:{timelinePrompt:y?.gpt?.timelinePrompt||n.gpt.timelinePrompt,analysisPrompt:y?.gpt?.analysisPrompt||n.gpt.analysisPrompt},serper:{prompt:y?.serper?.prompt||n.serper.prompt}})}}catch(h){console.error(" Failed to load prompts:",h)}finally{i(!1)}})()},[]);const c=async()=>{try{l(!0);const h=Mi(li,"settings","global");await Qp(h,n,{merge:!0}),alert(" Prompts saved successfully!")}catch(h){console.error(h),alert(" Failed to save prompts")}finally{l(!1)}};return t?R.jsx("div",{className:"p-6",children:"Loading..."}):R.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[R.jsx("h1",{className:"text-3xl font-bold",children:" Prompt Editor"}),R.jsx("p",{className:"text-gray-600 mb-4",children:"Edit the default text templates used by GPT and Serper for content generation."}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Timeline Prompt"}),R.jsx("textarea",{value:n.gpt.timelinePrompt,onChange:h=>e({...n,gpt:{...n.gpt,timelinePrompt:h.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Analysis Prompt"}),R.jsx("textarea",{value:n.gpt.analysisPrompt,onChange:h=>e({...n,gpt:{...n.gpt,analysisPrompt:h.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Serper  Search Prompt"}),R.jsxs("p",{className:"text-sm text-gray-600",children:["This text defines what query is sent to Serper for event coverage. If left as ",R.jsx("code",{children:"title"}),", the drafts event title will be used by default."]}),R.jsx("textarea",{value:n.serper.prompt,onChange:h=>e({...n,serper:{prompt:h.target.value}}),className:"w-full border rounded p-3 h-24 text-sm",placeholder:"Example: Find recent, credible articles about {{topic}}."})]}),R.jsx("button",{onClick:c,disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:o?"Saving":" Save All Prompts"})]})}function fN(){const[n,e]=J.useState(""),[t,i]=J.useState(""),[o,l]=J.useState(""),[c,h]=J.useState("login"),[p,y]=J.useState(!1),[_,E]=J.useState(null),T=async()=>{if(E(null),!n||!t){E("Please enter an email and password.");return}if(c==="signup"&&t!==o){E("Passwords do not match.");return}try{y(!0),c==="login"?await eP(kl,n,t):await Z1(kl,n,t),window.location.href="/app"}catch(P){E(P.message||"Authentication failed.")}finally{y(!1)}};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:R.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow p-8",children:[R.jsx("h1",{className:"text-2xl font-bold mb-4",children:c==="login"?"CMS Login":"Create CMS Account"}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("input",{placeholder:"Email",type:"email",value:n,onChange:P=>e(P.target.value),className:"border p-2 w-full rounded"}),R.jsx("input",{placeholder:"Password",type:"password",value:t,onChange:P=>i(P.target.value),className:"border p-2 w-full rounded"}),c==="signup"&&R.jsx("input",{placeholder:"Confirm Password",type:"password",value:o,onChange:P=>l(P.target.value),className:"border p-2 w-full rounded"})]}),_&&R.jsx("p",{className:"text-red-600 text-sm mt-3",children:_}),R.jsx("button",{type:"button",onClick:T,disabled:p,className:"mt-4 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-60",children:p?"Please wait":c==="login"?"Login":"Sign Up"}),R.jsxs("p",{className:"text-sm text-gray-600 mt-4 text-center",children:[c==="login"?"Need an account?":"Already have an account?"," ",R.jsx("button",{type:"button",onClick:()=>h(P=>P==="login"?"signup":"login"),className:"text-blue-600 hover:underline font-medium",children:c==="login"?"Sign Up":"Log In"})]})]})})}const pN=rS([{path:"/login",element:R.jsx(fN,{})},{path:"/app",element:R.jsx(eN,{}),children:[{index:!0,element:R.jsxs("div",{className:"p-6",children:[R.jsx("h1",{className:"text-3xl font-bold",children:"Welcome to WaitWhat? CMS"}),R.jsx("p",{className:"text-gray-600 mt-2",children:"Use the sidebar to manage Theme and Story drafts, or adjust prompts in the Prompt Lab."})]})},{path:"drafts/themes",element:R.jsx(nN,{})},{path:"drafts/stories",element:R.jsx(rN,{})},{path:"drafts/:id",element:R.jsx(dN,{})},{path:"promptlab",element:R.jsx(hN,{})}]},{path:"*",element:R.jsx(KI,{to:"/login",replace:!0})}]);NT.createRoot(document.getElementById("root")).render(R.jsx(g_.StrictMode,{children:R.jsx(dS,{router:pN})}));
