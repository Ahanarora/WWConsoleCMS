function Jg(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(s,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function wd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nh={exports:{}},xa={},Dh={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function pw(){if(wm)return We;wm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function I(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,z={};function q(j,J,U){this.props=j,this.context=J,this.refs=z,this.updater=U||C}q.prototype.isReactComponent={},q.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},q.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function me(){}me.prototype=q.prototype;function ie(j,J,U){this.props=j,this.context=J,this.refs=z,this.updater=U||C}var pe=ie.prototype=new me;pe.constructor=ie,F(pe,q.prototype),pe.isPureReactComponent=!0;var ge=Array.isArray,Oe=Object.prototype.hasOwnProperty,Me={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function x(j,J,U){var Y,K={},oe=null,ce=null;if(J!=null)for(Y in J.ref!==void 0&&(ce=J.ref),J.key!==void 0&&(oe=""+J.key),J)Oe.call(J,Y)&&!S.hasOwnProperty(Y)&&(K[Y]=J[Y]);var fe=arguments.length-2;if(fe===1)K.children=U;else if(1<fe){for(var Pe=Array(fe),He=0;He<fe;He++)Pe[He]=arguments[He+2];K.children=Pe}if(j&&j.defaultProps)for(Y in fe=j.defaultProps,fe)K[Y]===void 0&&(K[Y]=fe[Y]);return{$$typeof:r,type:j,key:oe,ref:ce,props:K,_owner:Me.current}}function R(j,J){return{$$typeof:r,type:j.type,key:J,ref:j.ref,props:j.props,_owner:j._owner}}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function L(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(U){return J[U]})}var O=/\/+/g;function P(j,J){return typeof j=="object"&&j!==null&&j.key!=null?L(""+j.key):J.toString(36)}function $e(j,J,U,Y,K){var oe=typeof j;(oe==="undefined"||oe==="boolean")&&(j=null);var ce=!1;if(j===null)ce=!0;else switch(oe){case"string":case"number":ce=!0;break;case"object":switch(j.$$typeof){case r:case e:ce=!0}}if(ce)return ce=j,K=K(ce),j=Y===""?"."+P(ce,0):Y,ge(K)?(U="",j!=null&&(U=j.replace(O,"$&/")+"/"),$e(K,J,U,"",function(He){return He})):K!=null&&(k(K)&&(K=R(K,U+(!K.key||ce&&ce.key===K.key?"":(""+K.key).replace(O,"$&/")+"/")+j)),J.push(K)),1;if(ce=0,Y=Y===""?".":Y+":",ge(j))for(var fe=0;fe<j.length;fe++){oe=j[fe];var Pe=Y+P(oe,fe);ce+=$e(oe,J,U,Pe,K)}else if(Pe=I(j),typeof Pe=="function")for(j=Pe.call(j),fe=0;!(oe=j.next()).done;)oe=oe.value,Pe=Y+P(oe,fe++),ce+=$e(oe,J,U,Pe,K);else if(oe==="object")throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return ce}function st(j,J,U){if(j==null)return j;var Y=[],K=0;return $e(j,Y,"","",function(oe){return J.call(U,oe,K++)}),Y}function Tt(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(U){(j._status===0||j._status===-1)&&(j._status=1,j._result=U)},function(U){(j._status===0||j._status===-1)&&(j._status=2,j._result=U)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var Je={current:null},se={transition:null},Re={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:se,ReactCurrentOwner:Me};function le(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:st,forEach:function(j,J,U){st(j,function(){J.apply(this,arguments)},U)},count:function(j){var J=0;return st(j,function(){J++}),J},toArray:function(j){return st(j,function(J){return J})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},We.Component=q,We.Fragment=t,We.Profiler=o,We.PureComponent=ie,We.StrictMode=s,We.Suspense=g,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,We.act=le,We.cloneElement=function(j,J,U){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Y=F({},j.props),K=j.key,oe=j.ref,ce=j._owner;if(J!=null){if(J.ref!==void 0&&(oe=J.ref,ce=Me.current),J.key!==void 0&&(K=""+J.key),j.type&&j.type.defaultProps)var fe=j.type.defaultProps;for(Pe in J)Oe.call(J,Pe)&&!S.hasOwnProperty(Pe)&&(Y[Pe]=J[Pe]===void 0&&fe!==void 0?fe[Pe]:J[Pe])}var Pe=arguments.length-2;if(Pe===1)Y.children=U;else if(1<Pe){fe=Array(Pe);for(var He=0;He<Pe;He++)fe[He]=arguments[He+2];Y.children=fe}return{$$typeof:r,type:j.type,key:K,ref:oe,props:Y,_owner:ce}},We.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:u,_context:j},j.Consumer=j},We.createElement=x,We.createFactory=function(j){var J=x.bind(null,j);return J.type=j,J},We.createRef=function(){return{current:null}},We.forwardRef=function(j){return{$$typeof:f,render:j}},We.isValidElement=k,We.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Tt}},We.memo=function(j,J){return{$$typeof:v,type:j,compare:J===void 0?null:J}},We.startTransition=function(j){var J=se.transition;se.transition={};try{j()}finally{se.transition=J}},We.unstable_act=le,We.useCallback=function(j,J){return Je.current.useCallback(j,J)},We.useContext=function(j){return Je.current.useContext(j)},We.useDebugValue=function(){},We.useDeferredValue=function(j){return Je.current.useDeferredValue(j)},We.useEffect=function(j,J){return Je.current.useEffect(j,J)},We.useId=function(){return Je.current.useId()},We.useImperativeHandle=function(j,J,U){return Je.current.useImperativeHandle(j,J,U)},We.useInsertionEffect=function(j,J){return Je.current.useInsertionEffect(j,J)},We.useLayoutEffect=function(j,J){return Je.current.useLayoutEffect(j,J)},We.useMemo=function(j,J){return Je.current.useMemo(j,J)},We.useReducer=function(j,J,U){return Je.current.useReducer(j,J,U)},We.useRef=function(j){return Je.current.useRef(j)},We.useState=function(j){return Je.current.useState(j)},We.useSyncExternalStore=function(j,J,U){return Je.current.useSyncExternalStore(j,J,U)},We.useTransition=function(){return Je.current.useTransition()},We.version="18.3.1",We}var Em;function Ed(){return Em||(Em=1,Dh.exports=pw()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function mw(){if(Tm)return xa;Tm=1;var r=Ed(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var _,E={},I=null,C=null;v!==void 0&&(I=""+v),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(C=g.ref);for(_ in g)s.call(g,_)&&!u.hasOwnProperty(_)&&(E[_]=g[_]);if(f&&f.defaultProps)for(_ in g=f.defaultProps,g)E[_]===void 0&&(E[_]=g[_]);return{$$typeof:e,type:f,key:I,ref:C,props:E,_owner:o.current}}return xa.Fragment=t,xa.jsx=h,xa.jsxs=h,xa}var Sm;function gw(){return Sm||(Sm=1,Nh.exports=mw()),Nh.exports}var N=gw(),X=Ed();const Zg=wd(X),yw=Jg({__proto__:null,default:Zg},[X]);var au={},Vh={exports:{}},Nn={},Lh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm;function vw(){return xm||(xm=1,(function(r){function e(se,Re){var le=se.length;se.push(Re);e:for(;0<le;){var j=le-1>>>1,J=se[j];if(0<o(J,Re))se[j]=Re,se[le]=J,le=j;else break e}}function t(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var Re=se[0],le=se.pop();if(le!==Re){se[0]=le;e:for(var j=0,J=se.length,U=J>>>1;j<U;){var Y=2*(j+1)-1,K=se[Y],oe=Y+1,ce=se[oe];if(0>o(K,le))oe<J&&0>o(ce,K)?(se[j]=ce,se[oe]=le,j=oe):(se[j]=K,se[Y]=le,j=Y);else if(oe<J&&0>o(ce,le))se[j]=ce,se[oe]=le,j=oe;else break e}}return Re}function o(se,Re){var le=se.sortIndex-Re.sortIndex;return le!==0?le:se.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],v=[],_=1,E=null,I=3,C=!1,F=!1,z=!1,q=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pe(se){for(var Re=t(v);Re!==null;){if(Re.callback===null)s(v);else if(Re.startTime<=se)s(v),Re.sortIndex=Re.expirationTime,e(g,Re);else break;Re=t(v)}}function ge(se){if(z=!1,pe(se),!F)if(t(g)!==null)F=!0,Tt(Oe);else{var Re=t(v);Re!==null&&Je(ge,Re.startTime-se)}}function Oe(se,Re){F=!1,z&&(z=!1,me(x),x=-1),C=!0;var le=I;try{for(pe(Re),E=t(g);E!==null&&(!(E.expirationTime>Re)||se&&!L());){var j=E.callback;if(typeof j=="function"){E.callback=null,I=E.priorityLevel;var J=j(E.expirationTime<=Re);Re=r.unstable_now(),typeof J=="function"?E.callback=J:E===t(g)&&s(g),pe(Re)}else s(g);E=t(g)}if(E!==null)var U=!0;else{var Y=t(v);Y!==null&&Je(ge,Y.startTime-Re),U=!1}return U}finally{E=null,I=le,C=!1}}var Me=!1,S=null,x=-1,R=5,k=-1;function L(){return!(r.unstable_now()-k<R)}function O(){if(S!==null){var se=r.unstable_now();k=se;var Re=!0;try{Re=S(!0,se)}finally{Re?P():(Me=!1,S=null)}}else Me=!1}var P;if(typeof ie=="function")P=function(){ie(O)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,st=$e.port2;$e.port1.onmessage=O,P=function(){st.postMessage(null)}}else P=function(){q(O,0)};function Tt(se){S=se,Me||(Me=!0,P())}function Je(se,Re){x=q(function(){se(r.unstable_now())},Re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){F||C||(F=!0,Tt(Oe))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(se){switch(I){case 1:case 2:case 3:var Re=3;break;default:Re=I}var le=I;I=Re;try{return se()}finally{I=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,Re){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var le=I;I=se;try{return Re()}finally{I=le}},r.unstable_scheduleCallback=function(se,Re,le){var j=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?j+le:j):le=j,se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=le+J,se={id:_++,callback:Re,priorityLevel:se,startTime:le,expirationTime:J,sortIndex:-1},le>j?(se.sortIndex=le,e(v,se),t(g)===null&&se===t(v)&&(z?(me(x),x=-1):z=!0,Je(ge,le-j))):(se.sortIndex=J,e(g,se),F||C||(F=!0,Tt(Oe))),se},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(se){var Re=I;return function(){var le=I;I=Re;try{return se.apply(this,arguments)}finally{I=le}}}})(bh)),bh}var Im;function _w(){return Im||(Im=1,Lh.exports=vw()),Lh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function ww(){if(Cm)return Nn;Cm=1;var r=Ed(),e=_w();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function I(n){return g.call(E,n)?!0:g.call(_,n)?!1:v.test(n)?E[n]=!0:(_[n]=!0,!1)}function C(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function F(n,i,a,c){if(i===null||typeof i>"u"||C(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function z(n,i,a,c,d,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){q[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];q[i]=new z(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){q[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){q[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){q[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){q[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){q[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){q[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){q[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var me=/[\-:]([a-z])/g;function ie(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(me,ie);q[i]=new z(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(me,ie);q[i]=new z(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(me,ie);q[i]=new z(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){q[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),q.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){q[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function pe(n,i,a,c){var d=q.hasOwnProperty(i)?q[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(F(i,a,d,c)&&(a=null),c||d===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ge=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oe=Symbol.for("react.element"),Me=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),Je=Symbol.for("react.offscreen"),se=Symbol.iterator;function Re(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,j;function J(n){if(j===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);j=i&&i[1]||""}return`
`+j+n}var U=!1;function Y(n,i){if(!n||U)return"";U=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(G){var c=G}Reflect.construct(n,[],i)}else{try{i.call()}catch(G){c=G}n.call(i.prototype)}else{try{throw Error()}catch(G){c=G}n()}}catch(G){if(G&&c&&typeof G.stack=="string"){for(var d=G.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,A=m.length-1;1<=w&&0<=A&&d[w]!==m[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==m[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==m[A]){var V=`
`+d[w].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=w&&0<=A);break}}}finally{U=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function K(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=Y(n.type,!1),n;case 11:return n=Y(n.type.render,!1),n;case 1:return n=Y(n.type,!0),n;default:return""}}function oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case Me:return"Portal";case R:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case $e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case L:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case st:return i=n.displayName||null,i!==null?i:oe(n.type)||"Memo";case Tt:i=n._payload,n=n._init;try{return oe(n(i))}catch{}}return null}function ce(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function He(n){var i=Pe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function At(n){n._valueTracker||(n._valueTracker=He(n))}function ft(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Pe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Lt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cr(n,i){var a=i.checked;return le({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function yi(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function On(n,i){i=i.checked,i!=null&&pe(n,"checked",i,!1)}function us(n,i){On(n,i);var a=fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Gr(n,i.type,a):i.hasOwnProperty("defaultValue")&&Gr(n,i.type,fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function qs(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Gr(n,i,a){(i!=="number"||Lt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ar=Array.isArray;function lr(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+fe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function cs(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vi(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ar(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:fe(a)}}function wn(n,i){var a=fe(i.value),c=fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function ur(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Pt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qt,gn=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(qt=qt||document.createElement("div"),qt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function cr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qr=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(n){Qr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Qn[i]=Qn[n]})});function En(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Qn.hasOwnProperty(n)&&Qn[n]?(""+i).trim():i+"px"}function _i(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=En(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var wi=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ei(n,i){if(i){if(wi[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function hs(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rr=null;function hr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Kr=null,an=null,Tn=null;function Ti(n){if(n=ua(n)){if(typeof Kr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Tl(i),Kr(n.stateNode,n.type,i))}}function Mn(n){an?Tn?Tn.push(n):Tn=[n]:an=n}function ds(){if(an){var n=an,i=Tn;if(Tn=an=null,Ti(n),i)for(n=0;n<i.length;n++)Ti(i[n])}}function Ar(n,i){return n(i)}function Pr(){}var Sn=!1;function fs(n,i,a){if(Sn)return n(i,a);Sn=!0;try{return Ar(n,i,a)}finally{Sn=!1,(an!==null||Tn!==null)&&(Pr(),ds())}}function xt(n,i){var a=n.stateNode;if(a===null)return null;var c=Tl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var D=!1;if(f)try{var M={};Object.defineProperty(M,"passive",{get:function(){D=!0}}),window.addEventListener("test",M,M),window.removeEventListener("test",M,M)}catch{D=!1}function W(n,i,a,c,d,m,w,A,V){var G=Array.prototype.slice.call(arguments,3);try{i.apply(a,G)}catch(ne){this.onError(ne)}}var ee=!1,de=null,Te=!1,Ne=null,Se={onError:function(n){ee=!0,de=n}};function Ee(n,i,a,c,d,m,w,A,V){ee=!1,de=null,W.apply(Se,arguments)}function ve(n,i,a,c,d,m,w,A,V){if(Ee.apply(this,arguments),ee){if(ee){var G=de;ee=!1,de=null}else throw Error(t(198));Te||(Te=!0,Ne=G)}}function _e(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function be(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Ue(n){if(_e(n)!==n)throw Error(t(188))}function kt(n){var i=n.alternate;if(!i){if(i=_e(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Ue(d),n;if(m===c)return Ue(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,c=m;break}if(A===c){w=!0,c=d,a=m;break}A=A.sibling}if(!w){for(A=m.child;A;){if(A===a){w=!0,a=m,c=d;break}if(A===c){w=!0,c=m,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function ot(n){return n=kt(n),n!==null?qe(n):null}function qe(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=qe(n);if(i!==null)return i;n=n.sibling}return null}var ct=e.unstable_scheduleCallback,Kn=e.unstable_cancelCallback,kr=e.unstable_shouldYield,Fn=e.unstable_requestPaint,Qe=e.unstable_now,Si=e.unstable_getCurrentPriorityLevel,jn=e.unstable_ImmediatePriority,ln=e.unstable_UserBlockingPriority,Jt=e.unstable_NormalPriority,Nr=e.unstable_LowPriority,Ke=e.unstable_IdlePriority,lt=null,bt=null;function Dr(n){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(lt,n,void 0,(n.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:Ws,Yn=Math.log,ps=Math.LN2;function Ws(n){return n>>>=0,n===0?32:31-(Yn(n)/ps|0)|0}var Gs=64,Qs=4194304;function xi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ms(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?c=xi(A):(m&=w,m!==0&&(c=xi(m)))}else w=a&~d,w!==0?c=xi(w):m!==0&&(c=xi(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Ye(i),d=1<<a,c|=n[a],i&=~d;return c}function ac(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Ye(m),A=1<<w,V=d[w];V===-1?((A&a)===0||(A&c)!==0)&&(d[w]=ac(A,i)):V<=i&&(n.expiredLanes|=A),m&=~A}}function Un(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gs(){var n=Gs;return Gs<<=1,(Gs&4194240)===0&&(Gs=64),n}function Ii(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ci(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Ye(i),n[i]=a}function pt(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Ye(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Ri(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Ye(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Ze=0;function Ai(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var tl,Ks,nl,rl,il,Qo=!1,Vr=[],Zt=null,dr=null,fr=null,Pi=new Map,Xn=new Map,Lr=[],lc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sl(n,i){switch(n){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Pi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(i.pointerId)}}function xn(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=ua(i),i!==null&&Ks(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function uc(n,i,a,c,d){switch(i){case"focusin":return Zt=xn(Zt,n,i,a,c,d),!0;case"dragenter":return dr=xn(dr,n,i,a,c,d),!0;case"mouseover":return fr=xn(fr,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return Pi.set(m,xn(Pi.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Xn.set(m,xn(Xn.get(m)||null,n,i,a,c,d)),!0}return!1}function ol(n){var i=Es(n.target);if(i!==null){var a=_e(i);if(a!==null){if(i=a.tag,i===13){if(i=be(a),i!==null){n.blockedOn=i,il(n.priority,function(){nl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Ys(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Rr=c,a.target.dispatchEvent(c),Rr=null}else return i=ua(a),i!==null&&Ks(i),n.blockedOn=a,!1;i.shift()}return!0}function ys(n,i,a){Xr(n)&&a.delete(i)}function al(){Qo=!1,Zt!==null&&Xr(Zt)&&(Zt=null),dr!==null&&Xr(dr)&&(dr=null),fr!==null&&Xr(fr)&&(fr=null),Pi.forEach(ys),Xn.forEach(ys)}function pr(n,i){n.blockedOn===i&&(n.blockedOn=null,Qo||(Qo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,al)))}function mr(n){function i(d){return pr(d,n)}if(0<Vr.length){pr(Vr[0],n);for(var a=1;a<Vr.length;a++){var c=Vr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Zt!==null&&pr(Zt,n),dr!==null&&pr(dr,n),fr!==null&&pr(fr,n),Pi.forEach(i),Xn.forEach(i),a=0;a<Lr.length;a++)c=Lr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)ol(a),a.blockedOn===null&&Lr.shift()}var Jr=ge.ReactCurrentBatchConfig,ki=!0;function vt(n,i,a,c){var d=Ze,m=Jr.transition;Jr.transition=null;try{Ze=1,Ko(n,i,a,c)}finally{Ze=d,Jr.transition=m}}function cc(n,i,a,c){var d=Ze,m=Jr.transition;Jr.transition=null;try{Ze=4,Ko(n,i,a,c)}finally{Ze=d,Jr.transition=m}}function Ko(n,i,a,c){if(ki){var d=Ys(n,i,a,c);if(d===null)Ec(n,i,c,vs,a),sl(n,c);else if(uc(d,n,i,a,c))c.stopPropagation();else if(sl(n,c),i&4&&-1<lc.indexOf(n)){for(;d!==null;){var m=ua(d);if(m!==null&&tl(m),m=Ys(n,i,a,c),m===null&&Ec(n,i,c,vs,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Ec(n,i,c,null,a)}}var vs=null;function Ys(n,i,a,c){if(vs=null,n=hr(c),n=Es(n),n!==null)if(i=_e(n),i===null)n=null;else if(a=i.tag,a===13){if(n=be(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return vs=n,null}function Yo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Si()){case jn:return 1;case ln:return 4;case Jt:case Nr:return 16;case Ke:return 536870912;default:return 16}default:return 16}}var Bn=null,Xs=null,In=null;function Xo(){if(In)return In;var n,i=Xs,a=i.length,c,d="value"in Bn?Bn.value:Bn.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[m-c];c++);return In=d.slice(n,1<c?1-c:void 0)}function Js(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function br(){return!0}function Jo(){return!1}function en(n){function i(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?br:Jo,this.isPropagationStopped=Jo,this}return le(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),i}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=en(gr),Or=le({},gr,{view:0,detail:0}),hc=en(Or),eo,Zr,Ni,_s=le({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ni&&(Ni&&n.type==="mousemove"?(eo=n.screenX-Ni.screenX,Zr=n.screenY-Ni.screenY):Zr=eo=0,Ni=n),eo)},movementY:function(n){return"movementY"in n?n.movementY:Zr}}),to=en(_s),Zo=le({},_s,{dataTransfer:0}),ll=en(Zo),no=le({},Or,{relatedTarget:0}),ro=en(no),ul=le({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),ei=en(ul),cl=le({},gr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),hl=en(cl),dl=le({},gr,{data:0}),ea=en(dl),io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=fl[n])?!!i[n]:!1}function Mr(){return pl}var l=le({},Or,{key:function(n){if(n.key){var i=io[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?yn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(n){return n.type==="keypress"?Js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=en(l),y=le({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=en(y),B=le({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),Q=en(B),he=le({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ht=en(he),Ut=le({},_s,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),et=en(Ut),Wt=[9,13,27,32],Ot=f&&"CompositionEvent"in window,Jn=null;f&&"documentMode"in document&&(Jn=document.documentMode);var zn=f&&"TextEvent"in window&&!Jn,ws=f&&(!Ot||Jn&&8<Jn&&11>=Jn),so=" ",pf=!1;function mf(n,i){switch(n){case"keyup":return Wt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var oo=!1;function h_(n,i){switch(n){case"compositionend":return gf(i);case"keypress":return i.which!==32?null:(pf=!0,so);case"textInput":return n=i.data,n===so&&pf?null:n;default:return null}}function d_(n,i){if(oo)return n==="compositionend"||!Ot&&mf(n,i)?(n=Xo(),In=Xs=Bn=null,oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ws&&i.locale!=="ko"?null:i.data;default:return null}}var f_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!f_[n.type]:i==="textarea"}function vf(n,i,a,c){Mn(c),i=_l(i,"onChange"),0<i.length&&(a=new Zs("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ta=null,na=null;function p_(n){Of(n,0)}function ml(n){var i=ho(n);if(ft(i))return n}function m_(n,i){if(n==="change")return i}var _f=!1;if(f){var dc;if(f){var fc="oninput"in document;if(!fc){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),fc=typeof wf.oninput=="function"}dc=fc}else dc=!1;_f=dc&&(!document.documentMode||9<document.documentMode)}function Ef(){ta&&(ta.detachEvent("onpropertychange",Tf),na=ta=null)}function Tf(n){if(n.propertyName==="value"&&ml(na)){var i=[];vf(i,na,n,hr(n)),fs(p_,i)}}function g_(n,i,a){n==="focusin"?(Ef(),ta=i,na=a,ta.attachEvent("onpropertychange",Tf)):n==="focusout"&&Ef()}function y_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ml(na)}function v_(n,i){if(n==="click")return ml(i)}function __(n,i){if(n==="input"||n==="change")return ml(i)}function w_(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var yr=typeof Object.is=="function"?Object.is:w_;function ra(n,i){if(yr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!yr(n[d],i[d]))return!1}return!0}function Sf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xf(n,i){var a=Sf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sf(a)}}function If(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?If(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Cf(){for(var n=window,i=Lt();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Lt(n.document)}return i}function pc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function E_(n){var i=Cf(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&If(a.ownerDocument.documentElement,a)){if(c!==null&&pc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=xf(a,m);var w=xf(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var T_=f&&"documentMode"in document&&11>=document.documentMode,ao=null,mc=null,ia=null,gc=!1;function Rf(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gc||ao==null||ao!==Lt(c)||(c=ao,"selectionStart"in c&&pc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ia&&ra(ia,c)||(ia=c,c=_l(mc,"onSelect"),0<c.length&&(i=new Zs("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=ao)))}function gl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var lo={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},yc={},Af={};f&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function yl(n){if(yc[n])return yc[n];if(!lo[n])return n;var i=lo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Af)return yc[n]=i[a];return n}var Pf=yl("animationend"),kf=yl("animationiteration"),Nf=yl("animationstart"),Df=yl("transitionend"),Vf=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(n,i){Vf.set(n,i),u(i,[n])}for(var vc=0;vc<Lf.length;vc++){var _c=Lf[vc],S_=_c.toLowerCase(),x_=_c[0].toUpperCase()+_c.slice(1);Di(S_,"on"+x_)}Di(Pf,"onAnimationEnd"),Di(kf,"onAnimationIteration"),Di(Nf,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Df,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I_=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function bf(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ve(c,i,void 0,n),n.currentTarget=null}function Of(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var w=c.length-1;0<=w;w--){var A=c[w],V=A.instance,G=A.currentTarget;if(A=A.listener,V!==m&&d.isPropagationStopped())break e;bf(d,A,G),m=V}else for(w=0;w<c.length;w++){if(A=c[w],V=A.instance,G=A.currentTarget,A=A.listener,V!==m&&d.isPropagationStopped())break e;bf(d,A,G),m=V}}}if(Te)throw n=Ne,Te=!1,Ne=null,n}function gt(n,i){var a=i[Rc];a===void 0&&(a=i[Rc]=new Set);var c=n+"__bubble";a.has(c)||(Mf(i,n,2,!1),a.add(c))}function wc(n,i,a){var c=0;i&&(c|=4),Mf(a,n,c,i)}var vl="_reactListening"+Math.random().toString(36).slice(2);function oa(n){if(!n[vl]){n[vl]=!0,s.forEach(function(a){a!=="selectionchange"&&(I_.has(a)||wc(a,!1,n),wc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[vl]||(i[vl]=!0,wc("selectionchange",!1,i))}}function Mf(n,i,a,c){switch(Yo(i)){case 1:var d=vt;break;case 4:d=cc;break;default:d=Ko}a=d.bind(null,i,a,n),d=void 0,!D||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Ec(n,i,a,c,d){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===d||V.nodeType===8&&V.parentNode===d))return;w=w.return}for(;A!==null;){if(w=Es(A),w===null)return;if(V=w.tag,V===5||V===6){c=m=w;continue e}A=A.parentNode}}c=c.return}fs(function(){var G=m,ne=hr(a),ae=[];e:{var te=Vf.get(n);if(te!==void 0){var ye=Zs,Ie=n;switch(n){case"keypress":if(Js(a)===0)break e;case"keydown":case"keyup":ye=p;break;case"focusin":Ie="focus",ye=ro;break;case"focusout":Ie="blur",ye=ro;break;case"beforeblur":case"afterblur":ye=ro;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=to;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=ll;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Q;break;case Pf:case kf:case Nf:ye=ei;break;case Df:ye=ht;break;case"scroll":ye=hc;break;case"wheel":ye=et;break;case"copy":case"cut":case"paste":ye=hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=T}var Ce=(i&4)!==0,Dt=!Ce&&n==="scroll",$=Ce?te!==null?te+"Capture":null:te;Ce=[];for(var b=G,H;b!==null;){H=b;var ue=H.stateNode;if(H.tag===5&&ue!==null&&(H=ue,$!==null&&(ue=xt(b,$),ue!=null&&Ce.push(aa(b,ue,H)))),Dt)break;b=b.return}0<Ce.length&&(te=new ye(te,Ie,null,a,ne),ae.push({event:te,listeners:Ce}))}}if((i&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",te&&a!==Rr&&(Ie=a.relatedTarget||a.fromElement)&&(Es(Ie)||Ie[ti]))break e;if((ye||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ye?(Ie=a.relatedTarget||a.toElement,ye=G,Ie=Ie?Es(Ie):null,Ie!==null&&(Dt=_e(Ie),Ie!==Dt||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(ye=null,Ie=G),ye!==Ie)){if(Ce=to,ue="onMouseLeave",$="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=T,ue="onPointerLeave",$="onPointerEnter",b="pointer"),Dt=ye==null?te:ho(ye),H=Ie==null?te:ho(Ie),te=new Ce(ue,b+"leave",ye,a,ne),te.target=Dt,te.relatedTarget=H,ue=null,Es(ne)===G&&(Ce=new Ce($,b+"enter",Ie,a,ne),Ce.target=H,Ce.relatedTarget=Dt,ue=Ce),Dt=ue,ye&&Ie)t:{for(Ce=ye,$=Ie,b=0,H=Ce;H;H=uo(H))b++;for(H=0,ue=$;ue;ue=uo(ue))H++;for(;0<b-H;)Ce=uo(Ce),b--;for(;0<H-b;)$=uo($),H--;for(;b--;){if(Ce===$||$!==null&&Ce===$.alternate)break t;Ce=uo(Ce),$=uo($)}Ce=null}else Ce=null;ye!==null&&Ff(ae,te,ye,Ce,!1),Ie!==null&&Dt!==null&&Ff(ae,Dt,Ie,Ce,!0)}}e:{if(te=G?ho(G):window,ye=te.nodeName&&te.nodeName.toLowerCase(),ye==="select"||ye==="input"&&te.type==="file")var Ae=m_;else if(yf(te))if(_f)Ae=__;else{Ae=y_;var De=g_}else(ye=te.nodeName)&&ye.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Ae=v_);if(Ae&&(Ae=Ae(n,G))){vf(ae,Ae,a,ne);break e}De&&De(n,te,G),n==="focusout"&&(De=te._wrapperState)&&De.controlled&&te.type==="number"&&Gr(te,"number",te.value)}switch(De=G?ho(G):window,n){case"focusin":(yf(De)||De.contentEditable==="true")&&(ao=De,mc=G,ia=null);break;case"focusout":ia=mc=ao=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,Rf(ae,a,ne);break;case"selectionchange":if(T_)break;case"keydown":case"keyup":Rf(ae,a,ne)}var Ve;if(Ot)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else oo?mf(n,a)&&(Fe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(ws&&a.locale!=="ko"&&(oo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&oo&&(Ve=Xo()):(Bn=ne,Xs="value"in Bn?Bn.value:Bn.textContent,oo=!0)),De=_l(G,Fe),0<De.length&&(Fe=new ea(Fe,n,null,a,ne),ae.push({event:Fe,listeners:De}),Ve?Fe.data=Ve:(Ve=gf(a),Ve!==null&&(Fe.data=Ve)))),(Ve=zn?h_(n,a):d_(n,a))&&(G=_l(G,"onBeforeInput"),0<G.length&&(ne=new ea("onBeforeInput","beforeinput",null,a,ne),ae.push({event:ne,listeners:G}),ne.data=Ve))}Of(ae,i)})}function aa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function _l(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=xt(n,a),m!=null&&c.unshift(aa(n,m,d)),m=xt(n,i),m!=null&&c.push(aa(n,m,d))),n=n.return}return c}function uo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ff(n,i,a,c,d){for(var m=i._reactName,w=[];a!==null&&a!==c;){var A=a,V=A.alternate,G=A.stateNode;if(V!==null&&V===c)break;A.tag===5&&G!==null&&(A=G,d?(V=xt(a,m),V!=null&&w.unshift(aa(a,V,A))):d||(V=xt(a,m),V!=null&&w.push(aa(a,V,A)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var C_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function jf(n){return(typeof n=="string"?n:""+n).replace(C_,`
`).replace(R_,"")}function wl(n,i,a){if(i=jf(i),jf(n)!==i&&a)throw Error(t(425))}function El(){}var Tc=null,Sc=null;function xc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,A_=typeof clearTimeout=="function"?clearTimeout:void 0,Uf=typeof Promise=="function"?Promise:void 0,P_=typeof queueMicrotask=="function"?queueMicrotask:typeof Uf<"u"?function(n){return Uf.resolve(null).then(n).catch(k_)}:Ic;function k_(n){setTimeout(function(){throw n})}function Cc(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),mr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);mr(i)}function Vi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Bf(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var co=Math.random().toString(36).slice(2),Fr="__reactFiber$"+co,la="__reactProps$"+co,ti="__reactContainer$"+co,Rc="__reactEvents$"+co,N_="__reactListeners$"+co,D_="__reactHandles$"+co;function Es(n){var i=n[Fr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[ti]||a[Fr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Bf(n);n!==null;){if(a=n[Fr])return a;n=Bf(n)}return i}n=a,a=n.parentNode}return null}function ua(n){return n=n[Fr]||n[ti],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ho(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Tl(n){return n[la]||null}var Ac=[],fo=-1;function Li(n){return{current:n}}function yt(n){0>fo||(n.current=Ac[fo],Ac[fo]=null,fo--)}function mt(n,i){fo++,Ac[fo]=n.current,n.current=i}var bi={},un=Li(bi),Cn=Li(!1),Ts=bi;function po(n,i){var a=n.type.contextTypes;if(!a)return bi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Rn(n){return n=n.childContextTypes,n!=null}function Sl(){yt(Cn),yt(un)}function zf(n,i,a){if(un.current!==bi)throw Error(t(168));mt(un,i),mt(Cn,a)}function $f(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,ce(n)||"Unknown",d));return le({},a,c)}function xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||bi,Ts=un.current,mt(un,n),mt(Cn,Cn.current),!0}function Hf(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=$f(n,i,Ts),c.__reactInternalMemoizedMergedChildContext=n,yt(Cn),yt(un),mt(un,n)):yt(Cn),mt(Cn,a)}var ni=null,Il=!1,Pc=!1;function qf(n){ni===null?ni=[n]:ni.push(n)}function V_(n){Il=!0,qf(n)}function Oi(){if(!Pc&&ni!==null){Pc=!0;var n=0,i=Ze;try{var a=ni;for(Ze=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ni=null,Il=!1}catch(d){throw ni!==null&&(ni=ni.slice(n+1)),ct(jn,Oi),d}finally{Ze=i,Pc=!1}}return null}var mo=[],go=0,Cl=null,Rl=0,Zn=[],er=0,Ss=null,ri=1,ii="";function xs(n,i){mo[go++]=Rl,mo[go++]=Cl,Cl=n,Rl=i}function Wf(n,i,a){Zn[er++]=ri,Zn[er++]=ii,Zn[er++]=Ss,Ss=n;var c=ri;n=ii;var d=32-Ye(c)-1;c&=~(1<<d),a+=1;var m=32-Ye(i)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,ri=1<<32-Ye(i)+d|a<<d|c,ii=m+n}else ri=1<<m|a<<d|c,ii=n}function kc(n){n.return!==null&&(xs(n,1),Wf(n,1,0))}function Nc(n){for(;n===Cl;)Cl=mo[--go],mo[go]=null,Rl=mo[--go],mo[go]=null;for(;n===Ss;)Ss=Zn[--er],Zn[er]=null,ii=Zn[--er],Zn[er]=null,ri=Zn[--er],Zn[er]=null}var $n=null,Hn=null,_t=!1,vr=null;function Gf(n,i){var a=ir(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Qf(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,$n=n,Hn=Vi(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,$n=n,Hn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ss!==null?{id:ri,overflow:ii}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=ir(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,$n=n,Hn=null,!0):!1;default:return!1}}function Dc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vc(n){if(_t){var i=Hn;if(i){var a=i;if(!Qf(n,i)){if(Dc(n))throw Error(t(418));i=Vi(a.nextSibling);var c=$n;i&&Qf(n,i)?Gf(c,a):(n.flags=n.flags&-4097|2,_t=!1,$n=n)}}else{if(Dc(n))throw Error(t(418));n.flags=n.flags&-4097|2,_t=!1,$n=n}}}function Kf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;$n=n}function Al(n){if(n!==$n)return!1;if(!_t)return Kf(n),_t=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!xc(n.type,n.memoizedProps)),i&&(i=Hn)){if(Dc(n))throw Yf(),Error(t(418));for(;i;)Gf(n,i),i=Vi(i.nextSibling)}if(Kf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Hn=Vi(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Hn=null}}else Hn=$n?Vi(n.stateNode.nextSibling):null;return!0}function Yf(){for(var n=Hn;n;)n=Vi(n.nextSibling)}function yo(){Hn=$n=null,_t=!1}function Lc(n){vr===null?vr=[n]:vr.push(n)}var L_=ge.ReactCurrentBatchConfig;function ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var A=d.refs;w===null?delete A[m]:A[m]=w},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Pl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Xf(n){var i=n._init;return i(n._payload)}function Jf(n){function i($,b){if(n){var H=$.deletions;H===null?($.deletions=[b],$.flags|=16):H.push(b)}}function a($,b){if(!n)return null;for(;b!==null;)i($,b),b=b.sibling;return null}function c($,b){for($=new Map;b!==null;)b.key!==null?$.set(b.key,b):$.set(b.index,b),b=b.sibling;return $}function d($,b){return $=Hi($,b),$.index=0,$.sibling=null,$}function m($,b,H){return $.index=H,n?(H=$.alternate,H!==null?(H=H.index,H<b?($.flags|=2,b):H):($.flags|=2,b)):($.flags|=1048576,b)}function w($){return n&&$.alternate===null&&($.flags|=2),$}function A($,b,H,ue){return b===null||b.tag!==6?(b=Ih(H,$.mode,ue),b.return=$,b):(b=d(b,H),b.return=$,b)}function V($,b,H,ue){var Ae=H.type;return Ae===S?ne($,b,H.props.children,ue,H.key):b!==null&&(b.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Tt&&Xf(Ae)===b.type)?(ue=d(b,H.props),ue.ref=ca($,b,H),ue.return=$,ue):(ue=Zl(H.type,H.key,H.props,null,$.mode,ue),ue.ref=ca($,b,H),ue.return=$,ue)}function G($,b,H,ue){return b===null||b.tag!==4||b.stateNode.containerInfo!==H.containerInfo||b.stateNode.implementation!==H.implementation?(b=Ch(H,$.mode,ue),b.return=$,b):(b=d(b,H.children||[]),b.return=$,b)}function ne($,b,H,ue,Ae){return b===null||b.tag!==7?(b=Ds(H,$.mode,ue,Ae),b.return=$,b):(b=d(b,H),b.return=$,b)}function ae($,b,H){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ih(""+b,$.mode,H),b.return=$,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oe:return H=Zl(b.type,b.key,b.props,null,$.mode,H),H.ref=ca($,null,b),H.return=$,H;case Me:return b=Ch(b,$.mode,H),b.return=$,b;case Tt:var ue=b._init;return ae($,ue(b._payload),H)}if(ar(b)||Re(b))return b=Ds(b,$.mode,H,null),b.return=$,b;Pl($,b)}return null}function te($,b,H,ue){var Ae=b!==null?b.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Ae!==null?null:A($,b,""+H,ue);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Oe:return H.key===Ae?V($,b,H,ue):null;case Me:return H.key===Ae?G($,b,H,ue):null;case Tt:return Ae=H._init,te($,b,Ae(H._payload),ue)}if(ar(H)||Re(H))return Ae!==null?null:ne($,b,H,ue,null);Pl($,H)}return null}function ye($,b,H,ue,Ae){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return $=$.get(H)||null,A(b,$,""+ue,Ae);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case Oe:return $=$.get(ue.key===null?H:ue.key)||null,V(b,$,ue,Ae);case Me:return $=$.get(ue.key===null?H:ue.key)||null,G(b,$,ue,Ae);case Tt:var De=ue._init;return ye($,b,H,De(ue._payload),Ae)}if(ar(ue)||Re(ue))return $=$.get(H)||null,ne(b,$,ue,Ae,null);Pl(b,ue)}return null}function Ie($,b,H,ue){for(var Ae=null,De=null,Ve=b,Fe=b=0,Kt=null;Ve!==null&&Fe<H.length;Fe++){Ve.index>Fe?(Kt=Ve,Ve=null):Kt=Ve.sibling;var at=te($,Ve,H[Fe],ue);if(at===null){Ve===null&&(Ve=Kt);break}n&&Ve&&at.alternate===null&&i($,Ve),b=m(at,b,Fe),De===null?Ae=at:De.sibling=at,De=at,Ve=Kt}if(Fe===H.length)return a($,Ve),_t&&xs($,Fe),Ae;if(Ve===null){for(;Fe<H.length;Fe++)Ve=ae($,H[Fe],ue),Ve!==null&&(b=m(Ve,b,Fe),De===null?Ae=Ve:De.sibling=Ve,De=Ve);return _t&&xs($,Fe),Ae}for(Ve=c($,Ve);Fe<H.length;Fe++)Kt=ye(Ve,$,Fe,H[Fe],ue),Kt!==null&&(n&&Kt.alternate!==null&&Ve.delete(Kt.key===null?Fe:Kt.key),b=m(Kt,b,Fe),De===null?Ae=Kt:De.sibling=Kt,De=Kt);return n&&Ve.forEach(function(qi){return i($,qi)}),_t&&xs($,Fe),Ae}function Ce($,b,H,ue){var Ae=Re(H);if(typeof Ae!="function")throw Error(t(150));if(H=Ae.call(H),H==null)throw Error(t(151));for(var De=Ae=null,Ve=b,Fe=b=0,Kt=null,at=H.next();Ve!==null&&!at.done;Fe++,at=H.next()){Ve.index>Fe?(Kt=Ve,Ve=null):Kt=Ve.sibling;var qi=te($,Ve,at.value,ue);if(qi===null){Ve===null&&(Ve=Kt);break}n&&Ve&&qi.alternate===null&&i($,Ve),b=m(qi,b,Fe),De===null?Ae=qi:De.sibling=qi,De=qi,Ve=Kt}if(at.done)return a($,Ve),_t&&xs($,Fe),Ae;if(Ve===null){for(;!at.done;Fe++,at=H.next())at=ae($,at.value,ue),at!==null&&(b=m(at,b,Fe),De===null?Ae=at:De.sibling=at,De=at);return _t&&xs($,Fe),Ae}for(Ve=c($,Ve);!at.done;Fe++,at=H.next())at=ye(Ve,$,Fe,at.value,ue),at!==null&&(n&&at.alternate!==null&&Ve.delete(at.key===null?Fe:at.key),b=m(at,b,Fe),De===null?Ae=at:De.sibling=at,De=at);return n&&Ve.forEach(function(fw){return i($,fw)}),_t&&xs($,Fe),Ae}function Dt($,b,H,ue){if(typeof H=="object"&&H!==null&&H.type===S&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Oe:e:{for(var Ae=H.key,De=b;De!==null;){if(De.key===Ae){if(Ae=H.type,Ae===S){if(De.tag===7){a($,De.sibling),b=d(De,H.props.children),b.return=$,$=b;break e}}else if(De.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Tt&&Xf(Ae)===De.type){a($,De.sibling),b=d(De,H.props),b.ref=ca($,De,H),b.return=$,$=b;break e}a($,De);break}else i($,De);De=De.sibling}H.type===S?(b=Ds(H.props.children,$.mode,ue,H.key),b.return=$,$=b):(ue=Zl(H.type,H.key,H.props,null,$.mode,ue),ue.ref=ca($,b,H),ue.return=$,$=ue)}return w($);case Me:e:{for(De=H.key;b!==null;){if(b.key===De)if(b.tag===4&&b.stateNode.containerInfo===H.containerInfo&&b.stateNode.implementation===H.implementation){a($,b.sibling),b=d(b,H.children||[]),b.return=$,$=b;break e}else{a($,b);break}else i($,b);b=b.sibling}b=Ch(H,$.mode,ue),b.return=$,$=b}return w($);case Tt:return De=H._init,Dt($,b,De(H._payload),ue)}if(ar(H))return Ie($,b,H,ue);if(Re(H))return Ce($,b,H,ue);Pl($,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,b!==null&&b.tag===6?(a($,b.sibling),b=d(b,H),b.return=$,$=b):(a($,b),b=Ih(H,$.mode,ue),b.return=$,$=b),w($)):a($,b)}return Dt}var vo=Jf(!0),Zf=Jf(!1),kl=Li(null),Nl=null,_o=null,bc=null;function Oc(){bc=_o=Nl=null}function Mc(n){var i=kl.current;yt(kl),n._currentValue=i}function Fc(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function wo(n,i){Nl=n,bc=_o=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(An=!0),n.firstContext=null)}function tr(n){var i=n._currentValue;if(bc!==n)if(n={context:n,memoizedValue:i,next:null},_o===null){if(Nl===null)throw Error(t(308));_o=n,Nl.dependencies={lanes:0,firstContext:n}}else _o=_o.next=n;return i}var Is=null;function jc(n){Is===null?Is=[n]:Is.push(n)}function ep(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,jc(i)):(a.next=d.next,d.next=a),i.interleaved=a,si(n,c)}function si(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Mi=!1;function Uc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function oi(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Fi(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(it&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,si(n,a)}return d=c.interleaved,d===null?(i.next=i,jc(c)):(i.next=d.next,d.next=i),c.interleaved=i,si(n,a)}function Dl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Ri(n,a)}}function np(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Vl(n,i,a,c){var d=n.updateQueue;Mi=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var V=A,G=V.next;V.next=null,w===null?m=G:w.next=G,w=V;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==w&&(A===null?ne.firstBaseUpdate=G:A.next=G,ne.lastBaseUpdate=V))}if(m!==null){var ae=d.baseState;w=0,ne=G=V=null,A=m;do{var te=A.lane,ye=A.eventTime;if((c&te)===te){ne!==null&&(ne=ne.next={eventTime:ye,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ie=n,Ce=A;switch(te=i,ye=a,Ce.tag){case 1:if(Ie=Ce.payload,typeof Ie=="function"){ae=Ie.call(ye,ae,te);break e}ae=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ce.payload,te=typeof Ie=="function"?Ie.call(ye,ae,te):Ie,te==null)break e;ae=le({},ae,te);break e;case 2:Mi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,te=d.effects,te===null?d.effects=[A]:te.push(A))}else ye={eventTime:ye,lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(G=ne=ye,V=ae):ne=ne.next=ye,w|=te;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;te=A,A=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);if(ne===null&&(V=ae),d.baseState=V,d.firstBaseUpdate=G,d.lastBaseUpdate=ne,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);As|=w,n.lanes=w,n.memoizedState=ae}}function rp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ha={},jr=Li(ha),da=Li(ha),fa=Li(ha);function Cs(n){if(n===ha)throw Error(t(174));return n}function Bc(n,i){switch(mt(fa,i),mt(da,n),mt(jr,ha),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:St(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=St(i,n)}yt(jr),mt(jr,i)}function Eo(){yt(jr),yt(da),yt(fa)}function ip(n){Cs(fa.current);var i=Cs(jr.current),a=St(i,n.type);i!==a&&(mt(da,n),mt(jr,a))}function zc(n){da.current===n&&(yt(jr),yt(da))}var It=Li(0);function Ll(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $c=[];function Hc(){for(var n=0;n<$c.length;n++)$c[n]._workInProgressVersionPrimary=null;$c.length=0}var bl=ge.ReactCurrentDispatcher,qc=ge.ReactCurrentBatchConfig,Rs=0,Ct=null,Bt=null,Gt=null,Ol=!1,pa=!1,ma=0,b_=0;function cn(){throw Error(t(321))}function Wc(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!yr(n[a],i[a]))return!1;return!0}function Gc(n,i,a,c,d,m){if(Rs=m,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,bl.current=n===null||n.memoizedState===null?j_:U_,n=a(c,d),pa){m=0;do{if(pa=!1,ma=0,25<=m)throw Error(t(301));m+=1,Gt=Bt=null,i.updateQueue=null,bl.current=B_,n=a(c,d)}while(pa)}if(bl.current=jl,i=Bt!==null&&Bt.next!==null,Rs=0,Gt=Bt=Ct=null,Ol=!1,i)throw Error(t(300));return n}function Qc(){var n=ma!==0;return ma=0,n}function Ur(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ct.memoizedState=Gt=n:Gt=Gt.next=n,Gt}function nr(){if(Bt===null){var n=Ct.alternate;n=n!==null?n.memoizedState:null}else n=Bt.next;var i=Gt===null?Ct.memoizedState:Gt.next;if(i!==null)Gt=i,Bt=n;else{if(n===null)throw Error(t(310));Bt=n,n={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Gt===null?Ct.memoizedState=Gt=n:Gt=Gt.next=n}return Gt}function ga(n,i){return typeof i=="function"?i(n):i}function Kc(n){var i=nr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Bt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var A=w=null,V=null,G=m;do{var ne=G.lane;if((Rs&ne)===ne)V!==null&&(V=V.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),c=G.hasEagerState?G.eagerState:n(c,G.action);else{var ae={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};V===null?(A=V=ae,w=c):V=V.next=ae,Ct.lanes|=ne,As|=ne}G=G.next}while(G!==null&&G!==m);V===null?w=c:V.next=A,yr(c,i.memoizedState)||(An=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=V,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,Ct.lanes|=m,As|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Yc(n){var i=nr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);yr(m,i.memoizedState)||(An=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function sp(){}function op(n,i){var a=Ct,c=nr(),d=i(),m=!yr(c.memoizedState,d);if(m&&(c.memoizedState=d,An=!0),c=c.queue,Xc(up.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||Gt!==null&&Gt.memoizedState.tag&1){if(a.flags|=2048,ya(9,lp.bind(null,a,c,d,i),void 0,null),Qt===null)throw Error(t(349));(Rs&30)!==0||ap(a,i,d)}return d}function ap(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ct.updateQueue,i===null?(i={lastEffect:null,stores:null},Ct.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function lp(n,i,a,c){i.value=a,i.getSnapshot=c,cp(i)&&hp(n)}function up(n,i,a){return a(function(){cp(i)&&hp(n)})}function cp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!yr(n,a)}catch{return!0}}function hp(n){var i=si(n,1);i!==null&&Tr(i,n,1,-1)}function dp(n){var i=Ur();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},i.queue=n,n=n.dispatch=F_.bind(null,Ct,n),[i.memoizedState,n]}function ya(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Ct.updateQueue,i===null?(i={lastEffect:null,stores:null},Ct.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function fp(){return nr().memoizedState}function Ml(n,i,a,c){var d=Ur();Ct.flags|=n,d.memoizedState=ya(1|i,a,void 0,c===void 0?null:c)}function Fl(n,i,a,c){var d=nr();c=c===void 0?null:c;var m=void 0;if(Bt!==null){var w=Bt.memoizedState;if(m=w.destroy,c!==null&&Wc(c,w.deps)){d.memoizedState=ya(i,a,m,c);return}}Ct.flags|=n,d.memoizedState=ya(1|i,a,m,c)}function pp(n,i){return Ml(8390656,8,n,i)}function Xc(n,i){return Fl(2048,8,n,i)}function mp(n,i){return Fl(4,2,n,i)}function gp(n,i){return Fl(4,4,n,i)}function yp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function vp(n,i,a){return a=a!=null?a.concat([n]):null,Fl(4,4,yp.bind(null,i,n),a)}function Jc(){}function _p(n,i){var a=nr();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Wc(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function wp(n,i){var a=nr();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Wc(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Ep(n,i,a){return(Rs&21)===0?(n.baseState&&(n.baseState=!1,An=!0),n.memoizedState=a):(yr(a,i)||(a=gs(),Ct.lanes|=a,As|=a,n.baseState=!0),i)}function O_(n,i){var a=Ze;Ze=a!==0&&4>a?a:4,n(!0);var c=qc.transition;qc.transition={};try{n(!1),i()}finally{Ze=a,qc.transition=c}}function Tp(){return nr().memoizedState}function M_(n,i,a){var c=zi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Sp(n))xp(i,a);else if(a=ep(n,i,a,c),a!==null){var d=_n();Tr(a,n,c,d),Ip(a,i,c)}}function F_(n,i,a){var c=zi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sp(n))xp(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,A=m(w,a);if(d.hasEagerState=!0,d.eagerState=A,yr(A,w)){var V=i.interleaved;V===null?(d.next=d,jc(i)):(d.next=V.next,V.next=d),i.interleaved=d;return}}catch{}finally{}a=ep(n,i,d,c),a!==null&&(d=_n(),Tr(a,n,c,d),Ip(a,i,c))}}function Sp(n){var i=n.alternate;return n===Ct||i!==null&&i===Ct}function xp(n,i){pa=Ol=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Ip(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Ri(n,a)}}var jl={readContext:tr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},j_={readContext:tr,useCallback:function(n,i){return Ur().memoizedState=[n,i===void 0?null:i],n},useContext:tr,useEffect:pp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Ml(4194308,4,yp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Ml(4194308,4,n,i)},useInsertionEffect:function(n,i){return Ml(4,2,n,i)},useMemo:function(n,i){var a=Ur();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Ur();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=M_.bind(null,Ct,n),[c.memoizedState,n]},useRef:function(n){var i=Ur();return n={current:n},i.memoizedState=n},useState:dp,useDebugValue:Jc,useDeferredValue:function(n){return Ur().memoizedState=n},useTransition:function(){var n=dp(!1),i=n[0];return n=O_.bind(null,n[1]),Ur().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Ct,d=Ur();if(_t){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Qt===null)throw Error(t(349));(Rs&30)!==0||ap(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,pp(up.bind(null,c,m,n),[n]),c.flags|=2048,ya(9,lp.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=Ur(),i=Qt.identifierPrefix;if(_t){var a=ii,c=ri;a=(c&~(1<<32-Ye(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ma++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=b_++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},U_={readContext:tr,useCallback:_p,useContext:tr,useEffect:Xc,useImperativeHandle:vp,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:wp,useReducer:Kc,useRef:fp,useState:function(){return Kc(ga)},useDebugValue:Jc,useDeferredValue:function(n){var i=nr();return Ep(i,Bt.memoizedState,n)},useTransition:function(){var n=Kc(ga)[0],i=nr().memoizedState;return[n,i]},useMutableSource:sp,useSyncExternalStore:op,useId:Tp,unstable_isNewReconciler:!1},B_={readContext:tr,useCallback:_p,useContext:tr,useEffect:Xc,useImperativeHandle:vp,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:wp,useReducer:Yc,useRef:fp,useState:function(){return Yc(ga)},useDebugValue:Jc,useDeferredValue:function(n){var i=nr();return Bt===null?i.memoizedState=n:Ep(i,Bt.memoizedState,n)},useTransition:function(){var n=Yc(ga)[0],i=nr().memoizedState;return[n,i]},useMutableSource:sp,useSyncExternalStore:op,useId:Tp,unstable_isNewReconciler:!1};function _r(n,i){if(n&&n.defaultProps){i=le({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Zc(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:le({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ul={isMounted:function(n){return(n=n._reactInternals)?_e(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=_n(),d=zi(n),m=oi(c,d);m.payload=i,a!=null&&(m.callback=a),i=Fi(n,m,d),i!==null&&(Tr(i,n,d,c),Dl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=_n(),d=zi(n),m=oi(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Fi(n,m,d),i!==null&&(Tr(i,n,d,c),Dl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=_n(),c=zi(n),d=oi(a,c);d.tag=2,i!=null&&(d.callback=i),i=Fi(n,d,c),i!==null&&(Tr(i,n,c,a),Dl(i,n,c))}};function Cp(n,i,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):i.prototype&&i.prototype.isPureReactComponent?!ra(a,c)||!ra(d,m):!0}function Rp(n,i,a){var c=!1,d=bi,m=i.contextType;return typeof m=="object"&&m!==null?m=tr(m):(d=Rn(i)?Ts:un.current,c=i.contextTypes,m=(c=c!=null)?po(n,d):bi),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ul,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function Ap(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Ul.enqueueReplaceState(i,i.state,null)}function eh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Uc(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=tr(m):(m=Rn(i)?Ts:un.current,d.context=po(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Zc(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Ul.enqueueReplaceState(d,d.state,null),Vl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function To(n,i){try{var a="",c=i;do a+=K(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function th(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function nh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var z_=typeof WeakMap=="function"?WeakMap:Map;function Pp(n,i,a){a=oi(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Gl||(Gl=!0,yh=c),nh(n,i)},a}function kp(n,i,a){a=oi(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){nh(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){nh(n,i),typeof c!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Np(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new z_;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=nw.bind(null,n,i,a),i.then(n,n))}function Dp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Vp(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=oi(-1,1),i.tag=2,Fi(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var $_=ge.ReactCurrentOwner,An=!1;function vn(n,i,a,c){i.child=n===null?Zf(i,null,a,c):vo(i,n.child,a,c)}function Lp(n,i,a,c,d){a=a.render;var m=i.ref;return wo(i,d),c=Gc(n,i,a,c,m,d),a=Qc(),n!==null&&!An?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,ai(n,i,d)):(_t&&a&&kc(i),i.flags|=1,vn(n,i,c,d),i.child)}function bp(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!xh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,Op(n,i,m,c,d)):(n=Zl(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:ra,a(w,c)&&n.ref===i.ref)return ai(n,i,d)}return i.flags|=1,n=Hi(m,c),n.ref=i.ref,n.return=i,i.child=n}function Op(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(ra(m,c)&&n.ref===i.ref)if(An=!1,i.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(An=!0);else return i.lanes=n.lanes,ai(n,i,d)}return rh(n,i,a,c,d)}function Mp(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(xo,qn),qn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,mt(xo,qn),qn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,mt(xo,qn),qn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,mt(xo,qn),qn|=c;return vn(n,i,d,a),i.child}function Fp(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function rh(n,i,a,c,d){var m=Rn(a)?Ts:un.current;return m=po(i,m),wo(i,d),a=Gc(n,i,a,c,m,d),c=Qc(),n!==null&&!An?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,ai(n,i,d)):(_t&&c&&kc(i),i.flags|=1,vn(n,i,a,d),i.child)}function jp(n,i,a,c,d){if(Rn(a)){var m=!0;xl(i)}else m=!1;if(wo(i,d),i.stateNode===null)zl(n,i),Rp(i,a,c),eh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,A=i.memoizedProps;w.props=A;var V=w.context,G=a.contextType;typeof G=="object"&&G!==null?G=tr(G):(G=Rn(a)?Ts:un.current,G=po(i,G));var ne=a.getDerivedStateFromProps,ae=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||V!==G)&&Ap(i,w,c,G),Mi=!1;var te=i.memoizedState;w.state=te,Vl(i,c,w,d),V=i.memoizedState,A!==c||te!==V||Cn.current||Mi?(typeof ne=="function"&&(Zc(i,a,ne,c),V=i.memoizedState),(A=Mi||Cp(i,a,A,c,te,V,G))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=V),w.props=c,w.state=V,w.context=G,c=A):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,tp(n,i),A=i.memoizedProps,G=i.type===i.elementType?A:_r(i.type,A),w.props=G,ae=i.pendingProps,te=w.context,V=a.contextType,typeof V=="object"&&V!==null?V=tr(V):(V=Rn(a)?Ts:un.current,V=po(i,V));var ye=a.getDerivedStateFromProps;(ne=typeof ye=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ae||te!==V)&&Ap(i,w,c,V),Mi=!1,te=i.memoizedState,w.state=te,Vl(i,c,w,d);var Ie=i.memoizedState;A!==ae||te!==Ie||Cn.current||Mi?(typeof ye=="function"&&(Zc(i,a,ye,c),Ie=i.memoizedState),(G=Mi||Cp(i,a,G,c,te,Ie,V)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,Ie,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,Ie,V)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Ie),w.props=c,w.state=Ie,w.context=V,c=G):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),c=!1)}return ih(n,i,a,c,m,d)}function ih(n,i,a,c,d,m){Fp(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&Hf(i,a,!1),ai(n,i,m);c=i.stateNode,$_.current=i;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=vo(i,n.child,null,m),i.child=vo(i,null,A,m)):vn(n,i,A,m),i.memoizedState=c.state,d&&Hf(i,a,!0),i.child}function Up(n){var i=n.stateNode;i.pendingContext?zf(n,i.pendingContext,i.pendingContext!==i.context):i.context&&zf(n,i.context,!1),Bc(n,i.containerInfo)}function Bp(n,i,a,c,d){return yo(),Lc(d),i.flags|=256,vn(n,i,a,c),i.child}var sh={dehydrated:null,treeContext:null,retryLane:0};function oh(n){return{baseLanes:n,cachePool:null,transitions:null}}function zp(n,i,a){var c=i.pendingProps,d=It.current,m=!1,w=(i.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),mt(It,d&1),n===null)return Vc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=i.mode,m=i.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=eu(w,c,0,null),n=Ds(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=oh(a),i.memoizedState=sh,n):ah(i,w));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return H_(n,i,w,c,A,d,a);if(m){m=c.fallback,w=i.mode,d=n.child,A=d.sibling;var V={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=V,i.deletions=null):(c=Hi(d,V),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?m=Hi(A,m):(m=Ds(m,w,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,w=n.child.memoizedState,w=w===null?oh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,i.memoizedState=sh,c}return m=n.child,n=m.sibling,c=Hi(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function ah(n,i){return i=eu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Bl(n,i,a,c){return c!==null&&Lc(c),vo(i,n.child,null,a),n=ah(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function H_(n,i,a,c,d,m,w){if(a)return i.flags&256?(i.flags&=-257,c=th(Error(t(422))),Bl(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=eu({mode:"visible",children:c.children},d,0,null),m=Ds(m,d,w,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&vo(i,n.child,null,w),i.child.memoizedState=oh(w),i.memoizedState=sh,m);if((i.mode&1)===0)return Bl(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,m=Error(t(419)),c=th(m,c,void 0),Bl(n,i,w,c)}if(A=(w&n.childLanes)!==0,An||A){if(c=Qt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,si(n,d),Tr(c,n,d,-1))}return Sh(),c=th(Error(t(421))),Bl(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=rw.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,Hn=Vi(d.nextSibling),$n=i,_t=!0,vr=null,n!==null&&(Zn[er++]=ri,Zn[er++]=ii,Zn[er++]=Ss,ri=n.id,ii=n.overflow,Ss=i),i=ah(i,c.children),i.flags|=4096,i)}function $p(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Fc(n.return,i,a)}function lh(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Hp(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(vn(n,i,c.children,a),c=It.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$p(n,a,i);else if(n.tag===19)$p(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(mt(It,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Ll(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),lh(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Ll(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}lh(i,!0,a,null,m);break;case"together":lh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zl(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function ai(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),As|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Hi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Hi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function q_(n,i,a){switch(i.tag){case 3:Up(i),yo();break;case 5:ip(i);break;case 1:Rn(i.type)&&xl(i);break;case 4:Bc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;mt(kl,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(mt(It,It.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?zp(n,i,a):(mt(It,It.current&1),n=ai(n,i,a),n!==null?n.sibling:null);mt(It,It.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Hp(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),mt(It,It.current),c)break;return null;case 22:case 23:return i.lanes=0,Mp(n,i,a)}return ai(n,i,a)}var qp,uh,Wp,Gp;qp=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},uh=function(){},Wp=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Cs(jr.current);var m=null;switch(a){case"input":d=Cr(n,d),c=Cr(n,c),m=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),m=[];break;case"textarea":d=cs(n,d),c=cs(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=El)}Ei(a,c);var w;a=null;for(G in d)if(!c.hasOwnProperty(G)&&d.hasOwnProperty(G)&&d[G]!=null)if(G==="style"){var A=d[G];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?m||(m=[]):(m=m||[]).push(G,null));for(G in c){var V=c[G];if(A=d?.[G],c.hasOwnProperty(G)&&V!==A&&(V!=null||A!=null))if(G==="style")if(A){for(w in A)!A.hasOwnProperty(w)||V&&V.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in V)V.hasOwnProperty(w)&&A[w]!==V[w]&&(a||(a={}),a[w]=V[w])}else a||(m||(m=[]),m.push(G,a)),a=V;else G==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,A=A?A.__html:void 0,V!=null&&A!==V&&(m=m||[]).push(G,V)):G==="children"?typeof V!="string"&&typeof V!="number"||(m=m||[]).push(G,""+V):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(V!=null&&G==="onScroll"&&gt("scroll",n),m||A===V||(m=[])):(m=m||[]).push(G,V))}a&&(m=m||[]).push("style",a);var G=m;(i.updateQueue=G)&&(i.flags|=4)}},Gp=function(n,i,a,c){a!==c&&(i.flags|=4)};function va(n,i){if(!_t)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function hn(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function W_(n,i,a){var c=i.pendingProps;switch(Nc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(i),null;case 1:return Rn(i.type)&&Sl(),hn(i),null;case 3:return c=i.stateNode,Eo(),yt(Cn),yt(un),Hc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Al(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,vr!==null&&(wh(vr),vr=null))),uh(n,i),hn(i),null;case 5:zc(i);var d=Cs(fa.current);if(a=i.type,n!==null&&i.stateNode!=null)Wp(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return hn(i),null}if(n=Cs(jr.current),Al(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[Fr]=i,c[la]=m,n=(i.mode&1)!==0,a){case"dialog":gt("cancel",c),gt("close",c);break;case"iframe":case"object":case"embed":gt("load",c);break;case"video":case"audio":for(d=0;d<sa.length;d++)gt(sa[d],c);break;case"source":gt("error",c);break;case"img":case"image":case"link":gt("error",c),gt("load",c);break;case"details":gt("toggle",c);break;case"input":yi(c,m),gt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},gt("invalid",c);break;case"textarea":vi(c,m),gt("invalid",c)}Ei(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var A=m[w];w==="children"?typeof A=="string"?c.textContent!==A&&(m.suppressHydrationWarning!==!0&&wl(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&wl(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&gt("scroll",c)}switch(a){case"input":At(c),qs(c,m,!0);break;case"textarea":At(c),ur(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=El)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Fr]=i,n[la]=c,qp(n,i,!1,!1),i.stateNode=n;e:{switch(w=hs(a,c),a){case"dialog":gt("cancel",n),gt("close",n),d=c;break;case"iframe":case"object":case"embed":gt("load",n),d=c;break;case"video":case"audio":for(d=0;d<sa.length;d++)gt(sa[d],n);d=c;break;case"source":gt("error",n),d=c;break;case"img":case"image":case"link":gt("error",n),gt("load",n),d=c;break;case"details":gt("toggle",n),d=c;break;case"input":yi(n,c),d=Cr(n,c),gt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),gt("invalid",n);break;case"textarea":vi(n,c),d=cs(n,c),gt("invalid",n);break;default:d=c}Ei(a,d),A=d;for(m in A)if(A.hasOwnProperty(m)){var V=A[m];m==="style"?_i(n,V):m==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&gn(n,V)):m==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&cr(n,V):typeof V=="number"&&cr(n,""+V):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?V!=null&&m==="onScroll"&&gt("scroll",n):V!=null&&pe(n,m,V,w))}switch(a){case"input":At(n),qs(n,c,!1);break;case"textarea":At(n),ur(n);break;case"option":c.value!=null&&n.setAttribute("value",""+fe(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?lr(n,!!c.multiple,m,!1):c.defaultValue!=null&&lr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=El)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return hn(i),null;case 6:if(n&&i.stateNode!=null)Gp(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Cs(fa.current),Cs(jr.current),Al(i)){if(c=i.stateNode,a=i.memoizedProps,c[Fr]=i,(m=c.nodeValue!==a)&&(n=$n,n!==null))switch(n.tag){case 3:wl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wl(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Fr]=i,i.stateNode=c}return hn(i),null;case 13:if(yt(It),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_t&&Hn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Yf(),yo(),i.flags|=98560,m=!1;else if(m=Al(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Fr]=i}else yo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;hn(i),m=!1}else vr!==null&&(wh(vr),vr=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(It.current&1)!==0?zt===0&&(zt=3):Sh())),i.updateQueue!==null&&(i.flags|=4),hn(i),null);case 4:return Eo(),uh(n,i),n===null&&oa(i.stateNode.containerInfo),hn(i),null;case 10:return Mc(i.type._context),hn(i),null;case 17:return Rn(i.type)&&Sl(),hn(i),null;case 19:if(yt(It),m=i.memoizedState,m===null)return hn(i),null;if(c=(i.flags&128)!==0,w=m.rendering,w===null)if(c)va(m,!1);else{if(zt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Ll(n),w!==null){for(i.flags|=128,va(m,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return mt(It,It.current&1|2),i.child}n=n.sibling}m.tail!==null&&Qe()>Io&&(i.flags|=128,c=!0,va(m,!1),i.lanes=4194304)}else{if(!c)if(n=Ll(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),va(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!_t)return hn(i),null}else 2*Qe()-m.renderingStartTime>Io&&a!==1073741824&&(i.flags|=128,c=!0,va(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Qe(),i.sibling=null,a=It.current,mt(It,c?a&1|2:a&1),i):(hn(i),null);case 22:case 23:return Th(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(qn&1073741824)!==0&&(hn(i),i.subtreeFlags&6&&(i.flags|=8192)):hn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function G_(n,i){switch(Nc(i),i.tag){case 1:return Rn(i.type)&&Sl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Eo(),yt(Cn),yt(un),Hc(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return zc(i),null;case 13:if(yt(It),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));yo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return yt(It),null;case 4:return Eo(),null;case 10:return Mc(i.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var $l=!1,dn=!1,Q_=typeof WeakSet=="function"?WeakSet:Set,xe=null;function So(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Nt(n,i,c)}else a.current=null}function ch(n,i,a){try{a()}catch(c){Nt(n,i,c)}}var Qp=!1;function K_(n,i){if(Tc=ki,n=Cf(),pc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,A=-1,V=-1,G=0,ne=0,ae=n,te=null;t:for(;;){for(var ye;ae!==a||d!==0&&ae.nodeType!==3||(A=w+d),ae!==m||c!==0&&ae.nodeType!==3||(V=w+c),ae.nodeType===3&&(w+=ae.nodeValue.length),(ye=ae.firstChild)!==null;)te=ae,ae=ye;for(;;){if(ae===n)break t;if(te===a&&++G===d&&(A=w),te===m&&++ne===c&&(V=w),(ye=ae.nextSibling)!==null)break;ae=te,te=ae.parentNode}ae=ye}a=A===-1||V===-1?null:{start:A,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sc={focusedElem:n,selectionRange:a},ki=!1,xe=i;xe!==null;)if(i=xe,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,xe=n;else for(;xe!==null;){i=xe;try{var Ie=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Ce=Ie.memoizedProps,Dt=Ie.memoizedState,$=i.stateNode,b=$.getSnapshotBeforeUpdate(i.elementType===i.type?Ce:_r(i.type,Ce),Dt);$.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var H=i.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){Nt(i,i.return,ue)}if(n=i.sibling,n!==null){n.return=i.return,xe=n;break}xe=i.return}return Ie=Qp,Qp=!1,Ie}function _a(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&ch(i,a,m)}d=d.next}while(d!==c)}}function Hl(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function hh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Kp(n){var i=n.alternate;i!==null&&(n.alternate=null,Kp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Fr],delete i[la],delete i[Rc],delete i[N_],delete i[D_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Yp(n){return n.tag===5||n.tag===3||n.tag===4}function Xp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Yp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=El));else if(c!==4&&(n=n.child,n!==null))for(dh(n,i,a),n=n.sibling;n!==null;)dh(n,i,a),n=n.sibling}function fh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(fh(n,i,a),n=n.sibling;n!==null;)fh(n,i,a),n=n.sibling}var tn=null,wr=!1;function ji(n,i,a){for(a=a.child;a!==null;)Jp(n,i,a),a=a.sibling}function Jp(n,i,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(lt,a)}catch{}switch(a.tag){case 5:dn||So(a,i);case 6:var c=tn,d=wr;tn=null,ji(n,i,a),tn=c,wr=d,tn!==null&&(wr?(n=tn,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):tn.removeChild(a.stateNode));break;case 18:tn!==null&&(wr?(n=tn,a=a.stateNode,n.nodeType===8?Cc(n.parentNode,a):n.nodeType===1&&Cc(n,a),mr(n)):Cc(tn,a.stateNode));break;case 4:c=tn,d=wr,tn=a.stateNode.containerInfo,wr=!0,ji(n,i,a),tn=c,wr=d;break;case 0:case 11:case 14:case 15:if(!dn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&ch(a,i,w),d=d.next}while(d!==c)}ji(n,i,a);break;case 1:if(!dn&&(So(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Nt(a,i,A)}ji(n,i,a);break;case 21:ji(n,i,a);break;case 22:a.mode&1?(dn=(c=dn)||a.memoizedState!==null,ji(n,i,a),dn=c):ji(n,i,a);break;default:ji(n,i,a)}}function Zp(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Q_),i.forEach(function(c){var d=iw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Er(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 5:tn=A.stateNode,wr=!1;break e;case 3:tn=A.stateNode.containerInfo,wr=!0;break e;case 4:tn=A.stateNode.containerInfo,wr=!0;break e}A=A.return}if(tn===null)throw Error(t(160));Jp(m,w,d),tn=null,wr=!1;var V=d.alternate;V!==null&&(V.return=null),d.return=null}catch(G){Nt(d,i,G)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)em(i,n),i=i.sibling}function em(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Er(i,n),Br(n),c&4){try{_a(3,n,n.return),Hl(3,n)}catch(Ce){Nt(n,n.return,Ce)}try{_a(5,n,n.return)}catch(Ce){Nt(n,n.return,Ce)}}break;case 1:Er(i,n),Br(n),c&512&&a!==null&&So(a,a.return);break;case 5:if(Er(i,n),Br(n),c&512&&a!==null&&So(a,a.return),n.flags&32){var d=n.stateNode;try{cr(d,"")}catch(Ce){Nt(n,n.return,Ce)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,A=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&On(d,m),hs(A,w);var G=hs(A,m);for(w=0;w<V.length;w+=2){var ne=V[w],ae=V[w+1];ne==="style"?_i(d,ae):ne==="dangerouslySetInnerHTML"?gn(d,ae):ne==="children"?cr(d,ae):pe(d,ne,ae,G)}switch(A){case"input":us(d,m);break;case"textarea":wn(d,m);break;case"select":var te=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ye=m.value;ye!=null?lr(d,!!m.multiple,ye,!1):te!==!!m.multiple&&(m.defaultValue!=null?lr(d,!!m.multiple,m.defaultValue,!0):lr(d,!!m.multiple,m.multiple?[]:"",!1))}d[la]=m}catch(Ce){Nt(n,n.return,Ce)}}break;case 6:if(Er(i,n),Br(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(Ce){Nt(n,n.return,Ce)}}break;case 3:if(Er(i,n),Br(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{mr(i.containerInfo)}catch(Ce){Nt(n,n.return,Ce)}break;case 4:Er(i,n),Br(n);break;case 13:Er(i,n),Br(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(gh=Qe())),c&4&&Zp(n);break;case 22:if(ne=a!==null&&a.memoizedState!==null,n.mode&1?(dn=(G=dn)||ne,Er(i,n),dn=G):Er(i,n),Br(n),c&8192){if(G=n.memoizedState!==null,(n.stateNode.isHidden=G)&&!ne&&(n.mode&1)!==0)for(xe=n,ne=n.child;ne!==null;){for(ae=xe=ne;xe!==null;){switch(te=xe,ye=te.child,te.tag){case 0:case 11:case 14:case 15:_a(4,te,te.return);break;case 1:So(te,te.return);var Ie=te.stateNode;if(typeof Ie.componentWillUnmount=="function"){c=te,a=te.return;try{i=c,Ie.props=i.memoizedProps,Ie.state=i.memoizedState,Ie.componentWillUnmount()}catch(Ce){Nt(c,a,Ce)}}break;case 5:So(te,te.return);break;case 22:if(te.memoizedState!==null){rm(ae);continue}}ye!==null?(ye.return=te,xe=ye):rm(ae)}ne=ne.sibling}e:for(ne=null,ae=n;;){if(ae.tag===5){if(ne===null){ne=ae;try{d=ae.stateNode,G?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=ae.stateNode,V=ae.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null,A.style.display=En("display",w))}catch(Ce){Nt(n,n.return,Ce)}}}else if(ae.tag===6){if(ne===null)try{ae.stateNode.nodeValue=G?"":ae.memoizedProps}catch(Ce){Nt(n,n.return,Ce)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===n)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===n)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===n)break e;ne===ae&&(ne=null),ae=ae.return}ne===ae&&(ne=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Er(i,n),Br(n),c&4&&Zp(n);break;case 21:break;default:Er(i,n),Br(n)}}function Br(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Yp(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(cr(d,""),c.flags&=-33);var m=Xp(n);fh(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,A=Xp(n);dh(n,A,w);break;default:throw Error(t(161))}}catch(V){Nt(n,n.return,V)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Y_(n,i,a){xe=n,tm(n)}function tm(n,i,a){for(var c=(n.mode&1)!==0;xe!==null;){var d=xe,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||$l;if(!w){var A=d.alternate,V=A!==null&&A.memoizedState!==null||dn;A=$l;var G=dn;if($l=w,(dn=V)&&!G)for(xe=d;xe!==null;)w=xe,V=w.child,w.tag===22&&w.memoizedState!==null?im(d):V!==null?(V.return=w,xe=V):im(d);for(;m!==null;)xe=m,tm(m),m=m.sibling;xe=d,$l=A,dn=G}nm(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,xe=m):nm(n)}}function nm(n){for(;xe!==null;){var i=xe;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:dn||Hl(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!dn)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:_r(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&rp(i,m,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}rp(i,w,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var V=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var G=i.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var ae=ne.dehydrated;ae!==null&&mr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}dn||i.flags&512&&hh(i)}catch(te){Nt(i,i.return,te)}}if(i===n){xe=null;break}if(a=i.sibling,a!==null){a.return=i.return,xe=a;break}xe=i.return}}function rm(n){for(;xe!==null;){var i=xe;if(i===n){xe=null;break}var a=i.sibling;if(a!==null){a.return=i.return,xe=a;break}xe=i.return}}function im(n){for(;xe!==null;){var i=xe;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Hl(4,i)}catch(V){Nt(i,a,V)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(V){Nt(i,d,V)}}var m=i.return;try{hh(i)}catch(V){Nt(i,m,V)}break;case 5:var w=i.return;try{hh(i)}catch(V){Nt(i,w,V)}}}catch(V){Nt(i,i.return,V)}if(i===n){xe=null;break}var A=i.sibling;if(A!==null){A.return=i.return,xe=A;break}xe=i.return}}var X_=Math.ceil,ql=ge.ReactCurrentDispatcher,ph=ge.ReactCurrentOwner,rr=ge.ReactCurrentBatchConfig,it=0,Qt=null,Mt=null,nn=0,qn=0,xo=Li(0),zt=0,wa=null,As=0,Wl=0,mh=0,Ea=null,Pn=null,gh=0,Io=1/0,li=null,Gl=!1,yh=null,Ui=null,Ql=!1,Bi=null,Kl=0,Ta=0,vh=null,Yl=-1,Xl=0;function _n(){return(it&6)!==0?Qe():Yl!==-1?Yl:Yl=Qe()}function zi(n){return(n.mode&1)===0?1:(it&2)!==0&&nn!==0?nn&-nn:L_.transition!==null?(Xl===0&&(Xl=gs()),Xl):(n=Ze,n!==0||(n=window.event,n=n===void 0?16:Yo(n.type)),n)}function Tr(n,i,a,c){if(50<Ta)throw Ta=0,vh=null,Error(t(185));Ci(n,a,c),((it&2)===0||n!==Qt)&&(n===Qt&&((it&2)===0&&(Wl|=a),zt===4&&$i(n,nn)),kn(n,c),a===1&&it===0&&(i.mode&1)===0&&(Io=Qe()+500,Il&&Oi()))}function kn(n,i){var a=n.callbackNode;Yr(n,i);var c=ms(n,n===Qt?nn:0);if(c===0)a!==null&&Kn(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Kn(a),i===1)n.tag===0?V_(om.bind(null,n)):qf(om.bind(null,n)),P_(function(){(it&6)===0&&Oi()}),a=null;else{switch(Ai(c)){case 1:a=jn;break;case 4:a=ln;break;case 16:a=Jt;break;case 536870912:a=Ke;break;default:a=Jt}a=pm(a,sm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function sm(n,i){if(Yl=-1,Xl=0,(it&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Co()&&n.callbackNode!==a)return null;var c=ms(n,n===Qt?nn:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Jl(n,c);else{i=c;var d=it;it|=2;var m=lm();(Qt!==n||nn!==i)&&(li=null,Io=Qe()+500,ks(n,i));do try{ew();break}catch(A){am(n,A)}while(!0);Oc(),ql.current=m,it=d,Mt!==null?i=0:(Qt=null,nn=0,i=zt)}if(i!==0){if(i===2&&(d=Un(n),d!==0&&(c=d,i=_h(n,d))),i===1)throw a=wa,ks(n,0),$i(n,c),kn(n,Qe()),a;if(i===6)$i(n,c);else{if(d=n.current.alternate,(c&30)===0&&!J_(d)&&(i=Jl(n,c),i===2&&(m=Un(n),m!==0&&(c=m,i=_h(n,m))),i===1))throw a=wa,ks(n,0),$i(n,c),kn(n,Qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Ns(n,Pn,li);break;case 3:if($i(n,c),(c&130023424)===c&&(i=gh+500-Qe(),10<i)){if(ms(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){_n(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ic(Ns.bind(null,n,Pn,li),i);break}Ns(n,Pn,li);break;case 4:if($i(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-Ye(c);m=1<<w,w=i[w],w>d&&(d=w),c&=~m}if(c=d,c=Qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*X_(c/1960))-c,10<c){n.timeoutHandle=Ic(Ns.bind(null,n,Pn,li),c);break}Ns(n,Pn,li);break;case 5:Ns(n,Pn,li);break;default:throw Error(t(329))}}}return kn(n,Qe()),n.callbackNode===a?sm.bind(null,n):null}function _h(n,i){var a=Ea;return n.current.memoizedState.isDehydrated&&(ks(n,i).flags|=256),n=Jl(n,i),n!==2&&(i=Pn,Pn=a,i!==null&&wh(i)),n}function wh(n){Pn===null?Pn=n:Pn.push.apply(Pn,n)}function J_(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!yr(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $i(n,i){for(i&=~mh,i&=~Wl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Ye(i),c=1<<a;n[a]=-1,i&=~c}}function om(n){if((it&6)!==0)throw Error(t(327));Co();var i=ms(n,0);if((i&1)===0)return kn(n,Qe()),null;var a=Jl(n,i);if(n.tag!==0&&a===2){var c=Un(n);c!==0&&(i=c,a=_h(n,c))}if(a===1)throw a=wa,ks(n,0),$i(n,i),kn(n,Qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ns(n,Pn,li),kn(n,Qe()),null}function Eh(n,i){var a=it;it|=1;try{return n(i)}finally{it=a,it===0&&(Io=Qe()+500,Il&&Oi())}}function Ps(n){Bi!==null&&Bi.tag===0&&(it&6)===0&&Co();var i=it;it|=1;var a=rr.transition,c=Ze;try{if(rr.transition=null,Ze=1,n)return n()}finally{Ze=c,rr.transition=a,it=i,(it&6)===0&&Oi()}}function Th(){qn=xo.current,yt(xo)}function ks(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,A_(a)),Mt!==null)for(a=Mt.return;a!==null;){var c=a;switch(Nc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Sl();break;case 3:Eo(),yt(Cn),yt(un),Hc();break;case 5:zc(c);break;case 4:Eo();break;case 13:yt(It);break;case 19:yt(It);break;case 10:Mc(c.type._context);break;case 22:case 23:Th()}a=a.return}if(Qt=n,Mt=n=Hi(n.current,null),nn=qn=i,zt=0,wa=null,mh=Wl=As=0,Pn=Ea=null,Is!==null){for(i=0;i<Is.length;i++)if(a=Is[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Is=null}return n}function am(n,i){do{var a=Mt;try{if(Oc(),bl.current=jl,Ol){for(var c=Ct.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Ol=!1}if(Rs=0,Gt=Bt=Ct=null,pa=!1,ma=0,ph.current=null,a===null||a.return===null){zt=1,wa=i,Mt=null;break}e:{var m=n,w=a.return,A=a,V=i;if(i=nn,A.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var G=V,ne=A,ae=ne.tag;if((ne.mode&1)===0&&(ae===0||ae===11||ae===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ye=Dp(w);if(ye!==null){ye.flags&=-257,Vp(ye,w,A,m,i),ye.mode&1&&Np(m,G,i),i=ye,V=G;var Ie=i.updateQueue;if(Ie===null){var Ce=new Set;Ce.add(V),i.updateQueue=Ce}else Ie.add(V);break e}else{if((i&1)===0){Np(m,G,i),Sh();break e}V=Error(t(426))}}else if(_t&&A.mode&1){var Dt=Dp(w);if(Dt!==null){(Dt.flags&65536)===0&&(Dt.flags|=256),Vp(Dt,w,A,m,i),Lc(To(V,A));break e}}m=V=To(V,A),zt!==4&&(zt=2),Ea===null?Ea=[m]:Ea.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var $=Pp(m,V,i);np(m,$);break e;case 1:A=V;var b=m.type,H=m.stateNode;if((m.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ui===null||!Ui.has(H)))){m.flags|=65536,i&=-i,m.lanes|=i;var ue=kp(m,A,i);np(m,ue);break e}}m=m.return}while(m!==null)}cm(a)}catch(Ae){i=Ae,Mt===a&&a!==null&&(Mt=a=a.return);continue}break}while(!0)}function lm(){var n=ql.current;return ql.current=jl,n===null?jl:n}function Sh(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||(As&268435455)===0&&(Wl&268435455)===0||$i(Qt,nn)}function Jl(n,i){var a=it;it|=2;var c=lm();(Qt!==n||nn!==i)&&(li=null,ks(n,i));do try{Z_();break}catch(d){am(n,d)}while(!0);if(Oc(),it=a,ql.current=c,Mt!==null)throw Error(t(261));return Qt=null,nn=0,zt}function Z_(){for(;Mt!==null;)um(Mt)}function ew(){for(;Mt!==null&&!kr();)um(Mt)}function um(n){var i=fm(n.alternate,n,qn);n.memoizedProps=n.pendingProps,i===null?cm(n):Mt=i,ph.current=null}function cm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=W_(a,i,qn),a!==null){Mt=a;return}}else{if(a=G_(a,i),a!==null){a.flags&=32767,Mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{zt=6,Mt=null;return}}if(i=i.sibling,i!==null){Mt=i;return}Mt=i=n}while(i!==null);zt===0&&(zt=5)}function Ns(n,i,a){var c=Ze,d=rr.transition;try{rr.transition=null,Ze=1,tw(n,i,a,c)}finally{rr.transition=d,Ze=c}return null}function tw(n,i,a,c){do Co();while(Bi!==null);if((it&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(pt(n,m),n===Qt&&(Mt=Qt=null,nn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ql||(Ql=!0,pm(Jt,function(){return Co(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=rr.transition,rr.transition=null;var w=Ze;Ze=1;var A=it;it|=4,ph.current=null,K_(n,a),em(a,n),E_(Sc),ki=!!Tc,Sc=Tc=null,n.current=a,Y_(a),Fn(),it=A,Ze=w,rr.transition=m}else n.current=a;if(Ql&&(Ql=!1,Bi=n,Kl=d),m=n.pendingLanes,m===0&&(Ui=null),Dr(a.stateNode),kn(n,Qe()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Gl)throw Gl=!1,n=yh,yh=null,n;return(Kl&1)!==0&&n.tag!==0&&Co(),m=n.pendingLanes,(m&1)!==0?n===vh?Ta++:(Ta=0,vh=n):Ta=0,Oi(),null}function Co(){if(Bi!==null){var n=Ai(Kl),i=rr.transition,a=Ze;try{if(rr.transition=null,Ze=16>n?16:n,Bi===null)var c=!1;else{if(n=Bi,Bi=null,Kl=0,(it&6)!==0)throw Error(t(331));var d=it;for(it|=4,xe=n.current;xe!==null;){var m=xe,w=m.child;if((xe.flags&16)!==0){var A=m.deletions;if(A!==null){for(var V=0;V<A.length;V++){var G=A[V];for(xe=G;xe!==null;){var ne=xe;switch(ne.tag){case 0:case 11:case 15:_a(8,ne,m)}var ae=ne.child;if(ae!==null)ae.return=ne,xe=ae;else for(;xe!==null;){ne=xe;var te=ne.sibling,ye=ne.return;if(Kp(ne),ne===G){xe=null;break}if(te!==null){te.return=ye,xe=te;break}xe=ye}}}var Ie=m.alternate;if(Ie!==null){var Ce=Ie.child;if(Ce!==null){Ie.child=null;do{var Dt=Ce.sibling;Ce.sibling=null,Ce=Dt}while(Ce!==null)}}xe=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,xe=w;else e:for(;xe!==null;){if(m=xe,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:_a(9,m,m.return)}var $=m.sibling;if($!==null){$.return=m.return,xe=$;break e}xe=m.return}}var b=n.current;for(xe=b;xe!==null;){w=xe;var H=w.child;if((w.subtreeFlags&2064)!==0&&H!==null)H.return=w,xe=H;else e:for(w=b;xe!==null;){if(A=xe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Hl(9,A)}}catch(Ae){Nt(A,A.return,Ae)}if(A===w){xe=null;break e}var ue=A.sibling;if(ue!==null){ue.return=A.return,xe=ue;break e}xe=A.return}}if(it=d,Oi(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(lt,n)}catch{}c=!0}return c}finally{Ze=a,rr.transition=i}}return!1}function hm(n,i,a){i=To(a,i),i=Pp(n,i,1),n=Fi(n,i,1),i=_n(),n!==null&&(Ci(n,1,i),kn(n,i))}function Nt(n,i,a){if(n.tag===3)hm(n,n,a);else for(;i!==null;){if(i.tag===3){hm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ui===null||!Ui.has(c))){n=To(a,n),n=kp(i,n,1),i=Fi(i,n,1),n=_n(),i!==null&&(Ci(i,1,n),kn(i,n));break}}i=i.return}}function nw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=_n(),n.pingedLanes|=n.suspendedLanes&a,Qt===n&&(nn&a)===a&&(zt===4||zt===3&&(nn&130023424)===nn&&500>Qe()-gh?ks(n,0):mh|=a),kn(n,i)}function dm(n,i){i===0&&((n.mode&1)===0?i=1:(i=Qs,Qs<<=1,(Qs&130023424)===0&&(Qs=4194304)));var a=_n();n=si(n,i),n!==null&&(Ci(n,i,a),kn(n,a))}function rw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),dm(n,a)}function iw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),dm(n,a)}var fm;fm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Cn.current)An=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return An=!1,q_(n,i,a);An=(n.flags&131072)!==0}else An=!1,_t&&(i.flags&1048576)!==0&&Wf(i,Rl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;zl(n,i),n=i.pendingProps;var d=po(i,un.current);wo(i,a),d=Gc(null,i,c,n,d,a);var m=Qc();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Rn(c)?(m=!0,xl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Uc(i),d.updater=Ul,i.stateNode=d,d._reactInternals=i,eh(i,c,n,a),i=ih(null,i,c,!0,m,a)):(i.tag=0,_t&&m&&kc(i),vn(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(zl(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=ow(c),n=_r(c,n),d){case 0:i=rh(null,i,c,n,a);break e;case 1:i=jp(null,i,c,n,a);break e;case 11:i=Lp(null,i,c,n,a);break e;case 14:i=bp(null,i,c,_r(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:_r(c,d),rh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:_r(c,d),jp(n,i,c,d,a);case 3:e:{if(Up(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,tp(n,i),Vl(i,c,null,a);var w=i.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=To(Error(t(423)),i),i=Bp(n,i,c,a,d);break e}else if(c!==d){d=To(Error(t(424)),i),i=Bp(n,i,c,a,d);break e}else for(Hn=Vi(i.stateNode.containerInfo.firstChild),$n=i,_t=!0,vr=null,a=Zf(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(yo(),c===d){i=ai(n,i,a);break e}vn(n,i,c,a)}i=i.child}return i;case 5:return ip(i),n===null&&Vc(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,xc(c,d)?w=null:m!==null&&xc(c,m)&&(i.flags|=32),Fp(n,i),vn(n,i,w,a),i.child;case 6:return n===null&&Vc(i),null;case 13:return zp(n,i,a);case 4:return Bc(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=vo(i,null,c,a):vn(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:_r(c,d),Lp(n,i,c,d,a);case 7:return vn(n,i,i.pendingProps,a),i.child;case 8:return vn(n,i,i.pendingProps.children,a),i.child;case 12:return vn(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,w=d.value,mt(kl,c._currentValue),c._currentValue=w,m!==null)if(yr(m.value,w)){if(m.children===d.children&&!Cn.current){i=ai(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var A=m.dependencies;if(A!==null){w=m.child;for(var V=A.firstContext;V!==null;){if(V.context===c){if(m.tag===1){V=oi(-1,a&-a),V.tag=2;var G=m.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?V.next=V:(V.next=ne.next,ne.next=V),G.pending=V}}m.lanes|=a,V=m.alternate,V!==null&&(V.lanes|=a),Fc(m.return,a,i),A.lanes|=a;break}V=V.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Fc(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}vn(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,wo(i,a),d=tr(d),c=c(d),i.flags|=1,vn(n,i,c,a),i.child;case 14:return c=i.type,d=_r(c,i.pendingProps),d=_r(c.type,d),bp(n,i,c,d,a);case 15:return Op(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:_r(c,d),zl(n,i),i.tag=1,Rn(c)?(n=!0,xl(i)):n=!1,wo(i,a),Rp(i,c,d),eh(i,c,d,a),ih(null,i,c,!0,n,a);case 19:return Hp(n,i,a);case 22:return Mp(n,i,a)}throw Error(t(156,i.tag))};function pm(n,i){return ct(n,i)}function sw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,i,a,c){return new sw(n,i,a,c)}function xh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ow(n){if(typeof n=="function")return xh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===st)return 14}return 2}function Hi(n,i){var a=n.alternate;return a===null?(a=ir(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Zl(n,i,a,c,d,m){var w=2;if(c=n,typeof n=="function")xh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case S:return Ds(a.children,d,m,i);case x:w=8,d|=8;break;case R:return n=ir(12,a,i,d|2),n.elementType=R,n.lanes=m,n;case P:return n=ir(13,a,i,d),n.elementType=P,n.lanes=m,n;case $e:return n=ir(19,a,i,d),n.elementType=$e,n.lanes=m,n;case Je:return eu(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:w=10;break e;case L:w=9;break e;case O:w=11;break e;case st:w=14;break e;case Tt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=ir(w,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function Ds(n,i,a,c){return n=ir(7,n,c,i),n.lanes=a,n}function eu(n,i,a,c){return n=ir(22,n,c,i),n.elementType=Je,n.lanes=a,n.stateNode={isHidden:!1},n}function Ih(n,i,a){return n=ir(6,n,null,i),n.lanes=a,n}function Ch(n,i,a){return i=ir(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function aw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rh(n,i,a,c,d,m,w,A,V){return n=new aw(n,i,a,A,V),i===1?(i=1,m===!0&&(i|=8)):i=0,m=ir(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(m),n}function lw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Me,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function mm(n){if(!n)return bi;n=n._reactInternals;e:{if(_e(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Rn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Rn(a))return $f(n,a,i)}return i}function gm(n,i,a,c,d,m,w,A,V){return n=Rh(a,c,!0,n,d,m,w,A,V),n.context=mm(null),a=n.current,c=_n(),d=zi(a),m=oi(c,d),m.callback=i??null,Fi(a,m,d),n.current.lanes=d,Ci(n,d,c),kn(n,c),n}function tu(n,i,a,c){var d=i.current,m=_n(),w=zi(d);return a=mm(a),i.context===null?i.context=a:i.pendingContext=a,i=oi(m,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Fi(d,i,w),n!==null&&(Tr(n,d,w,m),Dl(n,d,w)),w}function nu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ym(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ah(n,i){ym(n,i),(n=n.alternate)&&ym(n,i)}function uw(){return null}var vm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ph(n){this._internalRoot=n}ru.prototype.render=Ph.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));tu(n,i,null,null)},ru.prototype.unmount=Ph.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ps(function(){tu(null,n,null,null)}),i[ti]=null}};function ru(n){this._internalRoot=n}ru.prototype.unstable_scheduleHydration=function(n){if(n){var i=rl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Lr.length&&i!==0&&i<Lr[a].priority;a++);Lr.splice(a,0,n),a===0&&ol(n)}};function kh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function _m(){}function cw(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var G=nu(w);m.call(G)}}var w=gm(i,c,n,0,null,!1,!1,"",_m);return n._reactRootContainer=w,n[ti]=w.current,oa(n.nodeType===8?n.parentNode:n),Ps(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var G=nu(V);A.call(G)}}var V=Rh(n,0,!1,null,null,!1,!1,"",_m);return n._reactRootContainer=V,n[ti]=V.current,oa(n.nodeType===8?n.parentNode:n),Ps(function(){tu(i,V,a,c)}),V}function su(n,i,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var A=d;d=function(){var V=nu(w);A.call(V)}}tu(i,w,n,d)}else w=cw(a,i,n,d,c);return nu(w)}tl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=xi(i.pendingLanes);a!==0&&(Ri(i,a|1),kn(i,Qe()),(it&6)===0&&(Io=Qe()+500,Oi()))}break;case 13:Ps(function(){var c=si(n,1);if(c!==null){var d=_n();Tr(c,n,1,d)}}),Ah(n,1)}},Ks=function(n){if(n.tag===13){var i=si(n,134217728);if(i!==null){var a=_n();Tr(i,n,134217728,a)}Ah(n,134217728)}},nl=function(n){if(n.tag===13){var i=zi(n),a=si(n,i);if(a!==null){var c=_n();Tr(a,n,i,c)}Ah(n,i)}},rl=function(){return Ze},il=function(n,i){var a=Ze;try{return Ze=n,i()}finally{Ze=a}},Kr=function(n,i,a){switch(i){case"input":if(us(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Tl(c);if(!d)throw Error(t(90));ft(c),us(c,d)}}}break;case"textarea":wn(n,a);break;case"select":i=a.value,i!=null&&lr(n,!!a.multiple,i,!1)}},Ar=Eh,Pr=Ps;var hw={usingClientEntryPoint:!1,Events:[ua,ho,Tl,Mn,ds,Eh]},Sa={findFiberByHostInstance:Es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dw={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ot(n),n===null?null:n.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||uw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{lt=ou.inject(dw),bt=ou}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hw,Nn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kh(i))throw Error(t(200));return lw(n,i,null,a)},Nn.createRoot=function(n,i){if(!kh(n))throw Error(t(299));var a=!1,c="",d=vm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Rh(n,1,!1,null,null,a,!1,c,d),n[ti]=i.current,oa(n.nodeType===8?n.parentNode:n),new Ph(i)},Nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ot(i),n=n===null?null:n.stateNode,n},Nn.flushSync=function(n){return Ps(n)},Nn.hydrate=function(n,i,a){if(!iu(i))throw Error(t(200));return su(null,n,i,!0,a)},Nn.hydrateRoot=function(n,i,a){if(!kh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=vm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=gm(i,null,n,1,a??null,d,!1,m,w),n[ti]=i.current,oa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new ru(i)},Nn.render=function(n,i,a){if(!iu(i))throw Error(t(200));return su(null,n,i,!1,a)},Nn.unmountComponentAtNode=function(n){if(!iu(n))throw Error(t(40));return n._reactRootContainer?(Ps(function(){su(null,null,n,!1,function(){n._reactRootContainer=null,n[ti]=null})}),!0):!1},Nn.unstable_batchedUpdates=Eh,Nn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return su(n,i,a,!1,c)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Rm;function ey(){if(Rm)return Vh.exports;Rm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vh.exports=ww(),Vh.exports}var Am;function Ew(){if(Am)return au;Am=1;var r=ey();return au.createRoot=r.createRoot,au.hydrateRoot=r.hydrateRoot,au}var Tw=Ew();const Sw=wd(Tw);var ty=ey();const xw=wd(ty),Iw=Jg({__proto__:null,default:xw},[ty]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wt(){return wt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},wt.apply(this,arguments)}var jt;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(jt||(jt={}));const Pm="popstate";function Cw(r){r===void 0&&(r={});function e(s,o){let{pathname:u,search:h,hash:f}=s.location;return Ma("",{pathname:u,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:js(o)}return Aw(e,t,null,r)}function Ge(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Lo(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Rw(){return Math.random().toString(36).substr(2,8)}function km(r,e){return{usr:r.state,key:r.key,idx:e}}function Ma(r,e,t,s){return t===void 0&&(t=null),wt({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ss(e):e,{state:t,key:e&&e.key||s||Rw()})}function js(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ss(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function Aw(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,f=jt.Pop,g=null,v=_();v==null&&(v=0,h.replaceState(wt({},h.state,{idx:v}),""));function _(){return(h.state||{idx:null}).idx}function E(){f=jt.Pop;let q=_(),me=q==null?null:q-v;v=q,g&&g({action:f,location:z.location,delta:me})}function I(q,me){f=jt.Push;let ie=Ma(z.location,q,me);v=_()+1;let pe=km(ie,v),ge=z.createHref(ie);try{h.pushState(pe,"",ge)}catch(Oe){if(Oe instanceof DOMException&&Oe.name==="DataCloneError")throw Oe;o.location.assign(ge)}u&&g&&g({action:f,location:z.location,delta:1})}function C(q,me){f=jt.Replace;let ie=Ma(z.location,q,me);v=_();let pe=km(ie,v),ge=z.createHref(ie);h.replaceState(pe,"",ge),u&&g&&g({action:f,location:z.location,delta:0})}function F(q){let me=o.location.origin!=="null"?o.location.origin:o.location.href,ie=typeof q=="string"?q:js(q);return ie=ie.replace(/ $/,"%20"),Ge(me,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,me)}let z={get action(){return f},get location(){return r(o,h)},listen(q){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Pm,E),g=q,()=>{o.removeEventListener(Pm,E),g=null}},createHref(q){return e(o,q)},createURL:F,encodeLocation(q){let me=F(q);return{pathname:me.pathname,search:me.search,hash:me.hash}},push:I,replace:C,go(q){return h.go(q)}};return z}var dt;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(dt||(dt={}));const Pw=new Set(["lazy","caseSensitive","path","id","index","children"]);function kw(r){return r.index===!0}function wu(r,e,t,s){return t===void 0&&(t=[]),s===void 0&&(s={}),r.map((o,u)=>{let h=[...t,String(u)],f=typeof o.id=="string"?o.id:h.join("-");if(Ge(o.index!==!0||!o.children,"Cannot specify children on an index route"),Ge(!s[f],'Found a route id collision on id "'+f+`".  Route id's must be globally unique within Data Router usages`),kw(o)){let g=wt({},o,e(o),{id:f});return s[f]=g,g}else{let g=wt({},o,e(o),{id:f,children:void 0});return s[f]=g,o.children&&(g.children=wu(o.children,e,h,s)),g}})}function Ls(r,e,t){return t===void 0&&(t="/"),fu(r,e,t,!1)}function fu(r,e,t,s){let o=typeof e=="string"?ss(e):e,u=hi(o.pathname||"/",t);if(u==null)return null;let h=ny(r);Dw(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let v=$w(u);f=Bw(h[g],v,s)}return f}function Nw(r,e){let{route:t,pathname:s,params:o}=r;return{id:t.id,pathname:s,params:o,data:e[t.id],handle:t.handle}}function ny(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(u,h,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Ge(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let v=ui([s,g.relativePath]),_=t.concat(g);u.children&&u.children.length>0&&(Ge(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),ny(u.children,e,_,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:jw(v,u.index),routesMeta:_})};return r.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))o(u,h);else for(let g of ry(u.path))o(u,h,g)}),e}function ry(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=ry(s.join("/")),f=[];return f.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function Dw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Uw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Vw=/^:[\w-]+$/,Lw=3,bw=2,Ow=1,Mw=10,Fw=-2,Nm=r=>r==="*";function jw(r,e){let t=r.split("/"),s=t.length;return t.some(Nm)&&(s+=Fw),e&&(s+=bw),t.filter(o=>!Nm(o)).reduce((o,u)=>o+(Vw.test(u)?Lw:u===""?Ow:Mw),s)}function Uw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Bw(r,e,t){t===void 0&&(t=!1);let{routesMeta:s}=r,o={},u="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],v=f===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",E=Eu({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},_),I=g.route;if(!E&&v&&t&&!s[s.length-1].route.index&&(E=Eu({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:ui([u,E.pathname]),pathnameBase:Ww(ui([u,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(u=ui([u,E.pathnameBase]))}return h}function Eu(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=zw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,_,E)=>{let{paramName:I,isOptional:C}=_;if(I==="*"){let z=f[E]||"";h=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const F=f[E];return C&&!F?v[I]=void 0:v[I]=(F||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:h,pattern:r}}function zw(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Lo(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function $w(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lo(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function hi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function Hw(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?ss(r):r;return{pathname:t?t.startsWith("/")?t:qw(t,e):e,search:Gw(s),hash:Qw(o)}}function qw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Oh(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iy(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Td(r,e){let t=iy(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Sd(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=ss(r):(o=wt({},r),Ge(!o.pathname||!o.pathname.includes("?"),Oh("?","pathname","search",o)),Ge(!o.pathname||!o.pathname.includes("#"),Oh("#","pathname","hash",o)),Ge(!o.search||!o.search.includes("#"),Oh("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),E-=1;o.pathname=I.join("/")}f=E>=0?e[E]:"/"}let g=Hw(o,f),v=h&&h!=="/"&&h.endsWith("/"),_=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||_)&&(g.pathname+="/"),g}const ui=r=>r.join("/").replace(/\/\/+/g,"/"),Ww=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Gw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Qw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;class Tu{constructor(e,t,s,o){o===void 0&&(o=!1),this.status=e,this.statusText=t||"",this.internal=o,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}}function Fa(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const sy=["post","put","patch","delete"],Kw=new Set(sy),Yw=["get",...sy],Xw=new Set(Yw),Jw=new Set([301,302,303,307,308]),Zw=new Set([307,308]),Mh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},e0={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ia={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,t0=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),oy="remix-router-transitions";function n0(r){const e=r.window?r.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",s=!t;Ge(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(r.mapRouteProperties)o=r.mapRouteProperties;else if(r.detectErrorBoundary){let D=r.detectErrorBoundary;o=M=>({hasErrorBoundary:D(M)})}else o=t0;let u={},h=wu(r.routes,o,void 0,u),f,g=r.basename||"/",v=r.dataStrategy||o0,_=r.patchRoutesOnNavigation,E=wt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},r.future),I=null,C=new Set,F=null,z=null,q=null,me=r.hydrationData!=null,ie=Ls(h,r.history.location,g),pe=!1,ge=null;if(ie==null&&!_){let D=Dn(404,{pathname:r.history.location.pathname}),{matches:M,route:W}=zm(h);ie=M,ge={[W.id]:D}}ie&&!r.hydrationData&&Pr(ie,h,r.history.location.pathname).active&&(ie=null);let Oe;if(ie)if(ie.some(D=>D.route.lazy))Oe=!1;else if(!ie.some(D=>D.route.loader))Oe=!0;else if(E.v7_partialHydration){let D=r.hydrationData?r.hydrationData.loaderData:null,M=r.hydrationData?r.hydrationData.errors:null;if(M){let W=ie.findIndex(ee=>M[ee.route.id]!==void 0);Oe=ie.slice(0,W+1).every(ee=>!Qh(ee.route,D,M))}else Oe=ie.every(W=>!Qh(W.route,D,M))}else Oe=r.hydrationData!=null;else if(Oe=!1,ie=[],E.v7_partialHydration){let D=Pr(null,h,r.history.location.pathname);D.active&&D.matches&&(pe=!0,ie=D.matches)}let Me,S={historyAction:r.history.action,location:r.history.location,matches:ie,initialized:Oe,navigation:Mh,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||ge,fetchers:new Map,blockers:new Map},x=jt.Pop,R=!1,k,L=!1,O=new Map,P=null,$e=!1,st=!1,Tt=[],Je=new Set,se=new Map,Re=0,le=-1,j=new Map,J=new Set,U=new Map,Y=new Map,K=new Set,oe=new Map,ce=new Map,fe;function Pe(){if(I=r.history.listen(D=>{let{action:M,location:W,delta:ee}=D;if(fe){fe(),fe=void 0;return}Lo(ce.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=Kr({currentLocation:S.location,nextLocation:W,historyAction:M});if(de&&ee!=null){let Te=new Promise(Ne=>{fe=Ne});r.history.go(ee*-1),hr(de,{state:"blocked",location:W,proceed(){hr(de,{state:"proceeding",proceed:void 0,reset:void 0,location:W}),Te.then(()=>r.history.go(ee))},reset(){let Ne=new Map(S.blockers);Ne.set(de,Ia),ft({blockers:Ne})}});return}return On(M,W)}),t){w0(e,O);let D=()=>E0(e,O);e.addEventListener("pagehide",D),P=()=>e.removeEventListener("pagehide",D)}return S.initialized||On(jt.Pop,S.location,{initialHydration:!0}),Me}function He(){I&&I(),P&&P(),C.clear(),k&&k.abort(),S.fetchers.forEach((D,M)=>Qn(M)),S.blockers.forEach((D,M)=>Rr(M))}function At(D){return C.add(D),()=>C.delete(D)}function ft(D,M){M===void 0&&(M={}),S=wt({},S,D);let W=[],ee=[];E.v7_fetcherPersist&&S.fetchers.forEach((de,Te)=>{de.state==="idle"&&(K.has(Te)?ee.push(Te):W.push(Te))}),K.forEach(de=>{!S.fetchers.has(de)&&!se.has(de)&&ee.push(de)}),[...C].forEach(de=>de(S,{deletedFetchers:ee,viewTransitionOpts:M.viewTransitionOpts,flushSync:M.flushSync===!0})),E.v7_fetcherPersist?(W.forEach(de=>S.fetchers.delete(de)),ee.forEach(de=>Qn(de))):ee.forEach(de=>K.delete(de))}function Lt(D,M,W){var ee,de;let{flushSync:Te}=W===void 0?{}:W,Ne=S.actionData!=null&&S.navigation.formMethod!=null&&Sr(S.navigation.formMethod)&&S.navigation.state==="loading"&&((ee=D.state)==null?void 0:ee._isRedirect)!==!0,Se;M.actionData?Object.keys(M.actionData).length>0?Se=M.actionData:Se=null:Ne?Se=S.actionData:Se=null;let Ee=M.loaderData?Um(S.loaderData,M.loaderData,M.matches||[],M.errors):S.loaderData,ve=S.blockers;ve.size>0&&(ve=new Map(ve),ve.forEach((Ue,kt)=>ve.set(kt,Ia)));let _e=R===!0||S.navigation.formMethod!=null&&Sr(S.navigation.formMethod)&&((de=D.state)==null?void 0:de._isRedirect)!==!0;f&&(h=f,f=void 0),$e||x===jt.Pop||(x===jt.Push?r.history.push(D,D.state):x===jt.Replace&&r.history.replace(D,D.state));let be;if(x===jt.Pop){let Ue=O.get(S.location.pathname);Ue&&Ue.has(D.pathname)?be={currentLocation:S.location,nextLocation:D}:O.has(D.pathname)&&(be={currentLocation:D,nextLocation:S.location})}else if(L){let Ue=O.get(S.location.pathname);Ue?Ue.add(D.pathname):(Ue=new Set([D.pathname]),O.set(S.location.pathname,Ue)),be={currentLocation:S.location,nextLocation:D}}ft(wt({},M,{actionData:Se,loaderData:Ee,historyAction:x,location:D,initialized:!0,navigation:Mh,revalidation:"idle",restoreScrollPosition:Ar(D,M.matches||S.matches),preventScrollReset:_e,blockers:ve}),{viewTransitionOpts:be,flushSync:Te===!0}),x=jt.Pop,R=!1,L=!1,$e=!1,st=!1,Tt=[]}async function Cr(D,M){if(typeof D=="number"){r.history.go(D);return}let W=Gh(S.location,S.matches,g,E.v7_prependBasename,D,E.v7_relativeSplatPath,M?.fromRouteId,M?.relative),{path:ee,submission:de,error:Te}=Dm(E.v7_normalizeFormMethod,!1,W,M),Ne=S.location,Se=Ma(S.location,ee,M&&M.state);Se=wt({},Se,r.history.encodeLocation(Se));let Ee=M&&M.replace!=null?M.replace:void 0,ve=jt.Push;Ee===!0?ve=jt.Replace:Ee===!1||de!=null&&Sr(de.formMethod)&&de.formAction===S.location.pathname+S.location.search&&(ve=jt.Replace);let _e=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,be=(M&&M.flushSync)===!0,Ue=Kr({currentLocation:Ne,nextLocation:Se,historyAction:ve});if(Ue){hr(Ue,{state:"blocked",location:Se,proceed(){hr(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:Se}),Cr(D,M)},reset(){let kt=new Map(S.blockers);kt.set(Ue,Ia),ft({blockers:kt})}});return}return await On(ve,Se,{submission:de,pendingError:Te,preventScrollReset:_e,replace:M&&M.replace,enableViewTransition:M&&M.viewTransition,flushSync:be})}function yi(){if(St(),ft({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){On(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}On(x||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:L===!0})}}async function On(D,M,W){k&&k.abort(),k=null,x=D,$e=(W&&W.startUninterruptedRevalidation)===!0,ds(S.location,S.matches),R=(W&&W.preventScrollReset)===!0,L=(W&&W.enableViewTransition)===!0;let ee=f||h,de=W&&W.overrideNavigation,Te=W!=null&&W.initialHydration&&S.matches&&S.matches.length>0&&!pe?S.matches:Ls(ee,M,g),Ne=(W&&W.flushSync)===!0;if(Te&&S.initialized&&!st&&d0(S.location,M)&&!(W&&W.submission&&Sr(W.submission.formMethod))){Lt(M,{matches:Te},{flushSync:Ne});return}let Se=Pr(Te,ee,M.pathname);if(Se.active&&Se.matches&&(Te=Se.matches),!Te){let{error:ot,notFoundMatches:qe,route:ct}=an(M.pathname);Lt(M,{matches:qe,loaderData:{},errors:{[ct.id]:ot}},{flushSync:Ne});return}k=new AbortController;let Ee=Ro(r.history,M,k.signal,W&&W.submission),ve;if(W&&W.pendingError)ve=[bs(Te).route.id,{type:dt.error,error:W.pendingError}];else if(W&&W.submission&&Sr(W.submission.formMethod)){let ot=await us(Ee,M,W.submission,Te,Se.active,{replace:W.replace,flushSync:Ne});if(ot.shortCircuited)return;if(ot.pendingActionResult){let[qe,ct]=ot.pendingActionResult;if(Wn(ct)&&Fa(ct.error)&&ct.error.status===404){k=null,Lt(M,{matches:ot.matches,loaderData:{},errors:{[qe]:ct.error}});return}}Te=ot.matches||Te,ve=ot.pendingActionResult,de=Fh(M,W.submission),Ne=!1,Se.active=!1,Ee=Ro(r.history,Ee.url,Ee.signal)}let{shortCircuited:_e,matches:be,loaderData:Ue,errors:kt}=await qs(Ee,M,Te,Se.active,de,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,Ne,ve);_e||(k=null,Lt(M,wt({matches:be||Te},Bm(ve),{loaderData:Ue,errors:kt})))}async function us(D,M,W,ee,de,Te){Te===void 0&&(Te={}),St();let Ne=v0(M,W);if(ft({navigation:Ne},{flushSync:Te.flushSync===!0}),de){let ve=await Sn(ee,M.pathname,D.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let _e=bs(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[_e,{type:dt.error,error:ve.error}]}}else if(ve.matches)ee=ve.matches;else{let{notFoundMatches:_e,error:be,route:Ue}=an(M.pathname);return{matches:_e,pendingActionResult:[Ue.id,{type:dt.error,error:be}]}}}let Se,Ee=Aa(ee,M);if(!Ee.route.action&&!Ee.route.lazy)Se={type:dt.error,error:Dn(405,{method:D.method,pathname:M.pathname,routeId:Ee.route.id})};else if(Se=(await ur("action",S,D,[Ee],ee,null))[Ee.route.id],D.signal.aborted)return{shortCircuited:!0};if(Os(Se)){let ve;return Te&&Te.replace!=null?ve=Te.replace:ve=Mm(Se.response.headers.get("Location"),new URL(D.url),g)===S.location.pathname+S.location.search,await wn(D,Se,!0,{submission:W,replace:ve}),{shortCircuited:!0}}if(Gi(Se))throw Dn(400,{type:"defer-action"});if(Wn(Se)){let ve=bs(ee,Ee.route.id);return(Te&&Te.replace)!==!0&&(x=jt.Push),{matches:ee,pendingActionResult:[ve.route.id,Se]}}return{matches:ee,pendingActionResult:[Ee.route.id,Se]}}async function qs(D,M,W,ee,de,Te,Ne,Se,Ee,ve,_e){let be=de||Fh(M,Te),Ue=Te||Ne||Hm(be),kt=!$e&&(!E.v7_partialHydration||!Ee);if(ee){if(kt){let lt=Gr(_e);ft(wt({navigation:be},lt!==void 0?{actionData:lt}:{}),{flushSync:ve})}let Ke=await Sn(W,M.pathname,D.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let lt=bs(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,loaderData:{},errors:{[lt]:Ke.error}}}else if(Ke.matches)W=Ke.matches;else{let{error:lt,notFoundMatches:bt,route:Dr}=an(M.pathname);return{matches:bt,loaderData:{},errors:{[Dr.id]:lt}}}}let ot=f||h,[qe,ct]=Lm(r.history,S,W,Ue,M,E.v7_partialHydration&&Ee===!0,E.v7_skipActionErrorRevalidation,st,Tt,Je,K,U,J,ot,g,_e);if(Tn(Ke=>!(W&&W.some(lt=>lt.route.id===Ke))||qe&&qe.some(lt=>lt.route.id===Ke)),le=++Re,qe.length===0&&ct.length===0){let Ke=wi();return Lt(M,wt({matches:W,loaderData:{},errors:_e&&Wn(_e[1])?{[_e[0]]:_e[1].error}:null},Bm(_e),Ke?{fetchers:new Map(S.fetchers)}:{}),{flushSync:ve}),{shortCircuited:!0}}if(kt){let Ke={};if(!ee){Ke.navigation=be;let lt=Gr(_e);lt!==void 0&&(Ke.actionData=lt)}ct.length>0&&(Ke.fetchers=ar(ct)),ft(Ke,{flushSync:ve})}ct.forEach(Ke=>{En(Ke.key),Ke.controller&&se.set(Ke.key,Ke.controller)});let Kn=()=>ct.forEach(Ke=>En(Ke.key));k&&k.signal.addEventListener("abort",Kn);let{loaderResults:kr,fetcherResults:Fn}=await Pt(S,W,qe,ct,D);if(D.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",Kn),ct.forEach(Ke=>se.delete(Ke.key));let Qe=lu(kr);if(Qe)return await wn(D,Qe.result,!0,{replace:Se}),{shortCircuited:!0};if(Qe=lu(Fn),Qe)return J.add(Qe.key),await wn(D,Qe.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:Si,errors:jn}=jm(S,W,kr,_e,ct,Fn,oe);oe.forEach((Ke,lt)=>{Ke.subscribe(bt=>{(bt||Ke.done)&&oe.delete(lt)})}),E.v7_partialHydration&&Ee&&S.errors&&(jn=wt({},S.errors,jn));let ln=wi(),Jt=Ei(le),Nr=ln||Jt||ct.length>0;return wt({matches:W,loaderData:Si,errors:jn},Nr?{fetchers:new Map(S.fetchers)}:{})}function Gr(D){if(D&&!Wn(D[1]))return{[D[0]]:D[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function ar(D){return D.forEach(M=>{let W=S.fetchers.get(M.key),ee=Ca(void 0,W?W.data:void 0);S.fetchers.set(M.key,ee)}),new Map(S.fetchers)}function lr(D,M,W,ee){if(s)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");En(D);let de=(ee&&ee.flushSync)===!0,Te=f||h,Ne=Gh(S.location,S.matches,g,E.v7_prependBasename,W,E.v7_relativeSplatPath,M,ee?.relative),Se=Ls(Te,Ne,g),Ee=Pr(Se,Te,Ne);if(Ee.active&&Ee.matches&&(Se=Ee.matches),!Se){gn(D,M,Dn(404,{pathname:Ne}),{flushSync:de});return}let{path:ve,submission:_e,error:be}=Dm(E.v7_normalizeFormMethod,!0,Ne,ee);if(be){gn(D,M,be,{flushSync:de});return}let Ue=Aa(Se,ve),kt=(ee&&ee.preventScrollReset)===!0;if(_e&&Sr(_e.formMethod)){cs(D,M,ve,Ue,Se,Ee.active,de,kt,_e);return}U.set(D,{routeId:M,path:ve}),vi(D,M,ve,Ue,Se,Ee.active,de,kt,_e)}async function cs(D,M,W,ee,de,Te,Ne,Se,Ee){St(),U.delete(D);function ve(Ye){if(!Ye.route.action&&!Ye.route.lazy){let Yn=Dn(405,{method:Ee.formMethod,pathname:W,routeId:M});return gn(D,M,Yn,{flushSync:Ne}),!0}return!1}if(!Te&&ve(ee))return;let _e=S.fetchers.get(D);qt(D,_0(Ee,_e),{flushSync:Ne});let be=new AbortController,Ue=Ro(r.history,W,be.signal,Ee);if(Te){let Ye=await Sn(de,new URL(Ue.url).pathname,Ue.signal,D);if(Ye.type==="aborted")return;if(Ye.type==="error"){gn(D,M,Ye.error,{flushSync:Ne});return}else if(Ye.matches){if(de=Ye.matches,ee=Aa(de,W),ve(ee))return}else{gn(D,M,Dn(404,{pathname:W}),{flushSync:Ne});return}}se.set(D,be);let kt=Re,qe=(await ur("action",S,Ue,[ee],de,D))[ee.route.id];if(Ue.signal.aborted){se.get(D)===be&&se.delete(D);return}if(E.v7_fetcherPersist&&K.has(D)){if(Os(qe)||Wn(qe)){qt(D,Wi(void 0));return}}else{if(Os(qe))if(se.delete(D),le>kt){qt(D,Wi(void 0));return}else return J.add(D),qt(D,Ca(Ee)),wn(Ue,qe,!1,{fetcherSubmission:Ee,preventScrollReset:Se});if(Wn(qe)){gn(D,M,qe.error);return}}if(Gi(qe))throw Dn(400,{type:"defer-action"});let ct=S.navigation.location||S.location,Kn=Ro(r.history,ct,be.signal),kr=f||h,Fn=S.navigation.state!=="idle"?Ls(kr,S.navigation.location,g):S.matches;Ge(Fn,"Didn't find any matches after fetcher action");let Qe=++Re;j.set(D,Qe);let Si=Ca(Ee,qe.data);S.fetchers.set(D,Si);let[jn,ln]=Lm(r.history,S,Fn,Ee,ct,!1,E.v7_skipActionErrorRevalidation,st,Tt,Je,K,U,J,kr,g,[ee.route.id,qe]);ln.filter(Ye=>Ye.key!==D).forEach(Ye=>{let Yn=Ye.key,ps=S.fetchers.get(Yn),Ws=Ca(void 0,ps?ps.data:void 0);S.fetchers.set(Yn,Ws),En(Yn),Ye.controller&&se.set(Yn,Ye.controller)}),ft({fetchers:new Map(S.fetchers)});let Jt=()=>ln.forEach(Ye=>En(Ye.key));be.signal.addEventListener("abort",Jt);let{loaderResults:Nr,fetcherResults:Ke}=await Pt(S,Fn,jn,ln,Kn);if(be.signal.aborted)return;be.signal.removeEventListener("abort",Jt),j.delete(D),se.delete(D),ln.forEach(Ye=>se.delete(Ye.key));let lt=lu(Nr);if(lt)return wn(Kn,lt.result,!1,{preventScrollReset:Se});if(lt=lu(Ke),lt)return J.add(lt.key),wn(Kn,lt.result,!1,{preventScrollReset:Se});let{loaderData:bt,errors:Dr}=jm(S,Fn,Nr,void 0,ln,Ke,oe);if(S.fetchers.has(D)){let Ye=Wi(qe.data);S.fetchers.set(D,Ye)}Ei(Qe),S.navigation.state==="loading"&&Qe>le?(Ge(x,"Expected pending action"),k&&k.abort(),Lt(S.navigation.location,{matches:Fn,loaderData:bt,errors:Dr,fetchers:new Map(S.fetchers)})):(ft({errors:Dr,loaderData:Um(S.loaderData,bt,Fn,Dr),fetchers:new Map(S.fetchers)}),st=!1)}async function vi(D,M,W,ee,de,Te,Ne,Se,Ee){let ve=S.fetchers.get(D);qt(D,Ca(Ee,ve?ve.data:void 0),{flushSync:Ne});let _e=new AbortController,be=Ro(r.history,W,_e.signal);if(Te){let qe=await Sn(de,new URL(be.url).pathname,be.signal,D);if(qe.type==="aborted")return;if(qe.type==="error"){gn(D,M,qe.error,{flushSync:Ne});return}else if(qe.matches)de=qe.matches,ee=Aa(de,W);else{gn(D,M,Dn(404,{pathname:W}),{flushSync:Ne});return}}se.set(D,_e);let Ue=Re,ot=(await ur("loader",S,be,[ee],de,D))[ee.route.id];if(Gi(ot)&&(ot=await Id(ot,be.signal,!0)||ot),se.get(D)===_e&&se.delete(D),!be.signal.aborted){if(K.has(D)){qt(D,Wi(void 0));return}if(Os(ot))if(le>Ue){qt(D,Wi(void 0));return}else{J.add(D),await wn(be,ot,!1,{preventScrollReset:Se});return}if(Wn(ot)){gn(D,M,ot.error);return}Ge(!Gi(ot),"Unhandled fetcher deferred data"),qt(D,Wi(ot.data))}}async function wn(D,M,W,ee){let{submission:de,fetcherSubmission:Te,preventScrollReset:Ne,replace:Se}=ee===void 0?{}:ee;M.response.headers.has("X-Remix-Revalidate")&&(st=!0);let Ee=M.response.headers.get("Location");Ge(Ee,"Expected a Location header on the redirect Response"),Ee=Mm(Ee,new URL(D.url),g);let ve=Ma(S.location,Ee,{_isRedirect:!0});if(t){let qe=!1;if(M.response.headers.has("X-Remix-Reload-Document"))qe=!0;else if(xd.test(Ee)){const ct=r.history.createURL(Ee);qe=ct.origin!==e.location.origin||hi(ct.pathname,g)==null}if(qe){Se?e.location.replace(Ee):e.location.assign(Ee);return}}k=null;let _e=Se===!0||M.response.headers.has("X-Remix-Replace")?jt.Replace:jt.Push,{formMethod:be,formAction:Ue,formEncType:kt}=S.navigation;!de&&!Te&&be&&Ue&&kt&&(de=Hm(S.navigation));let ot=de||Te;if(Zw.has(M.response.status)&&ot&&Sr(ot.formMethod))await On(_e,ve,{submission:wt({},ot,{formAction:Ee}),preventScrollReset:Ne||R,enableViewTransition:W?L:void 0});else{let qe=Fh(ve,de);await On(_e,ve,{overrideNavigation:qe,fetcherSubmission:Te,preventScrollReset:Ne||R,enableViewTransition:W?L:void 0})}}async function ur(D,M,W,ee,de,Te){let Ne,Se={};try{Ne=await a0(v,D,M,W,ee,de,Te,u,o)}catch(Ee){return ee.forEach(ve=>{Se[ve.route.id]={type:dt.error,error:Ee}}),Se}for(let[Ee,ve]of Object.entries(Ne))if(f0(ve)){let _e=ve.result;Se[Ee]={type:dt.redirect,response:c0(_e,W,Ee,de,g,E.v7_relativeSplatPath)}}else Se[Ee]=await u0(ve);return Se}async function Pt(D,M,W,ee,de){let Te=D.matches,Ne=ur("loader",D,de,W,M,null),Se=Promise.all(ee.map(async _e=>{if(_e.matches&&_e.match&&_e.controller){let Ue=(await ur("loader",D,Ro(r.history,_e.path,_e.controller.signal),[_e.match],_e.matches,_e.key))[_e.match.route.id];return{[_e.key]:Ue}}else return Promise.resolve({[_e.key]:{type:dt.error,error:Dn(404,{pathname:_e.path})}})})),Ee=await Ne,ve=(await Se).reduce((_e,be)=>Object.assign(_e,be),{});return await Promise.all([g0(M,Ee,de.signal,Te,D.loaderData),y0(M,ve,ee)]),{loaderResults:Ee,fetcherResults:ve}}function St(){st=!0,Tt.push(...Tn()),U.forEach((D,M)=>{se.has(M)&&Je.add(M),En(M)})}function qt(D,M,W){W===void 0&&(W={}),S.fetchers.set(D,M),ft({fetchers:new Map(S.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function gn(D,M,W,ee){ee===void 0&&(ee={});let de=bs(S.matches,M);Qn(D),ft({errors:{[de.route.id]:W},fetchers:new Map(S.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function cr(D){return Y.set(D,(Y.get(D)||0)+1),K.has(D)&&K.delete(D),S.fetchers.get(D)||e0}function Qn(D){let M=S.fetchers.get(D);se.has(D)&&!(M&&M.state==="loading"&&j.has(D))&&En(D),U.delete(D),j.delete(D),J.delete(D),E.v7_fetcherPersist&&K.delete(D),Je.delete(D),S.fetchers.delete(D)}function Qr(D){let M=(Y.get(D)||0)-1;M<=0?(Y.delete(D),K.add(D),E.v7_fetcherPersist||Qn(D)):Y.set(D,M),ft({fetchers:new Map(S.fetchers)})}function En(D){let M=se.get(D);M&&(M.abort(),se.delete(D))}function _i(D){for(let M of D){let W=cr(M),ee=Wi(W.data);S.fetchers.set(M,ee)}}function wi(){let D=[],M=!1;for(let W of J){let ee=S.fetchers.get(W);Ge(ee,"Expected fetcher: "+W),ee.state==="loading"&&(J.delete(W),D.push(W),M=!0)}return _i(D),M}function Ei(D){let M=[];for(let[W,ee]of j)if(ee<D){let de=S.fetchers.get(W);Ge(de,"Expected fetcher: "+W),de.state==="loading"&&(En(W),j.delete(W),M.push(W))}return _i(M),M.length>0}function hs(D,M){let W=S.blockers.get(D)||Ia;return ce.get(D)!==M&&ce.set(D,M),W}function Rr(D){S.blockers.delete(D),ce.delete(D)}function hr(D,M){let W=S.blockers.get(D)||Ia;Ge(W.state==="unblocked"&&M.state==="blocked"||W.state==="blocked"&&M.state==="blocked"||W.state==="blocked"&&M.state==="proceeding"||W.state==="blocked"&&M.state==="unblocked"||W.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+W.state+" -> "+M.state);let ee=new Map(S.blockers);ee.set(D,M),ft({blockers:ee})}function Kr(D){let{currentLocation:M,nextLocation:W,historyAction:ee}=D;if(ce.size===0)return;ce.size>1&&Lo(!1,"A router only supports one blocker at a time");let de=Array.from(ce.entries()),[Te,Ne]=de[de.length-1],Se=S.blockers.get(Te);if(!(Se&&Se.state==="proceeding")&&Ne({currentLocation:M,nextLocation:W,historyAction:ee}))return Te}function an(D){let M=Dn(404,{pathname:D}),W=f||h,{matches:ee,route:de}=zm(W);return Tn(),{notFoundMatches:ee,route:de,error:M}}function Tn(D){let M=[];return oe.forEach((W,ee)=>{(!D||D(ee))&&(W.cancel(),M.push(ee),oe.delete(ee))}),M}function Ti(D,M,W){if(F=D,q=M,z=W||null,!me&&S.navigation===Mh){me=!0;let ee=Ar(S.location,S.matches);ee!=null&&ft({restoreScrollPosition:ee})}return()=>{F=null,q=null,z=null}}function Mn(D,M){return z&&z(D,M.map(ee=>Nw(ee,S.loaderData)))||D.key}function ds(D,M){if(F&&q){let W=Mn(D,M);F[W]=q()}}function Ar(D,M){if(F){let W=Mn(D,M),ee=F[W];if(typeof ee=="number")return ee}return null}function Pr(D,M,W){if(_)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:fu(M,W,g,!0)}}else return{active:!0,matches:fu(M,W,g,!0)||[]};return{active:!1,matches:null}}async function Sn(D,M,W,ee){if(!_)return{type:"success",matches:D};let de=D;for(;;){let Te=f==null,Ne=f||h,Se=u;try{await _({signal:W,path:M,matches:de,fetcherKey:ee,patch:(_e,be)=>{W.aborted||Om(_e,be,Ne,Se,o)}})}catch(_e){return{type:"error",error:_e,partialMatches:de}}finally{Te&&!W.aborted&&(h=[...h])}if(W.aborted)return{type:"aborted"};let Ee=Ls(Ne,M,g);if(Ee)return{type:"success",matches:Ee};let ve=fu(Ne,M,g,!0);if(!ve||de.length===ve.length&&de.every((_e,be)=>_e.route.id===ve[be].route.id))return{type:"success",matches:null};de=ve}}function fs(D){u={},f=wu(D,o,void 0,u)}function xt(D,M){let W=f==null;Om(D,M,f||h,u,o),W&&(h=[...h],ft({}))}return Me={get basename(){return g},get future(){return E},get state(){return S},get routes(){return h},get window(){return e},initialize:Pe,subscribe:At,enableScrollRestoration:Ti,navigate:Cr,fetch:lr,revalidate:yi,createHref:D=>r.history.createHref(D),encodeLocation:D=>r.history.encodeLocation(D),getFetcher:cr,deleteFetcher:Qr,dispose:He,getBlocker:hs,deleteBlocker:Rr,patchRoutes:xt,_internalFetchControllers:se,_internalActiveDeferreds:oe,_internalSetRoutes:fs},Me}function r0(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function Gh(r,e,t,s,o,u,h,f){let g,v;if(h){g=[];for(let E of e)if(g.push(E),E.route.id===h){v=E;break}}else g=e,v=e[e.length-1];let _=Sd(o||".",Td(g,u),hi(r.pathname,t)||r.pathname,f==="path");if(o==null&&(_.search=r.search,_.hash=r.hash),(o==null||o===""||o===".")&&v){let E=Cd(_.search);if(v.route.index&&!E)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!v.route.index&&E){let I=new URLSearchParams(_.search),C=I.getAll("index");I.delete("index"),C.filter(z=>z).forEach(z=>I.append("index",z));let F=I.toString();_.search=F?"?"+F:""}}return s&&t!=="/"&&(_.pathname=_.pathname==="/"?t:ui([t,_.pathname])),js(_)}function Dm(r,e,t,s){if(!s||!r0(s))return{path:t};if(s.formMethod&&!m0(s.formMethod))return{path:t,error:Dn(405,{method:s.formMethod})};let o=()=>({path:t,error:Dn(400,{type:"invalid-body"})}),u=s.formMethod||"get",h=r?u.toUpperCase():u.toLowerCase(),f=uy(t);if(s.body!==void 0){if(s.formEncType==="text/plain"){if(!Sr(h))return o();let I=typeof s.body=="string"?s.body:s.body instanceof FormData||s.body instanceof URLSearchParams?Array.from(s.body.entries()).reduce((C,F)=>{let[z,q]=F;return""+C+z+"="+q+`
`},""):String(s.body);return{path:t,submission:{formMethod:h,formAction:f,formEncType:s.formEncType,formData:void 0,json:void 0,text:I}}}else if(s.formEncType==="application/json"){if(!Sr(h))return o();try{let I=typeof s.body=="string"?JSON.parse(s.body):s.body;return{path:t,submission:{formMethod:h,formAction:f,formEncType:s.formEncType,formData:void 0,json:I,text:void 0}}}catch{return o()}}}Ge(typeof FormData=="function","FormData is not available in this environment");let g,v;if(s.formData)g=Kh(s.formData),v=s.formData;else if(s.body instanceof FormData)g=Kh(s.body),v=s.body;else if(s.body instanceof URLSearchParams)g=s.body,v=Fm(g);else if(s.body==null)g=new URLSearchParams,v=new FormData;else try{g=new URLSearchParams(s.body),v=Fm(g)}catch{return o()}let _={formMethod:h,formAction:f,formEncType:s&&s.formEncType||"application/x-www-form-urlencoded",formData:v,json:void 0,text:void 0};if(Sr(_.formMethod))return{path:t,submission:_};let E=ss(t);return e&&E.search&&Cd(E.search)&&g.append("index",""),E.search="?"+g,{path:js(E),submission:_}}function Vm(r,e,t){t===void 0&&(t=!1);let s=r.findIndex(o=>o.route.id===e);return s>=0?r.slice(0,t?s+1:s):r}function Lm(r,e,t,s,o,u,h,f,g,v,_,E,I,C,F,z){let q=z?Wn(z[1])?z[1].error:z[1].data:void 0,me=r.createURL(e.location),ie=r.createURL(o),pe=t;u&&e.errors?pe=Vm(t,Object.keys(e.errors)[0],!0):z&&Wn(z[1])&&(pe=Vm(t,z[0]));let ge=z?z[1].statusCode:void 0,Oe=h&&ge&&ge>=400,Me=pe.filter((x,R)=>{let{route:k}=x;if(k.lazy)return!0;if(k.loader==null)return!1;if(u)return Qh(k,e.loaderData,e.errors);if(i0(e.loaderData,e.matches[R],x)||g.some(P=>P===x.route.id))return!0;let L=e.matches[R],O=x;return bm(x,wt({currentUrl:me,currentParams:L.params,nextUrl:ie,nextParams:O.params},s,{actionResult:q,actionStatus:ge,defaultShouldRevalidate:Oe?!1:f||me.pathname+me.search===ie.pathname+ie.search||me.search!==ie.search||ay(L,O)}))}),S=[];return E.forEach((x,R)=>{if(u||!t.some($e=>$e.route.id===x.routeId)||_.has(R))return;let k=Ls(C,x.path,F);if(!k){S.push({key:R,routeId:x.routeId,path:x.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(R),O=Aa(k,x.path),P=!1;I.has(R)?P=!1:v.has(R)?(v.delete(R),P=!0):L&&L.state!=="idle"&&L.data===void 0?P=f:P=bm(O,wt({currentUrl:me,currentParams:e.matches[e.matches.length-1].params,nextUrl:ie,nextParams:t[t.length-1].params},s,{actionResult:q,actionStatus:ge,defaultShouldRevalidate:Oe?!1:f})),P&&S.push({key:R,routeId:x.routeId,path:x.path,matches:k,match:O,controller:new AbortController})}),[Me,S]}function Qh(r,e,t){if(r.lazy)return!0;if(!r.loader)return!1;let s=e!=null&&e[r.id]!==void 0,o=t!=null&&t[r.id]!==void 0;return!s&&o?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!s&&!o}function i0(r,e,t){let s=!e||t.route.id!==e.route.id,o=r[t.route.id]===void 0;return s||o}function ay(r,e){let t=r.route.path;return r.pathname!==e.pathname||t!=null&&t.endsWith("*")&&r.params["*"]!==e.params["*"]}function bm(r,e){if(r.route.shouldRevalidate){let t=r.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Om(r,e,t,s,o){var u;let h;if(r){let v=s[r];Ge(v,"No route found to patch children into: routeId = "+r),v.children||(v.children=[]),h=v.children}else h=t;let f=e.filter(v=>!h.some(_=>ly(v,_))),g=wu(f,o,[r||"_","patch",String(((u=h)==null?void 0:u.length)||"0")],s);h.push(...g)}function ly(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((t,s)=>{var o;return(o=e.children)==null?void 0:o.some(u=>ly(t,u))}):!1}async function s0(r,e,t){if(!r.lazy)return;let s=await r.lazy();if(!r.lazy)return;let o=t[r.id];Ge(o,"No route found in manifest");let u={};for(let h in s){let g=o[h]!==void 0&&h!=="hasErrorBoundary";Lo(!g,'Route "'+o.id+'" has a static property "'+h+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+h+'" will be ignored.')),!g&&!Pw.has(h)&&(u[h]=s[h])}Object.assign(o,u),Object.assign(o,wt({},e(o),{lazy:void 0}))}async function o0(r){let{matches:e}=r,t=e.filter(o=>o.shouldLoad);return(await Promise.all(t.map(o=>o.resolve()))).reduce((o,u,h)=>Object.assign(o,{[t[h].route.id]:u}),{})}async function a0(r,e,t,s,o,u,h,f,g,v){let _=u.map(C=>C.route.lazy?s0(C.route,g,f):void 0),E=u.map((C,F)=>{let z=_[F],q=o.some(ie=>ie.route.id===C.route.id);return wt({},C,{shouldLoad:q,resolve:async ie=>(ie&&s.method==="GET"&&(C.route.lazy||C.route.loader)&&(q=!0),q?l0(e,s,C,z,ie,v):Promise.resolve({type:dt.data,result:void 0}))})}),I=await r({matches:E,request:s,params:u[0].params,fetcherKey:h,context:v});try{await Promise.all(_)}catch{}return I}async function l0(r,e,t,s,o,u){let h,f,g=v=>{let _,E=new Promise((F,z)=>_=z);f=()=>_(),e.signal.addEventListener("abort",f);let I=F=>typeof v!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+r+'" [routeId: '+t.route.id+"]"))):v({request:e,params:t.params,context:u},...F!==void 0?[F]:[]),C=(async()=>{try{return{type:"data",result:await(o?o(z=>I(z)):I())}}catch(F){return{type:"error",result:F}}})();return Promise.race([C,E])};try{let v=t.route[r];if(s)if(v){let _,[E]=await Promise.all([g(v).catch(I=>{_=I}),s]);if(_!==void 0)throw _;h=E}else if(await s,v=t.route[r],v)h=await g(v);else if(r==="action"){let _=new URL(e.url),E=_.pathname+_.search;throw Dn(405,{method:e.method,pathname:E,routeId:t.route.id})}else return{type:dt.data,result:void 0};else if(v)h=await g(v);else{let _=new URL(e.url),E=_.pathname+_.search;throw Dn(404,{pathname:E})}Ge(h.result!==void 0,"You defined "+(r==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+r+"` ")+"function. Please return a value or `null`.")}catch(v){return{type:dt.error,result:v}}finally{f&&e.signal.removeEventListener("abort",f)}return h}async function u0(r){let{result:e,type:t}=r;if(cy(e)){let E;try{let I=e.headers.get("Content-Type");I&&/\bapplication\/json\b/.test(I)?e.body==null?E=null:E=await e.json():E=await e.text()}catch(I){return{type:dt.error,error:I}}return t===dt.error?{type:dt.error,error:new Tu(e.status,e.statusText,E),statusCode:e.status,headers:e.headers}:{type:dt.data,data:E,statusCode:e.status,headers:e.headers}}if(t===dt.error){if($m(e)){var s,o;if(e.data instanceof Error){var u,h;return{type:dt.error,error:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:dt.error,error:new Tu(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:Fa(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:dt.error,error:e,statusCode:Fa(e)?e.status:void 0}}if(p0(e)){var f,g;return{type:dt.deferred,deferredData:e,statusCode:(f=e.init)==null?void 0:f.status,headers:((g=e.init)==null?void 0:g.headers)&&new Headers(e.init.headers)}}if($m(e)){var v,_;return{type:dt.data,data:e.data,statusCode:(v=e.init)==null?void 0:v.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:dt.data,data:e}}function c0(r,e,t,s,o,u){let h=r.headers.get("Location");if(Ge(h,"Redirects returned/thrown from loaders/actions must have a Location header"),!xd.test(h)){let f=s.slice(0,s.findIndex(g=>g.route.id===t)+1);h=Gh(new URL(e.url),f,o,!0,h,u),r.headers.set("Location",h)}return r}function Mm(r,e,t){if(xd.test(r)){let s=r,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s),u=hi(o.pathname,t)!=null;if(o.origin===e.origin&&u)return o.pathname+o.search+o.hash}return r}function Ro(r,e,t,s){let o=r.createURL(uy(e)).toString(),u={signal:t};if(s&&Sr(s.formMethod)){let{formMethod:h,formEncType:f}=s;u.method=h.toUpperCase(),f==="application/json"?(u.headers=new Headers({"Content-Type":f}),u.body=JSON.stringify(s.json)):f==="text/plain"?u.body=s.text:f==="application/x-www-form-urlencoded"&&s.formData?u.body=Kh(s.formData):u.body=s.formData}return new Request(o,u)}function Kh(r){let e=new URLSearchParams;for(let[t,s]of r.entries())e.append(t,typeof s=="string"?s:s.name);return e}function Fm(r){let e=new FormData;for(let[t,s]of r.entries())e.append(t,s);return e}function h0(r,e,t,s,o){let u={},h=null,f,g=!1,v={},_=t&&Wn(t[1])?t[1].error:void 0;return r.forEach(E=>{if(!(E.route.id in e))return;let I=E.route.id,C=e[I];if(Ge(!Os(C),"Cannot handle redirect results in processLoaderData"),Wn(C)){let F=C.error;_!==void 0&&(F=_,_=void 0),h=h||{};{let z=bs(r,I);h[z.route.id]==null&&(h[z.route.id]=F)}u[I]=void 0,g||(g=!0,f=Fa(C.error)?C.error.status:500),C.headers&&(v[I]=C.headers)}else Gi(C)?(s.set(I,C.deferredData),u[I]=C.deferredData.data,C.statusCode!=null&&C.statusCode!==200&&!g&&(f=C.statusCode),C.headers&&(v[I]=C.headers)):(u[I]=C.data,C.statusCode&&C.statusCode!==200&&!g&&(f=C.statusCode),C.headers&&(v[I]=C.headers))}),_!==void 0&&t&&(h={[t[0]]:_},u[t[0]]=void 0),{loaderData:u,errors:h,statusCode:f||200,loaderHeaders:v}}function jm(r,e,t,s,o,u,h){let{loaderData:f,errors:g}=h0(e,t,s,h);return o.forEach(v=>{let{key:_,match:E,controller:I}=v,C=u[_];if(Ge(C,"Did not find corresponding fetcher result"),!(I&&I.signal.aborted))if(Wn(C)){let F=bs(r.matches,E?.route.id);g&&g[F.route.id]||(g=wt({},g,{[F.route.id]:C.error})),r.fetchers.delete(_)}else if(Os(C))Ge(!1,"Unhandled fetcher revalidation redirect");else if(Gi(C))Ge(!1,"Unhandled fetcher deferred data");else{let F=Wi(C.data);r.fetchers.set(_,F)}}),{loaderData:f,errors:g}}function Um(r,e,t,s){let o=wt({},e);for(let u of t){let h=u.route.id;if(e.hasOwnProperty(h)?e[h]!==void 0&&(o[h]=e[h]):r[h]!==void 0&&u.route.loader&&(o[h]=r[h]),s&&s.hasOwnProperty(h))break}return o}function Bm(r){return r?Wn(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function bs(r,e){return(e?r.slice(0,r.findIndex(s=>s.route.id===e)+1):[...r]).reverse().find(s=>s.route.hasErrorBoundary===!0)||r[0]}function zm(r){let e=r.length===1?r[0]:r.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Dn(r,e){let{pathname:t,routeId:s,method:o,type:u,message:h}=e===void 0?{}:e,f="Unknown Server Error",g="Unknown @remix-run/router error";return r===400?(f="Bad Request",o&&t&&s?g="You made a "+o+' request to "'+t+'" but '+('did not provide a `loader` for route "'+s+'", ')+"so there is no way to handle the request.":u==="defer-action"?g="defer() is not supported in actions":u==="invalid-body"&&(g="Unable to encode submission body")):r===403?(f="Forbidden",g='Route "'+s+'" does not match URL "'+t+'"'):r===404?(f="Not Found",g='No route matches URL "'+t+'"'):r===405&&(f="Method Not Allowed",o&&t&&s?g="You made a "+o.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+s+'", ')+"so there is no way to handle the request.":o&&(g='Invalid request method "'+o.toUpperCase()+'"')),new Tu(r||500,f,new Error(g),!0)}function lu(r){let e=Object.entries(r);for(let t=e.length-1;t>=0;t--){let[s,o]=e[t];if(Os(o))return{key:s,result:o}}}function uy(r){let e=typeof r=="string"?ss(r):r;return js(wt({},e,{hash:""}))}function d0(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function f0(r){return cy(r.result)&&Jw.has(r.result.status)}function Gi(r){return r.type===dt.deferred}function Wn(r){return r.type===dt.error}function Os(r){return(r&&r.type)===dt.redirect}function $m(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function p0(r){let e=r;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function cy(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function m0(r){return Xw.has(r.toLowerCase())}function Sr(r){return Kw.has(r.toLowerCase())}async function g0(r,e,t,s,o){let u=Object.entries(e);for(let h=0;h<u.length;h++){let[f,g]=u[h],v=r.find(I=>I?.route.id===f);if(!v)continue;let _=s.find(I=>I.route.id===v.route.id),E=_!=null&&!ay(_,v)&&(o&&o[v.route.id])!==void 0;Gi(g)&&E&&await Id(g,t,!1).then(I=>{I&&(e[f]=I)})}}async function y0(r,e,t){for(let s=0;s<t.length;s++){let{key:o,routeId:u,controller:h}=t[s],f=e[o];r.find(v=>v?.route.id===u)&&Gi(f)&&(Ge(h,"Expected an AbortController for revalidating fetcher deferred result"),await Id(f,h.signal,!0).then(v=>{v&&(e[o]=v)}))}}async function Id(r,e,t){if(t===void 0&&(t=!1),!await r.deferredData.resolveData(e)){if(t)try{return{type:dt.data,data:r.deferredData.unwrappedData}}catch(o){return{type:dt.error,error:o}}return{type:dt.data,data:r.deferredData.data}}}function Cd(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function Aa(r,e){let t=typeof e=="string"?ss(e).search:e.search;if(r[r.length-1].route.index&&Cd(t||""))return r[r.length-1];let s=iy(r);return s[s.length-1]}function Hm(r){let{formMethod:e,formAction:t,formEncType:s,text:o,formData:u,json:h}=r;if(!(!e||!t||!s)){if(o!=null)return{formMethod:e,formAction:t,formEncType:s,formData:void 0,json:void 0,text:o};if(u!=null)return{formMethod:e,formAction:t,formEncType:s,formData:u,json:void 0,text:void 0};if(h!==void 0)return{formMethod:e,formAction:t,formEncType:s,formData:void 0,json:h,text:void 0}}}function Fh(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function v0(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ca(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function _0(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function Wi(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function w0(r,e){try{let t=r.sessionStorage.getItem(oy);if(t){let s=JSON.parse(t);for(let[o,u]of Object.entries(s||{}))u&&Array.isArray(u)&&e.set(o,new Set(u||[]))}}catch{}}function E0(r,e){if(e.size>0){let t={};for(let[s,o]of e)t[s]=[...o];try{r.sessionStorage.setItem(oy,JSON.stringify(t))}catch(s){Lo(!1,"Failed to save applied view transitions in sessionStorage ("+s+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Su(){return Su=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Su.apply(this,arguments)}const Qa=X.createContext(null),Rd=X.createContext(null),os=X.createContext(null),Ad=X.createContext(null),gi=X.createContext({outlet:null,matches:[],isDataRoute:!1}),hy=X.createContext(null);function T0(r,e){let{relative:t}=e===void 0?{}:e;Ka()||Ge(!1);let{basename:s,navigator:o}=X.useContext(os),{hash:u,pathname:h,search:f}=ju(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:ui([s,h])),o.createHref({pathname:g,search:f,hash:u})}function Ka(){return X.useContext(Ad)!=null}function Ya(){return Ka()||Ge(!1),X.useContext(Ad).location}function dy(r){X.useContext(os).static||X.useLayoutEffect(r)}function Fu(){let{isDataRoute:r}=X.useContext(gi);return r?M0():S0()}function S0(){Ka()||Ge(!1);let r=X.useContext(Qa),{basename:e,future:t,navigator:s}=X.useContext(os),{matches:o}=X.useContext(gi),{pathname:u}=Ya(),h=JSON.stringify(Td(o,t.v7_relativeSplatPath)),f=X.useRef(!1);return dy(()=>{f.current=!0}),X.useCallback(function(v,_){if(_===void 0&&(_={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let E=Sd(v,JSON.parse(h),u,_.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ui([e,E.pathname])),(_.replace?s.replace:s.push)(E,_.state,_)},[e,s,h,u,r])}const x0=X.createContext(null);function I0(r){let e=X.useContext(gi).outlet;return e&&X.createElement(x0.Provider,{value:r},e)}function C0(){let{matches:r}=X.useContext(gi),e=r[r.length-1];return e?e.params:{}}function ju(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=X.useContext(os),{matches:o}=X.useContext(gi),{pathname:u}=Ya(),h=JSON.stringify(Td(o,s.v7_relativeSplatPath));return X.useMemo(()=>Sd(r,JSON.parse(h),u,t==="path"),[r,h,u,t])}function R0(r,e,t,s){Ka()||Ge(!1);let{navigator:o}=X.useContext(os),{matches:u}=X.useContext(gi),h=u[u.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=Ya(),_;_=v;let E=_.pathname||"/",I=E;if(g!=="/"){let z=g.replace(/^\//,"").split("/");I="/"+E.replace(/^\//,"").split("/").slice(z.length).join("/")}let C=Ls(r,{pathname:I});return D0(C&&C.map(z=>Object.assign({},z,{params:Object.assign({},f,z.params),pathname:ui([g,o.encodeLocation?o.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:ui([g,o.encodeLocation?o.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),u,t,s)}function A0(){let r=O0(),e=Fa(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:o},t):null,null)}const P0=X.createElement(A0,null);class k0 extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(gi.Provider,{value:this.props.routeContext},X.createElement(hy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N0(r){let{routeContext:e,match:t,children:s}=r,o=X.useContext(Qa);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(gi.Provider,{value:e},s)}function D0(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var u;if(!t)return null;if(t.errors)r=t.matches;else if((u=s)!=null&&u.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let _=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);_>=0||Ge(!1),h=h.slice(0,Math.min(h.length,_+1))}let g=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<h.length;_++){let E=h[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=_),E.route.id){let{loaderData:I,errors:C}=t,F=E.route.loader&&I[E.route.id]===void 0&&(!C||C[E.route.id]===void 0);if(E.route.lazy||F){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((_,E,I)=>{let C,F=!1,z=null,q=null;t&&(C=f&&E.route.id?f[E.route.id]:void 0,z=E.route.errorElement||P0,g&&(v<0&&I===0?(F0("route-fallback"),F=!0,q=null):v===I&&(F=!0,q=E.route.hydrateFallbackElement||null)));let me=e.concat(h.slice(0,I+1)),ie=()=>{let pe;return C?pe=z:F?pe=q:E.route.Component?pe=X.createElement(E.route.Component,null):E.route.element?pe=E.route.element:pe=_,X.createElement(N0,{match:E,routeContext:{outlet:_,matches:me,isDataRoute:t!=null},children:pe})};return t&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?X.createElement(k0,{location:t.location,revalidation:t.revalidation,component:z,error:C,children:ie(),routeContext:{outlet:null,matches:me,isDataRoute:!0}}):ie()},null)}var fy=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(fy||{}),py=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(py||{});function V0(r){let e=X.useContext(Qa);return e||Ge(!1),e}function L0(r){let e=X.useContext(Rd);return e||Ge(!1),e}function b0(r){let e=X.useContext(gi);return e||Ge(!1),e}function my(r){let e=b0(),t=e.matches[e.matches.length-1];return t.route.id||Ge(!1),t.route.id}function O0(){var r;let e=X.useContext(hy),t=L0(py.UseRouteError),s=my();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function M0(){let{router:r}=V0(fy.UseNavigateStable),e=my(),t=X.useRef(!1);return dy(()=>{t.current=!0}),X.useCallback(function(o,u){u===void 0&&(u={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Su({fromRouteId:e},u)))},[r,e])}const qm={};function F0(r,e,t){qm[r]||(qm[r]=!0)}function j0(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function U0(r){return I0(r.context)}function B0(r){let{basename:e="/",children:t=null,location:s,navigationType:o=jt.Pop,navigator:u,static:h=!1,future:f}=r;Ka()&&Ge(!1);let g=e.replace(/^\/*/,"/"),v=X.useMemo(()=>({basename:g,navigator:u,static:h,future:Su({v7_relativeSplatPath:!1},f)}),[g,f,u,h]);typeof s=="string"&&(s=ss(s));let{pathname:_="/",search:E="",hash:I="",state:C=null,key:F="default"}=s,z=X.useMemo(()=>{let q=hi(_,g);return q==null?null:{location:{pathname:q,search:E,hash:I,state:C,key:F},navigationType:o}},[g,_,E,I,C,F,o]);return z==null?null:X.createElement(os.Provider,{value:v},X.createElement(Ad.Provider,{children:t,value:z}))}new Promise(()=>{});function z0(r){let e={hasErrorBoundary:r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&Object.assign(e,{element:X.createElement(r.Component),Component:void 0}),r.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:X.createElement(r.HydrateFallback),HydrateFallback:void 0}),r.ErrorBoundary&&Object.assign(e,{errorElement:X.createElement(r.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},bo.apply(this,arguments)}function gy(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,u;for(u=0;u<s.length;u++)o=s[u],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function $0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function H0(r,e){return r.button===0&&(!e||e==="_self")&&!$0(r)}const q0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],W0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],G0="6";try{window.__reactRouterVersion=G0}catch{}function Q0(r,e){return n0({basename:void 0,future:bo({},void 0,{v7_prependBasename:!0}),history:Cw({window:void 0}),hydrationData:K0(),routes:r,mapRouteProperties:z0,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function K0(){var r;let e=(r=window)==null?void 0:r.__staticRouterHydrationData;return e&&e.errors&&(e=bo({},e,{errors:Y0(e.errors)})),e}function Y0(r){if(!r)return null;let e=Object.entries(r),t={};for(let[s,o]of e)if(o&&o.__type==="RouteErrorResponse")t[s]=new Tu(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let u=window[o.__subType];if(typeof u=="function")try{let h=new u(o.message);h.stack="",t[s]=h}catch{}}if(t[s]==null){let u=new Error(o.message);u.stack="",t[s]=u}}else t[s]=o;return t}const yy=X.createContext({isTransitioning:!1}),X0=X.createContext(new Map),J0="startTransition",Wm=yw[J0],Z0="flushSync",Gm=Iw[Z0];function eE(r){Wm?Wm(r):r()}function Ra(r){Gm?Gm(r):r()}let tE=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",e(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",t(s))}})}};function nE(r){let{fallbackElement:e,router:t,future:s}=r,[o,u]=X.useState(t.state),[h,f]=X.useState(),[g,v]=X.useState({isTransitioning:!1}),[_,E]=X.useState(),[I,C]=X.useState(),[F,z]=X.useState(),q=X.useRef(new Map),{v7_startTransition:me}=s||{},ie=X.useCallback(x=>{me?eE(x):x()},[me]),pe=X.useCallback((x,R)=>{let{deletedFetchers:k,flushSync:L,viewTransitionOpts:O}=R;x.fetchers.forEach(($e,st)=>{$e.data!==void 0&&q.current.set(st,$e.data)}),k.forEach($e=>q.current.delete($e));let P=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!O||P){L?Ra(()=>u(x)):ie(()=>u(x));return}if(L){Ra(()=>{I&&(_&&_.resolve(),I.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let $e=t.window.document.startViewTransition(()=>{Ra(()=>u(x))});$e.finished.finally(()=>{Ra(()=>{E(void 0),C(void 0),f(void 0),v({isTransitioning:!1})})}),Ra(()=>C($e));return}I?(_&&_.resolve(),I.skipTransition(),z({state:x,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(f(x),v({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[t.window,I,_,q,ie]);X.useLayoutEffect(()=>t.subscribe(pe),[t,pe]),X.useEffect(()=>{g.isTransitioning&&!g.flushSync&&E(new tE)},[g]),X.useEffect(()=>{if(_&&h&&t.window){let x=h,R=_.promise,k=t.window.document.startViewTransition(async()=>{ie(()=>u(x)),await R});k.finished.finally(()=>{E(void 0),C(void 0),f(void 0),v({isTransitioning:!1})}),C(k)}},[ie,h,_,t.window]),X.useEffect(()=>{_&&h&&o.location.key===h.location.key&&_.resolve()},[_,I,o.location,h]),X.useEffect(()=>{!g.isTransitioning&&F&&(f(F.state),v({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),z(void 0))},[g.isTransitioning,F]),X.useEffect(()=>{},[]);let ge=X.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:x=>t.navigate(x),push:(x,R,k)=>t.navigate(x,{state:R,preventScrollReset:k?.preventScrollReset}),replace:(x,R,k)=>t.navigate(x,{replace:!0,state:R,preventScrollReset:k?.preventScrollReset})}),[t]),Oe=t.basename||"/",Me=X.useMemo(()=>({router:t,navigator:ge,static:!1,basename:Oe}),[t,ge,Oe]),S=X.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return X.useEffect(()=>j0(s,t.future),[s,t.future]),X.createElement(X.Fragment,null,X.createElement(Qa.Provider,{value:Me},X.createElement(Rd.Provider,{value:o},X.createElement(X0.Provider,{value:q.current},X.createElement(yy.Provider,{value:g},X.createElement(B0,{basename:Oe,location:o.location,navigationType:o.historyAction,navigator:ge,future:S},o.initialized||t.future.v7_partialHydration?X.createElement(rE,{routes:t.routes,future:t.future,state:o}):e))))),null)}const rE=X.memo(iE);function iE(r){let{routes:e,future:t,state:s}=r;return R0(e,void 0,s,t)}const sE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vy=X.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:u,replace:h,state:f,target:g,to:v,preventScrollReset:_,viewTransition:E}=e,I=gy(e,q0),{basename:C}=X.useContext(os),F,z=!1;if(typeof v=="string"&&oE.test(v)&&(F=v,sE))try{let pe=new URL(window.location.href),ge=v.startsWith("//")?new URL(pe.protocol+v):new URL(v),Oe=hi(ge.pathname,C);ge.origin===pe.origin&&Oe!=null?v=Oe+ge.search+ge.hash:z=!0}catch{}let q=T0(v,{relative:o}),me=uE(v,{replace:h,state:f,target:g,preventScrollReset:_,relative:o,viewTransition:E});function ie(pe){s&&s(pe),pe.defaultPrevented||me(pe)}return X.createElement("a",bo({},I,{href:F||q,onClick:z||u?s:ie,ref:t,target:g}))}),aE=X.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:o=!1,className:u="",end:h=!1,style:f,to:g,viewTransition:v,children:_}=e,E=gy(e,W0),I=ju(g,{relative:E.relative}),C=Ya(),F=X.useContext(Rd),{navigator:z,basename:q}=X.useContext(os),me=F!=null&&cE(I)&&v===!0,ie=z.encodeLocation?z.encodeLocation(I).pathname:I.pathname,pe=C.pathname,ge=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;o||(pe=pe.toLowerCase(),ge=ge?ge.toLowerCase():null,ie=ie.toLowerCase()),ge&&q&&(ge=hi(ge,q)||ge);const Oe=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let Me=pe===ie||!h&&pe.startsWith(ie)&&pe.charAt(Oe)==="/",S=ge!=null&&(ge===ie||!h&&ge.startsWith(ie)&&ge.charAt(ie.length)==="/"),x={isActive:Me,isPending:S,isTransitioning:me},R=Me?s:void 0,k;typeof u=="function"?k=u(x):k=[u,Me?"active":null,S?"pending":null,me?"transitioning":null].filter(Boolean).join(" ");let L=typeof f=="function"?f(x):f;return X.createElement(vy,bo({},E,{"aria-current":R,className:k,ref:t,style:L,to:g,viewTransition:v}),typeof _=="function"?_(x):_)});var Yh;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Yh||(Yh={}));var Qm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Qm||(Qm={}));function lE(r){let e=X.useContext(Qa);return e||Ge(!1),e}function uE(r,e){let{target:t,replace:s,state:o,preventScrollReset:u,relative:h,viewTransition:f}=e===void 0?{}:e,g=Fu(),v=Ya(),_=ju(r,{relative:h});return X.useCallback(E=>{if(H0(E,t)){E.preventDefault();let I=s!==void 0?s:js(v)===js(_);g(r,{replace:I,state:o,preventScrollReset:u,relative:h,viewTransition:f})}},[v,g,_,s,o,t,r,u,h,f])}function cE(r,e){e===void 0&&(e={});let t=X.useContext(yy);t==null&&Ge(!1);let{basename:s}=lE(Yh.useViewTransitionState),o=ju(r,{relative:e.relative});if(!t.isTransitioning)return!1;let u=hi(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=hi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Eu(o.pathname,h)!=null||Eu(o.pathname,u)!=null}function hE(){const r=[{label:" Dashboard",path:"/"},{label:" Theme Drafts",path:"/drafts/themes"},{label:" Story Drafts",path:"/drafts/stories"},{label:" Prompt Lab",path:"/promptlab"}];return N.jsxs("div",{className:"min-h-screen flex bg-gray-100 text-gray-800",children:[N.jsxs("aside",{className:"w-64 bg-white shadow-md flex flex-col",children:[N.jsxs("div",{className:"p-5 border-b",children:[N.jsx("h1",{className:"text-2xl font-bold text-blue-700",children:"WaitWhat? CMS"}),N.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editorial Console"})]}),N.jsx("nav",{className:"flex-1 p-4 space-y-1",children:r.map(e=>N.jsx(aE,{to:e.path,className:({isActive:t})=>`block px-4 py-2 rounded-md transition ${t?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:e.label},e.path))}),N.jsx("div",{className:"p-4 border-t text-center text-xs text-gray-500",children:N.jsxs("p",{children:[" ",new Date().getFullYear()," WaitWhat?"]})})]}),N.jsxs("main",{className:"flex-1 overflow-y-auto",children:[N.jsxs("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[N.jsx("h2",{className:"text-lg font-semibold",children:"Content Manager"}),N.jsx("a",{href:"https://waitwhat.news",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View Live Site "})]}),N.jsx("div",{className:"p-6",children:N.jsx(U0,{})})]})]})}var Km={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},wy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,_=u>>2,E=(u&3)<<4|f>>4;let I=(f&15)<<2|v>>6,C=v&63;g||(C=64,h||(I=64)),s.push(t[_],t[E],t[I],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(_y(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):dE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||f==null||v==null||E==null)throw new fE;const I=u<<2|f>>4;if(s.push(I),v!==64){const C=f<<4&240|v>>2;if(s.push(C),E!==64){const F=v<<6&192|E;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class fE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pE=function(r){const e=_y(r);return wy.encodeByteArray(e,!0)},xu=function(r){return pE(r).replace(/\./g,"")},mE=function(r){try{return wy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=()=>gE().__FIREBASE_DEFAULTS__,vE=()=>{if(typeof process>"u"||typeof Km>"u")return;const r=Km.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},_E=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&mE(r[1]);return e&&JSON.parse(e)},Pd=()=>{try{return yE()||vE()||_E()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},wE=r=>{var e,t;return(t=(e=Pd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Ey=r=>{const e=wE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Ty=()=>{var r;return(r=Pd())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[xu(JSON.stringify(t)),xu(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xE(){var r;const e=(r=Pd())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IE(){return!xE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CE(){try{return typeof indexedDB=="object"}catch{return!1}}function RE(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="FirebaseError";class Bs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=AE,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sy.prototype.create)}}class Sy{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?PE(u,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Bs(o,f,s)}}function PE(r,e){return r.replace(kE,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const kE=/\{\$([^}]+)}/g;function Xh(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(Ym(u)&&Ym(h)){if(!Xh(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Ym(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(r){return r&&r._delegate?r._delegate:r}class Oo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new EE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VE(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(u);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:DE(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DE(r){return r===Vs?void 0:r}function VE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(nt||(nt={}));const bE={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},OE=nt.INFO,ME={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},FE=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=ME[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xy{constructor(e){this.name=e,this._logLevel=OE,this._logHandler=FE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const jE=(r,e)=>e.some(t=>r instanceof t);let Xm,Jm;function UE(){return Xm||(Xm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BE(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iy=new WeakMap,Jh=new WeakMap,Cy=new WeakMap,jh=new WeakMap,kd=new WeakMap;function zE(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{t(Ki(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Iy.set(t,r)}).catch(()=>{}),kd.set(e,r),e}function $E(r){if(Jh.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Jh.set(r,e)}let Zh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Jh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Cy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ki(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function HE(r){Zh=r(Zh)}function qE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Uh(this),e,...t);return Cy.set(s,e.sort?e.sort():[e]),Ki(s)}:BE().includes(r)?function(...e){return r.apply(Uh(this),e),Ki(Iy.get(this))}:function(...e){return Ki(r.apply(Uh(this),e))}}function WE(r){return typeof r=="function"?qE(r):(r instanceof IDBTransaction&&$E(r),jE(r,UE())?new Proxy(r,Zh):r)}function Ki(r){if(r instanceof IDBRequest)return zE(r);if(jh.has(r))return jh.get(r);const e=WE(r);return e!==r&&(jh.set(r,e),kd.set(e,r)),e}const Uh=r=>kd.get(r);function GE(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),f=Ki(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ki(h.result),g.oldVersion,g.newVersion,Ki(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const QE=["get","getKey","getAll","getAllKeys","count"],KE=["put","add","delete","clear"],Bh=new Map;function Zm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Bh.get(e))return Bh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=KE.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||QE.includes(t)))return;const u=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return Bh.set(e,u),u}HE(r=>({...r,get:(e,t,s)=>Zm(e,t)||r.get(e,t,s),has:(e,t)=>!!Zm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XE(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function XE(r){const e=r.getComponent();return e?.type==="VERSION"}const ed="@firebase/app",eg="0.10.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new xy("@firebase/app"),JE="@firebase/app-compat",ZE="@firebase/analytics-compat",eT="@firebase/analytics",tT="@firebase/app-check-compat",nT="@firebase/app-check",rT="@firebase/auth",iT="@firebase/auth-compat",sT="@firebase/database",oT="@firebase/data-connect",aT="@firebase/database-compat",lT="@firebase/functions",uT="@firebase/functions-compat",cT="@firebase/installations",hT="@firebase/installations-compat",dT="@firebase/messaging",fT="@firebase/messaging-compat",pT="@firebase/performance",mT="@firebase/performance-compat",gT="@firebase/remote-config",yT="@firebase/remote-config-compat",vT="@firebase/storage",_T="@firebase/storage-compat",wT="@firebase/firestore",ET="@firebase/vertexai",TT="@firebase/firestore-compat",ST="firebase",xT="11.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="[DEFAULT]",IT={[ed]:"fire-core",[JE]:"fire-core-compat",[eT]:"fire-analytics",[ZE]:"fire-analytics-compat",[nT]:"fire-app-check",[tT]:"fire-app-check-compat",[rT]:"fire-auth",[iT]:"fire-auth-compat",[sT]:"fire-rtdb",[oT]:"fire-data-connect",[aT]:"fire-rtdb-compat",[lT]:"fire-fn",[uT]:"fire-fn-compat",[cT]:"fire-iid",[hT]:"fire-iid-compat",[dT]:"fire-fcm",[fT]:"fire-fcm-compat",[pT]:"fire-perf",[mT]:"fire-perf-compat",[gT]:"fire-rc",[yT]:"fire-rc-compat",[vT]:"fire-gcs",[_T]:"fire-gcs-compat",[wT]:"fire-fst",[TT]:"fire-fst-compat",[ET]:"fire-vertex","fire-js":"fire-js",[ST]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Map,CT=new Map,nd=new Map;function tg(r,e){try{r.container.addComponent(e)}catch(t){di.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ja(r){const e=r.name;if(nd.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;nd.set(e,r);for(const t of Iu.values())tg(t,r);for(const t of CT.values())tg(t,r);return!0}function Ry(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new Sy("app","Firebase",RT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=xT;function Ay(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:td,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Yi.create("bad-app-name",{appName:String(o)});if(t||(t=Ty()),!t)throw Yi.create("no-options");const u=Iu.get(o);if(u){if(Xh(t,u.options)&&Xh(s,u.config))return u;throw Yi.create("duplicate-app",{appName:o})}const h=new LE(o);for(const g of nd.values())h.addComponent(g);const f=new AT(t,s,h);return Iu.set(o,f),f}function Py(r=td){const e=Iu.get(r);if(!e&&r===td&&Ty())return Ay();if(!e)throw Yi.create("no-app",{appName:r});return e}function Xi(r,e,t){var s;let o=(s=IT[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const f=[`Unable to register library "${o}" with version "${e}":`];u&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(f.join(" "));return}ja(new Oo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="firebase-heartbeat-database",NT=1,Ua="firebase-heartbeat-store";let zh=null;function ky(){return zh||(zh=GE(kT,NT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ua)}catch(t){console.warn(t)}}}}).catch(r=>{throw Yi.create("idb-open",{originalErrorMessage:r.message})})),zh}async function DT(r){try{const t=(await ky()).transaction(Ua),s=await t.objectStore(Ua).get(Ny(r));return await t.done,s}catch(e){if(e instanceof Bs)di.warn(e.message);else{const t=Yi.create("idb-get",{originalErrorMessage:e?.message});di.warn(t.message)}}}async function ng(r,e){try{const s=(await ky()).transaction(Ua,"readwrite");await s.objectStore(Ua).put(e,Ny(r)),await s.done}catch(t){if(t instanceof Bs)di.warn(t.message);else{const s=Yi.create("idb-set",{originalErrorMessage:t?.message});di.warn(s.message)}}}function Ny(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=1024,LT=720*60*60*1e3;class bT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=rg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=LT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){di.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rg(),{heartbeatsToSend:s,unsentEntries:o}=OT(this._heartbeatsCache.heartbeats),u=xu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return di.warn(t),""}}}function rg(){return new Date().toISOString().substring(0,10)}function OT(r,e=VT){const t=[];let s=r.slice();for(const o of r){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),ig(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ig(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class MT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CE()?RE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ig(r){return xu(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(r){ja(new Oo("platform-logger",e=>new YE(e),"PRIVATE")),ja(new Oo("heartbeat",e=>new bT(e),"PRIVATE")),Xi(ed,eg,r),Xi(ed,eg,"esm2017"),Xi("fire-js","")}FT("");var jT="firebase",UT="11.0.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(jT,UT,"app");var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,Dy;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,x){function R(){}R.prototype=x.prototype,S.D=x.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(k,L,O){for(var P=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)P[$e-2]=arguments[$e];return x.prototype[L].apply(k,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,x,R){R||(R=0);var k=Array(16);if(typeof x=="string")for(var L=0;16>L;++L)k[L]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(L=0;16>L;++L)k[L]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=S.g[0],R=S.g[1],L=S.g[2];var O=S.g[3],P=x+(O^R&(L^O))+k[0]+3614090360&4294967295;x=R+(P<<7&4294967295|P>>>25),P=O+(L^x&(R^L))+k[1]+3905402710&4294967295,O=x+(P<<12&4294967295|P>>>20),P=L+(R^O&(x^R))+k[2]+606105819&4294967295,L=O+(P<<17&4294967295|P>>>15),P=R+(x^L&(O^x))+k[3]+3250441966&4294967295,R=L+(P<<22&4294967295|P>>>10),P=x+(O^R&(L^O))+k[4]+4118548399&4294967295,x=R+(P<<7&4294967295|P>>>25),P=O+(L^x&(R^L))+k[5]+1200080426&4294967295,O=x+(P<<12&4294967295|P>>>20),P=L+(R^O&(x^R))+k[6]+2821735955&4294967295,L=O+(P<<17&4294967295|P>>>15),P=R+(x^L&(O^x))+k[7]+4249261313&4294967295,R=L+(P<<22&4294967295|P>>>10),P=x+(O^R&(L^O))+k[8]+1770035416&4294967295,x=R+(P<<7&4294967295|P>>>25),P=O+(L^x&(R^L))+k[9]+2336552879&4294967295,O=x+(P<<12&4294967295|P>>>20),P=L+(R^O&(x^R))+k[10]+4294925233&4294967295,L=O+(P<<17&4294967295|P>>>15),P=R+(x^L&(O^x))+k[11]+2304563134&4294967295,R=L+(P<<22&4294967295|P>>>10),P=x+(O^R&(L^O))+k[12]+1804603682&4294967295,x=R+(P<<7&4294967295|P>>>25),P=O+(L^x&(R^L))+k[13]+4254626195&4294967295,O=x+(P<<12&4294967295|P>>>20),P=L+(R^O&(x^R))+k[14]+2792965006&4294967295,L=O+(P<<17&4294967295|P>>>15),P=R+(x^L&(O^x))+k[15]+1236535329&4294967295,R=L+(P<<22&4294967295|P>>>10),P=x+(L^O&(R^L))+k[1]+4129170786&4294967295,x=R+(P<<5&4294967295|P>>>27),P=O+(R^L&(x^R))+k[6]+3225465664&4294967295,O=x+(P<<9&4294967295|P>>>23),P=L+(x^R&(O^x))+k[11]+643717713&4294967295,L=O+(P<<14&4294967295|P>>>18),P=R+(O^x&(L^O))+k[0]+3921069994&4294967295,R=L+(P<<20&4294967295|P>>>12),P=x+(L^O&(R^L))+k[5]+3593408605&4294967295,x=R+(P<<5&4294967295|P>>>27),P=O+(R^L&(x^R))+k[10]+38016083&4294967295,O=x+(P<<9&4294967295|P>>>23),P=L+(x^R&(O^x))+k[15]+3634488961&4294967295,L=O+(P<<14&4294967295|P>>>18),P=R+(O^x&(L^O))+k[4]+3889429448&4294967295,R=L+(P<<20&4294967295|P>>>12),P=x+(L^O&(R^L))+k[9]+568446438&4294967295,x=R+(P<<5&4294967295|P>>>27),P=O+(R^L&(x^R))+k[14]+3275163606&4294967295,O=x+(P<<9&4294967295|P>>>23),P=L+(x^R&(O^x))+k[3]+4107603335&4294967295,L=O+(P<<14&4294967295|P>>>18),P=R+(O^x&(L^O))+k[8]+1163531501&4294967295,R=L+(P<<20&4294967295|P>>>12),P=x+(L^O&(R^L))+k[13]+2850285829&4294967295,x=R+(P<<5&4294967295|P>>>27),P=O+(R^L&(x^R))+k[2]+4243563512&4294967295,O=x+(P<<9&4294967295|P>>>23),P=L+(x^R&(O^x))+k[7]+1735328473&4294967295,L=O+(P<<14&4294967295|P>>>18),P=R+(O^x&(L^O))+k[12]+2368359562&4294967295,R=L+(P<<20&4294967295|P>>>12),P=x+(R^L^O)+k[5]+4294588738&4294967295,x=R+(P<<4&4294967295|P>>>28),P=O+(x^R^L)+k[8]+2272392833&4294967295,O=x+(P<<11&4294967295|P>>>21),P=L+(O^x^R)+k[11]+1839030562&4294967295,L=O+(P<<16&4294967295|P>>>16),P=R+(L^O^x)+k[14]+4259657740&4294967295,R=L+(P<<23&4294967295|P>>>9),P=x+(R^L^O)+k[1]+2763975236&4294967295,x=R+(P<<4&4294967295|P>>>28),P=O+(x^R^L)+k[4]+1272893353&4294967295,O=x+(P<<11&4294967295|P>>>21),P=L+(O^x^R)+k[7]+4139469664&4294967295,L=O+(P<<16&4294967295|P>>>16),P=R+(L^O^x)+k[10]+3200236656&4294967295,R=L+(P<<23&4294967295|P>>>9),P=x+(R^L^O)+k[13]+681279174&4294967295,x=R+(P<<4&4294967295|P>>>28),P=O+(x^R^L)+k[0]+3936430074&4294967295,O=x+(P<<11&4294967295|P>>>21),P=L+(O^x^R)+k[3]+3572445317&4294967295,L=O+(P<<16&4294967295|P>>>16),P=R+(L^O^x)+k[6]+76029189&4294967295,R=L+(P<<23&4294967295|P>>>9),P=x+(R^L^O)+k[9]+3654602809&4294967295,x=R+(P<<4&4294967295|P>>>28),P=O+(x^R^L)+k[12]+3873151461&4294967295,O=x+(P<<11&4294967295|P>>>21),P=L+(O^x^R)+k[15]+530742520&4294967295,L=O+(P<<16&4294967295|P>>>16),P=R+(L^O^x)+k[2]+3299628645&4294967295,R=L+(P<<23&4294967295|P>>>9),P=x+(L^(R|~O))+k[0]+4096336452&4294967295,x=R+(P<<6&4294967295|P>>>26),P=O+(R^(x|~L))+k[7]+1126891415&4294967295,O=x+(P<<10&4294967295|P>>>22),P=L+(x^(O|~R))+k[14]+2878612391&4294967295,L=O+(P<<15&4294967295|P>>>17),P=R+(O^(L|~x))+k[5]+4237533241&4294967295,R=L+(P<<21&4294967295|P>>>11),P=x+(L^(R|~O))+k[12]+1700485571&4294967295,x=R+(P<<6&4294967295|P>>>26),P=O+(R^(x|~L))+k[3]+2399980690&4294967295,O=x+(P<<10&4294967295|P>>>22),P=L+(x^(O|~R))+k[10]+4293915773&4294967295,L=O+(P<<15&4294967295|P>>>17),P=R+(O^(L|~x))+k[1]+2240044497&4294967295,R=L+(P<<21&4294967295|P>>>11),P=x+(L^(R|~O))+k[8]+1873313359&4294967295,x=R+(P<<6&4294967295|P>>>26),P=O+(R^(x|~L))+k[15]+4264355552&4294967295,O=x+(P<<10&4294967295|P>>>22),P=L+(x^(O|~R))+k[6]+2734768916&4294967295,L=O+(P<<15&4294967295|P>>>17),P=R+(O^(L|~x))+k[13]+1309151649&4294967295,R=L+(P<<21&4294967295|P>>>11),P=x+(L^(R|~O))+k[4]+4149444226&4294967295,x=R+(P<<6&4294967295|P>>>26),P=O+(R^(x|~L))+k[11]+3174756917&4294967295,O=x+(P<<10&4294967295|P>>>22),P=L+(x^(O|~R))+k[2]+718787259&4294967295,L=O+(P<<15&4294967295|P>>>17),P=R+(O^(L|~x))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+L&4294967295,S.g[3]=S.g[3]+O&4294967295}s.prototype.u=function(S,x){x===void 0&&(x=S.length);for(var R=x-this.blockSize,k=this.B,L=this.h,O=0;O<x;){if(L==0)for(;O<=R;)o(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<x;)if(k[L++]=S.charCodeAt(O++),L==this.blockSize){o(this,k),L=0;break}}else for(;O<x;)if(k[L++]=S[O++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=x},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;var R=8*this.o;for(x=S.length-8;x<S.length;++x)S[x]=R&255,R/=256;for(this.u(S),S=Array(16),x=R=0;4>x;++x)for(var k=0;32>k;k+=8)S[R++]=this.g[x]>>>k&255;return S};function u(S,x){var R=f;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=x(S)}function h(S,x){this.h=x;for(var R=[],k=!0,L=S.length-1;0<=L;L--){var O=S[L]|0;k&&O==x||(R[L]=O,k=!1)}this.g=R}var f={};function g(S){return-128<=S&&128>S?u(S,function(x){return new h([x|0],0>x?-1:0)}):new h([S|0],0>S?-1:0)}function v(S){if(isNaN(S)||!isFinite(S))return E;if(0>S)return q(v(-S));for(var x=[],R=1,k=0;S>=R;k++)x[k]=S/R|0,R*=4294967296;return new h(x,0)}function _(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return q(_(S.substring(1),x));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(x,8)),k=E,L=0;L<S.length;L+=8){var O=Math.min(8,S.length-L),P=parseInt(S.substring(L,L+O),x);8>O?(O=v(Math.pow(x,O)),k=k.j(O).add(v(P))):(k=k.j(R),k=k.add(v(P)))}return k}var E=g(0),I=g(1),C=g(16777216);r=h.prototype,r.m=function(){if(z(this))return-q(this).m();for(var S=0,x=1,R=0;R<this.g.length;R++){var k=this.i(R);S+=(0<=k?k:4294967296+k)*x,x*=4294967296}return S},r.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(F(this))return"0";if(z(this))return"-"+q(this).toString(S);for(var x=v(Math.pow(S,6)),R=this,k="";;){var L=ge(R,x).g;R=me(R,L.j(x));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=L,F(R))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},r.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function F(S){if(S.h!=0)return!1;for(var x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function z(S){return S.h==-1}r.l=function(S){return S=me(this,S),z(S)?-1:F(S)?0:1};function q(S){for(var x=S.g.length,R=[],k=0;k<x;k++)R[k]=~S.g[k];return new h(R,~S.h).add(I)}r.abs=function(){return z(this)?q(this):this},r.add=function(S){for(var x=Math.max(this.g.length,S.g.length),R=[],k=0,L=0;L<=x;L++){var O=k+(this.i(L)&65535)+(S.i(L)&65535),P=(O>>>16)+(this.i(L)>>>16)+(S.i(L)>>>16);k=P>>>16,O&=65535,P&=65535,R[L]=P<<16|O}return new h(R,R[R.length-1]&-2147483648?-1:0)};function me(S,x){return S.add(q(x))}r.j=function(S){if(F(this)||F(S))return E;if(z(this))return z(S)?q(this).j(q(S)):q(q(this).j(S));if(z(S))return q(this.j(q(S)));if(0>this.l(C)&&0>S.l(C))return v(this.m()*S.m());for(var x=this.g.length+S.g.length,R=[],k=0;k<2*x;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<S.g.length;L++){var O=this.i(k)>>>16,P=this.i(k)&65535,$e=S.i(L)>>>16,st=S.i(L)&65535;R[2*k+2*L]+=P*st,ie(R,2*k+2*L),R[2*k+2*L+1]+=O*st,ie(R,2*k+2*L+1),R[2*k+2*L+1]+=P*$e,ie(R,2*k+2*L+1),R[2*k+2*L+2]+=O*$e,ie(R,2*k+2*L+2)}for(k=0;k<x;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=x;k<2*x;k++)R[k]=0;return new h(R,0)};function ie(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function pe(S,x){this.g=S,this.h=x}function ge(S,x){if(F(x))throw Error("division by zero");if(F(S))return new pe(E,E);if(z(S))return x=ge(q(S),x),new pe(q(x.g),q(x.h));if(z(x))return x=ge(S,q(x)),new pe(q(x.g),x.h);if(30<S.g.length){if(z(S)||z(x))throw Error("slowDivide_ only works with positive integers.");for(var R=I,k=x;0>=k.l(S);)R=Oe(R),k=Oe(k);var L=Me(R,1),O=Me(k,1);for(k=Me(k,2),R=Me(R,2);!F(k);){var P=O.add(k);0>=P.l(S)&&(L=L.add(R),O=P),k=Me(k,1),R=Me(R,1)}return x=me(S,L.j(x)),new pe(L,x)}for(L=E;0<=S.l(x);){for(R=Math.max(1,Math.floor(S.m()/x.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=v(R),P=O.j(x);z(P)||0<P.l(S);)R-=k,O=v(R),P=O.j(x);F(O)&&(O=I),L=L.add(O),S=me(S,P)}return new pe(L,S)}r.A=function(S){return ge(this,S).h},r.and=function(S){for(var x=Math.max(this.g.length,S.g.length),R=[],k=0;k<x;k++)R[k]=this.i(k)&S.i(k);return new h(R,this.h&S.h)},r.or=function(S){for(var x=Math.max(this.g.length,S.g.length),R=[],k=0;k<x;k++)R[k]=this.i(k)|S.i(k);return new h(R,this.h|S.h)},r.xor=function(S){for(var x=Math.max(this.g.length,S.g.length),R=[],k=0;k<x;k++)R[k]=this.i(k)^S.i(k);return new h(R,this.h^S.h)};function Oe(S){for(var x=S.g.length+1,R=[],k=0;k<x;k++)R[k]=S.i(k)<<1|S.i(k-1)>>>31;return new h(R,S.h)}function Me(S,x){var R=x>>5;x%=32;for(var k=S.g.length-R,L=[],O=0;O<k;O++)L[O]=0<x?S.i(O+R)>>>x|S.i(O+R+1)<<32-x:S.i(O+R);return new h(L,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Dy=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=_,Fs=h}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vy,Pa,Ly,pu,rd,by,Oy,My;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,y){return l==Array.prototype||l==Object.prototype||(l[p]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(l,p){if(p)e:{var y=s;l=l.split(".");for(var T=0;T<l.length-1;T++){var B=l[T];if(!(B in y))break e;y=y[B]}l=l[l.length-1],T=y[l],p=p(T),p!=T&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}function u(l,p){l instanceof String&&(l+="");var y=0,T=!1,B={next:function(){if(!T&&y<l.length){var Q=y++;return{value:p(Q,l[Q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(l){return l||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function v(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function _(l,p,y){return l.call.apply(l.bind,arguments)}function E(l,p,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),l.apply(p,B)}}return function(){return l.apply(p,arguments)}}function I(l,p,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,I.apply(null,arguments)}function C(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function F(l,p){function y(){}y.prototype=p.prototype,l.aa=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,B,Q){for(var he=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)he[ht-2]=arguments[ht];return p.prototype[B].apply(T,he)}}function z(l){const p=l.length;if(0<p){const y=Array(p);for(let T=0;T<p;T++)y[T]=l[T];return y}return[]}function q(l,p){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(g(T)){const B=l.length||0,Q=T.length||0;l.length=B+Q;for(let he=0;he<Q;he++)l[B+he]=T[he]}else l.push(T)}}class me{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ie(l){return/^[\s\xa0]*$/.test(l)}function pe(){var l=f.navigator;return l&&(l=l.userAgent)?l:""}function ge(l){return ge[" "](l),l}ge[" "]=function(){};var Oe=pe().indexOf("Gecko")!=-1&&!(pe().toLowerCase().indexOf("webkit")!=-1&&pe().indexOf("Edge")==-1)&&!(pe().indexOf("Trident")!=-1||pe().indexOf("MSIE")!=-1)&&pe().indexOf("Edge")==-1;function Me(l,p,y){for(const T in l)p.call(y,l[T],T,l)}function S(l,p){for(const y in l)p.call(void 0,l[y],y,l)}function x(l){const p={};for(const y in l)p[y]=l[y];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,p){let y,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(y in T)l[y]=T[y];for(let Q=0;Q<R.length;Q++)y=R[Q],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function L(l){var p=1;l=l.split(":");const y=[];for(;0<p&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function O(l){f.setTimeout(()=>{throw l},0)}function P(){var l=Re;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class $e{constructor(){this.h=this.g=null}add(p,y){const T=st.get();T.set(p,y),this.h?this.h.next=T:this.g=T,this.h=T}}var st=new me(()=>new Tt,l=>l.reset());class Tt{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,se=!1,Re=new $e,le=()=>{const l=f.Promise.resolve(void 0);Je=()=>{l.then(j)}};var j=()=>{for(var l;l=P();){try{l.h.call(l.g)}catch(y){O(y)}var p=st;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}se=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return l})();function K(l,p){if(U.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Oe){e:{try{ge(p.nodeName);var B=!0;break e}catch{}B=!1}B||(p=null)}}else y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:oe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&K.aa.h.call(this)}}F(K,U);var oe={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),fe=0;function Pe(l,p,y,T,B){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!T,this.ha=B,this.key=++fe,this.da=this.fa=!1}function He(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function At(l){this.src=l,this.g={},this.h=0}At.prototype.add=function(l,p,y,T,B){var Q=l.toString();l=this.g[Q],l||(l=this.g[Q]=[],this.h++);var he=Lt(l,p,T,B);return-1<he?(p=l[he],y||(p.fa=!1)):(p=new Pe(p,this.src,Q,!!T,B),p.fa=y,l.push(p)),p};function ft(l,p){var y=p.type;if(y in l.g){var T=l.g[y],B=Array.prototype.indexOf.call(T,p,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(T,B,1),Q&&(He(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Lt(l,p,y,T){for(var B=0;B<l.length;++B){var Q=l[B];if(!Q.da&&Q.listener==p&&Q.capture==!!y&&Q.ha==T)return B}return-1}var Cr="closure_lm_"+(1e6*Math.random()|0),yi={};function On(l,p,y,T,B){if(Array.isArray(p)){for(var Q=0;Q<p.length;Q++)On(l,p[Q],y,T,B);return null}return y=ur(y),l&&l[ce]?l.K(p,y,v(T)?!!T.capture:!1,B):us(l,p,y,!1,T,B)}function us(l,p,y,T,B,Q){if(!p)throw Error("Invalid event type");var he=v(B)?!!B.capture:!!B,ht=vi(l);if(ht||(l[Cr]=ht=new At(l)),y=ht.add(p,y,T,he,Q),y.proxy)return y;if(T=qs(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Y||(B=he),B===void 0&&(B=!1),l.addEventListener(p.toString(),T,B);else if(l.attachEvent)l.attachEvent(lr(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function qs(){function l(y){return p.call(l.src,l.listener,y)}const p=cs;return l}function Gr(l,p,y,T,B){if(Array.isArray(p))for(var Q=0;Q<p.length;Q++)Gr(l,p[Q],y,T,B);else T=v(T)?!!T.capture:!!T,y=ur(y),l&&l[ce]?(l=l.i,p=String(p).toString(),p in l.g&&(Q=l.g[p],y=Lt(Q,y,T,B),-1<y&&(He(Q[y]),Array.prototype.splice.call(Q,y,1),Q.length==0&&(delete l.g[p],l.h--)))):l&&(l=vi(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Lt(p,y,T,B)),(y=-1<l?p[l]:null)&&ar(y))}function ar(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[ce])ft(p.i,l);else{var y=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(y,T,l.capture):p.detachEvent?p.detachEvent(lr(y),T):p.addListener&&p.removeListener&&p.removeListener(T),(y=vi(p))?(ft(y,l),y.h==0&&(y.src=null,p[Cr]=null)):He(l)}}}function lr(l){return l in yi?yi[l]:yi[l]="on"+l}function cs(l,p){if(l.da)l=!0;else{p=new K(p,this);var y=l.listener,T=l.ha||l.src;l.fa&&ar(l),l=y.call(T,p)}return l}function vi(l){return l=l[Cr],l instanceof At?l:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ur(l){return typeof l=="function"?l:(l[wn]||(l[wn]=function(p){return l.handleEvent(p)}),l[wn])}function Pt(){J.call(this),this.i=new At(this),this.M=this,this.F=null}F(Pt,J),Pt.prototype[ce]=!0,Pt.prototype.removeEventListener=function(l,p,y,T){Gr(this,l,p,y,T)};function St(l,p){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new U(p,l);else if(p instanceof U)p.target=p.target||l;else{var B=p;p=new U(T,l),k(p,B)}if(B=!0,y)for(var Q=y.length-1;0<=Q;Q--){var he=p.g=y[Q];B=qt(he,T,!0,p)&&B}if(he=p.g=l,B=qt(he,T,!0,p)&&B,B=qt(he,T,!1,p)&&B,y)for(Q=0;Q<y.length;Q++)he=p.g=y[Q],B=qt(he,T,!1,p)&&B}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var y=l.g[p],T=0;T<y.length;T++)He(y[T]);delete l.g[p],l.h--}}this.F=null},Pt.prototype.K=function(l,p,y,T){return this.i.add(String(l),p,!1,y,T)},Pt.prototype.L=function(l,p,y,T){return this.i.add(String(l),p,!0,y,T)};function qt(l,p,y,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var B=!0,Q=0;Q<p.length;++Q){var he=p[Q];if(he&&!he.da&&he.capture==y){var ht=he.listener,Ut=he.ha||he.src;he.fa&&ft(l.i,he),B=ht.call(Ut,T)!==!1&&B}}return B&&!T.defaultPrevented}function gn(l,p,y){if(typeof l=="function")y&&(l=I(l,y));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(l,p||0)}function cr(l){l.g=gn(()=>{l.g=null,l.i&&(l.i=!1,cr(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Qn extends J{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:cr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(l){J.call(this),this.h=l,this.g={}}F(Qr,J);var En=[];function _i(l){Me(l.g,function(p,y){this.g.hasOwnProperty(y)&&ar(p)},l),l.g={}}Qr.prototype.N=function(){Qr.aa.N.call(this),_i(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wi=f.JSON.stringify,Ei=f.JSON.parse,hs=class{stringify(l){return f.JSON.stringify(l,void 0)}parse(l){return f.JSON.parse(l,void 0)}};function Rr(){}Rr.prototype.h=null;function hr(l){return l.h||(l.h=l.i())}function Kr(){}var an={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){U.call(this,"d")}F(Tn,U);function Ti(){U.call(this,"c")}F(Ti,U);var Mn={},ds=null;function Ar(){return ds=ds||new Pt}Mn.La="serverreachability";function Pr(l){U.call(this,Mn.La,l)}F(Pr,U);function Sn(l){const p=Ar();St(p,new Pr(p))}Mn.STAT_EVENT="statevent";function fs(l,p){U.call(this,Mn.STAT_EVENT,l),this.stat=p}F(fs,U);function xt(l){const p=Ar();St(p,new fs(p,l))}Mn.Ma="timingevent";function D(l,p){U.call(this,Mn.Ma,l),this.size=p}F(D,U);function M(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){l()},p)}function W(){this.g=!0}W.prototype.xa=function(){this.g=!1};function ee(l,p,y,T,B,Q){l.info(function(){if(l.g)if(Q)for(var he="",ht=Q.split("&"),Ut=0;Ut<ht.length;Ut++){var et=ht[Ut].split("=");if(1<et.length){var Wt=et[0];et=et[1];var Ot=Wt.split("_");he=2<=Ot.length&&Ot[1]=="type"?he+(Wt+"="+et+"&"):he+(Wt+"=redacted&")}}else he=null;else he=Q;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+p+`
`+y+`
`+he})}function de(l,p,y,T,B,Q,he){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+p+`
`+y+`
`+Q+" "+he})}function Te(l,p,y,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Se(l,y)+(T?" "+T:"")})}function Ne(l,p){l.info(function(){return"TIMEOUT: "+p})}W.prototype.info=function(){};function Se(l,p){if(!l.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var he=1;he<B.length;he++)B[he]=""}}}}return wi(y)}catch{return p}}var Ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function be(){}F(be,Rr),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},_e=new be;function Ue(l,p,y,T){this.j=l,this.i=p,this.l=y,this.R=T||1,this.U=new Qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kt}function kt(){this.i=null,this.g="",this.h=!1}var ot={},qe={};function ct(l,p,y){l.L=1,l.v=Ri(Un(p)),l.m=y,l.P=!0,Kn(l,null)}function Kn(l,p){l.F=Date.now(),Qe(l),l.A=Un(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Pi(y.i,"t",T),l.C=0,y=l.j.J,l.h=new kt,l.g=dl(l.j,y?p:null,!l.m),0<l.O&&(l.M=new Qn(I(l.Y,l,l.g),l.O)),p=l.U,y=l.g,T=l.ca;var B="readystatechange";Array.isArray(B)||(B&&(En[0]=B.toString()),B=En);for(var Q=0;Q<B.length;Q++){var he=On(y,B[Q],T||p.handleEvent,!1,p.h||p);if(!he)break;p.g[he.key]=he}p=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Sn(),ee(l.i,l.u,l.A,l.l,l.R,l.m)}Ue.prototype.ca=function(l){l=l.target;const p=this.M;p&&In(l)==3?p.j():this.Y(l)},Ue.prototype.Y=function(l){try{if(l==this.g)e:{const Ot=In(this.g);var p=this.g.Ba();const Jn=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||Ot!=4||p==7||(p==8||0>=Jn?Sn(3):Sn(2)),jn(this);var y=this.g.Z();this.X=y;t:if(kr(this)){var T=Xo(this.g);l="";var B=T.length,Q=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),ln(this);var he="";break t}this.h.i=new f.TextDecoder}for(p=0;p<B;p++)this.h.h=!0,l+=this.h.i.decode(T[p],{stream:!(Q&&p==B-1)});T.length=0,this.h.g+=l,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,de(this.i,this.u,this.A,this.l,this.R,Ot,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,Ut=this.g;if((ht=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(ht)){var et=ht;break t}}et=null}if(y=et)Te(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nr(this,y);else{this.o=!1,this.s=3,xt(12),Jt(this),ln(this);break e}}if(this.P){y=!0;let zn;for(;!this.J&&this.C<he.length;)if(zn=Fn(this,he),zn==qe){Ot==4&&(this.s=4,xt(14),y=!1),Te(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==ot){this.s=4,xt(15),Te(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else Te(this.i,this.l,zn,null),Nr(this,zn);if(kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||he.length!=0||this.h.h||(this.s=1,xt(16),y=!1),this.o=this.o&&y,!y)Te(this.i,this.l,he,"[Invalid Chunked Response]"),Jt(this),ln(this);else if(0<he.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Zo(Wt),Wt.M=!0,xt(11))}}else Te(this.i,this.l,he,null),Nr(this,he);Ot==4&&Jt(this),this.o&&!this.J&&(Ot==4?ro(this.j,this):(this.o=!1,Qe(this)))}else Js(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Jt(this),ln(this)}}}catch{}finally{}};function kr(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Fn(l,p){var y=l.C,T=p.indexOf(`
`,y);return T==-1?qe:(y=Number(p.substring(y,T)),isNaN(y)?ot:(T+=1,T+y>p.length?qe:(p=p.slice(T,T+y),l.C=T+y,p)))}Ue.prototype.cancel=function(){this.J=!0,Jt(this)};function Qe(l){l.S=Date.now()+l.I,Si(l,l.I)}function Si(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=M(I(l.ba,l),p)}function jn(l){l.B&&(f.clearTimeout(l.B),l.B=null)}Ue.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ne(this.i,this.A),this.L!=2&&(Sn(),xt(17)),Jt(this),this.s=2,ln(this)):Si(this,this.S-l)};function ln(l){l.j.G==0||l.J||ro(l.j,l)}function Jt(l){jn(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,_i(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Nr(l,p){try{var y=l.j;if(y.G!=0&&(y.g==l||Ye(y.h,l))){if(!l.K&&Ye(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)no(y),gr(y);else break e;to(y),xt(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=M(I(y.Za,y),6e3));if(1>=Dr(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ei(y,11)}else if((l.K||y.g==l)&&no(y),!ie(p))for(B=y.Da.g.parse(p),p=0;p<B.length;p++){let et=B[p];if(y.T=et[0],et=et[1],y.G==2)if(et[0]=="c"){y.K=et[1],y.ia=et[2];const Wt=et[3];Wt!=null&&(y.la=Wt,y.j.info("VER="+y.la));const Ot=et[4];Ot!=null&&(y.Aa=Ot,y.j.info("SVER="+y.Aa));const Jn=et[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(T=1.5*Jn,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const zn=l.g;if(zn){const ws=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ws){var Q=T.h;Q.g||ws.indexOf("spdy")==-1&&ws.indexOf("quic")==-1&&ws.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Yn(Q,Q.h),Q.h=null))}if(T.D){const so=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(T.ya=so,pt(T.I,T.D,so))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var he=l;if(T.qa=hl(T,T.J?T.ia:null,T.W),he.K){ps(T.h,he);var ht=he,Ut=T.L;Ut&&(ht.I=Ut),ht.B&&(jn(ht),Qe(ht)),T.g=he}else _s(T);0<y.i.length&&Or(y)}else et[0]!="stop"&&et[0]!="close"||ei(y,7);else y.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ei(y,7):en(y):et[0]!="noop"&&y.l&&y.l.ta(et),y.v=0)}}Sn(4)}catch{}}var Ke=class{constructor(l,p){this.g=l,this.map=p}};function lt(l){this.l=l||10,f.PerformanceNavigationTiming?(l=f.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Dr(l){return l.h?1:l.g?l.g.size:0}function Ye(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Yn(l,p){l.g?l.g.add(p):l.h=p}function ps(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}lt.prototype.cancel=function(){if(this.i=Ws(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ws(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const y of l.g.values())p=p.concat(y.D);return p}return z(l.i)}function Gs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var p=[],y=l.length,T=0;T<y;T++)p.push(l[T]);return p}p=[],y=0;for(T in l)p[y++]=l[T];return p}function Qs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var p=[];l=l.length;for(var y=0;y<l;y++)p.push(y);return p}p=[],y=0;for(const T in l)p[y++]=T;return p}}}function xi(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var y=Qs(l),T=Gs(l),B=T.length,Q=0;Q<B;Q++)p.call(void 0,T[Q],y&&y[Q],l)}var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ac(l,p){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),B=null;if(0<=T){var Q=l[y].substring(0,T);B=l[y].substring(T+1)}else Q=l[y];p(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Yr){this.h=l.h,gs(this,l.j),this.o=l.o,this.g=l.g,Ii(this,l.s),this.l=l.l;var p=l.i,y=new Vr;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Ci(this,y),this.m=l.m}else l&&(p=String(l).match(ms))?(this.h=!1,gs(this,p[1]||"",!0),this.o=Ze(p[2]||""),this.g=Ze(p[3]||"",!0),Ii(this,p[4]),this.l=Ze(p[5]||"",!0),Ci(this,p[6]||"",!0),this.m=Ze(p[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}Yr.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Ai(p,Ks,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Ai(p,Ks,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Ai(y,y.charAt(0)=="/"?rl:nl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Ai(y,Qo)),l.join("")};function Un(l){return new Yr(l)}function gs(l,p,y){l.j=y?Ze(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ii(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Ci(l,p,y){p instanceof Vr?(l.i=p,Lr(l.i,l.h)):(y||(p=Ai(p,il)),l.i=new Vr(p,l.h))}function pt(l,p,y){l.i.set(p,y)}function Ri(l){return pt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ze(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ai(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,tl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function tl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ks=/[#\/\?@]/g,nl=/[#\?:]/g,rl=/[#\?]/g,il=/[#\?@]/g,Qo=/#/g;function Vr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Zt(l){l.g||(l.g=new Map,l.h=0,l.i&&ac(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Vr.prototype,r.add=function(l,p){Zt(this),this.i=null,l=Xn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function dr(l,p){Zt(l),p=Xn(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function fr(l,p){return Zt(l),p=Xn(l,p),l.g.has(p)}r.forEach=function(l,p){Zt(this),this.g.forEach(function(y,T){y.forEach(function(B){l.call(p,B,T,this)},this)},this)},r.na=function(){Zt(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let T=0;T<p.length;T++){const B=l[T];for(let Q=0;Q<B.length;Q++)y.push(p[T])}return y},r.V=function(l){Zt(this);let p=[];if(typeof l=="string")fr(this,l)&&(p=p.concat(this.g.get(Xn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)p=p.concat(l[y])}return p},r.set=function(l,p){return Zt(this),this.i=null,l=Xn(this,l),fr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},r.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Pi(l,p,y){dr(l,p),0<y.length&&(l.i=null,l.g.set(Xn(l,p),z(y)),l.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var T=p[y];const Q=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var B=Q;he[T]!==""&&(B+="="+encodeURIComponent(String(he[T]))),l.push(B)}}return this.i=l.join("&")};function Xn(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Lr(l,p){p&&!l.j&&(Zt(l),l.i=null,l.g.forEach(function(y,T){var B=T.toLowerCase();T!=B&&(dr(this,T),Pi(this,B,y))},l)),l.j=p}function lc(l,p){const y=new W;if(f.Image){const T=new Image;T.onload=C(xn,y,"TestLoadImage: loaded",!0,p,T),T.onerror=C(xn,y,"TestLoadImage: error",!1,p,T),T.onabort=C(xn,y,"TestLoadImage: abort",!1,p,T),T.ontimeout=C(xn,y,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function sl(l,p){const y=new W,T=new AbortController,B=setTimeout(()=>{T.abort(),xn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(Q=>{clearTimeout(B),Q.ok?xn(y,"TestPingServer: ok",!0,p):xn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),xn(y,"TestPingServer: error",!1,p)})}function xn(l,p,y,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(y)}catch{}}function uc(){this.g=new hs}function ol(l,p,y){const T=y||"";try{xi(l,function(B,Q){let he=B;v(B)&&(he=wi(B)),p.push(T+Q+"="+encodeURIComponent(he))})}catch(B){throw p.push(T+"type="+encodeURIComponent("_badmap")),B}}function Xr(l){this.l=l.Ub||null,this.j=l.eb||!1}F(Xr,Rr),Xr.prototype.g=function(){return new ys(this.l,this.j)},Xr.prototype.i=(function(l){return function(){return l}})({});function ys(l,p){Pt.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(ys,Pt),r=ys.prototype,r.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,mr(this)},r.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},r.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}r.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?pr(this):mr(this),this.readyState==3&&al(this)}},r.Ra=function(l){this.g&&(this.response=this.responseText=l,pr(this))},r.Qa=function(l){this.g&&(this.response=l,pr(this))},r.ga=function(){this.g&&pr(this)};function pr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,mr(l)}r.setRequestHeader=function(l,p){this.u.append(l,p)},r.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function mr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Jr(l){let p="";return Me(l,function(y,T){p+=T,p+=":",p+=y,p+=`\r
`}),p}function ki(l,p,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Jr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):pt(l,p,y))}function vt(l){Pt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(vt,Pt);var cc=/^https?$/i,Ko=["POST","PUT"];r=vt.prototype,r.Ha=function(l){this.J=l},r.ea=function(l,p,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?hr(this.o):hr(_e),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(Q){vs(this,Q);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)y.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Q of T.keys())y.set(Q,T.get(Q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=f.FormData&&l instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ko,p,void 0))||T||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of y)this.g.setRequestHeader(Q,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(l),this.u=!1}catch(Q){vs(this,Q)}};function vs(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Ys(l),Bn(l)}function Ys(l){l.A||(l.A=!0,St(l,"complete"),St(l,"error"))}r.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,St(this,"complete"),St(this,"abort"),Bn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),vt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Yo(this):this.bb())},r.bb=function(){Yo(this)};function Yo(l){if(l.h&&typeof h<"u"&&(!l.v[1]||In(l)!=4||l.Z()!=2)){if(l.u&&In(l)==4)gn(l.Ea,0,l);else if(St(l,"readystatechange"),In(l)==4){l.h=!1;try{const he=l.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var T;if(T=he===0){var B=String(l.D).match(ms)[1]||null;!B&&f.self&&f.self.location&&(B=f.self.location.protocol.slice(0,-1)),T=!cc.test(B?B.toLowerCase():"")}y=T}if(y)St(l,"complete"),St(l,"success");else{l.m=6;try{var Q=2<In(l)?l.g.statusText:""}catch{Q=""}l.l=Q+" ["+l.Z()+"]",Ys(l)}}finally{Bn(l)}}}}function Bn(l,p){if(l.g){Xs(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||St(l,"ready");try{y.onreadystatechange=T}catch{}}}function Xs(l){l.I&&(f.clearTimeout(l.I),l.I=null)}r.isActive=function(){return!!this.g};function In(l){return l.g?l.g.readyState:0}r.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Ei(p)}};function Xo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Js(l){const p={};l=(l.g&&2<=In(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(ie(l[T]))continue;var y=L(l[T]);const B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const Q=p[B]||[];p[B]=Q,Q.push(y)}S(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function Jo(l){this.Aa=0,this.i=[],this.j=new W,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,l),this.cb=br("retryDelaySeedMs",1e4,l),this.Wa=br("forwardChannelMaxRetries",2,l),this.wa=br("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(l&&l.concurrentRequestLimit),this.Da=new uc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Jo.prototype,r.la=8,r.G=1,r.connect=function(l,p,y,T){xt(0),this.W=l,this.H=p||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=hl(this,null,this.W),Or(this)};function en(l){if(Zs(l),l.G==3){var p=l.U++,y=Un(l.I);if(pt(y,"SID",l.K),pt(y,"RID",p),pt(y,"TYPE","terminate"),Zr(l,y),p=new Ue(l,l.j,p),p.L=2,p.v=Ri(Un(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=dl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Qe(p)}cl(l)}function gr(l){l.g&&(Zo(l),l.g.cancel(),l.g=null)}function Zs(l){gr(l),l.u&&(f.clearTimeout(l.u),l.u=null),no(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&f.clearTimeout(l.s),l.s=null)}function Or(l){if(!bt(l.h)&&!l.s){l.s=!0;var p=l.Ga;Je||le(),se||(Je(),se=!0),Re.add(p,l),l.B=0}}function hc(l,p){return Dr(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=M(I(l.Ga,l,p),ul(l,l.B)),l.B++,!0)}r.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const B=new Ue(this,this.j,l);let Q=this.o;if(this.S&&(Q?(Q=x(Q),k(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Ni(this,B,p),y=Un(this.I),pt(y,"RID",l),pt(y,"CVER",22),this.D&&pt(y,"X-HTTP-Session-Id",this.D),Zr(this,y),Q&&(this.O?p="headers="+encodeURIComponent(String(Jr(Q)))+"&"+p:this.m&&ki(y,this.m,Q)),Yn(this.h,B),this.Ua&&pt(y,"TYPE","init"),this.P?(pt(y,"$req",p),pt(y,"SID","null"),B.T=!0,ct(B,y,null)):ct(B,y,p),this.G=2}}else this.G==3&&(l?eo(this,l):this.i.length==0||bt(this.h)||eo(this))};function eo(l,p){var y;p?y=p.l:y=l.U++;const T=Un(l.I);pt(T,"SID",l.K),pt(T,"RID",y),pt(T,"AID",l.T),Zr(l,T),l.m&&l.o&&ki(T,l.m,l.o),y=new Ue(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),p&&(l.i=p.D.concat(l.i)),p=Ni(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Yn(l.h,y),ct(y,T,p)}function Zr(l,p){l.H&&Me(l.H,function(y,T){pt(p,T,y)}),l.l&&xi({},function(y,T){pt(p,T,y)})}function Ni(l,p,y){y=Math.min(l.i.length,y);var T=l.l?I(l.l.Na,l.l,l):null;e:{var B=l.i;let Q=-1;for(;;){const he=["count="+y];Q==-1?0<y?(Q=B[0].g,he.push("ofs="+Q)):Q=0:he.push("ofs="+Q);let ht=!0;for(let Ut=0;Ut<y;Ut++){let et=B[Ut].g;const Wt=B[Ut].map;if(et-=Q,0>et)Q=Math.max(0,B[Ut].g-100),ht=!1;else try{ol(Wt,he,"req"+et+"_")}catch{T&&T(Wt)}}if(ht){T=he.join("&");break e}}}return l=l.i.splice(0,y),p.D=l,T}function _s(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;Je||le(),se||(Je(),se=!0),Re.add(p,l),l.v=0}}function to(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=M(I(l.Fa,l),ul(l,l.v)),l.v++,!0)}r.Fa=function(){if(this.u=null,ll(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=M(I(this.ab,this),l)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),gr(this),ll(this))};function Zo(l){l.A!=null&&(f.clearTimeout(l.A),l.A=null)}function ll(l){l.g=new Ue(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=Un(l.qa);pt(p,"RID","rpc"),pt(p,"SID",l.K),pt(p,"AID",l.T),pt(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&pt(p,"TO",l.ja),pt(p,"TYPE","xmlhttp"),Zr(l,p),l.m&&l.o&&ki(p,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Ri(Un(p)),y.m=null,y.P=!0,Kn(y,l)}r.Za=function(){this.C!=null&&(this.C=null,gr(this),to(this),xt(19))};function no(l){l.C!=null&&(f.clearTimeout(l.C),l.C=null)}function ro(l,p){var y=null;if(l.g==p){no(l),Zo(l),l.g=null;var T=2}else if(Ye(l.h,p))y=p.D,ps(l.h,p),T=1;else return;if(l.G!=0){if(p.o)if(T==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var B=l.B;T=Ar(),St(T,new D(T,y)),Or(l)}else _s(l);else if(B=p.s,B==3||B==0&&0<p.X||!(T==1&&hc(l,p)||T==2&&to(l)))switch(y&&0<y.length&&(p=l.h,p.i=p.i.concat(y)),B){case 1:ei(l,5);break;case 4:ei(l,10);break;case 3:ei(l,6);break;default:ei(l,2)}}}function ul(l,p){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*p}function ei(l,p){if(l.j.info("Error code "+p),p==2){var y=I(l.fb,l),T=l.Xa;const B=!T;T=new Yr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||gs(T,"https"),Ri(T),B?lc(T.toString(),y):sl(T.toString(),y)}else xt(2);l.G=0,l.l&&l.l.sa(p),cl(l),Zs(l)}r.fb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function cl(l){if(l.G=0,l.ka=[],l.l){const p=Ws(l.h);(p.length!=0||l.i.length!=0)&&(q(l.ka,p),q(l.ka,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.ra()}}function hl(l,p,y){var T=y instanceof Yr?Un(y):new Yr(y);if(T.g!="")p&&(T.g=p+"."+T.g),Ii(T,T.s);else{var B=f.location;T=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;var Q=new Yr(null);T&&gs(Q,T),p&&(Q.g=p),B&&Ii(Q,B),y&&(Q.l=y),T=Q}return y=l.D,p=l.ya,y&&p&&pt(T,y,p),pt(T,"VER",l.la),Zr(l,T),T}function dl(l,p,y){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new vt(new Xr({eb:y})):new vt(l.pa),p.Ha(l.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ea(){}r=ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function io(){}io.prototype.g=function(l,p){return new yn(l,p)};function yn(l,p){Pt.call(this),this.g=new Jo(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!ie(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ie(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Mr(this)}F(yn,Pt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){en(this.g)},yn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=wi(l),l=y);p.i.push(new Ke(p.Ya++,l)),p.G==3&&Or(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,yn.aa.N.call(this)};function fl(l){Tn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}F(fl,Tn);function pl(){Ti.call(this),this.status=1}F(pl,Ti);function Mr(l){this.g=l}F(Mr,ea),Mr.prototype.ua=function(){St(this.g,"a")},Mr.prototype.ta=function(l){St(this.g,new fl(l))},Mr.prototype.sa=function(l){St(this.g,new pl)},Mr.prototype.ra=function(){St(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,My=function(){return new io},Oy=function(){return Ar()},by=Mn,rd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,pu=Ee,ve.COMPLETE="complete",Ly=ve,Kr.EventType=an,an.OPEN="a",an.CLOSE="b",an.ERROR="c",an.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Pa=Kr,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,Vy=vt}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const og="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new xy("@firebase/firestore");function Ao(){return Us.logLevel}function we(r,...e){if(Us.logLevel<=nt.DEBUG){const t=e.map(Nd);Us.debug(`Firestore (${Ho}): ${r}`,...t)}}function fi(r,...e){if(Us.logLevel<=nt.ERROR){const t=e.map(Nd);Us.error(`Firestore (${Ho}): ${r}`,...t)}}function Mo(r,...e){if(Us.logLevel<=nt.WARN){const t=e.map(Nd);Us.warn(`Firestore (${Ho}): ${r}`,...t)}}function Nd(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(r="Unexpected state"){const e=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+r;throw fi(e),new Error(e)}function ut(r,e){r||je()}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Bs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pn.UNAUTHENTICATED)))}shutdown(){}}class zT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $T{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ci,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ci)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ut(typeof s.accessToken=="string"),new Fy(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string"),new pn(e)}}class HT{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qT{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new HT(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class WT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ut(this.o===void 0);const s=u=>{u.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,we("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string"),this.R=t.token,new WT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=QT(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%e.length))}return s}}function rt(r,e){return r<e?-1:r>e?1:0}function Fo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Ht(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Ht(0,0))}static max(){return new Be(new Ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(),s===void 0?s=e.length-t:s>e.length-t&&je(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ba.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends Ba{construct(e,t,s){return new Et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ke(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const KT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Ba{construct(e,t,s){return new sn(e,t,s)}static isValidIdentifier(e){return KT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ke(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ke(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ke(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(u(),o++)}if(u(),h)throw new ke(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Et.fromString(e))}static fromName(e){return new Le(Et.fromString(e).popFirst(5))}static empty(){return new Le(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Et(e.slice()))}}function YT(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Be.fromTimestamp(s===1e9?new Ht(t+1,0):new Ht(t,s));return new es(o,Le.empty(),e)}function XT(r){return new es(r.readTime,r.key,-1)}class es{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new es(Be.min(),Le.empty(),-1)}static max(){return new es(Be.max(),Le.empty(),-1)}}function JT(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(r.documentKey,e.documentKey),t!==0?t:rt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==ZT)throw r;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,s)=>{t(e)}))}static reject(e){return new Z(((t,s)=>{s(e)}))}static waitFor(e){return new Z(((t,s)=>{let o=0,u=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++u,h&&u===o&&t()}),(g=>s(g)))})),h=!0,u===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next((o=>o?Z.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new Z(((s,o)=>{const u=e.length,h=new Array(u);let f=0;for(let g=0;g<u;g++){const v=g;t(e[v]).next((_=>{h[v]=_,++f,f===u&&s(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new Z(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function tS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Uu.oe=-1;function Bu(r){return r==null}function Cu(r){return r===0&&1/r==-1/0}function nS(r){return typeof r=="number"&&Number.isInteger(r)&&!Cu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ag(e)),e=iS(r.get(t),e);return ag(e)}function iS(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case"":t+="";break;default:t+=u}}return t}function ag(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function as(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Uy(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??rn.RED,this.left=o??rn.EMPTY,this.right=u??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new rn(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,t,s,o,u){return this}insert(e,t,s){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ug(this.data.getIterator())}getIteratorFrom(e){return new ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class ug{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Xt(sn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new By("Invalid base64 string: "+u):u}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const sS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(r){if(ut(!!r),typeof r=="string"){let e=0;const t=sS.exec(r);if(ut(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vt(r.seconds),nanos:Vt(r.nanos)}}function Vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ns(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function zu(r){const e=r.mapValue.fields.__previous_value__;return Dd(e)?zu(e):e}function za(r){const e=ts(r.mapValue.fields.__local_write_time__.timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,s,o,u,h,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class $a{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu={mapValue:{}};function rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dd(r)?4:lS(r)?9007199254740991:aS(r)?10:11:je()}function Hr(r,e){if(r===e)return!0;const t=rs(r);if(t!==rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return za(r).isEqual(za(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ts(o.timestampValue),f=ts(u.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ns(o.bytesValue).isEqual(ns(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return Vt(o.geoPointValue.latitude)===Vt(u.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Vt(o.integerValue)===Vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Vt(o.doubleValue),f=Vt(u.doubleValue);return h===f?Cu(h)===Cu(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Fo(r.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},f=u.mapValue.fields||{};if(lg(h)!==lg(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!Hr(h[g],f[g])))return!1;return!0})(r,e);default:return je()}}function Ha(r,e){return(r.values||[]).find((t=>Hr(t,e)))!==void 0}function jo(r,e){if(r===e)return 0;const t=rs(r),s=rs(e);if(t!==s)return rt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(r.booleanValue,e.booleanValue);case 2:return(function(u,h){const f=Vt(u.integerValue||u.doubleValue),g=Vt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return cg(r.timestampValue,e.timestampValue);case 4:return cg(za(r),za(e));case 5:return rt(r.stringValue,e.stringValue);case 6:return(function(u,h){const f=ns(u),g=ns(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,h){const f=u.split("/"),g=h.split("/");for(let v=0;v<f.length&&v<g.length;v++){const _=rt(f[v],g[v]);if(_!==0)return _}return rt(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,h){const f=rt(Vt(u.latitude),Vt(h.latitude));return f!==0?f:rt(Vt(u.longitude),Vt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return hg(r.arrayValue,e.arrayValue);case 10:return(function(u,h){var f,g,v,_;const E=u.fields||{},I=h.fields||{},C=(f=E.value)===null||f===void 0?void 0:f.arrayValue,F=(g=I.value)===null||g===void 0?void 0:g.arrayValue,z=rt(((v=C?.values)===null||v===void 0?void 0:v.length)||0,((_=F?.values)===null||_===void 0?void 0:_.length)||0);return z!==0?z:hg(C,F)})(r.mapValue,e.mapValue);case 11:return(function(u,h){if(u===hu.mapValue&&h===hu.mapValue)return 0;if(u===hu.mapValue)return 1;if(h===hu.mapValue)return-1;const f=u.fields||{},g=Object.keys(f),v=h.fields||{},_=Object.keys(v);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const I=rt(g[E],_[E]);if(I!==0)return I;const C=jo(f[g[E]],v[_[E]]);if(C!==0)return C}return rt(g.length,_.length)})(r.mapValue,e.mapValue);default:throw je()}}function cg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return rt(r,e);const t=ts(r),s=ts(e),o=rt(t.seconds,s.seconds);return o!==0?o:rt(t.nanos,s.nanos)}function hg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=jo(t[o],s[o]);if(u)return u}return rt(t.length,s.length)}function Uo(r){return id(r)}function id(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ts(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ns(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Le.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=id(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${id(t.fields[h])}`;return o+"}"})(r.mapValue):je()}function mu(r){switch(rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zu(r);return e?16+mu(e):16;case 5:return 2*r.stringValue.length;case 6:return ns(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+mu(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return as(s.fields,((u,h)=>{o+=u.length+mu(h)})),o})(r.mapValue);default:throw je()}}function sd(r){return!!r&&"integerValue"in r}function Vd(r){return!!r&&"arrayValue"in r}function dg(r){return!!r&&"nullValue"in r}function fg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gu(r){return!!r&&"mapValue"in r}function aS(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Va(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return as(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Va(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Va(r.arrayValue.values[t]);return e}return Object.assign({},r)}function lS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(t)}setAll(e){let t=sn.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Va(h):o.push(f.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());gu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];gu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){as(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Ln(Va(this.value))}}function zy(r){const e=[];return as(r.fields,((t,s)=>{const o=new sn([t]);if(gu(s)){const u=zy(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,s,o,u,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=f}static newInvalidDocument(e){return new mn(e,0,Be.min(),Be.min(),Be.min(),Ln.empty(),0)}static newFoundDocument(e,t,s,o){return new mn(e,1,t,Be.min(),s,o,0)}static newNoDocument(e,t){return new mn(e,2,t,Be.min(),Be.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Be.min(),Be.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t){this.position=e,this.inclusive=t}}function pg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=Le.comparator(Le.fromName(h.referenceValue),t.key):s=jo(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function mg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Hr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t="asc"){this.field=e,this.dir=t}}function uS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{}class $t extends $y{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new hS(e,t,s):t==="array-contains"?new pS(e,s):t==="in"?new mS(e,s):t==="not-in"?new gS(e,s):t==="array-contains-any"?new yS(e,s):new $t(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new dS(e,s):new fS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(jo(t,this.value)):t!==null&&rs(this.value)===rs(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends $y{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new qr(e,t)}matches(e){return Hy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hy(r){return r.op==="and"}function qy(r){return cS(r)&&Hy(r)}function cS(r){for(const e of r.filters)if(e instanceof qr)return!1;return!0}function od(r){if(r instanceof $t)return r.field.canonicalString()+r.op.toString()+Uo(r.value);if(qy(r))return r.filters.map((e=>od(e))).join(",");{const e=r.filters.map((t=>od(t))).join(",");return`${r.op}(${e})`}}function Wy(r,e){return r instanceof $t?(function(s,o){return o instanceof $t&&s.op===o.op&&s.field.isEqual(o.field)&&Hr(s.value,o.value)})(r,e):r instanceof qr?(function(s,o){return o instanceof qr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,f)=>u&&Wy(h,o.filters[f])),!0):!1})(r,e):void je()}function Gy(r){return r instanceof $t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(r):r instanceof qr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Gy).join(" ,")+"}"})(r):"Filter"}class hS extends $t{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class dS extends $t{constructor(e,t){super(e,"in",t),this.keys=Qy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fS extends $t{constructor(e,t){super(e,"not-in",t),this.keys=Qy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qy(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Le.fromName(s.referenceValue)))}class pS extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vd(t)&&Ha(t.arrayValue,this.value)}}class mS extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ha(this.value.arrayValue,t)}}class gS extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ha(this.value.arrayValue,t)}}class yS extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ha(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t=null,s=[],o=[],u=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=f,this.ue=null}}function gg(r,e=null,t=[],s=[],o=null,u=null,h=null){return new vS(r,e,t,s,o,u,h)}function Ld(r){const e=ze(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>od(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Bu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Uo(s))).join(",")),e.ue=t}return e.ue}function bd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!uS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Wy(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!mg(r.startAt,e.startAt)&&mg(r.endAt,e.endAt)}function ad(r){return Le.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t=null,s=[],o=[],u=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _S(r,e,t,s,o,u,h,f){return new $u(r,e,t,s,o,u,h,f)}function Od(r){return new $u(r)}function yg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function wS(r){return r.collectionGroup!==null}function La(r){const e=ze(r);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Xt(sn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(f=f.add(v.field))}))})),f})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Au(u,s))})),t.has(sn.keyField().canonicalString())||e.ce.push(new Au(sn.keyField(),s))}return e.ce}function zr(r){const e=ze(r);return e.le||(e.le=ES(e,La(r))),e.le}function ES(r,e){if(r.limitType==="F")return gg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Au(o.field,u)}));const t=r.endAt?new Ru(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ru(r.startAt.position,r.startAt.inclusive):null;return gg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function ld(r,e,t){return new $u(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Hu(r,e){return bd(zr(r),zr(e))&&r.limitType===e.limitType}function Ky(r){return`${Ld(zr(r))}|lt:${r.limitType}`}function Po(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Gy(o))).join(", ")}]`),Bu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${s})`})(zr(r))}; limitType=${r.limitType})`}function qu(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Le.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of La(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const v=pg(h,f,g);return h.inclusive?v<=0:v<0})(s.startAt,La(s),o)||s.endAt&&!(function(h,f,g){const v=pg(h,f,g);return h.inclusive?v>=0:v>0})(s.endAt,La(s),o))})(r,e)}function TS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Yy(r){return(e,t)=>{let s=!1;for(const o of La(r)){const u=SS(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function SS(r,e,t){const s=r.field.isKeyField()?Le.comparator(e.key,t.key):(function(u,h,f){const g=h.data.field(u),v=f.data.field(u);return g!==null&&v!==null?jo(g,v):je()})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Uy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Rt(Le.comparator);function pi(){return xS}const Xy=new Rt(Le.comparator);function ka(...r){let e=Xy;for(const t of r)e=e.insert(t.key,t);return e}function Jy(r){let e=Xy;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ms(){return ba()}function Zy(){return ba()}function ba(){return new zs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const IS=new Rt(Le.comparator),CS=new Xt(Le.comparator);function Xe(...r){let e=CS;for(const t of r)e=e.add(t);return e}const RS=new Xt(rt);function AS(){return RS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function ev(r){return{integerValue:""+r}}function PS(r,e){return nS(e)?ev(e):Md(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this._=void 0}}function kS(r,e,t){return r instanceof qa?(function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Dd(u)&&(u=zu(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}})(t,e):r instanceof Wa?nv(r,e):r instanceof Ga?rv(r,e):(function(o,u){const h=tv(o,u),f=vg(h)+vg(o.Pe);return sd(h)&&sd(o.Pe)?ev(f):Md(o.serializer,f)})(r,e)}function NS(r,e,t){return r instanceof Wa?nv(r,e):r instanceof Ga?rv(r,e):t}function tv(r,e){return r instanceof Pu?(function(s){return sd(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class qa extends Wu{}class Wa extends Wu{constructor(e){super(),this.elements=e}}function nv(r,e){const t=iv(e);for(const s of r.elements)t.some((o=>Hr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ga extends Wu{constructor(e){super(),this.elements=e}}function rv(r,e){let t=iv(e);for(const s of r.elements)t=t.filter((o=>!Hr(o,s)));return{arrayValue:{values:t}}}class Pu extends Wu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function vg(r){return Vt(r.integerValue||r.doubleValue)}function iv(r){return Vd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this.field=e,this.transform=t}}function VS(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Wa&&o instanceof Wa||s instanceof Ga&&o instanceof Ga?Fo(s.elements,o.elements,Hr):s instanceof Pu&&o instanceof Pu?Hr(s.Pe,o.Pe):s instanceof qa&&o instanceof qa})(r.transform,e.transform)}class LS{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Gu{}function sv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Fd(r.key,or.none()):new Xa(r.key,r.data,or.none());{const t=r.data,s=Ln.empty();let o=new Xt(sn.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ls(r.key,s,new Gn(o.toArray()),or.none())}}function bS(r,e,t){r instanceof Xa?(function(o,u,h){const f=o.value.clone(),g=wg(o.fieldTransforms,u,h.transformResults);f.setAll(g),u.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof ls?(function(o,u,h){if(!yu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const f=wg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(ov(o)),g.setAll(f),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Oa(r,e,t,s){return r instanceof Xa?(function(u,h,f,g){if(!yu(u.precondition,h))return f;const v=u.value.clone(),_=Eg(u.fieldTransforms,g,h);return v.setAll(_),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,s):r instanceof ls?(function(u,h,f,g){if(!yu(u.precondition,h))return f;const v=Eg(u.fieldTransforms,g,h),_=h.data;return _.setAll(ov(u)),_.setAll(v),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(u,h,f){return yu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function OS(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=tv(s.transform,o||null);u!=null&&(t===null&&(t=Ln.empty()),t.set(s.field,u))}return t||null}function _g(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Fo(s,o,((u,h)=>VS(u,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Xa extends Gu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ls extends Gu{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ov(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function wg(r,e,t){const s=new Map;ut(r.length===t.length);for(let o=0;o<t.length;o++){const u=r[o],h=u.transform,f=e.data.field(u.field);s.set(u.field,NS(h,f,t[o]))}return s}function Eg(r,e,t){const s=new Map;for(const o of r){const u=o.transform,h=t.data.field(o.field);s.set(o.field,kS(u,h,e))}return s}class Fd extends Gu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MS extends Gu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&bS(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Oa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Oa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Zy();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let f=this.applyToLocalView(h,u.mutatedFields);f=t.has(o.key)?null:f;const g=sv(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,((t,s)=>_g(t,s)))&&Fo(this.baseMutations,e.baseMutations,((t,s)=>_g(t,s)))}}class jd{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ut(e.mutations.length===s.length);let o=(function(){return IS})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new jd(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,tt;function BS(r){switch(r){default:return je();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function av(r){if(r===void 0)return fi("GRPC error has no .code"),re.UNKNOWN;switch(r){case Ft.OK:return re.OK;case Ft.CANCELLED:return re.CANCELLED;case Ft.UNKNOWN:return re.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return re.INTERNAL;case Ft.UNAVAILABLE:return re.UNAVAILABLE;case Ft.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ft.NOT_FOUND:return re.NOT_FOUND;case Ft.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ft.ABORTED:return re.ABORTED;case Ft.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ft.DATA_LOSS:return re.DATA_LOSS;default:return je()}}(tt=Ft||(Ft={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Fs([4294967295,4294967295],0);function Tg(r){const e=zS().encode(r),t=new Dy;return t.update(e),new Uint8Array(t.digest())}function Sg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fs([t,s],0),new Fs([o,u],0)]}class Ud{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Na(`Invalid padding: ${t}`);if(s<0)throw new Na(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Na(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fs.fromNumber(this.Ie)}Ee(e,t,s){let o=e.add(t.multiply(Fs.fromNumber(s)));return o.compare($S)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Tg(e),[s,o]=Sg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);if(!this.de(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Ud(u,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.Ie===0)return;const t=Tg(e),[s,o]=Sg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qu(Be.min(),o,new Rt(rt),pi(),Xe())}}class Ja{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ja(s,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class lv{constructor(e,t){this.targetId=e,this.me=t}}class uv{constructor(e,t,s=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class xg{constructor(){this.fe=0,this.ge=Cg(),this.pe=on.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),t=Xe(),s=Xe();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:je()}})),new Ja(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=Cg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class HS{constructor(e){this.Le=e,this.Be=new Map,this.ke=pi(),this.qe=Ig(),this.Qe=new Rt(rt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const s=this.Ge(t);switch(e.state){case 0:this.ze(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),s.De(e.resumeToken));break;default:je()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((s,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,s=e.me.count,o=this.Je(t);if(o){const u=o.target;if(ad(u))if(s===0){const h=new Le(u.path);this.Ue(t,h,mn.newNoDocument(h,Be.min()))}else ut(s===1);else{const h=this.Ye(t);if(h!==s){const f=this.Ze(e),g=f?this.Xe(f,e,h):1;if(g!==0){this.je(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,v)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,f;try{h=ns(s).toUint8Array()}catch(g){if(g instanceof By)return Mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Ud(h,o,u)}catch(g){return Mo(g instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,t,s){return t.me.count===s-this.nt(e,t.targetId)?0:2}nt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const h=this.Le.tt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,u,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((u,h)=>{const f=this.Je(h);if(f){if(u.current&&ad(f.target)){const g=new Le(f.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,mn.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}}));let s=Xe();this.qe.forEach(((u,h)=>{let f=!0;h.forEachWhile((g=>{const v=this.Je(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(u))})),this.ke.forEach(((u,h)=>h.setReadTime(e)));const o=new Qu(e,t,this.Qe,this.ke,s);return this.ke=pi(),this.qe=Ig(),this.Qe=new Rt(rt),o}$e(e,t){if(!this.ze(e))return;const s=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new xg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xt(rt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xg),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ig(){return new Rt(Le.comparator)}function Cg(){return new Rt(Le.comparator)}const qS={asc:"ASCENDING",desc:"DESCENDING"},WS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GS={and:"AND",or:"OR"};class QS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ud(r,e){return r.useProto3Json||Bu(e)?e:{value:e}}function ku(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function KS(r,e){return ku(r,e.toTimestamp())}function $r(r){return ut(!!r),Be.fromTimestamp((function(t){const s=ts(t);return new Ht(s.seconds,s.nanos)})(r))}function Bd(r,e){return cd(r,e).canonicalString()}function cd(r,e){const t=(function(o){return new Et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function hv(r){const e=Et.fromString(r);return ut(gv(e)),e}function hd(r,e){return Bd(r.databaseId,e.path)}function $h(r,e){const t=hv(e);if(t.get(1)!==r.databaseId.projectId)throw new ke(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ke(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Le(fv(t))}function dv(r,e){return Bd(r.databaseId,e)}function YS(r){const e=hv(r);return e.length===4?Et.emptyPath():fv(e)}function dd(r){return new Et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function fv(r){return ut(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Rg(r,e,t){return{name:hd(r,e),fields:t.value.mapValue.fields}}function XS(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:je()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(v,_){return v.useProto3Json?(ut(_===void 0||typeof _=="string"),on.fromBase64String(_||"")):(ut(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),on.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(v){const _=v.code===void 0?re.UNKNOWN:av(v.code);return new ke(_,v.message||"")})(h);t=new uv(s,o,u,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$h(r,s.document.name),u=$r(s.document.updateTime),h=s.document.createTime?$r(s.document.createTime):Be.min(),f=new Ln({mapValue:{fields:s.document.fields}}),g=mn.newFoundDocument(o,u,h,f),v=s.targetIds||[],_=s.removedTargetIds||[];t=new vu(v,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$h(r,s.document),u=s.readTime?$r(s.readTime):Be.min(),h=mn.newNoDocument(o,u),f=s.removedTargetIds||[];t=new vu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$h(r,s.document),u=s.removedTargetIds||[];t=new vu([],u,o,null)}else{if(!("filter"in e))return je();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new US(o,u),f=s.targetId;t=new lv(f,h)}}return t}function JS(r,e){let t;if(e instanceof Xa)t={update:Rg(r,e.key,e.value)};else if(e instanceof Fd)t={delete:hd(r,e.key)};else if(e instanceof ls)t={update:Rg(r,e.key,e.data),updateMask:ax(e.fieldMask)};else{if(!(e instanceof MS))return je();t={verify:hd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const f=h.transform;if(f instanceof qa)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ga)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Pu)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw je()})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:KS(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:je()})(r,e.precondition)),t}function ZS(r,e){return r&&r.length>0?(ut(e!==void 0),r.map((t=>(function(o,u){let h=o.updateTime?$r(o.updateTime):$r(u);return h.isEqual(Be.min())&&(h=$r(u)),new LS(h,o.transformResults||[])})(t,e)))):[]}function ex(r,e){return{documents:[dv(r,e.path)]}}function tx(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=dv(r,o);const u=(function(v){if(v.length!==0)return mv(qr.create(v,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(v){if(v.length!==0)return v.map((_=>(function(I){return{field:ko(I.field),direction:ix(I.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=ud(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{_t:t,parent:o}}function nx(r){let e=YS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ut(s===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];t.where&&(u=(function(E){const I=pv(E);return I instanceof qr&&qy(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(F){return new Au(No(F.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,Bu(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,C=E.values||[];return new Ru(C,I)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const I=!E.before,C=E.values||[];return new Ru(C,I)})(t.endAt)),_S(e,o,h,u,f,"F",g,v)}function rx(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=No(t.unaryFilter.field);return $t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=No(t.unaryFilter.field);return $t.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=No(t.unaryFilter.field);return $t.create(h,"!=",{nullValue:"NULL_VALUE"});default:return je()}})(r):r.fieldFilter!==void 0?(function(t){return $t.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return qr.create(t.compositeFilter.filters.map((s=>pv(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je()}})(t.compositeFilter.op))})(r):je()}function ix(r){return qS[r]}function sx(r){return WS[r]}function ox(r){return GS[r]}function ko(r){return{fieldPath:r.canonicalString()}}function No(r){return sn.fromServerFormat(r.fieldPath)}function mv(r){return r instanceof $t?(function(t){if(t.op==="=="){if(fg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(dg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(dg(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:sx(t.op),value:t.value}}})(r):r instanceof qr?(function(t){const s=t.getFilters().map((o=>mv(o)));return s.length===1?s[0]:{compositeFilter:{op:ox(t.op),filters:s}}})(r):je()}function ax(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t,s,o,u=Be.min(),h=Be.min(),f=on.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.ct=e}}function ux(r){const e=nx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.un=new hx}addToCollectionParentIndex(e,t){return this.un.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(es.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Xt(Et.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Xt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vn{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bo(0)}static kn(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg([r,e],[t,s]){const o=rt(r,t);return o===0?rt(e,s):o}class dx{constructor(e){this.Un=e,this.buffer=new Xt(Pg),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Pg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fx{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){we("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?we("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await qo(t)}await this.Hn(3e5)}))}}class px{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Uu.oe);const s=new dx(t);return this.Jn.forEachTarget(e,(o=>s.zn(o.sequenceNumber))).next((()=>this.Jn.Zn(e,(o=>s.zn(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Ag)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ag):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let s,o,u,h,f,g,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(v=Date.now(),Ao()<=nt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${u} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(v-g)+`ms
Total Duration: ${v-_}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function mx(r,e){return new px(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.changes=new zs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Oa(s.mutation,o,Gn.empty(),Ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Xe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Xe()){const o=Ms();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let h=ka();return u.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=Ms();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Xe())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let u=pi();const h=ba(),f=(function(){return ba()})();return t.forEach(((g,v)=>{const _=s.get(v.key);o.has(v.key)&&(_===void 0||_.mutation instanceof ls)?u=u.insert(v.key,v):_!==void 0?(h.set(v.key,_.mutation.getFieldMask()),Oa(_.mutation,v,_.mutation.getFieldMask(),Ht.now())):h.set(v.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((v,_)=>h.set(v,_))),t.forEach(((v,_)=>{var E;return f.set(v,new yx(_,(E=h.get(v))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(e,t){const s=ba();let o=new Rt(((h,f)=>h-f)),u=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let _=s.get(g)||Gn.empty();_=f.applyToLocalView(v,_),s.set(g,_);const E=(o.get(f.batchId)||Xe()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,_=g.value,E=Zy();_.forEach((I=>{if(!u.has(I)){const C=sv(t.get(I),s.get(I));C!==null&&E.set(I,C),u=u.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,E))}return Z.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return Le.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):Z.resolve(Ms());let f=-1,g=u;return h.next((v=>Z.forEach(v,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),u.get(_)?Z.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{g=g.insert(_,I)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,g,v,Xe()))).next((_=>({batchId:f,changes:Jy(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((s=>{let o=ka();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=ka();return this.indexManager.getCollectionParents(e,u).next((f=>Z.forEach(f,(g=>{const v=(function(E,I){return new $u(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((_=>{_.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((h=>{u.forEach(((g,v)=>{const _=v.getKey();h.get(_)===null&&(h=h.insert(_,mn.newInvalidDocument(_)))}));let f=ka();return h.forEach(((g,v)=>{const _=u.get(g);_!==void 0&&Oa(_.mutation,v,Gn.empty(),Ht.now()),qu(t,v)&&(f=f.insert(g,v))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:$r(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:ux(o.bundledQuery),readTime:$r(o.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.overlays=new Rt(Le.comparator),this.Ir=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ms();return Z.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.ht(e,t,u)})),Z.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const o=Ms(),u=t.length+1,h=new Le(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new Rt(((v,_)=>v-_));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let _=u.get(v.largestBatchId);_===null&&(_=Ms(),u=u.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const f=Ms(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,_)=>f.set(v,_))),!(f.size()>=o)););return Z.resolve(f)}ht(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new jS(t,s));let u=this.Ir.get(t);u===void 0&&(u=Xe(),this.Ir.set(t,u)),this.Ir.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this.Tr=new Xt(Yt.Er),this.dr=new Xt(Yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const s=new Yt(e,t);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Vr(new Yt(e,t))}mr(e,t){e.forEach((s=>this.removeReference(s,t)))}gr(e){const t=new Le(new Et([])),s=new Yt(t,e),o=new Yt(t,e+1),u=[];return this.dr.forEachInRange([s,o],(h=>{this.Vr(h),u.push(h.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Le(new Et([])),s=new Yt(t,e),o=new Yt(t,e+1);let u=Xe();return this.dr.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Yt(e,0),s=this.Tr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Le.comparator(e.key,t.key)||rt(e.wr,t.wr)}static Ar(e,t){return rt(e.wr,t.wr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Yt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new FS(u,t,s,o);this.mutationQueue.push(h);for(const f of o)this.br=this.br.add(new Yt(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(h)}lookupMutationBatch(e,t){return Z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.vr(s),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([s,o],(h=>{const f=this.Dr(h.wr);u.push(f)})),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Xt(rt);return t.forEach((o=>{const u=new Yt(o,0),h=new Yt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],(f=>{s=s.add(f.wr)}))})),Z.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;Le.isDocumentKey(u)||(u=u.child(""));const h=new Yt(new Le(u),0);let f=new Xt(rt);return this.br.forEachWhile((g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.wr)),!0)}),h),Z.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ut(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return Z.forEach(t.mutations,(o=>{const u=new Yt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,t){const s=new Yt(t,0),o=this.br.firstAfterOrEqual(s);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.Mr=e,this.docs=(function(){return new Rt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let s=pi();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():mn.newInvalidDocument(o))})),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=pi();const h=t.path,f=new Le(h.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:_}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||JT(XT(_),s)<=0||(o.has(_.key)||qu(t,_))&&(u=u.insert(_.key,_.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(e,t,s,o){je()}Or(e,t){return Z.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new xx(this)}getSize(e){return Z.resolve(this.size)}}class xx extends gx{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),Z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.persistence=e,this.Nr=new zs((t=>Ld(t)),bd),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zd,this.targetCount=0,this.kr=Bo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((s,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Lr&&(this.Lr=t),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Kn(t),Z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.Nr.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Z.waitFor(u).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.Nr.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this.Br.Rr(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this.Br.mr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),Z.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Br.yr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Uu(0),this.Kr=!1,this.Kr=!0,this.$r=new Ex,this.referenceDelegate=e(this),this.Ur=new Ix(this),this.indexManager=new cx,this.remoteDocumentCache=(function(o){return new Sx(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new lx(t),this.Gr=new _x(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.qr[e.toKey()];return s||(s=new Tx(t,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,s){we("MemoryPersistence","Starting transaction:",e);const o=new Cx(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,t){return Z.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,t))))}}class Cx extends eS{constructor(e){super(),this.currentSequenceNumber=e}}class $d{constructor(e){this.persistence=e,this.Jr=new zd,this.Yr=null}static Zr(e){return new $d(e)}get Xr(){if(this.Yr)return this.Yr;throw je()}addReference(e,t,s){return this.Jr.addReference(s,t),this.Xr.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.Jr.removeReference(s,t),this.Xr.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,(s=>{const o=Le.fromPath(s);return this.ei(e,o).next((u=>{u||t.removeEntry(o,Be.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((s=>{s?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Z.or([()=>Z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Nu{constructor(e,t){this.persistence=e,this.ti=new zs((s=>rS(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=mx(this,t)}static Zr(e,t){return new Nu(e,t)}zr(){}jr(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}er(e){let t=0;return this.Zn(e,(s=>{t++})).next((()=>t))}Zn(e,t){return Z.forEach(this.ti,((s,o)=>this.nr(e,s,o).next((u=>u?Z.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.Or(e,(h=>this.nr(e,h,t).next((f=>{f||(s++,u.removeEntry(h,Be.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ti.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.ti.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),Z.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mu(e.data.value)),t}nr(e,t,s){return Z.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ti.get(t);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.$i=s,this.Ui=o}static Wi(e,t){let s=Xe(),o=Xe();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Hd(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return IE()?8:tS(SE())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.Yi(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.Zi(e,t,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new Rx;return this.Xi(e,t,h).next((f=>{if(u.result=f,this.zi)return this.es(e,t,h,f.size)}))})).next((()=>u.result))}es(e,t,s,o){return s.documentReadCount<this.ji?(Ao()<=nt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Ao()<=nt.DEBUG&&we("QueryEngine","Query:",Po(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(Ao()<=nt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):Z.resolve())}Yi(e,t){if(yg(t))return Z.resolve(null);let s=zr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=ld(t,null,"F"),s=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Xe(...u);return this.Ji.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const v=this.ts(t,f);return this.ns(t,v,h,g.readTime)?this.Yi(e,ld(t,null,"F")):this.rs(e,v,t,g)}))))})))))}Zi(e,t,s,o){return yg(t)||o.isEqual(Be.min())?Z.resolve(null):this.Ji.getDocuments(e,s).next((u=>{const h=this.ts(t,u);return this.ns(t,h,s,o)?Z.resolve(null):(Ao()<=nt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(t)),this.rs(e,h,t,YT(o,-1)).next((f=>f)))}))}ts(e,t){let s=new Xt(Yy(e));return t.forEach(((o,u)=>{qu(e,u)&&(s=s.add(u))})),s}ns(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,s){return Ao()<=nt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Po(t)),this.Ji.getDocumentsMatchingQuery(e,t,es.min(),s)}rs(e,t,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t,s,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new Rt(rt),this._s=new zs((u=>Ld(u)),bd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function kx(r,e,t,s){return new Px(r,e,t,s)}async function vv(r,e){const t=ze(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],f=[];let g=Xe();for(const v of o){h.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}for(const v of u){f.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next((v=>({hs:v,removedBatchIds:h,addedBatchIds:f})))}))}))}function Nx(r,e){const t=ze(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return(function(f,g,v,_){const E=v.batch,I=E.keys();let C=Z.resolve();return I.forEach((F=>{C=C.next((()=>_.getEntry(g,F))).next((z=>{const q=v.docVersions.get(F);ut(q!==null),z.version.compareTo(q)<0&&(E.applyToRemoteDocument(z,v),z.isValidDocument()&&(z.setReadTime(v.commitVersion),_.addEntry(z)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Xe();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function _v(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Dx(r,e){const t=ze(r),s=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach(((_,E)=>{const I=o.get(E);if(!I)return;f.push(t.Ur.removeMatchingKeys(u,_.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(u,_.addedDocuments,E))));let C=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(on.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,s)),o=o.insert(E,C),(function(z,q,me){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0})(I,C,_)&&f.push(t.Ur.updateTargetData(u,C))}));let g=pi(),v=Xe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,_))})),f.push(Vx(u,h,e.documentUpdates).next((_=>{g=_.Ps,v=_.Is}))),!s.isEqual(Be.min())){const _=t.Ur.getLastRemoteSnapshotVersion(u).next((E=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,s)));f.push(_)}return Z.waitFor(f).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,v))).next((()=>g))})).then((u=>(t.os=o,u)))}function Vx(r,e,t){let s=Xe(),o=Xe();return t.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let h=pi();return t.forEach(((f,g)=>{const v=u.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Be.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):we("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)})),{Ps:h,Is:o}}))}function Lx(r,e){const t=ze(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function bx(r,e){const t=ze(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Ur.getTargetData(s,e).next((u=>u?(o=u,Z.resolve(o)):t.Ur.allocateTargetId(s).next((h=>(o=new Qi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(s.targetId,s),t._s.set(e,s.targetId)),s}))}async function fd(r,e,t){const s=ze(r),o=s.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Wo(h))throw h;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function kg(r,e,t){const s=ze(r);let o=Be.min(),u=Xe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,_){const E=ze(g),I=E._s.get(_);return I!==void 0?Z.resolve(E.os.get(I)):E.Ur.getTargetData(v,_)})(s,h,zr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(h,f.targetId).next((g=>{u=g}))})).next((()=>s.ss.getDocumentsMatchingQuery(h,e,t?o:Be.min(),t?u:Xe()))).next((f=>(Ox(s,TS(e),f),{documents:f,Ts:u})))))}function Ox(r,e,t){let s=r.us.get(e)||Be.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.us.set(e,s)}class Ng{constructor(){this.activeTargetIds=AS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mx{constructor(){this.so=new Ng,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,s){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ng,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=null;function Hh(){return du===null?du=(function(){return 268435456+Math.round(2147483648*Math.random())})():du++,"0x"+du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class Bx extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,s,o,u,h){const f=Hh(),g=this.xo(t,s.toUriEncodedString());we("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,u,h),this.No(t,g,v,o).then((_=>(we("RestConnection",`Received RPC '${t}' ${f}: `,_),_)),(_=>{throw Mo("RestConnection",`RPC '${t}' ${f} failed with error: `,_,"url: ",g,"request:",o),_}))}Lo(t,s,o,u,h,f){return this.Mo(t,s,o,u,h)}Oo(t,s,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((u,h)=>t[h]=u)),o&&o.headers.forEach(((u,h)=>t[h]=u))}xo(t,s){const o=jx[t];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,s,o){const u=Hh();return new Promise(((h,f)=>{const g=new Vy;g.setWithCredentials(!0),g.listenOnce(Ly.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case pu.NO_ERROR:const _=g.getResponseJson();we(fn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case pu.TIMEOUT:we(fn,`RPC '${e}' ${u} timed out`),f(new ke(re.DEADLINE_EXCEEDED,"Request time out"));break;case pu.HTTP_ERROR:const E=g.getStatus();if(we(fn,`RPC '${e}' ${u} failed with status:`,E,"response text:",g.getResponseText()),E>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I?.error;if(C&&C.status&&C.message){const F=(function(q){const me=q.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(me)>=0?me:re.UNKNOWN})(C.status);f(new ke(F,C.message))}else f(new ke(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ke(re.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{we(fn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);we(fn,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",v,s,15)}))}Bo(e,t,s){const o=Hh(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=My(),f=Oy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=u.join("");we(fn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const E=h.createWebChannel(_,g);let I=!1,C=!1;const F=new Ux({Io:q=>{C?we(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(I||(we(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),we(fn,`RPC '${e}' stream ${o} sending:`,q),E.send(q))},To:()=>E.close()}),z=(q,me,ie)=>{q.listen(me,(pe=>{try{ie(pe)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return z(E,Pa.EventType.OPEN,(()=>{C||(we(fn,`RPC '${e}' stream ${o} transport opened.`),F.yo())})),z(E,Pa.EventType.CLOSE,(()=>{C||(C=!0,we(fn,`RPC '${e}' stream ${o} transport closed`),F.So())})),z(E,Pa.EventType.ERROR,(q=>{C||(C=!0,Mo(fn,`RPC '${e}' stream ${o} transport errored:`,q),F.So(new ke(re.UNAVAILABLE,"The operation could not be completed")))})),z(E,Pa.EventType.MESSAGE,(q=>{var me;if(!C){const ie=q.data[0];ut(!!ie);const pe=ie,ge=pe.error||((me=pe[0])===null||me===void 0?void 0:me.error);if(ge){we(fn,`RPC '${e}' stream ${o} received error:`,ge);const Oe=ge.status;let Me=(function(R){const k=Ft[R];if(k!==void 0)return av(k)})(Oe),S=ge.message;Me===void 0&&(Me=re.INTERNAL,S="Unknown error status: "+Oe+" with message "+ge.message),C=!0,F.So(new ke(Me,S)),E.close()}else we(fn,`RPC '${e}' stream ${o} received:`,ie),F.bo(ie)}})),z(f,by.STAT_EVENT,(q=>{q.stat===rd.PROXY?we(fn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===rd.NOPROXY&&we(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.wo()}),0),F}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(r){return new QS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t,s=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=s,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-s);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,t,s,o,u,h,f,g){this.ui=e,this.Ho=s,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===t&&this.P_(s,o)}),(s=>{e((()=>{const o=new ke(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,t){const s=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zx extends Ev{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=XS(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Be.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Be.min():h.readTime?$r(h.readTime):Be.min()})(e);return this.listener.d_(t,s)}A_(e){const t={};t.database=dd(this.serializer),t.addTarget=(function(u,h){let f;const g=h.target;if(f=ad(g)?{documents:ex(u,g)}:{query:tx(u,g)._t},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=cv(u,h.resumeToken);const v=ud(u,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(Be.min())>0){f.readTime=ku(u,h.snapshotVersion.toTimestamp());const v=ud(u,h.expectedCount);v!==null&&(f.expectedCount=v)}return f})(this.serializer,e);const s=rx(this.serializer,e);s&&(t.labels=s),this.a_(t)}R_(e){const t={};t.database=dd(this.serializer),t.removeTarget=e,this.a_(t)}}class $x extends Ev{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ut(!!e.streamToken),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=ZS(e.writeResults,e.commitTime),s=$r(e.commitTime);return this.listener.g_(s,t)}p_(){const e={};e.database=dd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>JS(this.serializer,s)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ke(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Mo(e,cd(t,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(re.UNKNOWN,u.toString())}))}Lo(e,t,s,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Lo(e,cd(t,s),o,h,f,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ke(re.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class qx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fi(t),this.D_=!1):we("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((h=>{s.enqueueAndForget((async()=>{$s(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const v=ze(g);v.L_.add(4),await Za(v),v.q_.set("Unknown"),v.L_.delete(4),await Yu(v)})(this))}))})),this.q_=new qx(s,o)}}async function Yu(r){if($s(r))for(const e of r.B_)await e(!0)}async function Za(r){for(const e of r.B_)await e(!1)}function Tv(r,e){const t=ze(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Qd(t)?Gd(t):Go(t).r_()&&Wd(t,e))}function qd(r,e){const t=ze(r),s=Go(t);t.N_.delete(e),s.r_()&&Sv(t,e),t.N_.size===0&&(s.r_()?s.o_():$s(t)&&t.q_.set("Unknown"))}function Wd(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(r).A_(e)}function Sv(r,e){r.Q_.xe(e),Go(r).R_(e)}function Gd(r){r.Q_=new HS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Go(r).start(),r.q_.v_()}function Qd(r){return $s(r)&&!Go(r).n_()&&r.N_.size>0}function $s(r){return ze(r).L_.size===0}function xv(r){r.Q_=void 0}async function Gx(r){r.q_.set("Online")}async function Qx(r){r.N_.forEach(((e,t)=>{Wd(r,e)}))}async function Kx(r,e){xv(r),Qd(r)?(r.q_.M_(e),Gd(r)):r.q_.set("Unknown")}async function Yx(r,e,t){if(r.q_.set("Online"),e instanceof uv&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const f of u.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.N_.delete(f),o.Q_.removeTarget(f))})(r,e)}catch(s){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Du(r,s)}else if(e instanceof vu?r.Q_.Ke(e):e instanceof lv?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Be.min()))try{const s=await _v(r.localStore);t.compareTo(s)>=0&&await(function(u,h){const f=u.Q_.rt(h);return f.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.N_.get(v);_&&u.N_.set(v,_.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,v)=>{const _=u.N_.get(g);if(!_)return;u.N_.set(g,_.withResumeToken(on.EMPTY_BYTE_STRING,_.snapshotVersion)),Sv(u,g);const E=new Qi(_.target,g,v,_.sequenceNumber);Wd(u,E)})),u.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){we("RemoteStore","Failed to raise snapshot:",s),await Du(r,s)}}async function Du(r,e,t){if(!Wo(e))throw e;r.L_.add(1),await Za(r),r.q_.set("Offline"),t||(t=()=>_v(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{we("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await Yu(r)}))}function Iv(r,e){return e().catch((t=>Du(r,t,e)))}async function Xu(r){const e=ze(r),t=is(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xx(e);)try{const o=await Lx(e.localStore,s);if(o===null){e.O_.length===0&&t.o_();break}s=o.batchId,Jx(e,o)}catch(o){await Du(e,o)}Cv(e)&&Rv(e)}function Xx(r){return $s(r)&&r.O_.length<10}function Jx(r,e){r.O_.push(e);const t=is(r);t.r_()&&t.V_&&t.m_(e.mutations)}function Cv(r){return $s(r)&&!is(r).n_()&&r.O_.length>0}function Rv(r){is(r).start()}async function Zx(r){is(r).p_()}async function eI(r){const e=is(r);for(const t of r.O_)e.m_(t.mutations)}async function tI(r,e,t){const s=r.O_.shift(),o=jd.from(s,e,t);await Iv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Xu(r)}async function nI(r,e){e&&is(r).V_&&await(async function(s,o){if((function(h){return BS(h)&&h!==re.ABORTED})(o.code)){const u=s.O_.shift();is(s).s_(),await Iv(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Xu(s)}})(r,e),Cv(r)&&Rv(r)}async function Vg(r,e){const t=ze(r);t.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const s=$s(t);t.L_.add(3),await Za(t),s&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Yu(t)}async function rI(r,e){const t=ze(r);e?(t.L_.delete(2),await Yu(t)):e||(t.L_.add(2),await Za(t),t.q_.set("Unknown"))}function Go(r){return r.K_||(r.K_=(function(t,s,o){const u=ze(t);return u.w_(),new zx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Eo:Gx.bind(null,r),Ro:Qx.bind(null,r),mo:Kx.bind(null,r),d_:Yx.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Qd(r)?Gd(r):r.q_.set("Unknown")):(await r.K_.stop(),xv(r))}))),r.K_}function is(r){return r.U_||(r.U_=(function(t,s,o){const u=ze(t);return u.w_(),new $x(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zx.bind(null,r),mo:nI.bind(null,r),f_:eI.bind(null,r),g_:tI.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Xu(r)):(await r.U_.stop(),r.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,f=new Kd(e,t,h,o,u);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(r,e){if(fi("AsyncQueue",`${e}: ${r}`),Wo(r))return new ke(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=ka(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new Vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.W_=new Rt(Le.comparator)}track(e){const t=e.doc.key,s=this.W_.get(t);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(t,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(t):e.type===1&&s.type===2?this.W_=this.W_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):je():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zo{constructor(e,t,s,o,u,h,f,g,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new zo(e,t,Vo.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class sI{constructor(){this.queries=bg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,s){const o=ze(t),u=o.queries;o.queries=bg(),u.forEach(((h,f)=>{for(const g of f.j_)g.onError(s)}))})(this,new ke(re.ABORTED,"Firestore shutting down"))}}function bg(){return new zs((r=>Ky(r)),Hu)}async function Av(r,e){const t=ze(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(s=2):(u=new iI,s=e.J_()?0:1);try{switch(s){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Yd(h,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&Xd(t)}async function Pv(r,e){const t=ze(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function oI(r,e){const t=ze(r);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const f of h.j_)f.X_(o)&&(s=!0);h.z_=o}}s&&Xd(t)}function aI(r,e,t){const s=ze(r),o=s.queries.get(e);if(o)for(const u of o.j_)u.onError(t);s.queries.delete(e)}function Xd(r){r.Y_.forEach((e=>{e.next()}))}var pd,Og;(Og=pd||(pd={})).ea="default",Og.Cache="cache";class kv{constructor(e,t,s){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const s=t!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.key=e}}class Dv{constructor(e){this.key=e}}class lI{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=Yy(e),this.Ra=new Vo(this.Aa)}get Va(){return this.Ta}ma(e,t){const s=t?t.fa:new Lg,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const I=o.get(_),C=qu(this.query,E)?E:null,F=!!I&&this.mutatedKeys.has(I.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let q=!1;I&&C?I.data.isEqual(C.data)?F!==z&&(s.track({type:3,doc:C}),q=!0):this.ga(I,C)||(s.track({type:2,doc:C}),q=!0,(g&&this.Aa(C,g)>0||v&&this.Aa(C,v)<0)&&(f=!0)):!I&&C?(s.track({type:0,doc:C}),q=!0):I&&!C&&(s.track({type:1,doc:I}),q=!0,(g||v)&&(f=!0)),q&&(C?(h=h.add(C),u=z?u.add(_):u.delete(_)):(h=h.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{Ra:h,fa:s,ns:f,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((_,E)=>(function(C,F){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return z(C)-z(F)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(s),o=o!=null&&o;const f=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,v=g!==this.Ea;return this.Ea=g,h.length!==0||v?{snapshot:new zo(this.query,e.Ra,u,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const t=[];return e.forEach((s=>{this.da.has(s)||t.push(new Dv(s))})),this.da.forEach((s=>{e.has(s)||t.push(new Nv(s))})),t}ba(e){this.Ta=e.Ts,this.da=Xe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class cI{constructor(e){this.key=e,this.va=!1}}class hI{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new zs((f=>Ky(f)),Hu),this.Ma=new Map,this.xa=new Set,this.Oa=new Rt(Le.comparator),this.Na=new Map,this.La=new zd,this.Ba={},this.ka=new Map,this.qa=Bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dI(r,e,t=!0){const s=Fv(r);let o;const u=s.Fa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await Vv(s,e,t,!0),o}async function fI(r,e){const t=Fv(r);await Vv(t,e,!0,!1)}async function Vv(r,e,t,s){const o=await bx(r.localStore,zr(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,t);let f;return s&&(f=await pI(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Tv(r.remoteStore,o),f}async function pI(r,e,t,s,o){r.Ka=(E,I,C)=>(async function(z,q,me,ie){let pe=q.view.ma(me);pe.ns&&(pe=await kg(z.localStore,q.query,!1).then((({documents:S})=>q.view.ma(S,pe))));const ge=ie&&ie.targetChanges.get(q.targetId),Oe=ie&&ie.targetMismatches.get(q.targetId)!=null,Me=q.view.applyChanges(pe,z.isPrimaryClient,ge,Oe);return Fg(z,q.targetId,Me.wa),Me.snapshot})(r,E,I,C);const u=await kg(r.localStore,e,!0),h=new lI(e,u.Ts),f=h.ma(u.documents),g=Ja.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=h.applyChanges(f,r.isPrimaryClient,g);Fg(r,t,v.wa);const _=new uI(e,t,h);return r.Fa.set(e,_),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),v.snapshot}async function mI(r,e,t){const s=ze(r),o=s.Fa.get(e),u=s.Ma.get(o.targetId);if(u.length>1)return s.Ma.set(o.targetId,u.filter((h=>!Hu(h,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await fd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&qd(s.remoteStore,o.targetId),md(s,o.targetId)})).catch(qo)):(md(s,o.targetId),await fd(s.localStore,o.targetId,!0))}async function gI(r,e){const t=ze(r),s=t.Fa.get(e),o=t.Ma.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),qd(t.remoteStore,s.targetId))}async function yI(r,e,t){const s=xI(r);try{const o=await(function(h,f){const g=ze(h),v=Ht.now(),_=f.reduce(((C,F)=>C.add(F.key)),Xe());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let F=pi(),z=Xe();return g.cs.getEntries(C,_).next((q=>{F=q,F.forEach(((me,ie)=>{ie.isValidDocument()||(z=z.add(me))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,F))).next((q=>{E=q;const me=[];for(const ie of f){const pe=OS(ie,E.get(ie.key).overlayedDocument);pe!=null&&me.push(new ls(ie.key,pe,zy(pe.value.mapValue),or.exists(!0)))}return g.mutationQueue.addMutationBatch(C,v,me,f)})).next((q=>{I=q;const me=q.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(C,q.batchId,me)}))})).then((()=>({batchId:I.batchId,changes:Jy(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let v=h.Ba[h.currentUser.toKey()];v||(v=new Rt(rt)),v=v.insert(f,g),h.Ba[h.currentUser.toKey()]=v})(s,o.batchId,t),await el(s,o.changes),await Xu(s.remoteStore)}catch(o){const u=Yd(o,"Failed to persist write");t.reject(u)}}async function Lv(r,e){const t=ze(r);try{const s=await Dx(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Na.get(u);h&&(ut(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?ut(h.va):o.removedDocuments.size>0&&(ut(h.va),h.va=!1))})),await el(t,s,e)}catch(s){await qo(s)}}function Mg(r,e,t){const s=ze(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Fa.forEach(((u,h)=>{const f=h.view.Z_(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=ze(h);g.onlineState=f;let v=!1;g.queries.forEach(((_,E)=>{for(const I of E.j_)I.Z_(f)&&(v=!0)})),v&&Xd(g)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function vI(r,e,t){const s=ze(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Na.get(e),u=o&&o.key;if(u){let h=new Rt(Le.comparator);h=h.insert(u,mn.newNoDocument(u,Be.min()));const f=Xe().add(u),g=new Qu(Be.min(),new Map,new Rt(rt),h,f);await Lv(s,g),s.Oa=s.Oa.remove(u),s.Na.delete(e),Jd(s)}else await fd(s.localStore,e,!1).then((()=>md(s,e,t))).catch(qo)}async function _I(r,e){const t=ze(r),s=e.batch.batchId;try{const o=await Nx(t.localStore,e);Ov(t,s,null),bv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await el(t,o)}catch(o){await qo(o)}}async function wI(r,e,t){const s=ze(r);try{const o=await(function(h,f){const g=ze(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let _;return g.mutationQueue.lookupMutationBatch(v,f).next((E=>(ut(E!==null),_=E.keys(),g.mutationQueue.removeMutationBatch(v,E)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_))).next((()=>g.localDocuments.getDocuments(v,_)))}))})(s.localStore,e);Ov(s,e,t),bv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await el(s,o)}catch(o){await qo(o)}}function bv(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function Ov(r,e,t){const s=ze(r);let o=s.Ba[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function md(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Ma.get(e))r.Fa.delete(s),t&&r.Ca.$a(s,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((s=>{r.La.containsKey(s)||Mv(r,s)}))}function Mv(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(qd(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Jd(r))}function Fg(r,e,t){for(const s of t)s instanceof Nv?(r.La.addReference(s.key,e),EI(r,s)):s instanceof Dv?(we("SyncEngine","Document no longer in limbo: "+s.key),r.La.removeReference(s.key,e),r.La.containsKey(s.key)||Mv(r,s.key)):je()}function EI(r,e){const t=e.key,s=t.path.canonicalString();r.Oa.get(t)||r.xa.has(s)||(we("SyncEngine","New document in limbo: "+t),r.xa.add(s),Jd(r))}function Jd(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new Le(Et.fromString(e)),s=r.qa.next();r.Na.set(s,new cI(t)),r.Oa=r.Oa.insert(t,s),Tv(r.remoteStore,new Qi(zr(Od(t.path)),s,"TargetPurposeLimboResolution",Uu.oe))}}async function el(r,e,t){const s=ze(r),o=[],u=[],h=[];s.Fa.isEmpty()||(s.Fa.forEach(((f,g)=>{h.push(s.Ka(g,e,t).then((v=>{var _;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(_=t?.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(v){o.push(v);const E=Hd.Wi(g.targetId,v);u.push(E)}})))})),await Promise.all(h),s.Ca.d_(o),await(async function(g,v){const _=ze(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Z.forEach(v,(I=>Z.forEach(I.$i,(C=>_.persistence.referenceDelegate.addReference(E,I.targetId,C))).next((()=>Z.forEach(I.Ui,(C=>_.persistence.referenceDelegate.removeReference(E,I.targetId,C)))))))))}catch(E){if(!Wo(E))throw E;we("LocalStore","Failed to update sequence numbers: "+E)}for(const E of v){const I=E.targetId;if(!E.fromCache){const C=_.os.get(I),F=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(F);_.os=_.os.insert(I,z)}}})(s.localStore,u))}async function TI(r,e){const t=ze(r);if(!t.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const s=await vv(t.localStore,e);t.currentUser=e,(function(u,h){u.ka.forEach((f=>{f.forEach((g=>{g.reject(new ke(re.CANCELLED,h))}))})),u.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await el(t,s.hs)}}function SI(r,e){const t=ze(r),s=t.Na.get(e);if(s&&s.va)return Xe().add(s.key);{let o=Xe();const u=t.Ma.get(e);if(!u)return o;for(const h of u){const f=t.Fa.get(h);o=o.unionWith(f.view.Va)}return o}}function Fv(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vI.bind(null,e),e.Ca.d_=oI.bind(null,e.eventManager),e.Ca.$a=aI.bind(null,e.eventManager),e}function xI(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_I.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wI.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return kx(this.persistence,new Ax,e.initialUser,this.serializer)}Ga(e){return new yv($d.Zr,this.serializer)}Wa(e){return new Mx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class II extends Vu{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){ut(this.persistence.referenceDelegate instanceof Nu);const s=this.persistence.referenceDelegate.garbageCollector;return new fx(s,e.asyncQueue,t)}Ga(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new yv((s=>Nu.Zr(s,t)),this.serializer)}}class gd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Mg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=TI.bind(null,this.syncEngine),await rI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new sI})()}createDatastore(e){const t=Ku(e.databaseInfo.databaseId),s=(function(u){return new Bx(u)})(e.databaseInfo);return(function(u,h,f,g){return new Hx(u,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,h,f){return new Wx(s,o,u,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Mg(this.syncEngine,t,0)),(function(){return Dg.D()?new Dg:new Fx})())}createSyncEngine(e,t){return(function(o,u,h,f,g,v,_){const E=new hI(o,u,h,f,g,v);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=ze(o);we("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await Za(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}gd.provider={build:()=>new gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=pn.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{we("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(we("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Yd(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wh(r,e){r.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await vv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function jg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await RI(r);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Vg(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Vg(e.remoteStore,o))),r._onlineComponents=e}async function RI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await Wh(r,new Vu)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Wh(r,new II(void 0));return r._offlineComponents}async function Uv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await jg(r,r._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await jg(r,new gd))),r._onlineComponents}function AI(r){return Uv(r).then((e=>e.syncEngine))}async function Bv(r){const e=await Uv(r),t=e.eventManager;return t.onListen=dI.bind(null,e.syncEngine),t.onUnlisten=mI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gI.bind(null,e.syncEngine),t}function PI(r,e,t={}){const s=new ci;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,f,g,v){const _=new jv({next:I=>{_.Za(),h.enqueueAndForget((()=>Pv(u,E)));const C=I.docs.has(f);!C&&I.fromCache?v.reject(new ke(re.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&I.fromCache&&g&&g.source==="server"?v.reject(new ke(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(I)},error:I=>v.reject(I)}),E=new kv(Od(f.path),_,{includeMetadataChanges:!0,_a:!0});return Av(u,E)})(await Bv(r),r.asyncQueue,e,t,s))),s.promise}function kI(r,e,t={}){const s=new ci;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,f,g,v){const _=new jv({next:I=>{_.Za(),h.enqueueAndForget((()=>Pv(u,E))),I.fromCache&&g.source==="server"?v.reject(new ke(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(I)},error:I=>v.reject(I)}),E=new kv(f,_,{includeMetadataChanges:!0,_a:!0});return Av(u,E)})(await Bv(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r,e,t){if(!t)throw new ke(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function NI(r,e,t,s){if(e===!0&&s===!0)throw new ke(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Bg(r){if(!Le.isDocumentKey(r))throw new ke(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zg(r){if(Le.isDocumentKey(r))throw new ke(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Zd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je()}function Ir(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ke(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zd(r);throw new ke(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ke(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ke(re.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ke(re.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ke(re.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ju{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $g({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $g(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new BT;switch(s.type){case"firstParty":return new qT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ke(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Ug.get(t);s&&(we("ComponentProvider","Removing Datastore"),Ug.delete(t),s.terminate())})(this),Promise.resolve()}}function DI(r,e,t,s={}){var o;const u=(r=Ir(r,Ju))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let f,g;if(typeof s.mockUserToken=="string")f=s.mockUserToken,g=pn.MOCK_USER;else{f=TE(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new ke(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new pn(v)}r._authCredentials=new zT(new Fy(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zu(this.firestore,e,this._query)}}class bn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class Ji extends Zu{constructor(e,t,s){super(e,t,Od(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Le(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function Hv(r,e,...t){if(r=xr(r),$v("collection","path",e),r instanceof Ju){const s=Et.fromString(e,...t);return zg(s),new Ji(r,null,s)}{if(!(r instanceof bn||r instanceof Ji))throw new ke(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Et.fromString(e,...t));return zg(s),new Ji(r.firestore,null,s)}}function mi(r,e,...t){if(r=xr(r),arguments.length===1&&(e=jy.newId()),$v("doc","path",e),r instanceof Ju){const s=Et.fromString(e,...t);return Bg(s),new bn(r,null,new Le(s))}{if(!(r instanceof bn||r instanceof Ji))throw new ke(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Et.fromString(e,...t));return Bg(s),new bn(r.firestore,r instanceof Ji?r.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wv(this,"async_queue_retry"),this.Vu=()=>{const s=qh();s&&we("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new ci;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wo(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f})(s);throw fi("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=t,t}enqueueAfterDelay(e,t,s){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Kd.createAndSchedule(this,e,t,s,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&je()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Hs extends Ju{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Hg,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hg(e),this._firestoreClient=void 0,await e}}}function VI(r,e){const t=typeof r=="object"?r:Py(),s=typeof r=="string"?r:"(default)",o=Ry(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Ey("firestore");u&&DI(o,...u)}return o}function ef(r){if(r._terminated)throw new ke(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||LI(r),r._firestoreClient}function LI(r){var e,t,s;const o=r._freezeSettings(),u=(function(f,g,v,_){return new oS(f,g,v,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,zv(_.experimentalLongPollingOptions),_.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new CI(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&(function(f){const g=f?._online.build();return{_offline:f?._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(on.fromBase64String(e))}catch(t){throw new ke(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $o(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=/^__.*__$/;class OI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xa(e,this.data,t,this.fieldTransforms)}}class qv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class rf{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Wv(this.Cu)&&bI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ku(e)}Qu(e,t,s,o=!1){return new rf({Cu:e,methodName:t,qu:s,path:sn.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(r){const e=r._freezeSettings(),t=Ku(r._databaseId);return new MI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Gv(r,e,t,s,o,u={}){const h=r.Qu(u.merge||u.mergeFields?2:0,e,t,o);af("Data must be an object, but it was:",h,s);const f=Qv(s,h);let g,v;if(u.merge)g=new Gn(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const _=[];for(const E of u.mergeFields){const I=yd(e,E,t);if(!h.contains(I))throw new ke(re.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Yv(_,I)||_.push(I)}g=new Gn(_),v=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,v=h.fieldTransforms;return new OI(new Ln(f),g,v)}class nc extends tc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nc}}class of extends tc{_toFieldTransform(e){return new DS(e.path,new qa)}isEqual(e){return e instanceof of}}function FI(r,e,t,s){const o=r.Qu(1,e,t);af("Data must be an object, but it was:",o,s);const u=[],h=Ln.empty();as(s,((g,v)=>{const _=lf(e,g,t);v=xr(v);const E=o.Nu(_);if(v instanceof nc)u.push(_);else{const I=rc(v,E);I!=null&&(u.push(_),h.set(_,I))}}));const f=new Gn(u);return new qv(h,f,o.fieldTransforms)}function jI(r,e,t,s,o,u){const h=r.Qu(1,e,t),f=[yd(e,s,t)],g=[o];if(u.length%2!=0)throw new ke(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)f.push(yd(e,u[I])),g.push(u[I+1]);const v=[],_=Ln.empty();for(let I=f.length-1;I>=0;--I)if(!Yv(v,f[I])){const C=f[I];let F=g[I];F=xr(F);const z=h.Nu(C);if(F instanceof nc)v.push(C);else{const q=rc(F,z);q!=null&&(v.push(C),_.set(C,q))}}const E=new Gn(v);return new qv(_,E,h.fieldTransforms)}function rc(r,e){if(Kv(r=xr(r)))return af("Unsupported field value:",e,r),Qv(r,e);if(r instanceof tc)return(function(s,o){if(!Wv(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const f of s){let g=rc(f,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=xr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return PS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ht.fromDate(s);return{timestampValue:ku(o.serializer,u)}}if(s instanceof Ht){const u=new Ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ku(o.serializer,u)}}if(s instanceof tf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof $o)return{bytesValue:cv(o.serializer,s._byteString)};if(s instanceof bn){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bd(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof nf)return(function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return Md(f.serializer,g)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${Zd(s)}`)})(r,e)}function Qv(r,e){const t={};return Uy(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(r,((s,o)=>{const u=rc(o,e.Mu(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function Kv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ht||r instanceof tf||r instanceof $o||r instanceof bn||r instanceof tc||r instanceof nf)}function af(r,e,t){if(!Kv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const s=Zd(t);throw s==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+s)}}function yd(r,e,t){if((e=xr(e))instanceof ec)return e._internalPath;if(typeof e=="string")return lf(r,e);throw Lu("Field path arguments must be of type string or ",r,!1,void 0,t)}const UI=new RegExp("[~\\*/\\[\\]]");function lf(r,e,t){if(e.search(UI)>=0)throw Lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ec(...e.split("."))._internalPath}catch{throw Lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Lu(r,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ke(re.INVALID_ARGUMENT,f+r+g)}function Yv(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BI extends Xv{data(){return super.data()}}function Jv(r,e){return typeof e=="string"?lf(r,e):e instanceof ec?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ke(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $I{convertValue(e,t="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return as(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((h=>Vt(h.doubleValue)));return new nf(u)}convertGeoPoint(e){return new tf(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=zu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(za(e));default:return null}}convertTimestamp(e){const t=ts(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Et.fromString(e);ut(gv(s));const o=new $a(s.get(1),s.get(3)),u=new Le(s.popFirst(5));return o.isEqual(t)||fi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class e_ extends Xv{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Jv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class _u extends e_{data(e={}){return super.data(e)}}class HI{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Da(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new _u(this._firestore,this._userDataWriter,s.key,s,new Da(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new _u(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>u||f.type!==3)).map((f=>{const g=new _u(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,_=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:qI(f.type),doc:g,oldIndex:v,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(r){r=Ir(r,bn);const e=Ir(r.firestore,Hs);return PI(ef(e),r._key).then((t=>YI(e,r,t)))}class t_ extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}function WI(r){r=Ir(r,Zu);const e=Ir(r.firestore,Hs),t=ef(e),s=new t_(e);return zI(r._query),kI(t,r._query).then((o=>new HI(e,s,r,o)))}function uf(r,e,t){r=Ir(r,bn);const s=Ir(r.firestore,Hs),o=Zv(r.converter,e,t);return sc(s,[Gv(sf(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,or.none())])}function GI(r,e,t,...s){r=Ir(r,bn);const o=Ir(r.firestore,Hs),u=sf(o);let h;return h=typeof(e=xr(e))=="string"||e instanceof ec?jI(u,"updateDoc",r._key,e,t,s):FI(u,"updateDoc",r._key,e),sc(o,[h.toMutation(r._key,or.exists(!0))])}function QI(r){return sc(Ir(r.firestore,Hs),[new Fd(r._key,or.none())])}function KI(r,e){const t=Ir(r.firestore,Hs),s=mi(r),o=Zv(r.converter,e);return sc(t,[Gv(sf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,or.exists(!1))]).then((()=>s))}function sc(r,e){return(function(s,o){const u=new ci;return s.asyncQueue.enqueueAndForget((async()=>yI(await AI(s),o,u))),u.promise})(ef(r),e)}function YI(r,e,t){const s=t.docs.get(e._key),o=new t_(r);return new e_(r,o,e._key,s,new Da(t.hasPendingWrites,t.fromCache),e.converter)}function bu(){return new of("serverTimestamp")}(function(e,t=!0){(function(o){Ho=o})(PT),ja(new Oo("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),f=new Hs(new $T(s.getProvider("auth-internal")),new GT(s.getProvider("app-check-internal")),(function(v,_){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ke(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(v.options.projectId,_)})(h,o),h);return u=Object.assign({useFetchStreams:t},u),f._setSettings(u),f}),"PUBLIC").setMultipleInstances(!0)),Xi(og,"4.7.4",e),Xi(og,"4.7.4","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="type.googleapis.com/google.protobuf.Int64Value",JI="type.googleapis.com/google.protobuf.UInt64Value";function n_(r,e){const t={};for(const s in r)r.hasOwnProperty(s)&&(t[s]=e(r[s]));return t}function vd(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>vd(e));if(typeof r=="function"||typeof r=="object")return n_(r,e=>vd(e));throw new Error("Data cannot be encoded in JSON: "+r)}function Ou(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case XI:case JI:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>Ou(e)):typeof r=="function"||typeof r=="object"?n_(r,e=>Ou(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zi extends Bs{constructor(e,t,s){super(`${cf}/${e}`,t||""),this.details=s,Object.setPrototypeOf(this,Zi.prototype)}}function ZI(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function eC(r,e){let t=ZI(r),s=t,o;try{const u=e&&e.error;if(u){const h=u.status;if(typeof h=="string"){if(!qg[h])return new Zi("internal","internal");t=qg[h],s=h}const f=u.message;typeof f=="string"&&(s=f),o=u.details,o!==void 0&&(o=Ou(o))}}catch{}return t==="ok"?null:new Zi(t,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,s){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||t.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="us-central1";function nC(r){let e=null;return{promise:new Promise((t,s)=>{e=setTimeout(()=>{s(new Zi("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class rC{constructor(e,t,s,o,u=_d){this.app=e,this.emulatorOrigin=null,this.contextProvider=new tC(t,s,o),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(u);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=_d}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function iC(r,e,t){r.emulatorOrigin=`http://${e}:${t}`}function sC(r,e,t){return(s=>aC(r,e,s,{}))}async function oC(r,e,t){t["Content-Type"]="application/json";let s;try{s=await fetch(r,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}function aC(r,e,t,s){const o=r._url(e);return lC(r,o,t,s)}async function lC(r,e,t,s){t=vd(t);const o={data:t},u={},h=await r.contextProvider.getContext(s.limitedUseAppCheckTokens);h.authToken&&(u.Authorization="Bearer "+h.authToken),h.messagingToken&&(u["Firebase-Instance-ID-Token"]=h.messagingToken),h.appCheckToken!==null&&(u["X-Firebase-AppCheck"]=h.appCheckToken);const f=s.timeout||7e4,g=nC(f),v=await Promise.race([oC(e,o,u),g.promise,r.cancelAllRequests]);if(g.cancel(),!v)throw new Zi("cancelled","Firebase Functions instance was deleted.");const _=eC(v.status,v.json);if(_)throw _;if(!v.json)throw new Zi("internal","Response is not valid JSON object.");let E=v.json.data;if(typeof E>"u"&&(E=v.json.result),typeof E>"u")throw new Zi("internal","Response is missing data field.");return{data:Ou(E)}}const Wg="@firebase/functions",Gg="0.11.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="auth-internal",cC="app-check-internal",hC="messaging-internal";function dC(r){const e=(t,{instanceIdentifier:s})=>{const o=t.getProvider("app").getImmediate(),u=t.getProvider(uC),h=t.getProvider(hC),f=t.getProvider(cC);return new rC(o,u,h,f,s)};ja(new Oo(cf,e,"PUBLIC").setMultipleInstances(!0)),Xi(Wg,Gg,r),Xi(Wg,Gg,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r=Py(),e=_d){const s=Ry(xr(r),cf).getImmediate({identifier:e}),o=Ey("functions");return o&&fC(s,...o),s}function fC(r,e,t){iC(xr(r),e,t)}function pC(r,e,t){return sC(xr(r),e)}dC();const mC={apiKey:"AIzaSyBjOeHP4Pst7BYyRF2c85KKMe6lifXOU1M",authDomain:"wwconsole-93f76.firebaseapp.com",projectId:"wwconsole-93f76",storageBucket:"wwconsole-93f76.appspot.com",messagingSenderId:"936183161335",appId:"1:936183161335:web:0762f9ac5837ada128cef2",measurementId:"G-H6R483JTGT"},hf=Ay(mC),Wr=VI(hf);r_(hf,"asia-south1");const i_=async r=>{const e={title:r.title||"",type:r.type||"Theme",overview:r.overview||"",category:r.category||"",subcategory:r.subcategory||"",tags:r.tags||[],imageUrl:r.imageUrl||"",sources:r.sources||[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},disableDepthToggle:r.disableDepthToggle||!1,isPinnedFeatured:r.isPinnedFeatured??!1,pinnedCategory:r.pinnedCategory??"All",keywords:r.keywords||[],status:r.status||"draft",slug:r.slug||(r.title?r.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):""),editorNotes:r.editorNotes||"",updatedAt:bu()};return(await KI(Hv(Wr,"drafts"),e)).id},Mu=async()=>(await WI(Hv(Wr,"drafts"))).docs.map(e=>({id:e.id,...e.data()})),Do=async r=>{const e=mi(Wr,"drafts",r),t=await ic(e);return t.exists()?{id:t.id,...t.data()}:null},sr=async(r,e)=>{const t=mi(Wr,"drafts",r);await uf(t,{...e,updatedAt:bu()},{merge:!0})},s_=async r=>{await QI(mi(Wr,"drafts",r))},Qg=async(r,e,t)=>{const s=await Do(r);if(!s)throw new Error("Draft not found");const o=[...s.timeline||[]];o[e]={...o[e],...t},await sr(r,{timeline:o})},gC=async(r,e)=>{const t=await Do(r);if(!t)throw new Error("Draft not found");const s=t.timeline.filter((o,u)=>u!==e);await sr(r,{timeline:s})},o_=async r=>{const e=mi(Wr,"drafts",r),t=await ic(e);if(!t.exists())throw new Error("Draft not found");const s=t.data(),o=s.slug||s.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),u=s.timeline?.flatMap(g=>g.sources||[]).filter(g=>g?.link&&g.link.startsWith("http"))||[],h=s.type==="Story"?"stories":"themes",f=mi(Wr,h,o);await uf(f,{...s,sources:u,publishedAt:bu(),status:"published"}),await GI(e,{status:"published",updatedAt:bu()}),console.log(` Published ${s.type}  /${h}/${o} with ${u.length} sources`)},yC=async r=>{await o_(r)};function vC(){const r=Fu(),[e,t]=X.useState([]),[s,o]=X.useState(!0),[u,h]=X.useState(!1),[f,g]=X.useState({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),v=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];X.useEffect(()=>{(async()=>{try{const F=(await Mu()).filter(z=>z.type==="Theme");t(F)}catch(F){console.error("Error loading drafts:",F)}finally{o(!1)}})()},[]);const _=C=>{const{name:F,value:z}=C.target;g({...f,[F]:z})},E=async C=>{if(C.preventDefault(),!f.title.trim()||!f.category.trim()){alert("Title and Category are required");return}try{h(!0);const F=await i_({title:f.title,overview:f.overview,category:f.category,subcategory:f.subcategory,tags:[],imageUrl:f.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:f.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Theme"}),z=(await Mu()).filter(q=>q.type==="Theme");t(z),g({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),r(`/drafts/${F}`)}catch(F){console.error("Error creating draft:",F),alert("Failed to create draft")}finally{h(!1)}},I=async C=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await s_(C),t(F=>F.filter(z=>z.id!==C))}catch(F){console.error(F),alert("Failed to delete draft")}};return s?N.jsx("div",{className:"p-6",children:"Loading drafts..."}):N.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[N.jsx("div",{className:"flex justify-between items-center",children:N.jsx("h1",{className:"text-3xl font-bold",children:"Theme Drafts"})}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Theme Draft"}),N.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsx("input",{name:"title",placeholder:"Title",value:f.title,onChange:_,className:"border p-2 rounded"}),N.jsxs("select",{name:"category",value:f.category,onChange:_,className:"border p-2 rounded",children:[N.jsx("option",{value:"",children:"Select Category"}),v.map(C=>N.jsx("option",{value:C,children:C},C))]}),N.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Climate Policy, Geopolitical Conflict)",value:f.subcategory,onChange:_,className:"border p-2 rounded"}),N.jsx("input",{name:"date",placeholder:"Date (optional)",value:f.date,onChange:_,className:"border p-2 rounded"}),N.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:f.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),N.jsx("textarea",{name:"overview",placeholder:"Overview",value:f.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),N.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:u?"Saving...":"Create Theme Draft"})]})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Theme Drafts"}),e.length===0?N.jsx("p",{className:"text-gray-500",children:"No theme drafts yet."}):N.jsx("ul",{className:"divide-y",children:e.map(C=>N.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[N.jsxs("div",{children:[N.jsx("p",{className:"font-medium",children:C.title||"Untitled"}),N.jsxs("p",{className:"text-sm text-gray-500",children:[C.category,"  ",C.subcategory||"","  ",C.status]}),N.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",C.id]})]}),N.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[N.jsx("button",{onClick:()=>r(`/drafts/${C.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),N.jsx("button",{onClick:()=>I(C.id),className:"text-red-600 hover:underline",children:"Delete"}),N.jsx("button",{onClick:()=>{navigator.clipboard.writeText(C.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),N.jsx("button",{onClick:()=>{const F=`[${C.title}](@theme/${C.id})`;navigator.clipboard.writeText(F),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"}),N.jsx("button",{onClick:()=>{const F=`[${C.title}](https://waitwhat.news/theme/${C.id})`;navigator.clipboard.writeText(F),alert(" External link copied!")},className:"text-purple-600 hover:underline",children:"Copy External Link"})]})]},C.id))})]})]})}function _C(){const r=Fu(),[e,t]=X.useState([]),[s,o]=X.useState(!0),[u,h]=X.useState(!1),[f,g]=X.useState({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),v=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];X.useEffect(()=>{(async()=>{try{const F=(await Mu()).filter(z=>z.type==="Story");t(F)}catch(F){console.error("Error loading drafts:",F)}finally{o(!1)}})()},[]);const _=C=>{const{name:F,value:z}=C.target;g({...f,[F]:z})},E=async C=>{if(C.preventDefault(),!f.title.trim()||!f.category.trim()){alert("Title and Category are required");return}try{h(!0);const F=await i_({title:f.title,overview:f.overview,category:f.category,subcategory:f.subcategory,tags:[],imageUrl:f.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:f.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Story"}),z=(await Mu()).filter(q=>q.type==="Story");t(z),g({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),r(`/drafts/${F}`)}catch(F){console.error("Error creating draft:",F),alert("Failed to create draft")}finally{h(!1)}},I=async C=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await s_(C),t(F=>F.filter(z=>z.id!==C))}catch(F){console.error(F),alert("Failed to delete draft")}};return s?N.jsx("div",{className:"p-6",children:"Loading drafts..."}):N.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[N.jsx("div",{className:"flex justify-between items-center",children:N.jsx("h1",{className:"text-3xl font-bold",children:"Story Drafts"})}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Story Draft"}),N.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsx("input",{name:"title",placeholder:"Title",value:f.title,onChange:_,className:"border p-2 rounded"}),N.jsxs("select",{name:"category",value:f.category,onChange:_,className:"border p-2 rounded",children:[N.jsx("option",{value:"",children:"Select Category"}),v.map(C=>N.jsx("option",{value:C,children:C},C))]}),N.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Geopolitical Conflict)",value:f.subcategory,onChange:_,className:"border p-2 rounded"}),N.jsx("input",{name:"date",placeholder:"Date (optional)",value:f.date,onChange:_,className:"border p-2 rounded"}),N.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:f.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),N.jsx("textarea",{name:"overview",placeholder:"Overview",value:f.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),N.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:u?"Saving...":"Create Story Draft"})]})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Story Drafts"}),e.length===0?N.jsx("p",{className:"text-gray-500",children:"No story drafts yet."}):N.jsx("ul",{className:"divide-y",children:e.map(C=>N.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[N.jsxs("div",{children:[N.jsx("p",{className:"font-medium",children:C.title||"Untitled"}),N.jsxs("p",{className:"text-sm text-gray-500",children:[C.category,"  ",C.subcategory||"","  ",C.status]}),N.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",C.id]})]}),N.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[N.jsx("button",{onClick:()=>r(`/drafts/${C.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),N.jsx("button",{onClick:()=>I(C.id),className:"text-red-600 hover:underline",children:"Delete"}),N.jsx("button",{onClick:()=>{navigator.clipboard.writeText(C.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),N.jsx("button",{onClick:()=>{const F=`[${C.title}](@story/${C.id})`;navigator.clipboard.writeText(F),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"}),N.jsx("button",{onClick:()=>{const F=`[${C.title}](https://waitwhat.news/story/${C.id})`;navigator.clipboard.writeText(F),alert(" External link copied!")},className:"text-purple-600 hover:underline",children:"Copy External Link"})]})]},C.id))})]})]})}const wC="modulepreload",EC=function(r){return"/"+r},Kg={},Yg=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let v=function(_){return Promise.all(_.map(E=>Promise.resolve(E).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var h=v;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");o=v(t.map(_=>{if(_=EC(_),_ in Kg)return;Kg[_]=!0;const E=_.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const C=document.createElement("link");if(C.rel=E?"stylesheet":wC,E||(C.as="script"),C.crossOrigin="",C.href=_,g&&C.setAttribute("nonce",g),document.head.appendChild(C),E)return new Promise((F,z)=>{C.addEventListener("load",F),C.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${_}`)))})}))}function u(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},df="https://api.openai.com/v1/chat/completions",ff="gpt-4o-mini";async function oc(r,e){const t="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",s={model:ff,messages:[{role:"system",content:`You are a precise news editor.
Always respond ONLY with valid JSON matching this schema:
${e}
Do not include markdown, code fences, or commentary.`},{role:"user",content:r}]},o=await fetch(df,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)});if(!o.ok){const f=await o.text();throw new Error(`API error: ${o.status} ${f}`)}const h=(await o.json()).choices?.[0]?.message?.content?.trim();if(!h)throw new Error("Empty response from model");try{return JSON.parse(h)}catch{throw console.error(" Raw model output:",h),new Error("Invalid JSON returned by model")}}async function a_(r){const e=`
{
  "timeline": [
    { "date": "YYYY-MM-DD", "event": "string", "description": "string",
      "significance": 1|2|3, "imageUrl": null, "sourceLink": null }
  ]
}`,t=`
You are a news editor.
Create a concise chronological timeline of key developments for the topic:
"${r.title}"
Make descriptions factual, data-rich, and written as short bullet summaries.

Context:
${r.overview}

Return 1015 events.
Each must have:
- date (ISO format)
- event
- short description
- significance (1=low,2=medium,3=high)

Return only valid JSON.
`;return(await oc(t,e)).timeline}async function l_(r){const e=`
{
  "analysis": {
    "stakeholders": [{ "name": "string", "detail": "string" }],
    "faqs": [{ "question": "string", "answer": "string" }],
    "future": [{ "question": "string", "answer": "string" }]
  }
}`,t=`
You are a political analyst creating structured insights for the theme "${r.title}".

Context:
${r.overview}

Return three sections:
1. stakeholders  list of key people/institutions and their roles.
2. faqs  common reader questions with concise factual answers.
3. future  forward-looking questions with short, reasoned answers.

Keep all answers under 50 words.
Return only valid JSON.
`;return(await oc(t,e)).analysis}async function TC(r){const e="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",t=`
You are a clear and factual news editor.
From the following overview, identify up to 8 important or complex terms that a reader might not immediately understand.

Return JSON only:
[
  { "term": "term or phrase", "explainer": "short, clear, factual, under 25 words" }
]

Overview:
${r}
`,u=(await(await fetch(df,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:ff,messages:[{role:"user",content:t}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT overview context output:",u);try{return JSON.parse(u)}catch{return console.warn(" GPT Context JSON parse error:",u),[]}}async function SC(r){const e="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",t=r.contexts?.map(f=>f.term).filter(Boolean);if(!t?.length)return[];const s=`
You are a concise factual explainer.
For the given event, write a short (under 25 words) neutral definition for each listed term.

Event title: ${r.event}
Event description: ${r.description}

Terms to explain:
${t.map(f=>`- ${f}`).join(`
`)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`,h=(await(await fetch(df,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:ff,messages:[{role:"user",content:s}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT event explainer output:",h);try{return JSON.parse(h).filter(g=>g.term&&g.explainer)}catch{return console.warn(" Invalid JSON for event explainer:",h),[]}}async function u_(r){const e=`
You are a concise factual news explainer.
Given the event below, identify key proper nouns, organizations, or technical terms a general reader may not know.
For each, write a short (under 20 words) neutral explanation.

Event Title: ${r.event}
Event Description: ${r.description}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await oc(e,'[{"term": "string", "explainer": "string"}]')}async function c_(r,e){const t=`
You are a concise factual explainer for a news analysis section.
Section: ${r}

For each entry below, suggest short (under 20 words) neutral explainers for key names or entities readers may not know.

Entries:
${JSON.stringify(e,null,2)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await oc(t,'[{"term": "string", "explainer": "string"}]')}const Xg=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:l_,generateContexts:TC,generateContextsForAnalysis:c_,generateContextsForTimelineEvent:u_,generateExplainersForEvent:SC,generateTimeline:a_},Symbol.toStringTag,{value:"Module"}));async function xC({title:r,event:e,description:t}){try{const s=mi(Wr,"settings","global"),o=await ic(s),u=o.exists()&&o.data()?.serper?.prompt||"title";if(u.trim().toLowerCase()==="title")return r||e||t||"";let h=u;return h=h.replace(/{{\s*title\s*}}/gi,r||"").replace(/{{\s*event\s*}}/gi,e||"").replace(/{{\s*description\s*}}/gi,t||""),h.trim()||r||e||t||""}catch(s){return console.error(" Error building Serper query:",s),r||e||t||""}}async function IC(r,e,t){const s=r_(hf,"asia-south1"),o=pC(s,"fetchEventCoverage");try{const u=await xC({title:r,event:r,description:e});return console.log(" Serper query:",u),(await o({title:u,description:e,date:t})).data}catch(u){throw console.error(" Error calling fetchEventCoverage:",u),new Error(u.message||"Failed to fetch event coverage")}}function CC(r){if(!r)return N.jsx("span",{children:r});const e=r.replace(/\]\(@\[([^\]]+)\]\(@(story|theme)\/([A-Za-z0-9_-]+)\)\)/g,"](@$2/$3)"),t=/\[([^\]]+)\]\((@(?:story|theme)\/[A-Za-z0-9_-]+|https?:\/\/[^\s)]+)\)/g,s=[];let o=0,u;for(;(u=t.exec(e))!==null;){const[h,f,g]=u,v=e.slice(o,u.index);v&&s.push({type:"text",value:v}),s.push({type:"link",label:f,target:g}),o=u.index+h.length}return o<e.length&&s.push({type:"text",value:e.slice(o)}),N.jsx("span",{style:{display:"inline",flexWrap:"wrap",lineHeight:"1.6"},children:s.map((h,f)=>{if(h.type==="text")return N.jsx("span",{children:h.value},f);const{label:g,target:v}=h,_=v.startsWith("@story/")||v.startsWith("@theme/"),E=v.startsWith("@theme/"),I=_?v.split("/")[1]:"";return _?N.jsx(vy,{to:`/${E?"themes":"stories"}/${I}`,style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:g},f):N.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:g},f)})})}function RC(){const{id:r}=C0(),e=Fu(),[t,s]=X.useState(null),[o,u]=X.useState(!0),[h,f]=X.useState(!1),[g,v]=X.useState(!1),[_,E]=X.useState(!1),[I,C]=X.useState({}),[F,z]=X.useState([]),[q,me]=X.useState(!1),[ie,pe]=X.useState(null),[ge,Oe]=X.useState(!0),[Me,S]=X.useState(!0),[x,R]=X.useState(!1),[k,L]=X.useState(!1),[O,P]=X.useState({date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:""}),$e=U=>({...U,timeline:U.timeline||[],phases:U.phases||[]});X.useEffect(()=>{(async()=>{try{if(!r)return;const Y=await Do(r);s(Y?$e(Y):null)}catch(Y){console.error(Y),alert("Failed to load draft.")}finally{u(!1)}})()},[r]),X.useEffect(()=>{const U=Y=>{_&&(Y.preventDefault(),Y.returnValue="")};return window.addEventListener("beforeunload",U),()=>window.removeEventListener("beforeunload",U)},[_]);const st=U=>{if(!t)return;const{name:Y,value:K}=U.target;s({...t,[Y]:K})},Tt=async()=>{if(!(!t||!r))try{f(!0),await sr(r,t),E(!1),alert(" Metadata saved")}catch(U){console.error(U),alert(" Failed to save metadata")}finally{f(!1)}},Je=async()=>{if(!(!r||!t)){v(!0);try{await sr(r,{phases:t.phases||[]}),t.type==="Story"?(await yC(r),alert(" Story published successfully!")):(await o_(r),alert(" Theme published successfully!"))}catch(U){console.error(U),alert(" Publish failed: "+U.message)}finally{v(!1)}}},se=async()=>{if(!(!t||!r)){R(!0);try{const U=await a_(t);await sr(r,{timeline:U});const Y=await Do(r);s(Y?$e(Y):null),alert(" Timeline generated successfully!")}catch(U){console.error(U),alert(" Failed to generate timeline: "+U.message)}finally{R(!1)}}},Re=async()=>{if(!(!t||!r)){L(!0);try{const U=await l_(t);await sr(r,{analysis:U});const Y=await Do(r);s(Y?$e(Y):null),alert(" Analysis generated successfully!")}catch(U){console.error(U),alert(" Failed to generate analysis: "+U.message)}finally{L(!1)}}},le=async(U,Y,K)=>{if(!r||!t)return;const oe=[...t.timeline];oe[U]={...oe[U],[Y]:K},s({...t,timeline:oe}),E(!0)},j=async U=>{if(!r||!window.confirm("Delete this event?"))return;await gC(r,U);const Y=await Do(r);if(!Y)return;const K=(Y.phases||[]).filter(oe=>oe.startIndex!==U).map(oe=>({...oe,startIndex:oe.startIndex>U?oe.startIndex-1:oe.startIndex}));Y.phases=K,s($e(Y)),E(!0)},J=async(U,Y)=>{if(!r||!t)return;const K=Y.event?.trim();if(!K){alert("Please add an event title before fetching coverage.");return}const oe=Y.description??"";try{console.log(" Fetching Serper coverage for:",K);const ce=await IC(K,oe,Y.date||"");if(ce.sources?.length){const fe=ce.sources.map(At=>({...At,imageUrl:At.imageUrl??null})),Pe={...t.timeline[U],sources:fe,imageUrl:fe[0]?.imageUrl||t.timeline[U].imageUrl};await Qg(r,U,Pe);const He=[...t.timeline];s({...t,timeline:He}),alert(` Found ${ce.sources.length} sources for "${Y.event}"`)}else alert(" No relevant sources found for this event");console.log(" Sources:",ce.sources)}catch(ce){console.error(" Error fetching coverage:",ce),alert(" Failed to fetch coverage: "+ce.message)}};return o?N.jsx("div",{className:"p-6",children:"Loading..."}):t?N.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h1",{className:"text-3xl font-bold",children:"Edit Draft"}),_&&N.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" You have unsaved changes"}),N.jsxs("div",{className:"flex gap-3",children:[N.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 hover:underline",children:" Back"}),N.jsx("button",{onClick:Je,disabled:g,className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 disabled:opacity-50",children:g?"Publishing":t?.type==="Story"?" Publish Story":" Publish Theme"})]})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metadata"}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsx("input",{name:"title",value:t.title,onChange:st,placeholder:"Title",className:"border p-2 rounded"}),N.jsx("input",{name:"category",value:t.category,onChange:st,placeholder:"Category (e.g. Politics, Economy)",className:"border p-2 rounded"}),N.jsx("input",{name:"subcategory",value:t.subcategory,onChange:st,placeholder:"Subcategory (e.g. Geopolitical Conflict)",className:"border p-2 rounded"}),N.jsx("input",{name:"imageUrl",value:t.imageUrl||"",onChange:st,placeholder:"Main Thumbnail / Cover Image URL",className:"border p-2 rounded md:col-span-2"}),t.imageUrl&&N.jsxs("div",{className:"md:col-span-2 flex justify-start items-center gap-4",children:[N.jsx("img",{src:t.imageUrl,alt:"Cover",className:"w-48 h-32 object-cover rounded border",onError:U=>{const Y=t.imageUrl??"";try{if(Y.startsWith("http")){const K=new URL(Y).origin;U.currentTarget.src=`${K}/favicon.ico`}else U.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}catch{U.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}}}),N.jsx("p",{className:"text-gray-600 text-sm",children:"Preview of your main thumbnail"})]}),N.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 mt-2",children:[N.jsx("input",{type:"checkbox",id:"isPinnedFeatured",checked:t.isPinnedFeatured||!1,onChange:async U=>{const Y=U.target.checked;if(s({...t,isPinnedFeatured:Y}),r)try{await sr(r,{isPinnedFeatured:Y})}catch(K){console.error(" Failed to update isPinnedFeatured:",K)}},className:"w-4 h-4"}),N.jsx("label",{htmlFor:"isPinnedFeatured",className:"text-sm text-gray-800",children:"Pin as Featured"}),t.isPinnedFeatured&&N.jsxs("select",{value:t.pinnedCategory||"All",onChange:async U=>{const Y=U.target.value;if(s({...t,pinnedCategory:Y}),r)try{await sr(r,{pinnedCategory:Y})}catch(K){console.error(" Failed to update pinnedCategory:",K)}},className:"border p-1 rounded text-sm",children:[N.jsx("option",{value:"All",children:"All Categories"}),N.jsx("option",{value:t.category,children:t.category})]})]}),N.jsx("textarea",{name:"overview",value:t.overview,onChange:st,placeholder:"Overview",rows:3,className:"border p-2 rounded md:col-span-2"})]}),N.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[N.jsx("input",{type:"checkbox",id:"disableDepthToggle",checked:t.disableDepthToggle||!1,onChange:async U=>{const Y=U.target.checked;if(s({...t,disableDepthToggle:Y}),r)try{await sr(r,{disableDepthToggle:Y}),console.log(" disableDepthToggle updated to:",Y)}catch(K){console.error(" Failed to update disableDepthToggle:",K),alert(" Failed to update disableDepthToggle.")}},className:"w-4 h-4"}),N.jsx("label",{htmlFor:"disableDepthToggle",className:"text-sm text-gray-700",children:"Disable Depth Toggle in App"})]}),N.jsxs("div",{className:"mt-6",children:[N.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Context Explainers (Overview)"}),N.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add terms that will be highlighted in the overview for reader context."}),(t.contexts||[]).map((U,Y)=>N.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[N.jsx("input",{type:"text",value:U.term,onChange:K=>{const oe=[...t.contexts||[]];oe[Y].term=K.target.value,s({...t,contexts:oe})},placeholder:"Term",className:"border p-2 rounded flex-1"}),N.jsx("input",{type:"text",value:U.explainer,onChange:K=>{const oe=[...t.contexts||[]];oe[Y].explainer=K.target.value,s({...t,contexts:oe})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),N.jsx("button",{onClick:()=>{const K=(t.contexts||[]).filter((oe,ce)=>ce!==Y);s({...t,contexts:K})},className:"text-red-500 text-sm hover:underline",children:""})]},Y)),N.jsx("button",{onClick:()=>s({...t,contexts:[...t.contexts||[],{term:"",explainer:""}]}),className:"text-blue-600 text-sm hover:underline",children:" Add new context term"})]}),N.jsx("button",{onClick:async()=>{if(!t.overview){alert("Please write an overview first!");return}try{if(!window.confirm("Use GPT to suggest contextual explainers?"))return;f(!0);const{generateContexts:Y}=await Yg(async()=>{const{generateContexts:ce}=await Promise.resolve().then(()=>Xg);return{generateContexts:ce}},void 0),K=await Y(t.overview);if(!K||K.length===0){alert("No terms found.");return}const oe=[...t.contexts||[],...K];s({...t,contexts:oe}),alert(` Added ${K.length} suggested context terms.`)}catch(U){console.error(" GPT error:",U),alert("Failed to fetch GPT suggestions. Check console.")}finally{f(!1)}},className:"text-purple-600 text-sm hover:underline mt-2",children:" Suggest Contexts with GPT"}),N.jsx("button",{onClick:Tt,disabled:h,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:h?"Saving...":"Save Metadata"})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-xl font-semibold",children:"Chronology of Events"}),N.jsxs("div",{className:"flex gap-3 items-center",children:[N.jsx("button",{onClick:se,disabled:x,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:x?"Generating":" Generate Timeline"}),N.jsx("button",{onClick:async()=>{const U={date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:"",sources:[]},Y=[...t.timeline||[],U];if(s({...t,timeline:Y}),r)try{await sr(r,{timeline:Y}),console.log(" New event added and saved to Firestore.")}catch(K){console.error(" Failed to save new event:",K),alert(" Failed to save new event.")}},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:" Add Event"}),N.jsx("button",{onClick:async()=>{if(!(!r||!t))try{f(!0),await sr(r,{timeline:t.timeline,phases:t.phases||[]}),E(!1),alert(" Timeline saved successfully!")}catch(U){console.error(" Timeline save failed:",U),alert(" Failed to save timeline.")}finally{f(!1)}},className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" Save Timeline"}),N.jsx("button",{onClick:()=>Oe(!ge),className:"text-sm text-blue-600 hover:underline",children:ge?"Hide":"Show"})]})]}),ge&&N.jsx(N.Fragment,{children:t.timeline.length===0?N.jsx("p",{className:"text-gray-500 mb-3",children:"No events yet."}):N.jsx("div",{className:"space-y-4 mb-4",children:t.timeline.map((U,Y)=>N.jsxs("div",{className:"mb-6",children:[N.jsx("button",{className:"text-purple-600 text-xs hover:underline mb-2",onClick:()=>{const K={title:"New Phase",startIndex:Y},oe=[...t.phases||[],K];s({...t,phases:oe}),E(!0)},children:" Insert Phase Here"}),(t.phases||[]).map((K,oe)=>K.startIndex!==Y?null:N.jsxs("div",{className:"border border-purple-300 bg-purple-50 p-3 rounded mb-3",children:[N.jsx("input",{value:K.title||"",onChange:ce=>{const fe=[...t.phases||[]];fe[oe]={...K,title:ce.target.value},s({...t,phases:fe}),E(!0)},className:"border p-2 rounded w-full",placeholder:"Phase title"}),N.jsx("button",{className:"text-red-600 text-xs mt-1 hover:underline",onClick:()=>{const ce=(t.phases||[]).filter((fe,Pe)=>Pe!==oe);s({...t,phases:ce}),E(!0)},children:" Remove Phase"})]},`phase-${oe}`)),N.jsxs("div",{className:"border p-3 rounded",children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[N.jsx("input",{value:U.date||"",onChange:K=>le(Y,"date",K.target.value),placeholder:"Date",className:"border p-2 rounded"}),N.jsx("input",{value:U.event,onChange:K=>le(Y,"event",K.target.value),placeholder:"Event",className:"border p-2 rounded"}),N.jsx("input",{value:U.imageUrl||"",onChange:K=>le(Y,"imageUrl",K.target.value),placeholder:"Image URL",className:"border p-2 rounded"}),N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sources"}),(U.sources||[]).map((K,oe)=>N.jsxs("div",{className:"flex gap-2 items-center",children:[N.jsx("input",{value:K.link,onChange:ce=>{const fe=[...U.sources||[]];fe[oe].link=ce.target.value,le(Y,"sources",fe)},placeholder:`Source link #${oe+1}`,className:"border p-2 rounded w-full"}),N.jsx("button",{onClick:()=>{const ce=(U.sources||[]).filter((fe,Pe)=>Pe!==oe);le(Y,"sources",ce)},className:"text-red-600 text-sm hover:underline",children:""})]},oe)),N.jsx("button",{onClick:()=>{const K=[...U.sources||[],{title:"",link:"",sourceName:""}];le(Y,"sources",K)},className:"text-blue-600 text-sm hover:underline",children:" Add another link"})]})]}),N.jsx("textarea",{value:U.description||"",onChange:K=>{le(Y,"description",K.target.value)},onSelect:K=>{const oe=K.target;C(ce=>({...ce,[Y]:{start:oe.selectionStart,end:oe.selectionEnd}}))},placeholder:"Description",rows:2,className:"border p-2 rounded w-full mb-2"}),N.jsx("button",{onClick:()=>{let K=prompt("Enter linked story/theme ID (e.g. story/abc123 or theme/xyz456):");if(!K)return;K=K.replace(/^@+/,"").replace(/\[|\]|\(|\)/g,"");const oe=I[Y];if(!oe||oe.start===oe.end){alert("Select a term in the description box first, then click Link.");return}const{start:ce,end:fe}=oe,Pe=U.description??"",At=`[${Pe.substring(ce,fe)}](@${K})`,ft=Pe.substring(0,ce)+At+Pe.substring(fe),Lt=[...t.timeline];Lt[Y]={...U,description:ft},s({...t,timeline:Lt}),E(!0)},className:"text-blue-600 text-xs hover:underline mb-2",children:" Link selected text"}),N.jsx("div",{className:"text-sm text-gray-700 mt-2",children:CC(U.description??"")}),N.jsxs("div",{className:"mt-2",children:[N.jsx("h4",{className:"text-sm font-medium mb-1",children:"Context Explainers"}),(U.contexts||[]).map((K,oe)=>N.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[N.jsx("input",{type:"text",value:K.term,onChange:ce=>{const fe=[...U.contexts||[]];fe[oe].term=ce.target.value,le(Y,"contexts",fe)},placeholder:"Term",className:"border p-1 rounded flex-1"}),N.jsx("input",{type:"text",value:K.explainer,onChange:ce=>{const fe=[...U.contexts||[]];fe[oe].explainer=ce.target.value,le(Y,"contexts",fe)},placeholder:"Explainer",className:"border p-1 rounded flex-[2]"}),N.jsx("button",{onClick:()=>{const ce=(U.contexts||[]).filter((fe,Pe)=>Pe!==oe);le(Y,"contexts",ce)},className:"text-red-600 text-xs hover:underline",children:""})]},oe)),N.jsx("button",{onClick:()=>{const K=[...U.contexts||[],{term:"",explainer:""}];le(Y,"contexts",K)},className:"text-blue-600 text-xs hover:underline",children:" Add term"})]}),N.jsx("button",{onClick:async()=>{try{f(!0);const K=await u_(U);if(!K?.length){alert("No contextual terms found for this event.");return}const oe=[...U.contexts||[],...K];le(Y,"contexts",oe),alert(` Added ${K.length} contextual explainers for this event.`)}catch(K){console.error("GPT error (event contexts):",K),alert(" Failed to generate contexts for this event.")}finally{f(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),N.jsx("button",{onClick:async()=>{const K=U.event?.trim(),oe=U.description?.trim();if(!K||!oe){alert("Please add an event title and description first.");return}const ce={event:K,description:oe,contexts:U.contexts||[]};if(!ce.contexts.length){alert("Please add at least one term first.");return}try{f(!0);const{generateExplainersForEvent:fe}=await Yg(async()=>{const{generateExplainersForEvent:At}=await Promise.resolve().then(()=>Xg);return{generateExplainersForEvent:At}},void 0),Pe=await fe(ce);if(!Pe.length){alert("No explainers returned.");return}const He=(ce.contexts||[]).map(At=>{const ft=Pe.find(Lt=>Lt.term.toLowerCase()===At.term.toLowerCase());return ft?{...At,explainer:ft.explainer}:At});le(Y,"contexts",He),alert(` Added ${Pe.length} explainers.`)}catch(fe){console.error("GPT error:",fe),alert("Failed to generate explainers for this event.")}finally{f(!1)}},className:"text-purple-600 text-xs hover:underline mt-2 block",children:" Generate Explainers for this Event"}),N.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Importance"}),N.jsxs("select",{value:U.significance,onChange:K=>le(Y,"significance",Number(K.target.value)),className:"border p-2 rounded mb-2",children:[N.jsx("option",{value:1,children:"Low"}),N.jsx("option",{value:2,children:"Medium"}),N.jsx("option",{value:3,children:"High"})]}),N.jsxs("div",{className:"flex gap-4 items-center mt-2",children:[N.jsx("button",{onClick:()=>j(Y),className:"text-red-600 text-sm hover:underline",children:"Delete"}),N.jsx("button",{onClick:()=>J(Y,U),className:"text-blue-600 text-sm hover:underline",children:" Fetch Top Sources"}),N.jsx("button",{onClick:async()=>{if(r)try{f(!0),await Qg(r,Y,t.timeline[Y]),E(!1),alert(" Event saved!")}catch(K){console.error(K),alert(" Failed to save event.")}finally{f(!1)}},className:"text-green-600 text-sm hover:underline",children:" Save Event"})]}),U.sources&&U.sources.length>0&&N.jsxs("div",{className:"mt-3 border-t pt-2",children:[N.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Top Sources:"}),N.jsx("div",{className:"space-y-2",children:U.sources.map((K,oe)=>N.jsxs("div",{className:"flex items-center space-x-3 border p-2 rounded-md hover:bg-gray-50",children:[K.imageUrl&&N.jsx("img",{src:K.imageUrl,alt:K.title,className:"w-10 h-10 object-cover rounded",onError:ce=>{ce.currentTarget.src=`${new URL(K.link).origin}/favicon.ico`}}),N.jsxs("div",{className:"flex flex-col",children:[N.jsx("a",{href:K.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium hover:underline",children:K.title}),N.jsx("span",{className:"text-gray-500 text-xs",children:K.sourceName})]})]},oe))})]})]})]},Y))})})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-xl font-semibold",children:"Analysis"}),N.jsx("button",{onClick:Re,disabled:k,className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:k?"Generating":" Generate Analysis"})]}),Me&&N.jsx("div",{className:"space-y-4",children:["stakeholders","faqs","future"].map(U=>{const Y=t.analysis,K=Y?.[U]||[],oe={stakeholders:"Stakeholders",faqs:"FAQs",future:"Future Questions"};return N.jsxs("details",{className:"border rounded-lg p-3 group",children:[N.jsxs("summary",{className:"cursor-pointer font-semibold text-blue-700 select-none flex justify-between items-center",children:[oe[U],N.jsx("span",{className:"text-gray-500 group-open:rotate-90 transition-transform",children:""})]}),N.jsxs("div",{className:"mt-2 space-y-3",children:[N.jsxs("button",{onClick:()=>{const ce={...t},fe=Y?.[U]||[],Pe=U==="stakeholders"?{name:"",detail:""}:{question:"",answer:""};ce.analysis={...Y,[U]:[...fe,Pe]},s(ce)},className:"text-sm text-green-700 hover:underline",children:[" Add ",oe[U].slice(0,-1)]}),N.jsx("button",{onClick:async()=>{const ce=t.analysis?.[U]||[];if(!ce.length){alert("No items to analyze yet.");return}try{f(!0);const fe=await c_(U,ce);if(!fe?.length){alert("No contextual terms found.");return}const Pe=[...t.contexts||[],...fe];s({...t,contexts:Pe}),alert(` Added ${fe.length} contextual explainers from ${U}.`)}catch(fe){console.error("GPT error (analysis contexts):",fe),alert(" Failed to generate analysis contexts.")}finally{f(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),K.length===0?N.jsxs("p",{className:"text-sm text-gray-500",children:["No ",oe[U]," yet."]}):N.jsx("ul",{className:"space-y-2",children:K.map((ce,fe)=>N.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border text-sm space-y-2",children:[U==="stakeholders"?N.jsxs(N.Fragment,{children:[N.jsx("input",{type:"text",value:ce.name,onChange:Pe=>{const He={...t};He.analysis[U][fe].name=Pe.target.value,s(He)},placeholder:"Name",className:"w-full border p-1 rounded"}),N.jsx("textarea",{value:ce.detail,onChange:Pe=>{const He={...t};He.analysis[U][fe].detail=Pe.target.value,s(He)},placeholder:"Detail",className:"w-full border p-1 rounded"})]}):N.jsxs(N.Fragment,{children:[N.jsx("input",{type:"text",value:ce.question,onChange:Pe=>{const He={...t};He.analysis[U][fe].question=Pe.target.value,s(He)},placeholder:"Question",className:"w-full border p-1 rounded"}),N.jsx("textarea",{value:ce.answer,onChange:Pe=>{const He={...t};He.analysis[U][fe].answer=Pe.target.value,s(He)},placeholder:"Answer",className:"w-full border p-1 rounded"})]}),N.jsx("button",{onClick:()=>{const Pe={...t},He=[...Y?.[U]||[]];He.splice(fe,1),Pe.analysis={...Y,[U]:He},s(Pe)},className:"text-xs text-red-600 hover:underline",children:"Delete"})]},fe))})]})]},U)})}),N.jsx("button",{onClick:async()=>{if(r)try{await sr(r,{analysis:t.analysis}),E(!1),alert(" Analysis saved successfully!")}catch(U){console.error(U),alert(" Failed to save analysis: "+U.message)}},className:"mt-4 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:" Save Analysis"})]})]}):N.jsx("div",{className:"p-6 text-red-500",children:"Draft not found"})}function AC(){const[r,e]=X.useState({gpt:{timelinePrompt:`You are a precise news editor. 
Given a topic, generate a concise chronological timeline of 1015 key events.
Each event must include:
- date (YYYY-MM-DD)
- short event title
- 12 sentence factual description
- significance (1=low, 2=medium, 3=high)
Return only valid JSON with key "timeline".`,analysisPrompt:`You are a political analyst creating structured insights.
Given a topic and overview, produce three sections:
1. stakeholders  list key people/institutions and their roles.
2. faqs  questions readers might have with concise answers.
3. future  forward-looking questions with reasoned answers.
Keep all responses factual, under 50 words each. Return valid JSON with key "analysis".`},serper:{prompt:"title"}}),[t,s]=X.useState(!0),[o,u]=X.useState(!1);X.useEffect(()=>{(async()=>{try{const f=mi(Wr,"settings","global"),g=await ic(f);if(g.exists()){const v=g.data();e({gpt:{timelinePrompt:v?.gpt?.timelinePrompt||r.gpt.timelinePrompt,analysisPrompt:v?.gpt?.analysisPrompt||r.gpt.analysisPrompt},serper:{prompt:v?.serper?.prompt||r.serper.prompt}})}}catch(f){console.error(" Failed to load prompts:",f)}finally{s(!1)}})()},[]);const h=async()=>{try{u(!0);const f=mi(Wr,"settings","global");await uf(f,r,{merge:!0}),alert(" Prompts saved successfully!")}catch(f){console.error(f),alert(" Failed to save prompts")}finally{u(!1)}};return t?N.jsx("div",{className:"p-6",children:"Loading..."}):N.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[N.jsx("h1",{className:"text-3xl font-bold",children:" Prompt Editor"}),N.jsx("p",{className:"text-gray-600 mb-4",children:"Edit the default text templates used by GPT and Serper for content generation."}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[N.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Timeline Prompt"}),N.jsx("textarea",{value:r.gpt.timelinePrompt,onChange:f=>e({...r,gpt:{...r.gpt,timelinePrompt:f.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[N.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Analysis Prompt"}),N.jsx("textarea",{value:r.gpt.analysisPrompt,onChange:f=>e({...r,gpt:{...r.gpt,analysisPrompt:f.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[N.jsx("h2",{className:"text-xl font-semibold",children:"Serper  Search Prompt"}),N.jsxs("p",{className:"text-sm text-gray-600",children:["This text defines what query is sent to Serper for event coverage. If left as ",N.jsx("code",{children:"title"}),", the drafts event title will be used by default."]}),N.jsx("textarea",{value:r.serper.prompt,onChange:f=>e({...r,serper:{prompt:f.target.value}}),className:"w-full border rounded p-3 h-24 text-sm",placeholder:"Example: Find recent, credible articles about {{topic}}."})]}),N.jsx("button",{onClick:h,disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:o?"Saving":" Save All Prompts"})]})}const PC=Q0([{path:"/",element:N.jsx(hE,{}),children:[{path:"/",element:N.jsxs("div",{className:"p-6",children:[N.jsx("h1",{className:"text-3xl font-bold",children:"Welcome to WaitWhat? CMS"}),N.jsx("p",{className:"text-gray-600 mt-2",children:"Use the sidebar to manage Theme and Story drafts, or adjust prompts in the Prompt Lab."})]})},{path:"/drafts/themes",element:N.jsx(vC,{})},{path:"/drafts/stories",element:N.jsx(_C,{})},{path:"/drafts/:id",element:N.jsx(RC,{})},{path:"/promptlab",element:N.jsx(AC,{})}]}]);Sw.createRoot(document.getElementById("root")).render(N.jsx(Zg.StrictMode,{children:N.jsx(nE,{router:PC})}));
