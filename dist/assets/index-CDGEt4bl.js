function m_(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Kf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jd={exports:{}},dl={},Xd={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function TT(){if(iy)return Je;iy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=E&&z[E]||z["@@iterator"],typeof z=="function"?z:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,j={};function H(z,J,Ce){this.props=z,this.context=J,this.refs=j,this.updater=Ce||P}H.prototype.isReactComponent={},H.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},H.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function fe(){}fe.prototype=H.prototype;function ee(z,J,Ce){this.props=z,this.context=J,this.refs=j,this.updater=Ce||P}var ce=ee.prototype=new fe;ce.constructor=ee,L(ce,H.prototype),ce.isPureReactComponent=!0;var pe=Array.isArray,Fe=Object.prototype.hasOwnProperty,Me={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(z,J,Ce){var Be,F={},K=null,q=null;if(J!=null)for(Be in J.ref!==void 0&&(q=J.ref),J.key!==void 0&&(K=""+J.key),J)Fe.call(J,Be)&&!S.hasOwnProperty(Be)&&(F[Be]=J[Be]);var Z=arguments.length-2;if(Z===1)F.children=Ce;else if(1<Z){for(var le=Array(Z),me=0;me<Z;me++)le[me]=arguments[me+2];F.children=le}if(z&&z.defaultProps)for(Be in Z=z.defaultProps,Z)F[Be]===void 0&&(F[Be]=Z[Be]);return{$$typeof:n,type:z,key:K,ref:q,props:F,_owner:Me.current}}function A(z,J){return{$$typeof:n,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function O(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ce){return J[Ce]})}var V=/\/+/g;function x(z,J){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):J.toString(36)}function Ge(z,J,Ce,Be,F){var K=typeof z;(K==="undefined"||K==="boolean")&&(z=null);var q=!1;if(z===null)q=!0;else switch(K){case"string":case"number":q=!0;break;case"object":switch(z.$$typeof){case n:case e:q=!0}}if(q)return q=z,F=F(q),z=Be===""?"."+x(q,0):Be,pe(F)?(Ce="",z!=null&&(Ce=z.replace(V,"$&/")+"/"),Ge(F,J,Ce,"",function(me){return me})):F!=null&&(N(F)&&(F=A(F,Ce+(!F.key||q&&q.key===F.key?"":(""+F.key).replace(V,"$&/")+"/")+z)),J.push(F)),1;if(q=0,Be=Be===""?".":Be+":",pe(z))for(var Z=0;Z<z.length;Z++){K=z[Z];var le=Be+x(K,Z);q+=Ge(K,J,Ce,le,F)}else if(le=T(z),typeof le=="function")for(z=le.call(z),Z=0;!(K=z.next()).done;)K=K.value,le=Be+x(K,Z++),q+=Ge(K,J,Ce,le,F);else if(K==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return q}function ut(z,J,Ce){if(z==null)return z;var Be=[],F=0;return Ge(z,Be,"","",function(K){return J.call(Ce,K,F++)}),Be}function Rt(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(Ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ce)},function(Ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ce)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var rt={current:null},oe={transition:null},xe={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:oe,ReactCurrentOwner:Me};function ge(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:ut,forEach:function(z,J,Ce){ut(z,function(){J.apply(this,arguments)},Ce)},count:function(z){var J=0;return ut(z,function(){J++}),J},toArray:function(z){return ut(z,function(J){return J})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Je.Component=H,Je.Fragment=t,Je.Profiler=o,Je.PureComponent=ee,Je.StrictMode=i,Je.Suspense=p,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,Je.act=ge,Je.cloneElement=function(z,J,Ce){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Be=L({},z.props),F=z.key,K=z.ref,q=z._owner;if(J!=null){if(J.ref!==void 0&&(K=J.ref,q=Me.current),J.key!==void 0&&(F=""+J.key),z.type&&z.type.defaultProps)var Z=z.type.defaultProps;for(le in J)Fe.call(J,le)&&!S.hasOwnProperty(le)&&(Be[le]=J[le]===void 0&&Z!==void 0?Z[le]:J[le])}var le=arguments.length-2;if(le===1)Be.children=Ce;else if(1<le){Z=Array(le);for(var me=0;me<le;me++)Z[me]=arguments[me+2];Be.children=Z}return{$$typeof:n,type:z.type,key:F,ref:K,props:Be,_owner:q}},Je.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:l,_context:z},z.Consumer=z},Je.createElement=C,Je.createFactory=function(z){var J=C.bind(null,z);return J.type=z,J},Je.createRef=function(){return{current:null}},Je.forwardRef=function(z){return{$$typeof:d,render:z}},Je.isValidElement=N,Je.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:Rt}},Je.memo=function(z,J){return{$$typeof:y,type:z,compare:J===void 0?null:J}},Je.startTransition=function(z){var J=oe.transition;oe.transition={};try{z()}finally{oe.transition=J}},Je.unstable_act=ge,Je.useCallback=function(z,J){return rt.current.useCallback(z,J)},Je.useContext=function(z){return rt.current.useContext(z)},Je.useDebugValue=function(){},Je.useDeferredValue=function(z){return rt.current.useDeferredValue(z)},Je.useEffect=function(z,J){return rt.current.useEffect(z,J)},Je.useId=function(){return rt.current.useId()},Je.useImperativeHandle=function(z,J,Ce){return rt.current.useImperativeHandle(z,J,Ce)},Je.useInsertionEffect=function(z,J){return rt.current.useInsertionEffect(z,J)},Je.useLayoutEffect=function(z,J){return rt.current.useLayoutEffect(z,J)},Je.useMemo=function(z,J){return rt.current.useMemo(z,J)},Je.useReducer=function(z,J,Ce){return rt.current.useReducer(z,J,Ce)},Je.useRef=function(z){return rt.current.useRef(z)},Je.useState=function(z){return rt.current.useState(z)},Je.useSyncExternalStore=function(z,J,Ce){return rt.current.useSyncExternalStore(z,J,Ce)},Je.useTransition=function(){return rt.current.useTransition()},Je.version="18.3.1",Je}var sy;function Qf(){return sy||(sy=1,Xd.exports=TT()),Xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function IT(){if(oy)return dl;oy=1;var n=Qf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var _,E={},T=null,P=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:T,ref:P,props:E,_owner:o.current}}return dl.Fragment=t,dl.jsx=c,dl.jsxs=c,dl}var ay;function ST(){return ay||(ay=1,Jd.exports=IT()),Jd.exports}var R=ST(),X=Qf();const g_=Kf(X),CT=m_({__proto__:null,default:g_},[X]);var oc={},Zd={exports:{}},Un={},ef={exports:{}},tf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function PT(){return ly||(ly=1,(function(n){function e(oe,xe){var ge=oe.length;oe.push(xe);e:for(;0<ge;){var z=ge-1>>>1,J=oe[z];if(0<o(J,xe))oe[z]=xe,oe[ge]=J,ge=z;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var xe=oe[0],ge=oe.pop();if(ge!==xe){oe[0]=ge;e:for(var z=0,J=oe.length,Ce=J>>>1;z<Ce;){var Be=2*(z+1)-1,F=oe[Be],K=Be+1,q=oe[K];if(0>o(F,ge))K<J&&0>o(q,F)?(oe[z]=q,oe[K]=ge,z=K):(oe[z]=F,oe[Be]=ge,z=Be);else if(K<J&&0>o(q,ge))oe[z]=q,oe[K]=ge,z=K;else break e}}return xe}function o(oe,xe){var ge=oe.sortIndex-xe.sortIndex;return ge!==0?ge:oe.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],y=[],_=1,E=null,T=3,P=!1,L=!1,j=!1,H=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(oe){for(var xe=t(y);xe!==null;){if(xe.callback===null)i(y);else if(xe.startTime<=oe)i(y),xe.sortIndex=xe.expirationTime,e(p,xe);else break;xe=t(y)}}function pe(oe){if(j=!1,ce(oe),!L)if(t(p)!==null)L=!0,Rt(Fe);else{var xe=t(y);xe!==null&&rt(pe,xe.startTime-oe)}}function Fe(oe,xe){L=!1,j&&(j=!1,fe(C),C=-1),P=!0;var ge=T;try{for(ce(xe),E=t(p);E!==null&&(!(E.expirationTime>xe)||oe&&!O());){var z=E.callback;if(typeof z=="function"){E.callback=null,T=E.priorityLevel;var J=z(E.expirationTime<=xe);xe=n.unstable_now(),typeof J=="function"?E.callback=J:E===t(p)&&i(p),ce(xe)}else i(p);E=t(p)}if(E!==null)var Ce=!0;else{var Be=t(y);Be!==null&&rt(pe,Be.startTime-xe),Ce=!1}return Ce}finally{E=null,T=ge,P=!1}}var Me=!1,S=null,C=-1,A=5,N=-1;function O(){return!(n.unstable_now()-N<A)}function V(){if(S!==null){var oe=n.unstable_now();N=oe;var xe=!0;try{xe=S(!0,oe)}finally{xe?x():(Me=!1,S=null)}}else Me=!1}var x;if(typeof ee=="function")x=function(){ee(V)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,ut=Ge.port2;Ge.port1.onmessage=V,x=function(){ut.postMessage(null)}}else x=function(){H(V,0)};function Rt(oe){S=oe,Me||(Me=!0,x())}function rt(oe,xe){C=H(function(){oe(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){L||P||(L=!0,Rt(Fe))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var xe=3;break;default:xe=T}var ge=T;T=xe;try{return oe()}finally{T=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,xe){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ge=T;T=oe;try{return xe()}finally{T=ge}},n.unstable_scheduleCallback=function(oe,xe,ge){var z=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?z+ge:z):ge=z,oe){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ge+J,oe={id:_++,callback:xe,priorityLevel:oe,startTime:ge,expirationTime:J,sortIndex:-1},ge>z?(oe.sortIndex=ge,e(y,oe),t(p)===null&&oe===t(y)&&(j?(fe(C),C=-1):j=!0,rt(pe,ge-z))):(oe.sortIndex=J,e(p,oe),L||P||(L=!0,Rt(Fe))),oe},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(oe){var xe=T;return function(){var ge=T;T=xe;try{return oe.apply(this,arguments)}finally{T=ge}}}})(tf)),tf}var uy;function RT(){return uy||(uy=1,ef.exports=PT()),ef.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function AT(){if(cy)return Un;cy=1;var n=Qf(),e=RT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function T(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function P(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function L(r,s,a,h){if(s===null||typeof s>"u"||P(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(r,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){H[r]=new j(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];H[s]=new j(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){H[r]=new j(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){H[r]=new j(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){H[r]=new j(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){H[r]=new j(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){H[r]=new j(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){H[r]=new j(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){H[r]=new j(r,5,!1,r.toLowerCase(),null,!1,!1)});var fe=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(fe,ee);H[s]=new j(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(fe,ee);H[s]=new j(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(fe,ee);H[s]=new j(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){H[r]=new j(r,1,!1,r.toLowerCase(),null,!1,!1)}),H.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){H[r]=new j(r,1,!1,r.toLowerCase(),null,!0,!0)});function ce(r,s,a,h){var f=H.hasOwnProperty(s)?H[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,f,h)&&(a=null),h||f===null?T(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var pe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fe=Symbol.for("react.element"),Me=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),rt=Symbol.for("react.offscreen"),oe=Symbol.iterator;function xe(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var ge=Object.assign,z;function J(r){if(z===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);z=s&&s[1]||""}return`
`+z+r}var Ce=!1;function Be(r,s){if(!r||Ce)return"";Ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var h=Q}Reflect.construct(r,[],s)}else{try{s.call()}catch(Q){h=Q}r.call(s.prototype)}else{try{throw Error()}catch(Q){h=Q}r()}}catch(Q){if(Q&&h&&typeof Q.stack=="string"){for(var f=Q.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,k=g.length-1;1<=w&&0<=k&&f[w]!==g[k];)k--;for(;1<=w&&0<=k;w--,k--)if(f[w]!==g[k]){if(w!==1||k!==1)do if(w--,k--,0>k||f[w]!==g[k]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=k);break}}}finally{Ce=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?J(r):""}function F(r){switch(r.tag){case 5:return J(r.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return r=Be(r.type,!1),r;case 11:return r=Be(r.type.render,!1),r;case 1:return r=Be(r.type,!0),r;default:return""}}function K(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case Me:return"Portal";case A:return"Profiler";case C:return"StrictMode";case x:return"Suspense";case Ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case V:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ut:return s=r.displayName||null,s!==null?s:K(r.type)||"Memo";case Rt:s=r._payload,r=r._init;try{return K(r(s))}catch{}}return null}function q(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Z(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function le(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function me(r){var s=le(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function be(r){r._valueTracker||(r._valueTracker=me(r))}function ke(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=le(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function it(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function yt(r,s){var a=s.checked;return ge({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function dn(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Z(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function fn(r,s){s=s.checked,s!=null&&ce(r,"checked",s,!1)}function Ms(r,s){fn(r,s);var a=Z(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ci(r,s.type,a):s.hasOwnProperty("defaultValue")&&ci(r,s.type,Z(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ro(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ci(r,s,a){(s!=="number"||it(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var gr=Array.isArray;function yr(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Z(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Fs(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ge({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Fi(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Z(a)}}function An(r,s){var a=Z(s.value),h=Z(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function vr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Dt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Dt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Yt,Sn=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Yt=Yt||document.createElement("div"),Yt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Yt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function _r(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hi=["Webkit","ms","Moz","O"];Object.keys(rr).forEach(function(r){hi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),rr[s]=rr[r]})});function xn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||rr.hasOwnProperty(r)&&rr[r]?(""+s).trim():s+"px"}function Ui(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=xn(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var ji=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zi(r,s){if(s){if(ji[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Us(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=null;function wr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var di=null,pn=null,kn=null;function Bi(r){if(r=Ja(r)){if(typeof di!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Eu(s),di(r.stateNode,r.type,s))}}function Hn(r){pn?kn?kn.push(r):kn=[r]:pn=r}function js(){if(pn){var r=pn,s=kn;if(kn=pn=null,Bi(r),s)for(r=0;r<s.length;r++)Bi(s[r])}}function Mr(r,s){return r(s)}function Fr(){}var Nn=!1;function zs(r,s,a){if(Nn)return r(s,a);Nn=!0;try{return Mr(r,s,a)}finally{Nn=!1,(pn!==null||kn!==null)&&(Fr(),js())}}function xt(r,s){var a=r.stateNode;if(a===null)return null;var h=Eu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var b=!1;if(d)try{var U={};Object.defineProperty(U,"passive",{get:function(){b=!0}}),window.addEventListener("test",U,U),window.removeEventListener("test",U,U)}catch{b=!1}function G(r,s,a,h,f,g,w,k,D){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(a,Q)}catch(se){this.onError(se)}}var ne=!1,de=null,Te=!1,Oe=null,Ie={onError:function(r){ne=!0,de=r}};function Ee(r,s,a,h,f,g,w,k,D){ne=!1,de=null,G.apply(Ie,arguments)}function ve(r,s,a,h,f,g,w,k,D){if(Ee.apply(this,arguments),ne){if(ne){var Q=de;ne=!1,de=null}else throw Error(t(198));Te||(Te=!0,Oe=Q)}}function _e(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Ue(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function He(r){if(_e(r)!==r)throw Error(t(188))}function Ot(r){var s=r.alternate;if(!s){if(s=_e(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return He(f),r;if(g===h)return He(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,k=f.child;k;){if(k===a){w=!0,a=f,h=g;break}if(k===h){w=!0,h=f,a=g;break}k=k.sibling}if(!w){for(k=g.child;k;){if(k===a){w=!0,a=g,h=f;break}if(k===h){w=!0,h=g,a=f;break}k=k.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ct(r){return r=Ot(r),r!==null?Ye(r):null}function Ye(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Ye(r);if(s!==null)return s;r=r.sibling}return null}var pt=e.unstable_scheduleCallback,ir=e.unstable_cancelCallback,Ur=e.unstable_shouldYield,Wn=e.unstable_requestPaint,Xe=e.unstable_now,$i=e.unstable_getCurrentPriorityLevel,qn=e.unstable_ImmediatePriority,mn=e.unstable_UserBlockingPriority,rn=e.unstable_NormalPriority,jr=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,dt=null,Ft=null;function zr(r){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(dt,r,void 0,(r.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:Ao,sr=Math.log,Bs=Math.LN2;function Ao(r){return r>>>=0,r===0?32:31-(sr(r)/Bs|0)|0}var xo=64,ko=4194304;function Hi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function $s(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var k=w&~f;k!==0?h=Hi(k):(g&=w,g!==0&&(h=Hi(g)))}else w=a&~f,w!==0?h=Hi(w):g!==0&&(h=Hi(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-et(s),f=1<<a,h|=r[a],s&=~f;return h}function Rh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-et(g),k=1<<w,D=f[w];D===-1?((k&a)===0||(k&h)!==0)&&(f[w]=Rh(k,s)):D<=s&&(r.expiredLanes|=k),g&=~k}}function Gn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Hs(){var r=xo;return xo<<=1,(xo&4194240)===0&&(xo=64),r}function Wi(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function qi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-et(s),r[s]=a}function vt(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-et(a),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~g}}function Gi(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-et(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var st=0;function Ki(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var eu,No,tu,nu,ru,Va=!1,Br=[],sn=null,Er=null,Tr=null,Qi=new Map,or=new Map,$r=[],Ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iu(r,s){switch(r){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Qi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":or.delete(s.pointerId)}}function bn(r,s,a,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ja(s),s!==null&&No(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function xh(r,s,a,h,f){switch(s){case"focusin":return sn=bn(sn,r,s,a,h,f),!0;case"dragenter":return Er=bn(Er,r,s,a,h,f),!0;case"mouseover":return Tr=bn(Tr,r,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Qi.set(g,bn(Qi.get(g)||null,r,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,or.set(g,bn(or.get(g)||null,r,s,a,h,f)),!0}return!1}function su(r){var s=Qs(r.target);if(s!==null){var a=_e(s);if(a!==null){if(s=a.tag,s===13){if(s=Ue(a),s!==null){r.blockedOn=s,ru(r.priority,function(){tu(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pi(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=bo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Vr=h,a.target.dispatchEvent(h),Vr=null}else return s=Ja(a),s!==null&&No(s),r.blockedOn=a,!1;s.shift()}return!0}function Ws(r,s,a){pi(r)&&a.delete(s)}function ou(){Va=!1,sn!==null&&pi(sn)&&(sn=null),Er!==null&&pi(Er)&&(Er=null),Tr!==null&&pi(Tr)&&(Tr=null),Qi.forEach(Ws),or.forEach(Ws)}function Ir(r,s){r.blockedOn===s&&(r.blockedOn=null,Va||(Va=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ou)))}function Sr(r){function s(f){return Ir(f,r)}if(0<Br.length){Ir(Br[0],r);for(var a=1;a<Br.length;a++){var h=Br[a];h.blockedOn===r&&(h.blockedOn=null)}}for(sn!==null&&Ir(sn,r),Er!==null&&Ir(Er,r),Tr!==null&&Ir(Tr,r),Qi.forEach(s),or.forEach(s),a=0;a<$r.length;a++)h=$r[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<$r.length&&(a=$r[0],a.blockedOn===null);)su(a),a.blockedOn===null&&$r.shift()}var mi=pe.ReactCurrentBatchConfig,Yi=!0;function St(r,s,a,h){var f=st,g=mi.transition;mi.transition=null;try{st=1,Ma(r,s,a,h)}finally{st=f,mi.transition=g}}function kh(r,s,a,h){var f=st,g=mi.transition;mi.transition=null;try{st=4,Ma(r,s,a,h)}finally{st=f,mi.transition=g}}function Ma(r,s,a,h){if(Yi){var f=bo(r,s,a,h);if(f===null)zh(r,s,h,qs,a),iu(r,h);else if(xh(f,r,s,a,h))h.stopPropagation();else if(iu(r,h),s&4&&-1<Ah.indexOf(r)){for(;f!==null;){var g=Ja(f);if(g!==null&&eu(g),g=bo(r,s,a,h),g===null&&zh(r,s,h,qs,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else zh(r,s,h,null,a)}}var qs=null;function bo(r,s,a,h){if(qs=null,r=wr(h),r=Qs(r),r!==null)if(s=_e(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Ue(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return qs=r,null}function Fa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($i()){case qn:return 1;case mn:return 4;case rn:case jr:return 16;case Ze:return 536870912;default:return 16}default:return 16}}var Kn=null,Do=null,Dn=null;function Ua(){if(Dn)return Dn;var r,s=Do,a=s.length,h,f="value"in Kn?Kn.value:Kn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return Dn=f.slice(r,1<h?1-h:void 0)}function Oo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Hr(){return!0}function ja(){return!1}function on(r){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hr:ja,this.isPropagationStopped=ja,this}return ge(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),s}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=on(Cr),Wr=ge({},Cr,{view:0,detail:0}),Nh=on(Wr),Vo,gi,Ji,Gs=ge({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ji&&(Ji&&r.type==="mousemove"?(Vo=r.screenX-Ji.screenX,gi=r.screenY-Ji.screenY):gi=Vo=0,Ji=r),Vo)},movementY:function(r){return"movementY"in r?r.movementY:gi}}),Mo=on(Gs),za=ge({},Gs,{dataTransfer:0}),au=on(za),Fo=ge({},Wr,{relatedTarget:0}),Uo=on(Fo),lu=ge({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),yi=on(lu),uu=ge({},Cr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),cu=on(uu),hu=ge({},Cr,{data:0}),Ba=on(hu),jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=du[r])?!!s[r]:!1}function qr(){return fu}var u=ge({},Wr,{key:function(r){if(r.key){var s=jo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Oo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(r){return r.type==="keypress"?Oo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Oo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=on(u),v=ge({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=on(v),B=ge({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),Y=on(B),he=ge({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mt=on(he),Wt=ge({},Gs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=on(Wt),Jt=[9,13,27,32],Ut=d&&"CompositionEvent"in window,ar=null;d&&"documentMode"in document&&(ar=document.documentMode);var Qn=d&&"TextEvent"in window&&!ar,Ks=d&&(!Ut||ar&&8<ar&&11>=ar),zo=" ",Xp=!1;function Zp(r,s){switch(r){case"keyup":return Jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function em(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bo=!1;function _0(r,s){switch(r){case"compositionend":return em(s);case"keypress":return s.which!==32?null:(Xp=!0,zo);case"textInput":return r=s.data,r===zo&&Xp?null:r;default:return null}}function w0(r,s){if(Bo)return r==="compositionend"||!Ut&&Zp(r,s)?(r=Ua(),Dn=Do=Kn=null,Bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ks&&s.locale!=="ko"?null:s.data;default:return null}}var E0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!E0[r.type]:s==="textarea"}function nm(r,s,a,h){Hn(h),s=vu(s,"onChange"),0<s.length&&(a=new Lo("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var $a=null,Ha=null;function T0(r){wm(r,0)}function pu(r){var s=Go(r);if(ke(s))return r}function I0(r,s){if(r==="change")return s}var rm=!1;if(d){var bh;if(d){var Dh="oninput"in document;if(!Dh){var im=document.createElement("div");im.setAttribute("oninput","return;"),Dh=typeof im.oninput=="function"}bh=Dh}else bh=!1;rm=bh&&(!document.documentMode||9<document.documentMode)}function sm(){$a&&($a.detachEvent("onpropertychange",om),Ha=$a=null)}function om(r){if(r.propertyName==="value"&&pu(Ha)){var s=[];nm(s,Ha,r,wr(r)),zs(T0,s)}}function S0(r,s,a){r==="focusin"?(sm(),$a=s,Ha=a,$a.attachEvent("onpropertychange",om)):r==="focusout"&&sm()}function C0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pu(Ha)}function P0(r,s){if(r==="click")return pu(s)}function R0(r,s){if(r==="input"||r==="change")return pu(s)}function A0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Pr=typeof Object.is=="function"?Object.is:A0;function Wa(r,s){if(Pr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Pr(r[f],s[f]))return!1}return!0}function am(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function lm(r,s){var a=am(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=am(a)}}function um(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?um(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function cm(){for(var r=window,s=it();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=it(r.document)}return s}function Oh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function x0(r){var s=cm(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&um(a.ownerDocument.documentElement,a)){if(h!==null&&Oh(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=lm(a,g);var w=lm(a,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var k0=d&&"documentMode"in document&&11>=document.documentMode,$o=null,Lh=null,qa=null,Vh=!1;function hm(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vh||$o==null||$o!==it(h)||(h=$o,"selectionStart"in h&&Oh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),qa&&Wa(qa,h)||(qa=h,h=vu(Lh,"onSelect"),0<h.length&&(s=new Lo("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=$o)))}function mu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Ho={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionend:mu("Transition","TransitionEnd")},Mh={},dm={};d&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function gu(r){if(Mh[r])return Mh[r];if(!Ho[r])return r;var s=Ho[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in dm)return Mh[r]=s[a];return r}var fm=gu("animationend"),pm=gu("animationiteration"),mm=gu("animationstart"),gm=gu("transitionend"),ym=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(r,s){ym.set(r,s),l(s,[r])}for(var Fh=0;Fh<vm.length;Fh++){var Uh=vm[Fh],N0=Uh.toLowerCase(),b0=Uh[0].toUpperCase()+Uh.slice(1);Xi(N0,"on"+b0)}Xi(fm,"onAnimationEnd"),Xi(pm,"onAnimationIteration"),Xi(mm,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(gm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function _m(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,ve(h,s,void 0,r),r.currentTarget=null}function wm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var k=h[w],D=k.instance,Q=k.currentTarget;if(k=k.listener,D!==g&&f.isPropagationStopped())break e;_m(f,k,Q),g=D}else for(w=0;w<h.length;w++){if(k=h[w],D=k.instance,Q=k.currentTarget,k=k.listener,D!==g&&f.isPropagationStopped())break e;_m(f,k,Q),g=D}}}if(Te)throw r=Oe,Te=!1,Oe=null,r}function wt(r,s){var a=s[Gh];a===void 0&&(a=s[Gh]=new Set);var h=r+"__bubble";a.has(h)||(Em(s,r,2,!1),a.add(h))}function jh(r,s,a){var h=0;s&&(h|=4),Em(a,r,h,s)}var yu="_reactListening"+Math.random().toString(36).slice(2);function Ka(r){if(!r[yu]){r[yu]=!0,i.forEach(function(a){a!=="selectionchange"&&(D0.has(a)||jh(a,!1,r),jh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[yu]||(s[yu]=!0,jh("selectionchange",!1,s))}}function Em(r,s,a,h){switch(Fa(s)){case 1:var f=St;break;case 4:f=kh;break;default:f=Ma}a=f.bind(null,s,a,r),f=void 0,!b||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function zh(r,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var k=h.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;k!==null;){if(w=Qs(k),w===null)return;if(D=w.tag,D===5||D===6){h=g=w;continue e}k=k.parentNode}}h=h.return}zs(function(){var Q=g,se=wr(a),ae=[];e:{var ie=ym.get(r);if(ie!==void 0){var ye=Lo,Pe=r;switch(r){case"keypress":if(Oo(a)===0)break e;case"keydown":case"keyup":ye=m;break;case"focusin":Pe="focus",ye=Uo;break;case"focusout":Pe="blur",ye=Uo;break;case"beforeblur":case"afterblur":ye=Uo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Y;break;case fm:case pm:case mm:ye=yi;break;case gm:ye=mt;break;case"scroll":ye=Nh;break;case"wheel":ye=ot;break;case"copy":case"cut":case"paste":ye=cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=I}var Re=(s&4)!==0,Vt=!Re&&r==="scroll",$=Re?ie!==null?ie+"Capture":null:ie;Re=[];for(var M=Q,W;M!==null;){W=M;var ue=W.stateNode;if(W.tag===5&&ue!==null&&(W=ue,$!==null&&(ue=xt(M,$),ue!=null&&Re.push(Qa(M,ue,W)))),Vt)break;M=M.return}0<Re.length&&(ie=new ye(ie,Pe,null,a,se),ae.push({event:ie,listeners:Re}))}}if((s&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",ye=r==="mouseout"||r==="pointerout",ie&&a!==Vr&&(Pe=a.relatedTarget||a.fromElement)&&(Qs(Pe)||Pe[vi]))break e;if((ye||ie)&&(ie=se.window===se?se:(ie=se.ownerDocument)?ie.defaultView||ie.parentWindow:window,ye?(Pe=a.relatedTarget||a.toElement,ye=Q,Pe=Pe?Qs(Pe):null,Pe!==null&&(Vt=_e(Pe),Pe!==Vt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(ye=null,Pe=Q),ye!==Pe)){if(Re=Mo,ue="onMouseLeave",$="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Re=I,ue="onPointerLeave",$="onPointerEnter",M="pointer"),Vt=ye==null?ie:Go(ye),W=Pe==null?ie:Go(Pe),ie=new Re(ue,M+"leave",ye,a,se),ie.target=Vt,ie.relatedTarget=W,ue=null,Qs(se)===Q&&(Re=new Re($,M+"enter",Pe,a,se),Re.target=W,Re.relatedTarget=Vt,ue=Re),Vt=ue,ye&&Pe)t:{for(Re=ye,$=Pe,M=0,W=Re;W;W=Wo(W))M++;for(W=0,ue=$;ue;ue=Wo(ue))W++;for(;0<M-W;)Re=Wo(Re),M--;for(;0<W-M;)$=Wo($),W--;for(;M--;){if(Re===$||$!==null&&Re===$.alternate)break t;Re=Wo(Re),$=Wo($)}Re=null}else Re=null;ye!==null&&Tm(ae,ie,ye,Re,!1),Pe!==null&&Vt!==null&&Tm(ae,Vt,Pe,Re,!0)}}e:{if(ie=Q?Go(Q):window,ye=ie.nodeName&&ie.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ie.type==="file")var Ne=I0;else if(tm(ie))if(rm)Ne=R0;else{Ne=C0;var Le=S0}else(ye=ie.nodeName)&&ye.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ne=P0);if(Ne&&(Ne=Ne(r,Q))){nm(ae,Ne,a,se);break e}Le&&Le(r,ie,Q),r==="focusout"&&(Le=ie._wrapperState)&&Le.controlled&&ie.type==="number"&&ci(ie,"number",ie.value)}switch(Le=Q?Go(Q):window,r){case"focusin":(tm(Le)||Le.contentEditable==="true")&&($o=Le,Lh=Q,qa=null);break;case"focusout":qa=Lh=$o=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,hm(ae,a,se);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":hm(ae,a,se)}var Ve;if(Ut)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Bo?Zp(r,a)&&($e="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(Ks&&a.locale!=="ko"&&(Bo||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Bo&&(Ve=Ua()):(Kn=se,Do="value"in Kn?Kn.value:Kn.textContent,Bo=!0)),Le=vu(Q,$e),0<Le.length&&($e=new Ba($e,r,null,a,se),ae.push({event:$e,listeners:Le}),Ve?$e.data=Ve:(Ve=em(a),Ve!==null&&($e.data=Ve)))),(Ve=Qn?_0(r,a):w0(r,a))&&(Q=vu(Q,"onBeforeInput"),0<Q.length&&(se=new Ba("onBeforeInput","beforeinput",null,a,se),ae.push({event:se,listeners:Q}),se.data=Ve))}wm(ae,s)})}function Qa(r,s,a){return{instance:r,listener:s,currentTarget:a}}function vu(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=xt(r,a),g!=null&&h.unshift(Qa(r,g,f)),g=xt(r,s),g!=null&&h.push(Qa(r,g,f))),r=r.return}return h}function Wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Tm(r,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var k=a,D=k.alternate,Q=k.stateNode;if(D!==null&&D===h)break;k.tag===5&&Q!==null&&(k=Q,f?(D=xt(a,g),D!=null&&w.unshift(Qa(a,D,k))):f||(D=xt(a,g),D!=null&&w.push(Qa(a,D,k)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var O0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function Im(r){return(typeof r=="string"?r:""+r).replace(O0,`
`).replace(L0,"")}function _u(r,s,a){if(s=Im(s),Im(r)!==s&&a)throw Error(t(425))}function wu(){}var Bh=null,$h=null;function Hh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,V0=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(r){return Sm.resolve(null).then(r).catch(F0)}:Wh;function F0(r){setTimeout(function(){throw r})}function qh(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),Sr(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Sr(s)}function Zi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Cm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var qo=Math.random().toString(36).slice(2),Gr="__reactFiber$"+qo,Ya="__reactProps$"+qo,vi="__reactContainer$"+qo,Gh="__reactEvents$"+qo,U0="__reactListeners$"+qo,j0="__reactHandles$"+qo;function Qs(r){var s=r[Gr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[vi]||a[Gr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Cm(r);r!==null;){if(a=r[Gr])return a;r=Cm(r)}return s}r=a,a=r.parentNode}return null}function Ja(r){return r=r[Gr]||r[vi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Go(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Eu(r){return r[Ya]||null}var Kh=[],Ko=-1;function es(r){return{current:r}}function Et(r){0>Ko||(r.current=Kh[Ko],Kh[Ko]=null,Ko--)}function _t(r,s){Ko++,Kh[Ko]=r.current,r.current=s}var ts={},gn=es(ts),On=es(!1),Ys=ts;function Qo(r,s){var a=r.type.contextTypes;if(!a)return ts;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Ln(r){return r=r.childContextTypes,r!=null}function Tu(){Et(On),Et(gn)}function Pm(r,s,a){if(gn.current!==ts)throw Error(t(168));_t(gn,s),_t(On,a)}function Rm(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,q(r)||"Unknown",f));return ge({},a,h)}function Iu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ts,Ys=gn.current,_t(gn,r),_t(On,On.current),!0}function Am(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Rm(r,s,Ys),h.__reactInternalMemoizedMergedChildContext=r,Et(On),Et(gn),_t(gn,r)):Et(On),_t(On,a)}var _i=null,Su=!1,Qh=!1;function xm(r){_i===null?_i=[r]:_i.push(r)}function z0(r){Su=!0,xm(r)}function ns(){if(!Qh&&_i!==null){Qh=!0;var r=0,s=st;try{var a=_i;for(st=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}_i=null,Su=!1}catch(f){throw _i!==null&&(_i=_i.slice(r+1)),pt(qn,ns),f}finally{st=s,Qh=!1}}return null}var Yo=[],Jo=0,Cu=null,Pu=0,lr=[],ur=0,Js=null,wi=1,Ei="";function Xs(r,s){Yo[Jo++]=Pu,Yo[Jo++]=Cu,Cu=r,Pu=s}function km(r,s,a){lr[ur++]=wi,lr[ur++]=Ei,lr[ur++]=Js,Js=r;var h=wi;r=Ei;var f=32-et(h)-1;h&=~(1<<f),a+=1;var g=32-et(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,wi=1<<32-et(s)+f|a<<f|h,Ei=g+r}else wi=1<<g|a<<f|h,Ei=r}function Yh(r){r.return!==null&&(Xs(r,1),km(r,1,0))}function Jh(r){for(;r===Cu;)Cu=Yo[--Jo],Yo[Jo]=null,Pu=Yo[--Jo],Yo[Jo]=null;for(;r===Js;)Js=lr[--ur],lr[ur]=null,Ei=lr[--ur],lr[ur]=null,wi=lr[--ur],lr[ur]=null}var Yn=null,Jn=null,Ct=!1,Rr=null;function Nm(r,s){var a=fr(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function bm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Yn=r,Jn=Zi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Yn=r,Jn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Js!==null?{id:wi,overflow:Ei}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=fr(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Yn=r,Jn=null,!0):!1;default:return!1}}function Xh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Zh(r){if(Ct){var s=Jn;if(s){var a=s;if(!bm(r,s)){if(Xh(r))throw Error(t(418));s=Zi(a.nextSibling);var h=Yn;s&&bm(r,s)?Nm(h,a):(r.flags=r.flags&-4097|2,Ct=!1,Yn=r)}}else{if(Xh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ct=!1,Yn=r}}}function Dm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Yn=r}function Ru(r){if(r!==Yn)return!1;if(!Ct)return Dm(r),Ct=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Hh(r.type,r.memoizedProps)),s&&(s=Jn)){if(Xh(r))throw Om(),Error(t(418));for(;s;)Nm(r,s),s=Zi(s.nextSibling)}if(Dm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Jn=Zi(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Jn=null}}else Jn=Yn?Zi(r.stateNode.nextSibling):null;return!0}function Om(){for(var r=Jn;r;)r=Zi(r.nextSibling)}function Xo(){Jn=Yn=null,Ct=!1}function ed(r){Rr===null?Rr=[r]:Rr.push(r)}var B0=pe.ReactCurrentBatchConfig;function Xa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var k=f.refs;w===null?delete k[g]:k[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Au(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Lm(r){var s=r._init;return s(r._payload)}function Vm(r){function s($,M){if(r){var W=$.deletions;W===null?($.deletions=[M],$.flags|=16):W.push(M)}}function a($,M){if(!r)return null;for(;M!==null;)s($,M),M=M.sibling;return null}function h($,M){for($=new Map;M!==null;)M.key!==null?$.set(M.key,M):$.set(M.index,M),M=M.sibling;return $}function f($,M){return $=cs($,M),$.index=0,$.sibling=null,$}function g($,M,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<M?($.flags|=2,M):W):($.flags|=2,M)):($.flags|=1048576,M)}function w($){return r&&$.alternate===null&&($.flags|=2),$}function k($,M,W,ue){return M===null||M.tag!==6?(M=Wd(W,$.mode,ue),M.return=$,M):(M=f(M,W),M.return=$,M)}function D($,M,W,ue){var Ne=W.type;return Ne===S?se($,M,W.props.children,ue,W.key):M!==null&&(M.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===Rt&&Lm(Ne)===M.type)?(ue=f(M,W.props),ue.ref=Xa($,M,W),ue.return=$,ue):(ue=Xu(W.type,W.key,W.props,null,$.mode,ue),ue.ref=Xa($,M,W),ue.return=$,ue)}function Q($,M,W,ue){return M===null||M.tag!==4||M.stateNode.containerInfo!==W.containerInfo||M.stateNode.implementation!==W.implementation?(M=qd(W,$.mode,ue),M.return=$,M):(M=f(M,W.children||[]),M.return=$,M)}function se($,M,W,ue,Ne){return M===null||M.tag!==7?(M=oo(W,$.mode,ue,Ne),M.return=$,M):(M=f(M,W),M.return=$,M)}function ae($,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Wd(""+M,$.mode,W),M.return=$,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Fe:return W=Xu(M.type,M.key,M.props,null,$.mode,W),W.ref=Xa($,null,M),W.return=$,W;case Me:return M=qd(M,$.mode,W),M.return=$,M;case Rt:var ue=M._init;return ae($,ue(M._payload),W)}if(gr(M)||xe(M))return M=oo(M,$.mode,W,null),M.return=$,M;Au($,M)}return null}function ie($,M,W,ue){var Ne=M!==null?M.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ne!==null?null:k($,M,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Fe:return W.key===Ne?D($,M,W,ue):null;case Me:return W.key===Ne?Q($,M,W,ue):null;case Rt:return Ne=W._init,ie($,M,Ne(W._payload),ue)}if(gr(W)||xe(W))return Ne!==null?null:se($,M,W,ue,null);Au($,W)}return null}function ye($,M,W,ue,Ne){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return $=$.get(W)||null,k(M,$,""+ue,Ne);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case Fe:return $=$.get(ue.key===null?W:ue.key)||null,D(M,$,ue,Ne);case Me:return $=$.get(ue.key===null?W:ue.key)||null,Q(M,$,ue,Ne);case Rt:var Le=ue._init;return ye($,M,W,Le(ue._payload),Ne)}if(gr(ue)||xe(ue))return $=$.get(W)||null,se(M,$,ue,Ne,null);Au(M,ue)}return null}function Pe($,M,W,ue){for(var Ne=null,Le=null,Ve=M,$e=M=0,en=null;Ve!==null&&$e<W.length;$e++){Ve.index>$e?(en=Ve,Ve=null):en=Ve.sibling;var ht=ie($,Ve,W[$e],ue);if(ht===null){Ve===null&&(Ve=en);break}r&&Ve&&ht.alternate===null&&s($,Ve),M=g(ht,M,$e),Le===null?Ne=ht:Le.sibling=ht,Le=ht,Ve=en}if($e===W.length)return a($,Ve),Ct&&Xs($,$e),Ne;if(Ve===null){for(;$e<W.length;$e++)Ve=ae($,W[$e],ue),Ve!==null&&(M=g(Ve,M,$e),Le===null?Ne=Ve:Le.sibling=Ve,Le=Ve);return Ct&&Xs($,$e),Ne}for(Ve=h($,Ve);$e<W.length;$e++)en=ye(Ve,$,$e,W[$e],ue),en!==null&&(r&&en.alternate!==null&&Ve.delete(en.key===null?$e:en.key),M=g(en,M,$e),Le===null?Ne=en:Le.sibling=en,Le=en);return r&&Ve.forEach(function(hs){return s($,hs)}),Ct&&Xs($,$e),Ne}function Re($,M,W,ue){var Ne=xe(W);if(typeof Ne!="function")throw Error(t(150));if(W=Ne.call(W),W==null)throw Error(t(151));for(var Le=Ne=null,Ve=M,$e=M=0,en=null,ht=W.next();Ve!==null&&!ht.done;$e++,ht=W.next()){Ve.index>$e?(en=Ve,Ve=null):en=Ve.sibling;var hs=ie($,Ve,ht.value,ue);if(hs===null){Ve===null&&(Ve=en);break}r&&Ve&&hs.alternate===null&&s($,Ve),M=g(hs,M,$e),Le===null?Ne=hs:Le.sibling=hs,Le=hs,Ve=en}if(ht.done)return a($,Ve),Ct&&Xs($,$e),Ne;if(Ve===null){for(;!ht.done;$e++,ht=W.next())ht=ae($,ht.value,ue),ht!==null&&(M=g(ht,M,$e),Le===null?Ne=ht:Le.sibling=ht,Le=ht);return Ct&&Xs($,$e),Ne}for(Ve=h($,Ve);!ht.done;$e++,ht=W.next())ht=ye(Ve,$,$e,ht.value,ue),ht!==null&&(r&&ht.alternate!==null&&Ve.delete(ht.key===null?$e:ht.key),M=g(ht,M,$e),Le===null?Ne=ht:Le.sibling=ht,Le=ht);return r&&Ve.forEach(function(ET){return s($,ET)}),Ct&&Xs($,$e),Ne}function Vt($,M,W,ue){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Fe:e:{for(var Ne=W.key,Le=M;Le!==null;){if(Le.key===Ne){if(Ne=W.type,Ne===S){if(Le.tag===7){a($,Le.sibling),M=f(Le,W.props.children),M.return=$,$=M;break e}}else if(Le.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===Rt&&Lm(Ne)===Le.type){a($,Le.sibling),M=f(Le,W.props),M.ref=Xa($,Le,W),M.return=$,$=M;break e}a($,Le);break}else s($,Le);Le=Le.sibling}W.type===S?(M=oo(W.props.children,$.mode,ue,W.key),M.return=$,$=M):(ue=Xu(W.type,W.key,W.props,null,$.mode,ue),ue.ref=Xa($,M,W),ue.return=$,$=ue)}return w($);case Me:e:{for(Le=W.key;M!==null;){if(M.key===Le)if(M.tag===4&&M.stateNode.containerInfo===W.containerInfo&&M.stateNode.implementation===W.implementation){a($,M.sibling),M=f(M,W.children||[]),M.return=$,$=M;break e}else{a($,M);break}else s($,M);M=M.sibling}M=qd(W,$.mode,ue),M.return=$,$=M}return w($);case Rt:return Le=W._init,Vt($,M,Le(W._payload),ue)}if(gr(W))return Pe($,M,W,ue);if(xe(W))return Re($,M,W,ue);Au($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,M!==null&&M.tag===6?(a($,M.sibling),M=f(M,W),M.return=$,$=M):(a($,M),M=Wd(W,$.mode,ue),M.return=$,$=M),w($)):a($,M)}return Vt}var Zo=Vm(!0),Mm=Vm(!1),xu=es(null),ku=null,ea=null,td=null;function nd(){td=ea=ku=null}function rd(r){var s=xu.current;Et(xu),r._currentValue=s}function id(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function ta(r,s){ku=r,td=ea=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Vn=!0),r.firstContext=null)}function cr(r){var s=r._currentValue;if(td!==r)if(r={context:r,memoizedValue:s,next:null},ea===null){if(ku===null)throw Error(t(308));ea=r,ku.dependencies={lanes:0,firstContext:r}}else ea=ea.next=r;return s}var Zs=null;function sd(r){Zs===null?Zs=[r]:Zs.push(r)}function Fm(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,sd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ti(r,h)}function Ti(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var rs=!1;function od(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Um(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ii(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function is(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(lt&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Ti(r,a)}return f=h.interleaved,f===null?(s.next=s,sd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Ti(r,a)}function Nu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Gi(r,a)}}function jm(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function bu(r,s,a,h){var f=r.updateQueue;rs=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var D=k,Q=D.next;D.next=null,w===null?g=Q:w.next=Q,w=D;var se=r.alternate;se!==null&&(se=se.updateQueue,k=se.lastBaseUpdate,k!==w&&(k===null?se.firstBaseUpdate=Q:k.next=Q,se.lastBaseUpdate=D))}if(g!==null){var ae=f.baseState;w=0,se=Q=D=null,k=g;do{var ie=k.lane,ye=k.eventTime;if((h&ie)===ie){se!==null&&(se=se.next={eventTime:ye,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Pe=r,Re=k;switch(ie=s,ye=a,Re.tag){case 1:if(Pe=Re.payload,typeof Pe=="function"){ae=Pe.call(ye,ae,ie);break e}ae=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Re.payload,ie=typeof Pe=="function"?Pe.call(ye,ae,ie):Pe,ie==null)break e;ae=ge({},ae,ie);break e;case 2:rs=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,ie=f.effects,ie===null?f.effects=[k]:ie.push(k))}else ye={eventTime:ye,lane:ie,tag:k.tag,payload:k.payload,callback:k.callback,next:null},se===null?(Q=se=ye,D=ae):se=se.next=ye,w|=ie;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ie=k,k=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);if(se===null&&(D=ae),f.baseState=D,f.firstBaseUpdate=Q,f.lastBaseUpdate=se,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);no|=w,r.lanes=w,r.memoizedState=ae}}function zm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Za={},Kr=es(Za),el=es(Za),tl=es(Za);function eo(r){if(r===Za)throw Error(t(174));return r}function ad(r,s){switch(_t(tl,s),_t(el,r),_t(Kr,Za),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:At(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=At(s,r)}Et(Kr),_t(Kr,s)}function na(){Et(Kr),Et(el),Et(tl)}function Bm(r){eo(tl.current);var s=eo(Kr.current),a=At(s,r.type);s!==a&&(_t(el,r),_t(Kr,a))}function ld(r){el.current===r&&(Et(Kr),Et(el))}var kt=es(0);function Du(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ud=[];function cd(){for(var r=0;r<ud.length;r++)ud[r]._workInProgressVersionPrimary=null;ud.length=0}var Ou=pe.ReactCurrentDispatcher,hd=pe.ReactCurrentBatchConfig,to=0,Nt=null,qt=null,Xt=null,Lu=!1,nl=!1,rl=0,$0=0;function yn(){throw Error(t(321))}function dd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Pr(r[a],s[a]))return!1;return!0}function fd(r,s,a,h,f,g){if(to=g,Nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ou.current=r===null||r.memoizedState===null?G0:K0,r=a(h,f),nl){g=0;do{if(nl=!1,rl=0,25<=g)throw Error(t(301));g+=1,Xt=qt=null,s.updateQueue=null,Ou.current=Q0,r=a(h,f)}while(nl)}if(Ou.current=Fu,s=qt!==null&&qt.next!==null,to=0,Xt=qt=Nt=null,Lu=!1,s)throw Error(t(300));return r}function pd(){var r=rl!==0;return rl=0,r}function Qr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Nt.memoizedState=Xt=r:Xt=Xt.next=r,Xt}function hr(){if(qt===null){var r=Nt.alternate;r=r!==null?r.memoizedState:null}else r=qt.next;var s=Xt===null?Nt.memoizedState:Xt.next;if(s!==null)Xt=s,qt=r;else{if(r===null)throw Error(t(310));qt=r,r={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Xt===null?Nt.memoizedState=Xt=r:Xt=Xt.next=r}return Xt}function il(r,s){return typeof s=="function"?s(r):s}function md(r){var s=hr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=qt,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var k=w=null,D=null,Q=g;do{var se=Q.lane;if((to&se)===se)D!==null&&(D=D.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),h=Q.hasEagerState?Q.eagerState:r(h,Q.action);else{var ae={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};D===null?(k=D=ae,w=h):D=D.next=ae,Nt.lanes|=se,no|=se}Q=Q.next}while(Q!==null&&Q!==g);D===null?w=h:D.next=k,Pr(h,s.memoizedState)||(Vn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=D,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do g=f.lane,Nt.lanes|=g,no|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function gd(r){var s=hr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Pr(g,s.memoizedState)||(Vn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function $m(){}function Hm(r,s){var a=Nt,h=hr(),f=s(),g=!Pr(h.memoizedState,f);if(g&&(h.memoizedState=f,Vn=!0),h=h.queue,yd(Gm.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||Xt!==null&&Xt.memoizedState.tag&1){if(a.flags|=2048,sl(9,qm.bind(null,a,h,f,s),void 0,null),Zt===null)throw Error(t(349));(to&30)!==0||Wm(a,s,f)}return f}function Wm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Nt.updateQueue,s===null?(s={lastEffect:null,stores:null},Nt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function qm(r,s,a,h){s.value=a,s.getSnapshot=h,Km(s)&&Qm(r)}function Gm(r,s,a){return a(function(){Km(s)&&Qm(r)})}function Km(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Pr(r,a)}catch{return!0}}function Qm(r){var s=Ti(r,1);s!==null&&Nr(s,r,1,-1)}function Ym(r){var s=Qr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:r},s.queue=r,r=r.dispatch=q0.bind(null,Nt,r),[s.memoizedState,r]}function sl(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=Nt.updateQueue,s===null?(s={lastEffect:null,stores:null},Nt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function Jm(){return hr().memoizedState}function Vu(r,s,a,h){var f=Qr();Nt.flags|=r,f.memoizedState=sl(1|s,a,void 0,h===void 0?null:h)}function Mu(r,s,a,h){var f=hr();h=h===void 0?null:h;var g=void 0;if(qt!==null){var w=qt.memoizedState;if(g=w.destroy,h!==null&&dd(h,w.deps)){f.memoizedState=sl(s,a,g,h);return}}Nt.flags|=r,f.memoizedState=sl(1|s,a,g,h)}function Xm(r,s){return Vu(8390656,8,r,s)}function yd(r,s){return Mu(2048,8,r,s)}function Zm(r,s){return Mu(4,2,r,s)}function eg(r,s){return Mu(4,4,r,s)}function tg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function ng(r,s,a){return a=a!=null?a.concat([r]):null,Mu(4,4,tg.bind(null,s,r),a)}function vd(){}function rg(r,s){var a=hr();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&dd(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function ig(r,s){var a=hr();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&dd(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function sg(r,s,a){return(to&21)===0?(r.baseState&&(r.baseState=!1,Vn=!0),r.memoizedState=a):(Pr(a,s)||(a=Hs(),Nt.lanes|=a,no|=a,r.baseState=!0),s)}function H0(r,s){var a=st;st=a!==0&&4>a?a:4,r(!0);var h=hd.transition;hd.transition={};try{r(!1),s()}finally{st=a,hd.transition=h}}function og(){return hr().memoizedState}function W0(r,s,a){var h=ls(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},ag(r))lg(s,a);else if(a=Fm(r,s,a,h),a!==null){var f=Rn();Nr(a,r,h,f),ug(a,s,h)}}function q0(r,s,a){var h=ls(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(ag(r))lg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,k=g(w,a);if(f.hasEagerState=!0,f.eagerState=k,Pr(k,w)){var D=s.interleaved;D===null?(f.next=f,sd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}a=Fm(r,s,f,h),a!==null&&(f=Rn(),Nr(a,r,h,f),ug(a,s,h))}}function ag(r){var s=r.alternate;return r===Nt||s!==null&&s===Nt}function lg(r,s){nl=Lu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function ug(r,s,a){if((a&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Gi(r,a)}}var Fu={readContext:cr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},G0={readContext:cr,useCallback:function(r,s){return Qr().memoizedState=[r,s===void 0?null:s],r},useContext:cr,useEffect:Xm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Vu(4194308,4,tg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Vu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Vu(4,2,r,s)},useMemo:function(r,s){var a=Qr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=Qr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=W0.bind(null,Nt,r),[h.memoizedState,r]},useRef:function(r){var s=Qr();return r={current:r},s.memoizedState=r},useState:Ym,useDebugValue:vd,useDeferredValue:function(r){return Qr().memoizedState=r},useTransition:function(){var r=Ym(!1),s=r[0];return r=H0.bind(null,r[1]),Qr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=Nt,f=Qr();if(Ct){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Zt===null)throw Error(t(349));(to&30)!==0||Wm(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Xm(Gm.bind(null,h,g,r),[r]),h.flags|=2048,sl(9,qm.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=Qr(),s=Zt.identifierPrefix;if(Ct){var a=Ei,h=wi;a=(h&~(1<<32-et(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=rl++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=$0++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},K0={readContext:cr,useCallback:rg,useContext:cr,useEffect:yd,useImperativeHandle:ng,useInsertionEffect:Zm,useLayoutEffect:eg,useMemo:ig,useReducer:md,useRef:Jm,useState:function(){return md(il)},useDebugValue:vd,useDeferredValue:function(r){var s=hr();return sg(s,qt.memoizedState,r)},useTransition:function(){var r=md(il)[0],s=hr().memoizedState;return[r,s]},useMutableSource:$m,useSyncExternalStore:Hm,useId:og,unstable_isNewReconciler:!1},Q0={readContext:cr,useCallback:rg,useContext:cr,useEffect:yd,useImperativeHandle:ng,useInsertionEffect:Zm,useLayoutEffect:eg,useMemo:ig,useReducer:gd,useRef:Jm,useState:function(){return gd(il)},useDebugValue:vd,useDeferredValue:function(r){var s=hr();return qt===null?s.memoizedState=r:sg(s,qt.memoizedState,r)},useTransition:function(){var r=gd(il)[0],s=hr().memoizedState;return[r,s]},useMutableSource:$m,useSyncExternalStore:Hm,useId:og,unstable_isNewReconciler:!1};function Ar(r,s){if(r&&r.defaultProps){s=ge({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function _d(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:ge({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Uu={isMounted:function(r){return(r=r._reactInternals)?_e(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=Rn(),f=ls(r),g=Ii(h,f);g.payload=s,a!=null&&(g.callback=a),s=is(r,g,f),s!==null&&(Nr(s,r,f,h),Nu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=Rn(),f=ls(r),g=Ii(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=is(r,g,f),s!==null&&(Nr(s,r,f,h),Nu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Rn(),h=ls(r),f=Ii(a,h);f.tag=2,s!=null&&(f.callback=s),s=is(r,f,h),s!==null&&(Nr(s,r,h,a),Nu(s,r,h))}};function cg(r,s,a,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Wa(a,h)||!Wa(f,g):!0}function hg(r,s,a){var h=!1,f=ts,g=s.contextType;return typeof g=="object"&&g!==null?g=cr(g):(f=Ln(s)?Ys:gn.current,h=s.contextTypes,g=(h=h!=null)?Qo(r,f):ts),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Uu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function dg(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Uu.enqueueReplaceState(s,s.state,null)}function wd(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},od(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=cr(g):(g=Ln(s)?Ys:gn.current,f.context=Qo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(_d(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Uu.enqueueReplaceState(f,f.state,null),bu(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ra(r,s){try{var a="",h=s;do a+=F(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Ed(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Td(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Y0=typeof WeakMap=="function"?WeakMap:Map;function fg(r,s,a){a=Ii(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){qu||(qu=!0,Md=h),Td(r,s)},a}function pg(r,s,a){a=Ii(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){Td(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Td(r,s),typeof h!="function"&&(os===null?os=new Set([this]):os.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function mg(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new Y0;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=cT.bind(null,r,s,a),s.then(r,r))}function gg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function yg(r,s,a,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ii(-1,1),s.tag=2,is(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var J0=pe.ReactCurrentOwner,Vn=!1;function Pn(r,s,a,h){s.child=r===null?Mm(s,null,a,h):Zo(s,r.child,a,h)}function vg(r,s,a,h,f){a=a.render;var g=s.ref;return ta(s,f),h=fd(r,s,a,h,g,f),a=pd(),r!==null&&!Vn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Si(r,s,f)):(Ct&&a&&Yh(s),s.flags|=1,Pn(r,s,h,f),s.child)}function _g(r,s,a,h,f){if(r===null){var g=a.type;return typeof g=="function"&&!Hd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,wg(r,s,g,h,f)):(r=Xu(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Wa,a(w,h)&&r.ref===s.ref)return Si(r,s,f)}return s.flags|=1,r=cs(g,h),r.ref=s.ref,r.return=s,s.child=r}function wg(r,s,a,h,f){if(r!==null){var g=r.memoizedProps;if(Wa(g,h)&&r.ref===s.ref)if(Vn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Vn=!0);else return s.lanes=r.lanes,Si(r,s,f)}return Id(r,s,a,h,f)}function Eg(r,s,a){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(sa,Xn),Xn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,_t(sa,Xn),Xn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,_t(sa,Xn),Xn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,_t(sa,Xn),Xn|=h;return Pn(r,s,f,a),s.child}function Tg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Id(r,s,a,h,f){var g=Ln(a)?Ys:gn.current;return g=Qo(s,g),ta(s,f),a=fd(r,s,a,h,g,f),h=pd(),r!==null&&!Vn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Si(r,s,f)):(Ct&&h&&Yh(s),s.flags|=1,Pn(r,s,a,f),s.child)}function Ig(r,s,a,h,f){if(Ln(a)){var g=!0;Iu(s)}else g=!1;if(ta(s,f),s.stateNode===null)zu(r,s),hg(s,a,h),wd(s,a,h,f),h=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var D=w.context,Q=a.contextType;typeof Q=="object"&&Q!==null?Q=cr(Q):(Q=Ln(a)?Ys:gn.current,Q=Qo(s,Q));var se=a.getDerivedStateFromProps,ae=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function";ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==h||D!==Q)&&dg(s,w,h,Q),rs=!1;var ie=s.memoizedState;w.state=ie,bu(s,h,w,f),D=s.memoizedState,k!==h||ie!==D||On.current||rs?(typeof se=="function"&&(_d(s,a,se,h),D=s.memoizedState),(k=rs||cg(s,a,k,h,ie,D,Q))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),w.props=h,w.state=D,w.context=Q,h=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Um(r,s),k=s.memoizedProps,Q=s.type===s.elementType?k:Ar(s.type,k),w.props=Q,ae=s.pendingProps,ie=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=cr(D):(D=Ln(a)?Ys:gn.current,D=Qo(s,D));var ye=a.getDerivedStateFromProps;(se=typeof ye=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==ae||ie!==D)&&dg(s,w,h,D),rs=!1,ie=s.memoizedState,w.state=ie,bu(s,h,w,f);var Pe=s.memoizedState;k!==ae||ie!==Pe||On.current||rs?(typeof ye=="function"&&(_d(s,a,ye,h),Pe=s.memoizedState),(Q=rs||cg(s,a,Q,h,ie,Pe,D)||!1)?(se||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Pe,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Pe,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Pe),w.props=h,w.state=Pe,w.context=D,h=Q):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),h=!1)}return Sd(r,s,a,h,g,f)}function Sd(r,s,a,h,f,g){Tg(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Am(s,a,!1),Si(r,s,g);h=s.stateNode,J0.current=s;var k=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=Zo(s,r.child,null,g),s.child=Zo(s,null,k,g)):Pn(r,s,k,g),s.memoizedState=h.state,f&&Am(s,a,!0),s.child}function Sg(r){var s=r.stateNode;s.pendingContext?Pm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Pm(r,s.context,!1),ad(r,s.containerInfo)}function Cg(r,s,a,h,f){return Xo(),ed(f),s.flags|=256,Pn(r,s,a,h),s.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Pd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Pg(r,s,a){var h=s.pendingProps,f=kt.current,g=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(f&2)!==0),k?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),_t(kt,f&1),r===null)return Zh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Zu(w,h,0,null),r=oo(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Pd(a),s.memoizedState=Cd,r):Rd(s,w));if(f=r.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return X0(r,s,w,h,k,f,a);if(g){g=h.fallback,w=s.mode,f=r.child,k=f.sibling;var D={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=cs(f,D),h.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=cs(k,g):(g=oo(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?Pd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=Cd,h}return g=r.child,r=g.sibling,h=cs(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function Rd(r,s){return s=Zu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function ju(r,s,a,h){return h!==null&&ed(h),Zo(s,r.child,null,a),r=Rd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function X0(r,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=Ed(Error(t(422))),ju(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Zu({mode:"visible",children:h.children},f,0,null),g=oo(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&Zo(s,r.child,null,w),s.child.memoizedState=Pd(w),s.memoizedState=Cd,g);if((s.mode&1)===0)return ju(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var k=h.dgst;return h=k,g=Error(t(419)),h=Ed(g,h,void 0),ju(r,s,w,h)}if(k=(w&r.childLanes)!==0,Vn||k){if(h=Zt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ti(r,f),Nr(h,r,f,-1))}return $d(),h=Ed(Error(t(421))),ju(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=hT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,Jn=Zi(f.nextSibling),Yn=s,Ct=!0,Rr=null,r!==null&&(lr[ur++]=wi,lr[ur++]=Ei,lr[ur++]=Js,wi=r.id,Ei=r.overflow,Js=s),s=Rd(s,h.children),s.flags|=4096,s)}function Rg(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),id(r.return,s,a)}function Ad(r,s,a,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function Ag(r,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Pn(r,s,h.children,a),h=kt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Rg(r,a,s);else if(r.tag===19)Rg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(_t(kt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Du(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Ad(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Du(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Ad(s,!0,a,null,g);break;case"together":Ad(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function zu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Si(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),no|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=cs(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=cs(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Z0(r,s,a){switch(s.tag){case 3:Sg(s),Xo();break;case 5:Bm(s);break;case 1:Ln(s.type)&&Iu(s);break;case 4:ad(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;_t(xu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(_t(kt,kt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Pg(r,s,a):(_t(kt,kt.current&1),r=Si(r,s,a),r!==null?r.sibling:null);_t(kt,kt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(r.flags&128)!==0){if(h)return Ag(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),_t(kt,kt.current),h)break;return null;case 22:case 23:return s.lanes=0,Eg(r,s,a)}return Si(r,s,a)}var xg,xd,kg,Ng;xg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},xd=function(){},kg=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,eo(Kr.current);var g=null;switch(a){case"input":f=yt(r,f),h=yt(r,h),g=[];break;case"select":f=ge({},f,{value:void 0}),h=ge({},h,{value:void 0}),g=[];break;case"textarea":f=Fs(r,f),h=Fs(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=wu)}zi(a,h);var w;a=null;for(Q in f)if(!h.hasOwnProperty(Q)&&f.hasOwnProperty(Q)&&f[Q]!=null)if(Q==="style"){var k=f[Q];for(w in k)k.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(o.hasOwnProperty(Q)?g||(g=[]):(g=g||[]).push(Q,null));for(Q in h){var D=h[Q];if(k=f?.[Q],h.hasOwnProperty(Q)&&D!==k&&(D!=null||k!=null))if(Q==="style")if(k){for(w in k)!k.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&k[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(g||(g=[]),g.push(Q,a)),a=D;else Q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(g=g||[]).push(Q,D)):Q==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(Q,""+D):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(o.hasOwnProperty(Q)?(D!=null&&Q==="onScroll"&&wt("scroll",r),g||k===D||(g=[])):(g=g||[]).push(Q,D))}a&&(g=g||[]).push("style",a);var Q=g;(s.updateQueue=Q)&&(s.flags|=4)}},Ng=function(r,s,a,h){a!==h&&(s.flags|=4)};function ol(r,s){if(!Ct)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function vn(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function eT(r,s,a){var h=s.pendingProps;switch(Jh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(s),null;case 1:return Ln(s.type)&&Tu(),vn(s),null;case 3:return h=s.stateNode,na(),Et(On),Et(gn),cd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Ru(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rr!==null&&(jd(Rr),Rr=null))),xd(r,s),vn(s),null;case 5:ld(s);var f=eo(tl.current);if(a=s.type,r!==null&&s.stateNode!=null)kg(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return vn(s),null}if(r=eo(Kr.current),Ru(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[Gr]=s,h[Ya]=g,r=(s.mode&1)!==0,a){case"dialog":wt("cancel",h),wt("close",h);break;case"iframe":case"object":case"embed":wt("load",h);break;case"video":case"audio":for(f=0;f<Ga.length;f++)wt(Ga[f],h);break;case"source":wt("error",h);break;case"img":case"image":case"link":wt("error",h),wt("load",h);break;case"details":wt("toggle",h);break;case"input":dn(h,g),wt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},wt("invalid",h);break;case"textarea":Fi(h,g),wt("invalid",h)}zi(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var k=g[w];w==="children"?typeof k=="string"?h.textContent!==k&&(g.suppressHydrationWarning!==!0&&_u(h.textContent,k,r),f=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&_u(h.textContent,k,r),f=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&wt("scroll",h)}switch(a){case"input":be(h),Ro(h,g,!0);break;case"textarea":be(h),vr(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=wu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Dt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[Gr]=s,r[Ya]=h,xg(r,s,!1,!1),s.stateNode=r;e:{switch(w=Us(a,h),a){case"dialog":wt("cancel",r),wt("close",r),f=h;break;case"iframe":case"object":case"embed":wt("load",r),f=h;break;case"video":case"audio":for(f=0;f<Ga.length;f++)wt(Ga[f],r);f=h;break;case"source":wt("error",r),f=h;break;case"img":case"image":case"link":wt("error",r),wt("load",r),f=h;break;case"details":wt("toggle",r),f=h;break;case"input":dn(r,h),f=yt(r,h),wt("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=ge({},h,{value:void 0}),wt("invalid",r);break;case"textarea":Fi(r,h),f=Fs(r,h),wt("invalid",r);break;default:f=h}zi(a,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var D=k[g];g==="style"?Ui(r,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Sn(r,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&_r(r,D):typeof D=="number"&&_r(r,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&wt("scroll",r):D!=null&&ce(r,g,D,w))}switch(a){case"input":be(r),Ro(r,h,!1);break;case"textarea":be(r),vr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Z(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?yr(r,!!h.multiple,g,!1):h.defaultValue!=null&&yr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=wu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return vn(s),null;case 6:if(r&&s.stateNode!=null)Ng(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=eo(tl.current),eo(Kr.current),Ru(s)){if(h=s.stateNode,a=s.memoizedProps,h[Gr]=s,(g=h.nodeValue!==a)&&(r=Yn,r!==null))switch(r.tag){case 3:_u(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_u(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Gr]=s,s.stateNode=h}return vn(s),null;case 13:if(Et(kt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ct&&Jn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Om(),Xo(),s.flags|=98560,g=!1;else if(g=Ru(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Gr]=s}else Xo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;vn(s),g=!1}else Rr!==null&&(jd(Rr),Rr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(kt.current&1)!==0?Gt===0&&(Gt=3):$d())),s.updateQueue!==null&&(s.flags|=4),vn(s),null);case 4:return na(),xd(r,s),r===null&&Ka(s.stateNode.containerInfo),vn(s),null;case 10:return rd(s.type._context),vn(s),null;case 17:return Ln(s.type)&&Tu(),vn(s),null;case 19:if(Et(kt),g=s.memoizedState,g===null)return vn(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)ol(g,!1);else{if(Gt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=Du(r),w!==null){for(s.flags|=128,ol(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return _t(kt,kt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Xe()>oa&&(s.flags|=128,h=!0,ol(g,!1),s.lanes=4194304)}else{if(!h)if(r=Du(w),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Ct)return vn(s),null}else 2*Xe()-g.renderingStartTime>oa&&a!==1073741824&&(s.flags|=128,h=!0,ol(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Xe(),s.sibling=null,a=kt.current,_t(kt,h?a&1|2:a&1),s):(vn(s),null);case 22:case 23:return Bd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Xn&1073741824)!==0&&(vn(s),s.subtreeFlags&6&&(s.flags|=8192)):vn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tT(r,s){switch(Jh(s),s.tag){case 1:return Ln(s.type)&&Tu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return na(),Et(On),Et(gn),cd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return ld(s),null;case 13:if(Et(kt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Xo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Et(kt),null;case 4:return na(),null;case 10:return rd(s.type._context),null;case 22:case 23:return Bd(),null;case 24:return null;default:return null}}var Bu=!1,_n=!1,nT=typeof WeakSet=="function"?WeakSet:Set,Se=null;function ia(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Lt(r,s,h)}else a.current=null}function kd(r,s,a){try{a()}catch(h){Lt(r,s,h)}}var bg=!1;function rT(r,s){if(Bh=Yi,r=cm(),Oh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,k=-1,D=-1,Q=0,se=0,ae=r,ie=null;t:for(;;){for(var ye;ae!==a||f!==0&&ae.nodeType!==3||(k=w+f),ae!==g||h!==0&&ae.nodeType!==3||(D=w+h),ae.nodeType===3&&(w+=ae.nodeValue.length),(ye=ae.firstChild)!==null;)ie=ae,ae=ye;for(;;){if(ae===r)break t;if(ie===a&&++Q===f&&(k=w),ie===g&&++se===h&&(D=w),(ye=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=ye}a=k===-1||D===-1?null:{start:k,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for($h={focusedElem:r,selectionRange:a},Yi=!1,Se=s;Se!==null;)if(s=Se,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Se=r;else for(;Se!==null;){s=Se;try{var Pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Re=Pe.memoizedProps,Vt=Pe.memoizedState,$=s.stateNode,M=$.getSnapshotBeforeUpdate(s.elementType===s.type?Re:Ar(s.type,Re),Vt);$.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){Lt(s,s.return,ue)}if(r=s.sibling,r!==null){r.return=s.return,Se=r;break}Se=s.return}return Pe=bg,bg=!1,Pe}function al(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&kd(s,a,g)}f=f.next}while(f!==h)}}function $u(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Nd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Dg(r){var s=r.alternate;s!==null&&(r.alternate=null,Dg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Gr],delete s[Ya],delete s[Gh],delete s[U0],delete s[j0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Og(r){return r.tag===5||r.tag===3||r.tag===4}function Lg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Og(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=wu));else if(h!==4&&(r=r.child,r!==null))for(bd(r,s,a),r=r.sibling;r!==null;)bd(r,s,a),r=r.sibling}function Dd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Dd(r,s,a),r=r.sibling;r!==null;)Dd(r,s,a),r=r.sibling}var an=null,xr=!1;function ss(r,s,a){for(a=a.child;a!==null;)Vg(r,s,a),a=a.sibling}function Vg(r,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(dt,a)}catch{}switch(a.tag){case 5:_n||ia(a,s);case 6:var h=an,f=xr;an=null,ss(r,s,a),an=h,xr=f,an!==null&&(xr?(r=an,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):an.removeChild(a.stateNode));break;case 18:an!==null&&(xr?(r=an,a=a.stateNode,r.nodeType===8?qh(r.parentNode,a):r.nodeType===1&&qh(r,a),Sr(r)):qh(an,a.stateNode));break;case 4:h=an,f=xr,an=a.stateNode.containerInfo,xr=!0,ss(r,s,a),an=h,xr=f;break;case 0:case 11:case 14:case 15:if(!_n&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&kd(a,s,w),f=f.next}while(f!==h)}ss(r,s,a);break;case 1:if(!_n&&(ia(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(k){Lt(a,s,k)}ss(r,s,a);break;case 21:ss(r,s,a);break;case 22:a.mode&1?(_n=(h=_n)||a.memoizedState!==null,ss(r,s,a),_n=h):ss(r,s,a);break;default:ss(r,s,a)}}function Mg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new nT),s.forEach(function(h){var f=dT.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function kr(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:an=k.stateNode,xr=!1;break e;case 3:an=k.stateNode.containerInfo,xr=!0;break e;case 4:an=k.stateNode.containerInfo,xr=!0;break e}k=k.return}if(an===null)throw Error(t(160));Vg(g,w,f),an=null,xr=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(Q){Lt(f,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Fg(s,r),s=s.sibling}function Fg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(kr(s,r),Yr(r),h&4){try{al(3,r,r.return),$u(3,r)}catch(Re){Lt(r,r.return,Re)}try{al(5,r,r.return)}catch(Re){Lt(r,r.return,Re)}}break;case 1:kr(s,r),Yr(r),h&512&&a!==null&&ia(a,a.return);break;case 5:if(kr(s,r),Yr(r),h&512&&a!==null&&ia(a,a.return),r.flags&32){var f=r.stateNode;try{_r(f,"")}catch(Re){Lt(r,r.return,Re)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,k=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&fn(f,g),Us(k,w);var Q=Us(k,g);for(w=0;w<D.length;w+=2){var se=D[w],ae=D[w+1];se==="style"?Ui(f,ae):se==="dangerouslySetInnerHTML"?Sn(f,ae):se==="children"?_r(f,ae):ce(f,se,ae,Q)}switch(k){case"input":Ms(f,g);break;case"textarea":An(f,g);break;case"select":var ie=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ye=g.value;ye!=null?yr(f,!!g.multiple,ye,!1):ie!==!!g.multiple&&(g.defaultValue!=null?yr(f,!!g.multiple,g.defaultValue,!0):yr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ya]=g}catch(Re){Lt(r,r.return,Re)}}break;case 6:if(kr(s,r),Yr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(Re){Lt(r,r.return,Re)}}break;case 3:if(kr(s,r),Yr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Sr(s.containerInfo)}catch(Re){Lt(r,r.return,Re)}break;case 4:kr(s,r),Yr(r);break;case 13:kr(s,r),Yr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Vd=Xe())),h&4&&Mg(r);break;case 22:if(se=a!==null&&a.memoizedState!==null,r.mode&1?(_n=(Q=_n)||se,kr(s,r),_n=Q):kr(s,r),Yr(r),h&8192){if(Q=r.memoizedState!==null,(r.stateNode.isHidden=Q)&&!se&&(r.mode&1)!==0)for(Se=r,se=r.child;se!==null;){for(ae=Se=se;Se!==null;){switch(ie=Se,ye=ie.child,ie.tag){case 0:case 11:case 14:case 15:al(4,ie,ie.return);break;case 1:ia(ie,ie.return);var Pe=ie.stateNode;if(typeof Pe.componentWillUnmount=="function"){h=ie,a=ie.return;try{s=h,Pe.props=s.memoizedProps,Pe.state=s.memoizedState,Pe.componentWillUnmount()}catch(Re){Lt(h,a,Re)}}break;case 5:ia(ie,ie.return);break;case 22:if(ie.memoizedState!==null){zg(ae);continue}}ye!==null?(ye.return=ie,Se=ye):zg(ae)}se=se.sibling}e:for(se=null,ae=r;;){if(ae.tag===5){if(se===null){se=ae;try{f=ae.stateNode,Q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=ae.stateNode,D=ae.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=xn("display",w))}catch(Re){Lt(r,r.return,Re)}}}else if(ae.tag===6){if(se===null)try{ae.stateNode.nodeValue=Q?"":ae.memoizedProps}catch(Re){Lt(r,r.return,Re)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===r)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===r)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===r)break e;se===ae&&(se=null),ae=ae.return}se===ae&&(se=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:kr(s,r),Yr(r),h&4&&Mg(r);break;case 21:break;default:kr(s,r),Yr(r)}}function Yr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Og(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(_r(f,""),h.flags&=-33);var g=Lg(r);Dd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,k=Lg(r);bd(r,k,w);break;default:throw Error(t(161))}}catch(D){Lt(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function iT(r,s,a){Se=r,Ug(r)}function Ug(r,s,a){for(var h=(r.mode&1)!==0;Se!==null;){var f=Se,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Bu;if(!w){var k=f.alternate,D=k!==null&&k.memoizedState!==null||_n;k=Bu;var Q=_n;if(Bu=w,(_n=D)&&!Q)for(Se=f;Se!==null;)w=Se,D=w.child,w.tag===22&&w.memoizedState!==null?Bg(f):D!==null?(D.return=w,Se=D):Bg(f);for(;g!==null;)Se=g,Ug(g),g=g.sibling;Se=f,Bu=k,_n=Q}jg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,Se=g):jg(r)}}function jg(r){for(;Se!==null;){var s=Se;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:_n||$u(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!_n)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Ar(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&zm(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}zm(s,w,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ae=se.dehydrated;ae!==null&&Sr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}_n||s.flags&512&&Nd(s)}catch(ie){Lt(s,s.return,ie)}}if(s===r){Se=null;break}if(a=s.sibling,a!==null){a.return=s.return,Se=a;break}Se=s.return}}function zg(r){for(;Se!==null;){var s=Se;if(s===r){Se=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Se=a;break}Se=s.return}}function Bg(r){for(;Se!==null;){var s=Se;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{$u(4,s)}catch(D){Lt(s,a,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(D){Lt(s,f,D)}}var g=s.return;try{Nd(s)}catch(D){Lt(s,g,D)}break;case 5:var w=s.return;try{Nd(s)}catch(D){Lt(s,w,D)}}}catch(D){Lt(s,s.return,D)}if(s===r){Se=null;break}var k=s.sibling;if(k!==null){k.return=s.return,Se=k;break}Se=s.return}}var sT=Math.ceil,Hu=pe.ReactCurrentDispatcher,Od=pe.ReactCurrentOwner,dr=pe.ReactCurrentBatchConfig,lt=0,Zt=null,jt=null,ln=0,Xn=0,sa=es(0),Gt=0,ll=null,no=0,Wu=0,Ld=0,ul=null,Mn=null,Vd=0,oa=1/0,Ci=null,qu=!1,Md=null,os=null,Gu=!1,as=null,Ku=0,cl=0,Fd=null,Qu=-1,Yu=0;function Rn(){return(lt&6)!==0?Xe():Qu!==-1?Qu:Qu=Xe()}function ls(r){return(r.mode&1)===0?1:(lt&2)!==0&&ln!==0?ln&-ln:B0.transition!==null?(Yu===0&&(Yu=Hs()),Yu):(r=st,r!==0||(r=window.event,r=r===void 0?16:Fa(r.type)),r)}function Nr(r,s,a,h){if(50<cl)throw cl=0,Fd=null,Error(t(185));qi(r,a,h),((lt&2)===0||r!==Zt)&&(r===Zt&&((lt&2)===0&&(Wu|=a),Gt===4&&us(r,ln)),Fn(r,h),a===1&&lt===0&&(s.mode&1)===0&&(oa=Xe()+500,Su&&ns()))}function Fn(r,s){var a=r.callbackNode;fi(r,s);var h=$s(r,r===Zt?ln:0);if(h===0)a!==null&&ir(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&ir(a),s===1)r.tag===0?z0(Hg.bind(null,r)):xm(Hg.bind(null,r)),M0(function(){(lt&6)===0&&ns()}),a=null;else{switch(Ki(h)){case 1:a=qn;break;case 4:a=mn;break;case 16:a=rn;break;case 536870912:a=Ze;break;default:a=rn}a=Xg(a,$g.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function $g(r,s){if(Qu=-1,Yu=0,(lt&6)!==0)throw Error(t(327));var a=r.callbackNode;if(aa()&&r.callbackNode!==a)return null;var h=$s(r,r===Zt?ln:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=Ju(r,h);else{s=h;var f=lt;lt|=2;var g=qg();(Zt!==r||ln!==s)&&(Ci=null,oa=Xe()+500,io(r,s));do try{lT();break}catch(k){Wg(r,k)}while(!0);nd(),Hu.current=g,lt=f,jt!==null?s=0:(Zt=null,ln=0,s=Gt)}if(s!==0){if(s===2&&(f=Gn(r),f!==0&&(h=f,s=Ud(r,f))),s===1)throw a=ll,io(r,0),us(r,h),Fn(r,Xe()),a;if(s===6)us(r,h);else{if(f=r.current.alternate,(h&30)===0&&!oT(f)&&(s=Ju(r,h),s===2&&(g=Gn(r),g!==0&&(h=g,s=Ud(r,g))),s===1))throw a=ll,io(r,0),us(r,h),Fn(r,Xe()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:so(r,Mn,Ci);break;case 3:if(us(r,h),(h&130023424)===h&&(s=Vd+500-Xe(),10<s)){if($s(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Rn(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Wh(so.bind(null,r,Mn,Ci),s);break}so(r,Mn,Ci);break;case 4:if(us(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-et(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=Xe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*sT(h/1960))-h,10<h){r.timeoutHandle=Wh(so.bind(null,r,Mn,Ci),h);break}so(r,Mn,Ci);break;case 5:so(r,Mn,Ci);break;default:throw Error(t(329))}}}return Fn(r,Xe()),r.callbackNode===a?$g.bind(null,r):null}function Ud(r,s){var a=ul;return r.current.memoizedState.isDehydrated&&(io(r,s).flags|=256),r=Ju(r,s),r!==2&&(s=Mn,Mn=a,s!==null&&jd(s)),r}function jd(r){Mn===null?Mn=r:Mn.push.apply(Mn,r)}function oT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Pr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(r,s){for(s&=~Ld,s&=~Wu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-et(s),h=1<<a;r[a]=-1,s&=~h}}function Hg(r){if((lt&6)!==0)throw Error(t(327));aa();var s=$s(r,0);if((s&1)===0)return Fn(r,Xe()),null;var a=Ju(r,s);if(r.tag!==0&&a===2){var h=Gn(r);h!==0&&(s=h,a=Ud(r,h))}if(a===1)throw a=ll,io(r,0),us(r,s),Fn(r,Xe()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,so(r,Mn,Ci),Fn(r,Xe()),null}function zd(r,s){var a=lt;lt|=1;try{return r(s)}finally{lt=a,lt===0&&(oa=Xe()+500,Su&&ns())}}function ro(r){as!==null&&as.tag===0&&(lt&6)===0&&aa();var s=lt;lt|=1;var a=dr.transition,h=st;try{if(dr.transition=null,st=1,r)return r()}finally{st=h,dr.transition=a,lt=s,(lt&6)===0&&ns()}}function Bd(){Xn=sa.current,Et(sa)}function io(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,V0(a)),jt!==null)for(a=jt.return;a!==null;){var h=a;switch(Jh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Tu();break;case 3:na(),Et(On),Et(gn),cd();break;case 5:ld(h);break;case 4:na();break;case 13:Et(kt);break;case 19:Et(kt);break;case 10:rd(h.type._context);break;case 22:case 23:Bd()}a=a.return}if(Zt=r,jt=r=cs(r.current,null),ln=Xn=s,Gt=0,ll=null,Ld=Wu=no=0,Mn=ul=null,Zs!==null){for(s=0;s<Zs.length;s++)if(a=Zs[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}Zs=null}return r}function Wg(r,s){do{var a=jt;try{if(nd(),Ou.current=Fu,Lu){for(var h=Nt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Lu=!1}if(to=0,Xt=qt=Nt=null,nl=!1,rl=0,Od.current=null,a===null||a.return===null){Gt=1,ll=s,jt=null;break}e:{var g=r,w=a.return,k=a,D=s;if(s=ln,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var Q=D,se=k,ae=se.tag;if((se.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=se.alternate;ie?(se.updateQueue=ie.updateQueue,se.memoizedState=ie.memoizedState,se.lanes=ie.lanes):(se.updateQueue=null,se.memoizedState=null)}var ye=gg(w);if(ye!==null){ye.flags&=-257,yg(ye,w,k,g,s),ye.mode&1&&mg(g,Q,s),s=ye,D=Q;var Pe=s.updateQueue;if(Pe===null){var Re=new Set;Re.add(D),s.updateQueue=Re}else Pe.add(D);break e}else{if((s&1)===0){mg(g,Q,s),$d();break e}D=Error(t(426))}}else if(Ct&&k.mode&1){var Vt=gg(w);if(Vt!==null){(Vt.flags&65536)===0&&(Vt.flags|=256),yg(Vt,w,k,g,s),ed(ra(D,k));break e}}g=D=ra(D,k),Gt!==4&&(Gt=2),ul===null?ul=[g]:ul.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var $=fg(g,D,s);jm(g,$);break e;case 1:k=D;var M=g.type,W=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(os===null||!os.has(W)))){g.flags|=65536,s&=-s,g.lanes|=s;var ue=pg(g,k,s);jm(g,ue);break e}}g=g.return}while(g!==null)}Kg(a)}catch(Ne){s=Ne,jt===a&&a!==null&&(jt=a=a.return);continue}break}while(!0)}function qg(){var r=Hu.current;return Hu.current=Fu,r===null?Fu:r}function $d(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Zt===null||(no&268435455)===0&&(Wu&268435455)===0||us(Zt,ln)}function Ju(r,s){var a=lt;lt|=2;var h=qg();(Zt!==r||ln!==s)&&(Ci=null,io(r,s));do try{aT();break}catch(f){Wg(r,f)}while(!0);if(nd(),lt=a,Hu.current=h,jt!==null)throw Error(t(261));return Zt=null,ln=0,Gt}function aT(){for(;jt!==null;)Gg(jt)}function lT(){for(;jt!==null&&!Ur();)Gg(jt)}function Gg(r){var s=Jg(r.alternate,r,Xn);r.memoizedProps=r.pendingProps,s===null?Kg(r):jt=s,Od.current=null}function Kg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=eT(a,s,Xn),a!==null){jt=a;return}}else{if(a=tT(a,s),a!==null){a.flags&=32767,jt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Gt=6,jt=null;return}}if(s=s.sibling,s!==null){jt=s;return}jt=s=r}while(s!==null);Gt===0&&(Gt=5)}function so(r,s,a){var h=st,f=dr.transition;try{dr.transition=null,st=1,uT(r,s,a,h)}finally{dr.transition=f,st=h}return null}function uT(r,s,a,h){do aa();while(as!==null);if((lt&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(vt(r,g),r===Zt&&(jt=Zt=null,ln=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Gu||(Gu=!0,Xg(rn,function(){return aa(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=dr.transition,dr.transition=null;var w=st;st=1;var k=lt;lt|=4,Od.current=null,rT(r,a),Fg(a,r),x0($h),Yi=!!Bh,$h=Bh=null,r.current=a,iT(a),Wn(),lt=k,st=w,dr.transition=g}else r.current=a;if(Gu&&(Gu=!1,as=r,Ku=f),g=r.pendingLanes,g===0&&(os=null),zr(a.stateNode),Fn(r,Xe()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(qu)throw qu=!1,r=Md,Md=null,r;return(Ku&1)!==0&&r.tag!==0&&aa(),g=r.pendingLanes,(g&1)!==0?r===Fd?cl++:(cl=0,Fd=r):cl=0,ns(),null}function aa(){if(as!==null){var r=Ki(Ku),s=dr.transition,a=st;try{if(dr.transition=null,st=16>r?16:r,as===null)var h=!1;else{if(r=as,as=null,Ku=0,(lt&6)!==0)throw Error(t(331));var f=lt;for(lt|=4,Se=r.current;Se!==null;){var g=Se,w=g.child;if((Se.flags&16)!==0){var k=g.deletions;if(k!==null){for(var D=0;D<k.length;D++){var Q=k[D];for(Se=Q;Se!==null;){var se=Se;switch(se.tag){case 0:case 11:case 15:al(8,se,g)}var ae=se.child;if(ae!==null)ae.return=se,Se=ae;else for(;Se!==null;){se=Se;var ie=se.sibling,ye=se.return;if(Dg(se),se===Q){Se=null;break}if(ie!==null){ie.return=ye,Se=ie;break}Se=ye}}}var Pe=g.alternate;if(Pe!==null){var Re=Pe.child;if(Re!==null){Pe.child=null;do{var Vt=Re.sibling;Re.sibling=null,Re=Vt}while(Re!==null)}}Se=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Se=w;else e:for(;Se!==null;){if(g=Se,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:al(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,Se=$;break e}Se=g.return}}var M=r.current;for(Se=M;Se!==null;){w=Se;var W=w.child;if((w.subtreeFlags&2064)!==0&&W!==null)W.return=w,Se=W;else e:for(w=M;Se!==null;){if(k=Se,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:$u(9,k)}}catch(Ne){Lt(k,k.return,Ne)}if(k===w){Se=null;break e}var ue=k.sibling;if(ue!==null){ue.return=k.return,Se=ue;break e}Se=k.return}}if(lt=f,ns(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(dt,r)}catch{}h=!0}return h}finally{st=a,dr.transition=s}}return!1}function Qg(r,s,a){s=ra(a,s),s=fg(r,s,1),r=is(r,s,1),s=Rn(),r!==null&&(qi(r,1,s),Fn(r,s))}function Lt(r,s,a){if(r.tag===3)Qg(r,r,a);else for(;s!==null;){if(s.tag===3){Qg(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(os===null||!os.has(h))){r=ra(a,r),r=pg(s,r,1),s=is(s,r,1),r=Rn(),s!==null&&(qi(s,1,r),Fn(s,r));break}}s=s.return}}function cT(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=Rn(),r.pingedLanes|=r.suspendedLanes&a,Zt===r&&(ln&a)===a&&(Gt===4||Gt===3&&(ln&130023424)===ln&&500>Xe()-Vd?io(r,0):Ld|=a),Fn(r,s)}function Yg(r,s){s===0&&((r.mode&1)===0?s=1:(s=ko,ko<<=1,(ko&130023424)===0&&(ko=4194304)));var a=Rn();r=Ti(r,s),r!==null&&(qi(r,s,a),Fn(r,a))}function hT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Yg(r,a)}function dT(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Yg(r,a)}var Jg;Jg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||On.current)Vn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Vn=!1,Z0(r,s,a);Vn=(r.flags&131072)!==0}else Vn=!1,Ct&&(s.flags&1048576)!==0&&km(s,Pu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;zu(r,s),r=s.pendingProps;var f=Qo(s,gn.current);ta(s,a),f=fd(null,s,h,r,f,a);var g=pd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ln(h)?(g=!0,Iu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,od(s),f.updater=Uu,s.stateNode=f,f._reactInternals=s,wd(s,h,r,a),s=Sd(null,s,h,!0,g,a)):(s.tag=0,Ct&&g&&Yh(s),Pn(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(zu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=pT(h),r=Ar(h,r),f){case 0:s=Id(null,s,h,r,a);break e;case 1:s=Ig(null,s,h,r,a);break e;case 11:s=vg(null,s,h,r,a);break e;case 14:s=_g(null,s,h,Ar(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ar(h,f),Id(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ar(h,f),Ig(r,s,h,f,a);case 3:e:{if(Sg(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Um(r,s),bu(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ra(Error(t(423)),s),s=Cg(r,s,h,a,f);break e}else if(h!==f){f=ra(Error(t(424)),s),s=Cg(r,s,h,a,f);break e}else for(Jn=Zi(s.stateNode.containerInfo.firstChild),Yn=s,Ct=!0,Rr=null,a=Mm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xo(),h===f){s=Si(r,s,a);break e}Pn(r,s,h,a)}s=s.child}return s;case 5:return Bm(s),r===null&&Zh(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Hh(h,f)?w=null:g!==null&&Hh(h,g)&&(s.flags|=32),Tg(r,s),Pn(r,s,w,a),s.child;case 6:return r===null&&Zh(s),null;case 13:return Pg(r,s,a);case 4:return ad(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Zo(s,null,h,a):Pn(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ar(h,f),vg(r,s,h,f,a);case 7:return Pn(r,s,s.pendingProps,a),s.child;case 8:return Pn(r,s,s.pendingProps.children,a),s.child;case 12:return Pn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,_t(xu,h._currentValue),h._currentValue=w,g!==null)if(Pr(g.value,w)){if(g.children===f.children&&!On.current){s=Si(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var k=g.dependencies;if(k!==null){w=g.child;for(var D=k.firstContext;D!==null;){if(D.context===h){if(g.tag===1){D=Ii(-1,a&-a),D.tag=2;var Q=g.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?D.next=D:(D.next=se.next,se.next=D),Q.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),id(g.return,a,s),k.lanes|=a;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,k=w.alternate,k!==null&&(k.lanes|=a),id(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Pn(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,ta(s,a),f=cr(f),h=h(f),s.flags|=1,Pn(r,s,h,a),s.child;case 14:return h=s.type,f=Ar(h,s.pendingProps),f=Ar(h.type,f),_g(r,s,h,f,a);case 15:return wg(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ar(h,f),zu(r,s),s.tag=1,Ln(h)?(r=!0,Iu(s)):r=!1,ta(s,a),hg(s,h,f),wd(s,h,f,a),Sd(null,s,h,!0,r,a);case 19:return Ag(r,s,a);case 22:return Eg(r,s,a)}throw Error(t(156,s.tag))};function Xg(r,s){return pt(r,s)}function fT(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(r,s,a,h){return new fT(r,s,a,h)}function Hd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function pT(r){if(typeof r=="function")return Hd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===ut)return 14}return 2}function cs(r,s){var a=r.alternate;return a===null?(a=fr(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Xu(r,s,a,h,f,g){var w=2;if(h=r,typeof r=="function")Hd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case S:return oo(a.children,f,g,s);case C:w=8,f|=8;break;case A:return r=fr(12,a,s,f|2),r.elementType=A,r.lanes=g,r;case x:return r=fr(13,a,s,f),r.elementType=x,r.lanes=g,r;case Ge:return r=fr(19,a,s,f),r.elementType=Ge,r.lanes=g,r;case rt:return Zu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:w=10;break e;case O:w=9;break e;case V:w=11;break e;case ut:w=14;break e;case Rt:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=fr(w,a,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function oo(r,s,a,h){return r=fr(7,r,h,s),r.lanes=a,r}function Zu(r,s,a,h){return r=fr(22,r,h,s),r.elementType=rt,r.lanes=a,r.stateNode={isHidden:!1},r}function Wd(r,s,a){return r=fr(6,r,null,s),r.lanes=a,r}function qd(r,s,a){return s=fr(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function mT(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wi(0),this.expirationTimes=Wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Gd(r,s,a,h,f,g,w,k,D){return r=new mT(r,s,a,k,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=fr(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},od(g),r}function gT(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Me,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function Zg(r){if(!r)return ts;r=r._reactInternals;e:{if(_e(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ln(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Ln(a))return Rm(r,a,s)}return s}function ey(r,s,a,h,f,g,w,k,D){return r=Gd(a,h,!0,r,f,g,w,k,D),r.context=Zg(null),a=r.current,h=Rn(),f=ls(a),g=Ii(h,f),g.callback=s??null,is(a,g,f),r.current.lanes=f,qi(r,f,h),Fn(r,h),r}function ec(r,s,a,h){var f=s.current,g=Rn(),w=ls(f);return a=Zg(a),s.context===null?s.context=a:s.pendingContext=a,s=Ii(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=is(f,s,w),r!==null&&(Nr(r,f,w,g),Nu(r,f,w)),w}function tc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ty(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Kd(r,s){ty(r,s),(r=r.alternate)&&ty(r,s)}function yT(){return null}var ny=typeof reportError=="function"?reportError:function(r){console.error(r)};function Qd(r){this._internalRoot=r}nc.prototype.render=Qd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));ec(r,s,null,null)},nc.prototype.unmount=Qd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ro(function(){ec(null,r,null,null)}),s[vi]=null}};function nc(r){this._internalRoot=r}nc.prototype.unstable_scheduleHydration=function(r){if(r){var s=nu();r={blockedOn:null,target:r,priority:s};for(var a=0;a<$r.length&&s!==0&&s<$r[a].priority;a++);$r.splice(a,0,r),a===0&&su(r)}};function Yd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function rc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function ry(){}function vT(r,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var Q=tc(w);g.call(Q)}}var w=ey(s,h,r,0,null,!1,!1,"",ry);return r._reactRootContainer=w,r[vi]=w.current,Ka(r.nodeType===8?r.parentNode:r),ro(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var k=h;h=function(){var Q=tc(D);k.call(Q)}}var D=Gd(r,0,!1,null,null,!1,!1,"",ry);return r._reactRootContainer=D,r[vi]=D.current,Ka(r.nodeType===8?r.parentNode:r),ro(function(){ec(s,D,a,h)}),D}function ic(r,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var k=f;f=function(){var D=tc(w);k.call(D)}}ec(s,w,r,f)}else w=vT(a,s,r,f,h);return tc(w)}eu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Hi(s.pendingLanes);a!==0&&(Gi(s,a|1),Fn(s,Xe()),(lt&6)===0&&(oa=Xe()+500,ns()))}break;case 13:ro(function(){var h=Ti(r,1);if(h!==null){var f=Rn();Nr(h,r,1,f)}}),Kd(r,1)}},No=function(r){if(r.tag===13){var s=Ti(r,134217728);if(s!==null){var a=Rn();Nr(s,r,134217728,a)}Kd(r,134217728)}},tu=function(r){if(r.tag===13){var s=ls(r),a=Ti(r,s);if(a!==null){var h=Rn();Nr(a,r,s,h)}Kd(r,s)}},nu=function(){return st},ru=function(r,s){var a=st;try{return st=r,s()}finally{st=a}},di=function(r,s,a){switch(s){case"input":if(Ms(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=Eu(h);if(!f)throw Error(t(90));ke(h),Ms(h,f)}}}break;case"textarea":An(r,a);break;case"select":s=a.value,s!=null&&yr(r,!!a.multiple,s,!1)}},Mr=zd,Fr=ro;var _T={usingClientEntryPoint:!1,Events:[Ja,Go,Eu,Hn,js,zd]},hl={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wT={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ct(r),r===null?null:r.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||yT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{dt=sc.inject(wT),Ft=sc}catch{}}return Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_T,Un.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yd(s))throw Error(t(200));return gT(r,s,null,a)},Un.createRoot=function(r,s){if(!Yd(r))throw Error(t(299));var a=!1,h="",f=ny;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Gd(r,1,!1,null,null,a,!1,h,f),r[vi]=s.current,Ka(r.nodeType===8?r.parentNode:r),new Qd(s)},Un.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ct(s),r=r===null?null:r.stateNode,r},Un.flushSync=function(r){return ro(r)},Un.hydrate=function(r,s,a){if(!rc(s))throw Error(t(200));return ic(null,r,s,!0,a)},Un.hydrateRoot=function(r,s,a){if(!Yd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=ny;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ey(s,null,r,1,a??null,f,!1,g,w),r[vi]=s.current,Ka(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new nc(s)},Un.render=function(r,s,a){if(!rc(s))throw Error(t(200));return ic(null,r,s,!1,a)},Un.unmountComponentAtNode=function(r){if(!rc(r))throw Error(t(40));return r._reactRootContainer?(ro(function(){ic(null,null,r,!1,function(){r._reactRootContainer=null,r[vi]=null})}),!0):!1},Un.unstable_batchedUpdates=zd,Un.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!rc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ic(r,s,a,!1,h)},Un.version="18.3.1-next-f1338f8080-20240426",Un}var hy;function y_(){if(hy)return Zd.exports;hy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zd.exports=AT(),Zd.exports}var dy;function xT(){if(dy)return oc;dy=1;var n=y_();return oc.createRoot=n.createRoot,oc.hydrateRoot=n.hydrateRoot,oc}var kT=xT();const NT=Kf(kT);var v_=y_();const bT=Kf(v_),DT=m_({__proto__:null,default:bT},[v_]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pt(){return Pt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pt.apply(this,arguments)}var Bt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Bt||(Bt={}));const fy="popstate";function OT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:d}=i.location;return xl("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:mo(o)}return VT(e,t,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LT(){return Math.random().toString(36).substr(2,8)}function py(n,e){return{usr:n.state,key:n.key,idx:e}}function xl(n,e,t,i){return t===void 0&&(t=null),Pt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?bs(e):e,{state:t,key:e&&e.key||i||LT()})}function mo(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function VT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,d=Bt.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(Pt({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function E(){d=Bt.Pop;let H=_(),fe=H==null?null:H-y;y=H,p&&p({action:d,location:j.location,delta:fe})}function T(H,fe){d=Bt.Push;let ee=xl(j.location,H,fe);y=_()+1;let ce=py(ee,y),pe=j.createHref(ee);try{c.pushState(ce,"",pe)}catch(Fe){if(Fe instanceof DOMException&&Fe.name==="DataCloneError")throw Fe;o.location.assign(pe)}l&&p&&p({action:d,location:j.location,delta:1})}function P(H,fe){d=Bt.Replace;let ee=xl(j.location,H,fe);y=_();let ce=py(ee,y),pe=j.createHref(ee);c.replaceState(ce,"",pe),l&&p&&p({action:d,location:j.location,delta:0})}function L(H){let fe=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof H=="string"?H:mo(H);return ee=ee.replace(/ $/,"%20"),Ke(fe,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,fe)}let j={get action(){return d},get location(){return n(o,c)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(fy,E),p=H,()=>{o.removeEventListener(fy,E),p=null}},createHref(H){return e(o,H)},createURL:L,encodeLocation(H){let fe=L(H);return{pathname:fe.pathname,search:fe.search,hash:fe.hash}},push:T,replace:P,go(H){return c.go(H)}};return j}var gt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gt||(gt={}));const MT=new Set(["lazy","caseSensitive","path","id","index","children"]);function FT(n){return n.index===!0}function Cc(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((o,l)=>{let c=[...t,String(l)],d=typeof o.id=="string"?o.id:c.join("-");if(Ke(o.index!==!0||!o.children,"Cannot specify children on an index route"),Ke(!i[d],'Found a route id collision on id "'+d+`".  Route id's must be globally unique within Data Router usages`),FT(o)){let p=Pt({},o,e(o),{id:d});return i[d]=p,p}else{let p=Pt({},o,e(o),{id:d,children:void 0});return i[d]=p,o.children&&(p.children=Cc(o.children,e,c,i)),p}})}function lo(n,e,t){return t===void 0&&(t="/"),pc(n,e,t,!1)}function pc(n,e,t,i){let o=typeof e=="string"?bs(e):e,l=Ni(o.pathname||"/",t);if(l==null)return null;let c=__(n);jT(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let y=JT(l);d=QT(c[p],y,i)}return d}function UT(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function __(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Ke(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Ai([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Ke(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),__(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:GT(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let p of w_(l.path))o(l,c,p)}),e}function w_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=w_(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function jT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:KT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const zT=/^:[\w-]+$/,BT=3,$T=2,HT=1,WT=10,qT=-2,my=n=>n==="*";function GT(n,e){let t=n.split("/"),i=t.length;return t.some(my)&&(i+=qT),e&&(i+=$T),t.filter(o=>!my(o)).reduce((o,l)=>o+(zT.test(l)?BT:l===""?HT:WT),i)}function KT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function QT(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,o={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=Pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),T=p.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=Pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Ai([l,E.pathname]),pathnameBase:eI(Ai([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=Ai([l,E.pathnameBase]))}return c}function Pc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=YT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:T,isOptional:P}=_;if(T==="*"){let j=d[E]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const L=d[E];return P&&!L?y[T]=void 0:y[T]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function YT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),wa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function JT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wa(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ni(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function XT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?bs(n):n;return{pathname:t?t.startsWith("/")?t:ZT(t,e):e,search:tI(i),hash:nI(o)}}function ZT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function nf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Jc(n,e){let t=E_(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Xc(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=bs(n):(o=Pt({},n),Ke(!o.pathname||!o.pathname.includes("?"),nf("?","pathname","search",o)),Ke(!o.pathname||!o.pathname.includes("#"),nf("#","pathname","hash",o)),Ke(!o.search||!o.search.includes("#"),nf("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}d=E>=0?e[E]:"/"}let p=XT(o,d),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const Ai=n=>n.join("/").replace(/\/\/+/g,"/"),eI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,nI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Rc{constructor(e,t,i,o){o===void 0&&(o=!1),this.status=e,this.statusText=t||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function kl(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const T_=["post","put","patch","delete"],rI=new Set(T_),iI=["get",...T_],sI=new Set(iI),oI=new Set([301,302,303,307,308]),aI=new Set([307,308]),rf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Yf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),I_="remix-router-transitions";function cI(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Ke(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(n.mapRouteProperties)o=n.mapRouteProperties;else if(n.detectErrorBoundary){let b=n.detectErrorBoundary;o=U=>({hasErrorBoundary:b(U)})}else o=uI;let l={},c=Cc(n.routes,o,void 0,l),d,p=n.basename||"/",y=n.dataStrategy||pI,_=n.patchRoutesOnNavigation,E=Pt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),T=null,P=new Set,L=null,j=null,H=null,fe=n.hydrationData!=null,ee=lo(c,n.history.location,p),ce=!1,pe=null;if(ee==null&&!_){let b=jn(404,{pathname:n.history.location.pathname}),{matches:U,route:G}=Py(c);ee=U,pe={[G.id]:b}}ee&&!n.hydrationData&&Fr(ee,c,n.history.location.pathname).active&&(ee=null);let Fe;if(ee)if(ee.some(b=>b.route.lazy))Fe=!1;else if(!ee.some(b=>b.route.loader))Fe=!0;else if(E.v7_partialHydration){let b=n.hydrationData?n.hydrationData.loaderData:null,U=n.hydrationData?n.hydrationData.errors:null;if(U){let G=ee.findIndex(ne=>U[ne.route.id]!==void 0);Fe=ee.slice(0,G+1).every(ne=>!vf(ne.route,b,U))}else Fe=ee.every(G=>!vf(G.route,b,U))}else Fe=n.hydrationData!=null;else if(Fe=!1,ee=[],E.v7_partialHydration){let b=Fr(null,c,n.history.location.pathname);b.active&&b.matches&&(ce=!0,ee=b.matches)}let Me,S={historyAction:n.history.action,location:n.history.location,matches:ee,initialized:Fe,navigation:rf,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||pe,fetchers:new Map,blockers:new Map},C=Bt.Pop,A=!1,N,O=!1,V=new Map,x=null,Ge=!1,ut=!1,Rt=[],rt=new Set,oe=new Map,xe=0,ge=-1,z=new Map,J=new Set,Ce=new Map,Be=new Map,F=new Set,K=new Map,q=new Map,Z;function le(){if(T=n.history.listen(b=>{let{action:U,location:G,delta:ne}=b;if(Z){Z(),Z=void 0;return}wa(q.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=di({currentLocation:S.location,nextLocation:G,historyAction:U});if(de&&ne!=null){let Te=new Promise(Oe=>{Z=Oe});n.history.go(ne*-1),wr(de,{state:"blocked",location:G,proceed(){wr(de,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),Te.then(()=>n.history.go(ne))},reset(){let Oe=new Map(S.blockers);Oe.set(de,fl),ke({blockers:Oe})}});return}return fn(U,G)}),t){AI(e,V);let b=()=>xI(e,V);e.addEventListener("pagehide",b),x=()=>e.removeEventListener("pagehide",b)}return S.initialized||fn(Bt.Pop,S.location,{initialHydration:!0}),Me}function me(){T&&T(),x&&x(),P.clear(),N&&N.abort(),S.fetchers.forEach((b,U)=>rr(U)),S.blockers.forEach((b,U)=>Vr(U))}function be(b){return P.add(b),()=>P.delete(b)}function ke(b,U){U===void 0&&(U={}),S=Pt({},S,b);let G=[],ne=[];E.v7_fetcherPersist&&S.fetchers.forEach((de,Te)=>{de.state==="idle"&&(F.has(Te)?ne.push(Te):G.push(Te))}),F.forEach(de=>{!S.fetchers.has(de)&&!oe.has(de)&&ne.push(de)}),[...P].forEach(de=>de(S,{deletedFetchers:ne,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),E.v7_fetcherPersist?(G.forEach(de=>S.fetchers.delete(de)),ne.forEach(de=>rr(de))):ne.forEach(de=>F.delete(de))}function it(b,U,G){var ne,de;let{flushSync:Te}=G===void 0?{}:G,Oe=S.actionData!=null&&S.navigation.formMethod!=null&&br(S.navigation.formMethod)&&S.navigation.state==="loading"&&((ne=b.state)==null?void 0:ne._isRedirect)!==!0,Ie;U.actionData?Object.keys(U.actionData).length>0?Ie=U.actionData:Ie=null:Oe?Ie=S.actionData:Ie=null;let Ee=U.loaderData?Sy(S.loaderData,U.loaderData,U.matches||[],U.errors):S.loaderData,ve=S.blockers;ve.size>0&&(ve=new Map(ve),ve.forEach((He,Ot)=>ve.set(Ot,fl)));let _e=A===!0||S.navigation.formMethod!=null&&br(S.navigation.formMethod)&&((de=b.state)==null?void 0:de._isRedirect)!==!0;d&&(c=d,d=void 0),Ge||C===Bt.Pop||(C===Bt.Push?n.history.push(b,b.state):C===Bt.Replace&&n.history.replace(b,b.state));let Ue;if(C===Bt.Pop){let He=V.get(S.location.pathname);He&&He.has(b.pathname)?Ue={currentLocation:S.location,nextLocation:b}:V.has(b.pathname)&&(Ue={currentLocation:b,nextLocation:S.location})}else if(O){let He=V.get(S.location.pathname);He?He.add(b.pathname):(He=new Set([b.pathname]),V.set(S.location.pathname,He)),Ue={currentLocation:S.location,nextLocation:b}}ke(Pt({},U,{actionData:Ie,loaderData:Ee,historyAction:C,location:b,initialized:!0,navigation:rf,revalidation:"idle",restoreScrollPosition:Mr(b,U.matches||S.matches),preventScrollReset:_e,blockers:ve}),{viewTransitionOpts:Ue,flushSync:Te===!0}),C=Bt.Pop,A=!1,O=!1,Ge=!1,ut=!1,Rt=[]}async function yt(b,U){if(typeof b=="number"){n.history.go(b);return}let G=yf(S.location,S.matches,p,E.v7_prependBasename,b,E.v7_relativeSplatPath,U?.fromRouteId,U?.relative),{path:ne,submission:de,error:Te}=gy(E.v7_normalizeFormMethod,!1,G,U),Oe=S.location,Ie=xl(S.location,ne,U&&U.state);Ie=Pt({},Ie,n.history.encodeLocation(Ie));let Ee=U&&U.replace!=null?U.replace:void 0,ve=Bt.Push;Ee===!0?ve=Bt.Replace:Ee===!1||de!=null&&br(de.formMethod)&&de.formAction===S.location.pathname+S.location.search&&(ve=Bt.Replace);let _e=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Ue=(U&&U.flushSync)===!0,He=di({currentLocation:Oe,nextLocation:Ie,historyAction:ve});if(He){wr(He,{state:"blocked",location:Ie,proceed(){wr(He,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),yt(b,U)},reset(){let Ot=new Map(S.blockers);Ot.set(He,fl),ke({blockers:Ot})}});return}return await fn(ve,Ie,{submission:de,pendingError:Te,preventScrollReset:_e,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:Ue})}function dn(){if(At(),ke({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){fn(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}fn(C||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:O===!0})}}async function fn(b,U,G){N&&N.abort(),N=null,C=b,Ge=(G&&G.startUninterruptedRevalidation)===!0,js(S.location,S.matches),A=(G&&G.preventScrollReset)===!0,O=(G&&G.enableViewTransition)===!0;let ne=d||c,de=G&&G.overrideNavigation,Te=G!=null&&G.initialHydration&&S.matches&&S.matches.length>0&&!ce?S.matches:lo(ne,U,p),Oe=(G&&G.flushSync)===!0;if(Te&&S.initialized&&!ut&&wI(S.location,U)&&!(G&&G.submission&&br(G.submission.formMethod))){it(U,{matches:Te},{flushSync:Oe});return}let Ie=Fr(Te,ne,U.pathname);if(Ie.active&&Ie.matches&&(Te=Ie.matches),!Te){let{error:ct,notFoundMatches:Ye,route:pt}=pn(U.pathname);it(U,{matches:Ye,loaderData:{},errors:{[pt.id]:ct}},{flushSync:Oe});return}N=new AbortController;let Ee=la(n.history,U,N.signal,G&&G.submission),ve;if(G&&G.pendingError)ve=[uo(Te).route.id,{type:gt.error,error:G.pendingError}];else if(G&&G.submission&&br(G.submission.formMethod)){let ct=await Ms(Ee,U,G.submission,Te,Ie.active,{replace:G.replace,flushSync:Oe});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[Ye,pt]=ct.pendingActionResult;if(er(pt)&&kl(pt.error)&&pt.error.status===404){N=null,it(U,{matches:ct.matches,loaderData:{},errors:{[Ye]:pt.error}});return}}Te=ct.matches||Te,ve=ct.pendingActionResult,de=sf(U,G.submission),Oe=!1,Ie.active=!1,Ee=la(n.history,Ee.url,Ee.signal)}let{shortCircuited:_e,matches:Ue,loaderData:He,errors:Ot}=await Ro(Ee,U,Te,Ie.active,de,G&&G.submission,G&&G.fetcherSubmission,G&&G.replace,G&&G.initialHydration===!0,Oe,ve);_e||(N=null,it(U,Pt({matches:Ue||Te},Cy(ve),{loaderData:He,errors:Ot})))}async function Ms(b,U,G,ne,de,Te){Te===void 0&&(Te={}),At();let Oe=PI(U,G);if(ke({navigation:Oe},{flushSync:Te.flushSync===!0}),de){let ve=await Nn(ne,U.pathname,b.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let _e=uo(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[_e,{type:gt.error,error:ve.error}]}}else if(ve.matches)ne=ve.matches;else{let{notFoundMatches:_e,error:Ue,route:He}=pn(U.pathname);return{matches:_e,pendingActionResult:[He.id,{type:gt.error,error:Ue}]}}}let Ie,Ee=gl(ne,U);if(!Ee.route.action&&!Ee.route.lazy)Ie={type:gt.error,error:jn(405,{method:b.method,pathname:U.pathname,routeId:Ee.route.id})};else if(Ie=(await vr("action",S,b,[Ee],ne,null))[Ee.route.id],b.signal.aborted)return{shortCircuited:!0};if(ho(Ie)){let ve;return Te&&Te.replace!=null?ve=Te.replace:ve=Ey(Ie.response.headers.get("Location"),new URL(b.url),p)===S.location.pathname+S.location.search,await An(b,Ie,!0,{submission:G,replace:ve}),{shortCircuited:!0}}if(vs(Ie))throw jn(400,{type:"defer-action"});if(er(Ie)){let ve=uo(ne,Ee.route.id);return(Te&&Te.replace)!==!0&&(C=Bt.Push),{matches:ne,pendingActionResult:[ve.route.id,Ie]}}return{matches:ne,pendingActionResult:[Ee.route.id,Ie]}}async function Ro(b,U,G,ne,de,Te,Oe,Ie,Ee,ve,_e){let Ue=de||sf(U,Te),He=Te||Oe||Ay(Ue),Ot=!Ge&&(!E.v7_partialHydration||!Ee);if(ne){if(Ot){let dt=ci(_e);ke(Pt({navigation:Ue},dt!==void 0?{actionData:dt}:{}),{flushSync:ve})}let Ze=await Nn(G,U.pathname,b.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){let dt=uo(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,loaderData:{},errors:{[dt]:Ze.error}}}else if(Ze.matches)G=Ze.matches;else{let{error:dt,notFoundMatches:Ft,route:zr}=pn(U.pathname);return{matches:Ft,loaderData:{},errors:{[zr.id]:dt}}}}let ct=d||c,[Ye,pt]=vy(n.history,S,G,He,U,E.v7_partialHydration&&Ee===!0,E.v7_skipActionErrorRevalidation,ut,Rt,rt,F,Ce,J,ct,p,_e);if(kn(Ze=>!(G&&G.some(dt=>dt.route.id===Ze))||Ye&&Ye.some(dt=>dt.route.id===Ze)),ge=++xe,Ye.length===0&&pt.length===0){let Ze=ji();return it(U,Pt({matches:G,loaderData:{},errors:_e&&er(_e[1])?{[_e[0]]:_e[1].error}:null},Cy(_e),Ze?{fetchers:new Map(S.fetchers)}:{}),{flushSync:ve}),{shortCircuited:!0}}if(Ot){let Ze={};if(!ne){Ze.navigation=Ue;let dt=ci(_e);dt!==void 0&&(Ze.actionData=dt)}pt.length>0&&(Ze.fetchers=gr(pt)),ke(Ze,{flushSync:ve})}pt.forEach(Ze=>{xn(Ze.key),Ze.controller&&oe.set(Ze.key,Ze.controller)});let ir=()=>pt.forEach(Ze=>xn(Ze.key));N&&N.signal.addEventListener("abort",ir);let{loaderResults:Ur,fetcherResults:Wn}=await Dt(S,G,Ye,pt,b);if(b.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",ir),pt.forEach(Ze=>oe.delete(Ze.key));let Xe=ac(Ur);if(Xe)return await An(b,Xe.result,!0,{replace:Ie}),{shortCircuited:!0};if(Xe=ac(Wn),Xe)return J.add(Xe.key),await An(b,Xe.result,!0,{replace:Ie}),{shortCircuited:!0};let{loaderData:$i,errors:qn}=Iy(S,G,Ur,_e,pt,Wn,K);K.forEach((Ze,dt)=>{Ze.subscribe(Ft=>{(Ft||Ze.done)&&K.delete(dt)})}),E.v7_partialHydration&&Ee&&S.errors&&(qn=Pt({},S.errors,qn));let mn=ji(),rn=zi(ge),jr=mn||rn||pt.length>0;return Pt({matches:G,loaderData:$i,errors:qn},jr?{fetchers:new Map(S.fetchers)}:{})}function ci(b){if(b&&!er(b[1]))return{[b[0]]:b[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function gr(b){return b.forEach(U=>{let G=S.fetchers.get(U.key),ne=pl(void 0,G?G.data:void 0);S.fetchers.set(U.key,ne)}),new Map(S.fetchers)}function yr(b,U,G,ne){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xn(b);let de=(ne&&ne.flushSync)===!0,Te=d||c,Oe=yf(S.location,S.matches,p,E.v7_prependBasename,G,E.v7_relativeSplatPath,U,ne?.relative),Ie=lo(Te,Oe,p),Ee=Fr(Ie,Te,Oe);if(Ee.active&&Ee.matches&&(Ie=Ee.matches),!Ie){Sn(b,U,jn(404,{pathname:Oe}),{flushSync:de});return}let{path:ve,submission:_e,error:Ue}=gy(E.v7_normalizeFormMethod,!0,Oe,ne);if(Ue){Sn(b,U,Ue,{flushSync:de});return}let He=gl(Ie,ve),Ot=(ne&&ne.preventScrollReset)===!0;if(_e&&br(_e.formMethod)){Fs(b,U,ve,He,Ie,Ee.active,de,Ot,_e);return}Ce.set(b,{routeId:U,path:ve}),Fi(b,U,ve,He,Ie,Ee.active,de,Ot,_e)}async function Fs(b,U,G,ne,de,Te,Oe,Ie,Ee){At(),Ce.delete(b);function ve(et){if(!et.route.action&&!et.route.lazy){let sr=jn(405,{method:Ee.formMethod,pathname:G,routeId:U});return Sn(b,U,sr,{flushSync:Oe}),!0}return!1}if(!Te&&ve(ne))return;let _e=S.fetchers.get(b);Yt(b,RI(Ee,_e),{flushSync:Oe});let Ue=new AbortController,He=la(n.history,G,Ue.signal,Ee);if(Te){let et=await Nn(de,new URL(He.url).pathname,He.signal,b);if(et.type==="aborted")return;if(et.type==="error"){Sn(b,U,et.error,{flushSync:Oe});return}else if(et.matches){if(de=et.matches,ne=gl(de,G),ve(ne))return}else{Sn(b,U,jn(404,{pathname:G}),{flushSync:Oe});return}}oe.set(b,Ue);let Ot=xe,Ye=(await vr("action",S,He,[ne],de,b))[ne.route.id];if(He.signal.aborted){oe.get(b)===Ue&&oe.delete(b);return}if(E.v7_fetcherPersist&&F.has(b)){if(ho(Ye)||er(Ye)){Yt(b,fs(void 0));return}}else{if(ho(Ye))if(oe.delete(b),ge>Ot){Yt(b,fs(void 0));return}else return J.add(b),Yt(b,pl(Ee)),An(He,Ye,!1,{fetcherSubmission:Ee,preventScrollReset:Ie});if(er(Ye)){Sn(b,U,Ye.error);return}}if(vs(Ye))throw jn(400,{type:"defer-action"});let pt=S.navigation.location||S.location,ir=la(n.history,pt,Ue.signal),Ur=d||c,Wn=S.navigation.state!=="idle"?lo(Ur,S.navigation.location,p):S.matches;Ke(Wn,"Didn't find any matches after fetcher action");let Xe=++xe;z.set(b,Xe);let $i=pl(Ee,Ye.data);S.fetchers.set(b,$i);let[qn,mn]=vy(n.history,S,Wn,Ee,pt,!1,E.v7_skipActionErrorRevalidation,ut,Rt,rt,F,Ce,J,Ur,p,[ne.route.id,Ye]);mn.filter(et=>et.key!==b).forEach(et=>{let sr=et.key,Bs=S.fetchers.get(sr),Ao=pl(void 0,Bs?Bs.data:void 0);S.fetchers.set(sr,Ao),xn(sr),et.controller&&oe.set(sr,et.controller)}),ke({fetchers:new Map(S.fetchers)});let rn=()=>mn.forEach(et=>xn(et.key));Ue.signal.addEventListener("abort",rn);let{loaderResults:jr,fetcherResults:Ze}=await Dt(S,Wn,qn,mn,ir);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",rn),z.delete(b),oe.delete(b),mn.forEach(et=>oe.delete(et.key));let dt=ac(jr);if(dt)return An(ir,dt.result,!1,{preventScrollReset:Ie});if(dt=ac(Ze),dt)return J.add(dt.key),An(ir,dt.result,!1,{preventScrollReset:Ie});let{loaderData:Ft,errors:zr}=Iy(S,Wn,jr,void 0,mn,Ze,K);if(S.fetchers.has(b)){let et=fs(Ye.data);S.fetchers.set(b,et)}zi(Xe),S.navigation.state==="loading"&&Xe>ge?(Ke(C,"Expected pending action"),N&&N.abort(),it(S.navigation.location,{matches:Wn,loaderData:Ft,errors:zr,fetchers:new Map(S.fetchers)})):(ke({errors:zr,loaderData:Sy(S.loaderData,Ft,Wn,zr),fetchers:new Map(S.fetchers)}),ut=!1)}async function Fi(b,U,G,ne,de,Te,Oe,Ie,Ee){let ve=S.fetchers.get(b);Yt(b,pl(Ee,ve?ve.data:void 0),{flushSync:Oe});let _e=new AbortController,Ue=la(n.history,G,_e.signal);if(Te){let Ye=await Nn(de,new URL(Ue.url).pathname,Ue.signal,b);if(Ye.type==="aborted")return;if(Ye.type==="error"){Sn(b,U,Ye.error,{flushSync:Oe});return}else if(Ye.matches)de=Ye.matches,ne=gl(de,G);else{Sn(b,U,jn(404,{pathname:G}),{flushSync:Oe});return}}oe.set(b,_e);let He=xe,ct=(await vr("loader",S,Ue,[ne],de,b))[ne.route.id];if(vs(ct)&&(ct=await Jf(ct,Ue.signal,!0)||ct),oe.get(b)===_e&&oe.delete(b),!Ue.signal.aborted){if(F.has(b)){Yt(b,fs(void 0));return}if(ho(ct))if(ge>He){Yt(b,fs(void 0));return}else{J.add(b),await An(Ue,ct,!1,{preventScrollReset:Ie});return}if(er(ct)){Sn(b,U,ct.error);return}Ke(!vs(ct),"Unhandled fetcher deferred data"),Yt(b,fs(ct.data))}}async function An(b,U,G,ne){let{submission:de,fetcherSubmission:Te,preventScrollReset:Oe,replace:Ie}=ne===void 0?{}:ne;U.response.headers.has("X-Remix-Revalidate")&&(ut=!0);let Ee=U.response.headers.get("Location");Ke(Ee,"Expected a Location header on the redirect Response"),Ee=Ey(Ee,new URL(b.url),p);let ve=xl(S.location,Ee,{_isRedirect:!0});if(t){let Ye=!1;if(U.response.headers.has("X-Remix-Reload-Document"))Ye=!0;else if(Yf.test(Ee)){const pt=n.history.createURL(Ee);Ye=pt.origin!==e.location.origin||Ni(pt.pathname,p)==null}if(Ye){Ie?e.location.replace(Ee):e.location.assign(Ee);return}}N=null;let _e=Ie===!0||U.response.headers.has("X-Remix-Replace")?Bt.Replace:Bt.Push,{formMethod:Ue,formAction:He,formEncType:Ot}=S.navigation;!de&&!Te&&Ue&&He&&Ot&&(de=Ay(S.navigation));let ct=de||Te;if(aI.has(U.response.status)&&ct&&br(ct.formMethod))await fn(_e,ve,{submission:Pt({},ct,{formAction:Ee}),preventScrollReset:Oe||A,enableViewTransition:G?O:void 0});else{let Ye=sf(ve,de);await fn(_e,ve,{overrideNavigation:Ye,fetcherSubmission:Te,preventScrollReset:Oe||A,enableViewTransition:G?O:void 0})}}async function vr(b,U,G,ne,de,Te){let Oe,Ie={};try{Oe=await mI(y,b,U,G,ne,de,Te,l,o)}catch(Ee){return ne.forEach(ve=>{Ie[ve.route.id]={type:gt.error,error:Ee}}),Ie}for(let[Ee,ve]of Object.entries(Oe))if(EI(ve)){let _e=ve.result;Ie[Ee]={type:gt.redirect,response:vI(_e,G,Ee,de,p,E.v7_relativeSplatPath)}}else Ie[Ee]=await yI(ve);return Ie}async function Dt(b,U,G,ne,de){let Te=b.matches,Oe=vr("loader",b,de,G,U,null),Ie=Promise.all(ne.map(async _e=>{if(_e.matches&&_e.match&&_e.controller){let He=(await vr("loader",b,la(n.history,_e.path,_e.controller.signal),[_e.match],_e.matches,_e.key))[_e.match.route.id];return{[_e.key]:He}}else return Promise.resolve({[_e.key]:{type:gt.error,error:jn(404,{pathname:_e.path})}})})),Ee=await Oe,ve=(await Ie).reduce((_e,Ue)=>Object.assign(_e,Ue),{});return await Promise.all([SI(U,Ee,de.signal,Te,b.loaderData),CI(U,ve,ne)]),{loaderResults:Ee,fetcherResults:ve}}function At(){ut=!0,Rt.push(...kn()),Ce.forEach((b,U)=>{oe.has(U)&&rt.add(U),xn(U)})}function Yt(b,U,G){G===void 0&&(G={}),S.fetchers.set(b,U),ke({fetchers:new Map(S.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function Sn(b,U,G,ne){ne===void 0&&(ne={});let de=uo(S.matches,U);rr(b),ke({errors:{[de.route.id]:G},fetchers:new Map(S.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function _r(b){return Be.set(b,(Be.get(b)||0)+1),F.has(b)&&F.delete(b),S.fetchers.get(b)||lI}function rr(b){let U=S.fetchers.get(b);oe.has(b)&&!(U&&U.state==="loading"&&z.has(b))&&xn(b),Ce.delete(b),z.delete(b),J.delete(b),E.v7_fetcherPersist&&F.delete(b),rt.delete(b),S.fetchers.delete(b)}function hi(b){let U=(Be.get(b)||0)-1;U<=0?(Be.delete(b),F.add(b),E.v7_fetcherPersist||rr(b)):Be.set(b,U),ke({fetchers:new Map(S.fetchers)})}function xn(b){let U=oe.get(b);U&&(U.abort(),oe.delete(b))}function Ui(b){for(let U of b){let G=_r(U),ne=fs(G.data);S.fetchers.set(U,ne)}}function ji(){let b=[],U=!1;for(let G of J){let ne=S.fetchers.get(G);Ke(ne,"Expected fetcher: "+G),ne.state==="loading"&&(J.delete(G),b.push(G),U=!0)}return Ui(b),U}function zi(b){let U=[];for(let[G,ne]of z)if(ne<b){let de=S.fetchers.get(G);Ke(de,"Expected fetcher: "+G),de.state==="loading"&&(xn(G),z.delete(G),U.push(G))}return Ui(U),U.length>0}function Us(b,U){let G=S.blockers.get(b)||fl;return q.get(b)!==U&&q.set(b,U),G}function Vr(b){S.blockers.delete(b),q.delete(b)}function wr(b,U){let G=S.blockers.get(b)||fl;Ke(G.state==="unblocked"&&U.state==="blocked"||G.state==="blocked"&&U.state==="blocked"||G.state==="blocked"&&U.state==="proceeding"||G.state==="blocked"&&U.state==="unblocked"||G.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+G.state+" -> "+U.state);let ne=new Map(S.blockers);ne.set(b,U),ke({blockers:ne})}function di(b){let{currentLocation:U,nextLocation:G,historyAction:ne}=b;if(q.size===0)return;q.size>1&&wa(!1,"A router only supports one blocker at a time");let de=Array.from(q.entries()),[Te,Oe]=de[de.length-1],Ie=S.blockers.get(Te);if(!(Ie&&Ie.state==="proceeding")&&Oe({currentLocation:U,nextLocation:G,historyAction:ne}))return Te}function pn(b){let U=jn(404,{pathname:b}),G=d||c,{matches:ne,route:de}=Py(G);return kn(),{notFoundMatches:ne,route:de,error:U}}function kn(b){let U=[];return K.forEach((G,ne)=>{(!b||b(ne))&&(G.cancel(),U.push(ne),K.delete(ne))}),U}function Bi(b,U,G){if(L=b,H=U,j=G||null,!fe&&S.navigation===rf){fe=!0;let ne=Mr(S.location,S.matches);ne!=null&&ke({restoreScrollPosition:ne})}return()=>{L=null,H=null,j=null}}function Hn(b,U){return j&&j(b,U.map(ne=>UT(ne,S.loaderData)))||b.key}function js(b,U){if(L&&H){let G=Hn(b,U);L[G]=H()}}function Mr(b,U){if(L){let G=Hn(b,U),ne=L[G];if(typeof ne=="number")return ne}return null}function Fr(b,U,G){if(_)if(b){if(Object.keys(b[0].params).length>0)return{active:!0,matches:pc(U,G,p,!0)}}else return{active:!0,matches:pc(U,G,p,!0)||[]};return{active:!1,matches:null}}async function Nn(b,U,G,ne){if(!_)return{type:"success",matches:b};let de=b;for(;;){let Te=d==null,Oe=d||c,Ie=l;try{await _({signal:G,path:U,matches:de,fetcherKey:ne,patch:(_e,Ue)=>{G.aborted||wy(_e,Ue,Oe,Ie,o)}})}catch(_e){return{type:"error",error:_e,partialMatches:de}}finally{Te&&!G.aborted&&(c=[...c])}if(G.aborted)return{type:"aborted"};let Ee=lo(Oe,U,p);if(Ee)return{type:"success",matches:Ee};let ve=pc(Oe,U,p,!0);if(!ve||de.length===ve.length&&de.every((_e,Ue)=>_e.route.id===ve[Ue].route.id))return{type:"success",matches:null};de=ve}}function zs(b){l={},d=Cc(b,o,void 0,l)}function xt(b,U){let G=d==null;wy(b,U,d||c,l,o),G&&(c=[...c],ke({}))}return Me={get basename(){return p},get future(){return E},get state(){return S},get routes(){return c},get window(){return e},initialize:le,subscribe:be,enableScrollRestoration:Bi,navigate:yt,fetch:yr,revalidate:dn,createHref:b=>n.history.createHref(b),encodeLocation:b=>n.history.encodeLocation(b),getFetcher:_r,deleteFetcher:hi,dispose:me,getBlocker:Us,deleteBlocker:Vr,patchRoutes:xt,_internalFetchControllers:oe,_internalActiveDeferreds:K,_internalSetRoutes:zs},Me}function hI(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function yf(n,e,t,i,o,l,c,d){let p,y;if(c){p=[];for(let E of e)if(p.push(E),E.route.id===c){y=E;break}}else p=e,y=e[e.length-1];let _=Xc(o||".",Jc(p,l),Ni(n.pathname,t)||n.pathname,d==="path");if(o==null&&(_.search=n.search,_.hash=n.hash),(o==null||o===""||o===".")&&y){let E=Xf(_.search);if(y.route.index&&!E)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!y.route.index&&E){let T=new URLSearchParams(_.search),P=T.getAll("index");T.delete("index"),P.filter(j=>j).forEach(j=>T.append("index",j));let L=T.toString();_.search=L?"?"+L:""}}return i&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Ai([t,_.pathname])),mo(_)}function gy(n,e,t,i){if(!i||!hI(i))return{path:t};if(i.formMethod&&!II(i.formMethod))return{path:t,error:jn(405,{method:i.formMethod})};let o=()=>({path:t,error:jn(400,{type:"invalid-body"})}),l=i.formMethod||"get",c=n?l.toUpperCase():l.toLowerCase(),d=P_(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!br(c))return o();let T=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((P,L)=>{let[j,H]=L;return""+P+j+"="+H+`
`},""):String(i.body);return{path:t,submission:{formMethod:c,formAction:d,formEncType:i.formEncType,formData:void 0,json:void 0,text:T}}}else if(i.formEncType==="application/json"){if(!br(c))return o();try{let T=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:c,formAction:d,formEncType:i.formEncType,formData:void 0,json:T,text:void 0}}}catch{return o()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let p,y;if(i.formData)p=_f(i.formData),y=i.formData;else if(i.body instanceof FormData)p=_f(i.body),y=i.body;else if(i.body instanceof URLSearchParams)p=i.body,y=Ty(p);else if(i.body==null)p=new URLSearchParams,y=new FormData;else try{p=new URLSearchParams(i.body),y=Ty(p)}catch{return o()}let _={formMethod:c,formAction:d,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(br(_.formMethod))return{path:t,submission:_};let E=bs(t);return e&&E.search&&Xf(E.search)&&p.append("index",""),E.search="?"+p,{path:mo(E),submission:_}}function yy(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function vy(n,e,t,i,o,l,c,d,p,y,_,E,T,P,L,j){let H=j?er(j[1])?j[1].error:j[1].data:void 0,fe=n.createURL(e.location),ee=n.createURL(o),ce=t;l&&e.errors?ce=yy(t,Object.keys(e.errors)[0],!0):j&&er(j[1])&&(ce=yy(t,j[0]));let pe=j?j[1].statusCode:void 0,Fe=c&&pe&&pe>=400,Me=ce.filter((C,A)=>{let{route:N}=C;if(N.lazy)return!0;if(N.loader==null)return!1;if(l)return vf(N,e.loaderData,e.errors);if(dI(e.loaderData,e.matches[A],C)||p.some(x=>x===C.route.id))return!0;let O=e.matches[A],V=C;return _y(C,Pt({currentUrl:fe,currentParams:O.params,nextUrl:ee,nextParams:V.params},i,{actionResult:H,actionStatus:pe,defaultShouldRevalidate:Fe?!1:d||fe.pathname+fe.search===ee.pathname+ee.search||fe.search!==ee.search||S_(O,V)}))}),S=[];return E.forEach((C,A)=>{if(l||!t.some(Ge=>Ge.route.id===C.routeId)||_.has(A))return;let N=lo(P,C.path,L);if(!N){S.push({key:A,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let O=e.fetchers.get(A),V=gl(N,C.path),x=!1;T.has(A)?x=!1:y.has(A)?(y.delete(A),x=!0):O&&O.state!=="idle"&&O.data===void 0?x=d:x=_y(V,Pt({currentUrl:fe,currentParams:e.matches[e.matches.length-1].params,nextUrl:ee,nextParams:t[t.length-1].params},i,{actionResult:H,actionStatus:pe,defaultShouldRevalidate:Fe?!1:d})),x&&S.push({key:A,routeId:C.routeId,path:C.path,matches:N,match:V,controller:new AbortController})}),[Me,S]}function vf(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function dI(n,e,t){let i=!e||t.route.id!==e.route.id,o=n[t.route.id]===void 0;return i||o}function S_(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function _y(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function wy(n,e,t,i,o){var l;let c;if(n){let y=i[n];Ke(y,"No route found to patch children into: routeId = "+n),y.children||(y.children=[]),c=y.children}else c=t;let d=e.filter(y=>!c.some(_=>C_(y,_))),p=Cc(d,o,[n||"_","patch",String(((l=c)==null?void 0:l.length)||"0")],i);c.push(...p)}function C_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(l=>C_(t,l))}):!1}async function fI(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Ke(o,"No route found in manifest");let l={};for(let c in i){let p=o[c]!==void 0&&c!=="hasErrorBoundary";wa(!p,'Route "'+o.id+'" has a static property "'+c+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+c+'" will be ignored.')),!p&&!MT.has(c)&&(l[c]=i[c])}Object.assign(o,l),Object.assign(o,Pt({},e(o),{lazy:void 0}))}async function pI(n){let{matches:e}=n,t=e.filter(o=>o.shouldLoad);return(await Promise.all(t.map(o=>o.resolve()))).reduce((o,l,c)=>Object.assign(o,{[t[c].route.id]:l}),{})}async function mI(n,e,t,i,o,l,c,d,p,y){let _=l.map(P=>P.route.lazy?fI(P.route,p,d):void 0),E=l.map((P,L)=>{let j=_[L],H=o.some(ee=>ee.route.id===P.route.id);return Pt({},P,{shouldLoad:H,resolve:async ee=>(ee&&i.method==="GET"&&(P.route.lazy||P.route.loader)&&(H=!0),H?gI(e,i,P,j,ee,y):Promise.resolve({type:gt.data,result:void 0}))})}),T=await n({matches:E,request:i,params:l[0].params,fetcherKey:c,context:y});try{await Promise.all(_)}catch{}return T}async function gI(n,e,t,i,o,l){let c,d,p=y=>{let _,E=new Promise((L,j)=>_=j);d=()=>_(),e.signal.addEventListener("abort",d);let T=L=>typeof y!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):y({request:e,params:t.params,context:l},...L!==void 0?[L]:[]),P=(async()=>{try{return{type:"data",result:await(o?o(j=>T(j)):T())}}catch(L){return{type:"error",result:L}}})();return Promise.race([P,E])};try{let y=t.route[n];if(i)if(y){let _,[E]=await Promise.all([p(y).catch(T=>{_=T}),i]);if(_!==void 0)throw _;c=E}else if(await i,y=t.route[n],y)c=await p(y);else if(n==="action"){let _=new URL(e.url),E=_.pathname+_.search;throw jn(405,{method:e.method,pathname:E,routeId:t.route.id})}else return{type:gt.data,result:void 0};else if(y)c=await p(y);else{let _=new URL(e.url),E=_.pathname+_.search;throw jn(404,{pathname:E})}Ke(c.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(y){return{type:gt.error,result:y}}finally{d&&e.signal.removeEventListener("abort",d)}return c}async function yI(n){let{result:e,type:t}=n;if(R_(e)){let E;try{let T=e.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?e.body==null?E=null:E=await e.json():E=await e.text()}catch(T){return{type:gt.error,error:T}}return t===gt.error?{type:gt.error,error:new Rc(e.status,e.statusText,E),statusCode:e.status,headers:e.headers}:{type:gt.data,data:E,statusCode:e.status,headers:e.headers}}if(t===gt.error){if(Ry(e)){var i,o;if(e.data instanceof Error){var l,c;return{type:gt.error,error:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:gt.error,error:new Rc(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:kl(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:gt.error,error:e,statusCode:kl(e)?e.status:void 0}}if(TI(e)){var d,p;return{type:gt.deferred,deferredData:e,statusCode:(d=e.init)==null?void 0:d.status,headers:((p=e.init)==null?void 0:p.headers)&&new Headers(e.init.headers)}}if(Ry(e)){var y,_;return{type:gt.data,data:e.data,statusCode:(y=e.init)==null?void 0:y.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:gt.data,data:e}}function vI(n,e,t,i,o,l){let c=n.headers.get("Location");if(Ke(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!Yf.test(c)){let d=i.slice(0,i.findIndex(p=>p.route.id===t)+1);c=yf(new URL(e.url),d,o,!0,c,l),n.headers.set("Location",c)}return n}function Ey(n,e,t){if(Yf.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=Ni(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return n}function la(n,e,t,i){let o=n.createURL(P_(e)).toString(),l={signal:t};if(i&&br(i.formMethod)){let{formMethod:c,formEncType:d}=i;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(i.json)):d==="text/plain"?l.body=i.text:d==="application/x-www-form-urlencoded"&&i.formData?l.body=_f(i.formData):l.body=i.formData}return new Request(o,l)}function _f(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Ty(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function _I(n,e,t,i,o){let l={},c=null,d,p=!1,y={},_=t&&er(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let T=E.route.id,P=e[T];if(Ke(!ho(P),"Cannot handle redirect results in processLoaderData"),er(P)){let L=P.error;_!==void 0&&(L=_,_=void 0),c=c||{};{let j=uo(n,T);c[j.route.id]==null&&(c[j.route.id]=L)}l[T]=void 0,p||(p=!0,d=kl(P.error)?P.error.status:500),P.headers&&(y[T]=P.headers)}else vs(P)?(i.set(T,P.deferredData),l[T]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!p&&(d=P.statusCode),P.headers&&(y[T]=P.headers)):(l[T]=P.data,P.statusCode&&P.statusCode!==200&&!p&&(d=P.statusCode),P.headers&&(y[T]=P.headers))}),_!==void 0&&t&&(c={[t[0]]:_},l[t[0]]=void 0),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:y}}function Iy(n,e,t,i,o,l,c){let{loaderData:d,errors:p}=_I(e,t,i,c);return o.forEach(y=>{let{key:_,match:E,controller:T}=y,P=l[_];if(Ke(P,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(er(P)){let L=uo(n.matches,E?.route.id);p&&p[L.route.id]||(p=Pt({},p,{[L.route.id]:P.error})),n.fetchers.delete(_)}else if(ho(P))Ke(!1,"Unhandled fetcher revalidation redirect");else if(vs(P))Ke(!1,"Unhandled fetcher deferred data");else{let L=fs(P.data);n.fetchers.set(_,L)}}),{loaderData:d,errors:p}}function Sy(n,e,t,i){let o=Pt({},e);for(let l of t){let c=l.route.id;if(e.hasOwnProperty(c)?e[c]!==void 0&&(o[c]=e[c]):n[c]!==void 0&&l.route.loader&&(o[c]=n[c]),i&&i.hasOwnProperty(c))break}return o}function Cy(n){return n?er(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function uo(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Py(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function jn(n,e){let{pathname:t,routeId:i,method:o,type:l,message:c}=e===void 0?{}:e,d="Unknown Server Error",p="Unknown @remix-run/router error";return n===400?(d="Bad Request",o&&t&&i?p="You made a "+o+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":l==="defer-action"?p="defer() is not supported in actions":l==="invalid-body"&&(p="Unable to encode submission body")):n===403?(d="Forbidden",p='Route "'+i+'" does not match URL "'+t+'"'):n===404?(d="Not Found",p='No route matches URL "'+t+'"'):n===405&&(d="Method Not Allowed",o&&t&&i?p="You made a "+o.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":o&&(p='Invalid request method "'+o.toUpperCase()+'"')),new Rc(n||500,d,new Error(p),!0)}function ac(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(ho(o))return{key:i,result:o}}}function P_(n){let e=typeof n=="string"?bs(n):n;return mo(Pt({},e,{hash:""}))}function wI(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function EI(n){return R_(n.result)&&oI.has(n.result.status)}function vs(n){return n.type===gt.deferred}function er(n){return n.type===gt.error}function ho(n){return(n&&n.type)===gt.redirect}function Ry(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function TI(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function R_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function II(n){return sI.has(n.toLowerCase())}function br(n){return rI.has(n.toLowerCase())}async function SI(n,e,t,i,o){let l=Object.entries(e);for(let c=0;c<l.length;c++){let[d,p]=l[c],y=n.find(T=>T?.route.id===d);if(!y)continue;let _=i.find(T=>T.route.id===y.route.id),E=_!=null&&!S_(_,y)&&(o&&o[y.route.id])!==void 0;vs(p)&&E&&await Jf(p,t,!1).then(T=>{T&&(e[d]=T)})}}async function CI(n,e,t){for(let i=0;i<t.length;i++){let{key:o,routeId:l,controller:c}=t[i],d=e[o];n.find(y=>y?.route.id===l)&&vs(d)&&(Ke(c,"Expected an AbortController for revalidating fetcher deferred result"),await Jf(d,c.signal,!0).then(y=>{y&&(e[o]=y)}))}}async function Jf(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:gt.data,data:n.deferredData.unwrappedData}}catch(o){return{type:gt.error,error:o}}return{type:gt.data,data:n.deferredData.data}}}function Xf(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function gl(n,e){let t=typeof e=="string"?bs(e).search:e.search;if(n[n.length-1].route.index&&Xf(t||""))return n[n.length-1];let i=E_(n);return i[i.length-1]}function Ay(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:l,json:c}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function sf(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function PI(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function pl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function RI(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function fs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function AI(n,e){try{let t=n.sessionStorage.getItem(I_);if(t){let i=JSON.parse(t);for(let[o,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function xI(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(I_,JSON.stringify(t))}catch(i){wa(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ac.apply(this,arguments)}const zl=X.createContext(null),Zf=X.createContext(null),Mi=X.createContext(null),ep=X.createContext(null),li=X.createContext({outlet:null,matches:[],isDataRoute:!1}),A_=X.createContext(null);function kI(n,e){let{relative:t}=e===void 0?{}:e;Aa()||Ke(!1);let{basename:i,navigator:o}=X.useContext(Mi),{hash:l,pathname:c,search:d}=Zc(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:Ai([i,c])),o.createHref({pathname:p,search:d,hash:l})}function Aa(){return X.useContext(ep)!=null}function xa(){return Aa()||Ke(!1),X.useContext(ep).location}function x_(n){X.useContext(Mi).static||X.useLayoutEffect(n)}function Bl(){let{isDataRoute:n}=X.useContext(li);return n?WI():NI()}function NI(){Aa()||Ke(!1);let n=X.useContext(zl),{basename:e,future:t,navigator:i}=X.useContext(Mi),{matches:o}=X.useContext(li),{pathname:l}=xa(),c=JSON.stringify(Jc(o,t.v7_relativeSplatPath)),d=X.useRef(!1);return x_(()=>{d.current=!0}),X.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=Xc(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ai([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,c,l,n])}const bI=X.createContext(null);function DI(n){let e=X.useContext(li).outlet;return e&&X.createElement(bI.Provider,{value:n},e)}function OI(){let{matches:n}=X.useContext(li),e=n[n.length-1];return e?e.params:{}}function Zc(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=X.useContext(Mi),{matches:o}=X.useContext(li),{pathname:l}=xa(),c=JSON.stringify(Jc(o,i.v7_relativeSplatPath));return X.useMemo(()=>Xc(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function LI(n,e,t,i){Aa()||Ke(!1);let{navigator:o}=X.useContext(Mi),{matches:l}=X.useContext(li),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=xa(),_;_=y;let E=_.pathname||"/",T=E;if(p!=="/"){let j=p.replace(/^\//,"").split("/");T="/"+E.replace(/^\//,"").split("/").slice(j.length).join("/")}let P=lo(n,{pathname:T});return jI(P&&P.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:Ai([p,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:Ai([p,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,t,i)}function VI(){let n=HI(),e=kl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:o},t):null,null)}const MI=X.createElement(VI,null);class FI extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(li.Provider,{value:this.props.routeContext},X.createElement(A_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UI(n){let{routeContext:e,match:t,children:i}=n,o=X.useContext(zl);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(li.Provider,{value:e},i)}function jI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=c.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||Ke(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:T,errors:P}=t,L=E.route.loader&&T[E.route.id]===void 0&&(!P||P[E.route.id]===void 0);if(E.route.lazy||L){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,E,T)=>{let P,L=!1,j=null,H=null;t&&(P=d&&E.route.id?d[E.route.id]:void 0,j=E.route.errorElement||MI,p&&(y<0&&T===0?(qI("route-fallback"),L=!0,H=null):y===T&&(L=!0,H=E.route.hydrateFallbackElement||null)));let fe=e.concat(c.slice(0,T+1)),ee=()=>{let ce;return P?ce=j:L?ce=H:E.route.Component?ce=X.createElement(E.route.Component,null):E.route.element?ce=E.route.element:ce=_,X.createElement(UI,{match:E,routeContext:{outlet:_,matches:fe,isDataRoute:t!=null},children:ce})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?X.createElement(FI,{location:t.location,revalidation:t.revalidation,component:j,error:P,children:ee(),routeContext:{outlet:null,matches:fe,isDataRoute:!0}}):ee()},null)}var k_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(k_||{}),N_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(N_||{});function zI(n){let e=X.useContext(zl);return e||Ke(!1),e}function BI(n){let e=X.useContext(Zf);return e||Ke(!1),e}function $I(n){let e=X.useContext(li);return e||Ke(!1),e}function b_(n){let e=$I(),t=e.matches[e.matches.length-1];return t.route.id||Ke(!1),t.route.id}function HI(){var n;let e=X.useContext(A_),t=BI(N_.UseRouteError),i=b_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function WI(){let{router:n}=zI(k_.UseNavigateStable),e=b_(),t=X.useRef(!1);return x_(()=>{t.current=!0}),X.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Ac({fromRouteId:e},l)))},[n,e])}const xy={};function qI(n,e,t){xy[n]||(xy[n]=!0)}function GI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function KI(n){let{to:e,replace:t,state:i,relative:o}=n;Aa()||Ke(!1);let{future:l,static:c}=X.useContext(Mi),{matches:d}=X.useContext(li),{pathname:p}=xa(),y=Bl(),_=Xc(e,Jc(d,l.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return X.useEffect(()=>y(JSON.parse(E),{replace:t,state:i,relative:o}),[y,E,o,t,i]),null}function QI(n){return DI(n.context)}function YI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Bt.Pop,navigator:l,static:c=!1,future:d}=n;Aa()&&Ke(!1);let p=e.replace(/^\/*/,"/"),y=X.useMemo(()=>({basename:p,navigator:l,static:c,future:Ac({v7_relativeSplatPath:!1},d)}),[p,d,l,c]);typeof i=="string"&&(i=bs(i));let{pathname:_="/",search:E="",hash:T="",state:P=null,key:L="default"}=i,j=X.useMemo(()=>{let H=Ni(_,p);return H==null?null:{location:{pathname:H,search:E,hash:T,state:P,key:L},navigationType:o}},[p,_,E,T,P,L,o]);return j==null?null:X.createElement(Mi.Provider,{value:y},X.createElement(ep.Provider,{children:t,value:j}))}new Promise(()=>{});function JI(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:X.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:X.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:X.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ea.apply(this,arguments)}function D_(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function XI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZI(n,e){return n.button===0&&(!e||e==="_self")&&!XI(n)}const eS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],nS="6";try{window.__reactRouterVersion=nS}catch{}function rS(n,e){return cI({basename:void 0,future:Ea({},void 0,{v7_prependBasename:!0}),history:OT({window:void 0}),hydrationData:iS(),routes:n,mapRouteProperties:JI,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function iS(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ea({},e,{errors:sS(e.errors)})),e}function sS(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new Rc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let c=new l(o.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(o.message);l.stack="",t[i]=l}}else t[i]=o;return t}const O_=X.createContext({isTransitioning:!1}),oS=X.createContext(new Map),aS="startTransition",ky=CT[aS],lS="flushSync",Ny=DT[lS];function uS(n){ky?ky(n):n()}function ml(n){Ny?Ny(n):n()}let cS=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function hS(n){let{fallbackElement:e,router:t,future:i}=n,[o,l]=X.useState(t.state),[c,d]=X.useState(),[p,y]=X.useState({isTransitioning:!1}),[_,E]=X.useState(),[T,P]=X.useState(),[L,j]=X.useState(),H=X.useRef(new Map),{v7_startTransition:fe}=i||{},ee=X.useCallback(C=>{fe?uS(C):C()},[fe]),ce=X.useCallback((C,A)=>{let{deletedFetchers:N,flushSync:O,viewTransitionOpts:V}=A;C.fetchers.forEach((Ge,ut)=>{Ge.data!==void 0&&H.current.set(ut,Ge.data)}),N.forEach(Ge=>H.current.delete(Ge));let x=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!V||x){O?ml(()=>l(C)):ee(()=>l(C));return}if(O){ml(()=>{T&&(_&&_.resolve(),T.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let Ge=t.window.document.startViewTransition(()=>{ml(()=>l(C))});Ge.finished.finally(()=>{ml(()=>{E(void 0),P(void 0),d(void 0),y({isTransitioning:!1})})}),ml(()=>P(Ge));return}T?(_&&_.resolve(),T.skipTransition(),j({state:C,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(d(C),y({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[t.window,T,_,H,ee]);X.useLayoutEffect(()=>t.subscribe(ce),[t,ce]),X.useEffect(()=>{p.isTransitioning&&!p.flushSync&&E(new cS)},[p]),X.useEffect(()=>{if(_&&c&&t.window){let C=c,A=_.promise,N=t.window.document.startViewTransition(async()=>{ee(()=>l(C)),await A});N.finished.finally(()=>{E(void 0),P(void 0),d(void 0),y({isTransitioning:!1})}),P(N)}},[ee,c,_,t.window]),X.useEffect(()=>{_&&c&&o.location.key===c.location.key&&_.resolve()},[_,T,o.location,c]),X.useEffect(()=>{!p.isTransitioning&&L&&(d(L.state),y({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),j(void 0))},[p.isTransitioning,L]),X.useEffect(()=>{},[]);let pe=X.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:C=>t.navigate(C),push:(C,A,N)=>t.navigate(C,{state:A,preventScrollReset:N?.preventScrollReset}),replace:(C,A,N)=>t.navigate(C,{replace:!0,state:A,preventScrollReset:N?.preventScrollReset})}),[t]),Fe=t.basename||"/",Me=X.useMemo(()=>({router:t,navigator:pe,static:!1,basename:Fe}),[t,pe,Fe]),S=X.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return X.useEffect(()=>GI(i,t.future),[i,t.future]),X.createElement(X.Fragment,null,X.createElement(zl.Provider,{value:Me},X.createElement(Zf.Provider,{value:o},X.createElement(oS.Provider,{value:H.current},X.createElement(O_.Provider,{value:p},X.createElement(YI,{basename:Fe,location:o.location,navigationType:o.historyAction,navigator:pe,future:S},o.initialized||t.future.v7_partialHydration?X.createElement(dS,{routes:t.routes,future:t.future,state:o}):e))))),null)}const dS=X.memo(fS);function fS(n){let{routes:e,future:t,state:i}=n;return LI(e,void 0,i,t)}const pS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L_=X.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:d,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,T=D_(e,eS),{basename:P}=X.useContext(Mi),L,j=!1;if(typeof y=="string"&&mS.test(y)&&(L=y,pS))try{let ce=new URL(window.location.href),pe=y.startsWith("//")?new URL(ce.protocol+y):new URL(y),Fe=Ni(pe.pathname,P);pe.origin===ce.origin&&Fe!=null?y=Fe+pe.search+pe.hash:j=!0}catch{}let H=kI(y,{relative:o}),fe=vS(y,{replace:c,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function ee(ce){i&&i(ce),ce.defaultPrevented||fe(ce)}return X.createElement("a",Ea({},T,{href:L||H,onClick:j||l?i:ee,ref:t,target:p}))}),gS=X.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:c=!1,style:d,to:p,viewTransition:y,children:_}=e,E=D_(e,tS),T=Zc(p,{relative:E.relative}),P=xa(),L=X.useContext(Zf),{navigator:j,basename:H}=X.useContext(Mi),fe=L!=null&&_S(T)&&y===!0,ee=j.encodeLocation?j.encodeLocation(T).pathname:T.pathname,ce=P.pathname,pe=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;o||(ce=ce.toLowerCase(),pe=pe?pe.toLowerCase():null,ee=ee.toLowerCase()),pe&&H&&(pe=Ni(pe,H)||pe);const Fe=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Me=ce===ee||!c&&ce.startsWith(ee)&&ce.charAt(Fe)==="/",S=pe!=null&&(pe===ee||!c&&pe.startsWith(ee)&&pe.charAt(ee.length)==="/"),C={isActive:Me,isPending:S,isTransitioning:fe},A=Me?i:void 0,N;typeof l=="function"?N=l(C):N=[l,Me?"active":null,S?"pending":null,fe?"transitioning":null].filter(Boolean).join(" ");let O=typeof d=="function"?d(C):d;return X.createElement(L_,Ea({},E,{"aria-current":A,className:N,ref:t,style:O,to:p,viewTransition:y}),typeof _=="function"?_(C):_)});var wf;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(wf||(wf={}));var by;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(by||(by={}));function yS(n){let e=X.useContext(zl);return e||Ke(!1),e}function vS(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,p=Bl(),y=xa(),_=Zc(n,{relative:c});return X.useCallback(E=>{if(ZI(E,t)){E.preventDefault();let T=i!==void 0?i:mo(y)===mo(_);p(n,{replace:T,state:o,preventScrollReset:l,relative:c,viewTransition:d})}},[y,p,_,i,o,t,n,l,c,d])}function _S(n,e){e===void 0&&(e={});let t=X.useContext(O_);t==null&&Ke(!1);let{basename:i}=yS(wf.useViewTransitionState),o=Zc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ni(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ni(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Pc(o.pathname,c)!=null||Pc(o.pathname,l)!=null}function wS(){const n=[{label:" Dashboard",path:"/app"},{label:" Theme Drafts",path:"/app/drafts/themes"},{label:" Story Drafts",path:"/app/drafts/stories"},{label:" Prompt Lab",path:"/app/promptlab"}];return R.jsxs("div",{className:"min-h-screen flex bg-gray-100 text-gray-800",children:[R.jsxs("aside",{className:"w-64 bg-white shadow-md flex flex-col",children:[R.jsxs("div",{className:"p-5 border-b",children:[R.jsx("h1",{className:"text-2xl font-bold text-blue-700",children:"WaitWhat? CMS"}),R.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editorial Console"})]}),R.jsx("nav",{className:"flex-1 p-4 space-y-1",children:n.map(e=>R.jsx(gS,{to:e.path,className:({isActive:t})=>`block px-4 py-2 rounded-md transition ${t?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:e.label},e.path))}),R.jsx("div",{className:"p-4 border-t text-center text-xs text-gray-500",children:R.jsxs("p",{children:[" ",new Date().getFullYear()," WaitWhat?"]})})]}),R.jsxs("main",{className:"flex-1 overflow-y-auto",children:[R.jsxs("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[R.jsx("h2",{className:"text-lg font-semibold",children:"Content Manager"}),R.jsx("a",{href:"https://waitwhat.news",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View Live Site "})]}),R.jsx("div",{className:"p-6",children:R.jsx(QI,{})})]})]})}const ES=()=>{};var Dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},TS=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},M_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let T=(d&15)<<2|y>>6,P=y&63;p||(P=64,c||(T=64)),i.push(t[_],t[E],t[T],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||y==null||E==null)throw new IS;const T=l<<2|d>>4;if(i.push(T),y!==64){const P=d<<4&240|y>>2;if(i.push(P),E!==64){const L=y<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SS=function(n){const e=V_(n);return M_.encodeByteArray(e,!0)},xc=function(n){return SS(n).replace(/\./g,"")},F_=function(n){try{return M_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=()=>CS().__FIREBASE_DEFAULTS__,RS=()=>{if(typeof process>"u"||typeof Dy>"u")return;const n=Dy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&F_(n[1]);return e&&JSON.parse(e)},eh=()=>{try{return ES()||PS()||RS()||AS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},U_=n=>{var e,t;return(t=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},j_=n=>{const e=U_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},z_=()=>{var n;return(n=eh())===null||n===void 0?void 0:n.config},B_=n=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tp(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xc(JSON.stringify(t)),xc(JSON.stringify(c)),""].join(".")}const Il={};function NS(){const n={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?n.emulator.push(e):n.prod.push(e);return n}function bS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Oy=!1;function np(n,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||Il[n]===e||Il[n]||Oy)return;Il[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=NS().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Oy=!0,c()},T}function _(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=bS(i),P=t("text"),L=document.getElementById(P)||document.createElement("span"),j=t("learnmore"),H=document.getElementById(j)||document.createElement("a"),fe=t("preprendIcon"),ee=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ce=T.element;d(ce),_(H,j);const pe=y();p(ee,fe),ce.append(ee,L,H,pe),document.body.appendChild(ce)}l?(L.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function OS(){var n;const e=(n=eh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FS(){const n=In();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function US(){return!OS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function zS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="FirebaseError";class ui extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=BS,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?$S(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ui(o,d,i)}}function $S(n,e){return n.replace(HS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const HS=/\{\$([^}]+)}/g;function WS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function go(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(Ly(l)&&Ly(c)){if(!go(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ly(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function vl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qS(n,e){const t=new GS(n,e);return t.subscribe.bind(t)}class GS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");KS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=of),o.error===void 0&&(o.error=of),o.complete===void 0&&(o.complete=of);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n){return n&&n._delegate?n._delegate:n}class Ss{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new xS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JS(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:YS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YS(n){return n===ao?void 0:n}function JS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new QS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(tt||(tt={}));const ZS={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},eC=tt.INFO,tC={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},nC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=tC[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=eC,this._logHandler=nC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const rC=(n,e)=>e.some(t=>n instanceof t);let Vy,My;function iC(){return Vy||(Vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sC(){return My||(My=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $_=new WeakMap,Ef=new WeakMap,H_=new WeakMap,af=new WeakMap,ip=new WeakMap;function oC(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ws(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&$_.set(t,n)}).catch(()=>{}),ip.set(e,n),e}function aC(n){if(Ef.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ef.set(n,e)}let Tf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ef.get(n);if(e==="objectStoreNames")return n.objectStoreNames||H_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lC(n){Tf=n(Tf)}function uC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(lf(this),e,...t);return H_.set(i,e.sort?e.sort():[e]),ws(i)}:sC().includes(n)?function(...e){return n.apply(lf(this),e),ws($_.get(this))}:function(...e){return ws(n.apply(lf(this),e))}}function cC(n){return typeof n=="function"?uC(n):(n instanceof IDBTransaction&&aC(n),rC(n,iC())?new Proxy(n,Tf):n)}function ws(n){if(n instanceof IDBRequest)return oC(n);if(af.has(n))return af.get(n);const e=cC(n);return e!==n&&(af.set(n,e),ip.set(e,n)),e}const lf=n=>ip.get(n);function hC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=ws(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ws(c.result),p.oldVersion,p.newVersion,ws(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const dC=["get","getKey","getAll","getAllKeys","count"],fC=["put","add","delete","clear"],uf=new Map;function Fy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=fC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return uf.set(e,l),l}lC(n=>({...n,get:(e,t,i)=>Fy(e,t)||n.get(e,t,i),has:(e,t)=>!!Fy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function mC(n){const e=n.getComponent();return e?.type==="VERSION"}const If="@firebase/app",Uy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new rp("@firebase/app"),gC="@firebase/app-compat",yC="@firebase/analytics-compat",vC="@firebase/analytics",_C="@firebase/app-check-compat",wC="@firebase/app-check",EC="@firebase/auth",TC="@firebase/auth-compat",IC="@firebase/database",SC="@firebase/data-connect",CC="@firebase/database-compat",PC="@firebase/functions",RC="@firebase/functions-compat",AC="@firebase/installations",xC="@firebase/installations-compat",kC="@firebase/messaging",NC="@firebase/messaging-compat",bC="@firebase/performance",DC="@firebase/performance-compat",OC="@firebase/remote-config",LC="@firebase/remote-config-compat",VC="@firebase/storage",MC="@firebase/storage-compat",FC="@firebase/firestore",UC="@firebase/ai",jC="@firebase/firestore-compat",zC="firebase",BC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]",$C={[If]:"fire-core",[gC]:"fire-core-compat",[vC]:"fire-analytics",[yC]:"fire-analytics-compat",[wC]:"fire-app-check",[_C]:"fire-app-check-compat",[EC]:"fire-auth",[TC]:"fire-auth-compat",[IC]:"fire-rtdb",[SC]:"fire-data-connect",[CC]:"fire-rtdb-compat",[PC]:"fire-fn",[RC]:"fire-fn-compat",[AC]:"fire-iid",[xC]:"fire-iid-compat",[kC]:"fire-fcm",[NC]:"fire-fcm-compat",[bC]:"fire-perf",[DC]:"fire-perf-compat",[OC]:"fire-rc",[LC]:"fire-rc-compat",[VC]:"fire-gcs",[MC]:"fire-gcs-compat",[FC]:"fire-fst",[jC]:"fire-fst-compat",[UC]:"fire-vertex","fire-js":"fire-js",[zC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Map,HC=new Map,Cf=new Map;function jy(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yo(n){const e=n.name;if(Cf.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,n);for(const t of kc.values())jy(t,n);for(const t of HC.values())jy(t,n);return!0}function th(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new $l("app","Firebase",WC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=BC;function W_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Sf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(t||(t=z_()),!t)throw Es.create("no-options");const l=kc.get(o);if(l){if(go(t,l.options)&&go(i,l.config))return l;throw Es.create("duplicate-app",{appName:o})}const c=new XS(o);for(const p of Cf.values())c.addComponent(p);const d=new qC(t,i,c);return kc.set(o,d),d}function sp(n=Sf){const e=kc.get(n);if(!e&&n===Sf&&z_())return W_();if(!e)throw Es.create("no-app",{appName:n});return e}function Xr(n,e,t){var i;let o=(i=$C[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(d.join(" "));return}yo(new Ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firebase-heartbeat-database",KC=1,Nl="firebase-heartbeat-store";let cf=null;function q_(){return cf||(cf=hC(GC,KC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Es.create("idb-open",{originalErrorMessage:n.message})})),cf}async function QC(n){try{const t=(await q_()).transaction(Nl),i=await t.objectStore(Nl).get(G_(n));return await t.done,i}catch(e){if(e instanceof ui)bi.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e?.message});bi.warn(t.message)}}}async function zy(n,e){try{const i=(await q_()).transaction(Nl,"readwrite");await i.objectStore(Nl).put(e,G_(n)),await i.done}catch(t){if(t instanceof ui)bi.warn(t.message);else{const i=Es.create("idb-set",{originalErrorMessage:t?.message});bi.warn(i.message)}}}function G_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=1024,JC=30;class XC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=By();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>JC){const c=t1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=By(),{heartbeatsToSend:i,unsentEntries:o}=ZC(this._heartbeatsCache.heartbeats),l=xc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bi.warn(t),""}}}function By(){return new Date().toISOString().substring(0,10)}function ZC(n,e=YC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),$y(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),$y(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class e1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?zS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $y(n){return xc(JSON.stringify({version:2,heartbeats:n})).length}function t1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(n){yo(new Ss("platform-logger",e=>new pC(e),"PRIVATE")),yo(new Ss("heartbeat",e=>new XC(e),"PRIVATE")),Xr(If,Uy,n),Xr(If,Uy,"esm2017"),Xr("fire-js","")}n1("");var r1="firebase",i1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(r1,i1,"app");var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,K_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(N,O,V){for(var x=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)x[Ge-2]=arguments[Ge];return C.prototype[O].apply(N,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,C,A){A||(A=0);var N=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)N[O]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(O=0;16>O;++O)N[O]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],O=S.g[2];var V=S.g[3],x=C+(V^A&(O^V))+N[0]+3614090360&4294967295;C=A+(x<<7&4294967295|x>>>25),x=V+(O^C&(A^O))+N[1]+3905402710&4294967295,V=C+(x<<12&4294967295|x>>>20),x=O+(A^V&(C^A))+N[2]+606105819&4294967295,O=V+(x<<17&4294967295|x>>>15),x=A+(C^O&(V^C))+N[3]+3250441966&4294967295,A=O+(x<<22&4294967295|x>>>10),x=C+(V^A&(O^V))+N[4]+4118548399&4294967295,C=A+(x<<7&4294967295|x>>>25),x=V+(O^C&(A^O))+N[5]+1200080426&4294967295,V=C+(x<<12&4294967295|x>>>20),x=O+(A^V&(C^A))+N[6]+2821735955&4294967295,O=V+(x<<17&4294967295|x>>>15),x=A+(C^O&(V^C))+N[7]+4249261313&4294967295,A=O+(x<<22&4294967295|x>>>10),x=C+(V^A&(O^V))+N[8]+1770035416&4294967295,C=A+(x<<7&4294967295|x>>>25),x=V+(O^C&(A^O))+N[9]+2336552879&4294967295,V=C+(x<<12&4294967295|x>>>20),x=O+(A^V&(C^A))+N[10]+4294925233&4294967295,O=V+(x<<17&4294967295|x>>>15),x=A+(C^O&(V^C))+N[11]+2304563134&4294967295,A=O+(x<<22&4294967295|x>>>10),x=C+(V^A&(O^V))+N[12]+1804603682&4294967295,C=A+(x<<7&4294967295|x>>>25),x=V+(O^C&(A^O))+N[13]+4254626195&4294967295,V=C+(x<<12&4294967295|x>>>20),x=O+(A^V&(C^A))+N[14]+2792965006&4294967295,O=V+(x<<17&4294967295|x>>>15),x=A+(C^O&(V^C))+N[15]+1236535329&4294967295,A=O+(x<<22&4294967295|x>>>10),x=C+(O^V&(A^O))+N[1]+4129170786&4294967295,C=A+(x<<5&4294967295|x>>>27),x=V+(A^O&(C^A))+N[6]+3225465664&4294967295,V=C+(x<<9&4294967295|x>>>23),x=O+(C^A&(V^C))+N[11]+643717713&4294967295,O=V+(x<<14&4294967295|x>>>18),x=A+(V^C&(O^V))+N[0]+3921069994&4294967295,A=O+(x<<20&4294967295|x>>>12),x=C+(O^V&(A^O))+N[5]+3593408605&4294967295,C=A+(x<<5&4294967295|x>>>27),x=V+(A^O&(C^A))+N[10]+38016083&4294967295,V=C+(x<<9&4294967295|x>>>23),x=O+(C^A&(V^C))+N[15]+3634488961&4294967295,O=V+(x<<14&4294967295|x>>>18),x=A+(V^C&(O^V))+N[4]+3889429448&4294967295,A=O+(x<<20&4294967295|x>>>12),x=C+(O^V&(A^O))+N[9]+568446438&4294967295,C=A+(x<<5&4294967295|x>>>27),x=V+(A^O&(C^A))+N[14]+3275163606&4294967295,V=C+(x<<9&4294967295|x>>>23),x=O+(C^A&(V^C))+N[3]+4107603335&4294967295,O=V+(x<<14&4294967295|x>>>18),x=A+(V^C&(O^V))+N[8]+1163531501&4294967295,A=O+(x<<20&4294967295|x>>>12),x=C+(O^V&(A^O))+N[13]+2850285829&4294967295,C=A+(x<<5&4294967295|x>>>27),x=V+(A^O&(C^A))+N[2]+4243563512&4294967295,V=C+(x<<9&4294967295|x>>>23),x=O+(C^A&(V^C))+N[7]+1735328473&4294967295,O=V+(x<<14&4294967295|x>>>18),x=A+(V^C&(O^V))+N[12]+2368359562&4294967295,A=O+(x<<20&4294967295|x>>>12),x=C+(A^O^V)+N[5]+4294588738&4294967295,C=A+(x<<4&4294967295|x>>>28),x=V+(C^A^O)+N[8]+2272392833&4294967295,V=C+(x<<11&4294967295|x>>>21),x=O+(V^C^A)+N[11]+1839030562&4294967295,O=V+(x<<16&4294967295|x>>>16),x=A+(O^V^C)+N[14]+4259657740&4294967295,A=O+(x<<23&4294967295|x>>>9),x=C+(A^O^V)+N[1]+2763975236&4294967295,C=A+(x<<4&4294967295|x>>>28),x=V+(C^A^O)+N[4]+1272893353&4294967295,V=C+(x<<11&4294967295|x>>>21),x=O+(V^C^A)+N[7]+4139469664&4294967295,O=V+(x<<16&4294967295|x>>>16),x=A+(O^V^C)+N[10]+3200236656&4294967295,A=O+(x<<23&4294967295|x>>>9),x=C+(A^O^V)+N[13]+681279174&4294967295,C=A+(x<<4&4294967295|x>>>28),x=V+(C^A^O)+N[0]+3936430074&4294967295,V=C+(x<<11&4294967295|x>>>21),x=O+(V^C^A)+N[3]+3572445317&4294967295,O=V+(x<<16&4294967295|x>>>16),x=A+(O^V^C)+N[6]+76029189&4294967295,A=O+(x<<23&4294967295|x>>>9),x=C+(A^O^V)+N[9]+3654602809&4294967295,C=A+(x<<4&4294967295|x>>>28),x=V+(C^A^O)+N[12]+3873151461&4294967295,V=C+(x<<11&4294967295|x>>>21),x=O+(V^C^A)+N[15]+530742520&4294967295,O=V+(x<<16&4294967295|x>>>16),x=A+(O^V^C)+N[2]+3299628645&4294967295,A=O+(x<<23&4294967295|x>>>9),x=C+(O^(A|~V))+N[0]+4096336452&4294967295,C=A+(x<<6&4294967295|x>>>26),x=V+(A^(C|~O))+N[7]+1126891415&4294967295,V=C+(x<<10&4294967295|x>>>22),x=O+(C^(V|~A))+N[14]+2878612391&4294967295,O=V+(x<<15&4294967295|x>>>17),x=A+(V^(O|~C))+N[5]+4237533241&4294967295,A=O+(x<<21&4294967295|x>>>11),x=C+(O^(A|~V))+N[12]+1700485571&4294967295,C=A+(x<<6&4294967295|x>>>26),x=V+(A^(C|~O))+N[3]+2399980690&4294967295,V=C+(x<<10&4294967295|x>>>22),x=O+(C^(V|~A))+N[10]+4293915773&4294967295,O=V+(x<<15&4294967295|x>>>17),x=A+(V^(O|~C))+N[1]+2240044497&4294967295,A=O+(x<<21&4294967295|x>>>11),x=C+(O^(A|~V))+N[8]+1873313359&4294967295,C=A+(x<<6&4294967295|x>>>26),x=V+(A^(C|~O))+N[15]+4264355552&4294967295,V=C+(x<<10&4294967295|x>>>22),x=O+(C^(V|~A))+N[6]+2734768916&4294967295,O=V+(x<<15&4294967295|x>>>17),x=A+(V^(O|~C))+N[13]+1309151649&4294967295,A=O+(x<<21&4294967295|x>>>11),x=C+(O^(A|~V))+N[4]+4149444226&4294967295,C=A+(x<<6&4294967295|x>>>26),x=V+(A^(C|~O))+N[11]+3174756917&4294967295,V=C+(x<<10&4294967295|x>>>22),x=O+(C^(V|~A))+N[2]+718787259&4294967295,O=V+(x<<15&4294967295|x>>>17),x=A+(V^(O|~C))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+V&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,N=this.B,O=this.h,V=0;V<C;){if(O==0)for(;V<=A;)o(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<C;)if(N[O++]=S.charCodeAt(V++),O==this.blockSize){o(this,N),O=0;break}}else for(;V<C;)if(N[O++]=S[V++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var N=0;32>N;N+=8)S[A++]=this.g[C]>>>N&255;return S};function l(S,C){var A=d;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function c(S,C){this.h=C;for(var A=[],N=!0,O=S.length-1;0<=O;O--){var V=S[O]|0;N&&V==C||(A[O]=V,N=!1)}this.g=A}var d={};function p(S){return-128<=S&&128>S?l(S,function(C){return new c([C|0],0>C?-1:0)}):new c([S|0],0>S?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return E;if(0>S)return H(y(-S));for(var C=[],A=1,N=0;S>=A;N++)C[N]=S/A|0,A*=4294967296;return new c(C,0)}function _(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return H(_(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(C,8)),N=E,O=0;O<S.length;O+=8){var V=Math.min(8,S.length-O),x=parseInt(S.substring(O,O+V),C);8>V?(V=y(Math.pow(C,V)),N=N.j(V).add(y(x))):(N=N.j(A),N=N.add(y(x)))}return N}var E=p(0),T=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-H(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var N=this.i(A);S+=(0<=N?N:4294967296+N)*C,C*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(j(this))return"-"+H(this).toString(S);for(var C=y(Math.pow(S,6)),A=this,N="";;){var O=pe(A,C).g;A=fe(A,O.j(C));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=O,L(A))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function j(S){return S.h==-1}n.l=function(S){return S=fe(this,S),j(S)?-1:L(S)?0:1};function H(S){for(var C=S.g.length,A=[],N=0;N<C;N++)A[N]=~S.g[N];return new c(A,~S.h).add(T)}n.abs=function(){return j(this)?H(this):this},n.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0,O=0;O<=C;O++){var V=N+(this.i(O)&65535)+(S.i(O)&65535),x=(V>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);N=x>>>16,V&=65535,x&=65535,A[O]=x<<16|V}return new c(A,A[A.length-1]&-2147483648?-1:0)};function fe(S,C){return S.add(H(C))}n.j=function(S){if(L(this)||L(S))return E;if(j(this))return j(S)?H(this).j(H(S)):H(H(this).j(S));if(j(S))return H(this.j(H(S)));if(0>this.l(P)&&0>S.l(P))return y(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],N=0;N<2*C;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<S.g.length;O++){var V=this.i(N)>>>16,x=this.i(N)&65535,Ge=S.i(O)>>>16,ut=S.i(O)&65535;A[2*N+2*O]+=x*ut,ee(A,2*N+2*O),A[2*N+2*O+1]+=V*ut,ee(A,2*N+2*O+1),A[2*N+2*O+1]+=x*Ge,ee(A,2*N+2*O+1),A[2*N+2*O+2]+=V*Ge,ee(A,2*N+2*O+2)}for(N=0;N<C;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=C;N<2*C;N++)A[N]=0;return new c(A,0)};function ee(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function ce(S,C){this.g=S,this.h=C}function pe(S,C){if(L(C))throw Error("division by zero");if(L(S))return new ce(E,E);if(j(S))return C=pe(H(S),C),new ce(H(C.g),H(C.h));if(j(C))return C=pe(S,H(C)),new ce(H(C.g),C.h);if(30<S.g.length){if(j(S)||j(C))throw Error("slowDivide_ only works with positive integers.");for(var A=T,N=C;0>=N.l(S);)A=Fe(A),N=Fe(N);var O=Me(A,1),V=Me(N,1);for(N=Me(N,2),A=Me(A,2);!L(N);){var x=V.add(N);0>=x.l(S)&&(O=O.add(A),V=x),N=Me(N,1),A=Me(A,1)}return C=fe(S,O.j(C)),new ce(O,C)}for(O=E;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=y(A),x=V.j(C);j(x)||0<x.l(S);)A-=N,V=y(A),x=V.j(C);L(V)&&(V=T),O=O.add(V),S=fe(S,x)}return new ce(O,S)}n.A=function(S){return pe(this,S).h},n.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)&S.i(N);return new c(A,this.h&S.h)},n.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)|S.i(N);return new c(A,this.h|S.h)},n.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)^S.i(N);return new c(A,this.h^S.h)};function Fe(S){for(var C=S.g.length+1,A=[],N=0;N<C;N++)A[N]=S.i(N)<<1|S.i(N-1)>>>31;return new c(A,S.h)}function Me(S,C){var A=C>>5;C%=32;for(var N=S.g.length-A,O=[],V=0;V<N;V++)O[V]=0<C?S.i(V+A)>>>C|S.i(V+A+1)<<32-C:S.i(V+A);return new c(O,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,K_=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Ts=c}).apply(typeof Hy<"u"?Hy:typeof self<"u"?self:typeof window<"u"?window:{});var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q_,_l,Y_,mc,Pf,J_,X_,Z_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof lc=="object"&&lc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in v))break e;v=v[B]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,B={next:function(){if(!I&&v<u.length){var Y=v++;return{value:m(Y,u[Y]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function E(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,T.apply(null,arguments)}function P(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function L(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,B,Y){for(var he=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)he[mt-2]=arguments[mt];return m.prototype[B].apply(I,he)}}function j(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function H(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const B=u.length||0,Y=I.length||0;u.length=B+Y;for(let he=0;he<Y;he++)u[B+he]=I[he]}else u.push(I)}}class fe{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function ce(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function pe(u){return pe[" "](u),u}pe[" "]=function(){};var Fe=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Me(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function S(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function C(u){const m={};for(const v in u)m[v]=u[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(v in I)u[v]=I[v];for(let Y=0;Y<A.length;Y++)v=A[Y],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function O(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function V(u){d.setTimeout(()=>{throw u},0)}function x(){var u=xe;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ge{constructor(){this.h=this.g=null}add(m,v){const I=ut.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ut=new fe(()=>new Rt,u=>u.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,oe=!1,xe=new Ge,ge=()=>{const u=d.Promise.resolve(void 0);rt=()=>{u.then(z)}};var z=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(v){V(v)}var m=ut;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}oe=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var Be=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function F(u,m){if(Ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Fe){e:{try{pe(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:K[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&F.aa.h.call(this)}}L(F,Ce);var K={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),Z=0;function le(u,m,v,I,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=B,this.key=++Z,this.da=this.fa=!1}function me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function be(u){this.src=u,this.g={},this.h=0}be.prototype.add=function(u,m,v,I,B){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var he=it(u,m,I,B);return-1<he?(m=u[he],v||(m.fa=!1)):(m=new le(m,this.src,Y,!!I,B),m.fa=v,u.push(m)),m};function ke(u,m){var v=m.type;if(v in u.g){var I=u.g[v],B=Array.prototype.indexOf.call(I,m,void 0),Y;(Y=0<=B)&&Array.prototype.splice.call(I,B,1),Y&&(me(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function it(u,m,v,I){for(var B=0;B<u.length;++B){var Y=u[B];if(!Y.da&&Y.listener==m&&Y.capture==!!v&&Y.ha==I)return B}return-1}var yt="closure_lm_"+(1e6*Math.random()|0),dn={};function fn(u,m,v,I,B){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)fn(u,m[Y],v,I,B);return null}return v=vr(v),u&&u[q]?u.K(m,v,y(I)?!!I.capture:!1,B):Ms(u,m,v,!1,I,B)}function Ms(u,m,v,I,B,Y){if(!m)throw Error("Invalid event type");var he=y(B)?!!B.capture:!!B,mt=Fi(u);if(mt||(u[yt]=mt=new be(u)),v=mt.add(m,v,I,he,Y),v.proxy)return v;if(I=Ro(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Be||(B=he),B===void 0&&(B=!1),u.addEventListener(m.toString(),I,B);else if(u.attachEvent)u.attachEvent(yr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ro(){function u(v){return m.call(u.src,u.listener,v)}const m=Fs;return u}function ci(u,m,v,I,B){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)ci(u,m[Y],v,I,B);else I=y(I)?!!I.capture:!!I,v=vr(v),u&&u[q]?(u=u.i,m=String(m).toString(),m in u.g&&(Y=u.g[m],v=it(Y,v,I,B),-1<v&&(me(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete u.g[m],u.h--)))):u&&(u=Fi(u))&&(m=u.g[m.toString()],u=-1,m&&(u=it(m,v,I,B)),(v=-1<u?m[u]:null)&&gr(v))}function gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[q])ke(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(yr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Fi(m))?(ke(v,u),v.h==0&&(v.src=null,m[yt]=null)):me(u)}}}function yr(u){return u in dn?dn[u]:dn[u]="on"+u}function Fs(u,m){if(u.da)u=!0;else{m=new F(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&gr(u),u=v.call(I,m)}return u}function Fi(u){return u=u[yt],u instanceof be?u:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function vr(u){return typeof u=="function"?u:(u[An]||(u[An]=function(m){return u.handleEvent(m)}),u[An])}function Dt(){J.call(this),this.i=new be(this),this.M=this,this.F=null}L(Dt,J),Dt.prototype[q]=!0,Dt.prototype.removeEventListener=function(u,m,v,I){ci(this,u,m,v,I)};function At(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Ce(m,u);else if(m instanceof Ce)m.target=m.target||u;else{var B=m;m=new Ce(I,u),N(m,B)}if(B=!0,v)for(var Y=v.length-1;0<=Y;Y--){var he=m.g=v[Y];B=Yt(he,I,!0,m)&&B}if(he=m.g=u,B=Yt(he,I,!0,m)&&B,B=Yt(he,I,!1,m)&&B,v)for(Y=0;Y<v.length;Y++)he=m.g=v[Y],B=Yt(he,I,!1,m)&&B}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)me(v[I]);delete u.g[m],u.h--}}this.F=null},Dt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},Dt.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function Yt(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,Y=0;Y<m.length;++Y){var he=m[Y];if(he&&!he.da&&he.capture==v){var mt=he.listener,Wt=he.ha||he.src;he.fa&&ke(u.i,he),B=mt.call(Wt,I)!==!1&&B}}return B&&!I.defaultPrevented}function Sn(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function _r(u){u.g=Sn(()=>{u.g=null,u.i&&(u.i=!1,_r(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class rr extends J{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(u){J.call(this),this.h=u,this.g={}}L(hi,J);var xn=[];function Ui(u){Me(u.g,function(m,v){this.g.hasOwnProperty(v)&&gr(m)},u),u.g={}}hi.prototype.N=function(){hi.aa.N.call(this),Ui(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=d.JSON.stringify,zi=d.JSON.parse,Us=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Vr(){}Vr.prototype.h=null;function wr(u){return u.h||(u.h=u.i())}function di(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){Ce.call(this,"d")}L(kn,Ce);function Bi(){Ce.call(this,"c")}L(Bi,Ce);var Hn={},js=null;function Mr(){return js=js||new Dt}Hn.La="serverreachability";function Fr(u){Ce.call(this,Hn.La,u)}L(Fr,Ce);function Nn(u){const m=Mr();At(m,new Fr(m))}Hn.STAT_EVENT="statevent";function zs(u,m){Ce.call(this,Hn.STAT_EVENT,u),this.stat=m}L(zs,Ce);function xt(u){const m=Mr();At(m,new zs(m,u))}Hn.Ma="timingevent";function b(u,m){Ce.call(this,Hn.Ma,u),this.size=m}L(b,Ce);function U(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function G(){this.g=!0}G.prototype.xa=function(){this.g=!1};function ne(u,m,v,I,B,Y){u.info(function(){if(u.g)if(Y)for(var he="",mt=Y.split("&"),Wt=0;Wt<mt.length;Wt++){var ot=mt[Wt].split("=");if(1<ot.length){var Jt=ot[0];ot=ot[1];var Ut=Jt.split("_");he=2<=Ut.length&&Ut[1]=="type"?he+(Jt+"="+ot+"&"):he+(Jt+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+v+`
`+he})}function de(u,m,v,I,B,Y,he){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+v+`
`+Y+" "+he})}function Te(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ie(u,v)+(I?" "+I:"")})}function Oe(u,m){u.info(function(){return"TIMEOUT: "+m})}G.prototype.info=function(){};function Ie(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var Y=B[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<B.length;he++)B[he]=""}}}}return ji(v)}catch{return m}}var Ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function Ue(){}L(Ue,Vr),Ue.prototype.g=function(){return new XMLHttpRequest},Ue.prototype.i=function(){return{}},_e=new Ue;function He(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var ct={},Ye={};function pt(u,m,v){u.L=1,u.v=Gi(Gn(m)),u.m=v,u.P=!0,ir(u,null)}function ir(u,m){u.F=Date.now(),Xe(u),u.A=Gn(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Qi(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Ot,u.g=hu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new rr(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(xn[0]=B.toString()),B=xn);for(var Y=0;Y<B.length;Y++){var he=fn(v,B[Y],I||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Nn(),ne(u.i,u.u,u.A,u.l,u.R,u.m)}He.prototype.ca=function(u){u=u.target;const m=this.M;m&&Dn(u)==3?m.j():this.Y(u)},He.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=Dn(this.g);var m=this.g.Ba();const ar=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Ua(this.g)))){this.J||Ut!=4||m==7||(m==8||0>=ar?Nn(3):Nn(2)),qn(this);var v=this.g.Z();this.X=v;t:if(Ur(this)){var I=Ua(this.g);u="";var B=I.length,Y=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),mn(this);var he="";break t}this.h.i=new d.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(Y&&m==B-1)});I.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,de(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,Wt=this.g;if((mt=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(mt)){var ot=mt;break t}}ot=null}if(v=ot)Te(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jr(this,v);else{this.o=!1,this.s=3,xt(12),rn(this),mn(this);break e}}if(this.P){v=!0;let Qn;for(;!this.J&&this.C<he.length;)if(Qn=Wn(this,he),Qn==Ye){Ut==4&&(this.s=4,xt(14),v=!1),Te(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==ct){this.s=4,xt(15),Te(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else Te(this.i,this.l,Qn,null),jr(this,Qn);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||he.length!=0||this.h.h||(this.s=1,xt(16),v=!1),this.o=this.o&&v,!v)Te(this.i,this.l,he,"[Invalid Chunked Response]"),rn(this),mn(this);else if(0<he.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),za(Jt),Jt.M=!0,xt(11))}}else Te(this.i,this.l,he,null),jr(this,he);Ut==4&&rn(this),this.o&&!this.J&&(Ut==4?Uo(this.j,this):(this.o=!1,Xe(this)))}else Oo(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),rn(this),mn(this)}}}catch{}finally{}};function Ur(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Wn(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Ye:(v=Number(m.substring(v,I)),isNaN(v)?ct:(I+=1,I+v>m.length?Ye:(m=m.slice(I,I+v),u.C=I+v,m)))}He.prototype.cancel=function(){this.J=!0,rn(this)};function Xe(u){u.S=Date.now()+u.I,$i(u,u.I)}function $i(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=U(T(u.ba,u),m)}function qn(u){u.B&&(d.clearTimeout(u.B),u.B=null)}He.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Oe(this.i,this.A),this.L!=2&&(Nn(),xt(17)),rn(this),this.s=2,mn(this)):$i(this,this.S-u)};function mn(u){u.j.G==0||u.J||Uo(u.j,u)}function rn(u){qn(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ui(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function jr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||et(v.h,u))){if(!u.K&&et(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Fo(v),Cr(v);else break e;Mo(v),xt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=U(T(v.Za,v),6e3));if(1>=zr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else yi(v,11)}else if((u.K||v.g==u)&&Fo(v),!ee(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let ot=B[m];if(v.T=ot[0],ot=ot[1],v.G==2)if(ot[0]=="c"){v.K=ot[1],v.ia=ot[2];const Jt=ot[3];Jt!=null&&(v.la=Jt,v.j.info("VER="+v.la));const Ut=ot[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const ar=ot[5];ar!=null&&typeof ar=="number"&&0<ar&&(I=1.5*ar,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Qn=u.g;if(Qn){const Ks=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var Y=I.h;Y.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(sr(Y,Y.h),Y.h=null))}if(I.D){const zo=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(I.ya=zo,vt(I.I,I.D,zo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var he=u;if(I.qa=cu(I,I.J?I.ia:null,I.W),he.K){Bs(I.h,he);var mt=he,Wt=I.L;Wt&&(mt.I=Wt),mt.B&&(qn(mt),Xe(mt)),I.g=he}else Gs(I);0<v.i.length&&Wr(v)}else ot[0]!="stop"&&ot[0]!="close"||yi(v,7);else v.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?yi(v,7):on(v):ot[0]!="noop"&&v.l&&v.l.ta(ot),v.v=0)}}Nn(4)}catch{}}var Ze=class{constructor(u,m){this.g=u,this.map=m}};function dt(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ft(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zr(u){return u.h?1:u.g?u.g.size:0}function et(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function sr(u,m){u.g?u.g.add(m):u.h=m}function Bs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}dt.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ao(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return j(u.i)}function xo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function ko(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Hi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=ko(u),I=xo(u),B=I.length,Y=0;Y<B;Y++)m.call(void 0,I[Y],v&&v[Y],u)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),B=null;if(0<=I){var Y=u[v].substring(0,I);B=u[v].substring(I+1)}else Y=u[v];m(Y,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function fi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fi){this.h=u.h,Hs(this,u.j),this.o=u.o,this.g=u.g,Wi(this,u.s),this.l=u.l;var m=u.i,v=new Br;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),qi(this,v),this.m=u.m}else u&&(m=String(u).match($s))?(this.h=!1,Hs(this,m[1]||"",!0),this.o=st(m[2]||""),this.g=st(m[3]||"",!0),Wi(this,m[4]),this.l=st(m[5]||"",!0),qi(this,m[6]||"",!0),this.m=st(m[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}fi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ki(m,No,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ki(m,No,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ki(v,v.charAt(0)=="/"?nu:tu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ki(v,Va)),u.join("")};function Gn(u){return new fi(u)}function Hs(u,m,v){u.j=v?st(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function qi(u,m,v){m instanceof Br?(u.i=m,$r(u.i,u.h)):(v||(m=Ki(m,ru)),u.i=new Br(m,u.h))}function vt(u,m,v){u.i.set(m,v)}function Gi(u){return vt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function st(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ki(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,eu),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function eu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var No=/[#\/\?@]/g,tu=/[#\?:]/g,nu=/[#\?]/g,ru=/[#\?@]/g,Va=/#/g;function Br(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function sn(u){u.g||(u.g=new Map,u.h=0,u.i&&Rh(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Br.prototype,n.add=function(u,m){sn(this),this.i=null,u=or(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Er(u,m){sn(u),m=or(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Tr(u,m){return sn(u),m=or(u,m),u.g.has(m)}n.forEach=function(u,m){sn(this),this.g.forEach(function(v,I){v.forEach(function(B){u.call(m,B,I,this)},this)},this)},n.na=function(){sn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const B=u[I];for(let Y=0;Y<B.length;Y++)v.push(m[I])}return v},n.V=function(u){sn(this);let m=[];if(typeof u=="string")Tr(this,u)&&(m=m.concat(this.g.get(or(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return sn(this),this.i=null,u=or(this,u),Tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Qi(u,m,v){Er(u,m),0<v.length&&(u.i=null,u.g.set(or(u,m),j(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const Y=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var B=Y;he[I]!==""&&(B+="="+encodeURIComponent(String(he[I]))),u.push(B)}}return this.i=u.join("&")};function or(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function $r(u,m){m&&!u.j&&(sn(u),u.i=null,u.g.forEach(function(v,I){var B=I.toLowerCase();I!=B&&(Er(this,I),Qi(this,B,v))},u)),u.j=m}function Ah(u,m){const v=new G;if(d.Image){const I=new Image;I.onload=P(bn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=P(bn,v,"TestLoadImage: error",!1,m,I),I.onabort=P(bn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=P(bn,v,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function iu(u,m){const v=new G,I=new AbortController,B=setTimeout(()=>{I.abort(),bn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(Y=>{clearTimeout(B),Y.ok?bn(v,"TestPingServer: ok",!0,m):bn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),bn(v,"TestPingServer: error",!1,m)})}function bn(u,m,v,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(v)}catch{}}function xh(){this.g=new Us}function su(u,m,v){const I=v||"";try{Hi(u,function(B,Y){let he=B;y(B)&&(he=ji(B)),m.push(I+Y+"="+encodeURIComponent(he))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function pi(u){this.l=u.Ub||null,this.j=u.eb||!1}L(pi,Vr),pi.prototype.g=function(){return new Ws(this.l,this.j)},pi.prototype.i=(function(u){return function(){return u}})({});function Ws(u,m){Dt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Ws,Dt),n=Ws.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Sr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ou(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ou(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ir(this):Sr(this),this.readyState==3&&ou(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ir(this))},n.Qa=function(u){this.g&&(this.response=u,Ir(this))},n.ga=function(){this.g&&Ir(this)};function Ir(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Sr(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mi(u){let m="";return Me(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Yi(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=mi(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):vt(u,m,v))}function St(u){Dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(St,Dt);var kh=/^https?$/i,Ma=["POST","PUT"];n=St.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?wr(this.o):wr(_e),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Y){qs(this,Y);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)v.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())v.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ma,m,void 0))||I||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of v)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Do(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){qs(this,Y)}};function qs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,bo(u),Kn(u)}function bo(u){u.A||(u.A=!0,At(u,"complete"),At(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,At(this,"complete"),At(this,"abort"),Kn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),St.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},n.bb=function(){Fa(this)};function Fa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Dn(u)!=4||u.Z()!=2)){if(u.u&&Dn(u)==4)Sn(u.Ea,0,u);else if(At(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=he===0){var B=String(u.D).match($s)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),I=!kh.test(B?B.toLowerCase():"")}v=I}if(v)At(u,"complete"),At(u,"success");else{u.m=6;try{var Y=2<Dn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",bo(u)}}finally{Kn(u)}}}}function Kn(u,m){if(u.g){Do(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||At(u,"ready");try{v.onreadystatechange=I}catch{}}}function Do(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),zi(m)}};function Ua(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Oo(u){const m={};u=(u.g&&2<=Dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(ee(u[I]))continue;var v=O(u[I]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=m[B]||[];m[B]=Y,Y.push(v)}S(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ja(u){this.Aa=0,this.i=[],this.j=new G,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,u),this.cb=Hr("retryDelaySeedMs",1e4,u),this.Wa=Hr("forwardChannelMaxRetries",2,u),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new dt(u&&u.concurrentRequestLimit),this.Da=new xh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ja.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){xt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=cu(this,null,this.W),Wr(this)};function on(u){if(Lo(u),u.G==3){var m=u.U++,v=Gn(u.I);if(vt(v,"SID",u.K),vt(v,"RID",m),vt(v,"TYPE","terminate"),gi(u,v),m=new He(u,u.j,m),m.L=2,m.v=Gi(Gn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=hu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Xe(m)}uu(u)}function Cr(u){u.g&&(za(u),u.g.cancel(),u.g=null)}function Lo(u){Cr(u),u.u&&(d.clearTimeout(u.u),u.u=null),Fo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Wr(u){if(!Ft(u.h)&&!u.s){u.s=!0;var m=u.Ga;rt||ge(),oe||(rt(),oe=!0),xe.add(m,u),u.B=0}}function Nh(u,m){return zr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=U(T(u.Ga,u,m),lu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new He(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=C(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(B.H=Y,Y=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ji(this,B,m),v=Gn(this.I),vt(v,"RID",u),vt(v,"CVER",22),this.D&&vt(v,"X-HTTP-Session-Id",this.D),gi(this,v),Y&&(this.O?m="headers="+encodeURIComponent(String(mi(Y)))+"&"+m:this.m&&Yi(v,this.m,Y)),sr(this.h,B),this.Ua&&vt(v,"TYPE","init"),this.P?(vt(v,"$req",m),vt(v,"SID","null"),B.T=!0,pt(B,v,null)):pt(B,v,m),this.G=2}}else this.G==3&&(u?Vo(this,u):this.i.length==0||Ft(this.h)||Vo(this))};function Vo(u,m){var v;m?v=m.l:v=u.U++;const I=Gn(u.I);vt(I,"SID",u.K),vt(I,"RID",v),vt(I,"AID",u.T),gi(u,I),u.m&&u.o&&Yi(I,u.m,u.o),v=new He(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ji(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sr(u.h,v),pt(v,I,m)}function gi(u,m){u.H&&Me(u.H,function(v,I){vt(m,I,v)}),u.l&&Hi({},function(v,I){vt(m,I,v)})}function Ji(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var B=u.i;let Y=-1;for(;;){const he=["count="+v];Y==-1?0<v?(Y=B[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let mt=!0;for(let Wt=0;Wt<v;Wt++){let ot=B[Wt].g;const Jt=B[Wt].map;if(ot-=Y,0>ot)Y=Math.max(0,B[Wt].g-100),mt=!1;else try{su(Jt,he,"req"+ot+"_")}catch{I&&I(Jt)}}if(mt){I=he.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Gs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;rt||ge(),oe||(rt(),oe=!0),xe.add(m,u),u.v=0}}function Mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=U(T(u.Fa,u),lu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=U(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Cr(this),au(this))};function za(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function au(u){u.g=new He(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Gn(u.qa);vt(m,"RID","rpc"),vt(m,"SID",u.K),vt(m,"AID",u.T),vt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&vt(m,"TO",u.ja),vt(m,"TYPE","xmlhttp"),gi(u,m),u.m&&u.o&&Yi(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Gi(Gn(m)),v.m=null,v.P=!0,ir(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Cr(this),Mo(this),xt(19))};function Fo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Uo(u,m){var v=null;if(u.g==m){Fo(u),za(u),u.g=null;var I=2}else if(et(u.h,m))v=m.D,Bs(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;I=Mr(),At(I,new b(I,v)),Wr(u)}else Gs(u);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&Nh(u,m)||I==2&&Mo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function lu(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function yi(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const B=!I;I=new fi(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Hs(I,"https"),Gi(I),B?Ah(I.toString(),v):iu(I.toString(),v)}else xt(2);u.G=0,u.l&&u.l.sa(m),uu(u),Lo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function uu(u){if(u.G=0,u.ka=[],u.l){const m=Ao(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ka,m),H(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function cu(u,m,v){var I=v instanceof fi?Gn(v):new fi(v);if(I.g!="")m&&(I.g=m+"."+I.g),Wi(I,I.s);else{var B=d.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var Y=new fi(null);I&&Hs(Y,I),m&&(Y.g=m),B&&Wi(Y,B),v&&(Y.l=v),I=Y}return v=u.D,m=u.ya,v&&m&&vt(I,v,m),vt(I,"VER",u.la),gi(u,I),I}function hu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new St(new pi({eb:v})):new St(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ba(){}n=Ba.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jo(){}jo.prototype.g=function(u,m){return new Cn(u,m)};function Cn(u,m){Dt.call(this),this.g=new ja(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new qr(this)}L(Cn,Dt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){on(this.g)},Cn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ji(u),u=v);m.i.push(new Ze(m.Ya++,u)),m.G==3&&Wr(m)},Cn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Cn.aa.N.call(this)};function du(u){kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}L(du,kn);function fu(){Bi.call(this),this.status=1}L(fu,Bi);function qr(u){this.g=u}L(qr,Ba),qr.prototype.ua=function(){At(this.g,"a")},qr.prototype.ta=function(u){At(this.g,new du(u))},qr.prototype.sa=function(u){At(this.g,new fu)},qr.prototype.ra=function(){At(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,Z_=function(){return new jo},X_=function(){return Mr()},J_=Hn,Pf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,mc=Ee,ve.COMPLETE="complete",Y_=ve,di.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,_l=di,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,Q_=St}).apply(typeof lc<"u"?lc:typeof self<"u"?self:typeof window<"u"?window:{});const Wy="@firebase/firestore",qy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new rp("@firebase/firestore");function ua(){return vo.logLevel}function we(n,...e){if(vo.logLevel<=tt.DEBUG){const t=e.map(op);vo.debug(`Firestore (${Na}): ${n}`,...t)}}function Di(n,...e){if(vo.logLevel<=tt.ERROR){const t=e.map(op);vo.error(`Firestore (${Na}): ${n}`,...t)}}function Cs(n,...e){if(vo.logLevel<=tt.WARN){const t=e.map(op);vo.warn(`Firestore (${Na}): ${n}`,...t)}}function op(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ew(n,i,t)}function ew(n,e,t){let i=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Di(i),new Error(i)}function ft(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||ew(e,o,i)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends ui{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(En.UNAUTHENTICATED)))}shutdown(){}}class o1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class a1{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new tw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class l1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new l1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Gy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Gy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=h1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Qe(n,e){return n<e?-1:n>e?1:0}function Rf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Qe(i,o);{const l=nw(),c=d1(l.encode(Ky(n,t)),l.encode(Ky(e,t)));return c!==0?c:Qe(i,o)}}t+=i>65535?2:1}return Qe(n.length,e.length)}function Ky(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function d1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Qe(n[t],e[t]);return Qe(n.length,e.length)}function Ta(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="__name__";class Jr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ze(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Jr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Jr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Qe(e.length,t.length)}static compareSegments(e,t){const i=Jr.isNumericId(e),o=Jr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Jr.extractNumericId(e).compare(Jr.extractNumericId(t)):Rf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class Tt extends Jr{construct(e,t,i){return new Tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const f1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Jr{construct(e,t,i){return new cn(e,t,i)}static isValidIdentifier(e){return f1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qy}static keyField(){return new cn([Qy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Ae(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Ae(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ae(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new Ae(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(Tt.fromString(e))}static fromName(e){return new De(Tt.fromString(e).popFirst(5))}static empty(){return new De(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,e,t){if(!t)throw new Ae(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p1(n,e,t,i){if(e===!0&&i===!0)throw new Ae(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Yy(n){if(!De.isDocumentKey(n))throw new Ae(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Jy(n){if(De.isDocumentKey(n))throw new Ae(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function lp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze(12329,{type:typeof n})}function Or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lp(n);throw new Ae(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wl(n,e){if(!iw(n))throw new Ae(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ae(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=-62135596800,Zy=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Zy);return new It(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xy)throw new Ae(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zy}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:$t("string",It._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new It(0,0))}static max(){return new We(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function m1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=We.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new Ps(o,De.empty(),e)}function g1(n){return new Ps(n.readTime,n.key,bl)}class Ps{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ps(We.min(),De.empty(),bl)}static max(){return new Ps(We.max(),De.empty(),bl)}}function y1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==v1)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++d,d===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new te(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function w1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Da(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}nh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-1;function rh(n){return n==null}function Nc(n){return n===0&&1/n==-1/0}function E1(n){return typeof n=="number"&&Number.isInteger(n)&&!Nc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="";function T1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ev(e)),e=I1(n.get(t),e);return ev(e)}function I1(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case sw:t+="";break;default:t+=l}}return t}function ev(n){return n+sw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ds(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ow(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}}class uc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??un.RED,this.left=o??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new un(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(e){return new nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new nr([])}unionWith(e){let t=new Qt(cn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new aw("Invalid base64 string: "+l):l}})(e);return new hn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const S1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=S1.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function As(n){return typeof n=="string"?hn.fromBase64String(n):hn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="server_timestamp",uw="__type__",cw="__previous_value__",hw="__local_write_time__";function cp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uw])===null||t===void 0?void 0:t.stringValue)===lw}function ih(n){const e=n.mapValue.fields[cw];return cp(e)?ih(e):e}function Dl(n){const e=Rs(n.mapValue.fields[hw].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t,i,o,l,c,d,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const bc="(default)";class Ol{constructor(e,t){this.projectId=e,this.database=t||bc}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===bc}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="__type__",P1="__max__",cc={mapValue:{}},fw="__vector__",Dc="value";function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cp(n)?4:A1(n)?9007199254740991:R1(n)?10:11:ze(28295,{value:n})}function si(n,e){if(n===e)return!0;const t=xs(n);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dl(n).isEqual(Dl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Rs(o.timestampValue),d=Rs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return As(o.bytesValue).isEqual(As(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Mt(o.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Mt(o.integerValue)===Mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Mt(o.doubleValue),d=Mt(l.doubleValue);return c===d?Nc(c)===Nc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Ta(n.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(tv(c)!==tv(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!si(c[p],d[p])))return!1;return!0})(n,e);default:return ze(52216,{left:n})}}function Ll(n,e){return(n.values||[]).find((t=>si(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=xs(n),i=xs(e);if(t!==i)return Qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Mt(l.integerValue||l.doubleValue),p=Mt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return rv(n.timestampValue,e.timestampValue);case 4:return rv(Dl(n),Dl(e));case 5:return Rf(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=As(l),p=As(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Qe(d[y],p[y]);if(_!==0)return _}return Qe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Qe(Mt(l.latitude),Mt(c.latitude));return d!==0?d:Qe(Mt(l.longitude),Mt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,y,_;const E=l.fields||{},T=c.fields||{},P=(d=E[Dc])===null||d===void 0?void 0:d.arrayValue,L=(p=T[Dc])===null||p===void 0?void 0:p.arrayValue,j=Qe(((y=P?.values)===null||y===void 0?void 0:y.length)||0,((_=L?.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:iv(P,L)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===cc.mapValue&&c===cc.mapValue)return 0;if(l===cc.mapValue)return 1;if(c===cc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=Rf(p[E],_[E]);if(T!==0)return T;const P=Ia(d[p[E]],y[_[E]]);if(P!==0)return P}return Qe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw ze(23264,{le:t})}}function rv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Rs(n),i=Rs(e),o=Qe(t.seconds,i.seconds);return o!==0?o:Qe(t.nanos,i.nanos)}function iv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ia(t[o],i[o]);if(l)return l}return Qe(t.length,i.length)}function Sa(n){return Af(n)}function Af(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Rs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return As(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return De.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Af(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Af(t.fields[c])}`;return o+"}"})(n.mapValue):ze(61005,{value:n})}function gc(n){switch(xs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(n);return e?16+gc(e):16;case 5:return 2*n.stringValue.length;case 6:return As(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+gc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ds(i.fields,((l,c)=>{o+=l.length+gc(c)})),o})(n.mapValue);default:throw ze(13486,{value:n})}}function xf(n){return!!n&&"integerValue"in n}function hp(n){return!!n&&"arrayValue"in n}function sv(n){return!!n&&"nullValue"in n}function ov(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yc(n){return!!n&&"mapValue"in n}function R1(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[dw])===null||t===void 0?void 0:t.stringValue)===fw}function Sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ds(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Sl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function A1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===P1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=cn.emptyPath(),i={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Sl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];yc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ds(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Bn(Sl(this.value))}}function pw(n){const e=[];return Ds(n.fields,((t,i)=>{const o=new cn([t]);if(yc(i)){const l=pw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,We.min(),We.min(),We.min(),Bn.empty(),0)}static newFoundDocument(e,t,i,o){return new Tn(e,1,t,We.min(),i,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,We.min(),We.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,We.min(),We.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.position=e,this.inclusive=t}}function av(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=De.comparator(De.fromName(c.referenceValue),t.key):i=Ia(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function lv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!si(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function x1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{}class Kt extends mw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new N1(e,t,i):t==="array-contains"?new O1(e,i):t==="in"?new L1(e,i):t==="not-in"?new V1(e,i):t==="array-contains-any"?new M1(e,i):new Kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new b1(e,i):new D1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends mw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new oi(e,t)}matches(e){return gw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gw(n){return n.op==="and"}function yw(n){return k1(n)&&gw(n)}function k1(n){for(const e of n.filters)if(e instanceof oi)return!1;return!0}function kf(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(yw(n))return n.filters.map((e=>kf(e))).join(",");{const e=n.filters.map((t=>kf(t))).join(",");return`${n.op}(${e})`}}function vw(n,e){return n instanceof Kt?(function(i,o){return o instanceof Kt&&i.op===o.op&&i.field.isEqual(o.field)&&si(i.value,o.value)})(n,e):n instanceof oi?(function(i,o){return o instanceof oi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,d)=>l&&vw(c,o.filters[d])),!0):!1})(n,e):void ze(19439)}function _w(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(_w).join(" ,")+"}"})(n):"Filter"}class N1 extends Kt{constructor(e,t,i){super(e,t,i),this.key=De.fromName(i.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class b1 extends Kt{constructor(e,t){super(e,"in",t),this.keys=ww("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class D1 extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=ww("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ww(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>De.fromName(i.referenceValue)))}class O1 extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hp(t)&&Ll(t.arrayValue,this.value)}}class L1 extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ll(this.value.arrayValue,t)}}class V1 extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ll(this.value.arrayValue,t)}}class M1 extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ll(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function uv(n,e=null,t=[],i=[],o=null,l=null,c=null){return new F1(n,e,t,i,o,l,c)}function dp(n){const e=qe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>kf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),rh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Sa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Sa(i))).join(",")),e.Pe=t}return e.Pe}function fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!x1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lv(n.startAt,e.startAt)&&lv(n.endAt,e.endAt)}function Nf(n){return De.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function U1(n,e,t,i,o,l,c,d){return new sh(n,e,t,i,o,l,c,d)}function pp(n){return new sh(n)}function cv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function j1(n){return n.collectionGroup!==null}function Cl(n){const e=qe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Qt(cn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Lc(l,i))})),t.has(cn.keyField().canonicalString())||e.Te.push(new Lc(cn.keyField(),i))}return e.Te}function Zr(n){const e=qe(n);return e.Ie||(e.Ie=z1(e,Cl(n))),e.Ie}function z1(n,e){if(n.limitType==="F")return uv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Lc(o.field,l)}));const t=n.endAt?new Oc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Oc(n.startAt.position,n.startAt.inclusive):null;return uv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function bf(n,e,t){return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oh(n,e){return fp(Zr(n),Zr(e))&&n.limitType===e.limitType}function Ew(n){return`${dp(Zr(n))}|lt:${n.limitType}`}function ca(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>_w(o))).join(", ")}]`),rh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Sa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Sa(o))).join(",")),`Target(${i})`})(Zr(n))}; limitType=${n.limitType})`}function ah(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):De.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of Cl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,d,p){const y=av(c,d,p);return c.inclusive?y<=0:y<0})(i.startAt,Cl(i),o)||i.endAt&&!(function(c,d,p){const y=av(c,d,p);return c.inclusive?y>=0:y>0})(i.endAt,Cl(i),o))})(n,e)}function B1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Tw(n){return(e,t)=>{let i=!1;for(const o of Cl(n)){const l=$1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function $1(n,e,t){const i=n.field.isKeyField()?De.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Ia(p,y):ze(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new bt(De.comparator);function Oi(){return H1}const Iw=new bt(De.comparator);function wl(...n){let e=Iw;for(const t of n)e=e.insert(t.key,t);return e}function Sw(n){let e=Iw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fo(){return Pl()}function Cw(){return Pl()}function Pl(){return new Io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const W1=new bt(De.comparator),q1=new Qt(De.comparator);function nt(...n){let e=q1;for(const t of n)e=e.add(t);return e}const G1=new Qt(Qe);function K1(){return G1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function Pw(n){return{integerValue:""+n}}function Q1(n,e){return E1(e)?Pw(e):mp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function Y1(n,e,t){return n instanceof Vl?(function(o,l){const c={fields:{[uw]:{stringValue:lw},[hw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&cp(l)&&(l=ih(l)),l&&(c.fields[cw]=l),{mapValue:c}})(t,e):n instanceof Ml?Aw(n,e):n instanceof Fl?xw(n,e):(function(o,l){const c=Rw(o,l),d=hv(c)+hv(o.Ee);return xf(c)&&xf(o.Ee)?Pw(d):mp(o.serializer,d)})(n,e)}function J1(n,e,t){return n instanceof Ml?Aw(n,e):n instanceof Fl?xw(n,e):t}function Rw(n,e){return n instanceof Vc?(function(i){return xf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Vl extends lh{}class Ml extends lh{constructor(e){super(),this.elements=e}}function Aw(n,e){const t=kw(e);for(const i of n.elements)t.some((o=>si(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Fl extends lh{constructor(e){super(),this.elements=e}}function xw(n,e){let t=kw(e);for(const i of n.elements)t=t.filter((o=>!si(o,i)));return{arrayValue:{values:t}}}class Vc extends lh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function hv(n){return Mt(n.integerValue||n.doubleValue)}function kw(n){return hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.field=e,this.transform=t}}function Z1(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Ml&&o instanceof Ml||i instanceof Fl&&o instanceof Fl?Ta(i.elements,o.elements,si):i instanceof Vc&&o instanceof Vc?si(i.Ee,o.Ee):i instanceof Vl&&o instanceof Vl})(n.transform,e.transform)}class eP{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uh{}function Nw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gp(n.key,mr.none()):new ql(n.key,n.data,mr.none());{const t=n.data,i=Bn.empty();let o=new Qt(cn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Os(n.key,i,new nr(o.toArray()),mr.none())}}function tP(n,e,t){n instanceof ql?(function(o,l,c){const d=o.value.clone(),p=fv(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Os?(function(o,l,c){if(!vc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=fv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(bw(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Rl(n,e,t,i){return n instanceof ql?(function(l,c,d,p){if(!vc(l.precondition,c))return d;const y=l.value.clone(),_=pv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Os?(function(l,c,d,p){if(!vc(l.precondition,c))return d;const y=pv(l.fieldTransforms,p,c),_=c.data;return _.setAll(bw(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,c,d){return vc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function nP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=Rw(i.transform,o||null);l!=null&&(t===null&&(t=Bn.empty()),t.set(i.field,l))}return t||null}function dv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ta(i,o,((l,c)=>Z1(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ql extends uh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Os extends uh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function bw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function fv(n,e,t){const i=new Map;ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,J1(c,d,t[o]))}return i}function pv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,Y1(l,c,e))}return i}class gp extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rP extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&tP(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Rl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Rl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Cw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=Nw(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(We.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,((t,i)=>dv(t,i)))&&Ta(this.baseMutations,e.baseMutations,((t,i)=>dv(t,i)))}}class yp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ft(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return W1})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new yp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,at;function aP(n){switch(n){case re.OK:return ze(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ze(15467,{code:n})}}function Dw(n){if(n===void 0)return Di("GRPC error has no .code"),re.UNKNOWN;switch(n){case zt.OK:return re.OK;case zt.CANCELLED:return re.CANCELLED;case zt.UNKNOWN:return re.UNKNOWN;case zt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case zt.INTERNAL:return re.INTERNAL;case zt.UNAVAILABLE:return re.UNAVAILABLE;case zt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case zt.NOT_FOUND:return re.NOT_FOUND;case zt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case zt.ABORTED:return re.ABORTED;case zt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case zt.DATA_LOSS:return re.DATA_LOSS;default:return ze(39323,{code:n})}}(at=zt||(zt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new Ts([4294967295,4294967295],0);function mv(n){const e=nw().encode(n),t=new K_;return t.update(e),new Uint8Array(t.digest())}function gv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ts([t,i],0),new Ts([o,l],0)]}class vp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new El(`Invalid padding: ${t}`);if(i<0)throw new El(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new El(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ts.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ts.fromNumber(i)));return o.compare(lP)===1&&(o=new Ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=mv(e),[i,o]=gv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new vp(l,o,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=mv(e),[i,o]=gv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ch(We.min(),o,new bt(Qe),Oi(),nt())}}class Gl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Gl(i,t,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class Ow{constructor(e,t){this.targetId=e,this.De=t}}class Lw{constructor(e,t,i=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class yv{constructor(){this.ve=0,this.Ce=vv(),this.Fe=hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=nt(),t=nt(),i=nt();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ze(38017,{changeType:l})}})),new Gl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=vv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class uP{constructor(e){this.We=e,this.Ge=new Map,this.ze=Oi(),this.je=hc(),this.Je=hc(),this.He=new bt(Qe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(Nf(l))if(i===0){const c=new De(l.path);this.Xe(t,c,Tn.newNoDocument(c,We.min()))}else ft(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=As(i).toUint8Array()}catch(p){if(p instanceof aw)return Cs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new vp(c,o,l)}catch(p){return Cs(p instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&Nf(d.target)){const p=new De(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,Tn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let i=nt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new ch(e,t,this.He,this.ze,i);return this.ze=Oi(),this.je=hc(),this.Je=hc(),this.He=new bt(Qe),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new yv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Qt(Qe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Qt(Qe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new yv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function hc(){return new bt(De.comparator)}function vv(){return new bt(De.comparator)}const cP={asc:"ASCENDING",desc:"DESCENDING"},hP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dP={and:"AND",or:"OR"};class fP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Df(n,e){return n.useProto3Json||rh(e)?e:{value:e}}function Mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pP(n,e){return Mc(n,e.toTimestamp())}function ei(n){return ft(!!n,49232),We.fromTimestamp((function(t){const i=Rs(t);return new It(i.seconds,i.nanos)})(n))}function _p(n,e){return Of(n,e).canonicalString()}function Of(n,e){const t=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Mw(n){const e=Tt.fromString(n);return ft(Bw(e),10190,{key:e.toString()}),e}function Lf(n,e){return _p(n.databaseId,e.path)}function hf(n,e){const t=Mw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(Uw(t))}function Fw(n,e){return _p(n.databaseId,e)}function mP(n){const e=Mw(n);return e.length===4?Tt.emptyPath():Uw(e)}function Vf(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Uw(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _v(n,e,t){return{name:Lf(n,e),fields:t.value.mapValue.fields}}function gP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ze(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(ft(_===void 0||typeof _=="string",58123),hn.fromBase64String(_||"")):(ft(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),hn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(y){const _=y.code===void 0?re.UNKNOWN:Dw(y.code);return new Ae(_,y.message||"")})(c);t=new Lw(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=hf(n,i.document.name),l=ei(i.document.updateTime),c=i.document.createTime?ei(i.document.createTime):We.min(),d=new Bn({mapValue:{fields:i.document.fields}}),p=Tn.newFoundDocument(o,l,c,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new _c(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=hf(n,i.document),l=i.readTime?ei(i.readTime):We.min(),c=Tn.newNoDocument(o,l),d=i.removedTargetIds||[];t=new _c([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=hf(n,i.document),l=i.removedTargetIds||[];t=new _c([],l,o,null)}else{if(!("filter"in e))return ze(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new oP(o,l),d=i.targetId;t=new Ow(d,c)}}return t}function yP(n,e){let t;if(e instanceof ql)t={update:_v(n,e.key,e.value)};else if(e instanceof gp)t={delete:Lf(n,e.key)};else if(e instanceof Os)t={update:_v(n,e.key,e.data),updateMask:PP(e.fieldMask)};else{if(!(e instanceof rP))return ze(16599,{Rt:e.type});t={verify:Lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Vl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ml)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Fl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Vc)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw ze(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:pP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ze(27497)})(n,e.precondition)),t}function vP(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ei(o.updateTime):ei(l);return c.isEqual(We.min())&&(c=ei(l)),new eP(c,o.transformResults||[])})(t,e)))):[]}function _P(n,e){return{documents:[Fw(n,e.path)]}}function wP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Fw(n,o);const l=(function(y){if(y.length!==0)return zw(oi.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(T){return{field:ha(T.field),direction:IP(T.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Df(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function EP(n){let e=mP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ft(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const T=jw(E);return T instanceof oi&&yw(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(L){return new Lc(da(L.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,rh(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,P=E.values||[];return new Oc(P,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,P=E.values||[];return new Oc(P,T)})(t.endAt)),U1(e,o,c,l,d,"F",p,y)}function TP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=da(t.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=da(t.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=da(t.unaryFilter.field);return Kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=da(t.unaryFilter.field);return Kt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(da(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return oi.create(t.compositeFilter.filters.map((i=>jw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(t.compositeFilter.op))})(n):ze(30097,{filter:n})}function IP(n){return cP[n]}function SP(n){return hP[n]}function CP(n){return dP[n]}function ha(n){return{fieldPath:n.canonicalString()}}function da(n){return cn.fromServerFormat(n.fieldPath)}function zw(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(ov(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NAN"}};if(sv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ov(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NAN"}};if(sv(t.value))return{unaryFilter:{field:ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(t.field),op:SP(t.op),value:t.value}}})(n):n instanceof oi?(function(t){const i=t.getFilters().map((o=>zw(o)));return i.length===1?i[0]:{compositeFilter:{op:CP(t.op),filters:i}}})(n):ze(54877,{filter:n})}function PP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Bw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i,o,l=We.min(),c=We.min(),d=hn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.gt=e}}function AP(n){const e=EP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.Dn=new kP}addToCollectionParentIndex(e,t){return this.Dn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ps.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class kP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Qt(Tt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Qt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$w=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn($w,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ca(0)}static ur(){return new Ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="LruGarbageCollector",NP=1048576;function Tv([n,e],[t,i]){const o=Qe(n,t);return o===0?Qe(e,i):o}class bP{constructor(e){this.Tr=e,this.buffer=new Qt(Tv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Tv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){we(Ev,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Da(t)?we(Ev,"Ignoring IndexedDB error during garbage collection: ",t):await ba(t)}await this.Rr(3e5)}))}}class OP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(nh.ue);const i=new bP(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(wv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,c,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),ua()<=tt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function LP(n,e){return new OP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.changes=new Io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Rl(i.mutation,o,nr.empty(),It.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,nt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=nt()){const o=fo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=wl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,nt())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,o){let l=Oi();const c=Pl(),d=(function(){return Pl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Os)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),Rl(_.mutation,y,_.mutation.getFieldMask(),It.now())):c.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>{var E;return d.set(y,new MP(_,(E=c.get(y))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=Pl();let o=new bt(((c,d)=>c-d)),l=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||nr.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||nt()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=Cw();_.forEach((T=>{if(!l.has(T)){const P=Nw(t.get(T),i.get(T));P!==null&&E.set(T,P),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return te.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return De.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):j1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):te.resolve(fo());let d=bl,p=l;return c.next((y=>te.forEach(y,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,nt()))).next((_=>({batchId:d,changes:Sw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((i=>{let o=wl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=wl();return this.indexManager.getCollectionParents(e,l).next((d=>te.forEach(d,(p=>{const y=(function(E,T){return new sh(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Tn.newInvalidDocument(_)))}));let d=wl();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&Rl(_.mutation,y,nr.empty(),It.now()),ah(t,y)&&(d=d.insert(p,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ei(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:AP(o.bundledQuery),readTime:ei(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.overlays=new bt(De.comparator),this.kr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return te.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=fo(),l=t.length+1,c=new De(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new bt(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=fo(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=fo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>d.set(y,_))),!(d.size()>=o)););return te.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new sP(t,i));let l=this.kr.get(t);l===void 0&&(l=nt(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this.qr=new Qt(tn.Qr),this.$r=new Qt(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new tn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new De(new Tt([])),i=new tn(t,e),o=new tn(t,e+1),l=[];return this.$r.forEachInRange([i,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new De(new Tt([])),i=new tn(t,e),o=new tn(t,e+1);let l=nt();return this.$r.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new tn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return De.comparator(e.key,t.key)||Qe(e.Hr,t.Hr)}static Ur(e,t){return Qe(e.Hr,t.Hr)||De.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Qt(tn.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new iP(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.Yr=this.Yr.add(new tn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?up:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new tn(t,0),o=new tn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(c=>{const d=this.Zr(c.Hr);l.push(d)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qt(Qe);return t.forEach((o=>{const l=new tn(o,0),c=new tn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),te.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;De.isDocumentKey(l)||(l=l.child(""));const c=new tn(new De(l),0);let d=new Qt(Qe);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Hr)),!0)}),c),te.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return te.forEach(t.mutations,(o=>{const l=new tn(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new tn(t,0),o=this.Yr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.ni=e,this.docs=(function(){return new bt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let i=Oi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Oi();const c=t.path,d=new De(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||y1(g1(_),i)<=0||(o.has(_.key)||ah(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ze(9500)}ri(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new HP(this)}getSize(e){return te.resolve(this.size)}}class HP extends VP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.persistence=e,this.ii=new Io((t=>dp(t)),fp),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.si=0,this.oi=new wp,this.targetCount=0,this._i=Ca.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.hr(t),te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),te.waitFor(l).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.ai={},this.overlays={},this.ui=new nh(0),this.ci=!1,this.ci=!0,this.li=new zP,this.referenceDelegate=e(this),this.hi=new WP(this),this.indexManager=new xP,this.remoteDocumentCache=(function(o){return new $P(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new RP(t),this.Ti=new UP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new BP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){we("MemoryPersistence","Starting transaction:",e);const o=new qP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return te.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class qP extends _1{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.Ai=new wp,this.Ri=null}static Vi(e){return new Ep(e)}get mi(){if(this.Ri)return this.Ri;throw ze(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,(i=>{const o=De.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,We.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return te.or([()=>te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Fc{constructor(e,t){this.persistence=e,this.gi=new Io((i=>T1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=LP(this,t)}static Vi(e,t){return new Fc(e,t)}Ii(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return te.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,We.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gc(e.data.value)),t}Sr(e,t,i){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=nt(),o=nt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Tp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return US()?8:w1(In())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new GP;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ua()<=tt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(ua()<=tt.DEBUG&&we("QueryEngine","Query:",ca(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ua()<=tt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(t))):te.resolve())}ps(e,t){if(cv(t))return te.resolve(null);let i=Zr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=bf(t,null,"F"),i=Zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=nt(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,d);return this.Ds(t,y,c,p.readTime)?this.ps(e,bf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return cv(t)||o.isEqual(We.min())?te.resolve(null):this.gs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,i,o)?te.resolve(null):(ua()<=tt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ca(t)),this.vs(e,c,t,m1(o,bl)).next((d=>d)))}))}bs(e,t){let i=new Qt(Tw(e));return t.forEach(((o,l)=>{ah(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return ua()<=tt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",ca(t)),this.gs.getDocumentsMatchingQuery(e,t,Ps.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="LocalStore",QP=3e8;class YP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new bt(Qe),this.Ms=new Io((l=>dp(l)),fp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function JP(n,e,t,i){return new YP(n,e,t,i)}async function Ww(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=nt();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:c,addedBatchIds:d})))}))}))}function XP(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,_){const E=y.batch,T=E.keys();let P=te.resolve();return T.forEach((L=>{P=P.next((()=>_.getEntry(p,L))).next((j=>{const H=y.docVersions.get(L);ft(H!==null,48541),j.version.compareTo(H)<0&&(E.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),_.addEntry(j)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=nt();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function qw(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function ZP(n,e){const t=qe(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,E))));let P=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(hn.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(E,P),(function(j,H,fe){return j.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=QP?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(T,P,_)&&d.push(t.hi.updateTargetData(l,P))}));let p=Oi(),y=nt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(eR(l,c,e.documentUpdates).next((_=>{p=_.Ls,y=_.ks}))),!i.isEqual(We.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return te.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function eR(n,e,t){let i=nt(),o=nt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Oi();return t.forEach(((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(We.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):we(Ip,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function tR(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=up),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function nR(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,te.resolve(o)):t.hi.allocateTargetId(i).next((c=>(o=new _s(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Mf(n,e,t){const i=qe(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Da(c))throw c;we(Ip,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Iv(n,e,t){const i=qe(n);let o=We.min(),l=nt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const E=qe(p),T=E.Ms.get(_);return T!==void 0?te.resolve(E.Fs.get(T)):E.hi.getTargetData(y,_)})(i,c,Zr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?o:We.min(),t?l:nt()))).next((d=>(rR(i,B1(e),d),{documents:d,qs:l})))))}function rR(n,e,t){let i=n.xs.get(e)||We.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class Sv{constructor(){this.activeTargetIds=K1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iR{constructor(){this.Fo=new Sv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Sv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="ConnectivityMonitor";class Pv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){we(Cv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){we(Cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function Ff(){return dc===null?dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="RestConnection",oR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===bc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const c=Ff(),d=this.Go(e,t.toUriEncodedString());we(df,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(d),_=To(y);return this.jo(e,d,p,i,_).then((E=>(we(df,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Cs(df,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",i),E}))}Jo(e,t,i,o,l,c){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Na})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=oR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class uR extends aR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const c=Ff();return new Promise(((d,p)=>{const y=new Q_;y.setWithCredentials(!0),y.listenOnce(Y_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case mc.NO_ERROR:const E=y.getResponseJson();we(wn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case mc.TIMEOUT:we(wn,`RPC '${e}' ${c} timed out`),p(new Ae(re.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const T=y.getStatus();if(we(wn,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const L=P?.error;if(L&&L.status&&L.message){const j=(function(fe){const ee=fe.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ee)>=0?ee:re.UNKNOWN})(L.status);p(new Ae(j,L.message))}else p(new Ae(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Ae(re.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{c_:e,streamId:c,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{we(wn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);we(wn,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=Ff(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Z_(),d=X_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");we(wn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=c.createWebChannel(_,p);this.T_(E);let T=!1,P=!1;const L=new lR({Ho:H=>{P?we(wn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(T||(we(wn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),we(wn,`RPC '${e}' stream ${o} sending:`,H),E.send(H))},Yo:()=>E.close()}),j=(H,fe,ee)=>{H.listen(fe,(ce=>{try{ee(ce)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return j(E,_l.EventType.OPEN,(()=>{P||(we(wn,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),j(E,_l.EventType.CLOSE,(()=>{P||(P=!0,we(wn,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(E))})),j(E,_l.EventType.ERROR,(H=>{P||(P=!0,Cs(wn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),L.__(new Ae(re.UNAVAILABLE,"The operation could not be completed")))})),j(E,_l.EventType.MESSAGE,(H=>{var fe;if(!P){const ee=H.data[0];ft(!!ee,16349);const ce=ee,pe=ce?.error||((fe=ce[0])===null||fe===void 0?void 0:fe.error);if(pe){we(wn,`RPC '${e}' stream ${o} received error:`,pe);const Fe=pe.status;let Me=(function(A){const N=zt[A];if(N!==void 0)return Dw(N)})(Fe),S=pe.message;Me===void 0&&(Me=re.INTERNAL,S="Unknown error status: "+Fe+" with message "+pe.message),P=!0,L.__(new Ae(Me,S)),E.close()}else we(wn,`RPC '${e}' stream ${o} received:`,ee),L.a_(ee)}})),j(d,J_.STAT_EVENT,(H=>{H.stat===Pf.PROXY?we(wn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Pf.NOPROXY&&we(wn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(n){return new fP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class Kw{constructor(e,t,i,o,l,c,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Gw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Ae(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return we(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(we(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cR extends Kw{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=gP(this.serializer,e),i=(function(l){if(!("targetChange"in l))return We.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?We.min():c.readTime?ei(c.readTime):We.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Vf(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Nf(p)?{documents:_P(l,p)}:{query:wP(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Vw(l,c.resumeToken);const y=Df(l,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(We.min())>0){d.readTime=Mc(l,c.snapshotVersion.toTimestamp());const y=Df(l,c.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const i=TP(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Vf(this.serializer),t.removeTarget=e,this.k_(t)}}class hR extends Kw{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=vP(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Vf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>yP(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{}class fR extends dR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Ae(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Of(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(re.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,Of(t,i),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(re.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class pR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Di(t),this._a=!1):we("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class mR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{So(this)&&(we(_o,"Restarting streams for network reachability change."),await(async function(p){const y=qe(p);y.Ia.add(4),await Kl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await dh(y)})(this))}))})),this.Aa=new pR(i,o)}}async function dh(n){if(So(n))for(const e of n.da)await e(!0)}async function Kl(n){for(const e of n.da)await e(!1)}function Qw(n,e){const t=qe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Rp(t)?Pp(t):Oa(t).x_()&&Cp(t,e))}function Sp(n,e){const t=qe(n),i=Oa(t);t.Ta.delete(e),i.x_()&&Yw(t,e),t.Ta.size===0&&(i.x_()?i.B_():So(t)&&t.Aa.set("Unknown"))}function Cp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oa(n).H_(e)}function Yw(n,e){n.Ra.$e(e),Oa(n).Y_(e)}function Pp(n){n.Ra=new uP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Oa(n).start(),n.Aa.aa()}function Rp(n){return So(n)&&!Oa(n).M_()&&n.Ta.size>0}function So(n){return qe(n).Ia.size===0}function Jw(n){n.Ra=void 0}async function gR(n){n.Aa.set("Online")}async function yR(n){n.Ta.forEach(((e,t)=>{Cp(n,e)}))}async function vR(n,e){Jw(n),Rp(n)?(n.Aa.la(e),Pp(n)):n.Aa.set("Unknown")}async function _R(n,e,t){if(n.Aa.set("Online"),e instanceof Lw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){we(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uc(n,i)}else if(e instanceof _c?n.Ra.Ye(e):e instanceof Ow?n.Ra.it(e):n.Ra.et(e),!t.isEqual(We.min()))try{const i=await qw(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(y);_&&l.Ta.set(y,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,y)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(hn.EMPTY_BYTE_STRING,_.snapshotVersion)),Yw(l,p);const E=new _s(_.target,p,y,_.sequenceNumber);Cp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){we(_o,"Failed to raise snapshot:",i),await Uc(n,i)}}async function Uc(n,e,t){if(!Da(e))throw e;n.Ia.add(1),await Kl(n),n.Aa.set("Offline"),t||(t=()=>qw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(_o,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await dh(n)}))}function Xw(n,e){return e().catch((t=>Uc(n,t,e)))}async function fh(n){const e=qe(n),t=ks(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:up;for(;wR(e);)try{const o=await tR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,ER(e,o)}catch(o){await Uc(e,o)}Zw(e)&&eE(e)}function wR(n){return So(n)&&n.Pa.length<10}function ER(n,e){n.Pa.push(e);const t=ks(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Zw(n){return So(n)&&!ks(n).M_()&&n.Pa.length>0}function eE(n){ks(n).start()}async function TR(n){ks(n).na()}async function IR(n){const e=ks(n);for(const t of n.Pa)e.X_(t.mutations)}async function SR(n,e,t){const i=n.Pa.shift(),o=yp.from(i,e,t);await Xw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await fh(n)}async function CR(n,e){e&&ks(n).Z_&&await(async function(i,o){if((function(c){return aP(c)&&c!==re.ABORTED})(o.code)){const l=i.Pa.shift();ks(i).N_(),await Xw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await fh(i)}})(n,e),Zw(n)&&eE(n)}async function Av(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),we(_o,"RemoteStore received new credentials");const i=So(t);t.Ia.add(3),await Kl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await dh(t)}async function PR(n,e){const t=qe(n);e?(t.Ia.delete(2),await dh(t)):e||(t.Ia.add(2),await Kl(t),t.Aa.set("Unknown"))}function Oa(n){return n.Va||(n.Va=(function(t,i,o){const l=qe(t);return l.ia(),new cR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:gR.bind(null,n),e_:yR.bind(null,n),n_:vR.bind(null,n),J_:_R.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Rp(n)?Pp(n):n.Aa.set("Unknown")):(await n.Va.stop(),Jw(n))}))),n.Va}function ks(n){return n.ma||(n.ma=(function(t,i,o){const l=qe(t);return l.ia(),new hR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:TR.bind(null,n),n_:CR.bind(null,n),ea:IR.bind(null,n),ta:SR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await fh(n)):(await n.ma.stop(),n.Pa.length>0&&(we(_o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new Ap(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(n,e){if(Di("AsyncQueue",`${e}: ${n}`),Da(n))return new Ae(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{static emptySet(e){return new pa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||De.comparator(t.key,i.key):(t,i)=>De.comparator(t.key,i.key),this.keyedMap=wl(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.fa=new bt(De.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ze(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Pa{constructor(e,t,i,o,l,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Pa(e,t,pa.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class AR{constructor(){this.queries=kv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=qe(t),l=o.queries;o.queries=kv(),l.forEach(((c,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new Ae(re.ABORTED,"Firestore shutting down"))}}function kv(){return new Io((n=>Ew(n)),oh)}async function tE(n,e){const t=qe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new RR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=xp(c,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&kp(t)}async function nE(n,e){const t=qe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function xR(n,e){const t=qe(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(o)&&(i=!0);c.ya=o}}i&&kp(t)}function kR(n,e,t){const i=qe(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function kp(n){n.Da.forEach((e=>{e.next()}))}var Uf,Nv;(Nv=Uf||(Uf={})).Fa="default",Nv.Cache="cache";class rE{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Pa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.key=e}}class sE{constructor(e){this.key=e}}class NR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nt(),this.mutatedKeys=nt(),this.Xa=Tw(e),this.eu=new pa(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new xv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),P=ah(this.query,E)?E:null,L=!!T&&this.mutatedKeys.has(T.key),j=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let H=!1;T&&P?T.data.isEqual(P.data)?L!==j&&(i.track({type:3,doc:P}),H=!0):this.iu(T,P)||(i.track({type:2,doc:P}),H=!0,(p&&this.Xa(P,p)>0||y&&this.Xa(P,y)<0)&&(d=!0)):!T&&P?(i.track({type:0,doc:P}),H=!0):T&&!P&&(i.track({type:1,doc:T}),H=!0,(p||y)&&(d=!0)),H&&(P?(c=c.add(P),l=j?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((_,E)=>(function(P,L){const j=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{At:H})}};return j(P)-j(L)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,c.length!==0||y?{snapshot:new Pa(this.query,e.eu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new xv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=nt(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new sE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new iE(i))})),t}uu(e){this.Ha=e.qs,this.Za=nt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Np="SyncEngine";class bR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class DR{constructor(e){this.key=e,this.lu=!1}}class OR{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Io((d=>Ew(d)),oh),this.Tu=new Map,this.Iu=new Set,this.du=new bt(De.comparator),this.Eu=new Map,this.Au=new wp,this.Ru={},this.Vu=new Map,this.mu=Ca.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function LR(n,e,t=!0){const i=hE(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await oE(i,e,t,!0),o}async function VR(n,e){const t=hE(n);await oE(t,e,!0,!1)}async function oE(n,e,t,i){const o=await nR(n.localStore,Zr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await MR(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Qw(n.remoteStore,o),d}async function MR(n,e,t,i,o){n.gu=(E,T,P)=>(async function(j,H,fe,ee){let ce=H.view.nu(fe);ce.Ds&&(ce=await Iv(j.localStore,H.query,!1).then((({documents:S})=>H.view.nu(S,ce))));const pe=ee&&ee.targetChanges.get(H.targetId),Fe=ee&&ee.targetMismatches.get(H.targetId)!=null,Me=H.view.applyChanges(ce,j.isPrimaryClient,pe,Fe);return Dv(j,H.targetId,Me._u),Me.snapshot})(n,E,T,P);const l=await Iv(n.localStore,e,!0),c=new NR(e,l.qs),d=c.nu(l.documents),p=Gl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,p);Dv(n,t,y._u);const _=new bR(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function FR(n,e,t){const i=qe(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((c=>!oh(c,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Mf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Sp(i.remoteStore,o.targetId),jf(i,o.targetId)})).catch(ba)):(jf(i,o.targetId),await Mf(i.localStore,o.targetId,!0))}async function UR(n,e){const t=qe(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Sp(t.remoteStore,i.targetId))}async function jR(n,e,t){const i=GR(n);try{const o=await(function(c,d){const p=qe(c),y=It.now(),_=d.reduce(((P,L)=>P.add(L.key)),nt());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let L=Oi(),j=nt();return p.Os.getEntries(P,_).next((H=>{L=H,L.forEach(((fe,ee)=>{ee.isValidDocument()||(j=j.add(fe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(P,L))).next((H=>{E=H;const fe=[];for(const ee of d){const ce=nP(ee,E.get(ee.key).overlayedDocument);ce!=null&&fe.push(new Os(ee.key,ce,pw(ce.value.mapValue),mr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,fe,d)})).next((H=>{T=H;const fe=H.applyToLocalDocumentSet(E,j);return p.documentOverlayCache.saveOverlays(P,H.batchId,fe)}))})).then((()=>({batchId:T.batchId,changes:Sw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let y=c.Ru[c.currentUser.toKey()];y||(y=new bt(Qe)),y=y.insert(d,p),c.Ru[c.currentUser.toKey()]=y})(i,o.batchId,t),await Ql(i,o.changes),await fh(i.remoteStore)}catch(o){const l=xp(o,"Failed to persist write");t.reject(l)}}async function aE(n,e){const t=qe(n);try{const i=await ZP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?ft(c.lu,14607):o.removedDocuments.size>0&&(ft(c.lu,42227),c.lu=!1))})),await Ql(t,i,e)}catch(i){await ba(i)}}function bv(n,e,t){const i=qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=qe(c);p.onlineState=d;let y=!1;p.queries.forEach(((_,E)=>{for(const T of E.wa)T.va(d)&&(y=!0)})),y&&kp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zR(n,e,t){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let c=new bt(De.comparator);c=c.insert(l,Tn.newNoDocument(l,We.min()));const d=nt().add(l),p=new ch(We.min(),new Map,new bt(Qe),c,d);await aE(i,p),i.du=i.du.remove(l),i.Eu.delete(e),bp(i)}else await Mf(i.localStore,e,!1).then((()=>jf(i,e,t))).catch(ba)}async function BR(n,e){const t=qe(n),i=e.batch.batchId;try{const o=await XP(t.localStore,e);uE(t,i,null),lE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(t,o)}catch(o){await ba(o)}}async function $R(n,e,t){const i=qe(n);try{const o=await(function(c,d){const p=qe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next((E=>(ft(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);uE(i,e,t),lE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ql(i,o)}catch(o){await ba(o)}}function lE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function uE(n,e,t){const i=qe(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||cE(n,i)}))}function cE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),bp(n))}function Dv(n,e,t){for(const i of t)i instanceof iE?(n.Au.addReference(i.key,e),HR(n,i)):i instanceof sE?(we(Np,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||cE(n,i.key)):ze(19791,{yu:i})}function HR(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(we(Np,"New document in limbo: "+t),n.Iu.add(i),bp(n))}function bp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new De(Tt.fromString(e)),i=n.mu.next();n.Eu.set(i,new DR(t)),n.du=n.du.insert(t,i),Qw(n.remoteStore,new _s(Zr(pp(t.path)),i,"TargetPurposeLimboResolution",nh.ue))}}async function Ql(n,e,t){const i=qe(n),o=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{c.push(i.gu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Tp.Es(p.targetId,y);l.push(E)}})))})),await Promise.all(c),i.hu.J_(o),await(async function(p,y){const _=qe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(y,(T=>te.forEach(T.Is,(P=>_.persistence.referenceDelegate.addReference(E,T.targetId,P))).next((()=>te.forEach(T.ds,(P=>_.persistence.referenceDelegate.removeReference(E,T.targetId,P)))))))))}catch(E){if(!Da(E))throw E;we(Ip,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const P=_.Fs.get(T),L=P.snapshotVersion,j=P.withLastLimboFreeSnapshotVersion(L);_.Fs=_.Fs.insert(T,j)}}})(i.localStore,l))}async function WR(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){we(Np,"User change. New user:",e.toKey());const i=await Ww(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new Ae(re.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ql(t,i.Bs)}}function qR(n,e){const t=qe(n),i=t.Eu.get(e);if(i&&i.lu)return nt().add(i.key);{let o=nt();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const d=t.Pu.get(c);o=o.unionWith(d.view.tu)}return o}}function hE(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zR.bind(null,e),e.hu.J_=xR.bind(null,e.eventManager),e.hu.pu=kR.bind(null,e.eventManager),e}function GR(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$R.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return JP(this.persistence,new KP,e.initialUser,this.serializer)}Du(e){return new Hw(Ep.Vi,this.serializer)}bu(e){return new iR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class KR extends jc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ft(this.persistence.referenceDelegate instanceof Fc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new DP(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Hw((i=>Fc.Vi(i,t)),this.serializer)}}class zf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WR.bind(null,this.syncEngine),await PR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AR})()}createDatastore(e){const t=hh(e.databaseInfo.databaseId),i=(function(l){return new uR(l)})(e.databaseInfo);return(function(l,c,d,p){return new fR(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,d){return new mR(i,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>bv(this.syncEngine,t,0)),(function(){return Pv.C()?new Pv:new sR})())}createSyncEngine(e,t){return(function(o,l,c,d,p,y,_){const E=new OR(o,l,c,d,p,y);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=qe(o);we(_o,"RemoteStore shutting down."),l.Ia.add(5),await Kl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zf.provider={build:()=>new zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class QR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{we(Ns,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(we(Ns,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=xp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function pf(n,e){n.asyncQueue.verifyOperationInProgress(),we(Ns,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Ww(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Cs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{we("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Cs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Ov(n,e){n.asyncQueue.verifyOperationInProgress();const t=await YR(n);we(Ns,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Av(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Av(e.remoteStore,o))),n._onlineComponents=e}async function YR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Ns,"Using user provided OfflineComponentProvider");try{await pf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Cs("Error using user provided cache. Falling back to memory cache: "+t),await pf(n,new jc)}}else we(Ns,"Using default OfflineComponentProvider"),await pf(n,new KR(void 0));return n._offlineComponents}async function fE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Ns,"Using user provided OnlineComponentProvider"),await Ov(n,n._uninitializedComponentsProvider._online)):(we(Ns,"Using default OnlineComponentProvider"),await Ov(n,new zf))),n._onlineComponents}function JR(n){return fE(n).then((e=>e.syncEngine))}async function pE(n){const e=await fE(n),t=e.eventManager;return t.onListen=LR.bind(null,e.syncEngine),t.onUnlisten=FR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UR.bind(null,e.syncEngine),t}function XR(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,y){const _=new dE({next:T=>{_.Ou(),c.enqueueAndForget((()=>nE(l,E)));const P=T.docs.has(d);!P&&T.fromCache?y.reject(new Ae(re.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&p&&p.source==="server"?y.reject(new Ae(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new rE(pp(d.path),_,{includeMetadataChanges:!0,ka:!0});return tE(l,E)})(await pE(n),n.asyncQueue,e,t,i))),i.promise}function ZR(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,y){const _=new dE({next:T=>{_.Ou(),c.enqueueAndForget((()=>nE(l,E))),T.fromCache&&p.source==="server"?y.reject(new Ae(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new rE(d,_,{includeMetadataChanges:!0,ka:!0});return tE(l,E)})(await pE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firestore.googleapis.com",Vv=!0;class Mv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gE,this.ssl=Vv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$w;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NP)throw new Ae(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ae(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ae(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ae(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ph{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new s1;switch(i.type){case"firstParty":return new u1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Lv.get(t);i&&(we("ComponentProvider","Removing Datastore"),Lv.delete(t),i.terminate())})(this),Promise.resolve()}}function eA(n,e,t,i={}){var o;n=Or(n,ph);const l=To(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(tp(`https://${p}`),np("Firestore",!0)),c.host!==gE&&c.host!==p&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!go(y,d)&&(n._setSettings(y),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=En.MOCK_USER;else{_=kS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ae(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new En(T)}n._authCredentials=new o1(new tw(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new mh(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Wl(t,Ht._jsonSchema))return new Ht(e,i||null,new De(Tt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:$t("string",Ht._jsonSchemaVersion),referencePath:$t("string")};class Is extends mh{constructor(e,t,i){super(e,t,pp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new De(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function yE(n,e,...t){if(n=nn(n),rw("collection","path",e),n instanceof ph){const i=Tt.fromString(e,...t);return Jy(i),new Is(n,null,i)}{if(!(n instanceof Ht||n instanceof Is))throw new Ae(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Tt.fromString(e,...t));return Jy(i),new Is(n.firestore,null,i)}}function Li(n,e,...t){if(n=nn(n),arguments.length===1&&(e=ap.newId()),rw("doc","path",e),n instanceof ph){const i=Tt.fromString(e,...t);return Yy(i),new Ht(n,null,new De(i))}{if(!(n instanceof Ht||n instanceof Is))throw new Ae(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Tt.fromString(e,...t));return Yy(i),new Ht(n.firestore,n instanceof Is?n.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="AsyncQueue";class Uv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Gw(this,"async_queue_retry"),this.oc=()=>{const i=ff();i&&we(Fv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new xi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Da(e))throw e;we(Fv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Di("INTERNAL UNHANDLED ERROR: ",jv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Ap.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&ze(47125,{hc:jv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function jv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Co extends ph{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Uv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uv(e),this._firestoreClient=void 0,await e}}}function tA(n,e){const t=typeof n=="object"?n:sp(),i=typeof n=="string"?n:bc,o=th(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=j_("firestore");l&&eA(o,...l)}return o}function Dp(n){if(n._terminated)throw new Ae(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nA(n),n._firestoreClient}function nA(n){var e,t,i;const o=n._freezeSettings(),l=(function(d,p,y,_){return new C1(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,mE(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new QR(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(hn.fromBase64String(e))}catch(t){throw new Ae(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pr(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:$t("string",pr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ti._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,ti._jsonSchema))return new ti(e.latitude,e.longitude)}}ti._jsonSchemaVersion="firestore/geoPoint/1.0",ti._jsonSchema={type:$t("string",ti._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ni(e.vectorValues);throw new Ae(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ni._jsonSchemaVersion="firestore/vectorValue/1.0",ni._jsonSchema={type:$t("string",ni._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=/^__.*__$/;class iA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new ql(e,this.data,t,this.fieldTransforms)}}class vE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _E(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ec:n})}}class Op{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_E(this.Ec)&&rA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class sA{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hh(e)}Dc(e,t,i,o=!1){return new Op({Ec:e,methodName:t,bc:i,path:cn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lp(n){const e=n._freezeSettings(),t=hh(n._databaseId);return new sA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wE(n,e,t,i,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Mp("Data must be an object, but it was:",c,i);const d=EE(i,c);let p,y;if(l.merge)p=new nr(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=Bf(e,E,t);if(!c.contains(T))throw new Ae(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);IE(_,T)||_.push(T)}p=new nr(_),y=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=c.fieldTransforms;return new iA(new Bn(d),p,y)}class vh extends yh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vh}}class Vp extends yh{_toFieldTransform(e){return new X1(e.path,new Vl)}isEqual(e){return e instanceof Vp}}function oA(n,e,t,i){const o=n.Dc(1,e,t);Mp("Data must be an object, but it was:",o,i);const l=[],c=Bn.empty();Ds(i,((p,y)=>{const _=Fp(e,p,t);y=nn(y);const E=o.gc(_);if(y instanceof vh)l.push(_);else{const T=_h(y,E);T!=null&&(l.push(_),c.set(_,T))}}));const d=new nr(l);return new vE(c,d,o.fieldTransforms)}function aA(n,e,t,i,o,l){const c=n.Dc(1,e,t),d=[Bf(e,i,t)],p=[o];if(l.length%2!=0)throw new Ae(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Bf(e,l[T])),p.push(l[T+1]);const y=[],_=Bn.empty();for(let T=d.length-1;T>=0;--T)if(!IE(y,d[T])){const P=d[T];let L=p[T];L=nn(L);const j=c.gc(P);if(L instanceof vh)y.push(P);else{const H=_h(L,j);H!=null&&(y.push(P),_.set(P,H))}}const E=new nr(y);return new vE(_,E,c.fieldTransforms)}function _h(n,e){if(TE(n=nn(n)))return Mp("Unsupported field value:",e,n),EE(n,e);if(n instanceof yh)return(function(i,o){if(!_E(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const d of i){let p=_h(d,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=nn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Q1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=It.fromDate(i);return{timestampValue:Mc(o.serializer,l)}}if(i instanceof It){const l=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mc(o.serializer,l)}}if(i instanceof ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pr)return{bytesValue:Vw(o.serializer,i._byteString)};if(i instanceof Ht){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:_p(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ni)return(function(c,d){return{mapValue:{fields:{[dw]:{stringValue:fw},[Dc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw d.wc("VectorValues must only contain numeric values.");return mp(d.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${lp(i)}`)})(n,e)}function EE(n,e){const t={};return ow(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(n,((i,o)=>{const l=_h(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function TE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof ti||n instanceof pr||n instanceof Ht||n instanceof yh||n instanceof ni)}function Mp(n,e,t){if(!TE(t)||!iw(t)){const i=lp(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Bf(n,e,t){if((e=nn(e))instanceof gh)return e._internalPath;if(typeof e=="string")return Fp(n,e);throw zc("Field path arguments must be of type string or ",n,!1,void 0,t)}const lA=new RegExp("[~\\*/\\[\\]]");function Fp(n,e,t){if(e.search(lA)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gh(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new Ae(re.INVALID_ARGUMENT,d+n+p)}function IE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(CE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uA extends SE{data(){return super.data()}}function CE(n,e){return typeof e=="string"?Fp(n,e):e instanceof gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hA{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ds(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Dc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((c=>Mt(c.doubleValue)));return new ni(l)}convertGeoPoint(e){return new ti(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const t=Rs(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Tt.fromString(e);ft(Bw(i),9688,{name:e});const o=new Ol(i.get(1),i.get(3)),l=new De(i.popFirst(5));return o.isEqual(t)||Di(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends SE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(CE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:$t("string",po._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class wc extends po{data(e={}){return super.data(e)}}class ma{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Tl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new wc(this._firestore,this._userDataWriter,i.key,i,new Tl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new wc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Tl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new wc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Tl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:dA(d.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n){n=Or(n,Ht);const e=Or(n.firestore,Co);return XR(Dp(e),n._key).then((t=>yA(e,n,t)))}ma._jsonSchemaVersion="firestore/querySnapshot/1.0",ma._jsonSchema={type:$t("string",ma._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class RE extends hA{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function fA(n){n=Or(n,mh);const e=Or(n.firestore,Co),t=Dp(e),i=new RE(e);return cA(n._query),ZR(t,n._query).then((o=>new ma(e,i,n,o)))}function Up(n,e,t){n=Or(n,Ht);const i=Or(n.firestore,Co),o=PE(n.converter,e,t);return Eh(i,[wE(Lp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,mr.none())])}function pA(n,e,t,...i){n=Or(n,Ht);const o=Or(n.firestore,Co),l=Lp(o);let c;return c=typeof(e=nn(e))=="string"||e instanceof gh?aA(l,"updateDoc",n._key,e,t,i):oA(l,"updateDoc",n._key,e),Eh(o,[c.toMutation(n._key,mr.exists(!0))])}function mA(n){return Eh(Or(n.firestore,Co),[new gp(n._key,mr.none())])}function gA(n,e){const t=Or(n.firestore,Co),i=Li(n),o=PE(n.converter,e);return Eh(t,[wE(Lp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,mr.exists(!1))]).then((()=>i))}function Eh(n,e){return(function(i,o){const l=new xi;return i.asyncQueue.enqueueAndForget((async()=>jR(await JR(i),o,l))),l.promise})(Dp(n),e)}function yA(n,e,t){const i=t.docs.get(e._key),o=new RE(n);return new po(n,o,e._key,i,new Tl(t.hasPendingWrites,t.fromCache),e.converter)}function ga(){return new Vp("serverTimestamp")}(function(e,t=!0){(function(o){Na=o})(ka),yo(new Ss("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Co(new a1(i.getProvider("auth-internal")),new c1(c,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ae(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(y.options.projectId,_)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Xr(Wy,qy,e),Xr(Wy,qy,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="type.googleapis.com/google.protobuf.Int64Value",_A="type.googleapis.com/google.protobuf.UInt64Value";function AE(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Bc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Bc(e));if(typeof n=="function"||typeof n=="object")return AE(n,e=>Bc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Ra(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case vA:case _A:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Ra(e)):typeof n=="function"||typeof n=="object"?AE(n,e=>Ra(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends ui{constructor(e,t,i){super(`${jp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function wA(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $c(n,e){let t=wA(n),i=t,o;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!zv[c])return new $n("internal","internal");t=zv[c],i=c}const d=l.message;typeof d=="string"&&(i=d),o=l.details,o!==void 0&&(o=Ra(o))}}catch{}return t==="ok"?null:new $n(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,tr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="us-central1",TA=/^data: (.*?)(?:\n|$)/;function IA(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class SA{constructor(e,t,i,o,l=$f,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new EA(e,t,i,o),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=$f}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function CA(n,e,t){const i=To(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(tp(n.emulatorOrigin),np("Functions",!0))}function PA(n,e,t){const i=o=>AA(n,e,o,{});return i.stream=(o,l)=>kA(n,e,o,l),i}async function RA(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function xE(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function AA(n,e,t,i){const o=n._url(e);return xA(n,o,t,i)}async function xA(n,e,t,i){t=Bc(t);const o={data:t},l=await xE(n,i),c=i.timeout||7e4,d=IA(c),p=await Promise.race([RA(e,o,l,n.fetchImpl),d.promise,n.cancelAllRequests]);if(d.cancel(),!p)throw new $n("cancelled","Firebase Functions instance was deleted.");const y=$c(p.status,p.json);if(y)throw y;if(!p.json)throw new $n("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new $n("internal","Response is missing data field.");return{data:Ra(_)}}function kA(n,e,t,i){const o=n._url(e);return NA(n,o,t,i||{})}async function NA(n,e,t,i){var o;t=Bc(t);const l={data:t},c=await xE(n,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const j=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(j),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(j)}}}}}}const L=$c(0,null);return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}let p,y;const _=new Promise((P,L)=>{p=P,y=L});(o=i?.signal)===null||o===void 0||o.addEventListener("abort",()=>{const P=new $n("cancelled","Request was cancelled.");y(P)});const E=d.body.getReader(),T=bA(E,p,y,i?.signal);return{stream:{[Symbol.asyncIterator](){const P=T.getReader();return{async next(){const{value:L,done:j}=await P.read();return{value:L,done:j}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:_}}function bA(n,e,t,i){const o=(c,d)=>{const p=c.match(TA);if(!p)return;const y=p[1];try{const _=JSON.parse(y);if("result"in _){e(Ra(_.result));return}if("message"in _){d.enqueue(Ra(_.message));return}if("error"in _){const E=$c(0,_);d.error(E),t(E);return}}catch(_){if(_ instanceof $n){d.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return p();async function p(){if(i?.aborted){const y=new $n("cancelled","Request was cancelled");return c.error(y),t(y),Promise.resolve()}try{const{value:y,done:_}=await n.read();if(_){d.trim()&&o(d.trim(),c),c.close();return}if(i?.aborted){const T=new $n("cancelled","Request was cancelled");c.error(T),t(T),await n.cancel();return}d+=l.decode(y,{stream:!0});const E=d.split(`
`);d=E.pop()||"";for(const T of E)T.trim()&&o(T.trim(),c);return p()}catch(y){const _=y instanceof $n?y:$c(0,null);c.error(_),t(_)}}},cancel(){return n.cancel()}})}const Bv="@firebase/functions",$v="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="auth-internal",OA="app-check-internal",LA="messaging-internal";function VA(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(DA),c=t.getProvider(LA),d=t.getProvider(OA);return new SA(o,l,c,d,i)};yo(new Ss(jp,e,"PUBLIC").setMultipleInstances(!0)),Xr(Bv,$v,n),Xr(Bv,$v,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n=sp(),e=$f){const i=th(nn(n),jp).getImmediate({identifier:e}),o=j_("functions");return o&&MA(i,...o),i}function MA(n,e,t){CA(nn(n),e,t)}function FA(n,e,t){return PA(nn(n),e)}VA();function zp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function NE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UA=NE,bE=new $l("auth","Firebase",NE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new rp("@firebase/auth");function jA(n,...e){Hc.logLevel<=tt.WARN&&Hc.warn(`Auth (${ka}): ${n}`,...e)}function Ec(n,...e){Hc.logLevel<=tt.ERROR&&Hc.error(`Auth (${ka}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n,...e){throw Bp(n,...e)}function ri(n,...e){return Bp(n,...e)}function DE(n,e,t){const i=Object.assign(Object.assign({},UA()),{[e]:t});return new $l("auth","Firebase",i).create(e,{appName:n.name})}function ki(n){return DE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return bE.create(n,...e)}function je(n,e,...t){if(!n)throw Bp(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ec(e),new Error(e)}function Vi(n,e){n||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function zA(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zA()||VS()||"connection"in navigator)?navigator.onLine:!0}function $A(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=DS()||MS()}get(){return BA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(n,e){Vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qA=new Yl(3e4,6e4);function Ls(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Vs(n,e,t,i,o={}){return LE(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Hl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return LS()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&To(n.emulatorConfig.host)&&(y.credentials="include"),OE.fetch()(await VE(n,n.config.apiHost,t,d),y)})}async function LE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},HA),e);try{const o=new KA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw fc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw fc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw fc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw DE(n,_,y);Lr(n,_)}}catch(o){if(o instanceof ui)throw o;Lr(n,"network-request-failed",{message:String(o)})}}async function Jl(n,e,t,i,o={}){const l=await Vs(n,e,t,i,o);return"mfaPendingCredential"in l&&Lr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function VE(n,e,t,i){const o=`${e}${t}?${i}`,l=n,c=l.config.emulator?$p(n.config,o):`${n.config.apiScheme}://${o}`;return WA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function GA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ri(this.auth,"network-request-failed")),qA.get())})}}function fc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ri(n,e,i);return o.customData._tokenResponse=t,o}function Wv(n){return n!==void 0&&n.enterprise!==void 0}class QA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YA(n,e){return Vs(n,"GET","/v2/recaptchaConfig",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(n,e){return Vs(n,"POST","/v1/accounts:delete",e)}async function Wc(n,e){return Vs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XA(n,e=!1){const t=nn(n),i=await t.getIdToken(e),o=Hp(i);je(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Al(mf(o.auth_time)),issuedAtTime:Al(mf(o.iat)),expirationTime:Al(mf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function mf(n){return Number(n)*1e3}function Hp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=F_(t);return o?JSON.parse(o):(Ec("Failed to decode base64 JWT payload"),null)}catch(o){return Ec("Caught error parsing JWT payload as JSON",o?.toString()),null}}function qv(n){const e=Hp(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ui&&ZA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function ZA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Al(this.lastLoginAt),this.creationTime=Al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ul(n,Wc(t,{idToken:i}));je(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?ME(l.providerUserInfo):[],d=nx(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!d?.length,_=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Wf(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function tx(n){const e=nn(n);await qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nx(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ME(n){return n.map(e=>{var{providerId:t}=e,i=zp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(n,e){const t=await LE(n,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await VE(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&To(n.emulatorConfig.host)&&(p.credentials="include"),OE.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ix(n,e){return Vs(n,"POST","/v2/accounts:revokeToken",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=qv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await rx(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ya;return i&&(je(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(je(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ya,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=zp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ex(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XA(this,e)}reload(){return tx(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await qc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await Ul(this,JA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,P=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(c=t.photoURL)!==null&&c!==void 0?c:void 0,j=(d=t.tenantId)!==null&&d!==void 0?d:void 0,H=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,fe=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ee=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ce,emailVerified:pe,isAnonymous:Fe,providerData:Me,stsTokenManager:S}=t;je(ce&&S,e,"internal-error");const C=ya.fromJSON(this.name,S);je(typeof ce=="string",e,"internal-error"),ds(E,e.name),ds(T,e.name),je(typeof pe=="boolean",e,"internal-error"),je(typeof Fe=="boolean",e,"internal-error"),ds(P,e.name),ds(L,e.name),ds(j,e.name),ds(H,e.name),ds(fe,e.name),ds(ee,e.name);const A=new Dr({uid:ce,auth:e,email:T,emailVerified:pe,displayName:E,isAnonymous:Fe,photoURL:L,phoneNumber:P,tenantId:j,stsTokenManager:C,createdAt:fe,lastLoginAt:ee});return Me&&Array.isArray(Me)&&(A.providerData=Me.map(N=>Object.assign({},N))),H&&(A._redirectEventId=H),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new ya;o.updateFromServerResponse(t);const l=new Dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await qc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ME(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,d=new ya;d.updateFromIdToken(i);const p=new Dr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function Ri(n){Vi(n instanceof Function,"Expected a class definition");let e=Gv.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Gv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}FE.type="NONE";const Kv=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n,e,t){return`firebase:${n}:${e}:${t}`}class va{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Tc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Tc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wc(this.auth,{idToken:e}).catch(()=>{});return t?Dr._fromGetAccountInfoResponse(this.auth,t,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new va(Ri(Kv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Ri(Kv);const c=Tc(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(c);if(_){let E;if(typeof _=="string"){const T=await Wc(e,{idToken:_}).catch(()=>{});if(!T)break;E=await Dr._fromGetAccountInfoResponse(e,T,_)}else E=Dr._fromJSON(e,_);y!==l&&(d=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new va(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new va(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HE(e))return"Blackberry";if(WE(e))return"Webos";if(jE(e))return"Safari";if((e.includes("chrome/")||zE(e))&&!e.includes("edge/"))return"Chrome";if($E(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function UE(n=In()){return/firefox\//i.test(n)}function jE(n=In()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zE(n=In()){return/crios\//i.test(n)}function BE(n=In()){return/iemobile/i.test(n)}function $E(n=In()){return/android/i.test(n)}function HE(n=In()){return/blackberry/i.test(n)}function WE(n=In()){return/webos/i.test(n)}function Wp(n=In()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sx(n=In()){var e;return Wp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ox(){return FS()&&document.documentMode===10}function qE(n=In()){return Wp(n)||$E(n)||WE(n)||HE(n)||/windows phone/i.test(n)||BE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n,e=[]){let t;switch(n){case"Browser":t=Qv(In());break;case"Worker":t=`${Qv(In())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ka}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(n,e={}){return Vs(n,"GET","/v2/passwordPolicy",Ls(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=6;class cx{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:ux,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yv(this),this.idTokenSubscription=new Yv(this),this.beforeStateQueue=new ax(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await va.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wc(this,{idToken:e}),i=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$A()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(ki(this));const t=e?nn(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lx(this),t=new cx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ix(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await va.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&jA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Po(n){return nn(n)}class Yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=qS(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dx(n){Th=n}function KE(n){return Th.loadJS(n)}function fx(){return Th.recaptchaEnterpriseScript}function px(){return Th.gapiScript}function mx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class gx{constructor(){this.enterprise=new yx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vx="recaptcha-enterprise",QE="NO_RECAPTCHA";class _x{constructor(e){this.type=vx,this.auth=Po(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{YA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new QA(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;Wv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(QE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gx().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&Wv(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=fx();p.length!==0&&(p+=d),KE(p).then(()=>{o(d,l,c)}).catch(y=>{c(y)})}}).catch(d=>{c(d)})})}}async function Jv(n,e,t,i=!1,o=!1){const l=new _x(n);let c;if(o)c=QE;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function qf(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Jv(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Jv(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n,e){const t=th(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(go(l,e??{}))return o;Lr(o,"already-initialized")}return t.initialize({options:e})}function Ex(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Tx(n,e,t){const i=Po(n);je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=YE(e),{host:c,port:d}=Ix(e),p=d===null?"":`:${d}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),je(go(y,i.config.emulator)&&go(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,To(c)?(tp(`${l}//${c}${p}`),np("Auth",!0)):Sx()}function YE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ix(n){const e=YE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Xv(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Xv(c)}}}function Xv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Sx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function Cx(n,e){return Vs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(n,e){return Jl(n,"POST","/v1/accounts:signInWithPassword",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(n,e){return Jl(n,"POST","/v1/accounts:signInWithEmailLink",Ls(n,e))}async function Ax(n,e){return Jl(n,"POST","/v1/accounts:signInWithEmailLink",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends qp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new jl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new jl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qf(e,t,"signInWithPassword",Px);case"emailLink":return Rx(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qf(e,i,"signUpPassword",Cx);case"emailLink":return Ax(e,{idToken:t,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(n,e){return Jl(n,"POST","/v1/accounts:signInWithIdp",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="http://localhost";class wo extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=zp(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new wo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return _a(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,_a(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}buildRequest(){const e={requestUri:xx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Nx(n){const e=yl(vl(n)).link,t=e?yl(vl(e)).deep_link_id:null,i=yl(vl(n)).deep_link_id;return(i?yl(vl(i)).link:null)||i||t||e||n}class Gp{constructor(e){var t,i,o,l,c,d;const p=yl(vl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=kx((o=p.mode)!==null&&o!==void 0?o:null);je(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Nx(e);try{return new Gp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(e,t){return jl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Gp.parseLink(t);return je(i,"argument-error"),jl._fromEmailAndCode(e,i.code,i.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends JE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Xl{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ms.credential(t,i)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Xl{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Xl{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(n,e){return Jl(n,"POST","/v1/accounts:signUp",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Dr._fromIdTokenResponse(e,i,o),c=Zv(i);return new Eo({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Zv(i);return new Eo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Zv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends ui{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Gc(e,t,i,o)}}function XE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(n,l,e,i):l})}async function Dx(n,e,t=!1){const i=await Ul(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Eo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(n,e,t=!1){const{auth:i}=n;if(tr(i.app))return Promise.reject(ki(i));const o="reauthenticate";try{const l=await Ul(n,XE(i,o,e,n),t);je(l.idToken,i,"internal-error");const c=Hp(l.idToken);je(c,i,"internal-error");const{sub:d}=c;return je(n.uid===d,i,"user-mismatch"),Eo._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Lr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(n,e,t=!1){if(tr(n.app))return Promise.reject(ki(n));const i="signIn",o=await XE(n,i,e),l=await Eo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function Lx(n,e){return ZE(Po(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(n){const e=Po(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vx(n,e,t){if(tr(n.app))return Promise.reject(ki(n));const i=Po(n),c=await qf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&e0(n),p}),d=await Eo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function Mx(n,e,t){return tr(n.app)?Promise.reject(ki(n)):Lx(nn(n),La.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&e0(n),i})}function Fx(n,e,t,i){return nn(n).onIdTokenChanged(e,t,i)}function Ux(n,e,t){return nn(n).beforeAuthStateChanged(e,t)}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=1e3,zx=10;class n0 extends t0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);ox()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,zx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},jx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}n0.type="LOCAL";const Bx=n0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends t0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}r0.type="SESSION";const i0=r0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ih(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,l)),p=await $x(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const y=Kp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function Wx(n){ii().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function qx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gx(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Kx(){return s0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="firebaseLocalStorageDb",Qx=1,Qc="firebaseLocalStorage",a0="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sh(n,e){return n.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function Yx(){const n=indexedDB.deleteDatabase(o0);return new Zl(n).toPromise()}function Gf(){const n=indexedDB.open(o0,Qx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Qc,{keyPath:a0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Qc)?e(i):(i.close(),await Yx(),e(await Gf()))})})}async function e_(n,e,t){const i=Sh(n,!0).put({[a0]:e,value:t});return new Zl(i).toPromise()}async function Jx(n,e){const t=Sh(n,!1).get(e),i=await new Zl(t).toPromise();return i===void 0?null:i.value}function t_(n,e){const t=Sh(n,!0).delete(e);return new Zl(t).toPromise()}const Xx=800,Zx=3;class l0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Zx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(Kx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qx(),!this.activeServiceWorker)return;this.sender=new Hx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gf();return await e_(e,Kc,"1"),await t_(e,Kc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>e_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Jx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>t_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sh(o,!1).getAll();return new Zl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l0.type="LOCAL";const ek=l0;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n,e){return e?Ri(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nk(n){return ZE(n.auth,new Qp(n),n.bypassAuthState)}function rk(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),Ox(t,new Qp(n),n.bypassAuthState)}async function ik(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),Dx(t,new Qp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nk;case"linkViaPopup":case"linkViaRedirect":return ik;case"reauthViaPopup":case"reauthViaRedirect":return rk;default:Lr(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new Yl(2e3,1e4);class fa extends u0{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=Kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sk.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="pendingRedirect",Ic=new Map;class ak extends u0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const i=await lk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lk(n,e){const t=hk(e),i=ck(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function uk(n,e){Ic.set(n._key(),e)}function ck(n){return Ri(n._redirectPersistence)}function hk(n){return Tc(ok,n.config.apiKey,n.name)}async function dk(n,e,t=!1){if(tr(n.app))return Promise.reject(ki(n));const i=Po(n),o=tk(i,e),c=await new ak(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=600*1e3;class pk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!c0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fk&&this.cachedEventUids.clear(),this.cachedEventUids.has(n_(e))}saveEventToCache(e){this.cachedEventUids.add(n_(e)),this.lastProcessedEventTime=Date.now()}}function n_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function c0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(n,e={}){return Vs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vk=/^https?/;async function _k(n){if(n.config.emulator)return;const{authorizedDomains:e}=await gk(n);for(const t of e)try{if(wk(t))return}catch{}Lr(n,"unauthorized-domain")}function wk(n){const e=Hf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!vk.test(t))return!1;if(yk.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Yl(3e4,6e4);function r_(){const n=ii().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Tk(n){return new Promise((e,t)=>{var i,o,l;function c(){r_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r_(),t(ri(n,"network-request-failed"))},timeout:Ek.get()})}if(!((o=(i=ii().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ii().gapi)===null||l===void 0)&&l.load)c();else{const d=mx("iframefcb");return ii()[d]=()=>{gapi.load?c():t(ri(n,"network-request-failed"))},KE(`${px()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function Ik(n){return Sc=Sc||Tk(n),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=new Yl(5e3,15e3),Ck="__/auth/iframe",Pk="emulator/auth/iframe",Rk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ak=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xk(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$p(e,Pk):`https://${n.config.authDomain}/${Ck}`,i={apiKey:e.apiKey,appName:n.name,v:ka},o=Ak.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Hl(i).slice(1)}`}async function kk(n){const e=await Ik(n),t=ii().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:xk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rk,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=ri(n,"network-request-failed"),d=ii().setTimeout(()=>{l(c)},Sk.get());function p(){ii().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bk=500,Dk=600,Ok="_blank",Lk="http://localhost";class i_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vk(n,e,t,i=bk,o=Dk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Nk),{width:i.toString(),height:o.toString(),top:l,left:c}),y=In().toLowerCase();t&&(d=zE(y)?Ok:t),UE(y)&&(e=e||Lk,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[P,L])=>`${T}${P}=${L},`,"");if(sx(y)&&d!=="_self")return Mk(e||"",d),new i_(null);const E=window.open(e||"",d,_);je(E,n,"popup-blocked");try{E.focus()}catch{}return new i_(E)}function Mk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="__/auth/handler",Uk="emulator/auth/handler",jk=encodeURIComponent("fac");async function s_(n,e,t,i,o,l){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ka,eventId:o};if(e instanceof JE){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",WS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Xl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${jk}=${encodeURIComponent(p)}`:"";return`${zk(n)}?${Hl(d).slice(1)}${y}`}function zk({config:n}){return n.emulator?$p(n,Uk):`https://${n.authDomain}/${Fk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class Bk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i0,this._completeRedirectFn=dk,this._overrideRedirectResult=uk}async _openPopup(e,t,i,o){var l;Vi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await s_(e,t,i,Hf(),o);return Vk(e,c,Kp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await s_(e,t,i,Hf(),o);return Wx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Vi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await kk(e),i=new pk(e);return t.register("authEvent",o=>(je(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gf,{type:gf},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[gf];c!==void 0&&t(!!c),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_k(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qE()||jE()||Wp()}}const $k=Bk;var o_="@firebase/auth",a_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qk(n){yo(new Ss("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(n)},y=new hx(i,o,l,p);return Ex(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),yo(new Ss("auth-internal",e=>{const t=Po(e.getProvider("auth").getImmediate());return(i=>new Hk(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(o_,a_,Wk(n)),Xr(o_,a_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=300,Kk=B_("authIdTokenMaxAge")||Gk;let l_=null;const Qk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Kk)return;const o=t?.token;l_!==o&&(l_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Yk(n=sp()){const e=th(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wx(n,{popupRedirectResolver:$k,persistence:[ek,Bx,i0]}),i=B_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=Qk(l.toString());Ux(t,c,()=>c(t.currentUser)),Fx(t,d=>c(d))}}const o=U_("auth");return o&&Tx(t,`http://${o}`),t}function Jk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}dx({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ri("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Jk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qk("Browser");const Xk={apiKey:"AIzaSyBjOeHP4Pst7BYyRF2c85KKMe6lifXOU1M",authDomain:"wwconsole-93f76.firebaseapp.com",projectId:"wwconsole-93f76",storageBucket:"wwconsole-93f76.appspot.com",messagingSenderId:"936183161335",appId:"1:936183161335:web:0762f9ac5837ada128cef2",measurementId:"G-H6R483JTGT"},Ch=W_(Xk),ai=tA(Ch);kE(Ch,"asia-south1");const u_=Yk(Ch),h0=n=>({...n,isPinned:n.isPinned??n.isPinnedFeatured??!1}),d0=async n=>{const e={title:n.title||"",type:n.type||"Theme",overview:n.overview||"",category:n.category||"",subcategory:n.subcategory||"",tags:n.tags||[],imageUrl:n.imageUrl||"",sources:n.sources||[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},disableDepthToggle:n.disableDepthToggle||!1,isPinned:n.isPinned??n.isPinnedFeatured??!1,isPinnedFeatured:n.isPinnedFeatured??n.isPinned??!1,isCompactCard:n.isCompactCard??!1,pinnedCategory:n.pinnedCategory??"All",keywords:n.keywords||[],status:n.status||"draft",slug:n.slug||(n.title?n.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):""),editorNotes:n.editorNotes||"",createdAt:ga(),updatedAt:ga()};return(await gA(yE(ai,"drafts"),e)).id},Yc=async()=>(await fA(yE(ai,"drafts"))).docs.map(e=>h0({id:e.id,...e.data()})),co=async n=>{const e=Li(ai,"drafts",n),t=await wh(e);return t.exists()?h0({id:t.id,...t.data()}):null},Zn=async(n,e)=>{const t=Li(ai,"drafts",n);await Up(t,{...e,updatedAt:ga()},{merge:!0})},f0=async n=>{await mA(Li(ai,"drafts",n))},c_=async(n,e,t)=>{const i=await co(n);if(!i)throw new Error("Draft not found");const o=[...i.timeline||[]];o[e]={...o[e],...t},await Zn(n,{timeline:o})},Zk=async(n,e)=>{const t=await co(n);if(!t)throw new Error("Draft not found");const i=t.timeline.filter((o,l)=>l!==e);await Zn(n,{timeline:i})},p0=async n=>{const e=Li(ai,"drafts",n),t=await wh(e);if(!t.exists())throw new Error("Draft not found");const i=t.data(),o=i.slug||i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),l=i.timeline?.flatMap(p=>p.sources||[]).filter(p=>p?.link&&p.link.startsWith("http"))||[],c=i.type==="Story"?"stories":"themes",d=Li(ai,c,o);await Up(d,{...i,sources:l,publishedAt:ga(),createdAt:i.createdAt||ga(),status:"published"}),await pA(e,{status:"published",updatedAt:ga()}),console.log(` Published ${i.type}  /${c}/${o} with ${l.length} sources`)},eN=async n=>{await p0(n)};function tN(){const n=Bl(),[e,t]=X.useState([]),[i,o]=X.useState(!0),[l,c]=X.useState(!1),[d,p]=X.useState({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];X.useEffect(()=>{(async()=>{try{const L=(await Yc()).filter(j=>j.type==="Theme");t(L)}catch(L){console.error("Error loading drafts:",L)}finally{o(!1)}})()},[]);const _=P=>{const{name:L,value:j}=P.target;p({...d,[L]:j})},E=async P=>{if(P.preventDefault(),!d.title.trim()||!d.category.trim()){alert("Title and Category are required");return}try{c(!0);const L=await d0({title:d.title,overview:d.overview,category:d.category,subcategory:d.subcategory,tags:[],imageUrl:d.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:d.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Theme"}),j=(await Yc()).filter(H=>H.type==="Theme");t(j),p({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${L}`)}catch(L){console.error("Error creating draft:",L),alert("Failed to create draft")}finally{c(!1)}},T=async P=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await f0(P),t(L=>L.filter(j=>j.id!==P))}catch(L){console.error(L),alert("Failed to delete draft")}};return i?R.jsx("div",{className:"p-6",children:"Loading drafts..."}):R.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[R.jsx("div",{className:"flex justify-between items-center",children:R.jsx("h1",{className:"text-3xl font-bold",children:"Theme Drafts"})}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Theme Draft"}),R.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{name:"title",placeholder:"Title",value:d.title,onChange:_,className:"border p-2 rounded"}),R.jsxs("select",{name:"category",value:d.category,onChange:_,className:"border p-2 rounded",children:[R.jsx("option",{value:"",children:"Select Category"}),y.map(P=>R.jsx("option",{value:P,children:P},P))]}),R.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Climate Policy, Geopolitical Conflict)",value:d.subcategory,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"date",placeholder:"Date (optional)",value:d.date,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:d.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),R.jsx("textarea",{name:"overview",placeholder:"Overview",value:d.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),R.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Theme Draft"})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Theme Drafts"}),e.length===0?R.jsx("p",{className:"text-gray-500",children:"No theme drafts yet."}):R.jsx("ul",{className:"divide-y",children:e.map(P=>R.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-medium",children:P.title||"Untitled"}),R.jsxs("p",{className:"text-sm text-gray-500",children:[P.category,"  ",P.subcategory||"","  ",P.status]}),R.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",P.id]})]}),R.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[R.jsx("button",{onClick:()=>n(`/app/drafts/${P.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),R.jsx("button",{onClick:()=>T(P.id),className:"text-red-600 hover:underline",children:"Delete"}),R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),P.slug&&R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),R.jsx("button",{onClick:()=>{const L=P.slug||P.id,j=`[${P.title}](@theme/${L})`;navigator.clipboard.writeText(j),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},P.id))})]})]})}function nN(){const n=Bl(),[e,t]=X.useState([]),[i,o]=X.useState(!0),[l,c]=X.useState(!1),[d,p]=X.useState({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];X.useEffect(()=>{(async()=>{try{const L=(await Yc()).filter(j=>j.type==="Story");t(L)}catch(L){console.error("Error loading drafts:",L)}finally{o(!1)}})()},[]);const _=P=>{const{name:L,value:j}=P.target;p({...d,[L]:j})},E=async P=>{if(P.preventDefault(),!d.title.trim()||!d.category.trim()){alert("Title and Category are required");return}try{c(!0);const L=await d0({title:d.title,overview:d.overview,category:d.category,subcategory:d.subcategory,tags:[],imageUrl:d.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:d.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Story"}),j=(await Yc()).filter(H=>H.type==="Story");t(j),p({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${L}`)}catch(L){console.error("Error creating draft:",L),alert("Failed to create draft")}finally{c(!1)}},T=async P=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await f0(P),t(L=>L.filter(j=>j.id!==P))}catch(L){console.error(L),alert("Failed to delete draft")}};return i?R.jsx("div",{className:"p-6",children:"Loading drafts..."}):R.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[R.jsx("div",{className:"flex justify-between items-center",children:R.jsx("h1",{className:"text-3xl font-bold",children:"Story Drafts"})}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Story Draft"}),R.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{name:"title",placeholder:"Title",value:d.title,onChange:_,className:"border p-2 rounded"}),R.jsxs("select",{name:"category",value:d.category,onChange:_,className:"border p-2 rounded",children:[R.jsx("option",{value:"",children:"Select Category"}),y.map(P=>R.jsx("option",{value:P,children:P},P))]}),R.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Geopolitical Conflict)",value:d.subcategory,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"date",placeholder:"Date (optional)",value:d.date,onChange:_,className:"border p-2 rounded"}),R.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:d.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),R.jsx("textarea",{name:"overview",placeholder:"Overview",value:d.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),R.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Story Draft"})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Story Drafts"}),e.length===0?R.jsx("p",{className:"text-gray-500",children:"No story drafts yet."}):R.jsx("ul",{className:"divide-y",children:e.map(P=>R.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-medium",children:P.title||"Untitled"}),R.jsxs("p",{className:"text-sm text-gray-500",children:[P.category,"  ",P.subcategory||"","  ",P.status]}),R.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",P.id]})]}),R.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[R.jsx("button",{onClick:()=>n(`/app/drafts/${P.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),R.jsx("button",{onClick:()=>T(P.id),className:"text-red-600 hover:underline",children:"Delete"}),R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),P.slug&&R.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),R.jsx("button",{onClick:()=>{const L=P.slug||P.id,j=`[${P.title}](@story/${L})`;navigator.clipboard.writeText(j),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},P.id))})]})]})}const rN="modulepreload",iN=function(n){return"/"+n},h_={},d_=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let y=function(_){return Promise.all(_.map(E=>Promise.resolve(E).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var c=y;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=y(t.map(_=>{if(_=iN(_),_ in h_)return;h_[_]=!0;const E=_.endsWith(".css"),T=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${T}`))return;const P=document.createElement("link");if(P.rel=E?"stylesheet":rN,E||(P.as="script"),P.crossOrigin="",P.href=_,p&&P.setAttribute("nonce",p),document.head.appendChild(P),E)return new Promise((L,j)=>{P.addEventListener("load",L),P.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},Yp="https://api.openai.com/v1/chat/completions",Jp="gpt-4o-mini";async function Ph(n,e){const t="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",i={model:Jp,messages:[{role:"system",content:`You are a precise news editor.
Always respond ONLY with valid JSON matching this schema:
${e}
Do not include markdown, code fences, or commentary.`},{role:"user",content:n}]},o=await fetch(Yp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!o.ok){const d=await o.text();throw new Error(`API error: ${o.status} ${d}`)}const c=(await o.json()).choices?.[0]?.message?.content?.trim();if(!c)throw new Error("Empty response from model");try{return JSON.parse(c)}catch{throw console.error(" Raw model output:",c),new Error("Invalid JSON returned by model")}}async function m0(n){const e=`
{
  "timeline": [
    { "date": "YYYY-MM-DD", "event": "string", "description": "string",
      "significance": 1|2|3, "imageUrl": null, "sourceLink": null }
  ]
}`,t=`
You are a news editor.
Create a concise chronological timeline of key developments for the topic:
"${n.title}"
Make descriptions factual, data-rich, and written as short bullet summaries.

Context:
${n.overview}

Return 1015 events.
Each must have:
- date (ISO format)
- event
- short description
- significance (1=low,2=medium,3=high)

Return only valid JSON.
`;return(await Ph(t,e)).timeline}async function g0(n){const e=`
{
  "analysis": {
    "stakeholders": [{ "name": "string", "detail": "string" }],
    "faqs": [{ "question": "string", "answer": "string" }],
    "future": [{ "question": "string", "answer": "string" }]
  }
}`,t=`
You are a political analyst creating structured insights for the theme "${n.title}".

Context:
${n.overview}

Return three sections:
1. stakeholders  list of key people/institutions and their roles.
2. faqs  common reader questions with concise factual answers.
3. future  forward-looking questions with short, reasoned answers.

Keep all answers under 50 words.
Return only valid JSON.
`;return(await Ph(t,e)).analysis}async function sN(n){const e="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",t=`
You are a clear and factual news editor.
From the following overview, identify up to 8 important or complex terms that a reader might not immediately understand.

Return JSON only:
[
  { "term": "term or phrase", "explainer": "short, clear, factual, under 25 words" }
]

Overview:
${n}
`,l=(await(await fetch(Yp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:Jp,messages:[{role:"user",content:t}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT overview context output:",l);try{return JSON.parse(l)}catch{return console.warn(" GPT Context JSON parse error:",l),[]}}async function oN(n){const e="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",t=n.contexts?.map(d=>d.term).filter(Boolean);if(!t?.length)return[];const i=`
You are a concise factual explainer.
For the given event, write a short (under 25 words) neutral definition for each listed term.

Event title: ${n.event}
Event description: ${n.description}

Terms to explain:
${t.map(d=>`- ${d}`).join(`
`)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`,c=(await(await fetch(Yp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:Jp,messages:[{role:"user",content:i}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT event explainer output:",c);try{return JSON.parse(c).filter(p=>p.term&&p.explainer)}catch{return console.warn(" Invalid JSON for event explainer:",c),[]}}async function y0(n){const e=`
You are a concise factual news explainer.
Given the event below, identify key proper nouns, organizations, or technical terms a general reader may not know.
For each, write a short (under 20 words) neutral explanation.

Event Title: ${n.event}
Event Description: ${n.description}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await Ph(e,'[{"term": "string", "explainer": "string"}]')}async function v0(n,e){const t=`
You are a concise factual explainer for a news analysis section.
Section: ${n}

For each entry below, suggest short (under 20 words) neutral explainers for key names or entities readers may not know.

Entries:
${JSON.stringify(e,null,2)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await Ph(t,'[{"term": "string", "explainer": "string"}]')}const f_=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:g0,generateContexts:sN,generateContextsForAnalysis:v0,generateContextsForTimelineEvent:y0,generateExplainersForEvent:oN,generateTimeline:m0},Symbol.toStringTag,{value:"Module"}));async function aN({title:n,event:e,description:t}){try{const i=Li(ai,"settings","global"),o=await wh(i),l=o.exists()&&o.data()?.serper?.prompt||"title";if(l.trim().toLowerCase()==="title")return n||e||t||"";let c=l;return c=c.replace(/{{\s*title\s*}}/gi,n||"").replace(/{{\s*event\s*}}/gi,e||"").replace(/{{\s*description\s*}}/gi,t||""),c.trim()||n||e||t||""}catch(i){return console.error(" Error building Serper query:",i),n||e||t||""}}async function lN(n,e,t){const i=kE(Ch,"asia-south1"),o=FA(i,"fetchEventCoverage");try{const l=await aN({title:n,event:n,description:e});return console.log(" Serper query:",l),(await o({title:l,description:e,date:t})).data}catch(l){throw console.error(" Error calling fetchEventCoverage:",l),new Error(l.message||"Failed to fetch event coverage")}}function p_(n){if(!n)return R.jsx("span",{children:n});const e=n.replace(/\]\(@\[([^\]]+)\]\(@(story|theme)\/([A-Za-z0-9_-]+)\)\)/g,"](@$2/$3)"),t=/\[([^\]]+)\]\((@(?:story|theme)\/[A-Za-z0-9_-]+|https?:\/\/[^\s)]+)\)/g,i=[];let o=0,l;for(;(l=t.exec(e))!==null;){const[c,d,p]=l,y=e.slice(o,l.index);y&&i.push({type:"text",value:y}),i.push({type:"link",label:d,target:p}),o=l.index+c.length}return o<e.length&&i.push({type:"text",value:e.slice(o)}),R.jsx("span",{style:{display:"inline",flexWrap:"wrap",lineHeight:"1.6"},children:i.map((c,d)=>{if(c.type==="text")return R.jsx("span",{children:c.value},d);const{label:p,target:y}=c,_=y.startsWith("@story/")||y.startsWith("@theme/"),E=y.startsWith("@theme/"),T=_?y.split("/")[1]:"";return _?R.jsx(L_,{to:`/${E?"themes":"stories"}/${T}`,style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},d):R.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},d)})})}async function uN(n){const e="dpjnkc0dq",t="waitwhat_unsigned",i=new FormData;return i.append("file",n),i.append("upload_preset",t),(await(await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i})).json()).secure_url}function cN(){const{id:n}=OI(),e=Bl(),[t,i]=X.useState(null),[o,l]=X.useState(!0),[c,d]=X.useState(!1),[p,y]=X.useState(!1),[_,E]=X.useState(!1),[T,P]=X.useState({}),[L,j]=X.useState([]),[H,fe]=X.useState(!1),[ee,ce]=X.useState(null),[pe,Fe]=X.useState(!0),[Me,S]=X.useState(!0),[C,A]=X.useState(!1),[N,O]=X.useState(!1),V=F=>({...F,timeline:F.timeline||[],phases:F.phases||[],isPinned:F.isPinned??F.isPinnedFeatured??!1}),x=(F,K)=>{if(!K)return;const q=K.selectionStart??0,Z=K.selectionEnd??0;P(le=>({...le,[F]:{start:q,end:Z}}))},Ge=(F,K,q)=>{let Z=prompt("Enter linked story/theme ID (e.g. story/abc123 or theme/xyz456):");if(!Z||(Z=Z.replace(/^@+/,"").replace(/\[|\]|\(|\)/g,"").trim(),!Z))return;const le=T[F];if(!le||le.start===le.end){alert("Select text in the field first, then click Link.");return}const me=K||"",{start:be,end:ke}=le,it=me.substring(be,ke);if(!it){alert("Selection is empty.");return}const yt=`[${it}](@${Z})`,dn=me.substring(0,be)+yt+me.substring(ke);q(dn),E(!0)};X.useEffect(()=>{(async()=>{try{if(!n)return;const K=await co(n);i(K?V(K):null)}catch(K){console.error(K),alert("Failed to load draft.")}finally{l(!1)}})()},[n]),X.useEffect(()=>{const F=K=>{_&&(K.preventDefault(),K.returnValue="")};return window.addEventListener("beforeunload",F),()=>window.removeEventListener("beforeunload",F)},[_]);const ut=F=>{if(!t)return;const{name:K,value:q}=F.target;i({...t,[K]:q})},Rt=async()=>{const F=prompt("Paste Midjourney Image URL:");if(F)try{const K=await uN(F);i(q=>q&&{...q,imageUrl:K}),E(!0),alert(" Uploaded to Cloudinary!")}catch(K){console.error(K),alert(" Failed to upload image.")}},rt=async()=>{if(!(!t||!n))try{d(!0),await Zn(n,t),E(!1),alert(" Metadata saved")}catch(F){console.error(F),alert(" Failed to save metadata")}finally{d(!1)}},oe=async()=>{if(!(!n||!t)){y(!0);try{await Zn(n,{phases:t.phases||[]}),t.type==="Story"?(await eN(n),alert(" Story published successfully!")):(await p0(n),alert(" Theme published successfully!"))}catch(F){console.error(F),alert(" Publish failed: "+F.message)}finally{y(!1)}}},xe=async()=>{if(!(!t||!n)){A(!0);try{const F=await m0(t);await Zn(n,{timeline:F});const K=await co(n);i(K?V(K):null),alert(" Timeline generated successfully!")}catch(F){console.error(F),alert(" Failed to generate timeline: "+F.message)}finally{A(!1)}}},ge=async()=>{if(!(!t||!n)){O(!0);try{const F=await g0(t);await Zn(n,{analysis:F});const K=await co(n);i(K?V(K):null),alert(" Analysis generated successfully!")}catch(F){console.error(F),alert(" Failed to generate analysis: "+F.message)}finally{O(!1)}}},z=async()=>{if(!n||!t)return;const F={date:"",event:"",description:"",significance:1,imageUrl:"",sourceLink:"",sources:[],contexts:[]},K=[...t.timeline||[],F];i({...t,timeline:K});try{await Zn(n,{timeline:K}),alert(" Blank event added. Scroll to the end of the timeline to edit it.")}catch(q){console.error(" Failed to add event:",q),alert(" Failed to add event. Please try again.");const Z=await co(n);Z&&i(V(Z))}},J=async(F,K,q)=>{if(!n||!t)return;const Z=[...t.timeline];Z[F]={...Z[F],[K]:q},i({...t,timeline:Z}),E(!0)},Ce=async F=>{if(!n||!window.confirm("Delete this event?"))return;await Zk(n,F);const K=await co(n);if(!K)return;const q=(K.phases||[]).filter(Z=>Z.startIndex!==F).map(Z=>{const le=Z.startIndex>F?Z.startIndex-1:Z.startIndex;let me=typeof Z.endIndex=="number"?Z.endIndex>F?Z.endIndex-1:Z.endIndex:void 0;return typeof me=="number"&&me<le&&(me=le),{...Z,startIndex:le,endIndex:me}});K.phases=q,i(V(K)),E(!0)},Be=async(F,K)=>{if(!n||!t)return;const q=K.event?.trim();if(!q){alert("Please add an event title before fetching coverage.");return}const Z=K.description??"";try{console.log(" Fetching Serper coverage for:",q);const le=await lN(q,Z,K.date||"");if(le.sources?.length){const me=le.sources.map(it=>({...it,imageUrl:it.imageUrl??null})),be={...t.timeline[F],sources:me,imageUrl:me[0]?.imageUrl||t.timeline[F].imageUrl};await c_(n,F,be);const ke=[...t.timeline];i({...t,timeline:ke}),alert(` Found ${le.sources.length} sources for "${K.event}"`)}else alert(" No relevant sources found for this event");console.log(" Sources:",le.sources)}catch(le){console.error(" Error fetching coverage:",le),alert(" Failed to fetch coverage: "+le.message)}};return o?R.jsx("div",{className:"p-6",children:"Loading..."}):t?R.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h1",{className:"text-3xl font-bold",children:"Edit Draft"}),_&&R.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" You have unsaved changes"}),R.jsxs("div",{className:"flex gap-3",children:[R.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 hover:underline",children:" Back"}),R.jsx("button",{onClick:oe,disabled:p,className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 disabled:opacity-50",children:p?"Publishing":t?.type==="Story"?" Publish Story":" Publish Theme"})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metadata"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{name:"title",value:t.title,onChange:ut,placeholder:"Title",className:"border p-2 rounded"}),R.jsx("input",{name:"category",value:t.category,onChange:ut,placeholder:"Category (e.g. Politics, Economy)",className:"border p-2 rounded"}),R.jsx("input",{name:"subcategory",value:t.subcategory,onChange:ut,placeholder:"Subcategory (e.g. Geopolitical Conflict)",className:"border p-2 rounded"}),R.jsx("input",{name:"imageUrl",value:t.imageUrl||"",onChange:ut,placeholder:"Main Thumbnail / Cover Image URL",className:"border p-2 rounded md:col-span-2"}),R.jsx("button",{type:"button",onClick:Rt,className:"px-3 py-2 bg-purple-600 text-white rounded md:col-span-2 hover:bg-purple-700",children:" Upload Image from Midjourney Link"}),"np",t.imageUrl&&R.jsxs("div",{className:"md:col-span-2 flex justify-start items-center gap-4",children:[R.jsx("img",{src:t.imageUrl,alt:"Cover",className:"w-48 h-32 object-cover rounded border",onError:F=>{const K=t.imageUrl??"";try{if(K.startsWith("http")){const q=new URL(K).origin;F.currentTarget.src=`${q}/favicon.ico`}else F.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}catch{F.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}}}),R.jsx("p",{className:"text-gray-600 text-sm",children:"Preview of your main thumbnail"})]}),R.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 mt-2",children:[R.jsx("input",{type:"checkbox",id:"isPinned",checked:t.isPinned||!1,onChange:async F=>{const K=F.target.checked;if(i({...t,isPinned:K}),n)try{await Zn(n,{isPinned:K,isPinnedFeatured:K})}catch(q){console.error(" Failed to update isPinned:",q)}},className:"w-4 h-4"}),R.jsx("label",{htmlFor:"isPinned",className:"text-sm text-gray-800",children:"Pin as Featured"}),t.isPinned&&R.jsxs("select",{value:t.pinnedCategory||"All",onChange:async F=>{const K=F.target.value;if(i({...t,pinnedCategory:K}),n)try{await Zn(n,{pinnedCategory:K})}catch(q){console.error(" Failed to update pinnedCategory:",q)}},className:"border p-1 rounded text-sm",children:[R.jsx("option",{value:"All",children:"All Categories"}),R.jsx("option",{value:t.category,children:t.category})]})]}),R.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[R.jsx("input",{type:"checkbox",id:"isCompactCard",checked:t.isCompactCard||!1,onChange:async F=>{const K=F.target.checked;if(i({...t,isCompactCard:K}),n)try{await Zn(n,{isCompactCard:K})}catch(q){console.error(" Failed to update isCompactCard:",q)}},className:"w-4 h-4 mt-1"}),R.jsxs("label",{htmlFor:"isCompactCard",className:"text-sm text-gray-800",children:["Render as compact card",R.jsx("span",{className:"block text-gray-500 text-xs",children:"Home/Stories/Themes screens on WWFinal will show only the title and a small thumbnail when enabled."})]})]}),R.jsx("textarea",{name:"overview",value:t.overview||"",onChange:ut,onSelect:F=>x("overview",F.target),placeholder:"Overview",rows:3,className:"border p-2 rounded md:col-span-2"}),R.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 text-xs text-blue-600 mt-1",children:[R.jsx("button",{type:"button",onClick:()=>Ge("overview",t.overview||"",F=>i({...t,overview:F})),className:"text-blue-600 hover:underline",children:" Link selected text"}),R.jsx("span",{className:"text-gray-500",children:"Select text in the overview box, then click to link another story/theme."})]}),R.jsx("div",{className:"md:col-span-2 text-sm text-gray-600",children:p_(t.overview||"")})]}),R.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[R.jsx("input",{type:"checkbox",id:"disableDepthToggle",checked:t.disableDepthToggle||!1,onChange:async F=>{const K=F.target.checked;if(i({...t,disableDepthToggle:K}),n)try{await Zn(n,{disableDepthToggle:K}),console.log(" disableDepthToggle updated to:",K)}catch(q){console.error(" Failed to update disableDepthToggle:",q),alert(" Failed to update disableDepthToggle.")}},className:"w-4 h-4"}),R.jsx("label",{htmlFor:"disableDepthToggle",className:"text-sm text-gray-700",children:"Disable Depth Toggle in App"})]}),R.jsxs("div",{className:"mt-6",children:[R.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Context Explainers (Overview)"}),R.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add terms that will be highlighted in the overview for reader context."}),(t.contexts||[]).map((F,K)=>R.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[R.jsx("input",{type:"text",value:F.term,onChange:q=>{const Z=[...t.contexts||[]];Z[K].term=q.target.value,i({...t,contexts:Z})},placeholder:"Term",className:"border p-2 rounded flex-1"}),R.jsx("input",{type:"text",value:F.explainer,onChange:q=>{const Z=[...t.contexts||[]];Z[K].explainer=q.target.value,i({...t,contexts:Z})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),R.jsx("button",{onClick:()=>{const q=(t.contexts||[]).filter((Z,le)=>le!==K);i({...t,contexts:q})},className:"text-red-500 text-sm hover:underline",children:""})]},K)),R.jsx("button",{onClick:()=>i({...t,contexts:[...t.contexts||[],{term:"",explainer:""}]}),className:"text-blue-600 text-sm hover:underline",children:" Add new context term"})]}),R.jsx("button",{onClick:async()=>{if(!t.overview){alert("Please write an overview first!");return}try{if(!window.confirm("Use GPT to suggest contextual explainers?"))return;d(!0);const{generateContexts:K}=await d_(async()=>{const{generateContexts:le}=await Promise.resolve().then(()=>f_);return{generateContexts:le}},void 0),q=await K(t.overview);if(!q||q.length===0){alert("No terms found.");return}const Z=[...t.contexts||[],...q];i({...t,contexts:Z}),alert(` Added ${q.length} suggested context terms.`)}catch(F){console.error(" GPT error:",F),alert("Failed to fetch GPT suggestions. Check console.")}finally{d(!1)}},className:"text-purple-600 text-sm hover:underline mt-2",children:" Suggest Contexts with GPT"}),R.jsx("button",{onClick:rt,disabled:c,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:c?"Saving...":"Save Metadata"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Chronology of Events"}),R.jsxs("div",{className:"flex gap-3 items-center",children:[R.jsx("button",{onClick:xe,disabled:C,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:C?"Generating":" Generate Timeline"}),R.jsx("button",{onClick:z,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:" Add Event"}),R.jsx("button",{onClick:async()=>{if(!(!n||!t))try{d(!0),await Zn(n,{timeline:t.timeline,phases:t.phases||[]}),E(!1),alert(" Timeline saved successfully!")}catch(F){console.error(" Timeline save failed:",F),alert(" Failed to save timeline.")}finally{d(!1)}},className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" Save Timeline"}),R.jsx("button",{onClick:()=>Fe(!pe),className:"text-sm text-blue-600 hover:underline",children:pe?"Hide":"Show"})]})]}),pe&&R.jsx(R.Fragment,{children:t.timeline.length===0?R.jsx("p",{className:"text-gray-500 mb-3",children:"No events yet."}):R.jsx("div",{className:"space-y-4 mb-4",children:t.timeline.map((F,K)=>R.jsxs("div",{className:"mb-6",children:[R.jsx("button",{className:"text-purple-600 text-xs hover:underline mb-2",onClick:()=>{const q={title:"New Phase",startIndex:K,endIndex:K},Z=[...t.phases||[],q];i({...t,phases:Z}),E(!0)},children:" Insert Phase Here"}),(t.phases||[]).filter(q=>q.startIndex===K).map(q=>{const Z=(t.phases||[]).indexOf(q),le=t.timeline.length,me=Math.max(q.startIndex,le>0?le-1:q.startIndex),be=Math.min(Math.max(q.startIndex,q.endIndex??q.startIndex),me),ke=t.timeline[q.startIndex]?.event||`Event ${q.startIndex+1}`;return R.jsxs("div",{className:"border border-purple-300 bg-purple-50 p-3 rounded mb-3",children:[R.jsx("input",{value:q.title||"",onChange:it=>{const yt=[...t.phases||[]];yt[Z]={...q,title:it.target.value},i({...t,phases:yt}),E(!0)},className:"border p-2 rounded w-full",placeholder:"Phase title"}),R.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Starts at event #",q.startIndex+1,": ",ke]}),R.jsxs("label",{className:"text-xs text-gray-600 mt-2 block",children:["End this phase after event",R.jsx("select",{className:"border p-2 rounded w-full mt-1 text-sm",value:be,onChange:it=>{const yt=Number(it.target.value),dn=Math.max(q.startIndex,yt),fn=[...t.phases||[]];fn[Z]={...q,endIndex:dn},i({...t,phases:fn}),E(!0)},children:t.timeline.map((it,yt)=>R.jsxs("option",{value:yt,disabled:yt<q.startIndex,children:["#",yt+1,"  ",it.event||`Event ${yt+1}`]},`phase-${Z}-end-${yt}`))})]}),R.jsx("button",{className:"text-red-600 text-xs mt-1 hover:underline",onClick:()=>{const it=(t.phases||[]).filter((yt,dn)=>dn!==Z);i({...t,phases:it}),E(!0)},children:" Remove Phase"})]},`phase-${Z}`)}),R.jsxs("div",{className:"border p-3 rounded",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[R.jsx("input",{value:F.date||"",onChange:q=>J(K,"date",q.target.value),placeholder:"Date",className:"border p-2 rounded"}),R.jsx("input",{value:F.event,onChange:q=>J(K,"event",q.target.value),placeholder:"Event",className:"border p-2 rounded"}),R.jsx("input",{value:F.imageUrl||"",onChange:q=>J(K,"imageUrl",q.target.value),placeholder:"Image URL",className:"border p-2 rounded"}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sources"}),(F.sources||[]).map((q,Z)=>R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("input",{value:q.link,onChange:le=>{const me=[...F.sources||[]];me[Z].link=le.target.value,J(K,"sources",me)},placeholder:`Source link #${Z+1}`,className:"border p-2 rounded w-full"}),R.jsx("button",{onClick:()=>{const le=(F.sources||[]).filter((me,be)=>be!==Z);J(K,"sources",le)},className:"text-red-600 text-sm hover:underline",children:""})]},Z)),R.jsx("button",{onClick:()=>{const q=[...F.sources||[],{title:"",link:"",sourceName:""}];J(K,"sources",q)},className:"text-blue-600 text-sm hover:underline",children:" Add another link"})]})]}),R.jsx("textarea",{value:F.description||"",onChange:q=>{J(K,"description",q.target.value)},onSelect:q=>x(`timeline-${K}`,q.target),placeholder:"Description",rows:2,className:"border p-2 rounded w-full mb-2"}),R.jsx("button",{onClick:()=>Ge(`timeline-${K}`,F.description||"",q=>{const Z=[...t.timeline];Z[K]={...F,description:q},i({...t,timeline:Z})}),className:"text-blue-600 text-xs hover:underline mb-2",children:" Link selected text"}),R.jsx("div",{className:"text-sm text-gray-700 mt-2",children:p_(F.description??"")}),R.jsxs("div",{className:"mt-2",children:[R.jsx("h4",{className:"text-sm font-medium mb-1",children:"Context Explainers"}),(F.contexts||[]).map((q,Z)=>R.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[R.jsx("input",{type:"text",value:q.term,onChange:le=>{const me=[...F.contexts||[]];me[Z].term=le.target.value,J(K,"contexts",me)},placeholder:"Term",className:"border p-1 rounded flex-1"}),R.jsx("input",{type:"text",value:q.explainer,onChange:le=>{const me=[...F.contexts||[]];me[Z].explainer=le.target.value,J(K,"contexts",me)},placeholder:"Explainer",className:"border p-1 rounded flex-[2]"}),R.jsx("button",{onClick:()=>{const le=(F.contexts||[]).filter((me,be)=>be!==Z);J(K,"contexts",le)},className:"text-red-600 text-xs hover:underline",children:""})]},Z)),R.jsx("button",{onClick:()=>{const q=[...F.contexts||[],{term:"",explainer:""}];J(K,"contexts",q)},className:"text-blue-600 text-xs hover:underline",children:" Add term"})]}),R.jsx("button",{onClick:async()=>{try{d(!0);const q=await y0(F);if(!q?.length){alert("No contextual terms found for this event.");return}const Z=[...F.contexts||[],...q];J(K,"contexts",Z),alert(` Added ${q.length} contextual explainers for this event.`)}catch(q){console.error("GPT error (event contexts):",q),alert(" Failed to generate contexts for this event.")}finally{d(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),R.jsx("button",{onClick:async()=>{const q=F.event?.trim(),Z=F.description?.trim();if(!q||!Z){alert("Please add an event title and description first.");return}const le={event:q,description:Z,contexts:F.contexts||[]};if(!le.contexts.length){alert("Please add at least one term first.");return}try{d(!0);const{generateExplainersForEvent:me}=await d_(async()=>{const{generateExplainersForEvent:it}=await Promise.resolve().then(()=>f_);return{generateExplainersForEvent:it}},void 0),be=await me(le);if(!be.length){alert("No explainers returned.");return}const ke=(le.contexts||[]).map(it=>{const yt=be.find(dn=>dn.term.toLowerCase()===it.term.toLowerCase());return yt?{...it,explainer:yt.explainer}:it});J(K,"contexts",ke),alert(` Added ${be.length} explainers.`)}catch(me){console.error("GPT error:",me),alert("Failed to generate explainers for this event.")}finally{d(!1)}},className:"text-purple-600 text-xs hover:underline mt-2 block",children:" Generate Explainers for this Event"}),R.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Importance"}),R.jsxs("select",{value:F.significance,onChange:q=>J(K,"significance",Number(q.target.value)),className:"border p-2 rounded mb-2",children:[R.jsx("option",{value:1,children:"Low"}),R.jsx("option",{value:2,children:"Medium"}),R.jsx("option",{value:3,children:"High"})]}),R.jsxs("div",{className:"flex gap-4 items-center mt-2",children:[R.jsx("button",{onClick:()=>Ce(K),className:"text-red-600 text-sm hover:underline",children:"Delete"}),R.jsx("button",{onClick:()=>Be(K,F),className:"text-blue-600 text-sm hover:underline",children:" Fetch Top Sources"}),R.jsx("button",{onClick:async()=>{if(n)try{d(!0),await c_(n,K,t.timeline[K]),E(!1),alert(" Event saved!")}catch(q){console.error(q),alert(" Failed to save event.")}finally{d(!1)}},className:"text-green-600 text-sm hover:underline",children:" Save Event"})]}),F.sources&&F.sources.length>0&&R.jsxs("div",{className:"mt-3 border-t pt-2",children:[R.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Top Sources:"}),R.jsx("div",{className:"space-y-2",children:F.sources.map((q,Z)=>R.jsxs("div",{className:"flex items-center space-x-3 border p-2 rounded-md hover:bg-gray-50",children:[q.imageUrl&&R.jsx("img",{src:q.imageUrl,alt:q.title,className:"w-10 h-10 object-cover rounded",onError:le=>{le.currentTarget.src=`${new URL(q.link).origin}/favicon.ico`}}),R.jsxs("div",{className:"flex flex-col",children:[R.jsx("a",{href:q.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium hover:underline",children:q.title}),R.jsx("span",{className:"text-gray-500 text-xs",children:q.sourceName})]})]},Z))})]})]})]},K))})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Analysis"}),R.jsx("button",{onClick:ge,disabled:N,className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:N?"Generating":" Generate Analysis"})]}),Me&&R.jsx("div",{className:"space-y-4",children:["stakeholders","faqs","future"].map(F=>{const K=t.analysis,q=K?.[F]||[],Z={stakeholders:"Stakeholders",faqs:"FAQs",future:"Future Questions"};return R.jsxs("details",{className:"border rounded-lg p-3 group",children:[R.jsxs("summary",{className:"cursor-pointer font-semibold text-blue-700 select-none flex justify-between items-center",children:[Z[F],R.jsx("span",{className:"text-gray-500 group-open:rotate-90 transition-transform",children:""})]}),R.jsxs("div",{className:"mt-2 space-y-3",children:[R.jsxs("button",{onClick:()=>{const le={...t},me=K?.[F]||[],be=F==="stakeholders"?{name:"",detail:""}:{question:"",answer:""};le.analysis={...K,[F]:[...me,be]},i(le)},className:"text-sm text-green-700 hover:underline",children:[" Add ",Z[F].slice(0,-1)]}),R.jsx("button",{onClick:async()=>{const le=t.analysis?.[F]||[];if(!le.length){alert("No items to analyze yet.");return}try{d(!0);const me=await v0(F,le);if(!me?.length){alert("No contextual terms found.");return}const be={...t.analysis||{}},ke=[...be.contexts||[],...me];be.contexts=ke,i({...t,analysis:be}),alert(` Added ${me.length} contextual explainers from ${F}.`)}catch(me){console.error("GPT error (analysis contexts):",me),alert(" Failed to generate analysis contexts.")}finally{d(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),q.length===0?R.jsxs("p",{className:"text-sm text-gray-500",children:["No ",Z[F]," yet."]}):R.jsx("ul",{className:"space-y-2",children:q.map((le,me)=>R.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border text-sm space-y-2",children:[F==="stakeholders"?R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"text",value:le.name,onChange:be=>{const ke={...t};ke.analysis[F][me].name=be.target.value,i(ke)},onSelect:be=>x(`stakeholder-name-${me}`,be.target),placeholder:"Name",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>Ge(`stakeholder-name-${me}`,le.name||"",be=>{const ke={...t};ke.analysis[F][me].name=be,i(ke)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),R.jsx("textarea",{value:le.detail,onChange:be=>{const ke={...t};ke.analysis[F][me].detail=be.target.value,i(ke)},onSelect:be=>x(`stakeholder-detail-${me}`,be.target),placeholder:"Detail",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>Ge(`stakeholder-detail-${me}`,le.detail||"",be=>{const ke={...t};ke.analysis[F][me].detail=be,i(ke)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}):R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"text",value:le.question,onChange:be=>{const ke={...t};ke.analysis[F][me].question=be.target.value,i(ke)},onSelect:be=>x(`${F}-question-${me}`,be.target),placeholder:"Question",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>Ge(`${F}-question-${me}`,le.question||"",be=>{const ke={...t};ke.analysis[F][me].question=be,i(ke)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),R.jsx("textarea",{value:le.answer,onChange:be=>{const ke={...t};ke.analysis[F][me].answer=be.target.value,i(ke)},onSelect:be=>x(`${F}-answer-${me}`,be.target),placeholder:"Answer",className:"w-full border p-1 rounded"}),R.jsx("button",{type:"button",onClick:()=>Ge(`${F}-answer-${me}`,le.answer||"",be=>{const ke={...t};ke.analysis[F][me].answer=be,i(ke)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}),R.jsx("button",{onClick:()=>{const be={...t},ke=[...K?.[F]||[]];ke.splice(me,1),be.analysis={...K,[F]:ke},i(be)},className:"text-xs text-red-600 hover:underline",children:"Delete"})]},me))})]})]},F)})}),R.jsxs("div",{className:"mt-6 border-t pt-4",children:[R.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analysis Context Explainers"}),R.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"These terms will be highlighted within Stakeholders, FAQs, and Future sections."}),(t.analysis?.contexts||[]).map((F,K)=>R.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[R.jsx("input",{type:"text",value:F.term,onChange:q=>{const Z={...t.analysis||{}},le=[...Z.contexts||[]];le[K]={...le[K],term:q.target.value},Z.contexts=le,i({...t,analysis:Z})},placeholder:"Term",className:"border p-2 rounded flex-1"}),R.jsx("input",{type:"text",value:F.explainer,onChange:q=>{const Z={...t.analysis||{}},le=[...Z.contexts||[]];le[K]={...le[K],explainer:q.target.value},Z.contexts=le,i({...t,analysis:Z})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),R.jsx("button",{type:"button",onClick:()=>{const q={...t.analysis||{}},Z=(q.contexts||[]).filter((le,me)=>me!==K);q.contexts=Z,i({...t,analysis:q})},className:"text-red-600 text-sm hover:underline",children:""})]},K)),R.jsx("button",{type:"button",onClick:()=>{const F={...t.analysis||{}};F.contexts=[...F.contexts||[],{term:"",explainer:""}],i({...t,analysis:F})},className:"text-blue-600 text-sm hover:underline",children:" Add analysis context term"})]}),R.jsx("button",{onClick:async()=>{if(n)try{await Zn(n,{analysis:t.analysis}),E(!1),alert(" Analysis saved successfully!")}catch(F){console.error(F),alert(" Failed to save analysis: "+F.message)}},className:"mt-4 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:" Save Analysis"})]})]}):R.jsx("div",{className:"p-6 text-red-500",children:"Draft not found"})}function hN(){const[n,e]=X.useState({gpt:{timelinePrompt:`You are a precise news editor. 
Given a topic, generate a concise chronological timeline of 1015 key events.
Each event must include:
- date (YYYY-MM-DD)
- short event title
- 12 sentence factual description
- significance (1=low, 2=medium, 3=high)
Return only valid JSON with key "timeline".`,analysisPrompt:`You are a political analyst creating structured insights.
Given a topic and overview, produce three sections:
1. stakeholders  list key people/institutions and their roles.
2. faqs  questions readers might have with concise answers.
3. future  forward-looking questions with reasoned answers.
Keep all responses factual, under 50 words each. Return valid JSON with key "analysis".`},serper:{prompt:"title"}}),[t,i]=X.useState(!0),[o,l]=X.useState(!1);X.useEffect(()=>{(async()=>{try{const d=Li(ai,"settings","global"),p=await wh(d);if(p.exists()){const y=p.data();e({gpt:{timelinePrompt:y?.gpt?.timelinePrompt||n.gpt.timelinePrompt,analysisPrompt:y?.gpt?.analysisPrompt||n.gpt.analysisPrompt},serper:{prompt:y?.serper?.prompt||n.serper.prompt}})}}catch(d){console.error(" Failed to load prompts:",d)}finally{i(!1)}})()},[]);const c=async()=>{try{l(!0);const d=Li(ai,"settings","global");await Up(d,n,{merge:!0}),alert(" Prompts saved successfully!")}catch(d){console.error(d),alert(" Failed to save prompts")}finally{l(!1)}};return t?R.jsx("div",{className:"p-6",children:"Loading..."}):R.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[R.jsx("h1",{className:"text-3xl font-bold",children:" Prompt Editor"}),R.jsx("p",{className:"text-gray-600 mb-4",children:"Edit the default text templates used by GPT and Serper for content generation."}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Timeline Prompt"}),R.jsx("textarea",{value:n.gpt.timelinePrompt,onChange:d=>e({...n,gpt:{...n.gpt,timelinePrompt:d.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Analysis Prompt"}),R.jsx("textarea",{value:n.gpt.analysisPrompt,onChange:d=>e({...n,gpt:{...n.gpt,analysisPrompt:d.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),R.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Serper  Search Prompt"}),R.jsxs("p",{className:"text-sm text-gray-600",children:["This text defines what query is sent to Serper for event coverage. If left as ",R.jsx("code",{children:"title"}),", the drafts event title will be used by default."]}),R.jsx("textarea",{value:n.serper.prompt,onChange:d=>e({...n,serper:{prompt:d.target.value}}),className:"w-full border rounded p-3 h-24 text-sm",placeholder:"Example: Find recent, credible articles about {{topic}}."})]}),R.jsx("button",{onClick:c,disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:o?"Saving":" Save All Prompts"})]})}function dN(){const[n,e]=X.useState(""),[t,i]=X.useState(""),[o,l]=X.useState(""),[c,d]=X.useState("login"),[p,y]=X.useState(!1),[_,E]=X.useState(null),T=async()=>{if(E(null),!n||!t){E("Please enter an email and password.");return}if(c==="signup"&&t!==o){E("Passwords do not match.");return}try{y(!0),c==="login"?await Mx(u_,n,t):await Vx(u_,n,t),window.location.href="/app"}catch(P){E(P.message||"Authentication failed.")}finally{y(!1)}};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:R.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow p-8",children:[R.jsx("h1",{className:"text-2xl font-bold mb-4",children:c==="login"?"CMS Login":"Create CMS Account"}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("input",{placeholder:"Email",type:"email",value:n,onChange:P=>e(P.target.value),className:"border p-2 w-full rounded"}),R.jsx("input",{placeholder:"Password",type:"password",value:t,onChange:P=>i(P.target.value),className:"border p-2 w-full rounded"}),c==="signup"&&R.jsx("input",{placeholder:"Confirm Password",type:"password",value:o,onChange:P=>l(P.target.value),className:"border p-2 w-full rounded"})]}),_&&R.jsx("p",{className:"text-red-600 text-sm mt-3",children:_}),R.jsx("button",{type:"button",onClick:T,disabled:p,className:"mt-4 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-60",children:p?"Please wait":c==="login"?"Login":"Sign Up"}),R.jsxs("p",{className:"text-sm text-gray-600 mt-4 text-center",children:[c==="login"?"Need an account?":"Already have an account?"," ",R.jsx("button",{type:"button",onClick:()=>d(P=>P==="login"?"signup":"login"),className:"text-blue-600 hover:underline font-medium",children:c==="login"?"Sign Up":"Log In"})]})]})})}const fN=rS([{path:"/login",element:R.jsx(dN,{})},{path:"/app",element:R.jsx(wS,{}),children:[{index:!0,element:R.jsxs("div",{className:"p-6",children:[R.jsx("h1",{className:"text-3xl font-bold",children:"Welcome to WaitWhat? CMS"}),R.jsx("p",{className:"text-gray-600 mt-2",children:"Use the sidebar to manage Theme and Story drafts, or adjust prompts in the Prompt Lab."})]})},{path:"drafts/themes",element:R.jsx(tN,{})},{path:"drafts/stories",element:R.jsx(nN,{})},{path:"drafts/:id",element:R.jsx(cN,{})},{path:"promptlab",element:R.jsx(hN,{})}]},{path:"*",element:R.jsx(KI,{to:"/login",replace:!0})}]);NT.createRoot(document.getElementById("root")).render(R.jsx(g_.StrictMode,{children:R.jsx(hS,{router:fN})}));
