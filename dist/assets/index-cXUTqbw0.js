function T_(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ep(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nf={exports:{}},pl={},rf={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function kT(){if(dy)return rt;dy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function $(j,X,Ae){this.props=j,this.context=X,this.refs=U,this.updater=Ae||A}$.prototype.isReactComponent={},$.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},$.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function pe(){}pe.prototype=$.prototype;function ee(j,X,Ae){this.props=j,this.context=X,this.refs=U,this.updater=Ae||A}var de=ee.prototype=new pe;de.constructor=ee,V(de,$.prototype),de.isPureReactComponent=!0;var me=Array.isArray,je=Object.prototype.hasOwnProperty,Fe={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(j,X,Ae){var He,De={},Ue=null,Ke=null;if(X!=null)for(He in X.ref!==void 0&&(Ke=X.ref),X.key!==void 0&&(Ue=""+X.key),X)je.call(X,He)&&!x.hasOwnProperty(He)&&(De[He]=X[He]);var et=arguments.length-2;if(et===1)De.children=Ae;else if(1<et){for(var yt=Array(et),zt=0;zt<et;zt++)yt[zt]=arguments[zt+2];De.children=yt}if(j&&j.defaultProps)for(He in et=j.defaultProps,et)De[He]===void 0&&(De[He]=et[He]);return{$$typeof:n,type:j,key:Ue,ref:Ke,props:De,_owner:Fe.current}}function P(j,X){return{$$typeof:n,type:j.type,key:X,ref:j.ref,props:j.props,_owner:j._owner}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function L(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ae){return X[Ae]})}var F=/\/+/g;function k(j,X){return typeof j=="object"&&j!==null&&j.key!=null?L(""+j.key):X.toString(36)}function Ye(j,X,Ae,He,De){var Ue=typeof j;(Ue==="undefined"||Ue==="boolean")&&(j=null);var Ke=!1;if(j===null)Ke=!0;else switch(Ue){case"string":case"number":Ke=!0;break;case"object":switch(j.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=j,De=De(Ke),j=He===""?"."+k(Ke,0):He,me(De)?(Ae="",j!=null&&(Ae=j.replace(F,"$&/")+"/"),Ye(De,X,Ae,"",function(zt){return zt})):De!=null&&(b(De)&&(De=P(De,Ae+(!De.key||Ke&&Ke.key===De.key?"":(""+De.key).replace(F,"$&/")+"/")+j)),X.push(De)),1;if(Ke=0,He=He===""?".":He+":",me(j))for(var et=0;et<j.length;et++){Ue=j[et];var yt=He+k(Ue,et);Ke+=Ye(Ue,X,Ae,yt,De)}else if(yt=S(j),typeof yt=="function")for(j=yt.call(j),et=0;!(Ue=j.next()).done;)Ue=Ue.value,yt=He+k(Ue,et++),Ke+=Ye(Ue,X,Ae,yt,De);else if(Ue==="object")throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ke}function St(j,X,Ae){if(j==null)return j;var He=[],De=0;return Ye(j,He,"","",function(Ue){return X.call(Ae,Ue,De++)}),He}function Vt(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(Ae){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ae)},function(Ae){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ae)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var ot={current:null},ae={transition:null},Ne={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:ae,ReactCurrentOwner:Fe};function ge(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:St,forEach:function(j,X,Ae){St(j,function(){X.apply(this,arguments)},Ae)},count:function(j){var X=0;return St(j,function(){X++}),X},toArray:function(j){return St(j,function(X){return X})||[]},only:function(j){if(!b(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},rt.Component=$,rt.Fragment=t,rt.Profiler=o,rt.PureComponent=ee,rt.StrictMode=i,rt.Suspense=p,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,rt.act=ge,rt.cloneElement=function(j,X,Ae){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var He=V({},j.props),De=j.key,Ue=j.ref,Ke=j._owner;if(X!=null){if(X.ref!==void 0&&(Ue=X.ref,Ke=Fe.current),X.key!==void 0&&(De=""+X.key),j.type&&j.type.defaultProps)var et=j.type.defaultProps;for(yt in X)je.call(X,yt)&&!x.hasOwnProperty(yt)&&(He[yt]=X[yt]===void 0&&et!==void 0?et[yt]:X[yt])}var yt=arguments.length-2;if(yt===1)He.children=Ae;else if(1<yt){et=Array(yt);for(var zt=0;zt<yt;zt++)et[zt]=arguments[zt+2];He.children=et}return{$$typeof:n,type:j.type,key:De,ref:Ue,props:He,_owner:Ke}},rt.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},rt.createElement=C,rt.createFactory=function(j){var X=C.bind(null,j);return X.type=j,X},rt.createRef=function(){return{current:null}},rt.forwardRef=function(j){return{$$typeof:h,render:j}},rt.isValidElement=b,rt.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Vt}},rt.memo=function(j,X){return{$$typeof:y,type:j,compare:X===void 0?null:X}},rt.startTransition=function(j){var X=ae.transition;ae.transition={};try{j()}finally{ae.transition=X}},rt.unstable_act=ge,rt.useCallback=function(j,X){return ot.current.useCallback(j,X)},rt.useContext=function(j){return ot.current.useContext(j)},rt.useDebugValue=function(){},rt.useDeferredValue=function(j){return ot.current.useDeferredValue(j)},rt.useEffect=function(j,X){return ot.current.useEffect(j,X)},rt.useId=function(){return ot.current.useId()},rt.useImperativeHandle=function(j,X,Ae){return ot.current.useImperativeHandle(j,X,Ae)},rt.useInsertionEffect=function(j,X){return ot.current.useInsertionEffect(j,X)},rt.useLayoutEffect=function(j,X){return ot.current.useLayoutEffect(j,X)},rt.useMemo=function(j,X){return ot.current.useMemo(j,X)},rt.useReducer=function(j,X,Ae){return ot.current.useReducer(j,X,Ae)},rt.useRef=function(j){return ot.current.useRef(j)},rt.useState=function(j){return ot.current.useState(j)},rt.useSyncExternalStore=function(j,X,Ae){return ot.current.useSyncExternalStore(j,X,Ae)},rt.useTransition=function(){return ot.current.useTransition()},rt.version="18.3.1",rt}var hy;function tp(){return hy||(hy=1,rf.exports=kT()),rf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function NT(){if(fy)return pl;fy=1;var n=tp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,y){var _,w={},S=null,A=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(A=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(w[_]=p[_]);if(h&&h.defaultProps)for(_ in p=h.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:h,key:S,ref:A,props:w,_owner:o.current}}return pl.Fragment=t,pl.jsx=c,pl.jsxs=c,pl}var py;function bT(){return py||(py=1,nf.exports=NT()),nf.exports}var T=bT(),Y=tp();const S_=ep(Y),DT=T_({__proto__:null,default:S_},[Y]);var cc={},sf={exports:{}},Hn={},of={exports:{}},af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function OT(){return my||(my=1,(function(n){function e(ae,Ne){var ge=ae.length;ae.push(Ne);e:for(;0<ge;){var j=ge-1>>>1,X=ae[j];if(0<o(X,Ne))ae[j]=Ne,ae[ge]=X,ge=j;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var Ne=ae[0],ge=ae.pop();if(ge!==Ne){ae[0]=ge;e:for(var j=0,X=ae.length,Ae=X>>>1;j<Ae;){var He=2*(j+1)-1,De=ae[He],Ue=He+1,Ke=ae[Ue];if(0>o(De,ge))Ue<X&&0>o(Ke,De)?(ae[j]=Ke,ae[Ue]=ge,j=Ue):(ae[j]=De,ae[He]=ge,j=He);else if(Ue<X&&0>o(Ke,ge))ae[j]=Ke,ae[Ue]=ge,j=Ue;else break e}}return Ne}function o(ae,Ne){var ge=ae.sortIndex-Ne.sortIndex;return ge!==0?ge:ae.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],y=[],_=1,w=null,S=3,A=!1,V=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(ae){for(var Ne=t(y);Ne!==null;){if(Ne.callback===null)i(y);else if(Ne.startTime<=ae)i(y),Ne.sortIndex=Ne.expirationTime,e(p,Ne);else break;Ne=t(y)}}function me(ae){if(U=!1,de(ae),!V)if(t(p)!==null)V=!0,Vt(je);else{var Ne=t(y);Ne!==null&&ot(me,Ne.startTime-ae)}}function je(ae,Ne){V=!1,U&&(U=!1,pe(C),C=-1),A=!0;var ge=S;try{for(de(Ne),w=t(p);w!==null&&(!(w.expirationTime>Ne)||ae&&!L());){var j=w.callback;if(typeof j=="function"){w.callback=null,S=w.priorityLevel;var X=j(w.expirationTime<=Ne);Ne=n.unstable_now(),typeof X=="function"?w.callback=X:w===t(p)&&i(p),de(Ne)}else i(p);w=t(p)}if(w!==null)var Ae=!0;else{var He=t(y);He!==null&&ot(me,He.startTime-Ne),Ae=!1}return Ae}finally{w=null,S=ge,A=!1}}var Fe=!1,x=null,C=-1,P=5,b=-1;function L(){return!(n.unstable_now()-b<P)}function F(){if(x!==null){var ae=n.unstable_now();b=ae;var Ne=!0;try{Ne=x(!0,ae)}finally{Ne?k():(Fe=!1,x=null)}}else Fe=!1}var k;if(typeof ee=="function")k=function(){ee(F)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,St=Ye.port2;Ye.port1.onmessage=F,k=function(){St.postMessage(null)}}else k=function(){$(F,0)};function Vt(ae){x=ae,Fe||(Fe=!0,k())}function ot(ae,Ne){C=$(function(){ae(n.unstable_now())},Ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){V||A||(V=!0,Vt(je))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var Ne=3;break;default:Ne=S}var ge=S;S=Ne;try{return ae()}finally{S=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,Ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ge=S;S=ae;try{return Ne()}finally{S=ge}},n.unstable_scheduleCallback=function(ae,Ne,ge){var j=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?j+ge:j):ge=j,ae){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ge+X,ae={id:_++,callback:Ne,priorityLevel:ae,startTime:ge,expirationTime:X,sortIndex:-1},ge>j?(ae.sortIndex=ge,e(y,ae),t(p)===null&&ae===t(y)&&(U?(pe(C),C=-1):U=!0,ot(me,ge-j))):(ae.sortIndex=X,e(p,ae),V||A||(V=!0,Vt(je))),ae},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ae){var Ne=S;return function(){var ge=S;S=Ne;try{return ae.apply(this,arguments)}finally{S=ge}}}})(af)),af}var gy;function LT(){return gy||(gy=1,of.exports=OT()),of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function VT(){if(yy)return Hn;yy=1;var n=tp(),e=LT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function S(r){return p.call(w,r)?!0:p.call(_,r)?!1:y.test(r)?w[r]=!0:(_[r]=!0,!1)}function A(r,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function V(r,s,a,d){if(s===null||typeof s>"u"||A(r,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,a,d,f,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){$[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];$[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){$[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){$[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){$[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){$[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){$[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){$[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){$[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(pe,ee);$[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(pe,ee);$[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(pe,ee);$[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){$[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),$.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){$[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function de(r,s,a,d){var f=$.hasOwnProperty(s)?$[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(V(s,a,f,d)&&(a=null),d||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,s,a):r.setAttribute(s,a))))}var me=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,je=Symbol.for("react.element"),Fe=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),ot=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Ne(r){return r===null||typeof r!="object"?null:(r=ae&&r[ae]||r["@@iterator"],typeof r=="function"?r:null)}var ge=Object.assign,j;function X(r){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var Ae=!1;function He(r,s){if(!r||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var d=Q}Reflect.construct(r,[],s)}else{try{s.call()}catch(Q){d=Q}r.call(s.prototype)}else{try{throw Error()}catch(Q){d=Q}r()}}catch(Q){if(Q&&d&&typeof Q.stack=="string"){for(var f=Q.stack.split(`
`),g=d.stack.split(`
`),E=f.length-1,R=g.length-1;1<=E&&0<=R&&f[E]!==g[R];)R--;for(;1<=E&&0<=R;E--,R--)if(f[E]!==g[R]){if(E!==1||R!==1)do if(E--,R--,0>R||f[E]!==g[R]){var O=`
`+f[E].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=E&&0<=R);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?X(r):""}function De(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=He(r.type,!1),r;case 11:return r=He(r.type.render,!1),r;case 1:return r=He(r.type,!0),r;default:return""}}function Ue(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case Fe:return"Portal";case P:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case Ye:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case St:return s=r.displayName||null,s!==null?s:Ue(r.type)||"Memo";case Vt:s=r._payload,r=r._init;try{return Ue(r(s))}catch{}}return null}function Ke(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function et(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function yt(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zt(r){var s=yt(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){d=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Jn(r){r._valueTracker||(r._valueTracker=zt(r))}function bt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return r&&(d=yt(r)?r.checked?"true":"false":r.value),r=d,r!==a?(s.setValue(r),!0):!1}function dn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ur(r,s){var a=s.checked;return ge({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function zr(r,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=et(s.value!=null?s.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(r,s){s=s.checked,s!=null&&de(r,"checked",s,!1)}function yi(r,s){gt(r,s);var a=et(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?N(r,s.type,a):s.hasOwnProperty("defaultValue")&&N(r,s.type,et(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function $i(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function N(r,s,a){(s!=="number"||dn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var G=Array.isArray;function q(r,s,a,d){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+et(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Z(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ge({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function se(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(G(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:et(a)}}function ue(r,s){var a=et(s.value),d=et(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function ye(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Te(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Je(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Te(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var tt,xt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,d,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(tt=tt||document.createElement("div"),tt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=tt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function At(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sr=["Webkit","ms","Moz","O"];Object.keys(wn).forEach(function(r){Sr.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),wn[s]=wn[r]})});function En(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||wn.hasOwnProperty(r)&&wn[r]?(""+s).trim():s+"px"}function Br(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=En(a,s[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var $r=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hi(r,s){if(s){if($r[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Us(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=null;function Ir(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var vi=null,Tn=null,Ln=null;function Wi(r){if(r=Za(r)){if(typeof vi!="function")throw Error(t(280));var s=r.stateNode;s&&(s=xu(s),vi(r.stateNode,r.type,s))}}function Yn(r){Tn?Ln?Ln.push(r):Ln=[r]:Tn=r}function zs(){if(Tn){var r=Tn,s=Ln;if(Ln=Tn=null,Wi(r),s)for(r=0;r<s.length;r++)Wi(s[r])}}function Wr(r,s){return r(s)}function qr(){}var Vn=!1;function Bs(r,s,a){if(Vn)return r(s,a);Vn=!0;try{return Wr(r,s,a)}finally{Vn=!1,(Tn!==null||Ln!==null)&&(qr(),zs())}}function Mt(r,s){var a=r.stateNode;if(a===null)return null;var d=xu(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var D=!1;if(h)try{var z={};Object.defineProperty(z,"passive",{get:function(){D=!0}}),window.addEventListener("test",z,z),window.removeEventListener("test",z,z)}catch{D=!1}function K(r,s,a,d,f,g,E,R,O){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(a,Q)}catch(oe){this.onError(oe)}}var ne=!1,fe=null,Ie=!1,Le=null,xe={onError:function(r){ne=!0,fe=r}};function Se(r,s,a,d,f,g,E,R,O){ne=!1,fe=null,K.apply(xe,arguments)}function _e(r,s,a,d,f,g,E,R,O){if(Se.apply(this,arguments),ne){if(ne){var Q=fe;ne=!1,fe=null}else throw Error(t(198));Ie||(Ie=!0,Le=Q)}}function we(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function ze(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function qe(r){if(we(r)!==r)throw Error(t(188))}function Bt(r){var s=r.alternate;if(!s){if(s=we(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return qe(f),r;if(g===d)return qe(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var E=!1,R=f.child;R;){if(R===a){E=!0,a=f,d=g;break}if(R===d){E=!0,d=f,a=g;break}R=R.sibling}if(!E){for(R=g.child;R;){if(R===a){E=!0,a=g,d=f;break}if(R===d){E=!0,d=g,a=f;break}R=R.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function pt(r){return r=Bt(r),r!==null?nt(r):null}function nt(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=nt(r);if(s!==null)return s;r=r.sibling}return null}var wt=e.unstable_scheduleCallback,cr=e.unstable_cancelCallback,Gr=e.unstable_shouldYield,Xn=e.unstable_requestPaint,it=e.unstable_now,qi=e.unstable_getCurrentPriorityLevel,Zn=e.unstable_ImmediatePriority,Sn=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Kr=e.unstable_LowPriority,st=e.unstable_IdlePriority,vt=null,qt=null;function Qr(r){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(vt,r,void 0,(r.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:ko,dr=Math.log,$s=Math.LN2;function ko(r){return r>>>=0,r===0?32:31-(dr(r)/$s|0)|0}var No=64,bo=4194304;function Gi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Hs(r,s){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var R=E&~f;R!==0?d=Gi(R):(g&=E,g!==0&&(d=Gi(g)))}else E=a&~f,E!==0?d=Gi(E):g!==0&&(d=Gi(g));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)a=31-at(s),f=1<<a,d|=r[a],s&=~f;return d}function bd(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(r,s){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-at(g),R=1<<E,O=f[E];O===-1?((R&a)===0||(R&d)!==0)&&(f[E]=bd(R,s)):O<=s&&(r.expiredLanes|=R),g&=~R}}function er(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ws(){var r=No;return No<<=1,(No&4194240)===0&&(No=64),r}function Ki(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Qi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-at(s),r[s]=a}function It(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-at(a),g=1<<f;s[f]=0,d[f]=-1,r[f]=-1,a&=~g}}function Ji(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var d=31-at(a),f=1<<d;f&s|r[d]&s&&(r[d]|=s),a&=~f}}var ct=0;function Yi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var iu,Do,su,ou,au,Fa=!1,Jr=[],fn=null,xr=null,Cr=null,Xi=new Map,hr=new Map,Yr=[],Dd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(r,s){switch(r){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Xi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(s.pointerId)}}function Mn(r,s,a,d,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Za(s),s!==null&&Do(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Od(r,s,a,d,f){switch(s){case"focusin":return fn=Mn(fn,r,s,a,d,f),!0;case"dragenter":return xr=Mn(xr,r,s,a,d,f),!0;case"mouseover":return Cr=Mn(Cr,r,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return Xi.set(g,Mn(Xi.get(g)||null,r,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,hr.set(g,Mn(hr.get(g)||null,r,s,a,d,f)),!0}return!1}function uu(r){var s=Js(r.target);if(s!==null){var a=we(s);if(a!==null){if(s=a.tag,s===13){if(s=ze(a),s!==null){r.blockedOn=s,au(r.priority,function(){su(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wi(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Oo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);Hr=d,a.target.dispatchEvent(d),Hr=null}else return s=Za(a),s!==null&&Do(s),r.blockedOn=a,!1;s.shift()}return!0}function qs(r,s,a){wi(r)&&a.delete(s)}function cu(){Fa=!1,fn!==null&&wi(fn)&&(fn=null),xr!==null&&wi(xr)&&(xr=null),Cr!==null&&wi(Cr)&&(Cr=null),Xi.forEach(qs),hr.forEach(qs)}function Ar(r,s){r.blockedOn===s&&(r.blockedOn=null,Fa||(Fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cu)))}function Pr(r){function s(f){return Ar(f,r)}if(0<Jr.length){Ar(Jr[0],r);for(var a=1;a<Jr.length;a++){var d=Jr[a];d.blockedOn===r&&(d.blockedOn=null)}}for(fn!==null&&Ar(fn,r),xr!==null&&Ar(xr,r),Cr!==null&&Ar(Cr,r),Xi.forEach(s),hr.forEach(s),a=0;a<Yr.length;a++)d=Yr[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<Yr.length&&(a=Yr[0],a.blockedOn===null);)uu(a),a.blockedOn===null&&Yr.shift()}var Ei=me.ReactCurrentBatchConfig,Zi=!0;function Dt(r,s,a,d){var f=ct,g=Ei.transition;Ei.transition=null;try{ct=1,ja(r,s,a,d)}finally{ct=f,Ei.transition=g}}function Ld(r,s,a,d){var f=ct,g=Ei.transition;Ei.transition=null;try{ct=4,ja(r,s,a,d)}finally{ct=f,Ei.transition=g}}function ja(r,s,a,d){if(Zi){var f=Oo(r,s,a,d);if(f===null)qd(r,s,d,Gs,a),lu(r,d);else if(Od(f,r,s,a,d))d.stopPropagation();else if(lu(r,d),s&4&&-1<Dd.indexOf(r)){for(;f!==null;){var g=Za(f);if(g!==null&&iu(g),g=Oo(r,s,a,d),g===null&&qd(r,s,d,Gs,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else qd(r,s,d,null,a)}}var Gs=null;function Oo(r,s,a,d){if(Gs=null,r=Ir(d),r=Js(r),r!==null)if(s=we(r),s===null)r=null;else if(a=s.tag,a===13){if(r=ze(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Gs=r,null}function Ua(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qi()){case Zn:return 1;case Sn:return 4;case hn:case Kr:return 16;case st:return 536870912;default:return 16}default:return 16}}var tr=null,Lo=null,Fn=null;function za(){if(Fn)return Fn;var r,s=Lo,a=s.length,d,f="value"in tr?tr.value:tr.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var E=a-r;for(d=1;d<=E&&s[a-d]===f[g-d];d++);return Fn=f.slice(r,1<d?1-d:void 0)}function Vo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Xr(){return!0}function Ba(){return!1}function pn(r){function s(a,d,f,g,E){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(a=r[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xr:Ba,this.isPropagationStopped=Ba,this}return ge(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),s}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mo=pn(Rr),Zr=ge({},Rr,{view:0,detail:0}),Vd=pn(Zr),Fo,Ti,es,Ks=ge({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==es&&(es&&r.type==="mousemove"?(Fo=r.screenX-es.screenX,Ti=r.screenY-es.screenY):Ti=Fo=0,es=r),Fo)},movementY:function(r){return"movementY"in r?r.movementY:Ti}}),jo=pn(Ks),$a=ge({},Ks,{dataTransfer:0}),du=pn($a),Uo=ge({},Zr,{relatedTarget:0}),zo=pn(Uo),hu=ge({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=pn(hu),fu=ge({},Rr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),pu=pn(fu),mu=ge({},Rr,{data:0}),Ha=pn(mu),Bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=gu[r])?!!s[r]:!1}function ei(){return yu}var u=ge({},Zr,{key:function(r){if(r.key){var s=Bo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Vo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(r){return r.type==="keypress"?Vo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Vo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=pn(u),v=ge({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=pn(v),B=ge({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),J=pn(B),he=ge({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Et=pn(he),en=ge({},Ks,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),dt=pn(en),on=[9,13,27,32],Gt=h&&"CompositionEvent"in window,fr=null;h&&"documentMode"in document&&(fr=document.documentMode);var nr=h&&"TextEvent"in window&&!fr,Qs=h&&(!Gt||fr&&8<fr&&11>=fr),$o=" ",sm=!1;function om(r,s){switch(r){case"keyup":return on.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function am(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ho=!1;function AE(r,s){switch(r){case"compositionend":return am(s);case"keypress":return s.which!==32?null:(sm=!0,$o);case"textInput":return r=s.data,r===$o&&sm?null:r;default:return null}}function PE(r,s){if(Ho)return r==="compositionend"||!Gt&&om(r,s)?(r=za(),Fn=Lo=tr=null,Ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qs&&s.locale!=="ko"?null:s.data;default:return null}}var RE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!RE[r.type]:s==="textarea"}function um(r,s,a,d){Yn(d),s=Tu(s,"onChange"),0<s.length&&(a=new Mo("onChange","change",null,a,d),r.push({event:a,listeners:s}))}var Wa=null,qa=null;function kE(r){Am(r,0)}function vu(r){var s=Qo(r);if(bt(s))return r}function NE(r,s){if(r==="change")return s}var cm=!1;if(h){var Md;if(h){var Fd="oninput"in document;if(!Fd){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),Fd=typeof dm.oninput=="function"}Md=Fd}else Md=!1;cm=Md&&(!document.documentMode||9<document.documentMode)}function hm(){Wa&&(Wa.detachEvent("onpropertychange",fm),qa=Wa=null)}function fm(r){if(r.propertyName==="value"&&vu(qa)){var s=[];um(s,qa,r,Ir(r)),Bs(kE,s)}}function bE(r,s,a){r==="focusin"?(hm(),Wa=s,qa=a,Wa.attachEvent("onpropertychange",fm)):r==="focusout"&&hm()}function DE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(qa)}function OE(r,s){if(r==="click")return vu(s)}function LE(r,s){if(r==="input"||r==="change")return vu(s)}function VE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var kr=typeof Object.is=="function"?Object.is:VE;function Ga(r,s){if(kr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(s,f)||!kr(r[f],s[f]))return!1}return!0}function pm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function mm(r,s){var a=pm(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=s&&d>=s)return{node:a,offset:s-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pm(a)}}function gm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?gm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ym(){for(var r=window,s=dn();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=dn(r.document)}return s}function jd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function ME(r){var s=ym(),a=r.focusedElem,d=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&gm(a.ownerDocument.documentElement,a)){if(d!==null&&jd(a)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!r.extend&&g>d&&(f=d,d=g,g=f),f=mm(a,g);var E=mm(a,d);f&&E&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>d?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var FE=h&&"documentMode"in document&&11>=document.documentMode,Wo=null,Ud=null,Ka=null,zd=!1;function vm(r,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zd||Wo==null||Wo!==dn(d)||(d=Wo,"selectionStart"in d&&jd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ka&&Ga(Ka,d)||(Ka=d,d=Tu(Ud,"onSelect"),0<d.length&&(s=new Mo("onSelect","select",null,s,a),r.push({event:s,listeners:d}),s.target=Wo)))}function _u(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var qo={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionend:_u("Transition","TransitionEnd")},Bd={},_m={};h&&(_m=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function wu(r){if(Bd[r])return Bd[r];if(!qo[r])return r;var s=qo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in _m)return Bd[r]=s[a];return r}var wm=wu("animationend"),Em=wu("animationiteration"),Tm=wu("animationstart"),Sm=wu("transitionend"),Im=new Map,xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(r,s){Im.set(r,s),l(s,[r])}for(var $d=0;$d<xm.length;$d++){var Hd=xm[$d],jE=Hd.toLowerCase(),UE=Hd[0].toUpperCase()+Hd.slice(1);ts(jE,"on"+UE)}ts(wm,"onAnimationEnd"),ts(Em,"onAnimationIteration"),ts(Tm,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(Sm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function Cm(r,s,a){var d=r.type||"unknown-event";r.currentTarget=a,_e(d,s,void 0,r),r.currentTarget=null}function Am(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var E=d.length-1;0<=E;E--){var R=d[E],O=R.instance,Q=R.currentTarget;if(R=R.listener,O!==g&&f.isPropagationStopped())break e;Cm(f,R,Q),g=O}else for(E=0;E<d.length;E++){if(R=d[E],O=R.instance,Q=R.currentTarget,R=R.listener,O!==g&&f.isPropagationStopped())break e;Cm(f,R,Q),g=O}}}if(Ie)throw r=Le,Ie=!1,Le=null,r}function Pt(r,s){var a=s[Xd];a===void 0&&(a=s[Xd]=new Set);var d=r+"__bubble";a.has(d)||(Pm(s,r,2,!1),a.add(d))}function Wd(r,s,a){var d=0;s&&(d|=4),Pm(a,r,d,s)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function Ja(r){if(!r[Eu]){r[Eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(zE.has(a)||Wd(a,!1,r),Wd(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Eu]||(s[Eu]=!0,Wd("selectionchange",!1,s))}}function Pm(r,s,a,d){switch(Ua(s)){case 1:var f=Dt;break;case 4:f=Ld;break;default:f=ja}a=f.bind(null,s,a,r),f=void 0,!D||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function qd(r,s,a,d,f){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var R=d.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(E===4)for(E=d.return;E!==null;){var O=E.tag;if((O===3||O===4)&&(O=E.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;E=E.return}for(;R!==null;){if(E=Js(R),E===null)return;if(O=E.tag,O===5||O===6){d=g=E;continue e}R=R.parentNode}}d=d.return}Bs(function(){var Q=g,oe=Ir(a),le=[];e:{var ie=Im.get(r);if(ie!==void 0){var ve=Mo,Pe=r;switch(r){case"keypress":if(Vo(a)===0)break e;case"keydown":case"keyup":ve=m;break;case"focusin":Pe="focus",ve=zo;break;case"focusout":Pe="blur",ve=zo;break;case"beforeblur":case"afterblur":ve=zo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=J;break;case wm:case Em:case Tm:ve=Si;break;case Sm:ve=Et;break;case"scroll":ve=Vd;break;case"wheel":ve=dt;break;case"copy":case"cut":case"paste":ve=pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=I}var Re=(s&4)!==0,Ht=!Re&&r==="scroll",H=Re?ie!==null?ie+"Capture":null:ie;Re=[];for(var M=Q,W;M!==null;){W=M;var ce=W.stateNode;if(W.tag===5&&ce!==null&&(W=ce,H!==null&&(ce=Mt(M,H),ce!=null&&Re.push(Ya(M,ce,W)))),Ht)break;M=M.return}0<Re.length&&(ie=new ve(ie,Pe,null,a,oe),le.push({event:ie,listeners:Re}))}}if((s&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",ve=r==="mouseout"||r==="pointerout",ie&&a!==Hr&&(Pe=a.relatedTarget||a.fromElement)&&(Js(Pe)||Pe[Ii]))break e;if((ve||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ve?(Pe=a.relatedTarget||a.toElement,ve=Q,Pe=Pe?Js(Pe):null,Pe!==null&&(Ht=we(Pe),Pe!==Ht||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(ve=null,Pe=Q),ve!==Pe)){if(Re=jo,ce="onMouseLeave",H="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Re=I,ce="onPointerLeave",H="onPointerEnter",M="pointer"),Ht=ve==null?ie:Qo(ve),W=Pe==null?ie:Qo(Pe),ie=new Re(ce,M+"leave",ve,a,oe),ie.target=Ht,ie.relatedTarget=W,ce=null,Js(oe)===Q&&(Re=new Re(H,M+"enter",Pe,a,oe),Re.target=W,Re.relatedTarget=Ht,ce=Re),Ht=ce,ve&&Pe)t:{for(Re=ve,H=Pe,M=0,W=Re;W;W=Go(W))M++;for(W=0,ce=H;ce;ce=Go(ce))W++;for(;0<M-W;)Re=Go(Re),M--;for(;0<W-M;)H=Go(H),W--;for(;M--;){if(Re===H||H!==null&&Re===H.alternate)break t;Re=Go(Re),H=Go(H)}Re=null}else Re=null;ve!==null&&Rm(le,ie,ve,Re,!1),Pe!==null&&Ht!==null&&Rm(le,Ht,Pe,Re,!0)}}e:{if(ie=Q?Qo(Q):window,ve=ie.nodeName&&ie.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ie.type==="file")var be=NE;else if(lm(ie))if(cm)be=LE;else{be=DE;var Ve=bE}else(ve=ie.nodeName)&&ve.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(be=OE);if(be&&(be=be(r,Q))){um(le,be,a,oe);break e}Ve&&Ve(r,ie,Q),r==="focusout"&&(Ve=ie._wrapperState)&&Ve.controlled&&ie.type==="number"&&N(ie,"number",ie.value)}switch(Ve=Q?Qo(Q):window,r){case"focusin":(lm(Ve)||Ve.contentEditable==="true")&&(Wo=Ve,Ud=Q,Ka=null);break;case"focusout":Ka=Ud=Wo=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,vm(le,a,oe);break;case"selectionchange":if(FE)break;case"keydown":case"keyup":vm(le,a,oe)}var Me;if(Gt)e:{switch(r){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Ho?om(r,a)&&(We="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(We="onCompositionStart");We&&(Qs&&a.locale!=="ko"&&(Ho||We!=="onCompositionStart"?We==="onCompositionEnd"&&Ho&&(Me=za()):(tr=oe,Lo="value"in tr?tr.value:tr.textContent,Ho=!0)),Ve=Tu(Q,We),0<Ve.length&&(We=new Ha(We,r,null,a,oe),le.push({event:We,listeners:Ve}),Me?We.data=Me:(Me=am(a),Me!==null&&(We.data=Me)))),(Me=nr?AE(r,a):PE(r,a))&&(Q=Tu(Q,"onBeforeInput"),0<Q.length&&(oe=new Ha("onBeforeInput","beforeinput",null,a,oe),le.push({event:oe,listeners:Q}),oe.data=Me))}Am(le,s)})}function Ya(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Tu(r,s){for(var a=s+"Capture",d=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Mt(r,a),g!=null&&d.unshift(Ya(r,g,f)),g=Mt(r,s),g!=null&&d.push(Ya(r,g,f))),r=r.return}return d}function Go(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Rm(r,s,a,d,f){for(var g=s._reactName,E=[];a!==null&&a!==d;){var R=a,O=R.alternate,Q=R.stateNode;if(O!==null&&O===d)break;R.tag===5&&Q!==null&&(R=Q,f?(O=Mt(a,g),O!=null&&E.unshift(Ya(a,O,R))):f||(O=Mt(a,g),O!=null&&E.push(Ya(a,O,R)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var BE=/\r\n?/g,$E=/\u0000|\uFFFD/g;function km(r){return(typeof r=="string"?r:""+r).replace(BE,`
`).replace($E,"")}function Su(r,s,a){if(s=km(s),km(r)!==s&&a)throw Error(t(425))}function Iu(){}var Gd=null,Kd=null;function Qd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jd=typeof setTimeout=="function"?setTimeout:void 0,HE=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,WE=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(r){return Nm.resolve(null).then(r).catch(qE)}:Jd;function qE(r){setTimeout(function(){throw r})}function Yd(r,s){var a=s,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),Pr(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);Pr(s)}function ns(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function bm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),ti="__reactFiber$"+Ko,Xa="__reactProps$"+Ko,Ii="__reactContainer$"+Ko,Xd="__reactEvents$"+Ko,GE="__reactListeners$"+Ko,KE="__reactHandles$"+Ko;function Js(r){var s=r[ti];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Ii]||a[ti]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=bm(r);r!==null;){if(a=r[ti])return a;r=bm(r)}return s}r=a,a=r.parentNode}return null}function Za(r){return r=r[ti]||r[Ii],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Qo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function xu(r){return r[Xa]||null}var Zd=[],Jo=-1;function rs(r){return{current:r}}function Rt(r){0>Jo||(r.current=Zd[Jo],Zd[Jo]=null,Jo--)}function Ct(r,s){Jo++,Zd[Jo]=r.current,r.current=s}var is={},In=rs(is),jn=rs(!1),Ys=is;function Yo(r,s){var a=r.type.contextTypes;if(!a)return is;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Un(r){return r=r.childContextTypes,r!=null}function Cu(){Rt(jn),Rt(In)}function Dm(r,s,a){if(In.current!==is)throw Error(t(168));Ct(In,s),Ct(jn,a)}function Om(r,s,a){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Ke(r)||"Unknown",f));return ge({},a,d)}function Au(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||is,Ys=In.current,Ct(In,r),Ct(jn,jn.current),!0}function Lm(r,s,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=Om(r,s,Ys),d.__reactInternalMemoizedMergedChildContext=r,Rt(jn),Rt(In),Ct(In,r)):Rt(jn),Ct(jn,a)}var xi=null,Pu=!1,eh=!1;function Vm(r){xi===null?xi=[r]:xi.push(r)}function QE(r){Pu=!0,Vm(r)}function ss(){if(!eh&&xi!==null){eh=!0;var r=0,s=ct;try{var a=xi;for(ct=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}xi=null,Pu=!1}catch(f){throw xi!==null&&(xi=xi.slice(r+1)),wt(Zn,ss),f}finally{ct=s,eh=!1}}return null}var Xo=[],Zo=0,Ru=null,ku=0,pr=[],mr=0,Xs=null,Ci=1,Ai="";function Zs(r,s){Xo[Zo++]=ku,Xo[Zo++]=Ru,Ru=r,ku=s}function Mm(r,s,a){pr[mr++]=Ci,pr[mr++]=Ai,pr[mr++]=Xs,Xs=r;var d=Ci;r=Ai;var f=32-at(d)-1;d&=~(1<<f),a+=1;var g=32-at(s)+f;if(30<g){var E=f-f%5;g=(d&(1<<E)-1).toString(32),d>>=E,f-=E,Ci=1<<32-at(s)+f|a<<f|d,Ai=g+r}else Ci=1<<g|a<<f|d,Ai=r}function th(r){r.return!==null&&(Zs(r,1),Mm(r,1,0))}function nh(r){for(;r===Ru;)Ru=Xo[--Zo],Xo[Zo]=null,ku=Xo[--Zo],Xo[Zo]=null;for(;r===Xs;)Xs=pr[--mr],pr[mr]=null,Ai=pr[--mr],pr[mr]=null,Ci=pr[--mr],pr[mr]=null}var rr=null,ir=null,Ot=!1,Nr=null;function Fm(r,s){var a=_r(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function jm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,rr=r,ir=ns(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,rr=r,ir=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Xs!==null?{id:Ci,overflow:Ai}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=_r(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,rr=r,ir=null,!0):!1;default:return!1}}function rh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ih(r){if(Ot){var s=ir;if(s){var a=s;if(!jm(r,s)){if(rh(r))throw Error(t(418));s=ns(a.nextSibling);var d=rr;s&&jm(r,s)?Fm(d,a):(r.flags=r.flags&-4097|2,Ot=!1,rr=r)}}else{if(rh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ot=!1,rr=r}}}function Um(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;rr=r}function Nu(r){if(r!==rr)return!1;if(!Ot)return Um(r),Ot=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Qd(r.type,r.memoizedProps)),s&&(s=ir)){if(rh(r))throw zm(),Error(t(418));for(;s;)Fm(r,s),s=ns(s.nextSibling)}if(Um(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){ir=ns(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}ir=null}}else ir=rr?ns(r.stateNode.nextSibling):null;return!0}function zm(){for(var r=ir;r;)r=ns(r.nextSibling)}function ea(){ir=rr=null,Ot=!1}function sh(r){Nr===null?Nr=[r]:Nr.push(r)}var JE=me.ReactCurrentBatchConfig;function el(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var R=f.refs;E===null?delete R[g]:R[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function bu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Bm(r){var s=r._init;return s(r._payload)}function $m(r){function s(H,M){if(r){var W=H.deletions;W===null?(H.deletions=[M],H.flags|=16):W.push(M)}}function a(H,M){if(!r)return null;for(;M!==null;)s(H,M),M=M.sibling;return null}function d(H,M){for(H=new Map;M!==null;)M.key!==null?H.set(M.key,M):H.set(M.index,M),M=M.sibling;return H}function f(H,M){return H=fs(H,M),H.index=0,H.sibling=null,H}function g(H,M,W){return H.index=W,r?(W=H.alternate,W!==null?(W=W.index,W<M?(H.flags|=2,M):W):(H.flags|=2,M)):(H.flags|=1048576,M)}function E(H){return r&&H.alternate===null&&(H.flags|=2),H}function R(H,M,W,ce){return M===null||M.tag!==6?(M=Jh(W,H.mode,ce),M.return=H,M):(M=f(M,W),M.return=H,M)}function O(H,M,W,ce){var be=W.type;return be===x?oe(H,M,W.props.children,ce,W.key):M!==null&&(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Vt&&Bm(be)===M.type)?(ce=f(M,W.props),ce.ref=el(H,M,W),ce.return=H,ce):(ce=nc(W.type,W.key,W.props,null,H.mode,ce),ce.ref=el(H,M,W),ce.return=H,ce)}function Q(H,M,W,ce){return M===null||M.tag!==4||M.stateNode.containerInfo!==W.containerInfo||M.stateNode.implementation!==W.implementation?(M=Yh(W,H.mode,ce),M.return=H,M):(M=f(M,W.children||[]),M.return=H,M)}function oe(H,M,W,ce,be){return M===null||M.tag!==7?(M=ao(W,H.mode,ce,be),M.return=H,M):(M=f(M,W),M.return=H,M)}function le(H,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Jh(""+M,H.mode,W),M.return=H,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case je:return W=nc(M.type,M.key,M.props,null,H.mode,W),W.ref=el(H,null,M),W.return=H,W;case Fe:return M=Yh(M,H.mode,W),M.return=H,M;case Vt:var ce=M._init;return le(H,ce(M._payload),W)}if(G(M)||Ne(M))return M=ao(M,H.mode,W,null),M.return=H,M;bu(H,M)}return null}function ie(H,M,W,ce){var be=M!==null?M.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return be!==null?null:R(H,M,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case je:return W.key===be?O(H,M,W,ce):null;case Fe:return W.key===be?Q(H,M,W,ce):null;case Vt:return be=W._init,ie(H,M,be(W._payload),ce)}if(G(W)||Ne(W))return be!==null?null:oe(H,M,W,ce,null);bu(H,W)}return null}function ve(H,M,W,ce,be){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return H=H.get(W)||null,R(M,H,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case je:return H=H.get(ce.key===null?W:ce.key)||null,O(M,H,ce,be);case Fe:return H=H.get(ce.key===null?W:ce.key)||null,Q(M,H,ce,be);case Vt:var Ve=ce._init;return ve(H,M,W,Ve(ce._payload),be)}if(G(ce)||Ne(ce))return H=H.get(W)||null,oe(M,H,ce,be,null);bu(M,ce)}return null}function Pe(H,M,W,ce){for(var be=null,Ve=null,Me=M,We=M=0,un=null;Me!==null&&We<W.length;We++){Me.index>We?(un=Me,Me=null):un=Me.sibling;var mt=ie(H,Me,W[We],ce);if(mt===null){Me===null&&(Me=un);break}r&&Me&&mt.alternate===null&&s(H,Me),M=g(mt,M,We),Ve===null?be=mt:Ve.sibling=mt,Ve=mt,Me=un}if(We===W.length)return a(H,Me),Ot&&Zs(H,We),be;if(Me===null){for(;We<W.length;We++)Me=le(H,W[We],ce),Me!==null&&(M=g(Me,M,We),Ve===null?be=Me:Ve.sibling=Me,Ve=Me);return Ot&&Zs(H,We),be}for(Me=d(H,Me);We<W.length;We++)un=ve(Me,H,We,W[We],ce),un!==null&&(r&&un.alternate!==null&&Me.delete(un.key===null?We:un.key),M=g(un,M,We),Ve===null?be=un:Ve.sibling=un,Ve=un);return r&&Me.forEach(function(ps){return s(H,ps)}),Ot&&Zs(H,We),be}function Re(H,M,W,ce){var be=Ne(W);if(typeof be!="function")throw Error(t(150));if(W=be.call(W),W==null)throw Error(t(151));for(var Ve=be=null,Me=M,We=M=0,un=null,mt=W.next();Me!==null&&!mt.done;We++,mt=W.next()){Me.index>We?(un=Me,Me=null):un=Me.sibling;var ps=ie(H,Me,mt.value,ce);if(ps===null){Me===null&&(Me=un);break}r&&Me&&ps.alternate===null&&s(H,Me),M=g(ps,M,We),Ve===null?be=ps:Ve.sibling=ps,Ve=ps,Me=un}if(mt.done)return a(H,Me),Ot&&Zs(H,We),be;if(Me===null){for(;!mt.done;We++,mt=W.next())mt=le(H,mt.value,ce),mt!==null&&(M=g(mt,M,We),Ve===null?be=mt:Ve.sibling=mt,Ve=mt);return Ot&&Zs(H,We),be}for(Me=d(H,Me);!mt.done;We++,mt=W.next())mt=ve(Me,H,We,mt.value,ce),mt!==null&&(r&&mt.alternate!==null&&Me.delete(mt.key===null?We:mt.key),M=g(mt,M,We),Ve===null?be=mt:Ve.sibling=mt,Ve=mt);return r&&Me.forEach(function(RT){return s(H,RT)}),Ot&&Zs(H,We),be}function Ht(H,M,W,ce){if(typeof W=="object"&&W!==null&&W.type===x&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case je:e:{for(var be=W.key,Ve=M;Ve!==null;){if(Ve.key===be){if(be=W.type,be===x){if(Ve.tag===7){a(H,Ve.sibling),M=f(Ve,W.props.children),M.return=H,H=M;break e}}else if(Ve.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Vt&&Bm(be)===Ve.type){a(H,Ve.sibling),M=f(Ve,W.props),M.ref=el(H,Ve,W),M.return=H,H=M;break e}a(H,Ve);break}else s(H,Ve);Ve=Ve.sibling}W.type===x?(M=ao(W.props.children,H.mode,ce,W.key),M.return=H,H=M):(ce=nc(W.type,W.key,W.props,null,H.mode,ce),ce.ref=el(H,M,W),ce.return=H,H=ce)}return E(H);case Fe:e:{for(Ve=W.key;M!==null;){if(M.key===Ve)if(M.tag===4&&M.stateNode.containerInfo===W.containerInfo&&M.stateNode.implementation===W.implementation){a(H,M.sibling),M=f(M,W.children||[]),M.return=H,H=M;break e}else{a(H,M);break}else s(H,M);M=M.sibling}M=Yh(W,H.mode,ce),M.return=H,H=M}return E(H);case Vt:return Ve=W._init,Ht(H,M,Ve(W._payload),ce)}if(G(W))return Pe(H,M,W,ce);if(Ne(W))return Re(H,M,W,ce);bu(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,M!==null&&M.tag===6?(a(H,M.sibling),M=f(M,W),M.return=H,H=M):(a(H,M),M=Jh(W,H.mode,ce),M.return=H,H=M),E(H)):a(H,M)}return Ht}var ta=$m(!0),Hm=$m(!1),Du=rs(null),Ou=null,na=null,oh=null;function ah(){oh=na=Ou=null}function lh(r){var s=Du.current;Rt(Du),r._currentValue=s}function uh(r,s,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===a)break;r=r.return}}function ra(r,s){Ou=r,oh=na=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(zn=!0),r.firstContext=null)}function gr(r){var s=r._currentValue;if(oh!==r)if(r={context:r,memoizedValue:s,next:null},na===null){if(Ou===null)throw Error(t(308));na=r,Ou.dependencies={lanes:0,firstContext:r}}else na=na.next=r;return s}var eo=null;function ch(r){eo===null?eo=[r]:eo.push(r)}function Wm(r,s,a,d){var f=s.interleaved;return f===null?(a.next=a,ch(s)):(a.next=f.next,f.next=a),s.interleaved=a,Pi(r,d)}function Pi(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var os=!1;function dh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ri(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function as(r,s,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ft&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Pi(r,a)}return f=d.interleaved,f===null?(s.next=s,ch(d)):(s.next=f.next,f.next=s),d.interleaved=s,Pi(r,a)}function Lu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Ji(r,a)}}function Gm(r,s){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Vu(r,s,a,d){var f=r.updateQueue;os=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var O=R,Q=O.next;O.next=null,E===null?g=Q:E.next=Q,E=O;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,R=oe.lastBaseUpdate,R!==E&&(R===null?oe.firstBaseUpdate=Q:R.next=Q,oe.lastBaseUpdate=O))}if(g!==null){var le=f.baseState;E=0,oe=Q=O=null,R=g;do{var ie=R.lane,ve=R.eventTime;if((d&ie)===ie){oe!==null&&(oe=oe.next={eventTime:ve,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Pe=r,Re=R;switch(ie=s,ve=a,Re.tag){case 1:if(Pe=Re.payload,typeof Pe=="function"){le=Pe.call(ve,le,ie);break e}le=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Re.payload,ie=typeof Pe=="function"?Pe.call(ve,le,ie):Pe,ie==null)break e;le=ge({},le,ie);break e;case 2:os=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,ie=f.effects,ie===null?f.effects=[R]:ie.push(R))}else ve={eventTime:ve,lane:ie,tag:R.tag,payload:R.payload,callback:R.callback,next:null},oe===null?(Q=oe=ve,O=le):oe=oe.next=ve,E|=ie;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;ie=R,R=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);if(oe===null&&(O=le),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=oe,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ro|=E,r.lanes=E,r.memoizedState=le}}function Km(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var tl={},ni=rs(tl),nl=rs(tl),rl=rs(tl);function to(r){if(r===tl)throw Error(t(174));return r}function hh(r,s){switch(Ct(rl,s),Ct(nl,r),Ct(ni,tl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Je(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Je(s,r)}Rt(ni),Ct(ni,s)}function ia(){Rt(ni),Rt(nl),Rt(rl)}function Qm(r){to(rl.current);var s=to(ni.current),a=Je(s,r.type);s!==a&&(Ct(nl,r),Ct(ni,a))}function fh(r){nl.current===r&&(Rt(ni),Rt(nl))}var Ft=rs(0);function Mu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ph=[];function mh(){for(var r=0;r<ph.length;r++)ph[r]._workInProgressVersionPrimary=null;ph.length=0}var Fu=me.ReactCurrentDispatcher,gh=me.ReactCurrentBatchConfig,no=0,jt=null,tn=null,an=null,ju=!1,il=!1,sl=0,YE=0;function xn(){throw Error(t(321))}function yh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!kr(r[a],s[a]))return!1;return!0}function vh(r,s,a,d,f,g){if(no=g,jt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fu.current=r===null||r.memoizedState===null?tT:nT,r=a(d,f),il){g=0;do{if(il=!1,sl=0,25<=g)throw Error(t(301));g+=1,an=tn=null,s.updateQueue=null,Fu.current=rT,r=a(d,f)}while(il)}if(Fu.current=Bu,s=tn!==null&&tn.next!==null,no=0,an=tn=jt=null,ju=!1,s)throw Error(t(300));return r}function _h(){var r=sl!==0;return sl=0,r}function ri(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?jt.memoizedState=an=r:an=an.next=r,an}function yr(){if(tn===null){var r=jt.alternate;r=r!==null?r.memoizedState:null}else r=tn.next;var s=an===null?jt.memoizedState:an.next;if(s!==null)an=s,tn=r;else{if(r===null)throw Error(t(310));tn=r,r={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},an===null?jt.memoizedState=an=r:an=an.next=r}return an}function ol(r,s){return typeof s=="function"?s(r):s}function wh(r){var s=yr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=tn,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var R=E=null,O=null,Q=g;do{var oe=Q.lane;if((no&oe)===oe)O!==null&&(O=O.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),d=Q.hasEagerState?Q.eagerState:r(d,Q.action);else{var le={lane:oe,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};O===null?(R=O=le,E=d):O=O.next=le,jt.lanes|=oe,ro|=oe}Q=Q.next}while(Q!==null&&Q!==g);O===null?E=d:O.next=R,kr(d,s.memoizedState)||(zn=!0),s.memoizedState=d,s.baseState=E,s.baseQueue=O,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do g=f.lane,jt.lanes|=g,ro|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Eh(r){var s=yr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do g=r(g,E.action),E=E.next;while(E!==f);kr(g,s.memoizedState)||(zn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function Jm(){}function Ym(r,s){var a=jt,d=yr(),f=s(),g=!kr(d.memoizedState,f);if(g&&(d.memoizedState=f,zn=!0),d=d.queue,Th(eg.bind(null,a,d,r),[r]),d.getSnapshot!==s||g||an!==null&&an.memoizedState.tag&1){if(a.flags|=2048,al(9,Zm.bind(null,a,d,f,s),void 0,null),ln===null)throw Error(t(349));(no&30)!==0||Xm(a,s,f)}return f}function Xm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=jt.updateQueue,s===null?(s={lastEffect:null,stores:null},jt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Zm(r,s,a,d){s.value=a,s.getSnapshot=d,tg(s)&&ng(r)}function eg(r,s,a){return a(function(){tg(s)&&ng(r)})}function tg(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!kr(r,a)}catch{return!0}}function ng(r){var s=Pi(r,1);s!==null&&Lr(s,r,1,-1)}function rg(r){var s=ri();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:r},s.queue=r,r=r.dispatch=eT.bind(null,jt,r),[s.memoizedState,r]}function al(r,s,a,d){return r={tag:r,create:s,destroy:a,deps:d,next:null},s=jt.updateQueue,s===null?(s={lastEffect:null,stores:null},jt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,s.lastEffect=r)),r}function ig(){return yr().memoizedState}function Uu(r,s,a,d){var f=ri();jt.flags|=r,f.memoizedState=al(1|s,a,void 0,d===void 0?null:d)}function zu(r,s,a,d){var f=yr();d=d===void 0?null:d;var g=void 0;if(tn!==null){var E=tn.memoizedState;if(g=E.destroy,d!==null&&yh(d,E.deps)){f.memoizedState=al(s,a,g,d);return}}jt.flags|=r,f.memoizedState=al(1|s,a,g,d)}function sg(r,s){return Uu(8390656,8,r,s)}function Th(r,s){return zu(2048,8,r,s)}function og(r,s){return zu(4,2,r,s)}function ag(r,s){return zu(4,4,r,s)}function lg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function ug(r,s,a){return a=a!=null?a.concat([r]):null,zu(4,4,lg.bind(null,s,r),a)}function Sh(){}function cg(r,s){var a=yr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&yh(s,d[1])?d[0]:(a.memoizedState=[r,s],r)}function dg(r,s){var a=yr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&yh(s,d[1])?d[0]:(r=r(),a.memoizedState=[r,s],r)}function hg(r,s,a){return(no&21)===0?(r.baseState&&(r.baseState=!1,zn=!0),r.memoizedState=a):(kr(a,s)||(a=Ws(),jt.lanes|=a,ro|=a,r.baseState=!0),s)}function XE(r,s){var a=ct;ct=a!==0&&4>a?a:4,r(!0);var d=gh.transition;gh.transition={};try{r(!1),s()}finally{ct=a,gh.transition=d}}function fg(){return yr().memoizedState}function ZE(r,s,a){var d=ds(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},pg(r))mg(s,a);else if(a=Wm(r,s,a,d),a!==null){var f=On();Lr(a,r,d,f),gg(a,s,d)}}function eT(r,s,a){var d=ds(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(pg(r))mg(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,R=g(E,a);if(f.hasEagerState=!0,f.eagerState=R,kr(R,E)){var O=s.interleaved;O===null?(f.next=f,ch(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}a=Wm(r,s,f,d),a!==null&&(f=On(),Lr(a,r,d,f),gg(a,s,d))}}function pg(r){var s=r.alternate;return r===jt||s!==null&&s===jt}function mg(r,s){il=ju=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function gg(r,s,a){if((a&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Ji(r,a)}}var Bu={readContext:gr,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},tT={readContext:gr,useCallback:function(r,s){return ri().memoizedState=[r,s===void 0?null:s],r},useContext:gr,useEffect:sg,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Uu(4194308,4,lg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Uu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Uu(4,2,r,s)},useMemo:function(r,s){var a=ri();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var d=ri();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=ZE.bind(null,jt,r),[d.memoizedState,r]},useRef:function(r){var s=ri();return r={current:r},s.memoizedState=r},useState:rg,useDebugValue:Sh,useDeferredValue:function(r){return ri().memoizedState=r},useTransition:function(){var r=rg(!1),s=r[0];return r=XE.bind(null,r[1]),ri().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var d=jt,f=ri();if(Ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),ln===null)throw Error(t(349));(no&30)!==0||Xm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,sg(eg.bind(null,d,g,r),[r]),d.flags|=2048,al(9,Zm.bind(null,d,g,a,s),void 0,null),a},useId:function(){var r=ri(),s=ln.identifierPrefix;if(Ot){var a=Ai,d=Ci;a=(d&~(1<<32-at(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=sl++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=YE++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},nT={readContext:gr,useCallback:cg,useContext:gr,useEffect:Th,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:wh,useRef:ig,useState:function(){return wh(ol)},useDebugValue:Sh,useDeferredValue:function(r){var s=yr();return hg(s,tn.memoizedState,r)},useTransition:function(){var r=wh(ol)[0],s=yr().memoizedState;return[r,s]},useMutableSource:Jm,useSyncExternalStore:Ym,useId:fg,unstable_isNewReconciler:!1},rT={readContext:gr,useCallback:cg,useContext:gr,useEffect:Th,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Eh,useRef:ig,useState:function(){return Eh(ol)},useDebugValue:Sh,useDeferredValue:function(r){var s=yr();return tn===null?s.memoizedState=r:hg(s,tn.memoizedState,r)},useTransition:function(){var r=Eh(ol)[0],s=yr().memoizedState;return[r,s]},useMutableSource:Jm,useSyncExternalStore:Ym,useId:fg,unstable_isNewReconciler:!1};function br(r,s){if(r&&r.defaultProps){s=ge({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Ih(r,s,a,d){s=r.memoizedState,a=a(d,s),a=a==null?s:ge({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var $u={isMounted:function(r){return(r=r._reactInternals)?we(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var d=On(),f=ds(r),g=Ri(d,f);g.payload=s,a!=null&&(g.callback=a),s=as(r,g,f),s!==null&&(Lr(s,r,f,d),Lu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var d=On(),f=ds(r),g=Ri(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=as(r,g,f),s!==null&&(Lr(s,r,f,d),Lu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=On(),d=ds(r),f=Ri(a,d);f.tag=2,s!=null&&(f.callback=s),s=as(r,f,d),s!==null&&(Lr(s,r,d,a),Lu(s,r,d))}};function yg(r,s,a,d,f,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,E):s.prototype&&s.prototype.isPureReactComponent?!Ga(a,d)||!Ga(f,g):!0}function vg(r,s,a){var d=!1,f=is,g=s.contextType;return typeof g=="object"&&g!==null?g=gr(g):(f=Un(s)?Ys:In.current,d=s.contextTypes,g=(d=d!=null)?Yo(r,f):is),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$u,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function _g(r,s,a,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==r&&$u.enqueueReplaceState(s,s.state,null)}function xh(r,s,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},dh(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=gr(g):(g=Un(s)?Ys:In.current,f.context=Yo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Ih(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&$u.enqueueReplaceState(f,f.state,null),Vu(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function sa(r,s){try{var a="",d=s;do a+=De(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Ch(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Ah(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var iT=typeof WeakMap=="function"?WeakMap:Map;function wg(r,s,a){a=Ri(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Ju||(Ju=!0,Bh=d),Ah(r,s)},a}function Eg(r,s,a){a=Ri(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Ah(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ah(r,s),typeof d!="function"&&(us===null?us=new Set([this]):us.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Tg(r,s,a){var d=r.pingCache;if(d===null){d=r.pingCache=new iT;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),r=vT.bind(null,r,s,a),s.then(r,r))}function Sg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Ig(r,s,a,d,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ri(-1,1),s.tag=2,as(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var sT=me.ReactCurrentOwner,zn=!1;function Dn(r,s,a,d){s.child=r===null?Hm(s,null,a,d):ta(s,r.child,a,d)}function xg(r,s,a,d,f){a=a.render;var g=s.ref;return ra(s,f),d=vh(r,s,a,d,g,f),a=_h(),r!==null&&!zn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,ki(r,s,f)):(Ot&&a&&th(s),s.flags|=1,Dn(r,s,d,f),s.child)}function Cg(r,s,a,d,f){if(r===null){var g=a.type;return typeof g=="function"&&!Qh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Ag(r,s,g,d,f)):(r=nc(a.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ga,a(E,d)&&r.ref===s.ref)return ki(r,s,f)}return s.flags|=1,r=fs(g,d),r.ref=s.ref,r.return=s,s.child=r}function Ag(r,s,a,d,f){if(r!==null){var g=r.memoizedProps;if(Ga(g,d)&&r.ref===s.ref)if(zn=!1,s.pendingProps=d=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(zn=!0);else return s.lanes=r.lanes,ki(r,s,f)}return Ph(r,s,a,d,f)}function Pg(r,s,a){var d=s.pendingProps,f=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(aa,sr),sr|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ct(aa,sr),sr|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Ct(aa,sr),sr|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,Ct(aa,sr),sr|=d;return Dn(r,s,f,a),s.child}function Rg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ph(r,s,a,d,f){var g=Un(a)?Ys:In.current;return g=Yo(s,g),ra(s,f),a=vh(r,s,a,d,g,f),d=_h(),r!==null&&!zn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,ki(r,s,f)):(Ot&&d&&th(s),s.flags|=1,Dn(r,s,a,f),s.child)}function kg(r,s,a,d,f){if(Un(a)){var g=!0;Au(s)}else g=!1;if(ra(s,f),s.stateNode===null)Wu(r,s),vg(s,a,d),xh(s,a,d,f),d=!0;else if(r===null){var E=s.stateNode,R=s.memoizedProps;E.props=R;var O=E.context,Q=a.contextType;typeof Q=="object"&&Q!==null?Q=gr(Q):(Q=Un(a)?Ys:In.current,Q=Yo(s,Q));var oe=a.getDerivedStateFromProps,le=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function";le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==d||O!==Q)&&_g(s,E,d,Q),os=!1;var ie=s.memoizedState;E.state=ie,Vu(s,d,E,f),O=s.memoizedState,R!==d||ie!==O||jn.current||os?(typeof oe=="function"&&(Ih(s,a,oe,d),O=s.memoizedState),(R=os||yg(s,a,R,d,ie,O,Q))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=O),E.props=d,E.state=O,E.context=Q,d=R):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{E=s.stateNode,qm(r,s),R=s.memoizedProps,Q=s.type===s.elementType?R:br(s.type,R),E.props=Q,le=s.pendingProps,ie=E.context,O=a.contextType,typeof O=="object"&&O!==null?O=gr(O):(O=Un(a)?Ys:In.current,O=Yo(s,O));var ve=a.getDerivedStateFromProps;(oe=typeof ve=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==le||ie!==O)&&_g(s,E,d,O),os=!1,ie=s.memoizedState,E.state=ie,Vu(s,d,E,f);var Pe=s.memoizedState;R!==le||ie!==Pe||jn.current||os?(typeof ve=="function"&&(Ih(s,a,ve,d),Pe=s.memoizedState),(Q=os||yg(s,a,Q,d,ie,Pe,O)||!1)?(oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Pe,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Pe,O)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Pe),E.props=d,E.state=Pe,E.context=O,d=Q):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),d=!1)}return Rh(r,s,a,d,g,f)}function Rh(r,s,a,d,f,g){Rg(r,s);var E=(s.flags&128)!==0;if(!d&&!E)return f&&Lm(s,a,!1),ki(r,s,g);d=s.stateNode,sT.current=s;var R=E&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&E?(s.child=ta(s,r.child,null,g),s.child=ta(s,null,R,g)):Dn(r,s,R,g),s.memoizedState=d.state,f&&Lm(s,a,!0),s.child}function Ng(r){var s=r.stateNode;s.pendingContext?Dm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Dm(r,s.context,!1),hh(r,s.containerInfo)}function bg(r,s,a,d,f){return ea(),sh(f),s.flags|=256,Dn(r,s,a,d),s.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Nh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Dg(r,s,a){var d=s.pendingProps,f=Ft.current,g=!1,E=(s.flags&128)!==0,R;if((R=E)||(R=r!==null&&r.memoizedState===null?!1:(f&2)!==0),R?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ct(Ft,f&1),r===null)return ih(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=d.children,r=d.fallback,g?(d=s.mode,g=s.child,E={mode:"hidden",children:E},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=rc(E,d,0,null),r=ao(r,d,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Nh(a),s.memoizedState=kh,r):bh(s,E));if(f=r.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return oT(r,s,E,d,R,f,a);if(g){g=d.fallback,E=s.mode,f=r.child,R=f.sibling;var O={mode:"hidden",children:d.children};return(E&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=O,s.deletions=null):(d=fs(f,O),d.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=fs(R,g):(g=ao(g,E,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,E=r.child.memoizedState,E=E===null?Nh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,s.memoizedState=kh,d}return g=r.child,r=g.sibling,d=fs(g,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=d,s.memoizedState=null,d}function bh(r,s){return s=rc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Hu(r,s,a,d){return d!==null&&sh(d),ta(s,r.child,null,a),r=bh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function oT(r,s,a,d,f,g,E){if(a)return s.flags&256?(s.flags&=-257,d=Ch(Error(t(422))),Hu(r,s,E,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=rc({mode:"visible",children:d.children},f,0,null),g=ao(g,f,E,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,(s.mode&1)!==0&&ta(s,r.child,null,E),s.child.memoizedState=Nh(E),s.memoizedState=kh,g);if((s.mode&1)===0)return Hu(r,s,E,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var R=d.dgst;return d=R,g=Error(t(419)),d=Ch(g,d,void 0),Hu(r,s,E,d)}if(R=(E&r.childLanes)!==0,zn||R){if(d=ln,d!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|E))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Pi(r,f),Lr(d,r,f,-1))}return Kh(),d=Ch(Error(t(421))),Hu(r,s,E,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=_T.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,ir=ns(f.nextSibling),rr=s,Ot=!0,Nr=null,r!==null&&(pr[mr++]=Ci,pr[mr++]=Ai,pr[mr++]=Xs,Ci=r.id,Ai=r.overflow,Xs=s),s=bh(s,d.children),s.flags|=4096,s)}function Og(r,s,a){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),uh(r.return,s,a)}function Dh(r,s,a,d,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function Lg(r,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if(Dn(r,s,d.children,a),d=Ft.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Og(r,a,s);else if(r.tag===19)Og(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(Ct(Ft,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Mu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Dh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Mu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Dh(s,!0,a,null,g);break;case"together":Dh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Wu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function ki(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ro|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=fs(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=fs(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function aT(r,s,a){switch(s.tag){case 3:Ng(s),ea();break;case 5:Qm(s);break;case 1:Un(s.type)&&Au(s);break;case 4:hh(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Ct(Du,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Ct(Ft,Ft.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Dg(r,s,a):(Ct(Ft,Ft.current&1),r=ki(r,s,a),r!==null?r.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(r.flags&128)!==0){if(d)return Lg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ct(Ft,Ft.current),d)break;return null;case 22:case 23:return s.lanes=0,Pg(r,s,a)}return ki(r,s,a)}var Vg,Oh,Mg,Fg;Vg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Oh=function(){},Mg=function(r,s,a,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,to(ni.current);var g=null;switch(a){case"input":f=ur(r,f),d=ur(r,d),g=[];break;case"select":f=ge({},f,{value:void 0}),d=ge({},d,{value:void 0}),g=[];break;case"textarea":f=Z(r,f),d=Z(r,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=Iu)}Hi(a,d);var E;a=null;for(Q in f)if(!d.hasOwnProperty(Q)&&f.hasOwnProperty(Q)&&f[Q]!=null)if(Q==="style"){var R=f[Q];for(E in R)R.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(o.hasOwnProperty(Q)?g||(g=[]):(g=g||[]).push(Q,null));for(Q in d){var O=d[Q];if(R=f?.[Q],d.hasOwnProperty(Q)&&O!==R&&(O!=null||R!=null))if(Q==="style")if(R){for(E in R)!R.hasOwnProperty(E)||O&&O.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in O)O.hasOwnProperty(E)&&R[E]!==O[E]&&(a||(a={}),a[E]=O[E])}else a||(g||(g=[]),g.push(Q,a)),a=O;else Q==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,R=R?R.__html:void 0,O!=null&&R!==O&&(g=g||[]).push(Q,O)):Q==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push(Q,""+O):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(o.hasOwnProperty(Q)?(O!=null&&Q==="onScroll"&&Pt("scroll",r),g||R===O||(g=[])):(g=g||[]).push(Q,O))}a&&(g=g||[]).push("style",a);var Q=g;(s.updateQueue=Q)&&(s.flags|=4)}},Fg=function(r,s,a,d){a!==d&&(s.flags|=4)};function ll(r,s){if(!Ot)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Cn(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,s}function lT(r,s,a){var d=s.pendingProps;switch(nh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(s),null;case 1:return Un(s.type)&&Cu(),Cn(s),null;case 3:return d=s.stateNode,ia(),Rt(jn),Rt(In),mh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Nu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nr!==null&&(Wh(Nr),Nr=null))),Oh(r,s),Cn(s),null;case 5:fh(s);var f=to(rl.current);if(a=s.type,r!==null&&s.stateNode!=null)Mg(r,s,a,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Cn(s),null}if(r=to(ni.current),Nu(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[ti]=s,d[Xa]=g,r=(s.mode&1)!==0,a){case"dialog":Pt("cancel",d),Pt("close",d);break;case"iframe":case"object":case"embed":Pt("load",d);break;case"video":case"audio":for(f=0;f<Qa.length;f++)Pt(Qa[f],d);break;case"source":Pt("error",d);break;case"img":case"image":case"link":Pt("error",d),Pt("load",d);break;case"details":Pt("toggle",d);break;case"input":zr(d,g),Pt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Pt("invalid",d);break;case"textarea":se(d,g),Pt("invalid",d)}Hi(a,g),f=null;for(var E in g)if(g.hasOwnProperty(E)){var R=g[E];E==="children"?typeof R=="string"?d.textContent!==R&&(g.suppressHydrationWarning!==!0&&Su(d.textContent,R,r),f=["children",R]):typeof R=="number"&&d.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&Su(d.textContent,R,r),f=["children",""+R]):o.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&Pt("scroll",d)}switch(a){case"input":Jn(d),$i(d,g,!0);break;case"textarea":Jn(d),ye(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Iu)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Te(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=E.createElement(a,{is:d.is}):(r=E.createElement(a),a==="select"&&(E=r,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):r=E.createElementNS(r,a),r[ti]=s,r[Xa]=d,Vg(r,s,!1,!1),s.stateNode=r;e:{switch(E=Us(a,d),a){case"dialog":Pt("cancel",r),Pt("close",r),f=d;break;case"iframe":case"object":case"embed":Pt("load",r),f=d;break;case"video":case"audio":for(f=0;f<Qa.length;f++)Pt(Qa[f],r);f=d;break;case"source":Pt("error",r),f=d;break;case"img":case"image":case"link":Pt("error",r),Pt("load",r),f=d;break;case"details":Pt("toggle",r),f=d;break;case"input":zr(r,d),f=ur(r,d),Pt("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=ge({},d,{value:void 0}),Pt("invalid",r);break;case"textarea":se(r,d),f=Z(r,d),Pt("invalid",r);break;default:f=d}Hi(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var O=R[g];g==="style"?Br(r,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&xt(r,O)):g==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&At(r,O):typeof O=="number"&&At(r,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&Pt("scroll",r):O!=null&&de(r,g,O,E))}switch(a){case"input":Jn(r),$i(r,d,!1);break;case"textarea":Jn(r),ye(r);break;case"option":d.value!=null&&r.setAttribute("value",""+et(d.value));break;case"select":r.multiple=!!d.multiple,g=d.value,g!=null?q(r,!!d.multiple,g,!1):d.defaultValue!=null&&q(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Iu)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Cn(s),null;case 6:if(r&&s.stateNode!=null)Fg(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=to(rl.current),to(ni.current),Nu(s)){if(d=s.stateNode,a=s.memoizedProps,d[ti]=s,(g=d.nodeValue!==a)&&(r=rr,r!==null))switch(r.tag){case 3:Su(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(d.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[ti]=s,s.stateNode=d}return Cn(s),null;case 13:if(Rt(Ft),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ot&&ir!==null&&(s.mode&1)!==0&&(s.flags&128)===0)zm(),ea(),s.flags|=98560,g=!1;else if(g=Nu(s),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ti]=s}else ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Cn(s),g=!1}else Nr!==null&&(Wh(Nr),Nr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Ft.current&1)!==0?nn===0&&(nn=3):Kh())),s.updateQueue!==null&&(s.flags|=4),Cn(s),null);case 4:return ia(),Oh(r,s),r===null&&Ja(s.stateNode.containerInfo),Cn(s),null;case 10:return lh(s.type._context),Cn(s),null;case 17:return Un(s.type)&&Cu(),Cn(s),null;case 19:if(Rt(Ft),g=s.memoizedState,g===null)return Cn(s),null;if(d=(s.flags&128)!==0,E=g.rendering,E===null)if(d)ll(g,!1);else{if(nn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=Mu(r),E!==null){for(s.flags|=128,ll(g,!1),d=E.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,r=d,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ct(Ft,Ft.current&1|2),s.child}r=r.sibling}g.tail!==null&&it()>la&&(s.flags|=128,d=!0,ll(g,!1),s.lanes=4194304)}else{if(!d)if(r=Mu(E),r!==null){if(s.flags|=128,d=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ll(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ot)return Cn(s),null}else 2*it()-g.renderingStartTime>la&&a!==1073741824&&(s.flags|=128,d=!0,ll(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=it(),s.sibling=null,a=Ft.current,Ct(Ft,d?a&1|2:a&1),s):(Cn(s),null);case 22:case 23:return Gh(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(sr&1073741824)!==0&&(Cn(s),s.subtreeFlags&6&&(s.flags|=8192)):Cn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function uT(r,s){switch(nh(s),s.tag){case 1:return Un(s.type)&&Cu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ia(),Rt(jn),Rt(In),mh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return fh(s),null;case 13:if(Rt(Ft),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ea()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Rt(Ft),null;case 4:return ia(),null;case 10:return lh(s.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var qu=!1,An=!1,cT=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function oa(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){$t(r,s,d)}else a.current=null}function Lh(r,s,a){try{a()}catch(d){$t(r,s,d)}}var jg=!1;function dT(r,s){if(Gd=Zi,r=ym(),jd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,R=-1,O=-1,Q=0,oe=0,le=r,ie=null;t:for(;;){for(var ve;le!==a||f!==0&&le.nodeType!==3||(R=E+f),le!==g||d!==0&&le.nodeType!==3||(O=E+d),le.nodeType===3&&(E+=le.nodeValue.length),(ve=le.firstChild)!==null;)ie=le,le=ve;for(;;){if(le===r)break t;if(ie===a&&++Q===f&&(R=E),ie===g&&++oe===d&&(O=E),(ve=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=ve}a=R===-1||O===-1?null:{start:R,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kd={focusedElem:r,selectionRange:a},Zi=!1,Ce=s;Ce!==null;)if(s=Ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Ce=r;else for(;Ce!==null;){s=Ce;try{var Pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Re=Pe.memoizedProps,Ht=Pe.memoizedState,H=s.stateNode,M=H.getSnapshotBeforeUpdate(s.elementType===s.type?Re:br(s.type,Re),Ht);H.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){$t(s,s.return,ce)}if(r=s.sibling,r!==null){r.return=s.return,Ce=r;break}Ce=s.return}return Pe=jg,jg=!1,Pe}function ul(r,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Lh(s,a,g)}f=f.next}while(f!==d)}}function Gu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function Vh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Ug(r){var s=r.alternate;s!==null&&(r.alternate=null,Ug(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ti],delete s[Xa],delete s[Xd],delete s[GE],delete s[KE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function zg(r){return r.tag===5||r.tag===3||r.tag===4}function Bg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||zg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Mh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Iu));else if(d!==4&&(r=r.child,r!==null))for(Mh(r,s,a),r=r.sibling;r!==null;)Mh(r,s,a),r=r.sibling}function Fh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(Fh(r,s,a),r=r.sibling;r!==null;)Fh(r,s,a),r=r.sibling}var mn=null,Dr=!1;function ls(r,s,a){for(a=a.child;a!==null;)$g(r,s,a),a=a.sibling}function $g(r,s,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(vt,a)}catch{}switch(a.tag){case 5:An||oa(a,s);case 6:var d=mn,f=Dr;mn=null,ls(r,s,a),mn=d,Dr=f,mn!==null&&(Dr?(r=mn,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):mn.removeChild(a.stateNode));break;case 18:mn!==null&&(Dr?(r=mn,a=a.stateNode,r.nodeType===8?Yd(r.parentNode,a):r.nodeType===1&&Yd(r,a),Pr(r)):Yd(mn,a.stateNode));break;case 4:d=mn,f=Dr,mn=a.stateNode.containerInfo,Dr=!0,ls(r,s,a),mn=d,Dr=f;break;case 0:case 11:case 14:case 15:if(!An&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&Lh(a,s,E),f=f.next}while(f!==d)}ls(r,s,a);break;case 1:if(!An&&(oa(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(R){$t(a,s,R)}ls(r,s,a);break;case 21:ls(r,s,a);break;case 22:a.mode&1?(An=(d=An)||a.memoizedState!==null,ls(r,s,a),An=d):ls(r,s,a);break;default:ls(r,s,a)}}function Hg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new cT),s.forEach(function(d){var f=wT.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Or(r,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=r,E=s,R=E;e:for(;R!==null;){switch(R.tag){case 5:mn=R.stateNode,Dr=!1;break e;case 3:mn=R.stateNode.containerInfo,Dr=!0;break e;case 4:mn=R.stateNode.containerInfo,Dr=!0;break e}R=R.return}if(mn===null)throw Error(t(160));$g(g,E,f),mn=null,Dr=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch(Q){$t(f,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Wg(s,r),s=s.sibling}function Wg(r,s){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Or(s,r),ii(r),d&4){try{ul(3,r,r.return),Gu(3,r)}catch(Re){$t(r,r.return,Re)}try{ul(5,r,r.return)}catch(Re){$t(r,r.return,Re)}}break;case 1:Or(s,r),ii(r),d&512&&a!==null&&oa(a,a.return);break;case 5:if(Or(s,r),ii(r),d&512&&a!==null&&oa(a,a.return),r.flags&32){var f=r.stateNode;try{At(f,"")}catch(Re){$t(r,r.return,Re)}}if(d&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,R=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&gt(f,g),Us(R,E);var Q=Us(R,g);for(E=0;E<O.length;E+=2){var oe=O[E],le=O[E+1];oe==="style"?Br(f,le):oe==="dangerouslySetInnerHTML"?xt(f,le):oe==="children"?At(f,le):de(f,oe,le,Q)}switch(R){case"input":yi(f,g);break;case"textarea":ue(f,g);break;case"select":var ie=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ve=g.value;ve!=null?q(f,!!g.multiple,ve,!1):ie!==!!g.multiple&&(g.defaultValue!=null?q(f,!!g.multiple,g.defaultValue,!0):q(f,!!g.multiple,g.multiple?[]:"",!1))}f[Xa]=g}catch(Re){$t(r,r.return,Re)}}break;case 6:if(Or(s,r),ii(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(Re){$t(r,r.return,Re)}}break;case 3:if(Or(s,r),ii(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Pr(s.containerInfo)}catch(Re){$t(r,r.return,Re)}break;case 4:Or(s,r),ii(r);break;case 13:Or(s,r),ii(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(zh=it())),d&4&&Hg(r);break;case 22:if(oe=a!==null&&a.memoizedState!==null,r.mode&1?(An=(Q=An)||oe,Or(s,r),An=Q):Or(s,r),ii(r),d&8192){if(Q=r.memoizedState!==null,(r.stateNode.isHidden=Q)&&!oe&&(r.mode&1)!==0)for(Ce=r,oe=r.child;oe!==null;){for(le=Ce=oe;Ce!==null;){switch(ie=Ce,ve=ie.child,ie.tag){case 0:case 11:case 14:case 15:ul(4,ie,ie.return);break;case 1:oa(ie,ie.return);var Pe=ie.stateNode;if(typeof Pe.componentWillUnmount=="function"){d=ie,a=ie.return;try{s=d,Pe.props=s.memoizedProps,Pe.state=s.memoizedState,Pe.componentWillUnmount()}catch(Re){$t(d,a,Re)}}break;case 5:oa(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Kg(le);continue}}ve!==null?(ve.return=ie,Ce=ve):Kg(le)}oe=oe.sibling}e:for(oe=null,le=r;;){if(le.tag===5){if(oe===null){oe=le;try{f=le.stateNode,Q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=le.stateNode,O=le.memoizedProps.style,E=O!=null&&O.hasOwnProperty("display")?O.display:null,R.style.display=En("display",E))}catch(Re){$t(r,r.return,Re)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=Q?"":le.memoizedProps}catch(Re){$t(r,r.return,Re)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===r)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===r)break e;for(;le.sibling===null;){if(le.return===null||le.return===r)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Or(s,r),ii(r),d&4&&Hg(r);break;case 21:break;default:Or(s,r),ii(r)}}function ii(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(zg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(At(f,""),d.flags&=-33);var g=Bg(r);Fh(r,g,f);break;case 3:case 4:var E=d.stateNode.containerInfo,R=Bg(r);Mh(r,R,E);break;default:throw Error(t(161))}}catch(O){$t(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function hT(r,s,a){Ce=r,qg(r)}function qg(r,s,a){for(var d=(r.mode&1)!==0;Ce!==null;){var f=Ce,g=f.child;if(f.tag===22&&d){var E=f.memoizedState!==null||qu;if(!E){var R=f.alternate,O=R!==null&&R.memoizedState!==null||An;R=qu;var Q=An;if(qu=E,(An=O)&&!Q)for(Ce=f;Ce!==null;)E=Ce,O=E.child,E.tag===22&&E.memoizedState!==null?Qg(f):O!==null?(O.return=E,Ce=O):Qg(f);for(;g!==null;)Ce=g,qg(g),g=g.sibling;Ce=f,qu=R,An=Q}Gg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,Ce=g):Gg(r)}}function Gg(r){for(;Ce!==null;){var s=Ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:An||Gu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!An)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:br(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Km(s,g,d);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Km(s,E,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var oe=Q.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&Pr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}An||s.flags&512&&Vh(s)}catch(ie){$t(s,s.return,ie)}}if(s===r){Ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,Ce=a;break}Ce=s.return}}function Kg(r){for(;Ce!==null;){var s=Ce;if(s===r){Ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Ce=a;break}Ce=s.return}}function Qg(r){for(;Ce!==null;){var s=Ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Gu(4,s)}catch(O){$t(s,a,O)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(O){$t(s,f,O)}}var g=s.return;try{Vh(s)}catch(O){$t(s,g,O)}break;case 5:var E=s.return;try{Vh(s)}catch(O){$t(s,E,O)}}}catch(O){$t(s,s.return,O)}if(s===r){Ce=null;break}var R=s.sibling;if(R!==null){R.return=s.return,Ce=R;break}Ce=s.return}}var fT=Math.ceil,Ku=me.ReactCurrentDispatcher,jh=me.ReactCurrentOwner,vr=me.ReactCurrentBatchConfig,ft=0,ln=null,Kt=null,gn=0,sr=0,aa=rs(0),nn=0,cl=null,ro=0,Qu=0,Uh=0,dl=null,Bn=null,zh=0,la=1/0,Ni=null,Ju=!1,Bh=null,us=null,Yu=!1,cs=null,Xu=0,hl=0,$h=null,Zu=-1,ec=0;function On(){return(ft&6)!==0?it():Zu!==-1?Zu:Zu=it()}function ds(r){return(r.mode&1)===0?1:(ft&2)!==0&&gn!==0?gn&-gn:JE.transition!==null?(ec===0&&(ec=Ws()),ec):(r=ct,r!==0||(r=window.event,r=r===void 0?16:Ua(r.type)),r)}function Lr(r,s,a,d){if(50<hl)throw hl=0,$h=null,Error(t(185));Qi(r,a,d),((ft&2)===0||r!==ln)&&(r===ln&&((ft&2)===0&&(Qu|=a),nn===4&&hs(r,gn)),$n(r,d),a===1&&ft===0&&(s.mode&1)===0&&(la=it()+500,Pu&&ss()))}function $n(r,s){var a=r.callbackNode;_i(r,s);var d=Hs(r,r===ln?gn:0);if(d===0)a!==null&&cr(a),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(a!=null&&cr(a),s===1)r.tag===0?QE(Yg.bind(null,r)):Vm(Yg.bind(null,r)),WE(function(){(ft&6)===0&&ss()}),a=null;else{switch(Yi(d)){case 1:a=Zn;break;case 4:a=Sn;break;case 16:a=hn;break;case 536870912:a=st;break;default:a=hn}a=sy(a,Jg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Jg(r,s){if(Zu=-1,ec=0,(ft&6)!==0)throw Error(t(327));var a=r.callbackNode;if(ua()&&r.callbackNode!==a)return null;var d=Hs(r,r===ln?gn:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=tc(r,d);else{s=d;var f=ft;ft|=2;var g=Zg();(ln!==r||gn!==s)&&(Ni=null,la=it()+500,so(r,s));do try{gT();break}catch(R){Xg(r,R)}while(!0);ah(),Ku.current=g,ft=f,Kt!==null?s=0:(ln=null,gn=0,s=nn)}if(s!==0){if(s===2&&(f=er(r),f!==0&&(d=f,s=Hh(r,f))),s===1)throw a=cl,so(r,0),hs(r,d),$n(r,it()),a;if(s===6)hs(r,d);else{if(f=r.current.alternate,(d&30)===0&&!pT(f)&&(s=tc(r,d),s===2&&(g=er(r),g!==0&&(d=g,s=Hh(r,g))),s===1))throw a=cl,so(r,0),hs(r,d),$n(r,it()),a;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:oo(r,Bn,Ni);break;case 3:if(hs(r,d),(d&130023424)===d&&(s=zh+500-it(),10<s)){if(Hs(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){On(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Jd(oo.bind(null,r,Bn,Ni),s);break}oo(r,Bn,Ni);break;case 4:if(hs(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var E=31-at(d);g=1<<E,E=s[E],E>f&&(f=E),d&=~g}if(d=f,d=it()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*fT(d/1960))-d,10<d){r.timeoutHandle=Jd(oo.bind(null,r,Bn,Ni),d);break}oo(r,Bn,Ni);break;case 5:oo(r,Bn,Ni);break;default:throw Error(t(329))}}}return $n(r,it()),r.callbackNode===a?Jg.bind(null,r):null}function Hh(r,s){var a=dl;return r.current.memoizedState.isDehydrated&&(so(r,s).flags|=256),r=tc(r,s),r!==2&&(s=Bn,Bn=a,s!==null&&Wh(s)),r}function Wh(r){Bn===null?Bn=r:Bn.push.apply(Bn,r)}function pT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!kr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hs(r,s){for(s&=~Uh,s&=~Qu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-at(s),d=1<<a;r[a]=-1,s&=~d}}function Yg(r){if((ft&6)!==0)throw Error(t(327));ua();var s=Hs(r,0);if((s&1)===0)return $n(r,it()),null;var a=tc(r,s);if(r.tag!==0&&a===2){var d=er(r);d!==0&&(s=d,a=Hh(r,d))}if(a===1)throw a=cl,so(r,0),hs(r,s),$n(r,it()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,oo(r,Bn,Ni),$n(r,it()),null}function qh(r,s){var a=ft;ft|=1;try{return r(s)}finally{ft=a,ft===0&&(la=it()+500,Pu&&ss())}}function io(r){cs!==null&&cs.tag===0&&(ft&6)===0&&ua();var s=ft;ft|=1;var a=vr.transition,d=ct;try{if(vr.transition=null,ct=1,r)return r()}finally{ct=d,vr.transition=a,ft=s,(ft&6)===0&&ss()}}function Gh(){sr=aa.current,Rt(aa)}function so(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,HE(a)),Kt!==null)for(a=Kt.return;a!==null;){var d=a;switch(nh(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Cu();break;case 3:ia(),Rt(jn),Rt(In),mh();break;case 5:fh(d);break;case 4:ia();break;case 13:Rt(Ft);break;case 19:Rt(Ft);break;case 10:lh(d.type._context);break;case 22:case 23:Gh()}a=a.return}if(ln=r,Kt=r=fs(r.current,null),gn=sr=s,nn=0,cl=null,Uh=Qu=ro=0,Bn=dl=null,eo!==null){for(s=0;s<eo.length;s++)if(a=eo[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var E=g.next;g.next=f,d.next=E}a.pending=d}eo=null}return r}function Xg(r,s){do{var a=Kt;try{if(ah(),Fu.current=Bu,ju){for(var d=jt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}ju=!1}if(no=0,an=tn=jt=null,il=!1,sl=0,jh.current=null,a===null||a.return===null){nn=1,cl=s,Kt=null;break}e:{var g=r,E=a.return,R=a,O=s;if(s=gn,R.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var Q=O,oe=R,le=oe.tag;if((oe.mode&1)===0&&(le===0||le===11||le===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ve=Sg(E);if(ve!==null){ve.flags&=-257,Ig(ve,E,R,g,s),ve.mode&1&&Tg(g,Q,s),s=ve,O=Q;var Pe=s.updateQueue;if(Pe===null){var Re=new Set;Re.add(O),s.updateQueue=Re}else Pe.add(O);break e}else{if((s&1)===0){Tg(g,Q,s),Kh();break e}O=Error(t(426))}}else if(Ot&&R.mode&1){var Ht=Sg(E);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),Ig(Ht,E,R,g,s),sh(sa(O,R));break e}}g=O=sa(O,R),nn!==4&&(nn=2),dl===null?dl=[g]:dl.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var H=wg(g,O,s);Gm(g,H);break e;case 1:R=O;var M=g.type,W=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(us===null||!us.has(W)))){g.flags|=65536,s&=-s,g.lanes|=s;var ce=Eg(g,R,s);Gm(g,ce);break e}}g=g.return}while(g!==null)}ty(a)}catch(be){s=be,Kt===a&&a!==null&&(Kt=a=a.return);continue}break}while(!0)}function Zg(){var r=Ku.current;return Ku.current=Bu,r===null?Bu:r}function Kh(){(nn===0||nn===3||nn===2)&&(nn=4),ln===null||(ro&268435455)===0&&(Qu&268435455)===0||hs(ln,gn)}function tc(r,s){var a=ft;ft|=2;var d=Zg();(ln!==r||gn!==s)&&(Ni=null,so(r,s));do try{mT();break}catch(f){Xg(r,f)}while(!0);if(ah(),ft=a,Ku.current=d,Kt!==null)throw Error(t(261));return ln=null,gn=0,nn}function mT(){for(;Kt!==null;)ey(Kt)}function gT(){for(;Kt!==null&&!Gr();)ey(Kt)}function ey(r){var s=iy(r.alternate,r,sr);r.memoizedProps=r.pendingProps,s===null?ty(r):Kt=s,jh.current=null}function ty(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=lT(a,s,sr),a!==null){Kt=a;return}}else{if(a=uT(a,s),a!==null){a.flags&=32767,Kt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{nn=6,Kt=null;return}}if(s=s.sibling,s!==null){Kt=s;return}Kt=s=r}while(s!==null);nn===0&&(nn=5)}function oo(r,s,a){var d=ct,f=vr.transition;try{vr.transition=null,ct=1,yT(r,s,a,d)}finally{vr.transition=f,ct=d}return null}function yT(r,s,a,d){do ua();while(cs!==null);if((ft&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(It(r,g),r===ln&&(Kt=ln=null,gn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Yu||(Yu=!0,sy(hn,function(){return ua(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=vr.transition,vr.transition=null;var E=ct;ct=1;var R=ft;ft|=4,jh.current=null,dT(r,a),Wg(a,r),ME(Kd),Zi=!!Gd,Kd=Gd=null,r.current=a,hT(a),Xn(),ft=R,ct=E,vr.transition=g}else r.current=a;if(Yu&&(Yu=!1,cs=r,Xu=f),g=r.pendingLanes,g===0&&(us=null),Qr(a.stateNode),$n(r,it()),s!==null)for(d=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Ju)throw Ju=!1,r=Bh,Bh=null,r;return(Xu&1)!==0&&r.tag!==0&&ua(),g=r.pendingLanes,(g&1)!==0?r===$h?hl++:(hl=0,$h=r):hl=0,ss(),null}function ua(){if(cs!==null){var r=Yi(Xu),s=vr.transition,a=ct;try{if(vr.transition=null,ct=16>r?16:r,cs===null)var d=!1;else{if(r=cs,cs=null,Xu=0,(ft&6)!==0)throw Error(t(331));var f=ft;for(ft|=4,Ce=r.current;Ce!==null;){var g=Ce,E=g.child;if((Ce.flags&16)!==0){var R=g.deletions;if(R!==null){for(var O=0;O<R.length;O++){var Q=R[O];for(Ce=Q;Ce!==null;){var oe=Ce;switch(oe.tag){case 0:case 11:case 15:ul(8,oe,g)}var le=oe.child;if(le!==null)le.return=oe,Ce=le;else for(;Ce!==null;){oe=Ce;var ie=oe.sibling,ve=oe.return;if(Ug(oe),oe===Q){Ce=null;break}if(ie!==null){ie.return=ve,Ce=ie;break}Ce=ve}}}var Pe=g.alternate;if(Pe!==null){var Re=Pe.child;if(Re!==null){Pe.child=null;do{var Ht=Re.sibling;Re.sibling=null,Re=Ht}while(Re!==null)}}Ce=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,Ce=E;else e:for(;Ce!==null;){if(g=Ce,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ul(9,g,g.return)}var H=g.sibling;if(H!==null){H.return=g.return,Ce=H;break e}Ce=g.return}}var M=r.current;for(Ce=M;Ce!==null;){E=Ce;var W=E.child;if((E.subtreeFlags&2064)!==0&&W!==null)W.return=E,Ce=W;else e:for(E=M;Ce!==null;){if(R=Ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Gu(9,R)}}catch(be){$t(R,R.return,be)}if(R===E){Ce=null;break e}var ce=R.sibling;if(ce!==null){ce.return=R.return,Ce=ce;break e}Ce=R.return}}if(ft=f,ss(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(vt,r)}catch{}d=!0}return d}finally{ct=a,vr.transition=s}}return!1}function ny(r,s,a){s=sa(a,s),s=wg(r,s,1),r=as(r,s,1),s=On(),r!==null&&(Qi(r,1,s),$n(r,s))}function $t(r,s,a){if(r.tag===3)ny(r,r,a);else for(;s!==null;){if(s.tag===3){ny(s,r,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(us===null||!us.has(d))){r=sa(a,r),r=Eg(s,r,1),s=as(s,r,1),r=On(),s!==null&&(Qi(s,1,r),$n(s,r));break}}s=s.return}}function vT(r,s,a){var d=r.pingCache;d!==null&&d.delete(s),s=On(),r.pingedLanes|=r.suspendedLanes&a,ln===r&&(gn&a)===a&&(nn===4||nn===3&&(gn&130023424)===gn&&500>it()-zh?so(r,0):Uh|=a),$n(r,s)}function ry(r,s){s===0&&((r.mode&1)===0?s=1:(s=bo,bo<<=1,(bo&130023424)===0&&(bo=4194304)));var a=On();r=Pi(r,s),r!==null&&(Qi(r,s,a),$n(r,a))}function _T(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),ry(r,a)}function wT(r,s){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),ry(r,a)}var iy;iy=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||jn.current)zn=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return zn=!1,aT(r,s,a);zn=(r.flags&131072)!==0}else zn=!1,Ot&&(s.flags&1048576)!==0&&Mm(s,ku,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Wu(r,s),r=s.pendingProps;var f=Yo(s,In.current);ra(s,a),f=vh(null,s,d,r,f,a);var g=_h();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Un(d)?(g=!0,Au(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,dh(s),f.updater=$u,s.stateNode=f,f._reactInternals=s,xh(s,d,r,a),s=Rh(null,s,d,!0,g,a)):(s.tag=0,Ot&&g&&th(s),Dn(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Wu(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=TT(d),r=br(d,r),f){case 0:s=Ph(null,s,d,r,a);break e;case 1:s=kg(null,s,d,r,a);break e;case 11:s=xg(null,s,d,r,a);break e;case 14:s=Cg(null,s,d,br(d.type,r),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:br(d,f),Ph(r,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:br(d,f),kg(r,s,d,f,a);case 3:e:{if(Ng(s),r===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,qm(r,s),Vu(s,d,null,a);var E=s.memoizedState;if(d=E.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=sa(Error(t(423)),s),s=bg(r,s,d,a,f);break e}else if(d!==f){f=sa(Error(t(424)),s),s=bg(r,s,d,a,f);break e}else for(ir=ns(s.stateNode.containerInfo.firstChild),rr=s,Ot=!0,Nr=null,a=Hm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ea(),d===f){s=ki(r,s,a);break e}Dn(r,s,d,a)}s=s.child}return s;case 5:return Qm(s),r===null&&ih(s),d=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,E=f.children,Qd(d,f)?E=null:g!==null&&Qd(d,g)&&(s.flags|=32),Rg(r,s),Dn(r,s,E,a),s.child;case 6:return r===null&&ih(s),null;case 13:return Dg(r,s,a);case 4:return hh(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=ta(s,null,d,a):Dn(r,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:br(d,f),xg(r,s,d,f,a);case 7:return Dn(r,s,s.pendingProps,a),s.child;case 8:return Dn(r,s,s.pendingProps.children,a),s.child;case 12:return Dn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,E=f.value,Ct(Du,d._currentValue),d._currentValue=E,g!==null)if(kr(g.value,E)){if(g.children===f.children&&!jn.current){s=ki(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){E=g.child;for(var O=R.firstContext;O!==null;){if(O.context===d){if(g.tag===1){O=Ri(-1,a&-a),O.tag=2;var Q=g.updateQueue;if(Q!==null){Q=Q.shared;var oe=Q.pending;oe===null?O.next=O:(O.next=oe.next,oe.next=O),Q.pending=O}}g.lanes|=a,O=g.alternate,O!==null&&(O.lanes|=a),uh(g.return,a,s),R.lanes|=a;break}O=O.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,R=E.alternate,R!==null&&(R.lanes|=a),uh(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Dn(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,ra(s,a),f=gr(f),d=d(f),s.flags|=1,Dn(r,s,d,a),s.child;case 14:return d=s.type,f=br(d,s.pendingProps),f=br(d.type,f),Cg(r,s,d,f,a);case 15:return Ag(r,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:br(d,f),Wu(r,s),s.tag=1,Un(d)?(r=!0,Au(s)):r=!1,ra(s,a),vg(s,d,f),xh(s,d,f,a),Rh(null,s,d,!0,r,a);case 19:return Lg(r,s,a);case 22:return Pg(r,s,a)}throw Error(t(156,s.tag))};function sy(r,s){return wt(r,s)}function ET(r,s,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(r,s,a,d){return new ET(r,s,a,d)}function Qh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function TT(r){if(typeof r=="function")return Qh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===St)return 14}return 2}function fs(r,s){var a=r.alternate;return a===null?(a=_r(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function nc(r,s,a,d,f,g){var E=2;if(d=r,typeof r=="function")Qh(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case x:return ao(a.children,f,g,s);case C:E=8,f|=8;break;case P:return r=_r(12,a,s,f|2),r.elementType=P,r.lanes=g,r;case k:return r=_r(13,a,s,f),r.elementType=k,r.lanes=g,r;case Ye:return r=_r(19,a,s,f),r.elementType=Ye,r.lanes=g,r;case ot:return rc(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:E=10;break e;case L:E=9;break e;case F:E=11;break e;case St:E=14;break e;case Vt:E=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=_r(E,a,s,f),s.elementType=r,s.type=d,s.lanes=g,s}function ao(r,s,a,d){return r=_r(7,r,d,s),r.lanes=a,r}function rc(r,s,a,d){return r=_r(22,r,d,s),r.elementType=ot,r.lanes=a,r.stateNode={isHidden:!1},r}function Jh(r,s,a){return r=_r(6,r,null,s),r.lanes=a,r}function Yh(r,s,a){return s=_r(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function ST(r,s,a,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Xh(r,s,a,d,f,g,E,R,O){return r=new ST(r,s,a,R,O),s===1?(s=1,g===!0&&(s|=8)):s=0,g=_r(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(g),r}function IT(r,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fe,key:d==null?null:""+d,children:r,containerInfo:s,implementation:a}}function oy(r){if(!r)return is;r=r._reactInternals;e:{if(we(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Un(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Un(a))return Om(r,a,s)}return s}function ay(r,s,a,d,f,g,E,R,O){return r=Xh(a,d,!0,r,f,g,E,R,O),r.context=oy(null),a=r.current,d=On(),f=ds(a),g=Ri(d,f),g.callback=s??null,as(a,g,f),r.current.lanes=f,Qi(r,f,d),$n(r,d),r}function ic(r,s,a,d){var f=s.current,g=On(),E=ds(f);return a=oy(a),s.context===null?s.context=a:s.pendingContext=a,s=Ri(g,E),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=as(f,s,E),r!==null&&(Lr(r,f,E,g),Lu(r,f,E)),E}function sc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ly(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Zh(r,s){ly(r,s),(r=r.alternate)&&ly(r,s)}function xT(){return null}var uy=typeof reportError=="function"?reportError:function(r){console.error(r)};function ef(r){this._internalRoot=r}oc.prototype.render=ef.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));ic(r,s,null,null)},oc.prototype.unmount=ef.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;io(function(){ic(null,r,null,null)}),s[Ii]=null}};function oc(r){this._internalRoot=r}oc.prototype.unstable_scheduleHydration=function(r){if(r){var s=ou();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Yr.length&&s!==0&&s<Yr[a].priority;a++);Yr.splice(a,0,r),a===0&&uu(r)}};function tf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ac(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function cy(){}function CT(r,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var Q=sc(E);g.call(Q)}}var E=ay(s,d,r,0,null,!1,!1,"",cy);return r._reactRootContainer=E,r[Ii]=E.current,Ja(r.nodeType===8?r.parentNode:r),io(),E}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var R=d;d=function(){var Q=sc(O);R.call(Q)}}var O=Xh(r,0,!1,null,null,!1,!1,"",cy);return r._reactRootContainer=O,r[Ii]=O.current,Ja(r.nodeType===8?r.parentNode:r),io(function(){ic(s,O,a,d)}),O}function lc(r,s,a,d,f){var g=a._reactRootContainer;if(g){var E=g;if(typeof f=="function"){var R=f;f=function(){var O=sc(E);R.call(O)}}ic(s,E,r,f)}else E=CT(a,s,r,f,d);return sc(E)}iu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Gi(s.pendingLanes);a!==0&&(Ji(s,a|1),$n(s,it()),(ft&6)===0&&(la=it()+500,ss()))}break;case 13:io(function(){var d=Pi(r,1);if(d!==null){var f=On();Lr(d,r,1,f)}}),Zh(r,1)}},Do=function(r){if(r.tag===13){var s=Pi(r,134217728);if(s!==null){var a=On();Lr(s,r,134217728,a)}Zh(r,134217728)}},su=function(r){if(r.tag===13){var s=ds(r),a=Pi(r,s);if(a!==null){var d=On();Lr(a,r,s,d)}Zh(r,s)}},ou=function(){return ct},au=function(r,s){var a=ct;try{return ct=r,s()}finally{ct=a}},vi=function(r,s,a){switch(s){case"input":if(yi(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==r&&d.form===r.form){var f=xu(d);if(!f)throw Error(t(90));bt(d),yi(d,f)}}}break;case"textarea":ue(r,a);break;case"select":s=a.value,s!=null&&q(r,!!a.multiple,s,!1)}},Wr=qh,qr=io;var AT={usingClientEntryPoint:!1,Events:[Za,Qo,xu,Yn,zs,qh]},fl={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PT={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=pt(r),r===null?null:r.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||xT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{vt=uc.inject(PT),qt=uc}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AT,Hn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tf(s))throw Error(t(200));return IT(r,s,null,a)},Hn.createRoot=function(r,s){if(!tf(r))throw Error(t(299));var a=!1,d="",f=uy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Xh(r,1,!1,null,null,a,!1,d,f),r[Ii]=s.current,Ja(r.nodeType===8?r.parentNode:r),new ef(s)},Hn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=pt(s),r=r===null?null:r.stateNode,r},Hn.flushSync=function(r){return io(r)},Hn.hydrate=function(r,s,a){if(!ac(s))throw Error(t(200));return lc(null,r,s,!0,a)},Hn.hydrateRoot=function(r,s,a){if(!tf(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",E=uy;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=ay(s,null,r,1,a??null,f,!1,g,E),r[Ii]=s.current,Ja(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new oc(s)},Hn.render=function(r,s,a){if(!ac(s))throw Error(t(200));return lc(null,r,s,!1,a)},Hn.unmountComponentAtNode=function(r){if(!ac(r))throw Error(t(40));return r._reactRootContainer?(io(function(){lc(null,null,r,!1,function(){r._reactRootContainer=null,r[Ii]=null})}),!0):!1},Hn.unstable_batchedUpdates=qh,Hn.unstable_renderSubtreeIntoContainer=function(r,s,a,d){if(!ac(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return lc(r,s,a,!1,d)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var vy;function I_(){if(vy)return sf.exports;vy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sf.exports=VT(),sf.exports}var _y;function MT(){if(_y)return cc;_y=1;var n=I_();return cc.createRoot=n.createRoot,cc.hydrateRoot=n.hydrateRoot,cc}var FT=MT();const jT=ep(FT);var x_=I_();const UT=ep(x_),zT=T_({__proto__:null,default:UT},[x_]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lt(){return Lt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Lt.apply(this,arguments)}var Jt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Jt||(Jt={}));const wy="popstate";function BT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:h}=i.location;return bl("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:vo(o)}return HT(e,t,null,n)}function Xe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ea(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $T(){return Math.random().toString(36).substr(2,8)}function Ey(n,e){return{usr:n.state,key:n.key,idx:e}}function bl(n,e,t,i){return t===void 0&&(t=null),Lt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ls(e):e,{state:t,key:e&&e.key||i||$T()})}function vo(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ls(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function HT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,h=Jt.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(Lt({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function w(){h=Jt.Pop;let $=_(),pe=$==null?null:$-y;y=$,p&&p({action:h,location:U.location,delta:pe})}function S($,pe){h=Jt.Push;let ee=bl(U.location,$,pe);y=_()+1;let de=Ey(ee,y),me=U.createHref(ee);try{c.pushState(de,"",me)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;o.location.assign(me)}l&&p&&p({action:h,location:U.location,delta:1})}function A($,pe){h=Jt.Replace;let ee=bl(U.location,$,pe);y=_();let de=Ey(ee,y),me=U.createHref(ee);c.replaceState(de,"",me),l&&p&&p({action:h,location:U.location,delta:0})}function V($){let pe=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof $=="string"?$:vo($);return ee=ee.replace(/ $/,"%20"),Xe(pe,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,pe)}let U={get action(){return h},get location(){return n(o,c)},listen($){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(wy,w),p=$,()=>{o.removeEventListener(wy,w),p=null}},createHref($){return e(o,$)},createURL:V,encodeLocation($){let pe=V($);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:S,replace:A,go($){return c.go($)}};return U}var Tt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Tt||(Tt={}));const WT=new Set(["lazy","caseSensitive","path","id","index","children"]);function qT(n){return n.index===!0}function kc(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((o,l)=>{let c=[...t,String(l)],h=typeof o.id=="string"?o.id:c.join("-");if(Xe(o.index!==!0||!o.children,"Cannot specify children on an index route"),Xe(!i[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),qT(o)){let p=Lt({},o,e(o),{id:h});return i[h]=p,p}else{let p=Lt({},o,e(o),{id:h,children:void 0});return i[h]=p,o.children&&(p.children=kc(o.children,e,c,i)),p}})}function ho(n,e,t){return t===void 0&&(t="/"),_c(n,e,t,!1)}function _c(n,e,t,i){let o=typeof e=="string"?Ls(e):e,l=Mi(o.pathname||"/",t);if(l==null)return null;let c=C_(n);KT(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let y=sS(l);h=rS(c[p],y,i)}return h}function GT(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function C_(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Xe(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Oi([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),C_(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:tS(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of A_(l.path))o(l,c,p)}),e}function A_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=A_(i.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function KT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const QT=/^:[\w-]+$/,JT=3,YT=2,XT=1,ZT=10,eS=-2,Ty=n=>n==="*";function tS(n,e){let t=n.split("/"),i=t.length;return t.some(Ty)&&(i+=eS),e&&(i+=YT),t.filter(o=>!Ty(o)).reduce((o,l)=>o+(QT.test(l)?JT:l===""?XT:ZT),i)}function nS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function rS(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,o={},l="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],y=h===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=Nc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),S=p.route;if(!w&&y&&t&&!i[i.length-1].route.index&&(w=Nc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:Oi([l,w.pathname]),pathnameBase:lS(Oi([l,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(l=Oi([l,w.pathnameBase]))}return c}function Nc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=iS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((y,_,w)=>{let{paramName:S,isOptional:A}=_;if(S==="*"){let U=h[w]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const V=h[w];return A&&!V?y[S]=void 0:y[S]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function iS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Ea(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function sS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ea(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Mi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function oS(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ls(n):n;return{pathname:t?t.startsWith("/")?t:aS(t,e):e,search:uS(i),hash:cS(o)}}function aS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function lf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nd(n,e){let t=P_(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function rd(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Ls(n):(o=Lt({},n),Xe(!o.pathname||!o.pathname.includes("?"),lf("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),lf("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),lf("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let w=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}h=w>=0?e[w]:"/"}let p=oS(o,h),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const Oi=n=>n.join("/").replace(/\/\/+/g,"/"),lS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class bc{constructor(e,t,i,o){o===void 0&&(o=!1),this.status=e,this.statusText=t||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function Dl(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const R_=["post","put","patch","delete"],dS=new Set(R_),hS=["get",...R_],fS=new Set(hS),pS=new Set([301,302,303,307,308]),mS=new Set([307,308]),uf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gS={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ml={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},np=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yS=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),k_="remix-router-transitions";function vS(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Xe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let o;if(n.mapRouteProperties)o=n.mapRouteProperties;else if(n.detectErrorBoundary){let D=n.detectErrorBoundary;o=z=>({hasErrorBoundary:D(z)})}else o=yS;let l={},c=kc(n.routes,o,void 0,l),h,p=n.basename||"/",y=n.dataStrategy||TS,_=n.patchRoutesOnNavigation,w=Lt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),S=null,A=new Set,V=null,U=null,$=null,pe=n.hydrationData!=null,ee=ho(c,n.history.location,p),de=!1,me=null;if(ee==null&&!_){let D=qn(404,{pathname:n.history.location.pathname}),{matches:z,route:K}=Dy(c);ee=z,me={[K.id]:D}}ee&&!n.hydrationData&&qr(ee,c,n.history.location.pathname).active&&(ee=null);let je;if(ee)if(ee.some(D=>D.route.lazy))je=!1;else if(!ee.some(D=>D.route.loader))je=!0;else if(w.v7_partialHydration){let D=n.hydrationData?n.hydrationData.loaderData:null,z=n.hydrationData?n.hydrationData.errors:null;if(z){let K=ee.findIndex(ne=>z[ne.route.id]!==void 0);je=ee.slice(0,K+1).every(ne=>!If(ne.route,D,z))}else je=ee.every(K=>!If(K.route,D,z))}else je=n.hydrationData!=null;else if(je=!1,ee=[],w.v7_partialHydration){let D=qr(null,c,n.history.location.pathname);D.active&&D.matches&&(de=!0,ee=D.matches)}let Fe,x={historyAction:n.history.action,location:n.history.location,matches:ee,initialized:je,navigation:uf,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||me,fetchers:new Map,blockers:new Map},C=Jt.Pop,P=!1,b,L=!1,F=new Map,k=null,Ye=!1,St=!1,Vt=[],ot=new Set,ae=new Map,Ne=0,ge=-1,j=new Map,X=new Set,Ae=new Map,He=new Map,De=new Set,Ue=new Map,Ke=new Map,et;function yt(){if(S=n.history.listen(D=>{let{action:z,location:K,delta:ne}=D;if(et){et(),et=void 0;return}Ea(Ke.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=vi({currentLocation:x.location,nextLocation:K,historyAction:z});if(fe&&ne!=null){let Ie=new Promise(Le=>{et=Le});n.history.go(ne*-1),Ir(fe,{state:"blocked",location:K,proceed(){Ir(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Ie.then(()=>n.history.go(ne))},reset(){let Le=new Map(x.blockers);Le.set(fe,ml),bt({blockers:Le})}});return}return gt(z,K)}),t){VS(e,F);let D=()=>MS(e,F);e.addEventListener("pagehide",D),k=()=>e.removeEventListener("pagehide",D)}return x.initialized||gt(Jt.Pop,x.location,{initialHydration:!0}),Fe}function zt(){S&&S(),k&&k(),A.clear(),b&&b.abort(),x.fetchers.forEach((D,z)=>wn(z)),x.blockers.forEach((D,z)=>Hr(z))}function Jn(D){return A.add(D),()=>A.delete(D)}function bt(D,z){z===void 0&&(z={}),x=Lt({},x,D);let K=[],ne=[];w.v7_fetcherPersist&&x.fetchers.forEach((fe,Ie)=>{fe.state==="idle"&&(De.has(Ie)?ne.push(Ie):K.push(Ie))}),De.forEach(fe=>{!x.fetchers.has(fe)&&!ae.has(fe)&&ne.push(fe)}),[...A].forEach(fe=>fe(x,{deletedFetchers:ne,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),w.v7_fetcherPersist?(K.forEach(fe=>x.fetchers.delete(fe)),ne.forEach(fe=>wn(fe))):ne.forEach(fe=>De.delete(fe))}function dn(D,z,K){var ne,fe;let{flushSync:Ie}=K===void 0?{}:K,Le=x.actionData!=null&&x.navigation.formMethod!=null&&Vr(x.navigation.formMethod)&&x.navigation.state==="loading"&&((ne=D.state)==null?void 0:ne._isRedirect)!==!0,xe;z.actionData?Object.keys(z.actionData).length>0?xe=z.actionData:xe=null:Le?xe=x.actionData:xe=null;let Se=z.loaderData?Ny(x.loaderData,z.loaderData,z.matches||[],z.errors):x.loaderData,_e=x.blockers;_e.size>0&&(_e=new Map(_e),_e.forEach((qe,Bt)=>_e.set(Bt,ml)));let we=P===!0||x.navigation.formMethod!=null&&Vr(x.navigation.formMethod)&&((fe=D.state)==null?void 0:fe._isRedirect)!==!0;h&&(c=h,h=void 0),Ye||C===Jt.Pop||(C===Jt.Push?n.history.push(D,D.state):C===Jt.Replace&&n.history.replace(D,D.state));let ze;if(C===Jt.Pop){let qe=F.get(x.location.pathname);qe&&qe.has(D.pathname)?ze={currentLocation:x.location,nextLocation:D}:F.has(D.pathname)&&(ze={currentLocation:D,nextLocation:x.location})}else if(L){let qe=F.get(x.location.pathname);qe?qe.add(D.pathname):(qe=new Set([D.pathname]),F.set(x.location.pathname,qe)),ze={currentLocation:x.location,nextLocation:D}}bt(Lt({},z,{actionData:xe,loaderData:Se,historyAction:C,location:D,initialized:!0,navigation:uf,revalidation:"idle",restoreScrollPosition:Wr(D,z.matches||x.matches),preventScrollReset:we,blockers:_e}),{viewTransitionOpts:ze,flushSync:Ie===!0}),C=Jt.Pop,P=!1,L=!1,Ye=!1,St=!1,Vt=[]}async function ur(D,z){if(typeof D=="number"){n.history.go(D);return}let K=Sf(x.location,x.matches,p,w.v7_prependBasename,D,w.v7_relativeSplatPath,z?.fromRouteId,z?.relative),{path:ne,submission:fe,error:Ie}=Sy(w.v7_normalizeFormMethod,!1,K,z),Le=x.location,xe=bl(x.location,ne,z&&z.state);xe=Lt({},xe,n.history.encodeLocation(xe));let Se=z&&z.replace!=null?z.replace:void 0,_e=Jt.Push;Se===!0?_e=Jt.Replace:Se===!1||fe!=null&&Vr(fe.formMethod)&&fe.formAction===x.location.pathname+x.location.search&&(_e=Jt.Replace);let we=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,ze=(z&&z.flushSync)===!0,qe=vi({currentLocation:Le,nextLocation:xe,historyAction:_e});if(qe){Ir(qe,{state:"blocked",location:xe,proceed(){Ir(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),ur(D,z)},reset(){let Bt=new Map(x.blockers);Bt.set(qe,ml),bt({blockers:Bt})}});return}return await gt(_e,xe,{submission:fe,pendingError:Ie,preventScrollReset:we,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:ze})}function zr(){if(Je(),bt({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){gt(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}gt(C||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:L===!0})}}async function gt(D,z,K){b&&b.abort(),b=null,C=D,Ye=(K&&K.startUninterruptedRevalidation)===!0,zs(x.location,x.matches),P=(K&&K.preventScrollReset)===!0,L=(K&&K.enableViewTransition)===!0;let ne=h||c,fe=K&&K.overrideNavigation,Ie=K!=null&&K.initialHydration&&x.matches&&x.matches.length>0&&!de?x.matches:ho(ne,z,p),Le=(K&&K.flushSync)===!0;if(Ie&&x.initialized&&!St&&PS(x.location,z)&&!(K&&K.submission&&Vr(K.submission.formMethod))){dn(z,{matches:Ie},{flushSync:Le});return}let xe=qr(Ie,ne,z.pathname);if(xe.active&&xe.matches&&(Ie=xe.matches),!Ie){let{error:pt,notFoundMatches:nt,route:wt}=Tn(z.pathname);dn(z,{matches:nt,loaderData:{},errors:{[wt.id]:pt}},{flushSync:Le});return}b=new AbortController;let Se=ca(n.history,z,b.signal,K&&K.submission),_e;if(K&&K.pendingError)_e=[fo(Ie).route.id,{type:Tt.error,error:K.pendingError}];else if(K&&K.submission&&Vr(K.submission.formMethod)){let pt=await yi(Se,z,K.submission,Ie,xe.active,{replace:K.replace,flushSync:Le});if(pt.shortCircuited)return;if(pt.pendingActionResult){let[nt,wt]=pt.pendingActionResult;if(or(wt)&&Dl(wt.error)&&wt.error.status===404){b=null,dn(z,{matches:pt.matches,loaderData:{},errors:{[nt]:wt.error}});return}}Ie=pt.matches||Ie,_e=pt.pendingActionResult,fe=cf(z,K.submission),Le=!1,xe.active=!1,Se=ca(n.history,Se.url,Se.signal)}let{shortCircuited:we,matches:ze,loaderData:qe,errors:Bt}=await $i(Se,z,Ie,xe.active,fe,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Le,_e);we||(b=null,dn(z,Lt({matches:ze||Ie},by(_e),{loaderData:qe,errors:Bt})))}async function yi(D,z,K,ne,fe,Ie){Ie===void 0&&(Ie={}),Je();let Le=OS(z,K);if(bt({navigation:Le},{flushSync:Ie.flushSync===!0}),fe){let _e=await Vn(ne,z.pathname,D.signal);if(_e.type==="aborted")return{shortCircuited:!0};if(_e.type==="error"){let we=fo(_e.partialMatches).route.id;return{matches:_e.partialMatches,pendingActionResult:[we,{type:Tt.error,error:_e.error}]}}else if(_e.matches)ne=_e.matches;else{let{notFoundMatches:we,error:ze,route:qe}=Tn(z.pathname);return{matches:we,pendingActionResult:[qe.id,{type:Tt.error,error:ze}]}}}let xe,Se=vl(ne,z);if(!Se.route.action&&!Se.route.lazy)xe={type:Tt.error,error:qn(405,{method:D.method,pathname:z.pathname,routeId:Se.route.id})};else if(xe=(await ye("action",x,D,[Se],ne,null))[Se.route.id],D.signal.aborted)return{shortCircuited:!0};if(po(xe)){let _e;return Ie&&Ie.replace!=null?_e=Ie.replace:_e=Py(xe.response.headers.get("Location"),new URL(D.url),p)===x.location.pathname+x.location.search,await ue(D,xe,!0,{submission:K,replace:_e}),{shortCircuited:!0}}if(Es(xe))throw qn(400,{type:"defer-action"});if(or(xe)){let _e=fo(ne,Se.route.id);return(Ie&&Ie.replace)!==!0&&(C=Jt.Push),{matches:ne,pendingActionResult:[_e.route.id,xe]}}return{matches:ne,pendingActionResult:[Se.route.id,xe]}}async function $i(D,z,K,ne,fe,Ie,Le,xe,Se,_e,we){let ze=fe||cf(z,Ie),qe=Ie||Le||Ly(ze),Bt=!Ye&&(!w.v7_partialHydration||!Se);if(ne){if(Bt){let vt=N(we);bt(Lt({navigation:ze},vt!==void 0?{actionData:vt}:{}),{flushSync:_e})}let st=await Vn(K,z.pathname,D.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){let vt=fo(st.partialMatches).route.id;return{matches:st.partialMatches,loaderData:{},errors:{[vt]:st.error}}}else if(st.matches)K=st.matches;else{let{error:vt,notFoundMatches:qt,route:Qr}=Tn(z.pathname);return{matches:qt,loaderData:{},errors:{[Qr.id]:vt}}}}let pt=h||c,[nt,wt]=xy(n.history,x,K,qe,z,w.v7_partialHydration&&Se===!0,w.v7_skipActionErrorRevalidation,St,Vt,ot,De,Ae,X,pt,p,we);if(Ln(st=>!(K&&K.some(vt=>vt.route.id===st))||nt&&nt.some(vt=>vt.route.id===st)),ge=++Ne,nt.length===0&&wt.length===0){let st=$r();return dn(z,Lt({matches:K,loaderData:{},errors:we&&or(we[1])?{[we[0]]:we[1].error}:null},by(we),st?{fetchers:new Map(x.fetchers)}:{}),{flushSync:_e}),{shortCircuited:!0}}if(Bt){let st={};if(!ne){st.navigation=ze;let vt=N(we);vt!==void 0&&(st.actionData=vt)}wt.length>0&&(st.fetchers=G(wt)),bt(st,{flushSync:_e})}wt.forEach(st=>{En(st.key),st.controller&&ae.set(st.key,st.controller)});let cr=()=>wt.forEach(st=>En(st.key));b&&b.signal.addEventListener("abort",cr);let{loaderResults:Gr,fetcherResults:Xn}=await Te(x,K,nt,wt,D);if(D.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",cr),wt.forEach(st=>ae.delete(st.key));let it=dc(Gr);if(it)return await ue(D,it.result,!0,{replace:xe}),{shortCircuited:!0};if(it=dc(Xn),it)return X.add(it.key),await ue(D,it.result,!0,{replace:xe}),{shortCircuited:!0};let{loaderData:qi,errors:Zn}=ky(x,K,Gr,we,wt,Xn,Ue);Ue.forEach((st,vt)=>{st.subscribe(qt=>{(qt||st.done)&&Ue.delete(vt)})}),w.v7_partialHydration&&Se&&x.errors&&(Zn=Lt({},x.errors,Zn));let Sn=$r(),hn=Hi(ge),Kr=Sn||hn||wt.length>0;return Lt({matches:K,loaderData:qi,errors:Zn},Kr?{fetchers:new Map(x.fetchers)}:{})}function N(D){if(D&&!or(D[1]))return{[D[0]]:D[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function G(D){return D.forEach(z=>{let K=x.fetchers.get(z.key),ne=gl(void 0,K?K.data:void 0);x.fetchers.set(z.key,ne)}),new Map(x.fetchers)}function q(D,z,K,ne){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");En(D);let fe=(ne&&ne.flushSync)===!0,Ie=h||c,Le=Sf(x.location,x.matches,p,w.v7_prependBasename,K,w.v7_relativeSplatPath,z,ne?.relative),xe=ho(Ie,Le,p),Se=qr(xe,Ie,Le);if(Se.active&&Se.matches&&(xe=Se.matches),!xe){xt(D,z,qn(404,{pathname:Le}),{flushSync:fe});return}let{path:_e,submission:we,error:ze}=Sy(w.v7_normalizeFormMethod,!0,Le,ne);if(ze){xt(D,z,ze,{flushSync:fe});return}let qe=vl(xe,_e),Bt=(ne&&ne.preventScrollReset)===!0;if(we&&Vr(we.formMethod)){Z(D,z,_e,qe,xe,Se.active,fe,Bt,we);return}Ae.set(D,{routeId:z,path:_e}),se(D,z,_e,qe,xe,Se.active,fe,Bt,we)}async function Z(D,z,K,ne,fe,Ie,Le,xe,Se){Je(),Ae.delete(D);function _e(at){if(!at.route.action&&!at.route.lazy){let dr=qn(405,{method:Se.formMethod,pathname:K,routeId:z});return xt(D,z,dr,{flushSync:Le}),!0}return!1}if(!Ie&&_e(ne))return;let we=x.fetchers.get(D);tt(D,LS(Se,we),{flushSync:Le});let ze=new AbortController,qe=ca(n.history,K,ze.signal,Se);if(Ie){let at=await Vn(fe,new URL(qe.url).pathname,qe.signal,D);if(at.type==="aborted")return;if(at.type==="error"){xt(D,z,at.error,{flushSync:Le});return}else if(at.matches){if(fe=at.matches,ne=vl(fe,K),_e(ne))return}else{xt(D,z,qn(404,{pathname:K}),{flushSync:Le});return}}ae.set(D,ze);let Bt=Ne,nt=(await ye("action",x,qe,[ne],fe,D))[ne.route.id];if(qe.signal.aborted){ae.get(D)===ze&&ae.delete(D);return}if(w.v7_fetcherPersist&&De.has(D)){if(po(nt)||or(nt)){tt(D,gs(void 0));return}}else{if(po(nt))if(ae.delete(D),ge>Bt){tt(D,gs(void 0));return}else return X.add(D),tt(D,gl(Se)),ue(qe,nt,!1,{fetcherSubmission:Se,preventScrollReset:xe});if(or(nt)){xt(D,z,nt.error);return}}if(Es(nt))throw qn(400,{type:"defer-action"});let wt=x.navigation.location||x.location,cr=ca(n.history,wt,ze.signal),Gr=h||c,Xn=x.navigation.state!=="idle"?ho(Gr,x.navigation.location,p):x.matches;Xe(Xn,"Didn't find any matches after fetcher action");let it=++Ne;j.set(D,it);let qi=gl(Se,nt.data);x.fetchers.set(D,qi);let[Zn,Sn]=xy(n.history,x,Xn,Se,wt,!1,w.v7_skipActionErrorRevalidation,St,Vt,ot,De,Ae,X,Gr,p,[ne.route.id,nt]);Sn.filter(at=>at.key!==D).forEach(at=>{let dr=at.key,$s=x.fetchers.get(dr),ko=gl(void 0,$s?$s.data:void 0);x.fetchers.set(dr,ko),En(dr),at.controller&&ae.set(dr,at.controller)}),bt({fetchers:new Map(x.fetchers)});let hn=()=>Sn.forEach(at=>En(at.key));ze.signal.addEventListener("abort",hn);let{loaderResults:Kr,fetcherResults:st}=await Te(x,Xn,Zn,Sn,cr);if(ze.signal.aborted)return;ze.signal.removeEventListener("abort",hn),j.delete(D),ae.delete(D),Sn.forEach(at=>ae.delete(at.key));let vt=dc(Kr);if(vt)return ue(cr,vt.result,!1,{preventScrollReset:xe});if(vt=dc(st),vt)return X.add(vt.key),ue(cr,vt.result,!1,{preventScrollReset:xe});let{loaderData:qt,errors:Qr}=ky(x,Xn,Kr,void 0,Sn,st,Ue);if(x.fetchers.has(D)){let at=gs(nt.data);x.fetchers.set(D,at)}Hi(it),x.navigation.state==="loading"&&it>ge?(Xe(C,"Expected pending action"),b&&b.abort(),dn(x.navigation.location,{matches:Xn,loaderData:qt,errors:Qr,fetchers:new Map(x.fetchers)})):(bt({errors:Qr,loaderData:Ny(x.loaderData,qt,Xn,Qr),fetchers:new Map(x.fetchers)}),St=!1)}async function se(D,z,K,ne,fe,Ie,Le,xe,Se){let _e=x.fetchers.get(D);tt(D,gl(Se,_e?_e.data:void 0),{flushSync:Le});let we=new AbortController,ze=ca(n.history,K,we.signal);if(Ie){let nt=await Vn(fe,new URL(ze.url).pathname,ze.signal,D);if(nt.type==="aborted")return;if(nt.type==="error"){xt(D,z,nt.error,{flushSync:Le});return}else if(nt.matches)fe=nt.matches,ne=vl(fe,K);else{xt(D,z,qn(404,{pathname:K}),{flushSync:Le});return}}ae.set(D,we);let qe=Ne,pt=(await ye("loader",x,ze,[ne],fe,D))[ne.route.id];if(Es(pt)&&(pt=await rp(pt,ze.signal,!0)||pt),ae.get(D)===we&&ae.delete(D),!ze.signal.aborted){if(De.has(D)){tt(D,gs(void 0));return}if(po(pt))if(ge>qe){tt(D,gs(void 0));return}else{X.add(D),await ue(ze,pt,!1,{preventScrollReset:xe});return}if(or(pt)){xt(D,z,pt.error);return}Xe(!Es(pt),"Unhandled fetcher deferred data"),tt(D,gs(pt.data))}}async function ue(D,z,K,ne){let{submission:fe,fetcherSubmission:Ie,preventScrollReset:Le,replace:xe}=ne===void 0?{}:ne;z.response.headers.has("X-Remix-Revalidate")&&(St=!0);let Se=z.response.headers.get("Location");Xe(Se,"Expected a Location header on the redirect Response"),Se=Py(Se,new URL(D.url),p);let _e=bl(x.location,Se,{_isRedirect:!0});if(t){let nt=!1;if(z.response.headers.has("X-Remix-Reload-Document"))nt=!0;else if(np.test(Se)){const wt=n.history.createURL(Se);nt=wt.origin!==e.location.origin||Mi(wt.pathname,p)==null}if(nt){xe?e.location.replace(Se):e.location.assign(Se);return}}b=null;let we=xe===!0||z.response.headers.has("X-Remix-Replace")?Jt.Replace:Jt.Push,{formMethod:ze,formAction:qe,formEncType:Bt}=x.navigation;!fe&&!Ie&&ze&&qe&&Bt&&(fe=Ly(x.navigation));let pt=fe||Ie;if(mS.has(z.response.status)&&pt&&Vr(pt.formMethod))await gt(we,_e,{submission:Lt({},pt,{formAction:Se}),preventScrollReset:Le||P,enableViewTransition:K?L:void 0});else{let nt=cf(_e,fe);await gt(we,_e,{overrideNavigation:nt,fetcherSubmission:Ie,preventScrollReset:Le||P,enableViewTransition:K?L:void 0})}}async function ye(D,z,K,ne,fe,Ie){let Le,xe={};try{Le=await SS(y,D,z,K,ne,fe,Ie,l,o)}catch(Se){return ne.forEach(_e=>{xe[_e.route.id]={type:Tt.error,error:Se}}),xe}for(let[Se,_e]of Object.entries(Le))if(RS(_e)){let we=_e.result;xe[Se]={type:Tt.redirect,response:CS(we,K,Se,fe,p,w.v7_relativeSplatPath)}}else xe[Se]=await xS(_e);return xe}async function Te(D,z,K,ne,fe){let Ie=D.matches,Le=ye("loader",D,fe,K,z,null),xe=Promise.all(ne.map(async we=>{if(we.matches&&we.match&&we.controller){let qe=(await ye("loader",D,ca(n.history,we.path,we.controller.signal),[we.match],we.matches,we.key))[we.match.route.id];return{[we.key]:qe}}else return Promise.resolve({[we.key]:{type:Tt.error,error:qn(404,{pathname:we.path})}})})),Se=await Le,_e=(await xe).reduce((we,ze)=>Object.assign(we,ze),{});return await Promise.all([bS(z,Se,fe.signal,Ie,D.loaderData),DS(z,_e,ne)]),{loaderResults:Se,fetcherResults:_e}}function Je(){St=!0,Vt.push(...Ln()),Ae.forEach((D,z)=>{ae.has(z)&&ot.add(z),En(z)})}function tt(D,z,K){K===void 0&&(K={}),x.fetchers.set(D,z),bt({fetchers:new Map(x.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function xt(D,z,K,ne){ne===void 0&&(ne={});let fe=fo(x.matches,z);wn(D),bt({errors:{[fe.route.id]:K},fetchers:new Map(x.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function At(D){return He.set(D,(He.get(D)||0)+1),De.has(D)&&De.delete(D),x.fetchers.get(D)||gS}function wn(D){let z=x.fetchers.get(D);ae.has(D)&&!(z&&z.state==="loading"&&j.has(D))&&En(D),Ae.delete(D),j.delete(D),X.delete(D),w.v7_fetcherPersist&&De.delete(D),ot.delete(D),x.fetchers.delete(D)}function Sr(D){let z=(He.get(D)||0)-1;z<=0?(He.delete(D),De.add(D),w.v7_fetcherPersist||wn(D)):He.set(D,z),bt({fetchers:new Map(x.fetchers)})}function En(D){let z=ae.get(D);z&&(z.abort(),ae.delete(D))}function Br(D){for(let z of D){let K=At(z),ne=gs(K.data);x.fetchers.set(z,ne)}}function $r(){let D=[],z=!1;for(let K of X){let ne=x.fetchers.get(K);Xe(ne,"Expected fetcher: "+K),ne.state==="loading"&&(X.delete(K),D.push(K),z=!0)}return Br(D),z}function Hi(D){let z=[];for(let[K,ne]of j)if(ne<D){let fe=x.fetchers.get(K);Xe(fe,"Expected fetcher: "+K),fe.state==="loading"&&(En(K),j.delete(K),z.push(K))}return Br(z),z.length>0}function Us(D,z){let K=x.blockers.get(D)||ml;return Ke.get(D)!==z&&Ke.set(D,z),K}function Hr(D){x.blockers.delete(D),Ke.delete(D)}function Ir(D,z){let K=x.blockers.get(D)||ml;Xe(K.state==="unblocked"&&z.state==="blocked"||K.state==="blocked"&&z.state==="blocked"||K.state==="blocked"&&z.state==="proceeding"||K.state==="blocked"&&z.state==="unblocked"||K.state==="proceeding"&&z.state==="unblocked","Invalid blocker state transition: "+K.state+" -> "+z.state);let ne=new Map(x.blockers);ne.set(D,z),bt({blockers:ne})}function vi(D){let{currentLocation:z,nextLocation:K,historyAction:ne}=D;if(Ke.size===0)return;Ke.size>1&&Ea(!1,"A router only supports one blocker at a time");let fe=Array.from(Ke.entries()),[Ie,Le]=fe[fe.length-1],xe=x.blockers.get(Ie);if(!(xe&&xe.state==="proceeding")&&Le({currentLocation:z,nextLocation:K,historyAction:ne}))return Ie}function Tn(D){let z=qn(404,{pathname:D}),K=h||c,{matches:ne,route:fe}=Dy(K);return Ln(),{notFoundMatches:ne,route:fe,error:z}}function Ln(D){let z=[];return Ue.forEach((K,ne)=>{(!D||D(ne))&&(K.cancel(),z.push(ne),Ue.delete(ne))}),z}function Wi(D,z,K){if(V=D,$=z,U=K||null,!pe&&x.navigation===uf){pe=!0;let ne=Wr(x.location,x.matches);ne!=null&&bt({restoreScrollPosition:ne})}return()=>{V=null,$=null,U=null}}function Yn(D,z){return U&&U(D,z.map(ne=>GT(ne,x.loaderData)))||D.key}function zs(D,z){if(V&&$){let K=Yn(D,z);V[K]=$()}}function Wr(D,z){if(V){let K=Yn(D,z),ne=V[K];if(typeof ne=="number")return ne}return null}function qr(D,z,K){if(_)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:_c(z,K,p,!0)}}else return{active:!0,matches:_c(z,K,p,!0)||[]};return{active:!1,matches:null}}async function Vn(D,z,K,ne){if(!_)return{type:"success",matches:D};let fe=D;for(;;){let Ie=h==null,Le=h||c,xe=l;try{await _({signal:K,path:z,matches:fe,fetcherKey:ne,patch:(we,ze)=>{K.aborted||Ay(we,ze,Le,xe,o)}})}catch(we){return{type:"error",error:we,partialMatches:fe}}finally{Ie&&!K.aborted&&(c=[...c])}if(K.aborted)return{type:"aborted"};let Se=ho(Le,z,p);if(Se)return{type:"success",matches:Se};let _e=_c(Le,z,p,!0);if(!_e||fe.length===_e.length&&fe.every((we,ze)=>we.route.id===_e[ze].route.id))return{type:"success",matches:null};fe=_e}}function Bs(D){l={},h=kc(D,o,void 0,l)}function Mt(D,z){let K=h==null;Ay(D,z,h||c,l,o),K&&(c=[...c],bt({}))}return Fe={get basename(){return p},get future(){return w},get state(){return x},get routes(){return c},get window(){return e},initialize:yt,subscribe:Jn,enableScrollRestoration:Wi,navigate:ur,fetch:q,revalidate:zr,createHref:D=>n.history.createHref(D),encodeLocation:D=>n.history.encodeLocation(D),getFetcher:At,deleteFetcher:Sr,dispose:zt,getBlocker:Us,deleteBlocker:Hr,patchRoutes:Mt,_internalFetchControllers:ae,_internalActiveDeferreds:Ue,_internalSetRoutes:Bs},Fe}function _S(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Sf(n,e,t,i,o,l,c,h){let p,y;if(c){p=[];for(let w of e)if(p.push(w),w.route.id===c){y=w;break}}else p=e,y=e[e.length-1];let _=rd(o||".",nd(p,l),Mi(n.pathname,t)||n.pathname,h==="path");if(o==null&&(_.search=n.search,_.hash=n.hash),(o==null||o===""||o===".")&&y){let w=ip(_.search);if(y.route.index&&!w)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!y.route.index&&w){let S=new URLSearchParams(_.search),A=S.getAll("index");S.delete("index"),A.filter(U=>U).forEach(U=>S.append("index",U));let V=S.toString();_.search=V?"?"+V:""}}return i&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Oi([t,_.pathname])),vo(_)}function Sy(n,e,t,i){if(!i||!_S(i))return{path:t};if(i.formMethod&&!NS(i.formMethod))return{path:t,error:qn(405,{method:i.formMethod})};let o=()=>({path:t,error:qn(400,{type:"invalid-body"})}),l=i.formMethod||"get",c=n?l.toUpperCase():l.toLowerCase(),h=D_(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Vr(c))return o();let S=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((A,V)=>{let[U,$]=V;return""+A+U+"="+$+`
`},""):String(i.body);return{path:t,submission:{formMethod:c,formAction:h,formEncType:i.formEncType,formData:void 0,json:void 0,text:S}}}else if(i.formEncType==="application/json"){if(!Vr(c))return o();try{let S=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:c,formAction:h,formEncType:i.formEncType,formData:void 0,json:S,text:void 0}}}catch{return o()}}}Xe(typeof FormData=="function","FormData is not available in this environment");let p,y;if(i.formData)p=xf(i.formData),y=i.formData;else if(i.body instanceof FormData)p=xf(i.body),y=i.body;else if(i.body instanceof URLSearchParams)p=i.body,y=Ry(p);else if(i.body==null)p=new URLSearchParams,y=new FormData;else try{p=new URLSearchParams(i.body),y=Ry(p)}catch{return o()}let _={formMethod:c,formAction:h,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(Vr(_.formMethod))return{path:t,submission:_};let w=Ls(t);return e&&w.search&&ip(w.search)&&p.append("index",""),w.search="?"+p,{path:vo(w),submission:_}}function Iy(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function xy(n,e,t,i,o,l,c,h,p,y,_,w,S,A,V,U){let $=U?or(U[1])?U[1].error:U[1].data:void 0,pe=n.createURL(e.location),ee=n.createURL(o),de=t;l&&e.errors?de=Iy(t,Object.keys(e.errors)[0],!0):U&&or(U[1])&&(de=Iy(t,U[0]));let me=U?U[1].statusCode:void 0,je=c&&me&&me>=400,Fe=de.filter((C,P)=>{let{route:b}=C;if(b.lazy)return!0;if(b.loader==null)return!1;if(l)return If(b,e.loaderData,e.errors);if(wS(e.loaderData,e.matches[P],C)||p.some(k=>k===C.route.id))return!0;let L=e.matches[P],F=C;return Cy(C,Lt({currentUrl:pe,currentParams:L.params,nextUrl:ee,nextParams:F.params},i,{actionResult:$,actionStatus:me,defaultShouldRevalidate:je?!1:h||pe.pathname+pe.search===ee.pathname+ee.search||pe.search!==ee.search||N_(L,F)}))}),x=[];return w.forEach((C,P)=>{if(l||!t.some(Ye=>Ye.route.id===C.routeId)||_.has(P))return;let b=ho(A,C.path,V);if(!b){x.push({key:P,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(P),F=vl(b,C.path),k=!1;S.has(P)?k=!1:y.has(P)?(y.delete(P),k=!0):L&&L.state!=="idle"&&L.data===void 0?k=h:k=Cy(F,Lt({currentUrl:pe,currentParams:e.matches[e.matches.length-1].params,nextUrl:ee,nextParams:t[t.length-1].params},i,{actionResult:$,actionStatus:me,defaultShouldRevalidate:je?!1:h})),k&&x.push({key:P,routeId:C.routeId,path:C.path,matches:b,match:F,controller:new AbortController})}),[Fe,x]}function If(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function wS(n,e,t){let i=!e||t.route.id!==e.route.id,o=n[t.route.id]===void 0;return i||o}function N_(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Cy(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Ay(n,e,t,i,o){var l;let c;if(n){let y=i[n];Xe(y,"No route found to patch children into: routeId = "+n),y.children||(y.children=[]),c=y.children}else c=t;let h=e.filter(y=>!c.some(_=>b_(y,_))),p=kc(h,o,[n||"_","patch",String(((l=c)==null?void 0:l.length)||"0")],i);c.push(...p)}function b_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(l=>b_(t,l))}):!1}async function ES(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Xe(o,"No route found in manifest");let l={};for(let c in i){let p=o[c]!==void 0&&c!=="hasErrorBoundary";Ea(!p,'Route "'+o.id+'" has a static property "'+c+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+c+'" will be ignored.')),!p&&!WT.has(c)&&(l[c]=i[c])}Object.assign(o,l),Object.assign(o,Lt({},e(o),{lazy:void 0}))}async function TS(n){let{matches:e}=n,t=e.filter(o=>o.shouldLoad);return(await Promise.all(t.map(o=>o.resolve()))).reduce((o,l,c)=>Object.assign(o,{[t[c].route.id]:l}),{})}async function SS(n,e,t,i,o,l,c,h,p,y){let _=l.map(A=>A.route.lazy?ES(A.route,p,h):void 0),w=l.map((A,V)=>{let U=_[V],$=o.some(ee=>ee.route.id===A.route.id);return Lt({},A,{shouldLoad:$,resolve:async ee=>(ee&&i.method==="GET"&&(A.route.lazy||A.route.loader)&&($=!0),$?IS(e,i,A,U,ee,y):Promise.resolve({type:Tt.data,result:void 0}))})}),S=await n({matches:w,request:i,params:l[0].params,fetcherKey:c,context:y});try{await Promise.all(_)}catch{}return S}async function IS(n,e,t,i,o,l){let c,h,p=y=>{let _,w=new Promise((V,U)=>_=U);h=()=>_(),e.signal.addEventListener("abort",h);let S=V=>typeof y!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):y({request:e,params:t.params,context:l},...V!==void 0?[V]:[]),A=(async()=>{try{return{type:"data",result:await(o?o(U=>S(U)):S())}}catch(V){return{type:"error",result:V}}})();return Promise.race([A,w])};try{let y=t.route[n];if(i)if(y){let _,[w]=await Promise.all([p(y).catch(S=>{_=S}),i]);if(_!==void 0)throw _;c=w}else if(await i,y=t.route[n],y)c=await p(y);else if(n==="action"){let _=new URL(e.url),w=_.pathname+_.search;throw qn(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:Tt.data,result:void 0};else if(y)c=await p(y);else{let _=new URL(e.url),w=_.pathname+_.search;throw qn(404,{pathname:w})}Xe(c.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(y){return{type:Tt.error,result:y}}finally{h&&e.signal.removeEventListener("abort",h)}return c}async function xS(n){let{result:e,type:t}=n;if(O_(e)){let w;try{let S=e.headers.get("Content-Type");S&&/\bapplication\/json\b/.test(S)?e.body==null?w=null:w=await e.json():w=await e.text()}catch(S){return{type:Tt.error,error:S}}return t===Tt.error?{type:Tt.error,error:new bc(e.status,e.statusText,w),statusCode:e.status,headers:e.headers}:{type:Tt.data,data:w,statusCode:e.status,headers:e.headers}}if(t===Tt.error){if(Oy(e)){var i,o;if(e.data instanceof Error){var l,c;return{type:Tt.error,error:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:Tt.error,error:new bc(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:Dl(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Tt.error,error:e,statusCode:Dl(e)?e.status:void 0}}if(kS(e)){var h,p;return{type:Tt.deferred,deferredData:e,statusCode:(h=e.init)==null?void 0:h.status,headers:((p=e.init)==null?void 0:p.headers)&&new Headers(e.init.headers)}}if(Oy(e)){var y,_;return{type:Tt.data,data:e.data,statusCode:(y=e.init)==null?void 0:y.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:Tt.data,data:e}}function CS(n,e,t,i,o,l){let c=n.headers.get("Location");if(Xe(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!np.test(c)){let h=i.slice(0,i.findIndex(p=>p.route.id===t)+1);c=Sf(new URL(e.url),h,o,!0,c,l),n.headers.set("Location",c)}return n}function Py(n,e,t){if(np.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=Mi(o.pathname,t)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}return n}function ca(n,e,t,i){let o=n.createURL(D_(e)).toString(),l={signal:t};if(i&&Vr(i.formMethod)){let{formMethod:c,formEncType:h}=i;l.method=c.toUpperCase(),h==="application/json"?(l.headers=new Headers({"Content-Type":h}),l.body=JSON.stringify(i.json)):h==="text/plain"?l.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?l.body=xf(i.formData):l.body=i.formData}return new Request(o,l)}function xf(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Ry(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function AS(n,e,t,i,o){let l={},c=null,h,p=!1,y={},_=t&&or(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let S=w.route.id,A=e[S];if(Xe(!po(A),"Cannot handle redirect results in processLoaderData"),or(A)){let V=A.error;_!==void 0&&(V=_,_=void 0),c=c||{};{let U=fo(n,S);c[U.route.id]==null&&(c[U.route.id]=V)}l[S]=void 0,p||(p=!0,h=Dl(A.error)?A.error.status:500),A.headers&&(y[S]=A.headers)}else Es(A)?(i.set(S,A.deferredData),l[S]=A.deferredData.data,A.statusCode!=null&&A.statusCode!==200&&!p&&(h=A.statusCode),A.headers&&(y[S]=A.headers)):(l[S]=A.data,A.statusCode&&A.statusCode!==200&&!p&&(h=A.statusCode),A.headers&&(y[S]=A.headers))}),_!==void 0&&t&&(c={[t[0]]:_},l[t[0]]=void 0),{loaderData:l,errors:c,statusCode:h||200,loaderHeaders:y}}function ky(n,e,t,i,o,l,c){let{loaderData:h,errors:p}=AS(e,t,i,c);return o.forEach(y=>{let{key:_,match:w,controller:S}=y,A=l[_];if(Xe(A,"Did not find corresponding fetcher result"),!(S&&S.signal.aborted))if(or(A)){let V=fo(n.matches,w?.route.id);p&&p[V.route.id]||(p=Lt({},p,{[V.route.id]:A.error})),n.fetchers.delete(_)}else if(po(A))Xe(!1,"Unhandled fetcher revalidation redirect");else if(Es(A))Xe(!1,"Unhandled fetcher deferred data");else{let V=gs(A.data);n.fetchers.set(_,V)}}),{loaderData:h,errors:p}}function Ny(n,e,t,i){let o=Lt({},e);for(let l of t){let c=l.route.id;if(e.hasOwnProperty(c)?e[c]!==void 0&&(o[c]=e[c]):n[c]!==void 0&&l.route.loader&&(o[c]=n[c]),i&&i.hasOwnProperty(c))break}return o}function by(n){return n?or(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function fo(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Dy(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qn(n,e){let{pathname:t,routeId:i,method:o,type:l,message:c}=e===void 0?{}:e,h="Unknown Server Error",p="Unknown @remix-run/router error";return n===400?(h="Bad Request",o&&t&&i?p="You made a "+o+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":l==="defer-action"?p="defer() is not supported in actions":l==="invalid-body"&&(p="Unable to encode submission body")):n===403?(h="Forbidden",p='Route "'+i+'" does not match URL "'+t+'"'):n===404?(h="Not Found",p='No route matches URL "'+t+'"'):n===405&&(h="Method Not Allowed",o&&t&&i?p="You made a "+o.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":o&&(p='Invalid request method "'+o.toUpperCase()+'"')),new bc(n||500,h,new Error(p),!0)}function dc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(po(o))return{key:i,result:o}}}function D_(n){let e=typeof n=="string"?Ls(n):n;return vo(Lt({},e,{hash:""}))}function PS(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function RS(n){return O_(n.result)&&pS.has(n.result.status)}function Es(n){return n.type===Tt.deferred}function or(n){return n.type===Tt.error}function po(n){return(n&&n.type)===Tt.redirect}function Oy(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function kS(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function O_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function NS(n){return fS.has(n.toLowerCase())}function Vr(n){return dS.has(n.toLowerCase())}async function bS(n,e,t,i,o){let l=Object.entries(e);for(let c=0;c<l.length;c++){let[h,p]=l[c],y=n.find(S=>S?.route.id===h);if(!y)continue;let _=i.find(S=>S.route.id===y.route.id),w=_!=null&&!N_(_,y)&&(o&&o[y.route.id])!==void 0;Es(p)&&w&&await rp(p,t,!1).then(S=>{S&&(e[h]=S)})}}async function DS(n,e,t){for(let i=0;i<t.length;i++){let{key:o,routeId:l,controller:c}=t[i],h=e[o];n.find(y=>y?.route.id===l)&&Es(h)&&(Xe(c,"Expected an AbortController for revalidating fetcher deferred result"),await rp(h,c.signal,!0).then(y=>{y&&(e[o]=y)}))}}async function rp(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Tt.data,data:n.deferredData.unwrappedData}}catch(o){return{type:Tt.error,error:o}}return{type:Tt.data,data:n.deferredData.data}}}function ip(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function vl(n,e){let t=typeof e=="string"?Ls(e).search:e.search;if(n[n.length-1].route.index&&ip(t||""))return n[n.length-1];let i=P_(n);return i[i.length-1]}function Ly(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:l,json:c}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function cf(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function OS(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function gl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LS(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function gs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function VS(n,e){try{let t=n.sessionStorage.getItem(k_);if(t){let i=JSON.parse(t);for(let[o,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(o,new Set(l||[]))}}catch{}}function MS(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(k_,JSON.stringify(t))}catch(i){Ea(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Dc.apply(this,arguments)}const Hl=Y.createContext(null),sp=Y.createContext(null),Bi=Y.createContext(null),op=Y.createContext(null),mi=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),L_=Y.createContext(null);function FS(n,e){let{relative:t}=e===void 0?{}:e;Ra()||Xe(!1);let{basename:i,navigator:o}=Y.useContext(Bi),{hash:l,pathname:c,search:h}=id(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:Oi([i,c])),o.createHref({pathname:p,search:h,hash:l})}function Ra(){return Y.useContext(op)!=null}function ka(){return Ra()||Xe(!1),Y.useContext(op).location}function V_(n){Y.useContext(Bi).static||Y.useLayoutEffect(n)}function Na(){let{isDataRoute:n}=Y.useContext(mi);return n?ZS():jS()}function jS(){Ra()||Xe(!1);let n=Y.useContext(Hl),{basename:e,future:t,navigator:i}=Y.useContext(Bi),{matches:o}=Y.useContext(mi),{pathname:l}=ka(),c=JSON.stringify(nd(o,t.v7_relativeSplatPath)),h=Y.useRef(!1);return V_(()=>{h.current=!0}),Y.useCallback(function(y,_){if(_===void 0&&(_={}),!h.current)return;if(typeof y=="number"){i.go(y);return}let w=rd(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Oi([e,w.pathname])),(_.replace?i.replace:i.push)(w,_.state,_)},[e,i,c,l,n])}const US=Y.createContext(null);function zS(n){let e=Y.useContext(mi).outlet;return e&&Y.createElement(US.Provider,{value:n},e)}function BS(){let{matches:n}=Y.useContext(mi),e=n[n.length-1];return e?e.params:{}}function id(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Y.useContext(Bi),{matches:o}=Y.useContext(mi),{pathname:l}=ka(),c=JSON.stringify(nd(o,i.v7_relativeSplatPath));return Y.useMemo(()=>rd(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function $S(n,e,t,i){Ra()||Xe(!1);let{navigator:o}=Y.useContext(Bi),{matches:l}=Y.useContext(mi),c=l[l.length-1],h=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=ka(),_;_=y;let w=_.pathname||"/",S=w;if(p!=="/"){let U=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(U.length).join("/")}let A=ho(n,{pathname:S});return KS(A&&A.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:Oi([p,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:Oi([p,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,i)}function HS(){let n=XS(),e=Dl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:o},t):null,null)}const WS=Y.createElement(HS,null);class qS extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(mi.Provider,{value:this.props.routeContext},Y.createElement(L_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GS(n){let{routeContext:e,match:t,children:i}=n,o=Y.useContext(Hl);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(mi.Provider,{value:e},i)}function KS(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let _=c.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);_>=0||Xe(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let w=c[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=_),w.route.id){let{loaderData:S,errors:A}=t,V=w.route.loader&&S[w.route.id]===void 0&&(!A||A[w.route.id]===void 0);if(w.route.lazy||V){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,w,S)=>{let A,V=!1,U=null,$=null;t&&(A=h&&w.route.id?h[w.route.id]:void 0,U=w.route.errorElement||WS,p&&(y<0&&S===0?(eI("route-fallback"),V=!0,$=null):y===S&&(V=!0,$=w.route.hydrateFallbackElement||null)));let pe=e.concat(c.slice(0,S+1)),ee=()=>{let de;return A?de=U:V?de=$:w.route.Component?de=Y.createElement(w.route.Component,null):w.route.element?de=w.route.element:de=_,Y.createElement(GS,{match:w,routeContext:{outlet:_,matches:pe,isDataRoute:t!=null},children:de})};return t&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?Y.createElement(qS,{location:t.location,revalidation:t.revalidation,component:U,error:A,children:ee(),routeContext:{outlet:null,matches:pe,isDataRoute:!0}}):ee()},null)}var M_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(M_||{}),F_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(F_||{});function QS(n){let e=Y.useContext(Hl);return e||Xe(!1),e}function JS(n){let e=Y.useContext(sp);return e||Xe(!1),e}function YS(n){let e=Y.useContext(mi);return e||Xe(!1),e}function j_(n){let e=YS(),t=e.matches[e.matches.length-1];return t.route.id||Xe(!1),t.route.id}function XS(){var n;let e=Y.useContext(L_),t=JS(F_.UseRouteError),i=j_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function ZS(){let{router:n}=QS(M_.UseNavigateStable),e=j_(),t=Y.useRef(!1);return V_(()=>{t.current=!0}),Y.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Dc({fromRouteId:e},l)))},[n,e])}const Vy={};function eI(n,e,t){Vy[n]||(Vy[n]=!0)}function tI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function nI(n){let{to:e,replace:t,state:i,relative:o}=n;Ra()||Xe(!1);let{future:l,static:c}=Y.useContext(Bi),{matches:h}=Y.useContext(mi),{pathname:p}=ka(),y=Na(),_=rd(e,nd(h,l.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(_);return Y.useEffect(()=>y(JSON.parse(w),{replace:t,state:i,relative:o}),[y,w,o,t,i]),null}function rI(n){return zS(n.context)}function iI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Jt.Pop,navigator:l,static:c=!1,future:h}=n;Ra()&&Xe(!1);let p=e.replace(/^\/*/,"/"),y=Y.useMemo(()=>({basename:p,navigator:l,static:c,future:Dc({v7_relativeSplatPath:!1},h)}),[p,h,l,c]);typeof i=="string"&&(i=Ls(i));let{pathname:_="/",search:w="",hash:S="",state:A=null,key:V="default"}=i,U=Y.useMemo(()=>{let $=Mi(_,p);return $==null?null:{location:{pathname:$,search:w,hash:S,state:A,key:V},navigationType:o}},[p,_,w,S,A,V,o]);return U==null?null:Y.createElement(Bi.Provider,{value:y},Y.createElement(op.Provider,{children:t,value:U}))}new Promise(()=>{});function sI(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:Y.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Y.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:Y.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ta.apply(this,arguments)}function U_(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function oI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aI(n,e){return n.button===0&&(!e||e==="_self")&&!oI(n)}const lI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cI="6";try{window.__reactRouterVersion=cI}catch{}function dI(n,e){return vS({basename:void 0,future:Ta({},void 0,{v7_prependBasename:!0}),history:BT({window:void 0}),hydrationData:hI(),routes:n,mapRouteProperties:sI,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function hI(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Ta({},e,{errors:fI(e.errors)})),e}function fI(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new bc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let l=window[o.__subType];if(typeof l=="function")try{let c=new l(o.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(o.message);l.stack="",t[i]=l}}else t[i]=o;return t}const z_=Y.createContext({isTransitioning:!1}),pI=Y.createContext(new Map),mI="startTransition",My=DT[mI],gI="flushSync",Fy=zT[gI];function yI(n){My?My(n):n()}function yl(n){Fy?Fy(n):n()}let vI=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function _I(n){let{fallbackElement:e,router:t,future:i}=n,[o,l]=Y.useState(t.state),[c,h]=Y.useState(),[p,y]=Y.useState({isTransitioning:!1}),[_,w]=Y.useState(),[S,A]=Y.useState(),[V,U]=Y.useState(),$=Y.useRef(new Map),{v7_startTransition:pe}=i||{},ee=Y.useCallback(C=>{pe?yI(C):C()},[pe]),de=Y.useCallback((C,P)=>{let{deletedFetchers:b,flushSync:L,viewTransitionOpts:F}=P;C.fetchers.forEach((Ye,St)=>{Ye.data!==void 0&&$.current.set(St,Ye.data)}),b.forEach(Ye=>$.current.delete(Ye));let k=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!F||k){L?yl(()=>l(C)):ee(()=>l(C));return}if(L){yl(()=>{S&&(_&&_.resolve(),S.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let Ye=t.window.document.startViewTransition(()=>{yl(()=>l(C))});Ye.finished.finally(()=>{yl(()=>{w(void 0),A(void 0),h(void 0),y({isTransitioning:!1})})}),yl(()=>A(Ye));return}S?(_&&_.resolve(),S.skipTransition(),U({state:C,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(h(C),y({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[t.window,S,_,$,ee]);Y.useLayoutEffect(()=>t.subscribe(de),[t,de]),Y.useEffect(()=>{p.isTransitioning&&!p.flushSync&&w(new vI)},[p]),Y.useEffect(()=>{if(_&&c&&t.window){let C=c,P=_.promise,b=t.window.document.startViewTransition(async()=>{ee(()=>l(C)),await P});b.finished.finally(()=>{w(void 0),A(void 0),h(void 0),y({isTransitioning:!1})}),A(b)}},[ee,c,_,t.window]),Y.useEffect(()=>{_&&c&&o.location.key===c.location.key&&_.resolve()},[_,S,o.location,c]),Y.useEffect(()=>{!p.isTransitioning&&V&&(h(V.state),y({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}),U(void 0))},[p.isTransitioning,V]),Y.useEffect(()=>{},[]);let me=Y.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:C=>t.navigate(C),push:(C,P,b)=>t.navigate(C,{state:P,preventScrollReset:b?.preventScrollReset}),replace:(C,P,b)=>t.navigate(C,{replace:!0,state:P,preventScrollReset:b?.preventScrollReset})}),[t]),je=t.basename||"/",Fe=Y.useMemo(()=>({router:t,navigator:me,static:!1,basename:je}),[t,me,je]),x=Y.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Y.useEffect(()=>tI(i,t.future),[i,t.future]),Y.createElement(Y.Fragment,null,Y.createElement(Hl.Provider,{value:Fe},Y.createElement(sp.Provider,{value:o},Y.createElement(pI.Provider,{value:$.current},Y.createElement(z_.Provider,{value:p},Y.createElement(iI,{basename:je,location:o.location,navigationType:o.historyAction,navigator:me,future:x},o.initialized||t.future.v7_partialHydration?Y.createElement(wI,{routes:t.routes,future:t.future,state:o}):e))))),null)}const wI=Y.memo(EI);function EI(n){let{routes:e,future:t,state:i}=n;return $S(e,void 0,i,t)}const TI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B_=Y.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:h,target:p,to:y,preventScrollReset:_,viewTransition:w}=e,S=U_(e,lI),{basename:A}=Y.useContext(Bi),V,U=!1;if(typeof y=="string"&&SI.test(y)&&(V=y,TI))try{let de=new URL(window.location.href),me=y.startsWith("//")?new URL(de.protocol+y):new URL(y),je=Mi(me.pathname,A);me.origin===de.origin&&je!=null?y=je+me.search+me.hash:U=!0}catch{}let $=FS(y,{relative:o}),pe=CI(y,{replace:c,state:h,target:p,preventScrollReset:_,relative:o,viewTransition:w});function ee(de){i&&i(de),de.defaultPrevented||pe(de)}return Y.createElement("a",Ta({},S,{href:V||$,onClick:U||l?i:ee,ref:t,target:p}))}),II=Y.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:o=!1,className:l="",end:c=!1,style:h,to:p,viewTransition:y,children:_}=e,w=U_(e,uI),S=id(p,{relative:w.relative}),A=ka(),V=Y.useContext(sp),{navigator:U,basename:$}=Y.useContext(Bi),pe=V!=null&&AI(S)&&y===!0,ee=U.encodeLocation?U.encodeLocation(S).pathname:S.pathname,de=A.pathname,me=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;o||(de=de.toLowerCase(),me=me?me.toLowerCase():null,ee=ee.toLowerCase()),me&&$&&(me=Mi(me,$)||me);const je=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Fe=de===ee||!c&&de.startsWith(ee)&&de.charAt(je)==="/",x=me!=null&&(me===ee||!c&&me.startsWith(ee)&&me.charAt(ee.length)==="/"),C={isActive:Fe,isPending:x,isTransitioning:pe},P=Fe?i:void 0,b;typeof l=="function"?b=l(C):b=[l,Fe?"active":null,x?"pending":null,pe?"transitioning":null].filter(Boolean).join(" ");let L=typeof h=="function"?h(C):h;return Y.createElement(B_,Ta({},w,{"aria-current":P,className:b,ref:t,style:L,to:p,viewTransition:y}),typeof _=="function"?_(C):_)});var Cf;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Cf||(Cf={}));var jy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(jy||(jy={}));function xI(n){let e=Y.useContext(Hl);return e||Xe(!1),e}function CI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:h}=e===void 0?{}:e,p=Na(),y=ka(),_=id(n,{relative:c});return Y.useCallback(w=>{if(aI(w,t)){w.preventDefault();let S=i!==void 0?i:vo(y)===vo(_);p(n,{replace:S,state:o,preventScrollReset:l,relative:c,viewTransition:h})}},[y,p,_,i,o,t,n,l,c,h])}function AI(n,e){e===void 0&&(e={});let t=Y.useContext(z_);t==null&&Xe(!1);let{basename:i}=xI(Cf.useViewTransitionState),o=id(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Mi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Mi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Nc(o.pathname,c)!=null||Nc(o.pathname,l)!=null}const PI=()=>{};var Uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},RI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},H_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,w=(l&3)<<4|h>>4;let S=(h&15)<<2|y>>6,A=y&63;p||(A=64,c||(S=64)),i.push(t[_],t[w],t[S],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||y==null||w==null)throw new kI;const S=l<<2|h>>4;if(i.push(S),y!==64){const A=h<<4&240|y>>2;if(i.push(A),w!==64){const V=y<<6&192|w;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NI=function(n){const e=$_(n);return H_.encodeByteArray(e,!0)},Oc=function(n){return NI(n).replace(/\./g,"")},W_=function(n){try{return H_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=()=>bI().__FIREBASE_DEFAULTS__,OI=()=>{if(typeof process>"u"||typeof Uy>"u")return;const n=Uy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&W_(n[1]);return e&&JSON.parse(e)},sd=()=>{try{return PI()||DI()||OI()||LI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},q_=n=>{var e,t;return(t=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},G_=n=>{const e=q_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},K_=()=>{var n;return(n=sd())===null||n===void 0?void 0:n.config},Q_=n=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ap(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Oc(JSON.stringify(t)),Oc(JSON.stringify(c)),""].join(".")}const xl={};function FI(){const n={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?n.emulator.push(e):n.prod.push(e);return n}function jI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zy=!1;function lp(n,e){if(typeof window>"u"||typeof document>"u"||!xo(window.location.host)||xl[n]===e||xl[n]||zy)return;xl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=FI().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,A){S.setAttribute("width","24"),S.setAttribute("id",A),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{zy=!0,c()},S}function _(S,A){S.setAttribute("id",A),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=jI(i),A=t("text"),V=document.getElementById(A)||document.createElement("span"),U=t("learnmore"),$=document.getElementById(U)||document.createElement("a"),pe=t("preprendIcon"),ee=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const de=S.element;h(de),_($,U);const me=y();p(ee,pe),de.append(ee,V,$,me),document.body.appendChild(de)}l?(V.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function zI(){var n;const e=(n=sd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $I(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WI(){const n=Nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qI(){return!zI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="FirebaseError";class gi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=QI,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?JI(l,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new gi(o,h,i)}}function JI(n,e){return n.replace(YI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const YI=/\{\$([^}]+)}/g;function XI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _o(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(By(l)&&By(c)){if(!_o(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function By(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _l(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function wl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ZI(n,e){const t=new ex(n,e);return t.subscribe.bind(t)}class ex{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");tx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=df),o.error===void 0&&(o.error=df),o.complete===void 0&&(o.complete=df);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function df(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){return n&&n._delegate?n._delegate:n}class As{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new VI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ix(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rx(n){return n===lo?void 0:n}function ix(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const ox={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},ax=lt.INFO,lx={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},ux=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=lx[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class up{constructor(e){this.name=e,this._logLevel=ax,this._logHandler=ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ox[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const cx=(n,e)=>e.some(t=>n instanceof t);let $y,Hy;function dx(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hx(){return Hy||(Hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J_=new WeakMap,Af=new WeakMap,Y_=new WeakMap,hf=new WeakMap,cp=new WeakMap;function fx(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ss(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&J_.set(t,n)}).catch(()=>{}),cp.set(e,n),e}function px(n){if(Af.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Af.set(n,e)}let Pf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Af.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Y_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mx(n){Pf=n(Pf)}function gx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ff(this),e,...t);return Y_.set(i,e.sort?e.sort():[e]),Ss(i)}:hx().includes(n)?function(...e){return n.apply(ff(this),e),Ss(J_.get(this))}:function(...e){return Ss(n.apply(ff(this),e))}}function yx(n){return typeof n=="function"?gx(n):(n instanceof IDBTransaction&&px(n),cx(n,dx())?new Proxy(n,Pf):n)}function Ss(n){if(n instanceof IDBRequest)return fx(n);if(hf.has(n))return hf.get(n);const e=yx(n);return e!==n&&(hf.set(n,e),cp.set(e,n)),e}const ff=n=>cp.get(n);function vx(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=Ss(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ss(c.result),p.oldVersion,p.newVersion,Ss(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const _x=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],pf=new Map;function Wy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pf.get(e))return pf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=wx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||_x.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),o&&p.done]))[0]};return pf.set(e,l),l}mx(n=>({...n,get:(e,t,i)=>Wy(e,t)||n.get(e,t,i),has:(e,t)=>!!Wy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Tx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Tx(n){const e=n.getComponent();return e?.type==="VERSION"}const Rf="@firebase/app",qy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new up("@firebase/app"),Sx="@firebase/app-compat",Ix="@firebase/analytics-compat",xx="@firebase/analytics",Cx="@firebase/app-check-compat",Ax="@firebase/app-check",Px="@firebase/auth",Rx="@firebase/auth-compat",kx="@firebase/database",Nx="@firebase/data-connect",bx="@firebase/database-compat",Dx="@firebase/functions",Ox="@firebase/functions-compat",Lx="@firebase/installations",Vx="@firebase/installations-compat",Mx="@firebase/messaging",Fx="@firebase/messaging-compat",jx="@firebase/performance",Ux="@firebase/performance-compat",zx="@firebase/remote-config",Bx="@firebase/remote-config-compat",$x="@firebase/storage",Hx="@firebase/storage-compat",Wx="@firebase/firestore",qx="@firebase/ai",Gx="@firebase/firestore-compat",Kx="firebase",Qx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",Jx={[Rf]:"fire-core",[Sx]:"fire-core-compat",[xx]:"fire-analytics",[Ix]:"fire-analytics-compat",[Ax]:"fire-app-check",[Cx]:"fire-app-check-compat",[Px]:"fire-auth",[Rx]:"fire-auth-compat",[kx]:"fire-rtdb",[Nx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[Dx]:"fire-fn",[Ox]:"fire-fn-compat",[Lx]:"fire-iid",[Vx]:"fire-iid-compat",[Mx]:"fire-fcm",[Fx]:"fire-fcm-compat",[jx]:"fire-perf",[Ux]:"fire-perf-compat",[zx]:"fire-rc",[Bx]:"fire-rc-compat",[$x]:"fire-gcs",[Hx]:"fire-gcs-compat",[Wx]:"fire-fst",[Gx]:"fire-fst-compat",[qx]:"fire-vertex","fire-js":"fire-js",[Kx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,Yx=new Map,Nf=new Map;function Gy(n,e){try{n.container.addComponent(e)}catch(t){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wo(n){const e=n.name;if(Nf.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;Nf.set(e,n);for(const t of Lc.values())Gy(t,n);for(const t of Yx.values())Gy(t,n);return!0}function od(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ar(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Wl("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=Qx;function X_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:kf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Is.create("bad-app-name",{appName:String(o)});if(t||(t=K_()),!t)throw Is.create("no-options");const l=Lc.get(o);if(l){if(_o(t,l.options)&&_o(i,l.config))return l;throw Is.create("duplicate-app",{appName:o})}const c=new sx(o);for(const p of Nf.values())c.addComponent(p);const h=new Zx(t,i,c);return Lc.set(o,h),h}function dp(n=kf){const e=Lc.get(n);if(!e&&n===kf&&K_())return X_();if(!e)throw Is.create("no-app",{appName:n});return e}function oi(n,e,t){var i;let o=(i=Jx[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(h.join(" "));return}wo(new As(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebase-heartbeat-database",tC=1,Ol="firebase-heartbeat-store";let mf=null;function Z_(){return mf||(mf=vx(eC,tC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ol)}catch(t){console.warn(t)}}}}).catch(n=>{throw Is.create("idb-open",{originalErrorMessage:n.message})})),mf}async function nC(n){try{const t=(await Z_()).transaction(Ol),i=await t.objectStore(Ol).get(ew(n));return await t.done,i}catch(e){if(e instanceof gi)Fi.warn(e.message);else{const t=Is.create("idb-get",{originalErrorMessage:e?.message});Fi.warn(t.message)}}}async function Ky(n,e){try{const i=(await Z_()).transaction(Ol,"readwrite");await i.objectStore(Ol).put(e,ew(n)),await i.done}catch(t){if(t instanceof gi)Fi.warn(t.message);else{const i=Is.create("idb-set",{originalErrorMessage:t?.message});Fi.warn(i.message)}}}function ew(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1024,iC=30;class sC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Qy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>iC){const c=lC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qy(),{heartbeatsToSend:i,unsentEntries:o}=oC(this._heartbeatsCache.heartbeats),l=Oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fi.warn(t),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function oC(n,e=rC){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Jy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Jy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class aC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Jy(n){return Oc(JSON.stringify({version:2,heartbeats:n})).length}function lC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){wo(new As("platform-logger",e=>new Ex(e),"PRIVATE")),wo(new As("heartbeat",e=>new sC(e),"PRIVATE")),oi(Rf,qy,n),oi(Rf,qy,"esm2017"),oi("fire-js","")}uC("");function hp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cC=tw,nw=new Wl("auth","Firebase",tw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new up("@firebase/auth");function dC(n,...e){Vc.logLevel<=lt.WARN&&Vc.warn(`Auth (${ba}): ${n}`,...e)}function wc(n,...e){Vc.logLevel<=lt.ERROR&&Vc.error(`Auth (${ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n,...e){throw fp(n,...e)}function ai(n,...e){return fp(n,...e)}function rw(n,e,t){const i=Object.assign(Object.assign({},cC()),{[e]:t});return new Wl("auth","Firebase",i).create(e,{appName:n.name})}function Li(n){return rw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return nw.create(n,...e)}function Be(n,e,...t){if(!n)throw fp(e,...t)}function bi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wc(e),new Error(e)}function ji(n,e){n||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hC(){return Yy()==="http:"||Yy()==="https:"}function Yy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hC()||$I()||"connection"in navigator)?navigator.onLine:!0}function pC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ji(t>e,"Short delay should be less than long delay!"),this.isMobile=UI()||HI()}get(){return fC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n,e){ji(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yC=new Gl(3e4,6e4);function Vs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ms(n,e,t,i,o={}){return sw(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=ql(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return BI()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&xo(n.emulatorConfig.host)&&(y.credentials="include"),iw.fetch()(await ow(n,n.config.apiHost,t,h),y)})}async function sw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},mC),e);try{const o=new _C(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw hc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw hc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw hc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw rw(n,_,y);jr(n,_)}}catch(o){if(o instanceof gi)throw o;jr(n,"network-request-failed",{message:String(o)})}}async function Kl(n,e,t,i,o={}){const l=await Ms(n,e,t,i,o);return"mfaPendingCredential"in l&&jr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function ow(n,e,t,i){const o=`${e}${t}?${i}`,l=n,c=l.config.emulator?pp(n.config,o):`${n.config.apiScheme}://${o}`;return gC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function vC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _C{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ai(this.auth,"network-request-failed")),yC.get())})}}function hc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ai(n,e,i);return o.customData._tokenResponse=t,o}function Xy(n){return n!==void 0&&n.enterprise!==void 0}class wC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EC(n,e){return Ms(n,"GET","/v2/recaptchaConfig",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,e){return Ms(n,"POST","/v1/accounts:delete",e)}async function Mc(n,e){return Ms(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SC(n,e=!1){const t=Zt(n),i=await t.getIdToken(e),o=mp(i);Be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Cl(gf(o.auth_time)),issuedAtTime:Cl(gf(o.iat)),expirationTime:Cl(gf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function gf(n){return Number(n)*1e3}function mp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return wc("JWT malformed, contained fewer than 3 sections"),null;try{const o=W_(t);return o?JSON.parse(o):(wc("Failed to decode base64 JWT payload"),null)}catch(o){return wc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Zy(n){const e=mp(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof gi&&IC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function IC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ll(n,Mc(t,{idToken:i}));Be(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?aw(l.providerUserInfo):[],h=AC(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!h?.length,_=p?y:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Df(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function CC(n){const e=Zt(n);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function aw(n){return n.map(e=>{var{providerId:t}=e,i=hp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(n,e){const t=await sw(n,{},async()=>{const i=ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await ow(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:i};return n.emulatorConfig&&xo(n.emulatorConfig.host)&&(p.credentials="include"),iw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(n,e){return Ms(n,"POST","/v2/accounts:revokeToken",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=Zy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await PC(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ga;return i&&(Be(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Be(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ga,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=hp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Df(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SC(this,e)}reload(){return CC(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await Ll(this,TC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,h,p,y,_;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,A=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,V=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(h=t.tenantId)!==null&&h!==void 0?h:void 0,$=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,pe=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ee=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:de,emailVerified:me,isAnonymous:je,providerData:Fe,stsTokenManager:x}=t;Be(de&&x,e,"internal-error");const C=ga.fromJSON(this.name,x);Be(typeof de=="string",e,"internal-error"),ms(w,e.name),ms(S,e.name),Be(typeof me=="boolean",e,"internal-error"),Be(typeof je=="boolean",e,"internal-error"),ms(A,e.name),ms(V,e.name),ms(U,e.name),ms($,e.name),ms(pe,e.name),ms(ee,e.name);const P=new Mr({uid:de,auth:e,email:S,emailVerified:me,displayName:w,isAnonymous:je,photoURL:V,phoneNumber:A,tenantId:U,stsTokenManager:C,createdAt:pe,lastLoginAt:ee});return Fe&&Array.isArray(Fe)&&(P.providerData=Fe.map(b=>Object.assign({},b))),$&&(P._redirectEventId=$),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new ga;o.updateFromServerResponse(t);const l=new Mr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Fc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Be(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?aw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,h=new ga;h.updateFromIdToken(i);const p=new Mr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Df(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function Di(n){ji(n instanceof Function,"Expected a class definition");let e=ev.get(n);return e?(ji(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ev.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lw.type="NONE";const tv=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n,e,t){return`firebase:${n}:${e}:${t}`}class ya{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Ec(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ec("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mc(this.auth,{idToken:e}).catch(()=>{});return t?Mr._fromGetAccountInfoResponse(this.auth,t,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ya(Di(tv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Di(tv);const c=Ec(i,e.config.apiKey,e.name);let h=null;for(const y of t)try{const _=await y._get(c);if(_){let w;if(typeof _=="string"){const S=await Mc(e,{idToken:_}).catch(()=>{});if(!S)break;w=await Mr._fromGetAccountInfoResponse(e,S,_)}else w=Mr._fromJSON(e,_);y!==l&&(h=w),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ya(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ya(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(cw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function uw(n=Nn()){return/firefox\//i.test(n)}function cw(n=Nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(n=Nn()){return/crios\//i.test(n)}function hw(n=Nn()){return/iemobile/i.test(n)}function fw(n=Nn()){return/android/i.test(n)}function pw(n=Nn()){return/blackberry/i.test(n)}function mw(n=Nn()){return/webos/i.test(n)}function gp(n=Nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kC(n=Nn()){var e;return gp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NC(){return WI()&&document.documentMode===10}function gw(n=Nn()){return gp(n)||fw(n)||mw(n)||pw(n)||/windows phone/i.test(n)||hw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n,e=[]){let t;switch(n){case"Browser":t=nv(Nn());break;case"Worker":t=`${nv(Nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(n,e={}){return Ms(n,"GET","/v2/passwordPolicy",Vs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=6;class LC{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:OC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mc(this,{idToken:e}),i=await Mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ar(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Li(this));const t=e?Zt(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DC(this),t=new LC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Di(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&dC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Co(n){return Zt(n)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZI(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MC(n){ad=n}function vw(n){return ad.loadJS(n)}function FC(){return ad.recaptchaEnterpriseScript}function jC(){return ad.gapiScript}function UC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class zC{constructor(){this.enterprise=new BC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $C="recaptcha-enterprise",_w="NO_RECAPTCHA";class HC{constructor(e){this.type=$C,this.auth=Co(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{EC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new wC(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{h(p)})})}function o(l,c,h){const p=window.grecaptcha;Xy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(_w)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zC().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!t&&Xy(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=FC();p.length!==0&&(p+=h),vw(p).then(()=>{o(h,l,c)}).catch(y=>{c(y)})}}).catch(h=>{c(h)})})}}async function iv(n,e,t,i=!1,o=!1){const l=new HC(n);let c;if(o)c=_w;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Of(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await iv(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await iv(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(n,e){const t=od(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_o(l,e??{}))return o;jr(o,"already-initialized")}return t.initialize({options:e})}function qC(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Di);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function GC(n,e,t){const i=Co(n);Be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=ww(e),{host:c,port:h}=KC(e),p=h===null?"":`:${h}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Be(_o(y,i.config.emulator)&&_o(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,xo(c)?(ap(`${l}//${c}${p}`),lp("Auth",!0)):QC()}function ww(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KC(n){const e=ww(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:sv(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:sv(c)}}}function sv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,t){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}async function JC(n,e){return Ms(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(n,e){return Kl(n,"POST","/v1/accounts:signInWithPassword",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,e){return Kl(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}async function ZC(n,e){return Kl(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends yp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Vl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Vl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,t,"signInWithPassword",YC);case"emailLink":return XC(e,{email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,i,"signUpPassword",JC);case"emailLink":return ZC(e,{idToken:t,email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(n,e){return Kl(n,"POST","/v1/accounts:signInWithIdp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="http://localhost";class Eo extends yp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=hp(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new Eo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return va(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,va(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,va(e,t)}buildRequest(){const e={requestUri:e1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ql(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n1(n){const e=_l(wl(n)).link,t=e?_l(wl(e)).deep_link_id:null,i=_l(wl(n)).deep_link_id;return(i?_l(wl(i)).link:null)||i||t||e||n}class vp{constructor(e){var t,i,o,l,c,h;const p=_l(wl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,w=t1((o=p.mode)!==null&&o!==void 0?o:null);Be(y&&_&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=n1(e);try{return new vp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.providerId=Da.PROVIDER_ID}static credential(e,t){return Vl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=vp.parseLink(t);return Be(i,"argument-error"),Vl._fromEmailAndCode(e,i.code,i.tenantId)}}Da.PROVIDER_ID="password";Da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Ew{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Ql{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Ql{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends Ql{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ws.credential(t,i)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(n,e){return Kl(n,"POST","/v1/accounts:signUp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Mr._fromIdTokenResponse(e,i,o),c=ov(i);return new To({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ov(i);return new To({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ov(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends gi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new jc(e,t,i,o)}}function Tw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(n,l,e,i):l})}async function i1(n,e,t=!1){const i=await Ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(n,e,t=!1){const{auth:i}=n;if(ar(i.app))return Promise.reject(Li(i));const o="reauthenticate";try{const l=await Ll(n,Tw(i,o,e,n),t);Be(l.idToken,i,"internal-error");const c=mp(l.idToken);Be(c,i,"internal-error");const{sub:h}=c;return Be(n.uid===h,i,"user-mismatch"),To._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&jr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(n,e,t=!1){if(ar(n.app))return Promise.reject(Li(n));const i="signIn",o=await Tw(n,i,e),l=await To._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function o1(n,e){return Sw(Co(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function a1(n,e,t){if(ar(n.app))return Promise.reject(Li(n));const i=Co(n),c=await Of(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Iw(n),p}),h=await To._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function l1(n,e,t){return ar(n.app)?Promise.reject(Li(n)):o1(Zt(n),Da.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Iw(n),i})}function u1(n,e,t,i){return Zt(n).onIdTokenChanged(e,t,i)}function c1(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}function d1(n,e,t,i){return Zt(n).onAuthStateChanged(e,t,i)}function h1(n){return Zt(n).signOut()}const Uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=1e3,p1=10;class Cw extends xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);NC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,p1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},f1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cw.type="LOCAL";const m1=Cw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Aw.type="SESSION";const Pw=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ld(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async y=>y(t.origin,l)),p=await g1(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const y=_p("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function v1(n){li().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function _1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function E1(){return Rw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",T1=1,zc="firebaseLocalStorage",Nw="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ud(n,e){return n.transaction([zc],e?"readwrite":"readonly").objectStore(zc)}function S1(){const n=indexedDB.deleteDatabase(kw);return new Jl(n).toPromise()}function Lf(){const n=indexedDB.open(kw,T1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(zc,{keyPath:Nw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(zc)?e(i):(i.close(),await S1(),e(await Lf()))})})}async function av(n,e,t){const i=ud(n,!0).put({[Nw]:e,value:t});return new Jl(i).toPromise()}async function I1(n,e){const t=ud(n,!1).get(e),i=await new Jl(t).toPromise();return i===void 0?null:i.value}function lv(n,e){const t=ud(n,!0).delete(e);return new Jl(t).toPromise()}const x1=800,C1=3;class bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>C1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(E1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _1(),!this.activeServiceWorker)return;this.sender=new y1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lf();return await av(e,Uc,"1"),await lv(e,Uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>av(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>I1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ud(o,!1).getAll();return new Jl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bw.type="LOCAL";const A1=bw;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n,e){return e?Di(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends yp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R1(n){return Sw(n.auth,new wp(n),n.bypassAuthState)}function k1(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),s1(t,new wp(n),n.bypassAuthState)}async function N1(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),i1(t,new wp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R1;case"linkViaPopup":case"linkViaRedirect":return N1;case"reauthViaPopup":case"reauthViaRedirect":return k1;default:jr(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Gl(2e3,1e4);class ma extends Dw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b1.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="pendingRedirect",Tc=new Map;class O1 extends Dw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Tc.get(this.auth._key());if(!e){try{const i=await L1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Tc.set(this.auth._key(),e)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L1(n,e){const t=F1(e),i=M1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function V1(n,e){Tc.set(n._key(),e)}function M1(n){return Di(n._redirectPersistence)}function F1(n){return Ec(D1,n.config.apiKey,n.name)}async function j1(n,e,t=!1){if(ar(n.app))return Promise.reject(Li(n));const i=Co(n),o=P1(i,e),c=await new O1(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=600*1e3;class z1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ow(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ai(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U1&&this.cachedEventUids.clear(),this.cachedEventUids.has(uv(e))}saveEventToCache(e){this.cachedEventUids.add(uv(e)),this.lastProcessedEventTime=Date.now()}}function uv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ow({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function B1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ow(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(n,e={}){return Ms(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W1=/^https?/;async function q1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $1(n);for(const t of e)try{if(G1(t))return}catch{}jr(n,"unauthorized-domain")}function G1(n){const e=bf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!W1.test(t))return!1;if(H1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Gl(3e4,6e4);function cv(){const n=li().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q1(n){return new Promise((e,t)=>{var i,o,l;function c(){cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cv(),t(ai(n,"network-request-failed"))},timeout:K1.get()})}if(!((o=(i=li().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=li().gapi)===null||l===void 0)&&l.load)c();else{const h=UC("iframefcb");return li()[h]=()=>{gapi.load?c():t(ai(n,"network-request-failed"))},vw(`${jC()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function J1(n){return Sc=Sc||Q1(n),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Gl(5e3,15e3),X1="__/auth/iframe",Z1="emulator/auth/iframe",eA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nA(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pp(e,Z1):`https://${n.config.authDomain}/${X1}`,i={apiKey:e.apiKey,appName:n.name,v:ba},o=tA.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ql(i).slice(1)}`}async function rA(n){const e=await J1(n),t=li().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:nA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eA,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=ai(n,"network-request-failed"),h=li().setTimeout(()=>{l(c)},Y1.get());function p(){li().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sA=500,oA=600,aA="_blank",lA="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uA(n,e,t,i=sA,o=oA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},iA),{width:i.toString(),height:o.toString(),top:l,left:c}),y=Nn().toLowerCase();t&&(h=dw(y)?aA:t),uw(y)&&(e=e||lA,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[A,V])=>`${S}${A}=${V},`,"");if(kC(y)&&h!=="_self")return cA(e||"",h),new dv(null);const w=window.open(e||"",h,_);Be(w,n,"popup-blocked");try{w.focus()}catch{}return new dv(w)}function cA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="__/auth/handler",hA="emulator/auth/handler",fA=encodeURIComponent("fac");async function hv(n,e,t,i,o,l){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ba,eventId:o};if(e instanceof Ew){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",XI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))c[_]=w}if(e instanceof Ql){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await n._getAppCheckToken(),y=p?`#${fA}=${encodeURIComponent(p)}`:"";return`${pA(n)}?${ql(h).slice(1)}${y}`}function pA({config:n}){return n.emulator?pp(n,hA):`https://${n.authDomain}/${dA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="webStorageSupport";class mA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pw,this._completeRedirectFn=j1,this._overrideRedirectResult=V1}async _openPopup(e,t,i,o){var l;ji((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await hv(e,t,i,bf(),o);return uA(e,c,_p())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await hv(e,t,i,bf(),o);return v1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ji(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await rA(e),i=new z1(e);return t.register("authEvent",o=>(Be(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yf,{type:yf},o=>{var l;const c=(l=o?.[0])===null||l===void 0?void 0:l[yf];c!==void 0&&t(!!c),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=q1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gw()||cw()||gp()}}const gA=mA;var fv="@firebase/auth",pv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _A(n){wo(new As("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Be(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(n)},y=new VC(i,o,l,p);return qC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),wo(new As("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(i=>new yA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oi(fv,pv,vA(n)),oi(fv,pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=300,EA=Q_("authIdTokenMaxAge")||wA;let mv=null;const TA=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>EA)return;const o=t?.token;mv!==o&&(mv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function SA(n=dp()){const e=od(n,"auth");if(e.isInitialized())return e.getImmediate();const t=WC(n,{popupRedirectResolver:gA,persistence:[A1,m1,Pw]}),i=Q_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=TA(l.toString());c1(t,c,()=>c(t.currentUser)),u1(t,h=>c(h))}}const o=q_("auth");return o&&GC(t,`http://${o}`),t}function IA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}MC({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ai("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",IA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_A("Browser");var xA="firebase",CA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi(xA,CA,"app");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,Lw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,C){function P(){}P.prototype=C.prototype,x.D=C.prototype,x.prototype=new P,x.prototype.constructor=x,x.C=function(b,L,F){for(var k=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)k[Ye-2]=arguments[Ye];return C.prototype[L].apply(b,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,P){P||(P=0);var b=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)b[L]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(L=0;16>L;++L)b[L]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=x.g[0],P=x.g[1],L=x.g[2];var F=x.g[3],k=C+(F^P&(L^F))+b[0]+3614090360&4294967295;C=P+(k<<7&4294967295|k>>>25),k=F+(L^C&(P^L))+b[1]+3905402710&4294967295,F=C+(k<<12&4294967295|k>>>20),k=L+(P^F&(C^P))+b[2]+606105819&4294967295,L=F+(k<<17&4294967295|k>>>15),k=P+(C^L&(F^C))+b[3]+3250441966&4294967295,P=L+(k<<22&4294967295|k>>>10),k=C+(F^P&(L^F))+b[4]+4118548399&4294967295,C=P+(k<<7&4294967295|k>>>25),k=F+(L^C&(P^L))+b[5]+1200080426&4294967295,F=C+(k<<12&4294967295|k>>>20),k=L+(P^F&(C^P))+b[6]+2821735955&4294967295,L=F+(k<<17&4294967295|k>>>15),k=P+(C^L&(F^C))+b[7]+4249261313&4294967295,P=L+(k<<22&4294967295|k>>>10),k=C+(F^P&(L^F))+b[8]+1770035416&4294967295,C=P+(k<<7&4294967295|k>>>25),k=F+(L^C&(P^L))+b[9]+2336552879&4294967295,F=C+(k<<12&4294967295|k>>>20),k=L+(P^F&(C^P))+b[10]+4294925233&4294967295,L=F+(k<<17&4294967295|k>>>15),k=P+(C^L&(F^C))+b[11]+2304563134&4294967295,P=L+(k<<22&4294967295|k>>>10),k=C+(F^P&(L^F))+b[12]+1804603682&4294967295,C=P+(k<<7&4294967295|k>>>25),k=F+(L^C&(P^L))+b[13]+4254626195&4294967295,F=C+(k<<12&4294967295|k>>>20),k=L+(P^F&(C^P))+b[14]+2792965006&4294967295,L=F+(k<<17&4294967295|k>>>15),k=P+(C^L&(F^C))+b[15]+1236535329&4294967295,P=L+(k<<22&4294967295|k>>>10),k=C+(L^F&(P^L))+b[1]+4129170786&4294967295,C=P+(k<<5&4294967295|k>>>27),k=F+(P^L&(C^P))+b[6]+3225465664&4294967295,F=C+(k<<9&4294967295|k>>>23),k=L+(C^P&(F^C))+b[11]+643717713&4294967295,L=F+(k<<14&4294967295|k>>>18),k=P+(F^C&(L^F))+b[0]+3921069994&4294967295,P=L+(k<<20&4294967295|k>>>12),k=C+(L^F&(P^L))+b[5]+3593408605&4294967295,C=P+(k<<5&4294967295|k>>>27),k=F+(P^L&(C^P))+b[10]+38016083&4294967295,F=C+(k<<9&4294967295|k>>>23),k=L+(C^P&(F^C))+b[15]+3634488961&4294967295,L=F+(k<<14&4294967295|k>>>18),k=P+(F^C&(L^F))+b[4]+3889429448&4294967295,P=L+(k<<20&4294967295|k>>>12),k=C+(L^F&(P^L))+b[9]+568446438&4294967295,C=P+(k<<5&4294967295|k>>>27),k=F+(P^L&(C^P))+b[14]+3275163606&4294967295,F=C+(k<<9&4294967295|k>>>23),k=L+(C^P&(F^C))+b[3]+4107603335&4294967295,L=F+(k<<14&4294967295|k>>>18),k=P+(F^C&(L^F))+b[8]+1163531501&4294967295,P=L+(k<<20&4294967295|k>>>12),k=C+(L^F&(P^L))+b[13]+2850285829&4294967295,C=P+(k<<5&4294967295|k>>>27),k=F+(P^L&(C^P))+b[2]+4243563512&4294967295,F=C+(k<<9&4294967295|k>>>23),k=L+(C^P&(F^C))+b[7]+1735328473&4294967295,L=F+(k<<14&4294967295|k>>>18),k=P+(F^C&(L^F))+b[12]+2368359562&4294967295,P=L+(k<<20&4294967295|k>>>12),k=C+(P^L^F)+b[5]+4294588738&4294967295,C=P+(k<<4&4294967295|k>>>28),k=F+(C^P^L)+b[8]+2272392833&4294967295,F=C+(k<<11&4294967295|k>>>21),k=L+(F^C^P)+b[11]+1839030562&4294967295,L=F+(k<<16&4294967295|k>>>16),k=P+(L^F^C)+b[14]+4259657740&4294967295,P=L+(k<<23&4294967295|k>>>9),k=C+(P^L^F)+b[1]+2763975236&4294967295,C=P+(k<<4&4294967295|k>>>28),k=F+(C^P^L)+b[4]+1272893353&4294967295,F=C+(k<<11&4294967295|k>>>21),k=L+(F^C^P)+b[7]+4139469664&4294967295,L=F+(k<<16&4294967295|k>>>16),k=P+(L^F^C)+b[10]+3200236656&4294967295,P=L+(k<<23&4294967295|k>>>9),k=C+(P^L^F)+b[13]+681279174&4294967295,C=P+(k<<4&4294967295|k>>>28),k=F+(C^P^L)+b[0]+3936430074&4294967295,F=C+(k<<11&4294967295|k>>>21),k=L+(F^C^P)+b[3]+3572445317&4294967295,L=F+(k<<16&4294967295|k>>>16),k=P+(L^F^C)+b[6]+76029189&4294967295,P=L+(k<<23&4294967295|k>>>9),k=C+(P^L^F)+b[9]+3654602809&4294967295,C=P+(k<<4&4294967295|k>>>28),k=F+(C^P^L)+b[12]+3873151461&4294967295,F=C+(k<<11&4294967295|k>>>21),k=L+(F^C^P)+b[15]+530742520&4294967295,L=F+(k<<16&4294967295|k>>>16),k=P+(L^F^C)+b[2]+3299628645&4294967295,P=L+(k<<23&4294967295|k>>>9),k=C+(L^(P|~F))+b[0]+4096336452&4294967295,C=P+(k<<6&4294967295|k>>>26),k=F+(P^(C|~L))+b[7]+1126891415&4294967295,F=C+(k<<10&4294967295|k>>>22),k=L+(C^(F|~P))+b[14]+2878612391&4294967295,L=F+(k<<15&4294967295|k>>>17),k=P+(F^(L|~C))+b[5]+4237533241&4294967295,P=L+(k<<21&4294967295|k>>>11),k=C+(L^(P|~F))+b[12]+1700485571&4294967295,C=P+(k<<6&4294967295|k>>>26),k=F+(P^(C|~L))+b[3]+2399980690&4294967295,F=C+(k<<10&4294967295|k>>>22),k=L+(C^(F|~P))+b[10]+4293915773&4294967295,L=F+(k<<15&4294967295|k>>>17),k=P+(F^(L|~C))+b[1]+2240044497&4294967295,P=L+(k<<21&4294967295|k>>>11),k=C+(L^(P|~F))+b[8]+1873313359&4294967295,C=P+(k<<6&4294967295|k>>>26),k=F+(P^(C|~L))+b[15]+4264355552&4294967295,F=C+(k<<10&4294967295|k>>>22),k=L+(C^(F|~P))+b[6]+2734768916&4294967295,L=F+(k<<15&4294967295|k>>>17),k=P+(F^(L|~C))+b[13]+1309151649&4294967295,P=L+(k<<21&4294967295|k>>>11),k=C+(L^(P|~F))+b[4]+4149444226&4294967295,C=P+(k<<6&4294967295|k>>>26),k=F+(P^(C|~L))+b[11]+3174756917&4294967295,F=C+(k<<10&4294967295|k>>>22),k=L+(C^(F|~P))+b[2]+718787259&4294967295,L=F+(k<<15&4294967295|k>>>17),k=P+(F^(L|~C))+b[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(L+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+F&4294967295}i.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var P=C-this.blockSize,b=this.B,L=this.h,F=0;F<C;){if(L==0)for(;F<=P;)o(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<C;)if(b[L++]=x.charCodeAt(F++),L==this.blockSize){o(this,b),L=0;break}}else for(;F<C;)if(b[L++]=x[F++],L==this.blockSize){o(this,b),L=0;break}}this.h=L,this.o+=C},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var P=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=P&255,P/=256;for(this.u(x),x=Array(16),C=P=0;4>C;++C)for(var b=0;32>b;b+=8)x[P++]=this.g[C]>>>b&255;return x};function l(x,C){var P=h;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=C(x)}function c(x,C){this.h=C;for(var P=[],b=!0,L=x.length-1;0<=L;L--){var F=x[L]|0;b&&F==C||(P[L]=F,b=!1)}this.g=P}var h={};function p(x){return-128<=x&&128>x?l(x,function(C){return new c([C|0],0>C?-1:0)}):new c([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return w;if(0>x)return $(y(-x));for(var C=[],P=1,b=0;x>=P;b++)C[b]=x/P|0,P*=4294967296;return new c(C,0)}function _(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return $(_(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(C,8)),b=w,L=0;L<x.length;L+=8){var F=Math.min(8,x.length-L),k=parseInt(x.substring(L,L+F),C);8>F?(F=y(Math.pow(C,F)),b=b.j(F).add(y(k))):(b=b.j(P),b=b.add(y(k)))}return b}var w=p(0),S=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(U(this))return-$(this).m();for(var x=0,C=1,P=0;P<this.g.length;P++){var b=this.i(P);x+=(0<=b?b:4294967296+b)*C,C*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(U(this))return"-"+$(this).toString(x);for(var C=y(Math.pow(x,6)),P=this,b="";;){var L=me(P,C).g;P=pe(P,L.j(C));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(x);if(P=L,V(P))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function U(x){return x.h==-1}n.l=function(x){return x=pe(this,x),U(x)?-1:V(x)?0:1};function $(x){for(var C=x.g.length,P=[],b=0;b<C;b++)P[b]=~x.g[b];return new c(P,~x.h).add(S)}n.abs=function(){return U(this)?$(this):this},n.add=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],b=0,L=0;L<=C;L++){var F=b+(this.i(L)&65535)+(x.i(L)&65535),k=(F>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);b=k>>>16,F&=65535,k&=65535,P[L]=k<<16|F}return new c(P,P[P.length-1]&-2147483648?-1:0)};function pe(x,C){return x.add($(C))}n.j=function(x){if(V(this)||V(x))return w;if(U(this))return U(x)?$(this).j($(x)):$($(this).j(x));if(U(x))return $(this.j($(x)));if(0>this.l(A)&&0>x.l(A))return y(this.m()*x.m());for(var C=this.g.length+x.g.length,P=[],b=0;b<2*C;b++)P[b]=0;for(b=0;b<this.g.length;b++)for(var L=0;L<x.g.length;L++){var F=this.i(b)>>>16,k=this.i(b)&65535,Ye=x.i(L)>>>16,St=x.i(L)&65535;P[2*b+2*L]+=k*St,ee(P,2*b+2*L),P[2*b+2*L+1]+=F*St,ee(P,2*b+2*L+1),P[2*b+2*L+1]+=k*Ye,ee(P,2*b+2*L+1),P[2*b+2*L+2]+=F*Ye,ee(P,2*b+2*L+2)}for(b=0;b<C;b++)P[b]=P[2*b+1]<<16|P[2*b];for(b=C;b<2*C;b++)P[b]=0;return new c(P,0)};function ee(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function de(x,C){this.g=x,this.h=C}function me(x,C){if(V(C))throw Error("division by zero");if(V(x))return new de(w,w);if(U(x))return C=me($(x),C),new de($(C.g),$(C.h));if(U(C))return C=me(x,$(C)),new de($(C.g),C.h);if(30<x.g.length){if(U(x)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var P=S,b=C;0>=b.l(x);)P=je(P),b=je(b);var L=Fe(P,1),F=Fe(b,1);for(b=Fe(b,2),P=Fe(P,2);!V(b);){var k=F.add(b);0>=k.l(x)&&(L=L.add(P),F=k),b=Fe(b,1),P=Fe(P,1)}return C=pe(x,L.j(C)),new de(L,C)}for(L=w;0<=x.l(C);){for(P=Math.max(1,Math.floor(x.m()/C.m())),b=Math.ceil(Math.log(P)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=y(P),k=F.j(C);U(k)||0<k.l(x);)P-=b,F=y(P),k=F.j(C);V(F)&&(F=S),L=L.add(F),x=pe(x,k)}return new de(L,x)}n.A=function(x){return me(this,x).h},n.and=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],b=0;b<C;b++)P[b]=this.i(b)&x.i(b);return new c(P,this.h&x.h)},n.or=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],b=0;b<C;b++)P[b]=this.i(b)|x.i(b);return new c(P,this.h|x.h)},n.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],b=0;b<C;b++)P[b]=this.i(b)^x.i(b);return new c(P,this.h^x.h)};function je(x){for(var C=x.g.length+1,P=[],b=0;b<C;b++)P[b]=x.i(b)<<1|x.i(b-1)>>>31;return new c(P,x.h)}function Fe(x,C){var P=C>>5;C%=32;for(var b=x.g.length-P,L=[],F=0;F<b;F++)L[F]=0<C?x.i(F+P)>>>C|x.i(F+P+1)<<32-C:x.i(F+P);return new c(L,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Lw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,xs=c}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vw,El,Mw,Ic,Vf,Fw,jw,Uw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in v))break e;v=v[B]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,B={next:function(){if(!I&&v<u.length){var J=v++;return{value:m(J,u[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,S.apply(null,arguments)}function A(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function V(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,B,J){for(var he=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)he[Et-2]=arguments[Et];return m.prototype[B].apply(I,he)}}function U(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function $(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const B=u.length||0,J=I.length||0;u.length=B+J;for(let he=0;he<J;he++)u[B+he]=I[he]}else u.push(I)}}class pe{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function de(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function me(u){return me[" "](u),u}me[" "]=function(){};var je=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function Fe(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function C(u){const m={};for(const v in u)m[v]=u[v];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let v,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(v in I)u[v]=I[v];for(let J=0;J<P.length;J++)v=P[J],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function F(u){h.setTimeout(()=>{throw u},0)}function k(){var u=Ne;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ye{constructor(){this.h=this.g=null}add(m,v){const I=St.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var St=new pe(()=>new Vt,u=>u.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,ae=!1,Ne=new Ye,ge=()=>{const u=h.Promise.resolve(void 0);ot=()=>{u.then(j)}};var j=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){F(v)}var m=St;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ae=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var He=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u})();function De(u,m){if(Ae.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(je){e:{try{me(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}V(De,Ae);var Ue={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),et=0;function yt(u,m,v,I,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=B,this.key=++et,this.da=this.fa=!1}function zt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Jn(u){this.src=u,this.g={},this.h=0}Jn.prototype.add=function(u,m,v,I,B){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var he=dn(u,m,I,B);return-1<he?(m=u[he],v||(m.fa=!1)):(m=new yt(m,this.src,J,!!I,B),m.fa=v,u.push(m)),m};function bt(u,m){var v=m.type;if(v in u.g){var I=u.g[v],B=Array.prototype.indexOf.call(I,m,void 0),J;(J=0<=B)&&Array.prototype.splice.call(I,B,1),J&&(zt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function dn(u,m,v,I){for(var B=0;B<u.length;++B){var J=u[B];if(!J.da&&J.listener==m&&J.capture==!!v&&J.ha==I)return B}return-1}var ur="closure_lm_"+(1e6*Math.random()|0),zr={};function gt(u,m,v,I,B){if(Array.isArray(m)){for(var J=0;J<m.length;J++)gt(u,m[J],v,I,B);return null}return v=ye(v),u&&u[Ke]?u.K(m,v,y(I)?!!I.capture:!1,B):yi(u,m,v,!1,I,B)}function yi(u,m,v,I,B,J){if(!m)throw Error("Invalid event type");var he=y(B)?!!B.capture:!!B,Et=se(u);if(Et||(u[ur]=Et=new Jn(u)),v=Et.add(m,v,I,he,J),v.proxy)return v;if(I=$i(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)He||(B=he),B===void 0&&(B=!1),u.addEventListener(m.toString(),I,B);else if(u.attachEvent)u.attachEvent(q(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $i(){function u(v){return m.call(u.src,u.listener,v)}const m=Z;return u}function N(u,m,v,I,B){if(Array.isArray(m))for(var J=0;J<m.length;J++)N(u,m[J],v,I,B);else I=y(I)?!!I.capture:!!I,v=ye(v),u&&u[Ke]?(u=u.i,m=String(m).toString(),m in u.g&&(J=u.g[m],v=dn(J,v,I,B),-1<v&&(zt(J[v]),Array.prototype.splice.call(J,v,1),J.length==0&&(delete u.g[m],u.h--)))):u&&(u=se(u))&&(m=u.g[m.toString()],u=-1,m&&(u=dn(m,v,I,B)),(v=-1<u?m[u]:null)&&G(v))}function G(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ke])bt(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(q(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=se(m))?(bt(v,u),v.h==0&&(v.src=null,m[ur]=null)):zt(u)}}}function q(u){return u in zr?zr[u]:zr[u]="on"+u}function Z(u,m){if(u.da)u=!0;else{m=new De(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&G(u),u=v.call(I,m)}return u}function se(u){return u=u[ur],u instanceof Jn?u:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(u){return typeof u=="function"?u:(u[ue]||(u[ue]=function(m){return u.handleEvent(m)}),u[ue])}function Te(){X.call(this),this.i=new Jn(this),this.M=this,this.F=null}V(Te,X),Te.prototype[Ke]=!0,Te.prototype.removeEventListener=function(u,m,v,I){N(this,u,m,v,I)};function Je(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Ae(m,u);else if(m instanceof Ae)m.target=m.target||u;else{var B=m;m=new Ae(I,u),b(m,B)}if(B=!0,v)for(var J=v.length-1;0<=J;J--){var he=m.g=v[J];B=tt(he,I,!0,m)&&B}if(he=m.g=u,B=tt(he,I,!0,m)&&B,B=tt(he,I,!1,m)&&B,v)for(J=0;J<v.length;J++)he=m.g=v[J],B=tt(he,I,!1,m)&&B}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)zt(v[I]);delete u.g[m],u.h--}}this.F=null},Te.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},Te.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function tt(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,J=0;J<m.length;++J){var he=m[J];if(he&&!he.da&&he.capture==v){var Et=he.listener,en=he.ha||he.src;he.fa&&bt(u.i,he),B=Et.call(en,I)!==!1&&B}}return B&&!I.defaultPrevented}function xt(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function At(u){u.g=xt(()=>{u.g=null,u.i&&(u.i=!1,At(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class wn extends X{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(u){X.call(this),this.h=u,this.g={}}V(Sr,X);var En=[];function Br(u){Fe(u.g,function(m,v){this.g.hasOwnProperty(v)&&G(m)},u),u.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),Br(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=h.JSON.stringify,Hi=h.JSON.parse,Us=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Hr(){}Hr.prototype.h=null;function Ir(u){return u.h||(u.h=u.i())}function vi(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){Ae.call(this,"d")}V(Ln,Ae);function Wi(){Ae.call(this,"c")}V(Wi,Ae);var Yn={},zs=null;function Wr(){return zs=zs||new Te}Yn.La="serverreachability";function qr(u){Ae.call(this,Yn.La,u)}V(qr,Ae);function Vn(u){const m=Wr();Je(m,new qr(m))}Yn.STAT_EVENT="statevent";function Bs(u,m){Ae.call(this,Yn.STAT_EVENT,u),this.stat=m}V(Bs,Ae);function Mt(u){const m=Wr();Je(m,new Bs(m,u))}Yn.Ma="timingevent";function D(u,m){Ae.call(this,Yn.Ma,u),this.size=m}V(D,Ae);function z(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function K(){this.g=!0}K.prototype.xa=function(){this.g=!1};function ne(u,m,v,I,B,J){u.info(function(){if(u.g)if(J)for(var he="",Et=J.split("&"),en=0;en<Et.length;en++){var dt=Et[en].split("=");if(1<dt.length){var on=dt[0];dt=dt[1];var Gt=on.split("_");he=2<=Gt.length&&Gt[1]=="type"?he+(on+"="+dt+"&"):he+(on+"=redacted&")}}else he=null;else he=J;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+v+`
`+he})}function fe(u,m,v,I,B,J,he){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+v+`
`+J+" "+he})}function Ie(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+xe(u,v)+(I?" "+I:"")})}function Le(u,m){u.info(function(){return"TIMEOUT: "+m})}K.prototype.info=function(){};function xe(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var J=B[0];if(J!="noop"&&J!="stop"&&J!="close")for(var he=1;he<B.length;he++)B[he]=""}}}}return $r(v)}catch{return m}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},we;function ze(){}V(ze,Hr),ze.prototype.g=function(){return new XMLHttpRequest},ze.prototype.i=function(){return{}},we=new ze;function qe(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bt}function Bt(){this.i=null,this.g="",this.h=!1}var pt={},nt={};function wt(u,m,v){u.L=1,u.v=Ji(er(m)),u.m=v,u.P=!0,cr(u,null)}function cr(u,m){u.F=Date.now(),it(u),u.A=er(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Xi(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Bt,u.g=mu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new wn(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(En[0]=B.toString()),B=En);for(var J=0;J<B.length;J++){var he=gt(v,B[J],I||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Vn(),ne(u.i,u.u,u.A,u.l,u.R,u.m)}qe.prototype.ca=function(u){u=u.target;const m=this.M;m&&Fn(u)==3?m.j():this.Y(u)},qe.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Fn(this.g);var m=this.g.Ba();const fr=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||za(this.g)))){this.J||Gt!=4||m==7||(m==8||0>=fr?Vn(3):Vn(2)),Zn(this);var v=this.g.Z();this.X=v;t:if(Gr(this)){var I=za(this.g);u="";var B=I.length,J=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Sn(this);var he="";break t}this.h.i=new h.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(J&&m==B-1)});I.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,fe(this.i,this.u,this.A,this.l,this.R,Gt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,en=this.g;if((Et=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Et)){var dt=Et;break t}}dt=null}if(v=dt)Ie(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kr(this,v);else{this.o=!1,this.s=3,Mt(12),hn(this),Sn(this);break e}}if(this.P){v=!0;let nr;for(;!this.J&&this.C<he.length;)if(nr=Xn(this,he),nr==nt){Gt==4&&(this.s=4,Mt(14),v=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==pt){this.s=4,Mt(15),Ie(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else Ie(this.i,this.l,nr,null),Kr(this,nr);if(Gr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||he.length!=0||this.h.h||(this.s=1,Mt(16),v=!1),this.o=this.o&&v,!v)Ie(this.i,this.l,he,"[Invalid Chunked Response]"),hn(this),Sn(this);else if(0<he.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),$a(on),on.M=!0,Mt(11))}}else Ie(this.i,this.l,he,null),Kr(this,he);Gt==4&&hn(this),this.o&&!this.J&&(Gt==4?zo(this.j,this):(this.o=!1,it(this)))}else Vo(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),hn(this),Sn(this)}}}catch{}finally{}};function Gr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xn(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?nt:(v=Number(m.substring(v,I)),isNaN(v)?pt:(I+=1,I+v>m.length?nt:(m=m.slice(I,I+v),u.C=I+v,m)))}qe.prototype.cancel=function(){this.J=!0,hn(this)};function it(u){u.S=Date.now()+u.I,qi(u,u.I)}function qi(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=z(S(u.ba,u),m)}function Zn(u){u.B&&(h.clearTimeout(u.B),u.B=null)}qe.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Le(this.i,this.A),this.L!=2&&(Vn(),Mt(17)),hn(this),this.s=2,Sn(this)):qi(this,this.S-u)};function Sn(u){u.j.G==0||u.J||zo(u.j,u)}function hn(u){Zn(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Br(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Kr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||at(v.h,u))){if(!u.K&&at(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Uo(v),Rr(v);else break e;jo(v),Mt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=z(S(v.Za,v),6e3));if(1>=Qr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Si(v,11)}else if((u.K||v.g==u)&&Uo(v),!ee(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let dt=B[m];if(v.T=dt[0],dt=dt[1],v.G==2)if(dt[0]=="c"){v.K=dt[1],v.ia=dt[2];const on=dt[3];on!=null&&(v.la=on,v.j.info("VER="+v.la));const Gt=dt[4];Gt!=null&&(v.Aa=Gt,v.j.info("SVER="+v.Aa));const fr=dt[5];fr!=null&&typeof fr=="number"&&0<fr&&(I=1.5*fr,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const nr=u.g;if(nr){const Qs=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var J=I.h;J.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(dr(J,J.h),J.h=null))}if(I.D){const $o=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(I.ya=$o,It(I.I,I.D,$o))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var he=u;if(I.qa=pu(I,I.J?I.ia:null,I.W),he.K){$s(I.h,he);var Et=he,en=I.L;en&&(Et.I=en),Et.B&&(Zn(Et),it(Et)),I.g=he}else Ks(I);0<v.i.length&&Zr(v)}else dt[0]!="stop"&&dt[0]!="close"||Si(v,7);else v.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Si(v,7):pn(v):dt[0]!="noop"&&v.l&&v.l.ta(dt),v.v=0)}}Vn(4)}catch{}}var st=class{constructor(u,m){this.g=u,this.map=m}};function vt(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qr(u){return u.h?1:u.g?u.g.size:0}function at(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function dr(u,m){u.g?u.g.add(m):u.h=m}function $s(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}vt.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ko(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return U(u.i)}function No(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function bo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Gi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=bo(u),I=No(u),B=I.length,J=0;J<B;J++)m.call(void 0,I[J],v&&v[J],u)}var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bd(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),B=null;if(0<=I){var J=u[v].substring(0,I);B=u[v].substring(I+1)}else J=u[v];m(J,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function _i(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _i){this.h=u.h,Ws(this,u.j),this.o=u.o,this.g=u.g,Ki(this,u.s),this.l=u.l;var m=u.i,v=new Jr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Qi(this,v),this.m=u.m}else u&&(m=String(u).match(Hs))?(this.h=!1,Ws(this,m[1]||"",!0),this.o=ct(m[2]||""),this.g=ct(m[3]||"",!0),Ki(this,m[4]),this.l=ct(m[5]||"",!0),Qi(this,m[6]||"",!0),this.m=ct(m[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}_i.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Yi(m,Do,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Yi(m,Do,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Yi(v,v.charAt(0)=="/"?ou:su,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Yi(v,Fa)),u.join("")};function er(u){return new _i(u)}function Ws(u,m,v){u.j=v?ct(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ki(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qi(u,m,v){m instanceof Jr?(u.i=m,Yr(u.i,u.h)):(v||(m=Yi(m,au)),u.i=new Jr(m,u.h))}function It(u,m,v){u.i.set(m,v)}function Ji(u){return It(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ct(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yi(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,iu),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function iu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Do=/[#\/\?@]/g,su=/[#\?:]/g,ou=/[#\?]/g,au=/[#\?@]/g,Fa=/#/g;function Jr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function fn(u){u.g||(u.g=new Map,u.h=0,u.i&&bd(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Jr.prototype,n.add=function(u,m){fn(this),this.i=null,u=hr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function xr(u,m){fn(u),m=hr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Cr(u,m){return fn(u),m=hr(u,m),u.g.has(m)}n.forEach=function(u,m){fn(this),this.g.forEach(function(v,I){v.forEach(function(B){u.call(m,B,I,this)},this)},this)},n.na=function(){fn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const B=u[I];for(let J=0;J<B.length;J++)v.push(m[I])}return v},n.V=function(u){fn(this);let m=[];if(typeof u=="string")Cr(this,u)&&(m=m.concat(this.g.get(hr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return fn(this),this.i=null,u=hr(this,u),Cr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Xi(u,m,v){xr(u,m),0<v.length&&(u.i=null,u.g.set(hr(u,m),U(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const J=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var B=J;he[I]!==""&&(B+="="+encodeURIComponent(String(he[I]))),u.push(B)}}return this.i=u.join("&")};function hr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Yr(u,m){m&&!u.j&&(fn(u),u.i=null,u.g.forEach(function(v,I){var B=I.toLowerCase();I!=B&&(xr(this,I),Xi(this,B,v))},u)),u.j=m}function Dd(u,m){const v=new K;if(h.Image){const I=new Image;I.onload=A(Mn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=A(Mn,v,"TestLoadImage: error",!1,m,I),I.onabort=A(Mn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=A(Mn,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function lu(u,m){const v=new K,I=new AbortController,B=setTimeout(()=>{I.abort(),Mn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(J=>{clearTimeout(B),J.ok?Mn(v,"TestPingServer: ok",!0,m):Mn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Mn(v,"TestPingServer: error",!1,m)})}function Mn(u,m,v,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(v)}catch{}}function Od(){this.g=new Us}function uu(u,m,v){const I=v||"";try{Gi(u,function(B,J){let he=B;y(B)&&(he=$r(B)),m.push(I+J+"="+encodeURIComponent(he))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function wi(u){this.l=u.Ub||null,this.j=u.eb||!1}V(wi,Hr),wi.prototype.g=function(){return new qs(this.l,this.j)},wi.prototype.i=(function(u){return function(){return u}})({});function qs(u,m){Te.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(qs,Te),n=qs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Pr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function cu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ar(this):Pr(this),this.readyState==3&&cu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ar(this))},n.Qa=function(u){this.g&&(this.response=u,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pr(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Pr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ei(u){let m="";return Fe(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Zi(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Ei(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):It(u,m,v))}function Dt(u){Te.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Dt,Te);var Ld=/^https?$/i,ja=["POST","PUT"];n=Dt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():we.g(),this.v=this.o?Ir(this.o):Ir(we),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(J){Gs(this,J);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)v.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())v.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ja,m,void 0))||I||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of v)this.g.setRequestHeader(J,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lo(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){Gs(this,J)}};function Gs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Oo(u),tr(u)}function Oo(u){u.A||(u.A=!0,Je(u,"complete"),Je(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Je(this,"complete"),Je(this,"abort"),tr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),Dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ua(this):this.bb())},n.bb=function(){Ua(this)};function Ua(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Fn(u)!=4||u.Z()!=2)){if(u.u&&Fn(u)==4)xt(u.Ea,0,u);else if(Je(u,"readystatechange"),Fn(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=he===0){var B=String(u.D).match(Hs)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),I=!Ld.test(B?B.toLowerCase():"")}v=I}if(v)Je(u,"complete"),Je(u,"success");else{u.m=6;try{var J=2<Fn(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",Oo(u)}}finally{tr(u)}}}}function tr(u,m){if(u.g){Lo(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Je(u,"ready");try{v.onreadystatechange=I}catch{}}}function Lo(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Fn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Hi(m)}};function za(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Vo(u){const m={};u=(u.g&&2<=Fn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(ee(u[I]))continue;var v=L(u[I]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=m[B]||[];m[B]=J,J.push(v)}x(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Ba(u){this.Aa=0,this.i=[],this.j=new K,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xr("baseRetryDelayMs",5e3,u),this.cb=Xr("retryDelaySeedMs",1e4,u),this.Wa=Xr("forwardChannelMaxRetries",2,u),this.wa=Xr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vt(u&&u.concurrentRequestLimit),this.Da=new Od,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ba.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){Mt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=pu(this,null,this.W),Zr(this)};function pn(u){if(Mo(u),u.G==3){var m=u.U++,v=er(u.I);if(It(v,"SID",u.K),It(v,"RID",m),It(v,"TYPE","terminate"),Ti(u,v),m=new qe(u,u.j,m),m.L=2,m.v=Ji(er(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=mu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),it(m)}fu(u)}function Rr(u){u.g&&($a(u),u.g.cancel(),u.g=null)}function Mo(u){Rr(u),u.u&&(h.clearTimeout(u.u),u.u=null),Uo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Zr(u){if(!qt(u.h)&&!u.s){u.s=!0;var m=u.Ga;ot||ge(),ae||(ot(),ae=!0),Ne.add(m,u),u.B=0}}function Vd(u,m){return Qr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=z(S(u.Ga,u,m),hu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new qe(this,this.j,u);let J=this.o;if(this.S&&(J?(J=C(J),b(J,this.S)):J=this.S),this.m!==null||this.O||(B.H=J,J=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=es(this,B,m),v=er(this.I),It(v,"RID",u),It(v,"CVER",22),this.D&&It(v,"X-HTTP-Session-Id",this.D),Ti(this,v),J&&(this.O?m="headers="+encodeURIComponent(String(Ei(J)))+"&"+m:this.m&&Zi(v,this.m,J)),dr(this.h,B),this.Ua&&It(v,"TYPE","init"),this.P?(It(v,"$req",m),It(v,"SID","null"),B.T=!0,wt(B,v,null)):wt(B,v,m),this.G=2}}else this.G==3&&(u?Fo(this,u):this.i.length==0||qt(this.h)||Fo(this))};function Fo(u,m){var v;m?v=m.l:v=u.U++;const I=er(u.I);It(I,"SID",u.K),It(I,"RID",v),It(I,"AID",u.T),Ti(u,I),u.m&&u.o&&Zi(I,u.m,u.o),v=new qe(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=es(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),dr(u.h,v),wt(v,I,m)}function Ti(u,m){u.H&&Fe(u.H,function(v,I){It(m,I,v)}),u.l&&Gi({},function(v,I){It(m,I,v)})}function es(u,m,v){v=Math.min(u.i.length,v);var I=u.l?S(u.l.Na,u.l,u):null;e:{var B=u.i;let J=-1;for(;;){const he=["count="+v];J==-1?0<v?(J=B[0].g,he.push("ofs="+J)):J=0:he.push("ofs="+J);let Et=!0;for(let en=0;en<v;en++){let dt=B[en].g;const on=B[en].map;if(dt-=J,0>dt)J=Math.max(0,B[en].g-100),Et=!1;else try{uu(on,he,"req"+dt+"_")}catch{I&&I(on)}}if(Et){I=he.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Ks(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ot||ge(),ae||(ot(),ae=!0),Ne.add(m,u),u.v=0}}function jo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=z(S(u.Fa,u),hu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=z(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Rr(this),du(this))};function $a(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function du(u){u.g=new qe(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=er(u.qa);It(m,"RID","rpc"),It(m,"SID",u.K),It(m,"AID",u.T),It(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&It(m,"TO",u.ja),It(m,"TYPE","xmlhttp"),Ti(u,m),u.m&&u.o&&Zi(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ji(er(m)),v.m=null,v.P=!0,cr(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Rr(this),jo(this),Mt(19))};function Uo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function zo(u,m){var v=null;if(u.g==m){Uo(u),$a(u),u.g=null;var I=2}else if(at(u.h,m))v=m.D,$s(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;I=Wr(),Je(I,new D(I,v)),Zr(u)}else Ks(u);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&Vd(u,m)||I==2&&jo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:Si(u,5);break;case 4:Si(u,10);break;case 3:Si(u,6);break;default:Si(u,2)}}}function hu(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Si(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),I=u.Xa;const B=!I;I=new _i(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ws(I,"https"),Ji(I),B?Dd(I.toString(),v):lu(I.toString(),v)}else Mt(2);u.G=0,u.l&&u.l.sa(m),fu(u),Mo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function fu(u){if(u.G=0,u.ka=[],u.l){const m=ko(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function pu(u,m,v){var I=v instanceof _i?er(v):new _i(v);if(I.g!="")m&&(I.g=m+"."+I.g),Ki(I,I.s);else{var B=h.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var J=new _i(null);I&&Ws(J,I),m&&(J.g=m),B&&Ki(J,B),v&&(J.l=v),I=J}return v=u.D,m=u.ya,v&&m&&It(I,v,m),It(I,"VER",u.la),Ti(u,I),I}function mu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Dt(new wi({eb:v})):new Dt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ha(){}n=Ha.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Bo(){}Bo.prototype.g=function(u,m){return new bn(u,m)};function bn(u,m){Te.call(this),this.g=new Ba(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ei(this)}V(bn,Te),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){pn(this.g)},bn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=$r(u),u=v);m.i.push(new st(m.Ya++,u)),m.G==3&&Zr(m)},bn.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,bn.aa.N.call(this)};function gu(u){Ln.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}V(gu,Ln);function yu(){Wi.call(this),this.status=1}V(yu,Wi);function ei(u){this.g=u}V(ei,Ha),ei.prototype.ua=function(){Je(this.g,"a")},ei.prototype.ta=function(u){Je(this.g,new gu(u))},ei.prototype.sa=function(u){Je(this.g,new yu)},ei.prototype.ra=function(){Je(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,Uw=function(){return new Bo},jw=function(){return Wr()},Fw=Yn,Vf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Ic=Se,_e.COMPLETE="complete",Mw=_e,vi.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",Te.prototype.listen=Te.prototype.K,El=vi,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,Vw=Dt}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const yv="@firebase/firestore",vv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new up("@firebase/firestore");function da(){return So.logLevel}function Ee(n,...e){if(So.logLevel<=lt.DEBUG){const t=e.map(Ep);So.debug(`Firestore (${Oa}): ${n}`,...t)}}function Ui(n,...e){if(So.logLevel<=lt.ERROR){const t=e.map(Ep);So.error(`Firestore (${Oa}): ${n}`,...t)}}function Ps(n,...e){if(So.logLevel<=lt.WARN){const t=e.map(Ep);So.warn(`Firestore (${Oa}): ${n}`,...t)}}function Ep(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,zw(n,i,t)}function zw(n,e,t){let i=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ui(i),new Error(i)}function _t(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||zw(e,o,i)}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class PA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RA{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},h=p=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string",31837,{l:i}),new Bw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class kA{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NA{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new kA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const i=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _v(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=DA(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ze(n,e){return n<e?-1:n>e?1:0}function Mf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ze(i,o);{const l=$w(),c=OA(l.encode(wv(n,t)),l.encode(wv(e,t)));return c!==0?c:Ze(i,o)}}t+=i>65535?2:1}return Ze(n.length,e.length)}function wv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function OA(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ze(n[t],e[t]);return Ze(n.length,e.length)}function Sa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="__name__";class si{constructor(e,t,i){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&$e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof si?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=si.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ze(e.length,t.length)}static compareSegments(e,t){const i=si.isNumericId(e),o=si.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?si.extractNumericId(e).compare(si.extractNumericId(t)):Mf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class kt extends si{construct(e,t,i){return new kt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const LA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends si{construct(e,t,i){return new vn(e,t,i)}static isValidIdentifier(e){return LA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ev}static keyField(){return new vn([Ev])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ke(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ke(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ke(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(l(),o++)}if(l(),c)throw new ke(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(kt.fromString(e))}static fromName(e){return new Oe(kt.fromString(e).popFirst(5))}static empty(){return new Oe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n,e,t){if(!t)throw new ke(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VA(n,e,t,i){if(e===!0&&i===!0)throw new ke(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tv(n){if(!Oe.isDocumentKey(n))throw new ke(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sv(n){if(Oe.isDocumentKey(n))throw new ke(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ww(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$e(12329,{type:typeof n})}function Ur(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sp(n);throw new ke(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Yl(n,e){if(!Ww(n))throw new ke(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ke(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=-62135596800,xv=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*xv);return new Nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Iv)throw new ke(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xv}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yl(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Iv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Yt("string",Nt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Nt(0,0))}static max(){return new Ge(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function MA(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ge.fromTimestamp(i===1e9?new Nt(t+1,0):new Nt(t,i));return new Rs(o,Oe.empty(),e)}function FA(n){return new Rs(n.readTime,n.key,Ml)}class Rs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Rs(Ge.min(),Oe.empty(),Ml)}static max(){return new Rs(Ge.max(),Oe.empty(),Ml)}}function jA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==UA)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,l=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++h,h===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new te(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function BA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}cd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function dd(n){return n==null}function Bc(n){return n===0&&1/n==-1/0}function $A(n){return typeof n=="number"&&Number.isInteger(n)&&!Bc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="";function HA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cv(e)),e=WA(n.get(t),e);return Cv(e)}function WA(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case qw:t+="";break;default:t+=l}}return t}function Cv(n){return n+qw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??yn.RED,this.left=o??yn.EMPTY,this.right=l??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new yn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return yn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(e){return new Pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class Pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new lr([])}unionWith(e){let t=new sn(vn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Kw("Invalid base64 string: "+l):l}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const qA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(n){if(_t(!!n,39018),typeof n=="string"){let e=0;const t=qA.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ns(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="server_timestamp",Jw="__type__",Yw="__previous_value__",Xw="__local_write_time__";function xp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jw])===null||t===void 0?void 0:t.stringValue)===Qw}function hd(n){const e=n.mapValue.fields[Yw];return xp(e)?hd(e):e}function Fl(n){const e=ks(n.mapValue.fields[Xw].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t,i,o,l,c,h,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const $c="(default)";class jl{constructor(e,t){this.projectId=e,this.database=t||$c}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="__type__",KA="__max__",mc={mapValue:{}},e0="__vector__",Hc="value";function bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xp(n)?4:JA(n)?9007199254740991:QA(n)?10:11:$e(28295,{value:n})}function fi(n,e){if(n===e)return!0;const t=bs(n);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fl(n).isEqual(Fl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ks(o.timestampValue),h=ks(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ns(o.bytesValue).isEqual(Ns(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Wt(o.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(o.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Wt(o.integerValue)===Wt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Wt(o.doubleValue),h=Wt(l.doubleValue);return c===h?Bc(c)===Bc(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Sa(n.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Av(c)!==Av(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!fi(c[p],h[p])))return!1;return!0})(n,e);default:return $e(52216,{left:n})}}function Ul(n,e){return(n.values||[]).find((t=>fi(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=bs(n),i=bs(e);if(t!==i)return Ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Wt(l.integerValue||l.doubleValue),p=Wt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return Rv(n.timestampValue,e.timestampValue);case 4:return Rv(Fl(n),Fl(e));case 5:return Mf(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ns(l),p=Ns(c);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const _=Ze(h[y],p[y]);if(_!==0)return _}return Ze(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ze(Wt(l.latitude),Wt(c.latitude));return h!==0?h:Ze(Wt(l.longitude),Wt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return kv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var h,p,y,_;const w=l.fields||{},S=c.fields||{},A=(h=w[Hc])===null||h===void 0?void 0:h.arrayValue,V=(p=S[Hc])===null||p===void 0?void 0:p.arrayValue,U=Ze(((y=A?.values)===null||y===void 0?void 0:y.length)||0,((_=V?.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:kv(A,V)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===mc.mapValue&&c===mc.mapValue)return 0;if(l===mc.mapValue)return 1;if(c===mc.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const S=Mf(p[w],_[w]);if(S!==0)return S;const A=Ia(h[p[w]],y[_[w]]);if(A!==0)return A}return Ze(p.length,_.length)})(n.mapValue,e.mapValue);default:throw $e(23264,{le:t})}}function Rv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=ks(n),i=ks(e),o=Ze(t.seconds,i.seconds);return o!==0?o:Ze(t.nanos,i.nanos)}function kv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ia(t[o],i[o]);if(l)return l}return Ze(t.length,i.length)}function xa(n){return Ff(n)}function Ff(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ks(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ns(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ff(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Ff(t.fields[c])}`;return o+"}"})(n.mapValue):$e(61005,{value:n})}function xc(n){switch(bs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(n);return e?16+xc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+xc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Fs(i.fields,((l,c)=>{o+=l.length+xc(c)})),o})(n.mapValue);default:throw $e(13486,{value:n})}}function jf(n){return!!n&&"integerValue"in n}function Cp(n){return!!n&&"arrayValue"in n}function Nv(n){return!!n&&"nullValue"in n}function bv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cc(n){return!!n&&"mapValue"in n}function QA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zw])===null||t===void 0?void 0:t.stringValue)===e0}function Al(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Al(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Al(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(t)}setAll(e){let t=vn.emptyPath(),i={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}c?i[h.lastSegment()]=Al(c):o.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Cc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Fs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Kn(Al(this.value))}}function t0(n){const e=[];return Fs(n.fields,((t,i)=>{const o=new vn([t]);if(Cc(i)){const l=t0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,i,o,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new kn(e,0,Ge.min(),Ge.min(),Ge.min(),Kn.empty(),0)}static newFoundDocument(e,t,i,o){return new kn(e,1,t,Ge.min(),i,o,0)}static newNoDocument(e,t){return new kn(e,2,t,Ge.min(),Ge.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Ge.min(),Ge.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function Dv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=Oe.comparator(Oe.fromName(c.referenceValue),t.key):i=Ia(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ov(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function YA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{}class rn extends n0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ZA(e,t,i):t==="array-contains"?new nP(e,i):t==="in"?new rP(e,i):t==="not-in"?new iP(e,i):t==="array-contains-any"?new sP(e,i):new rn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eP(e,i):new tP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends n0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new pi(e,t)}matches(e){return r0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function r0(n){return n.op==="and"}function i0(n){return XA(n)&&r0(n)}function XA(n){for(const e of n.filters)if(e instanceof pi)return!1;return!0}function Uf(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+xa(n.value);if(i0(n))return n.filters.map((e=>Uf(e))).join(",");{const e=n.filters.map((t=>Uf(t))).join(",");return`${n.op}(${e})`}}function s0(n,e){return n instanceof rn?(function(i,o){return o instanceof rn&&i.op===o.op&&i.field.isEqual(o.field)&&fi(i.value,o.value)})(n,e):n instanceof pi?(function(i,o){return o instanceof pi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,h)=>l&&s0(c,o.filters[h])),!0):!1})(n,e):void $e(19439)}function o0(n){return n instanceof rn?(function(t){return`${t.field.canonicalString()} ${t.op} ${xa(t.value)}`})(n):n instanceof pi?(function(t){return t.op.toString()+" {"+t.getFilters().map(o0).join(" ,")+"}"})(n):"Filter"}class ZA extends rn{constructor(e,t,i){super(e,t,i),this.key=Oe.fromName(i.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class eP extends rn{constructor(e,t){super(e,"in",t),this.keys=a0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tP extends rn{constructor(e,t){super(e,"not-in",t),this.keys=a0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function a0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Oe.fromName(i.referenceValue)))}class nP extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cp(t)&&Ul(t.arrayValue,this.value)}}class rP extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ul(this.value.arrayValue,t)}}class iP extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ul(this.value.arrayValue,t)}}class sP extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ul(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t=null,i=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Pe=null}}function Lv(n,e=null,t=[],i=[],o=null,l=null,c=null){return new oP(n,e,t,i,o,l,c)}function Ap(n){const e=Qe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Uf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>xa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>xa(i))).join(",")),e.Pe=t}return e.Pe}function Pp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ov(n.startAt,e.startAt)&&Ov(n.endAt,e.endAt)}function zf(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t=null,i=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function aP(n,e,t,i,o,l,c,h){return new fd(n,e,t,i,o,l,c,h)}function Rp(n){return new fd(n)}function Vv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lP(n){return n.collectionGroup!==null}function Pl(n){const e=Qe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new sn(vn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(h=h.add(y.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new qc(l,i))})),t.has(vn.keyField().canonicalString())||e.Te.push(new qc(vn.keyField(),i))}return e.Te}function ui(n){const e=Qe(n);return e.Ie||(e.Ie=uP(e,Pl(n))),e.Ie}function uP(n,e){if(n.limitType==="F")return Lv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new qc(o.field,l)}));const t=n.endAt?new Wc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Wc(n.startAt.position,n.startAt.inclusive):null;return Lv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Bf(n,e,t){return new fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pd(n,e){return Pp(ui(n),ui(e))&&n.limitType===e.limitType}function l0(n){return`${Ap(ui(n))}|lt:${n.limitType}`}function ha(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>o0(o))).join(", ")}]`),dd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>xa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>xa(o))).join(",")),`Target(${i})`})(ui(n))}; limitType=${n.limitType})`}function md(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Oe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of Pl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,h,p){const y=Dv(c,h,p);return c.inclusive?y<=0:y<0})(i.startAt,Pl(i),o)||i.endAt&&!(function(c,h,p){const y=Dv(c,h,p);return c.inclusive?y>=0:y>0})(i.endAt,Pl(i),o))})(n,e)}function cP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function u0(n){return(e,t)=>{let i=!1;for(const o of Pl(n)){const l=dP(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function dP(n,e,t){const i=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(l,c,h){const p=c.data.field(l),y=h.data.field(l);return p!==null&&y!==null?Ia(p,y):$e(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Ut(Oe.comparator);function zi(){return hP}const c0=new Ut(Oe.comparator);function Tl(...n){let e=c0;for(const t of n)e=e.insert(t.key,t);return e}function d0(n){let e=c0;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function mo(){return Rl()}function h0(){return Rl()}function Rl(){return new Ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fP=new Ut(Oe.comparator),pP=new sn(Oe.comparator);function ut(...n){let e=pP;for(const t of n)e=e.add(t);return e}const mP=new sn(Ze);function gP(){return mP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function f0(n){return{integerValue:""+n}}function yP(n,e){return $A(e)?f0(e):kp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function vP(n,e,t){return n instanceof zl?(function(o,l){const c={fields:{[Jw]:{stringValue:Qw},[Xw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&xp(l)&&(l=hd(l)),l&&(c.fields[Yw]=l),{mapValue:c}})(t,e):n instanceof Bl?m0(n,e):n instanceof $l?g0(n,e):(function(o,l){const c=p0(o,l),h=Mv(c)+Mv(o.Ee);return jf(c)&&jf(o.Ee)?f0(h):kp(o.serializer,h)})(n,e)}function _P(n,e,t){return n instanceof Bl?m0(n,e):n instanceof $l?g0(n,e):t}function p0(n,e){return n instanceof Gc?(function(i){return jf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class zl extends gd{}class Bl extends gd{constructor(e){super(),this.elements=e}}function m0(n,e){const t=y0(e);for(const i of n.elements)t.some((o=>fi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class $l extends gd{constructor(e){super(),this.elements=e}}function g0(n,e){let t=y0(e);for(const i of n.elements)t=t.filter((o=>!fi(o,i)));return{arrayValue:{values:t}}}class Gc extends gd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Mv(n){return Wt(n.integerValue||n.doubleValue)}function y0(n){return Cp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t){this.field=e,this.transform=t}}function EP(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Bl&&o instanceof Bl||i instanceof $l&&o instanceof $l?Sa(i.elements,o.elements,fi):i instanceof Gc&&o instanceof Gc?fi(i.Ee,o.Ee):i instanceof zl&&o instanceof zl})(n.transform,e.transform)}class TP{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yd{}function v0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Np(n.key,Er.none()):new Xl(n.key,n.data,Er.none());{const t=n.data,i=Kn.empty();let o=new sn(vn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new js(n.key,i,new lr(o.toArray()),Er.none())}}function SP(n,e,t){n instanceof Xl?(function(o,l,c){const h=o.value.clone(),p=jv(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof js?(function(o,l,c){if(!Ac(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=jv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(_0(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function kl(n,e,t,i){return n instanceof Xl?(function(l,c,h,p){if(!Ac(l.precondition,c))return h;const y=l.value.clone(),_=Uv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof js?(function(l,c,h,p){if(!Ac(l.precondition,c))return h;const y=Uv(l.fieldTransforms,p,c),_=c.data;return _.setAll(_0(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(n,e,t,i):(function(l,c,h){return Ac(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function IP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=p0(i.transform,o||null);l!=null&&(t===null&&(t=Kn.empty()),t.set(i.field,l))}return t||null}function Fv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sa(i,o,((l,c)=>EP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xl extends yd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class js extends yd{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function _0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function jv(n,e,t){const i=new Map;_t(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);i.set(l.field,_P(c,h,t[o]))}return i}function Uv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,vP(l,c,e))}return i}class Np extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xP extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SP(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=kl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=kl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=h0();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=v0(c,h);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ge.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,((t,i)=>Fv(t,i)))&&Sa(this.baseMutations,e.baseMutations,((t,i)=>Fv(t,i)))}}class bp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){_t(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return fP})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new bp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,ht;function RP(n){switch(n){case re.OK:return $e(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return $e(15467,{code:n})}}function w0(n){if(n===void 0)return Ui("GRPC error has no .code"),re.UNKNOWN;switch(n){case Qt.OK:return re.OK;case Qt.CANCELLED:return re.CANCELLED;case Qt.UNKNOWN:return re.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return re.INTERNAL;case Qt.UNAVAILABLE:return re.UNAVAILABLE;case Qt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Qt.NOT_FOUND:return re.NOT_FOUND;case Qt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Qt.ABORTED:return re.ABORTED;case Qt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Qt.DATA_LOSS:return re.DATA_LOSS;default:return $e(39323,{code:n})}}(ht=Qt||(Qt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=new xs([4294967295,4294967295],0);function zv(n){const e=$w().encode(n),t=new Lw;return t.update(e),new Uint8Array(t.digest())}function Bv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,i],0),new xs([o,l],0)]}class Dp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(i<0)throw new Sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=xs.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(xs.fromNumber(i)));return o.compare(kP)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=zv(e),[i,o]=Bv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Dp(l,o,t);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.fe===0)return;const t=zv(e),[i,o]=Bv(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vd(Ge.min(),o,new Ut(Ze),zi(),ut())}}class Zl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zl(i,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class E0{constructor(e,t){this.targetId=e,this.De=t}}class T0{constructor(e,t,i=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class $v{constructor(){this.ve=0,this.Ce=Hv(),this.Fe=_n.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ut(),t=ut(),i=ut();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:$e(38017,{changeType:l})}})),new Zl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Hv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class NP{constructor(e){this.We=e,this.Ge=new Map,this.ze=zi(),this.je=gc(),this.Je=gc(),this.He=new Ut(Ze)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(zf(l))if(i===0){const c=new Oe(l.path);this.Xe(t,c,kn.newNoDocument(c,Ge.min()))}else _t(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const h=this._t(e),p=h?this.ut(h,e,c):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=Ns(i).toUint8Array()}catch(p){if(p instanceof Kw)return Ps("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Dp(c,o,l)}catch(p){return Ps(p instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.fe===0?null:h}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const h=this.st(c);if(h){if(l.current&&zf(h.target)){const p=new Oe(h.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,kn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let i=ut();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new vd(e,t,this.He,this.ze,i);return this.ze=zi(),this.je=gc(),this.Je=gc(),this.He=new Ut(Ze),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new $v,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new sn(Ze),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new sn(Ze),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new $v),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function gc(){return new Ut(Oe.comparator)}function Hv(){return new Ut(Oe.comparator)}const bP={asc:"ASCENDING",desc:"DESCENDING"},DP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OP={and:"AND",or:"OR"};class LP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $f(n,e){return n.useProto3Json||dd(e)?e:{value:e}}function Kc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VP(n,e){return Kc(n,e.toTimestamp())}function ci(n){return _t(!!n,49232),Ge.fromTimestamp((function(t){const i=ks(t);return new Nt(i.seconds,i.nanos)})(n))}function Op(n,e){return Hf(n,e).canonicalString()}function Hf(n,e){const t=(function(o){return new kt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function I0(n){const e=kt.fromString(n);return _t(R0(e),10190,{key:e.toString()}),e}function Wf(n,e){return Op(n.databaseId,e.path)}function vf(n,e){const t=I0(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(C0(t))}function x0(n,e){return Op(n.databaseId,e)}function MP(n){const e=I0(n);return e.length===4?kt.emptyPath():C0(e)}function qf(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function C0(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wv(n,e,t){return{name:Wf(n,e),fields:t.value.mapValue.fields}}function FP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:$e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(_t(_===void 0||typeof _=="string",58123),_n.fromBase64String(_||"")):(_t(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),_n.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(y){const _=y.code===void 0?re.UNKNOWN:w0(y.code);return new ke(_,y.message||"")})(c);t=new T0(i,o,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=vf(n,i.document.name),l=ci(i.document.updateTime),c=i.document.createTime?ci(i.document.createTime):Ge.min(),h=new Kn({mapValue:{fields:i.document.fields}}),p=kn.newFoundDocument(o,l,c,h),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Pc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=vf(n,i.document),l=i.readTime?ci(i.readTime):Ge.min(),c=kn.newNoDocument(o,l),h=i.removedTargetIds||[];t=new Pc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=vf(n,i.document),l=i.removedTargetIds||[];t=new Pc([],l,o,null)}else{if(!("filter"in e))return $e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new PP(o,l),h=i.targetId;t=new E0(h,c)}}return t}function jP(n,e){let t;if(e instanceof Xl)t={update:Wv(n,e.key,e.value)};else if(e instanceof Np)t={delete:Wf(n,e.key)};else if(e instanceof js)t={update:Wv(n,e.key,e.data),updateMask:KP(e.fieldMask)};else{if(!(e instanceof xP))return $e(16599,{Rt:e.type});t={verify:Wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const h=c.transform;if(h instanceof zl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Bl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof $l)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gc)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw $e(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:$e(27497)})(n,e.precondition)),t}function UP(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ci(o.updateTime):ci(l);return c.isEqual(Ge.min())&&(c=ci(l)),new TP(c,o.transformResults||[])})(t,e)))):[]}function zP(n,e){return{documents:[x0(n,e.path)]}}function BP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=x0(n,o);const l=(function(y){if(y.length!==0)return P0(pi.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(S){return{field:fa(S.field),direction:WP(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=$f(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function $P(n){let e=MP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){_t(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(w){const S=A0(w);return S instanceof pi&&i0(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((S=>(function(V){return new qc(pa(V.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let S;return S=typeof w=="object"?w.value:w,dd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(w){const S=!!w.before,A=w.values||[];return new Wc(A,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const S=!w.before,A=w.values||[];return new Wc(A,S)})(t.endAt)),aP(e,o,c,l,h,"F",p,y)}function HP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function A0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=pa(t.unaryFilter.field);return rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=pa(t.unaryFilter.field);return rn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pa(t.unaryFilter.field);return rn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=pa(t.unaryFilter.field);return rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return rn.create(pa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pi.create(t.compositeFilter.filters.map((i=>A0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(n):$e(30097,{filter:n})}function WP(n){return bP[n]}function qP(n){return DP[n]}function GP(n){return OP[n]}function fa(n){return{fieldPath:n.canonicalString()}}function pa(n){return vn.fromServerFormat(n.fieldPath)}function P0(n){return n instanceof rn?(function(t){if(t.op==="=="){if(bv(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NAN"}};if(Nv(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bv(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NAN"}};if(Nv(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(t.field),op:qP(t.op),value:t.value}}})(n):n instanceof pi?(function(t){const i=t.getFilters().map((o=>P0(o)));return i.length===1?i[0]:{compositeFilter:{op:GP(t.op),filters:i}}})(n):$e(54877,{filter:n})}function KP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function R0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,i,o,l=Ge.min(),c=Ge.min(),h=_n.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.gt=e}}function JP(n){const e=$P({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.Dn=new XP}addToCollectionParentIndex(e,t){return this.Dn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Rs.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class XP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new sn(kt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new sn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k0=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(k0,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ca(0)}static ur(){return new Ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="LruGarbageCollector",ZP=1048576;function Kv([n,e],[t,i]){const o=Ze(n,t);return o===0?Ze(e,i):o}class eR{constructor(e){this.Tr=e,this.buffer=new sn(Kv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Kv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(Gv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Va(t)?Ee(Gv,"Ignoring IndexedDB error during garbage collection: ",t):await La(t)}await this.Rr(3e5)}))}}class nR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(cd.ue);const i=new eR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(qv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,c,h,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,h=Date.now(),this.removeTargets(e,i,t)))).next((w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),da()<=lt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w}))))}}function rR(n,e){return new nR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.changes=new Ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&kl(i.mutation,o,lr.empty(),Nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ut()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ut()){const o=mo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Tl();return l.forEach(((h,p)=>{c=c.insert(h,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=mo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ut())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,i,o){let l=zi();const c=Rl(),h=(function(){return Rl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof js)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),kl(_.mutation,y,_.mutation.getFieldMask(),Nt.now())):c.set(y.key,lr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>{var w;return h.set(y,new sR(_,(w=c.get(y))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const i=Rl();let o=new Ut(((c,h)=>c-h)),l=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||lr.empty();_=h.applyToLocalView(y,_),i.set(p,_);const w=(o.get(h.batchId)||ut()).add(p);o=o.insert(h.batchId,w)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,_=p.value,w=h0();_.forEach((S=>{if(!l.has(S)){const A=v0(t.get(S),i.get(S));A!==null&&w.set(S,A),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,w))}return te.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return Oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):te.resolve(mo());let h=Ml,p=l;return c.next((y=>te.forEach(y,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),l.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,ut()))).next((_=>({batchId:h,changes:d0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((i=>{let o=Tl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Tl();return this.indexManager.getCollectionParents(e,l).next((h=>te.forEach(h,(p=>{const y=(function(w,S){return new fd(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((w,S)=>{c=c.insert(w,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,kn.newInvalidDocument(_)))}));let h=Tl();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&kl(_.mutation,y,lr.empty(),Nt.now()),md(t,y)&&(h=h.insert(p,y))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return te.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ci(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:JP(o.bundledQuery),readTime:ci(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.overlays=new Ut(Oe.comparator),this.kr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=mo();return te.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=mo(),l=t.length+1,c=new Oe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Ut(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=mo(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const h=mo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>h.set(y,_))),!(h.size()>=o)););return te.resolve(h)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new AP(t,i));let l=this.kr.get(t);l===void 0&&(l=ut(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.qr=new sn(cn.Qr),this.$r=new sn(cn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new cn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new cn(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Oe(new kt([])),i=new cn(t,e),o=new cn(t,e+1),l=[];return this.$r.forEachInRange([i,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Oe(new kt([])),i=new cn(t,e),o=new cn(t,e+1);let l=ut();return this.$r.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new cn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class cn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Oe.comparator(e.key,t.key)||Ze(e.Hr,t.Hr)}static Ur(e,t){return Ze(e.Hr,t.Hr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new sn(cn.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new CP(l,t,i,o);this.mutationQueue.push(c);for(const h of o)this.Yr=this.Yr.add(new cn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Ip:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new cn(t,0),o=new cn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(c=>{const h=this.Zr(c.Hr);l.push(h)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(Ze);return t.forEach((o=>{const l=new cn(o,0),c=new cn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(h=>{i=i.add(h.Hr)}))})),te.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Oe.isDocumentKey(l)||(l=l.child(""));const c=new cn(new Oe(l),0);let h=new sn(Ze);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.Hr)),!0)}),c),te.resolve(this.ei(h))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){_t(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return te.forEach(t.mutations,(o=>{const l=new cn(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new cn(t,0),o=this.Yr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.ni=e,this.docs=(function(){return new Ut(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let i=zi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():kn.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=zi();const c=t.path,h=new Oe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||jA(FA(_),i)<=0||(o.has(_.key)||md(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,i,o){$e(9500)}ri(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new hR(this)}getSize(e){return te.resolve(this.size)}}class hR extends iR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.persistence=e,this.ii=new Ao((t=>Ap(t)),Pp),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new Lp,this.targetCount=0,this._i=Ca.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),te.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.hr(t),te.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),te.waitFor(l).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t){this.ai={},this.overlays={},this.ui=new cd(0),this.ci=!1,this.ci=!0,this.li=new uR,this.referenceDelegate=e(this),this.hi=new fR(this),this.indexManager=new YP,this.remoteDocumentCache=(function(o){return new dR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new QP(t),this.Ti=new aR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new cR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Ee("MemoryPersistence","Starting transaction:",e);const o=new pR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return te.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class pR extends zA{constructor(e){super(),this.currentSequenceNumber=e}}class Vp{constructor(e){this.persistence=e,this.Ai=new Lp,this.Ri=null}static Vi(e){return new Vp(e)}get mi(){if(this.Ri)return this.Ri;throw $e(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,(i=>{const o=Oe.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ge.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return te.or([()=>te.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Qc{constructor(e,t){this.persistence=e,this.gi=new Ao((i=>HA(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=rR(this,t)}static Vi(e,t){return new Qc(e,t)}Ii(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return te.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((h=>{h||(i++,l.removeEntry(c,Ge.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),te.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xc(e.data.value)),t}Sr(e,t,i){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=ut(),o=ut();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return qI()?8:BA(Nn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new mR;return this.ws(e,t,c).next((h=>{if(l.result=h,this.Rs)return this.Ss(e,t,c,h.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(da()<=lt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(da()<=lt.DEBUG&&Ee("QueryEngine","Query:",ha(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(da()<=lt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):te.resolve())}ps(e,t){if(Vv(t))return te.resolve(null);let i=ui(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Bf(t,null,"F"),i=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=ut(...l);return this.gs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,h);return this.Ds(t,y,c,p.readTime)?this.ps(e,Bf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return Vv(t)||o.isEqual(Ge.min())?te.resolve(null):this.gs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,i,o)?te.resolve(null):(da()<=lt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ha(t)),this.vs(e,c,t,MA(o,Ml)).next((h=>h)))}))}bs(e,t){let i=new sn(u0(e));return t.forEach(((o,l)=>{md(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return da()<=lt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",ha(t)),this.gs.getDocumentsMatchingQuery(e,t,Rs.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="LocalStore",yR=3e8;class vR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Ut(Ze),this.Ms=new Ao((l=>Ap(l)),Pp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function _R(n,e,t,i){return new vR(n,e,t,i)}async function b0(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],h=[];let p=ut();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:c,addedBatchIds:h})))}))}))}function wR(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(h,p,y,_){const w=y.batch,S=w.keys();let A=te.resolve();return S.forEach((V=>{A=A.next((()=>_.getEntry(p,V))).next((U=>{const $=y.docVersions.get(V);_t($!==null,48541),U.version.compareTo($)<0&&(w.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),_.addEntry(U)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(p,w)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let p=ut();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function D0(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function ER(n,e){const t=Qe(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const h=[];e.targetChanges.forEach(((_,w)=>{const S=o.get(w);if(!S)return;h.push(t.hi.removeMatchingKeys(l,_.removedDocuments,w).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,w))));let A=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(_n.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),o=o.insert(w,A),(function(U,$,pe){return U.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=yR?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(S,A,_)&&h.push(t.hi.updateTargetData(l,A))}));let p=zi(),y=ut();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),h.push(TR(l,c,e.documentUpdates).next((_=>{p=_.Ls,y=_.ks}))),!i.isEqual(Ge.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((w=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(_)}return te.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function TR(n,e,t){let i=ut(),o=ut();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=zi();return t.forEach(((h,p)=>{const y=l.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ge.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Ee(Fp,"Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function SR(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ip),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function IR(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,te.resolve(o)):t.hi.allocateTargetId(i).next((c=>(o=new Ts(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Gf(n,e,t){const i=Qe(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Va(c))throw c;Ee(Fp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Qv(n,e,t){const i=Qe(n);let o=Ge.min(),l=ut();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const w=Qe(p),S=w.Ms.get(_);return S!==void 0?te.resolve(w.Fs.get(S)):w.hi.getTargetData(y,_)})(i,c,ui(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?o:Ge.min(),t?l:ut()))).next((h=>(xR(i,cP(e),h),{documents:h,qs:l})))))}function xR(n,e,t){let i=n.xs.get(e)||Ge.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class Jv{constructor(){this.activeTargetIds=gP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CR{constructor(){this.Fo=new Jv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Jv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Xv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(Yv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(Yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function Kf(){return yc===null?yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="RestConnection",PR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===$c?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const c=Kf(),h=this.Go(e,t.toUriEncodedString());Ee(_f,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(h),_=xo(y);return this.jo(e,h,p,i,_).then((w=>(Ee(_f,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw Ps(_f,`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",i),w}))}Jo(e,t,i,o,l,c){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=PR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class NR extends RR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const c=Kf();return new Promise(((h,p)=>{const y=new Vw;y.setWithCredentials(!0),y.listenOnce(Mw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ic.NO_ERROR:const w=y.getResponseJson();Ee(Pn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case Ic.TIMEOUT:Ee(Pn,`RPC '${e}' ${c} timed out`),p(new ke(re.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:const S=y.getStatus();if(Ee(Pn,`RPC '${e}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let A=y.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A?.error;if(V&&V.status&&V.message){const U=(function(pe){const ee=pe.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ee)>=0?ee:re.UNKNOWN})(V.status);p(new ke(U,V.message))}else p(new ke(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ke(re.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{c_:e,streamId:c,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{Ee(Pn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);Ee(Pn,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=Kf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Uw(),h=jw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");Ee(Pn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=c.createWebChannel(_,p);this.T_(w);let S=!1,A=!1;const V=new kR({Ho:$=>{A?Ee(Pn,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(S||(Ee(Pn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),Ee(Pn,`RPC '${e}' stream ${o} sending:`,$),w.send($))},Yo:()=>w.close()}),U=($,pe,ee)=>{$.listen(pe,(de=>{try{ee(de)}catch(me){setTimeout((()=>{throw me}),0)}}))};return U(w,El.EventType.OPEN,(()=>{A||(Ee(Pn,`RPC '${e}' stream ${o} transport opened.`),V.s_())})),U(w,El.EventType.CLOSE,(()=>{A||(A=!0,Ee(Pn,`RPC '${e}' stream ${o} transport closed`),V.__(),this.I_(w))})),U(w,El.EventType.ERROR,($=>{A||(A=!0,Ps(Pn,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),V.__(new ke(re.UNAVAILABLE,"The operation could not be completed")))})),U(w,El.EventType.MESSAGE,($=>{var pe;if(!A){const ee=$.data[0];_t(!!ee,16349);const de=ee,me=de?.error||((pe=de[0])===null||pe===void 0?void 0:pe.error);if(me){Ee(Pn,`RPC '${e}' stream ${o} received error:`,me);const je=me.status;let Fe=(function(P){const b=Qt[P];if(b!==void 0)return w0(b)})(je),x=me.message;Fe===void 0&&(Fe=re.INTERNAL,x="Unknown error status: "+je+" with message "+me.message),A=!0,V.__(new ke(Fe,x)),w.close()}else Ee(Pn,`RPC '${e}' stream ${o} received:`,ee),V.a_(ee)}})),U(h,Fw.STAT_EVENT,($=>{$.stat===Vf.PROXY?Ee(Pn,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Vf.NOPROXY&&Ee(Pn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){return new LP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="PersistentStream";class L0{constructor(e,t,i,o,l,c,h,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new O0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ke(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ee(Zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ee(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bR extends L0{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=FP(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ge.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ge.min():c.readTime?ci(c.readTime):Ge.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=qf(this.serializer),t.addTarget=(function(l,c){let h;const p=c.target;if(h=zf(p)?{documents:zP(l,p)}:{query:BP(l,p).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=S0(l,c.resumeToken);const y=$f(l,c.expectedCount);y!==null&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ge.min())>0){h.readTime=Kc(l,c.snapshotVersion.toTimestamp());const y=$f(l,c.expectedCount);y!==null&&(h.expectedCount=y)}return h})(this.serializer,e);const i=HP(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=qf(this.serializer),t.removeTarget=e,this.k_(t)}}class DR extends L0{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=UP(e.writeResults,e.commitTime),i=ci(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=qf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jP(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{}class LR extends OR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ke(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Hf(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(re.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Jo(e,Hf(t,i),o,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(re.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class VR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ui(t),this._a=!1):Ee("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="RemoteStore";class MR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{i.enqueueAndForget((async()=>{Po(this)&&(Ee(Io,"Restarting streams for network reachability change."),await(async function(p){const y=Qe(p);y.Ia.add(4),await eu(y),y.Aa.set("Unknown"),y.Ia.delete(4),await wd(y)})(this))}))})),this.Aa=new VR(i,o)}}async function wd(n){if(Po(n))for(const e of n.da)await e(!0)}async function eu(n){for(const e of n.da)await e(!1)}function V0(n,e){const t=Qe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Bp(t)?zp(t):Ma(t).x_()&&Up(t,e))}function jp(n,e){const t=Qe(n),i=Ma(t);t.Ta.delete(e),i.x_()&&M0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Po(t)&&t.Aa.set("Unknown"))}function Up(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).H_(e)}function M0(n,e){n.Ra.$e(e),Ma(n).Y_(e)}function zp(n){n.Ra=new NP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.Aa.aa()}function Bp(n){return Po(n)&&!Ma(n).M_()&&n.Ta.size>0}function Po(n){return Qe(n).Ia.size===0}function F0(n){n.Ra=void 0}async function FR(n){n.Aa.set("Online")}async function jR(n){n.Ta.forEach(((e,t)=>{Up(n,e)}))}async function UR(n,e){F0(n),Bp(n)?(n.Aa.la(e),zp(n)):n.Aa.set("Unknown")}async function zR(n,e,t){if(n.Aa.set("Online"),e instanceof T0&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ta.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ta.delete(h),o.Ra.removeTarget(h))})(n,e)}catch(i){Ee(Io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jc(n,i)}else if(e instanceof Pc?n.Ra.Ye(e):e instanceof E0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ge.min()))try{const i=await D0(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const h=l.Ra.Pt(c);return h.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(y);_&&l.Ta.set(y,_.withResumeToken(p.resumeToken,c))}})),h.targetMismatches.forEach(((p,y)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(_n.EMPTY_BYTE_STRING,_.snapshotVersion)),M0(l,p);const w=new Ts(_.target,p,y,_.sequenceNumber);Up(l,w)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){Ee(Io,"Failed to raise snapshot:",i),await Jc(n,i)}}async function Jc(n,e,t){if(!Va(e))throw e;n.Ia.add(1),await eu(n),n.Aa.set("Offline"),t||(t=()=>D0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ee(Io,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await wd(n)}))}function j0(n,e){return e().catch((t=>Jc(n,t,e)))}async function Ed(n){const e=Qe(n),t=Ds(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ip;for(;BR(e);)try{const o=await SR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,$R(e,o)}catch(o){await Jc(e,o)}U0(e)&&z0(e)}function BR(n){return Po(n)&&n.Pa.length<10}function $R(n,e){n.Pa.push(e);const t=Ds(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function U0(n){return Po(n)&&!Ds(n).M_()&&n.Pa.length>0}function z0(n){Ds(n).start()}async function HR(n){Ds(n).na()}async function WR(n){const e=Ds(n);for(const t of n.Pa)e.X_(t.mutations)}async function qR(n,e,t){const i=n.Pa.shift(),o=bp.from(i,e,t);await j0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Ed(n)}async function GR(n,e){e&&Ds(n).Z_&&await(async function(i,o){if((function(c){return RP(c)&&c!==re.ABORTED})(o.code)){const l=i.Pa.shift();Ds(i).N_(),await j0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ed(i)}})(n,e),U0(n)&&z0(n)}async function e_(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ee(Io,"RemoteStore received new credentials");const i=Po(t);t.Ia.add(3),await eu(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await wd(t)}async function KR(n,e){const t=Qe(n);e?(t.Ia.delete(2),await wd(t)):e||(t.Ia.add(2),await eu(t),t.Aa.set("Unknown"))}function Ma(n){return n.Va||(n.Va=(function(t,i,o){const l=Qe(t);return l.ia(),new bR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:FR.bind(null,n),e_:jR.bind(null,n),n_:UR.bind(null,n),J_:zR.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Bp(n)?zp(n):n.Aa.set("Unknown")):(await n.Va.stop(),F0(n))}))),n.Va}function Ds(n){return n.ma||(n.ma=(function(t,i,o){const l=Qe(t);return l.ia(),new DR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:HR.bind(null,n),n_:GR.bind(null,n),ea:WR.bind(null,n),ta:qR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Ed(n)):(await n.ma.stop(),n.Pa.length>0&&(Ee(Io,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,h=new $p(e,t,c,o,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(n,e){if(Ui("AsyncQueue",`${e}: ${n}`),Va(n))return new ke(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Oe.comparator(t.key,i.key):(t,i)=>Oe.comparator(t.key,i.key),this.keyedMap=Tl(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new _a;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.fa=new Ut(Oe.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):$e(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Aa{constructor(e,t,i,o,l,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Aa(e,t,_a.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class JR{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Qe(t),l=o.queries;o.queries=n_(),l.forEach(((c,h)=>{for(const p of h.wa)p.onError(i)}))})(this,new ke(re.ABORTED,"Firestore shutting down"))}}function n_(){return new Ao((n=>l0(n)),pd)}async function B0(n,e){const t=Qe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new QR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Hp(c,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Wp(t)}async function $0(n,e){const t=Qe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function YR(n,e){const t=Qe(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.wa)h.Ca(o)&&(i=!0);c.ya=o}}i&&Wp(t)}function XR(n,e,t){const i=Qe(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function Wp(n){n.Da.forEach((e=>{e.next()}))}var Qf,r_;(r_=Qf||(Qf={})).Fa="default",r_.Cache="cache";class H0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Aa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.key=e}}class q0{constructor(e){this.key=e}}class ZR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ut(),this.mutatedKeys=ut(),this.Xa=u0(e),this.eu=new _a(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new t_,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const S=o.get(_),A=md(this.query,w)?w:null,V=!!S&&this.mutatedKeys.has(S.key),U=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let $=!1;S&&A?S.data.isEqual(A.data)?V!==U&&(i.track({type:3,doc:A}),$=!0):this.iu(S,A)||(i.track({type:2,doc:A}),$=!0,(p&&this.Xa(A,p)>0||y&&this.Xa(A,y)<0)&&(h=!0)):!S&&A?(i.track({type:0,doc:A}),$=!0):S&&!A&&(i.track({type:1,doc:S}),$=!0,(p||y)&&(h=!0)),$&&(A?(c=c.add(A),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((_,w)=>(function(A,V){const U=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{At:$})}};return U(A)-U(V)})(_.type,w.type)||this.Xa(_.doc,w.doc))),this.su(i),o=o!=null&&o;const h=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,c.length!==0||y?{snapshot:new Aa(this.query,e.eu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new t_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ut(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new q0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new W0(i))})),t}uu(e){this.Ha=e.qs,this.Za=ut();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Aa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const qp="SyncEngine";class ek{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tk{constructor(e){this.key=e,this.lu=!1}}class nk{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ao((h=>l0(h)),pd),this.Tu=new Map,this.Iu=new Set,this.du=new Ut(Oe.comparator),this.Eu=new Map,this.Au=new Lp,this.Ru={},this.Vu=new Map,this.mu=Ca.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function rk(n,e,t=!0){const i=X0(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await G0(i,e,t,!0),o}async function ik(n,e){const t=X0(n);await G0(t,e,!0,!1)}async function G0(n,e,t,i){const o=await IR(n.localStore,ui(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await sk(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&V0(n.remoteStore,o),h}async function sk(n,e,t,i,o){n.gu=(w,S,A)=>(async function(U,$,pe,ee){let de=$.view.nu(pe);de.Ds&&(de=await Qv(U.localStore,$.query,!1).then((({documents:x})=>$.view.nu(x,de))));const me=ee&&ee.targetChanges.get($.targetId),je=ee&&ee.targetMismatches.get($.targetId)!=null,Fe=$.view.applyChanges(de,U.isPrimaryClient,me,je);return s_(U,$.targetId,Fe._u),Fe.snapshot})(n,w,S,A);const l=await Qv(n.localStore,e,!0),c=new ZR(e,l.qs),h=c.nu(l.documents),p=Zl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(h,n.isPrimaryClient,p);s_(n,t,y._u);const _=new ek(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function ok(n,e,t){const i=Qe(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((c=>!pd(c,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Gf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&jp(i.remoteStore,o.targetId),Jf(i,o.targetId)})).catch(La)):(Jf(i,o.targetId),await Gf(i.localStore,o.targetId,!0))}async function ak(n,e){const t=Qe(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jp(t.remoteStore,i.targetId))}async function lk(n,e,t){const i=mk(n);try{const o=await(function(c,h){const p=Qe(c),y=Nt.now(),_=h.reduce(((A,V)=>A.add(V.key)),ut());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let V=zi(),U=ut();return p.Os.getEntries(A,_).next(($=>{V=$,V.forEach(((pe,ee)=>{ee.isValidDocument()||(U=U.add(pe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,V))).next(($=>{w=$;const pe=[];for(const ee of h){const de=IP(ee,w.get(ee.key).overlayedDocument);de!=null&&pe.push(new js(ee.key,de,t0(de.value.mapValue),Er.exists(!0)))}return p.mutationQueue.addMutationBatch(A,y,pe,h)})).next(($=>{S=$;const pe=$.applyToLocalDocumentSet(w,U);return p.documentOverlayCache.saveOverlays(A,$.batchId,pe)}))})).then((()=>({batchId:S.batchId,changes:d0(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,h,p){let y=c.Ru[c.currentUser.toKey()];y||(y=new Ut(Ze)),y=y.insert(h,p),c.Ru[c.currentUser.toKey()]=y})(i,o.batchId,t),await tu(i,o.changes),await Ed(i.remoteStore)}catch(o){const l=Hp(o,"Failed to persist write");t.reject(l)}}async function K0(n,e){const t=Qe(n);try{const i=await ER(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(_t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?_t(c.lu,14607):o.removedDocuments.size>0&&(_t(c.lu,42227),c.lu=!1))})),await tu(t,i,e)}catch(i){await La(i)}}function i_(n,e,t){const i=Qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const p=Qe(c);p.onlineState=h;let y=!1;p.queries.forEach(((_,w)=>{for(const S of w.wa)S.va(h)&&(y=!0)})),y&&Wp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uk(n,e,t){const i=Qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let c=new Ut(Oe.comparator);c=c.insert(l,kn.newNoDocument(l,Ge.min()));const h=ut().add(l),p=new vd(Ge.min(),new Map,new Ut(Ze),c,h);await K0(i,p),i.du=i.du.remove(l),i.Eu.delete(e),Gp(i)}else await Gf(i.localStore,e,!1).then((()=>Jf(i,e,t))).catch(La)}async function ck(n,e){const t=Qe(n),i=e.batch.batchId;try{const o=await wR(t.localStore,e);J0(t,i,null),Q0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await tu(t,o)}catch(o){await La(o)}}async function dk(n,e,t){const i=Qe(n);try{const o=await(function(c,h){const p=Qe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,h).next((w=>(_t(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);J0(i,e,t),Q0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await tu(i,o)}catch(o){await La(o)}}function Q0(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function J0(n,e,t){const i=Qe(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||Y0(n,i)}))}function Y0(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(jp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Gp(n))}function s_(n,e,t){for(const i of t)i instanceof W0?(n.Au.addReference(i.key,e),hk(n,i)):i instanceof q0?(Ee(qp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||Y0(n,i.key)):$e(19791,{yu:i})}function hk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(Ee(qp,"New document in limbo: "+t),n.Iu.add(i),Gp(n))}function Gp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Oe(kt.fromString(e)),i=n.mu.next();n.Eu.set(i,new tk(t)),n.du=n.du.insert(t,i),V0(n.remoteStore,new Ts(ui(Rp(t.path)),i,"TargetPurposeLimboResolution",cd.ue))}}async function tu(n,e,t){const i=Qe(n),o=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach(((h,p)=>{c.push(i.gu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Mp.Es(p.targetId,y);l.push(w)}})))})),await Promise.all(c),i.hu.J_(o),await(async function(p,y){const _=Qe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>te.forEach(y,(S=>te.forEach(S.Is,(A=>_.persistence.referenceDelegate.addReference(w,S.targetId,A))).next((()=>te.forEach(S.ds,(A=>_.persistence.referenceDelegate.removeReference(w,S.targetId,A)))))))))}catch(w){if(!Va(w))throw w;Ee(Fp,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const A=_.Fs.get(S),V=A.snapshotVersion,U=A.withLastLimboFreeSnapshotVersion(V);_.Fs=_.Fs.insert(S,U)}}})(i.localStore,l))}async function fk(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ee(qp,"User change. New user:",e.toKey());const i=await b0(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((h=>{h.forEach((p=>{p.reject(new ke(re.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tu(t,i.Bs)}}function pk(n,e){const t=Qe(n),i=t.Eu.get(e);if(i&&i.lu)return ut().add(i.key);{let o=ut();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const h=t.Pu.get(c);o=o.unionWith(h.view.tu)}return o}}function X0(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=K0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uk.bind(null,e),e.hu.J_=YR.bind(null,e.eventManager),e.hu.pu=XR.bind(null,e.eventManager),e}function mk(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dk.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return _R(this.persistence,new gR,e.initialUser,this.serializer)}Du(e){return new N0(Vp.Vi,this.serializer)}bu(e){return new CR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class gk extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_t(this.persistence.referenceDelegate instanceof Qc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new tR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new N0((i=>Qc.Vi(i,t)),this.serializer)}}class Yf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>i_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fk.bind(null,this.syncEngine),await KR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JR})()}createDatastore(e){const t=_d(e.databaseInfo.databaseId),i=(function(l){return new NR(l)})(e.databaseInfo);return(function(l,c,h,p){return new LR(l,c,h,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,h){return new MR(i,o,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>i_(this.syncEngine,t,0)),(function(){return Xv.C()?new Xv:new AR})())}createSyncEngine(e,t){return(function(o,l,c,h,p,y,_){const w=new nk(o,l,c,h,p,y);return _&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Qe(o);Ee(Io,"RemoteStore shutting down."),l.Ia.add(5),await eu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Yf.provider={build:()=>new Yf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class yk{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Rn.UNAUTHENTICATED,this.clientId=Tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Ee(Os,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Ee(Os,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Hp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ef(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(Os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await b0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ps("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ps("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function o_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vk(n);Ee(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>e_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>e_(e.remoteStore,o))),n._onlineComponents=e}async function vk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(Os,"Using user provided OfflineComponentProvider");try{await Ef(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ps("Error using user provided cache. Falling back to memory cache: "+t),await Ef(n,new Yc)}}else Ee(Os,"Using default OfflineComponentProvider"),await Ef(n,new gk(void 0));return n._offlineComponents}async function eE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(Os,"Using user provided OnlineComponentProvider"),await o_(n,n._uninitializedComponentsProvider._online)):(Ee(Os,"Using default OnlineComponentProvider"),await o_(n,new Yf))),n._onlineComponents}function _k(n){return eE(n).then((e=>e.syncEngine))}async function tE(n){const e=await eE(n),t=e.eventManager;return t.onListen=rk.bind(null,e.syncEngine),t.onUnlisten=ok.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ik.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ak.bind(null,e.syncEngine),t}function wk(n,e,t={}){const i=new Vi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const _=new Z0({next:S=>{_.Ou(),c.enqueueAndForget((()=>$0(l,w)));const A=S.docs.has(h);!A&&S.fromCache?y.reject(new ke(re.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&S.fromCache&&p&&p.source==="server"?y.reject(new ke(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new H0(Rp(h.path),_,{includeMetadataChanges:!0,ka:!0});return B0(l,w)})(await tE(n),n.asyncQueue,e,t,i))),i.promise}function Ek(n,e,t={}){const i=new Vi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const _=new Z0({next:S=>{_.Ou(),c.enqueueAndForget((()=>$0(l,w))),S.fromCache&&p.source==="server"?y.reject(new ke(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new H0(h,_,{includeMetadataChanges:!0,ka:!0});return B0(l,w)})(await tE(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="firestore.googleapis.com",l_=!0;class u_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rE,this.ssl=l_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:l_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZP)throw new ke(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ke(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ke(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ke(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AA;switch(i.type){case"firstParty":return new NA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ke(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=a_.get(t);i&&(Ee("ComponentProvider","Removing Datastore"),a_.delete(t),i.terminate())})(this),Promise.resolve()}}function Tk(n,e,t,i={}){var o;n=Ur(n,Td);const l=xo(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(ap(`https://${p}`),lp("Firestore",!0)),c.host!==rE&&c.host!==p&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!_o(y,h)&&(n._setSettings(y),i.mockUserToken)){let _,w;if(typeof i.mockUserToken=="string")_=i.mockUserToken,w=Rn.MOCK_USER;else{_=MI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ke(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Rn(S)}n._authCredentials=new PA(new Bw(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Sd(this.firestore,e,this._query)}}class Xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}toJSON(){return{type:Xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Yl(t,Xt._jsonSchema))return new Xt(e,i||null,new Oe(kt.fromString(t.referencePath)))}}Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:Yt("string",Xt._jsonSchemaVersion),referencePath:Yt("string")};class Cs extends Sd{constructor(e,t,i){super(e,t,Rp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new Oe(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function iE(n,e,...t){if(n=Zt(n),Hw("collection","path",e),n instanceof Td){const i=kt.fromString(e,...t);return Sv(i),new Cs(n,null,i)}{if(!(n instanceof Xt||n instanceof Cs))throw new ke(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kt.fromString(e,...t));return Sv(i),new Cs(n.firestore,null,i)}}function Fr(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=Tp.newId()),Hw("doc","path",e),n instanceof Td){const i=kt.fromString(e,...t);return Tv(i),new Xt(n,null,new Oe(i))}{if(!(n instanceof Xt||n instanceof Cs))throw new ke(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kt.fromString(e,...t));return Tv(i),new Xt(n.firestore,n instanceof Cs?n.converter:null,new Oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="AsyncQueue";class d_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new O0(this,"async_queue_retry"),this.oc=()=>{const i=wf();i&&Ee(c_,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=wf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=wf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Vi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Va(e))throw e;Ee(c_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Ui("INTERNAL UNHANDLED ERROR: ",h_(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=$p.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&$e(47125,{hc:h_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function h_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ro extends Td{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new d_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d_(e),this._firestoreClient=void 0,await e}}}function Sk(n,e){const t=typeof n=="object"?n:dp(),i=typeof n=="string"?n:$c,o=od(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=G_("firestore");l&&Tk(o,...l)}return o}function Kp(n){if(n._terminated)throw new ke(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ik(n),n._firestoreClient}function Ik(n){var e,t,i;const o=n._freezeSettings(),l=(function(h,p,y,_){return new GA(h,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,nE(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new yk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(h){const p=h?._online.build();return{_offline:h?._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wr(_n.fromBase64String(e))}catch(t){throw new ke(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wr(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yl(e,wr._jsonSchema))return wr.fromBase64String(e.bytes)}}wr._jsonSchemaVersion="firestore/bytes/1.0",wr._jsonSchema={type:Yt("string",wr._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(Yl(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Yt("string",di._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yl(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hi(e.vectorValues);throw new ke(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:Yt("string",hi._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=/^__.*__$/;class Ck{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class sE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ec:n})}}class Qp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(oE(this.Ec)&&xk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Ak{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||_d(e)}Dc(e,t,i,o=!1){return new Qp({Ec:e,methodName:t,bc:i,path:vn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jp(n){const e=n._freezeSettings(),t=_d(n._databaseId);return new Ak(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aE(n,e,t,i,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Xp("Data must be an object, but it was:",c,i);const h=lE(i,c);let p,y;if(l.merge)p=new lr(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const S=Xf(e,w,t);if(!c.contains(S))throw new ke(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);cE(_,S)||_.push(S)}p=new lr(_),y=c.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=c.fieldTransforms;return new Ck(new Kn(h),p,y)}class Cd extends xd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cd}}class Yp extends xd{_toFieldTransform(e){return new wP(e.path,new zl)}isEqual(e){return e instanceof Yp}}function Pk(n,e,t,i){const o=n.Dc(1,e,t);Xp("Data must be an object, but it was:",o,i);const l=[],c=Kn.empty();Fs(i,((p,y)=>{const _=Zp(e,p,t);y=Zt(y);const w=o.gc(_);if(y instanceof Cd)l.push(_);else{const S=Ad(y,w);S!=null&&(l.push(_),c.set(_,S))}}));const h=new lr(l);return new sE(c,h,o.fieldTransforms)}function Rk(n,e,t,i,o,l){const c=n.Dc(1,e,t),h=[Xf(e,i,t)],p=[o];if(l.length%2!=0)throw new ke(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)h.push(Xf(e,l[S])),p.push(l[S+1]);const y=[],_=Kn.empty();for(let S=h.length-1;S>=0;--S)if(!cE(y,h[S])){const A=h[S];let V=p[S];V=Zt(V);const U=c.gc(A);if(V instanceof Cd)y.push(A);else{const $=Ad(V,U);$!=null&&(y.push(A),_.set(A,$))}}const w=new lr(y);return new sE(_,w,c.fieldTransforms)}function Ad(n,e){if(uE(n=Zt(n)))return Xp("Unsupported field value:",e,n),lE(n,e);if(n instanceof xd)return(function(i,o){if(!oE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const h of i){let p=Ad(h,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=Zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Nt.fromDate(i);return{timestampValue:Kc(o.serializer,l)}}if(i instanceof Nt){const l=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kc(o.serializer,l)}}if(i instanceof di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wr)return{bytesValue:S0(o.serializer,i._byteString)};if(i instanceof Xt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Op(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof hi)return(function(c,h){return{mapValue:{fields:{[Zw]:{stringValue:e0},[Hc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw h.wc("VectorValues must only contain numeric values.");return kp(h.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Sp(i)}`)})(n,e)}function lE(n,e){const t={};return Gw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,((i,o)=>{const l=Ad(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function uE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof di||n instanceof wr||n instanceof Xt||n instanceof xd||n instanceof hi)}function Xp(n,e,t){if(!uE(t)||!Ww(t)){const i=Sp(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Xf(n,e,t){if((e=Zt(e))instanceof Id)return e._internalPath;if(typeof e=="string")return Zp(n,e);throw Xc("Field path arguments must be of type string or ",n,!1,void 0,t)}const kk=new RegExp("[~\\*/\\[\\]]");function Zp(n,e,t){if(e.search(kk)>=0)throw Xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw Xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ke(re.INVALID_ARGUMENT,h+n+p)}function cE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Nk extends dE{data(){return super.data()}}function hE(n,e){return typeof e=="string"?Zp(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dk{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Fs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Hc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((c=>Wt(c.doubleValue)));return new hi(l)}convertGeoPoint(e){return new di(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=hd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const t=ks(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=kt.fromString(e);_t(R0(i),9688,{name:e});const o=new jl(i.get(1),i.get(3)),l=new Oe(i.popFirst(5));return o.isEqual(t)||Ui(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class go extends dE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(hE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=go._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}go._jsonSchemaVersion="firestore/documentSnapshot/1.0",go._jsonSchema={type:Yt("string",go._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class Rc extends go{data(e={}){return super.data(e)}}class wa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Il(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Rc(this._firestore,this._userDataWriter,i.key,i,new Il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const p=new Rc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new Rc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Il(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return h.type!==0&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:Ok(h.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ok(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){n=Ur(n,Xt);const e=Ur(n.firestore,Ro);return wk(Kp(e),n._key).then((t=>Mk(e,n,t)))}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:Yt("string",wa._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class pE extends Dk{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,t)}}function Lk(n){n=Ur(n,Sd);const e=Ur(n.firestore,Ro),t=Kp(e),i=new pE(e);return bk(n._query),Ek(t,n._query).then((o=>new wa(e,i,n,o)))}function em(n,e,t){n=Ur(n,Xt);const i=Ur(n.firestore,Ro),o=fE(n.converter,e,t);return Pd(i,[aE(Jp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Er.none())])}function mE(n,e,t,...i){n=Ur(n,Xt);const o=Ur(n.firestore,Ro),l=Jp(o);let c;return c=typeof(e=Zt(e))=="string"||e instanceof Id?Rk(l,"updateDoc",n._key,e,t,i):Pk(l,"updateDoc",n._key,e),Pd(o,[c.toMutation(n._key,Er.exists(!0))])}function Tf(n){return Pd(Ur(n.firestore,Ro),[new Np(n._key,Er.none())])}function Vk(n,e){const t=Ur(n.firestore,Ro),i=Fr(n),o=fE(n.converter,e);return Pd(t,[aE(Jp(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Er.exists(!1))]).then((()=>i))}function Pd(n,e){return(function(i,o){const l=new Vi;return i.asyncQueue.enqueueAndForget((async()=>lk(await _k(i),o,l))),l.promise})(Kp(n),e)}function Mk(n,e,t){const i=t.docs.get(e._key),o=new pE(n);return new go(n,o,e._key,i,new Il(t.hasPendingWrites,t.fromCache),e.converter)}function yo(){return new Yp("serverTimestamp")}(function(e,t=!0){(function(o){Oa=o})(ba),wo(new As("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Ro(new RA(i.getProvider("auth-internal")),new bA(c,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ke(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(y.options.projectId,_)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),oi(yv,vv,e),oi(yv,vv,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="type.googleapis.com/google.protobuf.Int64Value",jk="type.googleapis.com/google.protobuf.UInt64Value";function gE(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function Zc(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Zc(e));if(typeof n=="function"||typeof n=="object")return gE(n,e=>Zc(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Pa(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Fk:case jk:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Pa(e)):typeof n=="function"||typeof n=="object"?gE(n,e=>Pa(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qn extends gi{constructor(e,t,i){super(`${tm}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,Qn.prototype)}}function Uk(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ed(n,e){let t=Uk(n),i=t,o;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!f_[c])return new Qn("internal","internal");t=f_[c],i=c}const h=l.message;typeof h=="string"&&(i=h),o=l.details,o!==void 0&&(o=Pa(o))}}catch{}return t==="ok"?null:new Qn(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ar(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="us-central1",Bk=/^data: (.*?)(?:\n|$)/;function $k(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new Qn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Hk{constructor(e,t,i,o,l=Zf,c=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new zk(e,t,i,o),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Zf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Wk(n,e,t){const i=xo(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(ap(n.emulatorOrigin),lp("Functions",!0))}function qk(n,e,t){const i=o=>Kk(n,e,o,{});return i.stream=(o,l)=>Jk(n,e,o,l),i}async function Gk(n,e,t,i){t["Content-Type"]="application/json";let o;try{o=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function yE(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function Kk(n,e,t,i){const o=n._url(e);return Qk(n,o,t,i)}async function Qk(n,e,t,i){t=Zc(t);const o={data:t},l=await yE(n,i),c=i.timeout||7e4,h=$k(c),p=await Promise.race([Gk(e,o,l,n.fetchImpl),h.promise,n.cancelAllRequests]);if(h.cancel(),!p)throw new Qn("cancelled","Firebase Functions instance was deleted.");const y=ed(p.status,p.json);if(y)throw y;if(!p.json)throw new Qn("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new Qn("internal","Response is missing data field.");return{data:Pa(_)}}function Jk(n,e,t,i){const o=n._url(e);return Yk(n,o,t,i||{})}async function Yk(n,e,t,i){var o;t=Zc(t);const l={data:t},c=await yE(n,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let h;try{h=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const U=new Qn("cancelled","Request was cancelled.");return{data:Promise.reject(U),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(U)}}}}}}const V=ed(0,null);return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}let p,y;const _=new Promise((A,V)=>{p=A,y=V});(o=i?.signal)===null||o===void 0||o.addEventListener("abort",()=>{const A=new Qn("cancelled","Request was cancelled.");y(A)});const w=h.body.getReader(),S=Xk(w,p,y,i?.signal);return{stream:{[Symbol.asyncIterator](){const A=S.getReader();return{async next(){const{value:V,done:U}=await A.read();return{value:V,done:U}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:_}}function Xk(n,e,t,i){const o=(c,h)=>{const p=c.match(Bk);if(!p)return;const y=p[1];try{const _=JSON.parse(y);if("result"in _){e(Pa(_.result));return}if("message"in _){h.enqueue(Pa(_.message));return}if("error"in _){const w=ed(0,_);h.error(w),t(w);return}}catch(_){if(_ instanceof Qn){h.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(c){let h="";return p();async function p(){if(i?.aborted){const y=new Qn("cancelled","Request was cancelled");return c.error(y),t(y),Promise.resolve()}try{const{value:y,done:_}=await n.read();if(_){h.trim()&&o(h.trim(),c),c.close();return}if(i?.aborted){const S=new Qn("cancelled","Request was cancelled");c.error(S),t(S),await n.cancel();return}h+=l.decode(y,{stream:!0});const w=h.split(`
`);h=w.pop()||"";for(const S of w)S.trim()&&o(S.trim(),c);return p()}catch(y){const _=y instanceof Qn?y:ed(0,null);c.error(_),t(_)}}},cancel(){return n.cancel()}})}const p_="@firebase/functions",m_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="auth-internal",eN="app-check-internal",tN="messaging-internal";function nN(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(Zk),c=t.getProvider(tN),h=t.getProvider(eN);return new Hk(o,l,c,h,i)};wo(new As(tm,e,"PUBLIC").setMultipleInstances(!0)),oi(p_,m_,n),oi(p_,m_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(n=dp(),e=Zf){const i=od(Zt(n),tm).getImmediate({identifier:e}),o=G_("functions");return o&&rN(i,...o),i}function rN(n,e,t){Wk(Zt(n),e,t)}function _E(n,e,t){return qk(Zt(n),e)}nN();const iN={apiKey:"AIzaSyBjOeHP4Pst7BYyRF2c85KKMe6lifXOU1M",authDomain:"wwconsole-93f76.firebaseapp.com",projectId:"wwconsole-93f76",storageBucket:"wwconsole-93f76.appspot.com",messagingSenderId:"936183161335",appId:"1:936183161335:web:0762f9ac5837ada128cef2",measurementId:"G-H6R483JTGT"},Rd=X_(iN),Tr=Sk(Rd),sN=vE(Rd,"asia-south1"),Nl=SA(Rd);function oN(){const n=Na(),[e,t]=Y.useState(()=>Nl.currentUser);Y.useEffect(()=>{const l=d1(Nl,c=>t(c));return()=>l()},[]);const i=async()=>{try{await h1(Nl)}catch(l){console.error(" Logout failed:",l)}finally{n("/login")}},o=[{label:" Dashboard",path:"/app"},{label:" Theme Drafts",path:"/app/drafts/themes"},{label:" Story Drafts",path:"/app/drafts/stories"},{label:" Prompt Lab",path:"/app/promptlab"}];return T.jsxs("div",{className:"min-h-screen flex bg-gray-100 text-gray-800",children:[T.jsxs("aside",{className:"w-64 bg-white shadow-md flex flex-col",children:[T.jsxs("div",{className:"p-5 border-b",children:[T.jsx("h1",{className:"text-2xl font-bold text-blue-700",children:"WaitWhat? CMS"}),T.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editorial Console"})]}),T.jsx("nav",{className:"flex-1 p-4 space-y-1",children:o.map(l=>T.jsx(II,{to:l.path,className:({isActive:c})=>`block px-4 py-2 rounded-md transition ${c?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:l.label},l.path))}),T.jsx("div",{className:"p-4 border-t text-center text-xs text-gray-500",children:T.jsxs("p",{children:[" ",new Date().getFullYear()," WaitWhat?"]})})]}),T.jsxs("main",{className:"flex-1 overflow-y-auto",children:[T.jsxs("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[T.jsx("h2",{className:"text-lg font-semibold",children:"Content Manager"}),T.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e?.email&&T.jsxs("span",{className:"text-gray-500 hidden sm:inline",children:["Signed in as ",e.email]}),!e&&T.jsx("button",{onClick:()=>n("/login"),className:"text-blue-600 hover:underline",children:"Login"}),e&&T.jsx("button",{onClick:i,className:"text-red-600 hover:underline",children:"Logout"}),T.jsx("a",{href:"https://waitwhat.news",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Live Site "})]})]}),T.jsx("div",{className:"p-6",children:T.jsx(rI,{})})]})]})}const ru=(n=[])=>(n||[]).map(e=>{const{imageUrl:t,preview:i,...o}=e||{};return o}),kd=(n=[])=>(n||[]).map(e=>{const{imageUrl:t,media:i,displayMode:o,...l}=e||{};return{...l,sources:ru(e?.sources||[])}}),Nd=(n,e=[])=>{const t=[n,...e||[]].filter(i=>!!i&&i.trim().length>0);return Array.from(new Set(t.map(i=>i.trim())))},wE=n=>({...n,isPinned:n.isPinned??n.isPinnedFeatured??!1,secondaryCategories:n.secondaryCategories||[],secondarySubcategories:n.secondarySubcategories||[],allCategories:n.allCategories||Nd(n.category,n.secondaryCategories||[]),sources:ru(n.sources||[]),timeline:kd(n.timeline||[])}),EE=async n=>{const e={title:n.title||"",type:n.type||"Theme",overview:n.overview||"",category:n.category||"",subcategory:n.subcategory||"",secondaryCategories:n.secondaryCategories||[],secondarySubcategories:n.secondarySubcategories||[],allCategories:n.allCategories||Nd(n.category,n.secondaryCategories||[]),tags:n.tags||[],imageUrl:n.imageUrl||"",sources:ru(n.sources||[]),timeline:[],cardDescription:n.cardDescription||"",cardDescriptionHome:n.cardDescriptionHome||"",cardDescriptionTheme:n.cardDescriptionTheme||"",cardDescriptionStory:n.cardDescriptionStory||"",analysis:{stakeholders:[],faqs:[],future:[]},disableDepthToggle:n.disableDepthToggle||!1,isPinned:n.isPinned??n.isPinnedFeatured??!1,isPinnedFeatured:n.isPinnedFeatured??n.isPinned??!1,isCompactCard:n.isCompactCard??!1,pinnedCategory:n.pinnedCategory??"All",keywords:n.keywords||[],status:n.status||"draft",slug:n.slug||(n.title?n.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):""),editorNotes:n.editorNotes||"",createdAt:yo(),updatedAt:yo()};return(await Vk(iE(Tr,"drafts"),e)).id},td=async()=>(await Lk(iE(Tr,"drafts"))).docs.map(e=>wE({id:e.id,...e.data()})),uo=async n=>{const e=Fr(Tr,"drafts",n),t=await nu(e);if(!t.exists())return null;const i=t.data(),o=kd(i.timeline||[]),l=ru(i.sources||[]);return(JSON.stringify(i.timeline||[])!==JSON.stringify(o)||JSON.stringify(i.sources||[])!==JSON.stringify(l))&&await mE(e,{timeline:o,sources:l,updatedAt:yo()}),wE({id:t.id,...i,timeline:o,sources:l})},Wn=async(n,e)=>{const t=Fr(Tr,"drafts",n),i=Nd(e.category,e.secondaryCategories||[]);await em(t,{...e,...e.sources?{sources:ru(e.sources)}:{},...e.timeline?{timeline:kd(e.timeline)}:{},...e.category||e.secondaryCategories?{allCategories:i}:{},updatedAt:yo()},{merge:!0})},TE=async n=>{const e=Fr(Tr,"drafts",n),t=await nu(e);if(t.exists()){const i=t.data(),o=i.slug||(i.title?i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""):n),l=i.type==="Story"?"stories":"themes";try{await Tf(Fr(Tr,l,o))}catch(c){console.warn(" Failed to delete published doc (ignoring):",c)}if(o!==n)try{await Tf(Fr(Tr,l,n))}catch(c){console.warn(" Failed to delete published doc by ID (ignoring):",c)}}await Tf(e)},g_=async(n,e,t)=>{const i=await uo(n);if(!i)throw new Error("Draft not found");const o=[...i.timeline||[]];o[e]={...o[e],...t},await Wn(n,{timeline:o})},SE=async n=>{const e=Fr(Tr,"drafts",n),t=await nu(e);if(!t.exists())throw new Error("Draft not found");const i=t.data(),o=i.slug||i.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),l=kd(i.timeline||[]),c=l?.flatMap(_=>_.sources||[]).filter(_=>_?.link&&_.link.startsWith("http"))||[],h=i.type==="Story"?"stories":"themes",p=Fr(Tr,h,o),y=i.allCategories?.length?i.allCategories:Nd(i.category,i.secondaryCategories||[]);await em(p,{...i,timeline:l,allCategories:y,sources:c,publishedAt:yo(),createdAt:i.createdAt||yo(),status:"published"}),await mE(e,{timeline:l,status:"published",updatedAt:yo()}),console.log(` Published ${i.type}  /${h}/${o} with ${c.length} sources`)},aN=async n=>{await SE(n)};function lN(){const n=Na(),[e,t]=Y.useState([]),[i,o]=Y.useState(!0),[l,c]=Y.useState(!1),[h,p]=Y.useState({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];Y.useEffect(()=>{(async()=>{try{const V=(await td()).filter(U=>U.type==="Theme");t(V)}catch(V){console.error("Error loading drafts:",V)}finally{o(!1)}})()},[]);const _=A=>{const{name:V,value:U}=A.target;p({...h,[V]:U})},w=async A=>{if(A.preventDefault(),!h.title.trim()||!h.category.trim()){alert("Title and Category are required");return}try{c(!0);const V=await EE({title:h.title,overview:h.overview,category:h.category,subcategory:h.subcategory,tags:[],imageUrl:h.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Theme"}),U=(await td()).filter($=>$.type==="Theme");t(U),p({title:"",overview:"",type:"Theme",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${V}`)}catch(V){console.error("Error creating draft:",V),alert("Failed to create draft")}finally{c(!1)}},S=async A=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await TE(A),t(V=>V.filter(U=>U.id!==A))}catch(V){console.error(V),alert("Failed to delete draft")}};return i?T.jsx("div",{className:"p-6",children:"Loading drafts..."}):T.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h1",{className:"text-3xl font-bold",children:"Theme Drafts"})}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Theme Draft"}),T.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsx("input",{name:"title",placeholder:"Title",value:h.title,onChange:_,className:"border p-2 rounded"}),T.jsxs("select",{name:"category",value:h.category,onChange:_,className:"border p-2 rounded",children:[T.jsx("option",{value:"",children:"Select Category"}),y.map(A=>T.jsx("option",{value:A,children:A},A))]}),T.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Climate Policy, Geopolitical Conflict)",value:h.subcategory,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"date",placeholder:"Date (optional)",value:h.date,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:h.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),T.jsx("textarea",{name:"overview",placeholder:"Overview",value:h.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),T.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Theme Draft"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Theme Drafts"}),e.length===0?T.jsx("p",{className:"text-gray-500",children:"No theme drafts yet."}):T.jsx("ul",{className:"divide-y",children:e.map(A=>T.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-medium",children:A.title||"Untitled"}),T.jsxs("p",{className:"text-sm text-gray-500",children:[A.category,"  ",A.subcategory||"","  ",A.status]}),T.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:A.cardDescription||A.overview||""}),T.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",A.id]})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[T.jsx("button",{onClick:()=>n(`/app/drafts/${A.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),T.jsx("button",{onClick:()=>S(A.id),className:"text-red-600 hover:underline",children:"Delete"}),T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),A.slug&&T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),T.jsx("button",{onClick:()=>{const V=A.slug||A.id,U=`[${A.title}](@theme/${V})`;navigator.clipboard.writeText(U),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},A.id))})]})]})}function uN(){const n=Na(),[e,t]=Y.useState([]),[i,o]=Y.useState(!0),[l,c]=Y.useState(!1),[h,p]=Y.useState({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),y=["Politics","Economy","Environment","Science & Tech","Health","World","Culture","Sports","Other"];Y.useEffect(()=>{(async()=>{try{const V=(await td()).filter(U=>U.type==="Story");t(V)}catch(V){console.error("Error loading drafts:",V)}finally{o(!1)}})()},[]);const _=A=>{const{name:V,value:U}=A.target;p({...h,[V]:U})},w=async A=>{if(A.preventDefault(),!h.title.trim()||!h.category.trim()){alert("Title and Category are required");return}try{c(!0);const V=await EE({title:h.title,overview:h.overview,category:h.category,subcategory:h.subcategory,tags:[],imageUrl:h.imageUrl,sources:[],timeline:[],analysis:{stakeholders:[],faqs:[],future:[]},status:"draft",slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),editorNotes:"",updatedAt:new Date,type:"Story"}),U=(await td()).filter($=>$.type==="Story");t(U),p({title:"",overview:"",type:"Story",category:"",subcategory:"",date:"",imageUrl:""}),n(`/app/drafts/${V}`)}catch(V){console.error("Error creating draft:",V),alert("Failed to create draft")}finally{c(!1)}},S=async A=>{if(window.confirm("Are you sure you want to delete this draft?"))try{await TE(A),t(V=>V.filter(U=>U.id!==A))}catch(V){console.error(V),alert("Failed to delete draft")}};return i?T.jsx("div",{className:"p-6",children:"Loading drafts..."}):T.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsx("h1",{className:"text-3xl font-bold",children:"Story Drafts"})}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Story Draft"}),T.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsx("input",{name:"title",placeholder:"Title",value:h.title,onChange:_,className:"border p-2 rounded"}),T.jsxs("select",{name:"category",value:h.category,onChange:_,className:"border p-2 rounded",children:[T.jsx("option",{value:"",children:"Select Category"}),y.map(A=>T.jsx("option",{value:A,children:A},A))]}),T.jsx("input",{name:"subcategory",placeholder:"Subcategory (e.g. Geopolitical Conflict)",value:h.subcategory,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"date",placeholder:"Date (optional)",value:h.date,onChange:_,className:"border p-2 rounded"}),T.jsx("input",{name:"imageUrl",placeholder:"Image URL (optional)",value:h.imageUrl,onChange:_,className:"border p-2 rounded md:col-span-2"}),T.jsx("textarea",{name:"overview",placeholder:"Overview",value:h.overview,onChange:_,rows:3,className:"border p-2 rounded md:col-span-2"}),T.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white py-2 px-4 rounded md:col-span-2 hover:bg-blue-700",children:l?"Saving...":"Create Story Draft"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Story Drafts"}),e.length===0?T.jsx("p",{className:"text-gray-500",children:"No story drafts yet."}):T.jsx("ul",{className:"divide-y",children:e.map(A=>T.jsxs("li",{className:"py-3 flex flex-col md:flex-row justify-between md:items-center gap-2",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-medium",children:A.title||"Untitled"}),T.jsxs("p",{className:"text-sm text-gray-500",children:[A.category,"  ",A.subcategory||"","  ",A.status]}),T.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:A.cardDescription||A.overview||""}),T.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",A.id]})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[T.jsx("button",{onClick:()=>n(`/app/drafts/${A.id}`),className:"text-blue-600 hover:underline",children:"Edit"}),T.jsx("button",{onClick:()=>S(A.id),className:"text-red-600 hover:underline",children:"Delete"}),T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A.id||""),alert(" ID copied to clipboard!")},className:"text-gray-600 hover:underline",children:"Copy ID"}),A.slug&&T.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A.slug||""),alert(" Slug copied to clipboard!")},className:"text-purple-600 hover:underline",children:"Copy Slug"}),T.jsx("button",{onClick:()=>{const V=A.slug||A.id,U=`[${A.title}](@story/${V})`;navigator.clipboard.writeText(U),alert(" Internal link syntax copied!")},className:"text-green-600 hover:underline",children:"Copy Internal Link"})]})]},A.id))})]})]})}const cN="modulepreload",dN=function(n){return"/"+n},y_={},v_=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let y=function(_){return Promise.all(_.map(w=>Promise.resolve(w).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var c=y;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");o=y(t.map(_=>{if(_=dN(_),_ in y_)return;y_[_]=!0;const w=_.endsWith(".css"),S=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${S}`))return;const A=document.createElement("link");if(A.rel=w?"stylesheet":cN,w||(A.as="script"),A.crossOrigin="",A.href=_,p&&A.setAttribute("nonce",p),document.head.appendChild(A),w)return new Promise((V,U)=>{A.addEventListener("load",V),A.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},nm="https://api.openai.com/v1/chat/completions",rm="gpt-4o-mini";async function im(n,e){const t="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",i={model:rm,messages:[{role:"system",content:`You are a precise news editor.
Always respond ONLY with valid JSON matching this schema:
${e}
Do not include markdown, code fences, or commentary.`},{role:"user",content:n}]},o=await fetch(nm,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!o.ok){const h=await o.text();throw new Error(`API error: ${o.status} ${h}`)}const c=(await o.json()).choices?.[0]?.message?.content?.trim();if(!c)throw new Error("Empty response from model");try{return JSON.parse(c)}catch{throw console.error(" Raw model output:",c),new Error("Invalid JSON returned by model")}}async function IE(n){const e=`
{
  "analysis": {
    "stakeholders": [{ "name": "string", "detail": "string" }],
    "faqs": [{ "question": "string", "answer": "string" }],
    "future": [{ "question": "string", "answer": "string" }]
  }
}`,t=`
You are a political analyst creating structured insights for the theme "${n.title}".

Context:
${n.overview}

Return three sections:
1. stakeholders  list of key people/institutions and their roles.
2. faqs  common reader questions with concise factual answers.
3. future  forward-looking questions with short, reasoned answers.

Keep all answers under 50 words.
Return only valid JSON.
`;return(await im(t,e)).analysis}async function hN(n){const e="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",t=`
You are a clear and factual news editor.
From the following overview, identify up to 8 important or complex terms that a reader might not immediately understand.

Return JSON only:
[
  { "term": "term or phrase", "explainer": "short, clear, factual, under 25 words" }
]

Overview:
${n}
`,l=(await(await fetch(nm,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:rm,messages:[{role:"user",content:t}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT overview context output:",l);try{return JSON.parse(l)}catch{return console.warn(" GPT Context JSON parse error:",l),[]}}async function fN(n){const e="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",t=n.contexts?.map(h=>h.term).filter(Boolean);if(!t?.length)return[];const i=`
You are a concise factual explainer.
For the given event, write a short (under 25 words) neutral definition for each listed term.

Event title: ${n.event}
Event description: ${n.description}

Terms to explain:
${t.map(h=>`- ${h}`).join(`
`)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`,c=(await(await fetch(nm,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:rm,messages:[{role:"user",content:i}]})})).json()).choices?.[0]?.message?.content?.trim()||"[]";console.log(" Raw GPT event explainer output:",c);try{return JSON.parse(c).filter(p=>p.term&&p.explainer)}catch{return console.warn(" Invalid JSON for event explainer:",c),[]}}async function xE(n){const e=`
You are a concise factual news explainer.
Given the event below, identify key proper nouns, organizations, or technical terms a general reader may not know.
For each, write a short (under 20 words) neutral explanation.

Event Title: ${n.event}
Event Description: ${n.description}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await im(e,'[{"term": "string", "explainer": "string"}]')}async function CE(n,e){const t=`
You are a concise factual explainer for a news analysis section.
Section: ${n}

For each entry below, suggest short (under 20 words) neutral explainers for key names or entities readers may not know.

Entries:
${JSON.stringify(e,null,2)}

Return ONLY valid JSON:
[
  {"term": "string", "explainer": "string"}
]
`;return await im(t,'[{"term": "string", "explainer": "string"}]')}const __=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:IE,generateContexts:hN,generateContextsForAnalysis:CE,generateContextsForTimelineEvent:xE,generateExplainersForEvent:fN},Symbol.toStringTag,{value:"Module"}));async function pN(n){const i=(await _E(sN,"fetchSonarTimeline")({title:n.title,overview:n.overview})).data;return!i||!Array.isArray(i.events)?[]:i.events.map((o,l)=>({id:`sonar-${l}`,date:o.date??"",event:o.title??"",description:o.description??"",significance:o.importance??2,sourceLink:o.sources?.[0]?.url??"",sources:o.sources?.map(c=>({title:c.title??"",link:c.url??"",sourceName:c.sourceName??"",pubDate:c.publishedAt??"",provider:"sonar"}))??[],contexts:[],faqs:[]}))}async function mN({title:n,event:e,description:t}){try{const i=Fr(Tr,"settings","global"),o=await nu(i),l=o.exists()&&o.data()?.serper?.prompt||"title";if(l.trim().toLowerCase()==="title")return n||e||t||"";let c=l;return c=c.replace(/{{\s*title\s*}}/gi,n||"").replace(/{{\s*event\s*}}/gi,e||"").replace(/{{\s*description\s*}}/gi,t||""),c.trim()||n||e||t||""}catch(i){return console.error(" Error building Serper query:",i),n||e||t||""}}async function gN(n,e,t){const i=vE(Rd,"asia-south1"),o=_E(i,"fetchEventCoverage");try{const l=await mN({title:n,event:n,description:e});return console.log(" Serper query:",l),(await o({title:l,description:e,date:t})).data}catch(l){throw console.error(" Error calling fetchEventCoverage:",l),new Error(l.message||"Failed to fetch event coverage")}}function w_(n){if(!n)return T.jsx("span",{children:n});const e=n.replace(/\]\(@\[([^\]]+)\]\(@(story|theme)\/([A-Za-z0-9_-]+)\)\)/g,"](@$2/$3)"),t=/\[([^\]]+)\]\((@(?:story|theme)\/[A-Za-z0-9_-]+|https?:\/\/[^\s)]+)\)/g,i=[];let o=0,l;for(;(l=t.exec(e))!==null;){const[c,h,p]=l,y=e.slice(o,l.index);y&&i.push({type:"text",value:y}),i.push({type:"link",label:h,target:p}),o=l.index+c.length}return o<e.length&&i.push({type:"text",value:e.slice(o)}),T.jsx("span",{style:{display:"inline",flexWrap:"wrap",lineHeight:"1.6"},children:i.map((c,h)=>{if(c.type==="text")return T.jsx("span",{children:c.value},h);const{label:p,target:y}=c,_=y.startsWith("@story/")||y.startsWith("@theme/"),w=y.startsWith("@theme/"),S=_?y.split("/")[1]:"";return _?T.jsx(B_,{to:`/${w?"themes":"stories"}/${S}`,style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},h):T.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline",marginRight:2},children:p},h)})})}async function yN(n){const e="dpjnkc0dq",t="waitwhat_unsigned",i=new FormData;return i.append("file",n),i.append("upload_preset",t),(await(await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i})).json()).secure_url}function vN(n){if(!n)return null;try{const e=new URL(n).hostname;return e?`https://api.faviconkit.com/${e}/64`:null}catch{return null}}function _N(n){if(!n)return null;try{return`${new URL(n).origin}/favicon.ico`}catch{return null}}function wN(n){return n&&n.trim().split(/\s+/).map(e=>e[0]?.toUpperCase()??"").join("").slice(0,3)||"?"}const co=[{value:"Politics",subcategories:["Elections & Power Transitions","Government Policies & Bills","Public Institutions & Judiciary","Geopolitics & Diplomacy"]},{value:"Business & Economy",subcategories:["Macroeconomy","Industries","Markets & Finance","Trade & Tariffs","Corporate Developments"]},{value:"World",subcategories:["International Conflicts","Global Governance","Migration & Humanitarian Crises","Elections Worldwide","Science & Tech","Environment"]},{value:"India",subcategories:["Social Issues","Infrastructure & Development","Science, Tech and Environment"]}];co.map(n=>n.value.toLowerCase());const E_=n=>n.split(",").map(e=>e.trim()).filter(Boolean),vc=n=>n||"";function EN(n){return n>=85?"#16a34a":n>=70?"#eab308":n>=50?"#f97316":"#dc2626"}function TN(n){return n>=85?"bg-green-100 text-green-800":n>=70?"bg-yellow-100 text-yellow-800":n>=50?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}function SN(){const{id:n}=BS(),e=Na(),[t,i]=Y.useState(null),[o,l]=Y.useState(!0),[c,h]=Y.useState(!1),[p,y]=Y.useState(!1),[_,w]=Y.useState(!1),[S,A]=Y.useState({}),[V,U]=Y.useState(!1),[$,pe]=Y.useState(""),[ee,de]=Y.useState(""),[me,je]=Y.useState(!0),[Fe,x]=Y.useState(!0),[C,P]=Y.useState(!1),[b,L]=Y.useState(!1),F=N=>Array.from(new Set(N)),k=N=>{if(!N)return"";const G=co.find(q=>q.value.toLowerCase()===N.toLowerCase());return G?G.value:N},Ye=(N,G=[])=>{const q=[N,...G||[]].filter(Z=>!!Z?.trim?.().length).map(Z=>k(Z.trim())).filter(Boolean);return Array.from(new Set(q))},St=co.find(N=>N.value===t?.category)?.subcategories||[],Vt=F(co.flatMap(N=>N.subcategories||[])),ot=(N=[])=>(N||[]).map(G=>{const{imageUrl:q,preview:Z,...se}=G||{};return se}),ae=(N=[])=>(N||[]).map(G=>{const{imageUrl:q,media:Z,displayMode:se,sources:ue,...ye}=G||{};return{...ye,sources:ot(ue||[])}}),Ne=N=>{if(!t)return;const G=co.find(ue=>ue.value===N)?.subcategories||[],q=G.includes(t.subcategory||"")?t.subcategory:G[0]||"",Z=Ye(N,t.secondaryCategories||[]),se=t.pinnedCategory&&t.pinnedCategory===t.category?N:t.pinnedCategory;i({...t,category:N,subcategory:q,allCategories:Z,pinnedCategory:se})},ge=(N,G)=>{if(!t)return;const q=t.secondaryCategories||[],Z=G?F([...q,N]):q.filter(ue=>ue!==N),se=Ye(t.category,Z);i({...t,secondaryCategories:Z,allCategories:se}),w(!0)},j=N=>({...N,timeline:ae(N.timeline||[]),sources:ot(N.sources||[]),phases:N.phases||[],isPinned:N.isPinned??N.isPinnedFeatured??!1,category:k(N.category),secondaryCategories:(N.secondaryCategories||[]).map(G=>k(G)||"").filter(Boolean),secondarySubcategories:(N.secondarySubcategories||[]).filter(Boolean),allCategories:N.allCategories?.filter(Boolean)||Ye(N.category,N.secondaryCategories||[]),tags:N.tags||[],cardDescription:vc(N.cardDescription),cardDescriptionHome:vc(N.cardDescriptionHome),cardDescriptionTheme:vc(N.cardDescriptionTheme),cardDescriptionStory:vc(N.cardDescriptionStory)}),X=()=>{if(!t||!t.timeline||t.timeline.length===0){alert("No timeline events to copy.");return}const N=`You are a fact-checking assistant. For each event below, fact-check the explanation using the listed sources and your own browsing.

Return ONLY a JSON array of objects. Each object MUST have:
- "id": the event id (string, as provided)
- "confidenceScore": integer from 0 to 100
- "confidenceExplanation": short 13 sentence explanation of why you gave that score (number and credibility of sources, agreement between sources, recency, etc.)

Example of desired output:
[
  {
    "id": "event-1",
    "confidenceScore": 88,
    "confidenceExplanation": "Verified by multiple major outlets with consistent details."
  }
]

Events:
`,G=t.timeline.map((Z,se)=>{const ue=Z.sources?.map(ye=>`- ${ye.link||ye.title||ye.sourceName||""}`).join(`
`)||"- (no sources listed)";return["#EVENT",`id: ${Z.id??`event-${se+1}`}`,`title: ${Z.event||Z.title||"(no title)"}`,`explanation: ${Z.description||"(no explanation)"}`,"","sources:",ue,""].join(`
`)}).join(`
`),q=`${N}
${G}`;if(!navigator?.clipboard){alert("Clipboard not available in this browser.");return}navigator.clipboard.writeText(q).then(()=>{alert("All events copied for fact-checking. Paste into ChatGPT.")}).catch(Z=>{console.error("Clipboard error",Z),alert("Failed to copy to clipboard.")})},Ae=async()=>{if(t)try{const N=JSON.parse($);if(!Array.isArray(N))throw new Error("JSON is not an array");const G=t.timeline.map((se,ue)=>{const ye=N.find(Te=>Te.id===se.id||Te.id===`event-${ue+1}`);return ye?{...se,factCheck:{confidenceScore:ye.confidenceScore,explanation:ye.confidenceExplanation,lastCheckedAt:Date.now()}}:se}),q={...t,timeline:G};h(!0);const Z=t.id||n;if(!Z)throw new Error("Draft id missing.");await Wn(Z,{timeline:G}),i(q),U(!1),pe(""),alert("Fact-check data applied to events.")}catch(N){console.error(N),alert("Could not parse JSON. Make sure you pasted valid JSON array with id, confidenceScore, and confidenceExplanation.")}finally{h(!1)}},He=(N=[],G,q)=>(N||[]).filter(Z=>Z.startIndex!==G).map(Z=>{const se=Z.startIndex>G?Z.startIndex-1:Z.startIndex;let ue=typeof Z.endIndex=="number"?Z.endIndex>=G?Z.endIndex-1:Z.endIndex:void 0;return typeof ue=="number"&&ue<se&&(ue=se),se>=q?null:{...Z,startIndex:se,endIndex:ue}}).filter(Boolean),De=(N,G)=>{if(!G)return;const q=G.selectionStart??0,Z=G.selectionEnd??0;A(se=>({...se,[N]:{start:q,end:Z}}))},Ue=(N,G,q)=>{let Z=prompt("Enter linked story/theme ID (e.g. story/abc123 or theme/xyz456):");if(!Z||(Z=Z.replace(/^@+/,"").replace(/\[|\]|\(|\)/g,"").trim(),!Z))return;const se=S[N];if(!se||se.start===se.end){alert("Select text in the field first, then click Link.");return}const ue=G||"",{start:ye,end:Te}=se,Je=ue.substring(ye,Te);if(!Je){alert("Selection is empty.");return}const tt=`[${Je}](@${Z})`,xt=ue.substring(0,ye)+tt+ue.substring(Te);q(xt),w(!0)};Y.useEffect(()=>{(async()=>{try{if(!n)return;const G=await uo(n),q=G?j(G):null;i(q),de((q?.tags||[]).join(", "))}catch(G){console.error(G),alert("Failed to load draft.")}finally{l(!1)}})()},[n]),Y.useEffect(()=>{const N=G=>{_&&(G.preventDefault(),G.returnValue="")};return window.addEventListener("beforeunload",N),()=>window.removeEventListener("beforeunload",N)},[_]);const Ke=N=>{if(!t)return;const{name:G,value:q}=N.target;i({...t,[G]:q}),w(!0)},et=N=>{de(N.target.value),w(!0)},yt=N=>{i(G=>G&&{...G,tags:E_(N)})},zt=async()=>{const N=prompt("Paste Midjourney Image URL:");if(N)try{const G=await yN(N);i(q=>q&&{...q,imageUrl:G}),w(!0),alert(" Uploaded to Cloudinary!")}catch(G){console.error(G),alert(" Failed to upload image.")}},Jn=async()=>{if(!(!t||!n))try{h(!0);const N=Ye(t.category,t.secondaryCategories||[]),G=E_(ee),q={...t,allCategories:(N||[]).filter(Boolean),tags:G};i(q),await Wn(n,q),w(!1),alert(" Metadata saved")}catch(N){console.error(N),alert(" Failed to save metadata: "+(N?.message||"Unknown error"))}finally{h(!1)}},bt=async()=>{if(!(!n||!t)){y(!0);try{await Wn(n,{phases:t.phases||[]}),t.type==="Story"?(await aN(n),alert(" Story published successfully!")):(await SE(n),alert(" Theme published successfully!"))}catch(N){console.error(N),alert(" Publish failed: "+N.message)}finally{y(!1)}}},dn=async()=>{if(!(!t||!n)){P(!0);try{const N=await pN(t),G={...t,timeline:N,updatedAt:new Date().toISOString()};i(G),await Wn(n,{timeline:N,updatedAt:G.updatedAt}),w(!1),alert(" Timeline generated with Sonar and saved.")}catch(N){console.error("Failed to generate timeline with Sonar:",N),alert(" Failed to generate timeline: "+(N.message||"Unknown error"))}finally{P(!1)}}},ur=async()=>{if(!(!t||!n)){L(!0);try{const N=await IE(t);await Wn(n,{analysis:N});const G=await uo(n);i(G?j(G):null),alert(" Analysis generated successfully!")}catch(N){console.error(N),alert(" Failed to generate analysis: "+N.message)}finally{L(!1)}}},zr=async()=>{if(!n||!t)return;const N={date:"",event:"",description:"",significance:1,sourceLink:"",sources:[],contexts:[],faqs:[],origin:"external"},G=[...t.timeline||[],N];i({...t,timeline:G});try{await Wn(n,{timeline:G}),alert(" Blank event added. Scroll to the end of the timeline to edit it.")}catch(q){console.error(" Failed to add event:",q),alert(" Failed to add event. Please try again.");const Z=await uo(n);Z&&i(j(Z))}},gt=async(N,G,q)=>{if(!n||!t)return;const Z=[...t.timeline];Z[N]={...Z[N],[G]:q},i({...t,timeline:Z}),w(!0)},yi=async N=>{if(!n||!t||!window.confirm("Delete this event?"))return;const G=t.timeline.filter((Z,se)=>se!==N),q=He(t.phases||[],N,G.length);i({...t,timeline:G,phases:q}),w(!0);try{await Wn(n,{timeline:G,phases:q});const Z=await uo(n);Z&&(i(j(Z)),w(!1)),alert(" Event deleted.")}catch(Z){console.error(" Failed to delete event:",Z),alert(" Failed to delete event.");const se=await uo(n);se&&i(j(se))}},$i=async(N,G)=>{if(!n||!t)return;const q=G.event?.trim();if(!q){alert("Please add an event title before fetching coverage.");return}const Z=G.description??"";try{console.log(" Fetching Serper coverage for:",q);const se=await gN(q,Z,G.date||"");if(se.sources?.length){const ue=(t.timeline[N].sources||[]).map(({title:At,link:wn,sourceName:Sr,pubDate:En,score:Br,provider:$r})=>({title:At||"",link:wn||"",sourceName:Sr||"",pubDate:En||null,score:Br,provider:$r})),ye=(se.sources||[]).map(At=>({title:At.title,link:At.link,sourceName:At.sourceName,pubDate:At.pubDate,score:At.score,provider:At.provider||"serper"})),Te=[...ue,...ye.filter(At=>!ue.some(wn=>wn.link===At.link))],Je={...t.timeline[N],sources:Te,origin:t.timeline[N].origin||"external"};await g_(n,N,Je);const tt=[...t.timeline];tt[N]=Je;const xt=await uo(n);i(j(xt||{...t,timeline:tt})),w(!0),alert(` Found ${se.sources.length} sources for "${G.event}"`)}else alert(" No relevant sources found for this event");console.log(" Sources:",se.sources)}catch(se){console.error(" Error fetching coverage:",se),alert(" Failed to fetch coverage: "+se.message)}};return o?T.jsx("div",{className:"p-6",children:"Loading..."}):t?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h1",{className:"text-3xl font-bold",children:"Edit Draft"}),_&&T.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" You have unsaved changes"}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 hover:underline",children:" Back"}),T.jsx("button",{onClick:bt,disabled:p,className:"bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 disabled:opacity-50",children:p?"Publishing":t?.type==="Story"?" Publish Story":" Publish Theme"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metadata"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsx("input",{name:"title",value:t.title,onChange:Ke,placeholder:"Title",className:"border p-2 rounded"}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Primary Category"}),T.jsxs("select",{name:"category",value:t.category,onChange:N=>Ne(N.target.value),className:"border p-2 rounded",children:[T.jsx("option",{value:"",children:"Select category"}),co.map(N=>T.jsx("option",{value:N.value,children:N.value},N.value))]})]}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Primary Subcategory"}),T.jsxs("select",{name:"subcategory",value:t.subcategory,onChange:N=>i({...t,subcategory:N.target.value}),className:"border p-2 rounded",disabled:!t.category,children:[T.jsx("option",{value:"",children:"Select subcategory"}),St.map(N=>T.jsx("option",{value:N,children:N},N))]})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-2",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Secondary Categories"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:co.filter(N=>N.value!==t.category).map(N=>T.jsxs("label",{className:"flex items-center gap-2 border rounded px-2 py-1 text-sm",children:[T.jsx("input",{type:"checkbox",checked:t.secondaryCategories?.includes(N.value)||!1,onChange:G=>ge(N.value,G.target.checked)}),T.jsx("span",{children:N.value})]},`sec-cat-${N.value}`))})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Secondary Subcategories"}),T.jsx("select",{multiple:!0,value:t.secondarySubcategories||[],onChange:N=>{const G=Array.from(N.target.selectedOptions).map(q=>q.value);i({...t,secondarySubcategories:G})},className:"border p-2 rounded h-28",children:Vt.map(N=>T.jsx("option",{value:N,children:N},N))}),T.jsx("p",{className:"text-xs text-gray-500",children:"Hold Ctrl/Cmd to select multiple."})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Card Preview (all screens)"}),T.jsx("textarea",{name:"cardDescription",value:t.cardDescription||"",onChange:Ke,placeholder:"Short blurb shown under the title on cards (used instead of Overview)",rows:3,className:"border p-2 rounded"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Leave blank to fall back to the overview."})]}),T.jsxs("div",{className:"md:col-span-2 flex flex-col gap-1",children:[T.jsx("label",{className:"text-sm text-gray-700 font-medium",children:"Tags"}),T.jsx("input",{type:"text",value:ee,onChange:et,onBlur:()=>yt(ee),placeholder:"Comma-separated tags (e.g. politics, elections, policy)",className:"border p-2 rounded"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Saved as a tag list; you can decide how to use them later."})]}),T.jsx("input",{name:"imageUrl",value:t.imageUrl||"",onChange:Ke,placeholder:"Main Thumbnail / Cover Image URL",className:"border p-2 rounded md:col-span-2"}),T.jsx("button",{type:"button",onClick:zt,className:"px-3 py-2 bg-purple-600 text-white rounded md:col-span-2 hover:bg-purple-700",children:" Upload Image from Midjourney Link"}),t.imageUrl&&T.jsxs("div",{className:"md:col-span-2 flex justify-start items-center gap-4",children:[T.jsx("img",{src:t.imageUrl,alt:"Cover",className:"w-48 h-32 object-cover rounded border",onError:N=>{const G=t.imageUrl??"";try{if(G.startsWith("http")){const q=new URL(G).origin;N.currentTarget.src=`${q}/favicon.ico`}else N.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}catch{N.currentTarget.src="https://via.placeholder.com/150x100?text=No+Image"}}}),T.jsx("p",{className:"text-gray-600 text-sm",children:"Preview of your main thumbnail"})]}),T.jsxs("div",{className:"flex items-center gap-3 md:col-span-2 mt-2",children:[T.jsx("input",{type:"checkbox",id:"isPinned",checked:t.isPinned||!1,onChange:async N=>{const G=N.target.checked;if(i({...t,isPinned:G}),n)try{await Wn(n,{isPinned:G,isPinnedFeatured:G})}catch(q){console.error(" Failed to update isPinned:",q)}},className:"w-4 h-4"}),T.jsx("label",{htmlFor:"isPinned",className:"text-sm text-gray-800",children:"Pin as Featured"}),t.isPinned&&T.jsxs("select",{value:t.pinnedCategory||"All",onChange:async N=>{const G=N.target.value;if(i({...t,pinnedCategory:G}),n)try{await Wn(n,{pinnedCategory:G})}catch(q){console.error(" Failed to update pinnedCategory:",q)}},className:"border p-1 rounded text-sm",children:[T.jsx("option",{value:"All",children:"All Categories"}),T.jsx("option",{value:t.category,children:t.category})]})]}),T.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[T.jsx("input",{type:"checkbox",id:"isCompactCard",checked:t.isCompactCard||!1,onChange:async N=>{const G=N.target.checked;if(i({...t,isCompactCard:G}),n)try{await Wn(n,{isCompactCard:G})}catch(q){console.error(" Failed to update isCompactCard:",q)}},className:"w-4 h-4 mt-1"}),T.jsxs("label",{htmlFor:"isCompactCard",className:"text-sm text-gray-800",children:["Render as compact card",T.jsx("span",{className:"block text-gray-500 text-xs",children:"Home/Stories/Themes screens on WWFinal will show only the title and a small thumbnail when enabled."})]})]}),T.jsx("textarea",{name:"overview",value:t.overview||"",onChange:Ke,onSelect:N=>De("overview",N.target),placeholder:"Overview",rows:3,className:"border p-2 rounded md:col-span-2"}),T.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 text-xs text-blue-600 mt-1",children:[T.jsx("button",{type:"button",onClick:()=>Ue("overview",t.overview||"",N=>i({...t,overview:N})),className:"text-blue-600 hover:underline",children:" Link selected text"}),T.jsx("span",{className:"text-gray-500",children:"Select text in the overview box, then click to link another story/theme."})]}),T.jsx("div",{className:"md:col-span-2 text-sm text-gray-600",children:w_(t.overview||"")})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[T.jsx("input",{type:"checkbox",id:"disableDepthToggle",checked:t.disableDepthToggle||!1,onChange:async N=>{const G=N.target.checked;if(i({...t,disableDepthToggle:G}),n)try{await Wn(n,{disableDepthToggle:G}),console.log(" disableDepthToggle updated to:",G)}catch(q){console.error(" Failed to update disableDepthToggle:",q),alert(" Failed to update disableDepthToggle.")}},className:"w-4 h-4"}),T.jsx("label",{htmlFor:"disableDepthToggle",className:"text-sm text-gray-700",children:"Disable Depth Toggle in App"})]}),T.jsxs("div",{className:"mt-6",children:[T.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Context Explainers (Overview)"}),T.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add terms that will be highlighted in the overview for reader context."}),(t.contexts||[]).map((N,G)=>T.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[T.jsx("input",{type:"text",value:N.term,onChange:q=>{const Z=[...t.contexts||[]];Z[G].term=q.target.value,i({...t,contexts:Z})},placeholder:"Term",className:"border p-2 rounded flex-1"}),T.jsx("input",{type:"text",value:N.explainer,onChange:q=>{const Z=[...t.contexts||[]];Z[G].explainer=q.target.value,i({...t,contexts:Z})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),T.jsx("button",{onClick:()=>{const q=(t.contexts||[]).filter((Z,se)=>se!==G);i({...t,contexts:q})},className:"text-red-500 text-sm hover:underline",children:""})]},G)),T.jsx("button",{onClick:()=>i({...t,contexts:[...t.contexts||[],{term:"",explainer:""}]}),className:"text-blue-600 text-sm hover:underline",children:" Add new context term"})]}),T.jsx("button",{onClick:async()=>{if(!t.overview){alert("Please write an overview first!");return}try{if(!window.confirm("Use GPT to suggest contextual explainers?"))return;h(!0);const{generateContexts:G}=await v_(async()=>{const{generateContexts:se}=await Promise.resolve().then(()=>__);return{generateContexts:se}},void 0),q=await G(t.overview);if(!q||q.length===0){alert("No terms found.");return}const Z=[...t.contexts||[],...q];i({...t,contexts:Z}),alert(` Added ${q.length} suggested context terms.`)}catch(N){console.error(" GPT error:",N),alert("Failed to fetch GPT suggestions. Check console.")}finally{h(!1)}},className:"text-purple-600 text-sm hover:underline mt-2",children:" Suggest Contexts with GPT"}),T.jsx("button",{onClick:Jn,disabled:c,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:c?"Saving...":"Save Metadata"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Chronology of Events"}),T.jsxs("div",{className:"flex gap-3 items-center",children:[T.jsx("button",{onClick:dn,disabled:C,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:C?"Generating":" Generate Timeline"}),T.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-50",onClick:X,disabled:!t||!t.timeline||t.timeline.length===0,children:"Copy Events for Fact-Check"}),T.jsx("button",{type:"button",className:"px-3 py-1 rounded border border-blue-600 text-blue-600 text-sm hover:bg-blue-50 disabled:opacity-50",onClick:()=>U(!0),disabled:!t||!t.timeline||t.timeline.length===0,children:"Apply Fact-Check Results"}),T.jsx("button",{onClick:zr,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:" Add Event"}),T.jsx("button",{onClick:async()=>{if(!(!n||!t))try{h(!0),await Wn(n,{timeline:t.timeline,phases:t.phases||[]}),w(!1),alert(" Timeline saved successfully!")}catch(N){console.error(" Timeline save failed:",N),alert(" Failed to save timeline.")}finally{h(!1)}},className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:" Save Timeline"}),T.jsx("button",{onClick:()=>je(!me),className:"text-sm text-blue-600 hover:underline",children:me?"Hide":"Show"})]})]}),me&&T.jsx(T.Fragment,{children:t.timeline.length===0?T.jsx("p",{className:"text-gray-500 mb-3",children:"No events yet."}):T.jsx("div",{className:"space-y-4 mb-4",children:t.timeline.map((N,G)=>T.jsxs("div",{className:"mb-6",children:[T.jsx("button",{className:"text-purple-600 text-xs hover:underline mb-2",onClick:()=>{const q={title:"New Phase",startIndex:G,endIndex:G},Z=[...t.phases||[],q];i({...t,phases:Z}),w(!0)},children:" Insert Phase Here"}),(t.phases||[]).filter(q=>q.startIndex===G).map(q=>{const Z=(t.phases||[]).indexOf(q),se=t.timeline.length,ue=Math.max(q.startIndex,se>0?se-1:q.startIndex),ye=Math.min(Math.max(q.startIndex,q.endIndex??q.startIndex),ue),Te=t.timeline[q.startIndex]?.event||`Event ${q.startIndex+1}`;return T.jsxs("div",{className:"border border-purple-300 bg-purple-50 p-3 rounded mb-3",children:[T.jsx("input",{value:q.title||"",onChange:Je=>{const tt=[...t.phases||[]];tt[Z]={...q,title:Je.target.value},i({...t,phases:tt}),w(!0)},className:"border p-2 rounded w-full",placeholder:"Phase title"}),T.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Starts at event #",q.startIndex+1,": ",Te]}),T.jsxs("label",{className:"text-xs text-gray-600 mt-2 block",children:["End this phase after event",T.jsx("select",{className:"border p-2 rounded w-full mt-1 text-sm",value:ye,onChange:Je=>{const tt=Number(Je.target.value),xt=Math.max(q.startIndex,tt),At=[...t.phases||[]];At[Z]={...q,endIndex:xt},i({...t,phases:At}),w(!0)},children:t.timeline.map((Je,tt)=>T.jsxs("option",{value:tt,disabled:tt<q.startIndex,children:["#",tt+1,"  ",Je.event||`Event ${tt+1}`]},`phase-${Z}-end-${tt}`))})]}),T.jsx("button",{className:"text-red-600 text-xs mt-1 hover:underline",onClick:()=>{const Je=(t.phases||[]).filter((tt,xt)=>xt!==Z);i({...t,phases:Je}),w(!0)},children:" Remove Phase"})]},`phase-${Z}`)}),T.jsxs("div",{className:"border p-3 rounded",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[T.jsx("input",{value:N.date||"",onChange:q=>gt(G,"date",q.target.value),placeholder:"Date",className:"border p-2 rounded"}),T.jsx("input",{value:N.event,onChange:q=>gt(G,"event",q.target.value),placeholder:"Event",className:"border p-2 rounded"}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sources"}),(N.sources||[]).map((q,Z)=>T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx("input",{value:q.link,onChange:se=>{const ue=[...N.sources||[]];ue[Z].link=se.target.value,gt(G,"sources",ue)},placeholder:`Source link #${Z+1}`,className:"border p-2 rounded w-full"}),T.jsx("button",{onClick:()=>{const se=(N.sources||[]).filter((ue,ye)=>ye!==Z);gt(G,"sources",se)},className:"text-red-600 text-sm hover:underline",children:""})]},Z)),T.jsx("button",{onClick:()=>{const q=[...N.sources||[],{title:"",link:"",sourceName:""}];gt(G,"sources",q)},className:"text-blue-600 text-sm hover:underline",children:" Add another link"})]})]}),T.jsx("textarea",{value:N.description||"",onChange:q=>{gt(G,"description",q.target.value)},onSelect:q=>De(`timeline-${G}`,q.target),placeholder:"Description",rows:2,className:"border p-2 rounded w-full mb-2"}),T.jsx("button",{onClick:()=>Ue(`timeline-${G}`,N.description||"",q=>{const Z=[...t.timeline];Z[G]={...N,description:q},i({...t,timeline:Z})}),className:"text-blue-600 text-xs hover:underline mb-2",children:" Link selected text"}),T.jsx("div",{className:"text-sm text-gray-700 mt-2",children:w_(N.description??"")}),N.factCheck&&typeof N.factCheck.confidenceScore=="number"&&T.jsxs("div",{className:"mt-3 text-xs text-gray-700 border-t pt-2 border-dashed border-gray-200",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full font-semibold "+TN(N.factCheck.confidenceScore),children:[N.factCheck.confidenceScore,"% fact-check confidence"]}),T.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:EN(N.factCheck.confidenceScore)}})]}),N.factCheck.explanation&&T.jsx("p",{className:"leading-snug",children:N.factCheck.explanation}),N.factCheck.lastCheckedAt&&T.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:["Last checked:"," ",new Date(N.factCheck.lastCheckedAt).toLocaleString()]})]}),T.jsxs("div",{className:"mt-2",children:[T.jsx("h4",{className:"text-sm font-medium mb-1",children:"Context Explainers"}),(N.contexts||[]).map((q,Z)=>T.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[T.jsx("input",{type:"text",value:q.term,onChange:se=>{const ue=[...N.contexts||[]];ue[Z].term=se.target.value,gt(G,"contexts",ue)},placeholder:"Term",className:"border p-1 rounded flex-1"}),T.jsx("input",{type:"text",value:q.explainer,onChange:se=>{const ue=[...N.contexts||[]];ue[Z].explainer=se.target.value,gt(G,"contexts",ue)},placeholder:"Explainer",className:"border p-1 rounded flex-[2]"}),T.jsx("button",{onClick:()=>{const se=(N.contexts||[]).filter((ue,ye)=>ye!==Z);gt(G,"contexts",se)},className:"text-red-600 text-xs hover:underline",children:""})]},Z)),T.jsx("button",{onClick:()=>{const q=[...N.contexts||[],{term:"",explainer:""}];gt(G,"contexts",q)},className:"text-blue-600 text-xs hover:underline",children:" Add term"})]}),T.jsx("button",{onClick:async()=>{try{h(!0);const q=await xE(N);if(!q?.length){alert("No contextual terms found for this event.");return}const Z=[...N.contexts||[],...q];gt(G,"contexts",Z),alert(` Added ${q.length} contextual explainers for this event.`)}catch(q){console.error("GPT error (event contexts):",q),alert(" Failed to generate contexts for this event.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),T.jsx("button",{onClick:async()=>{const q=N.event?.trim(),Z=N.description?.trim();if(!q||!Z){alert("Please add an event title and description first.");return}const se={event:q,description:Z,contexts:N.contexts||[]};if(!se.contexts.length){alert("Please add at least one term first.");return}try{h(!0);const{generateExplainersForEvent:ue}=await v_(async()=>{const{generateExplainersForEvent:Je}=await Promise.resolve().then(()=>__);return{generateExplainersForEvent:Je}},void 0),ye=await ue(se);if(!ye.length){alert("No explainers returned.");return}const Te=(se.contexts||[]).map(Je=>{const tt=ye.find(xt=>xt.term.toLowerCase()===Je.term.toLowerCase());return tt?{...Je,explainer:tt.explainer}:Je});gt(G,"contexts",Te),alert(` Added ${ye.length} explainers.`)}catch(ue){console.error("GPT error:",ue),alert("Failed to generate explainers for this event.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-2 block",children:" Generate Explainers for this Event"}),T.jsxs("div",{className:"mt-3",children:[T.jsx("h4",{className:"text-sm font-medium mb-2",children:"Event FAQs"}),(N.faqs||[]).map((q,Z)=>T.jsxs("div",{className:"flex flex-col md:flex-row gap-2 mb-2",children:[T.jsx("input",{type:"text",value:q.question||"",onChange:se=>{const ue=[...N.faqs||[]];ue[Z]={...ue[Z],question:se.target.value},gt(G,"faqs",ue)},placeholder:"Question",className:"border p-2 rounded flex-1"}),T.jsx("textarea",{value:q.answer||"",onChange:se=>{const ue=[...N.faqs||[]];ue[Z]={...ue[Z],answer:se.target.value},gt(G,"faqs",ue)},placeholder:"Answer",rows:2,className:"border p-2 rounded flex-[2]"}),T.jsx("button",{onClick:()=>{const se=(N.faqs||[]).filter((ue,ye)=>ye!==Z);gt(G,"faqs",se)},className:"text-red-600 text-sm hover:underline self-start",children:""})]},Z)),T.jsx("button",{onClick:()=>{const q=[...N.faqs||[],{question:"",answer:""}];gt(G,"faqs",q)},className:"text-blue-600 text-sm hover:underline",children:" Add FAQ"})]}),T.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Importance"}),T.jsxs("select",{value:N.significance,onChange:q=>gt(G,"significance",Number(q.target.value)),className:"border p-2 rounded mb-2",children:[T.jsx("option",{value:1,children:"Low"}),T.jsx("option",{value:2,children:"Medium"}),T.jsx("option",{value:3,children:"High"})]}),T.jsxs("div",{className:"flex gap-4 items-center mt-2",children:[T.jsx("button",{onClick:()=>yi(G),className:"text-red-600 text-sm hover:underline",children:"Delete"}),T.jsx("button",{onClick:()=>$i(G,N),className:"text-blue-600 text-sm hover:underline",children:" Fetch Top Sources"}),T.jsx("button",{onClick:async()=>{if(n)try{h(!0),await g_(n,G,t.timeline[G]),w(!1),alert(" Event saved!")}catch(q){console.error(q),alert(" Failed to save event.")}finally{h(!1)}},className:"text-green-600 text-sm hover:underline",children:" Save Event"})]}),N.sources&&N.sources.length>0&&T.jsxs("div",{className:"mt-3 border-t pt-2",children:[T.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Top Sources:"}),T.jsx("div",{className:"space-y-2",children:N.sources.map((q,Z)=>T.jsxs("div",{className:"flex items-center space-x-3 border p-2 rounded-md hover:bg-gray-50",children:[(()=>{const se=vN(q.link),ue=_N(q.link),ye=wN(q.sourceName||q.title||"");return T.jsxs(T.Fragment,{children:[T.jsx("img",{src:se||"",className:"w-10 h-10 object-cover rounded bg-gray-100",onError:Te=>{Te.currentTarget.src!==ue?Te.currentTarget.src=ue||"":Te.currentTarget.style.display="none"},style:{display:se?"block":"none"},alt:q.sourceName||"source"}),!se&&T.jsx("div",{className:"w-10 h-10 rounded bg-gray-800 text-white flex items-center justify-center",children:ye})]})})(),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("a",{href:q.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium hover:underline",children:q.title}),T.jsx("span",{className:"text-gray-500 text-xs",children:q.sourceName})]})]},Z))})]})]})]},G))})})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Analysis"}),T.jsx("button",{onClick:ur,disabled:b,className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:b?"Generating":" Generate Analysis"})]}),Fe&&T.jsx("div",{className:"space-y-4",children:["stakeholders","faqs","future"].map(N=>{const G=t.analysis,q=G?.[N]||[],Z={stakeholders:"Stakeholders",faqs:"FAQs",future:"Future Questions"};return T.jsxs("details",{className:"border rounded-lg p-3 group",children:[T.jsxs("summary",{className:"cursor-pointer font-semibold text-blue-700 select-none flex justify-between items-center",children:[Z[N],T.jsx("span",{className:"text-gray-500 group-open:rotate-90 transition-transform",children:""})]}),T.jsxs("div",{className:"mt-2 space-y-3",children:[T.jsxs("button",{onClick:()=>{const se={...t},ue=G?.[N]||[],ye=N==="stakeholders"?{name:"",detail:""}:{question:"",answer:""};se.analysis={...G,[N]:[...ue,ye]},i(se)},className:"text-sm text-green-700 hover:underline",children:[" Add ",Z[N].slice(0,-1)]}),T.jsx("button",{onClick:async()=>{const se=t.analysis?.[N]||[];if(!se.length){alert("No items to analyze yet.");return}try{h(!0);const ue=await CE(N,se);if(!ue?.length){alert("No contextual terms found.");return}const ye={...t.analysis||{}},Te=[...ye.contexts||[],...ue];ye.contexts=Te,i({...t,analysis:ye}),alert(` Added ${ue.length} contextual explainers from ${N}.`)}catch(ue){console.error("GPT error (analysis contexts):",ue),alert(" Failed to generate analysis contexts.")}finally{h(!1)}},className:"text-purple-600 text-xs hover:underline mt-1 block",children:" Suggest Contexts with GPT"}),q.length===0?T.jsxs("p",{className:"text-sm text-gray-500",children:["No ",Z[N]," yet."]}):T.jsx("ul",{className:"space-y-2",children:q.map((se,ue)=>T.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border text-sm space-y-2",children:[N==="stakeholders"?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:se.name,onChange:ye=>{const Te={...t};Te.analysis[N][ue].name=ye.target.value,i(Te)},onSelect:ye=>De(`stakeholder-name-${ue}`,ye.target),placeholder:"Name",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>Ue(`stakeholder-name-${ue}`,se.name||"",ye=>{const Te={...t};Te.analysis[N][ue].name=ye,i(Te)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),T.jsx("textarea",{value:se.detail,onChange:ye=>{const Te={...t};Te.analysis[N][ue].detail=ye.target.value,i(Te)},onSelect:ye=>De(`stakeholder-detail-${ue}`,ye.target),placeholder:"Detail",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>Ue(`stakeholder-detail-${ue}`,se.detail||"",ye=>{const Te={...t};Te.analysis[N][ue].detail=ye,i(Te)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}):T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:se.question,onChange:ye=>{const Te={...t};Te.analysis[N][ue].question=ye.target.value,i(Te)},onSelect:ye=>De(`${N}-question-${ue}`,ye.target),placeholder:"Question",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>Ue(`${N}-question-${ue}`,se.question||"",ye=>{const Te={...t};Te.analysis[N][ue].question=ye,i(Te)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"}),T.jsx("textarea",{value:se.answer,onChange:ye=>{const Te={...t};Te.analysis[N][ue].answer=ye.target.value,i(Te)},onSelect:ye=>De(`${N}-answer-${ue}`,ye.target),placeholder:"Answer",className:"w-full border p-1 rounded"}),T.jsx("button",{type:"button",onClick:()=>Ue(`${N}-answer-${ue}`,se.answer||"",ye=>{const Te={...t};Te.analysis[N][ue].answer=ye,i(Te)}),className:"text-xs text-blue-600 hover:underline mt-1 text-left",children:" Link selected text"})]}),T.jsx("button",{onClick:()=>{const ye={...t},Te=[...G?.[N]||[]];Te.splice(ue,1),ye.analysis={...G,[N]:Te},i(ye)},className:"text-xs text-red-600 hover:underline",children:"Delete"})]},ue))})]})]},N)})}),T.jsxs("div",{className:"mt-6 border-t pt-4",children:[T.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analysis Context Explainers"}),T.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"These terms will be highlighted within Stakeholders, FAQs, and Future sections."}),(t.analysis?.contexts||[]).map((N,G)=>T.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[T.jsx("input",{type:"text",value:N.term,onChange:q=>{const Z={...t.analysis||{}},se=[...Z.contexts||[]];se[G]={...se[G],term:q.target.value},Z.contexts=se,i({...t,analysis:Z})},placeholder:"Term",className:"border p-2 rounded flex-1"}),T.jsx("input",{type:"text",value:N.explainer,onChange:q=>{const Z={...t.analysis||{}},se=[...Z.contexts||[]];se[G]={...se[G],explainer:q.target.value},Z.contexts=se,i({...t,analysis:Z})},placeholder:"Explainer",className:"border p-2 rounded flex-[2]"}),T.jsx("button",{type:"button",onClick:()=>{const q={...t.analysis||{}},Z=(q.contexts||[]).filter((se,ue)=>ue!==G);q.contexts=Z,i({...t,analysis:q})},className:"text-red-600 text-sm hover:underline",children:""})]},G)),T.jsx("button",{type:"button",onClick:()=>{const N={...t.analysis||{}};N.contexts=[...N.contexts||[],{term:"",explainer:""}],i({...t,analysis:N})},className:"text-blue-600 text-sm hover:underline",children:" Add analysis context term"})]}),T.jsx("button",{onClick:async()=>{if(n)try{await Wn(n,{analysis:t.analysis}),w(!1),alert(" Analysis saved successfully!")}catch(N){console.error(N),alert(" Failed to save analysis: "+N.message)}},className:"mt-4 bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:" Save Analysis"})]})]}),V&&T.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-4",children:[T.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Apply Fact-Check Results"}),T.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Paste the JSON array returned by ChatGPT. Each item should include",T.jsx("code",{className:"bg-gray-100 px-1 mx-1 rounded",children:"id"}),",",T.jsx("code",{className:"bg-gray-100 px-1 mx-1 rounded",children:"confidenceScore"}),"and",T.jsx("code",{className:"bg-gray-100 px-1 mx-1 rounded",children:"confidenceExplanation"}),"."]}),T.jsx("textarea",{className:"w-full h-64 border rounded p-2 font-mono text-xs",value:$,onChange:N=>pe(N.target.value),placeholder:'[{"id":"event-1","confidenceScore":88,"confidenceExplanation":"..."}]'}),T.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[T.jsx("button",{type:"button",className:"px-3 py-1 rounded border text-sm",onClick:()=>{U(!1),pe("")},children:"Cancel"}),T.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white text-sm",onClick:Ae,disabled:c,children:c?"Applying...":"Apply"})]})]})})]}):T.jsx("div",{className:"p-6 text-red-500",children:"Draft not found"})}function IN(){const n={gpt:{timelinePrompt:`You are a precise news editor.
Given a topic, generate a concise chronological timeline of 1015 key events.
Each event must include:
- date (YYYY-MM-DD)
- short event title
- 12 sentence factual description
- significance (1=low, 2=medium, 3=high)
Return only valid JSON with key "timeline".`,analysisPrompt:`You are a political analyst creating structured insights.
Given a topic and overview, produce three sections:
1. stakeholders  list key people/institutions and their roles.
2. faqs  questions readers might have with concise answers.
3. future  forward-looking questions with reasoned answers.
Keep all responses factual, under 50 words each. Return valid JSON with key "analysis".`},serper:{prompt:"title"},sonar:{model:"sonar",timelineSystemPrompt:`You are a meticulous news researcher.
You must:
- Use live web search.
- Produce an exhaustive but concise chronological timeline.
- Focus on distinct, real-world events (not analysis).
- Include both major and important minor events if they move the story.
- Deduplicate overlapping coverage.
- Attach multiple reliable sources per event.
- Prefer recognized and reliable outlets across geographies.
- Output VALID JSON ONLY, no commentary, no markdown.`,timelineUserPromptTemplate:`Generate a chronological news timeline.

Title: {{title}}

Summary / overview:
{{overview}}

IMPORTANT RULES:
- Maximum events: 1020
- Keep descriptions under 5 lines each
- Merge micro-events where necessary
- DO NOT use ellipses (...). DO NOT include trailing commas.
- DO NOT output anything except JSON.

JSON FORMAT (MANDATORY):
{
  "events": [
    {
      "date": "YYYY-MM-DD or null",
      "title": "string",
      "description": "string",
      "importance": 1,
      "sources": [
        {
          "title": "string",
          "url": "string",
          "sourceName": "string",
          "publishedAt": "YYYY-MM-DD or null",
          "imageUrl": "string or null"
        }
      ]
    }
  ]
}`}},[e,t]=Y.useState(n),[i,o]=Y.useState(!0),[l,c]=Y.useState(!1);Y.useEffect(()=>{(async()=>{try{const p=Fr(Tr,"settings","global"),y=await nu(p);if(y.exists()){const _=y.data();t({gpt:{timelinePrompt:_?.gpt?.timelinePrompt??n.gpt.timelinePrompt,analysisPrompt:_?.gpt?.analysisPrompt??n.gpt.analysisPrompt},serper:{prompt:_?.serper?.prompt??n.serper.prompt},sonar:{model:_?.sonar?.model??n.sonar.model,timelineSystemPrompt:_?.sonar?.timelineSystemPrompt??n.sonar.timelineSystemPrompt,timelineUserPromptTemplate:_?.sonar?.timelineUserPromptTemplate??n.sonar.timelineUserPromptTemplate}})}}catch(p){console.error(" Failed to load prompts:",p)}finally{o(!1)}})()},[]);const h=async()=>{try{c(!0);const p=Fr(Tr,"settings","global");await em(p,e,{merge:!0}),alert(" Prompts saved successfully!")}catch(p){console.error(p),alert(" Failed to save prompts")}finally{c(!1)}};return i?T.jsx("div",{className:"p-6",children:"Loading..."}):T.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[T.jsx("h1",{className:"text-3xl font-bold",children:" Prompt Editor"}),T.jsx("p",{className:"text-gray-600 mb-4",children:"Edit the default text templates used by GPT, Sonar, and Serper."}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Timeline Prompt"}),T.jsx("textarea",{value:e.gpt.timelinePrompt,onChange:p=>t({...e,gpt:{...e.gpt,timelinePrompt:p.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"GPT  Analysis Prompt"}),T.jsx("textarea",{value:e.gpt.analysisPrompt,onChange:p=>t({...e,gpt:{...e.gpt,analysisPrompt:p.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Perplexity Sonar  Timeline Prompts"}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),T.jsx("input",{value:e.sonar.model,onChange:p=>t({...e,sonar:{...e.sonar,model:p.target.value}}),className:"w-full border rounded p-2 text-sm",placeholder:"sonar (recommended)"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeline System Prompt"}),T.jsx("textarea",{value:e.sonar.timelineSystemPrompt,onChange:p=>t({...e,sonar:{...e.sonar,timelineSystemPrompt:p.target.value}}),className:"w-full border rounded p-3 h-40 text-sm"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeline User Prompt Template"}),T.jsxs("p",{className:"text-sm text-gray-600",children:["Use placeholders: ",T.jsx("code",{children:"{{title}}"})," and"," ",T.jsx("code",{children:"{{overview}}"}),"."]}),T.jsx("textarea",{value:e.sonar.timelineUserPromptTemplate,onChange:p=>t({...e,sonar:{...e.sonar,timelineUserPromptTemplate:p.target.value}}),className:"w-full border rounded p-3 h-56 text-sm"})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[T.jsx("h2",{className:"text-xl font-semibold",children:"Serper  Search Prompt"}),T.jsx("textarea",{value:e.serper.prompt,onChange:p=>t({...e,serper:{prompt:p.target.value}}),className:"w-full border rounded p-3 h-24 text-sm"})]}),T.jsx("button",{onClick:h,disabled:l,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50",children:l?"Saving":" Save All Prompts"})]})}function xN(){const[n,e]=Y.useState(""),[t,i]=Y.useState(""),[o,l]=Y.useState(""),[c,h]=Y.useState("login"),[p,y]=Y.useState(!1),[_,w]=Y.useState(null),S=async()=>{if(w(null),!n||!t){w("Please enter an email and password.");return}if(c==="signup"&&t!==o){w("Passwords do not match.");return}try{y(!0),c==="login"?await l1(Nl,n,t):await a1(Nl,n,t),window.location.href="/app"}catch(A){w(A.message||"Authentication failed.")}finally{y(!1)}};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:T.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow p-8",children:[T.jsx("h1",{className:"text-2xl font-bold mb-4",children:c==="login"?"CMS Login":"Create CMS Account"}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("input",{placeholder:"Email",type:"email",value:n,onChange:A=>e(A.target.value),className:"border p-2 w-full rounded"}),T.jsx("input",{placeholder:"Password",type:"password",value:t,onChange:A=>i(A.target.value),className:"border p-2 w-full rounded"}),c==="signup"&&T.jsx("input",{placeholder:"Confirm Password",type:"password",value:o,onChange:A=>l(A.target.value),className:"border p-2 w-full rounded"})]}),_&&T.jsx("p",{className:"text-red-600 text-sm mt-3",children:_}),T.jsx("button",{type:"button",onClick:S,disabled:p,className:"mt-4 w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-60",children:p?"Please wait":c==="login"?"Login":"Sign Up"}),T.jsxs("p",{className:"text-sm text-gray-600 mt-4 text-center",children:[c==="login"?"Need an account?":"Already have an account?"," ",T.jsx("button",{type:"button",onClick:()=>h(A=>A==="login"?"signup":"login"),className:"text-blue-600 hover:underline font-medium",children:c==="login"?"Sign Up":"Log In"})]})]})})}const CN=dI([{path:"/login",element:T.jsx(xN,{})},{path:"/app",element:T.jsx(oN,{}),children:[{index:!0,element:T.jsxs("div",{className:"p-6",children:[T.jsx("h1",{className:"text-3xl font-bold",children:"Welcome to WaitWhat? CMS"}),T.jsx("p",{className:"text-gray-600 mt-2",children:"Use the sidebar to manage Theme and Story drafts, or adjust prompts in the Prompt Lab."})]})},{path:"drafts/themes",element:T.jsx(lN,{})},{path:"drafts/stories",element:T.jsx(uN,{})},{path:"drafts/:id",element:T.jsx(SN,{})},{path:"promptlab",element:T.jsx(IN,{})}]},{path:"*",element:T.jsx(nI,{to:"/login",replace:!0})}]);jT.createRoot(document.getElementById("root")).render(T.jsx(S_.StrictMode,{children:T.jsx(_I,{router:CN})}));
